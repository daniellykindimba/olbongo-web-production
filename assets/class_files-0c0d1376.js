import{r as a,c as m,l as k,j as e,R as N,d as V,I as L,e as q,a as E,L as M,B as P,D as R,g as z,dp as B,_ as H}from"./index-0218b022.js";import{a as T,F as _}from"./file_item_component-abbfb25a.js";import"./index-27724231.js";import"./index-ab36f351.js";import"./toConsumableArray-d4f18d80.js";import"./addEventListener-a1a8dbaa.js";import"./index.esm-d9d36c7b.js";import"./iconBase-fea8a0f2.js";import"./index-1de60405.js";const $=l=>{const[o,n]=a.useState([]),[g,f]=a.useState(!0),[h,x]=a.useState(1),[F]=m.useForm(),[A,I]=a.useState(0),[O,S]=a.useState(0),[d,j]=a.useState(!0);k();const[w,p]=a.useState(!1),[c,v]=a.useState(),y=t=>{v(t),p(!0)},u=async(t,r="",s=!1)=>{if(d){const{data:i}=await z.custom({url:"",method:"get",meta:{operation:"darasaFiles",variables:{page:{value:parseInt(t.toString()),type:"Int",required:!0},key:{value:r,type:"String",required:!1},id:{value:parseInt(l.id===void 0?"0":l.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:B}]}}).catch(()=>(H.error("Error loading files"),{data:null})).then(D=>D);i&&(S(i.total),I(i.pages),x(i.page),j(i.hasNext),(r.length>0||r.length===0&&s)&&n(i.results),i.results.length>0&&!s&&n(o.concat(i.results))),f(!1)}},b=t=>{const r=o.map(s=>(s.id===t.id&&(s.imageVisible=!1),s));n(r)},C=t=>{const r=o.map(s=>(s.id===t.id&&(s.imageVisible=!0),s));n(r)};return a.useEffect(()=>{u(h)},[]),e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx(V,{span:20,children:e.jsx(m,{layout:"vertical",form:F,onFinish:t=>u(0,t.key,!0),children:e.jsx(m.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(q,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(E,{spinning:g,children:[e.jsx(M,{itemLayout:"horizontal",dataSource:o,renderItem:t=>e.jsx(T,{item:t,min:l.min??!1,handleMakeImageNotVisible:b,handleMakeImageVisible:C,handleShowFileInfoDrawer:y})}),d&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(P,{type:"primary",onClick:()=>u(h+1),disabled:!d,children:"Load More"})})]})}),e.jsx(R,{title:"File Informations",anchor:"right",width:"35vw",onClose:t=>p(t),open:w,children:e.jsx(_,{id:c==null?void 0:c.id})})]})};export{$ as ClassFiles};
