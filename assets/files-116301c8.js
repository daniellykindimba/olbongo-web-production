import{bD as Z,bC as ee,Y as oe,di as fe,dl as G,bG as y,dj as M,r as a,bE as te,bF as se,j as o,aq as D,bH as re,F as S,m as he,b5 as me,R as xe,n as W,a as O,aV as L,h2 as ve,k as H,I as V,aN as K,B as E,al as be,M as A,g as Y,_ as J}from"./index-8383052a.js";import{F as Ce}from"./file_item_component-935533f3.js";import{U as ye,a as je}from"./upload_folder-aec09a6a.js";import{D as Fe}from"./index-05816c56.js";import{f as Be}from"./data_objects-4aa0e35d.js";import{F as Te}from"./files_component-d5a34c99.js";import{A as ze}from"./index-8993e350.js";import"./index-2c4983dd.js";import"./index-df69e7d2.js";import"./objectWithoutProperties-b8bf9153.js";import"./DialogWrap-346db36a.js";import"./index.esm-02dc71fa.js";import"./iconBase-5c18f08e.js";import"./index-79c49ce7.js";import"./index-a08762ee.js";import"./ReactTimeAgo-50ae14ef.js";import"./memoize-one.esm-297ddbcb.js";import"./index-f01bf1ec.js";import"./useNotification-db69f818.js";import"./PickerPanel-03789d05.js";import"./localeData-23d6edf5.js";import"./RangePicker-2155f470.js";import"./index-c090ff23.js";import"./InputNumber-f580c739.js";import"./index-55e86b79.js";import"./index-48b0d1f7.js";function Re(e){return ee("MuiToggleButton",e)}const Se=Z("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge"]),Q=Se,$e=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],we=e=>{const{classes:t,fullWidth:r,selected:l,disabled:c,size:p,color:x}=e,n={root:["root",l&&"selected",c&&"disabled",r&&"fullWidth",`size${G(p)}`,x]};return re(n,Re,t)},ke=oe(fe,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`size${G(r.size)}`]]}})(({theme:e,ownerState:t})=>{let r=t.color==="standard"?e.palette.text.primary:e.palette[t.color].main,l;return e.vars&&(r=t.color==="standard"?e.vars.palette.text.primary:e.vars.palette[t.color].main,l=t.color==="standard"?e.vars.palette.text.primaryChannel:e.vars.palette[t.color].mainChannel),y({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${Q.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:M(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Q.selected}`]:{color:r,backgroundColor:e.vars?`rgba(${l} / ${e.vars.palette.action.selectedOpacity})`:M(r,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${l} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:M(r,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${l} / ${e.vars.palette.action.selectedOpacity})`:M(r,e.palette.action.selectedOpacity)}}}},t.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},t.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)})}),Ue=a.forwardRef(function(t,r){const l=te({props:t,name:"MuiToggleButton"}),{children:c,className:p,color:x="standard",disabled:n=!1,disableFocusRipple:j=!1,fullWidth:u=!1,onChange:g,onClick:b,selected:$,size:d="medium",value:C}=l,F=se(l,$e),f=y({},l,{color:x,disabled:n,disableFocusRipple:j,fullWidth:u,size:d}),B=we(f),U=i=>{b&&(b(i,C),i.defaultPrevented)||g&&g(i,C)};return o.jsx(ke,y({className:D(B.root,p),disabled:n,focusRipple:!j,ref:r,onClick:U,onChange:g,value:C,ownerState:f,"aria-pressed":$},F,{children:c}))}),X=Ue;function Me(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.indexOf(e)>=0:e===t}function We(e){return ee("MuiToggleButtonGroup",e)}const Oe=Z("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical"]),m=Oe,Ge=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],Ie=e=>{const{classes:t,orientation:r,fullWidth:l,disabled:c}=e,p={root:["root",r==="vertical"&&"vertical",l&&"fullWidth"],grouped:["grouped",`grouped${G(r)}`,c&&"disabled"]};return re(p,We,t)},Ne=oe("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${m.grouped}`]:t.grouped},{[`& .${m.grouped}`]:t[`grouped${G(r.orientation)}`]},t.root,r.orientation==="vertical"&&t.vertical,r.fullWidth&&t.fullWidth]}})(({ownerState:e,theme:t})=>y({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.orientation==="vertical"&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${m.grouped}`]:y({},e.orientation==="horizontal"?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${m.selected} + .${m.grouped}.${m.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${m.selected} + .${m.grouped}.${m.selected}`]:{borderTop:0,marginTop:0}})})),Le=a.forwardRef(function(t,r){const l=te({props:t,name:"MuiToggleButtonGroup"}),{children:c,className:p,color:x="standard",disabled:n=!1,exclusive:j=!1,fullWidth:u=!1,onChange:g,orientation:b="horizontal",size:$="medium",value:d}=l,C=se(l,Ge),F=y({},l,{disabled:n,fullWidth:u,orientation:b,size:$}),f=Ie(F),B=(i,v)=>{if(!g)return;const w=d&&d.indexOf(v);let T;d&&w>=0?(T=d.slice(),T.splice(w,1)):T=d?d.concat(v):[v],g(i,T)},U=(i,v)=>{g&&g(i,d===v?null:v)};return o.jsx(Ne,y({role:"group",className:D(f.root,p),ref:r,ownerState:F},C,{children:a.Children.map(c,i=>a.isValidElement(i)?a.cloneElement(i,{className:D(f.grouped,i.props.className),onChange:j?U:B,selected:i.props.selected===void 0?Me(i.props.value,d):i.props.selected,size:i.props.size||$,fullWidth:u,color:i.props.color||x,disabled:i.props.disabled||n}):null)}))}),Ee=Le,mo=e=>{const[t,r]=a.useState(!1),[l,c]=a.useState([]),[p,x]=a.useState(!0),[n,j]=a.useState(1),[u,g]=a.useState(e.min?5:20),[b]=S.useForm();S.useForm();const[$,d]=a.useState(0),[C,F]=a.useState(0),[f,B]=a.useState(""),[U,i]=a.useState(!0);he();const[v,w]=a.useState(!1),[T,I]=a.useState(!1),[ae,le]=a.useState(!1),[N,Ae]=a.useState(),[ie,ne]=a.useState(!1),[P,de]=a.useState("files"),z=!me.useBreakpoint().lg,_=()=>{w(!0)},q=s=>{c([...s,...l])},k=async(s,h="",ue=25)=>{x(!0);const{data:R}=await Y.custom({url:"",method:"get",meta:{operation:"files",variables:{page:{value:s,type:"Int",required:!0},key:{value:h,type:"String",required:!1},pageSize:{value:ue,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Be}]}}).catch(()=>(J.error("Error getting files"),{data:null})).then(ge=>ge);R&&(F(R.total),d(R.pages),j(R.page),i(R.hasNext),c(R.results)),x(!1)},ce=(s,h)=>{g(h),k(n,f,h)},pe=async()=>{const{data:s}=await Y.custom({url:"",method:"get",meta:{operation:"odriveAuthorization",variables:{},fields:["auth"]}}).catch(()=>(J.error("Error getting Odrive Authorization"),{data:null})).then(h=>h);s&&r(s.auth.upload_files)};return a.useEffect(()=>{pe(),k(n,f,u)},[]),o.jsxs(o.Fragment,{children:[!e.min&&o.jsx(ze,{offsetTop:63,children:o.jsxs(xe,{children:[z&&o.jsxs(o.Fragment,{children:[o.jsxs(W,{span:24,style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:[o.jsx(O,{size:"large",icon:o.jsx(L,{}),disabled:!t,onClick:()=>_(),children:"Upload File(s)"}),o.jsx(O,{size:"large",icon:o.jsx(ve,{}),disabled:!t,onClick:()=>I(!0),children:"Upload Folder"})]}),o.jsx(W,{span:24,children:o.jsx(H,{bodyStyle:{paddingTop:10,paddingBottom:0},children:o.jsx(S,{layout:"vertical",form:b,onFinish:s=>{B(s.key),k(1,s.key,u)},children:o.jsx(S.Item,{name:"key",children:o.jsx(V,{size:"large",placeholder:"Search file(s)...",prefix:o.jsx(K,{}),autoComplete:"off",allowClear:!0})})})})})]}),!z&&o.jsxs(o.Fragment,{children:[o.jsx(W,{span:12,children:o.jsx(H,{bodyStyle:{paddingTop:10,paddingBottom:0},children:o.jsx(S,{layout:"vertical",form:b,onFinish:s=>{B(s.key),k(1,s.key,u)},children:o.jsx(S.Item,{name:"key",children:o.jsx(V,{size:"large",placeholder:"Search file(s)...",prefix:o.jsx(K,{}),autoComplete:"off",allowClear:!0})})})})}),o.jsxs(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:[o.jsx(O,{size:"large",icon:o.jsx(L,{}),disabled:!t,onClick:()=>_(),children:"Upload File(s)"}),o.jsx(O,{size:"large",icon:o.jsx(L,{}),disabled:!t,onClick:()=>I(!0),children:"Upload Folder"})]})]})]})}),!e.min&&o.jsxs(E,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:2,marginTop:2},children:[o.jsx(E,{sx:{marginRight:2,fontSize:24},children:"Filter By:"}),o.jsxs(Ee,{color:"primary",value:P,exclusive:!0,onChange:(s,h)=>{h!==null&&de(h)},"aria-label":"Alignment",sx:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[o.jsx(X,{value:"files",sx:{"&.Mui-selected":{backgroundColor:"red",color:"white",fontWeight:"bold","&:hover":{backgroundColor:"red",color:"white",fontWeight:"bold"}},fontWeight:"bold"},children:"Files"}),o.jsx(X,{value:"folders",sx:{"&.Mui-selected":{backgroundColor:"red",color:"white",fontWeight:"bold","&:hover":{backgroundColor:"red",color:"white",fontWeight:"bold"}},fontWeight:"bold"},children:"Folders"})]})]}),P==="files"&&o.jsxs(o.Fragment,{children:[o.jsx(E,{sx:{maxHeight:"calc(100vh - 330px)",overflowY:"auto"},children:o.jsx("div",{style:{marginTop:e.min?0:20},children:o.jsx(Te,{showDrive:!0,loading:p,data:l,min:e.min??!1})})}),!e.min&&o.jsx(o.Fragment,{children:!p&&o.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:10,marginTop:20},children:o.jsx(be,{showSizeChanger:!0,showQuickJumper:!0,defaultCurrent:n,current:n,total:C,pageSize:u,onShowSizeChange:ce,onChange:s=>k(s,f,u)})})})]}),o.jsx(A,{title:"Uploading Files",open:v,onClose:s=>w(s),width:z?"100vw":"50vw",children:o.jsx(ye,{onFinish:s=>q(s),mode:"file"})}),o.jsx(A,{title:"Uploading Folder",open:T,onClose:s=>I(s),width:z?"100vw":"50vw",children:o.jsx(je,{onFinish:s=>q(s),mode:"file"})}),o.jsx(Fe,{title:"File Informations",anchor:"right",width:z?"100vw":"35vw",onClose:s=>le(s),open:ae,children:o.jsx(Ce,{id:N==null?void 0:N.id})}),o.jsx(A,{title:"Share File",open:ie,onClose:s=>ne(s),width:z?"100vw":"50vw",children:o.jsx("span",{})})]})};export{mo as Files};
