import{r as e,aT as n,c as I,j as t,a8 as C,aW as P,aP as B,a1 as D,B as k,g as E,_ as N,cn as O,cL as q,aN as i,cc as H,cz as h}from"./index-c2aacc94.js";import{F as L}from"./file_item_component-3794bacd.js";import{D as T}from"./index-30af6731.js";import{f as _}from"./data_objects-8117e4a9.js";import{F as z}from"./files_component-2c2c8389.js";import{G}from"./index-1c6a345e.js";import{S as R}from"./SearchOutlined-0a7c7395.js";import"./index-170d2a9e.js";import"./defineProperty-549f2390.js";import"./pdf_document_viewer-ccc763c3.js";import"./SecurityScanOutlined-b845c44a.js";import"./index-792862f2.js";import"./Skeleton-7afb965a.js";import"./DotChartOutlined-f39c986e.js";import"./index-0a439b65.js";import"./index-c8b7207b.js";import"./index-7cd118b8.js";import"./ActionButton-af3929dc.js";import"./index-d1b8c76e.js";import"./EditOutlined-401a1613.js";import"./transButton-558586a5.js";import"./index-ebc226c3.js";import"./index.esm-da3a81a9.js";import"./index-5a878f72.js";import"./index-39dba383.js";import"./index-a4ef8b74.js";import"./Image-0cfd8829.js";import"./DialogWrap-bd4b8c41.js";import"./ZoomOutOutlined-4d40b3b9.js";import"./index-c314d154.js";import"./fade-83a387f8.js";import"./DeleteOutlined-d1e219b7.js";import"./DeleteOutlined-25685737.js";import"./DownloadOutlined-5b7a48d4.js";import"./DownloadOutlined-6cd35f11.js";import"./InfoCircleOutlined-90b30a3a.js";import"./MoreOutlined-012dadc2.js";import"./SaveOutlined-eb6339bd.js";import"./index-4f75291d.js";import"./InfoCircleFilled-137bb87b.js";import"./InfoCircleFilled-baaa675e.js";import"./SmileOutlined-e0ec5bcf.js";import"./ExclamationCircleOutlined-5ebd3c48.js";const W=M=>{const[l,m]=e.useState([]),[p,f]=e.useState(!0),[x,j]=e.useState(1),[A,g]=e.useState(0),[J,F]=e.useState(!0),[K,S]=e.useState(0),[v]=n.useForm();I();const[w,b]=e.useState(!1),[o,Q]=e.useState(),c=!G.useBreakpoint().lg,u=async(s,a="",d=!1)=>{const{data:r}=await E.custom({url:"",method:"get",meta:{operation:"publicFiles",variables:{page:{value:s,type:"Int",required:!0},key:{value:a,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:_}]}}).catch(()=>(N.error("Error while fetching files"),{data:null})).then(y=>y);r&&(g(r.total),S(r.pages),F(r.hasNext),j(r.page),(a.length>0||a.length===0&&d)&&m(r.results),r.results.length>0&&!d&&m(l.concat(r.results))),f(!1)};return e.useEffect(()=>{u(x)},[]),p?t.jsx(t.Fragment,{children:t.jsx("div",{style:{display:"flex",justifyContent:"center"},children:t.jsx(C,{})})}):t.jsxs(t.Fragment,{children:[t.jsx(P,{children:t.jsx(B,{span:c?24:20,children:t.jsx(n,{layout:"vertical",form:v,onFinish:s=>u(0,s.key,!0),children:t.jsx(n.Item,{name:"key",children:t.jsx(D,{size:"large",placeholder:"Search file(s)...",prefix:t.jsx(R,{}),autoComplete:"off",allowClear:!0})})})})}),t.jsx(k,{children:t.jsx(z,{showDrive:!1,loading:p,data:l,min:!1})}),t.jsx(T,{title:"File Informations",anchor:"right",width:c?"100vw":"35vw",onClose:s=>b(s),open:w,noOverFlow:!0,children:t.jsx(L,{id:o==null?void 0:o.id})})]})},_t=()=>(e.useEffect(()=>{document.title=O.system_name+": Public Files"},[]),t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{marginTop:10,marginBottom:10},children:t.jsx(q,{children:t.jsxs(i,{children:[t.jsxs(i.Item,{children:[t.jsx(H,{}),t.jsx(h,{to:"/",children:"Home"})]}),t.jsx(i.Item,{children:t.jsx(h,{to:"/odrive",children:"Odrive"})}),t.jsx(i.Item,{children:"Public Files"})]})})}),t.jsx(W,{})]}));export{_t as DrivesPublicFilesPage};
