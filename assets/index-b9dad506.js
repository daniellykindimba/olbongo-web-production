import{r,_ as w,R as I,a0 as Q,O as B,fZ as W,f_ as ce,ae as z,f$ as ie,g0 as ue,C as L,c as N,T as fe,U as de,Q as me,E as M,az as Ce,aj as ge,ai as be,ah as ve,g1 as xe,ci as ye,cj as pe,ap as Oe,as as Pe}from"./index-2a194481.js";import{I as he}from"./InfoCircleFilled-f367ccf6.js";import{A as D}from"./ActionButton-d68b8b67.js";import{D as ke,P as Ee}from"./DialogWrap-8e36c74f.js";import{u as G}from"./index-43845558.js";function je(){const[e,n]=r.useState([]),l=r.useCallback(t=>(n(o=>[].concat(w(o),[t])),()=>{n(o=>o.filter(a=>a!==t))}),[]);return[e,l]}function Y(e,n){return I.createElement("span",{className:`${e}-close-x`},n||I.createElement(Q,{className:`${e}-close-icon`}))}const U=e=>{const{okText:n,okType:l="primary",cancelText:t,confirmLoading:o,onOk:a,onCancel:g,okButtonProps:y,cancelButtonProps:s}=e,[c]=B("Modal",W());return I.createElement(ce,{disabled:!1},I.createElement(z,Object.assign({onClick:g},s),t||(c==null?void 0:c.cancelText)),I.createElement(z,Object.assign({},ie(l),{loading:o,onClick:a},y),n||(c==null?void 0:c.okText)))};var Te=globalThis&&globalThis.__rest||function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};let _;const we=e=>{_={x:e.pageX,y:e.pageY},setTimeout(()=>{_=null},100)};ue()&&document.documentElement.addEventListener("click",we,!0);const Ne=e=>{var n;const{getPopupContainer:l,getPrefixCls:t,direction:o,modal:a}=r.useContext(L),g=$=>{const{onCancel:j}=e;j==null||j($)},y=$=>{const{onOk:j}=e;j==null||j($)},{prefixCls:s,className:c,rootClassName:f,open:u,wrapClassName:m,centered:d,getContainer:x,closeIcon:h,closable:v,focusTriggerAfterClose:i=!0,style:C,visible:p,width:P=520,footer:O}=e,b=Te(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","closeIcon","closable","focusTriggerAfterClose","style","visible","width","footer"]),E=t("modal",s),F=t(),[R,A]=G(E),le=N(m,{[`${E}-centered`]:!!d,[`${E}-wrap-rtl`]:o==="rtl"}),re=O===void 0?r.createElement(U,Object.assign({},e,{onOk:y,onCancel:g})):O,[se,ae]=fe(v,h,$=>Y(E,$),r.createElement(Q,{className:`${E}-close-icon`}),!0);return R(r.createElement(de,null,r.createElement(me,{status:!0,override:!0},r.createElement(ke,Object.assign({width:P},b,{getContainer:x===void 0?l:x,prefixCls:E,rootClassName:N(A,f),wrapClassName:le,footer:re,visible:u??p,mousePosition:(n=b.mousePosition)!==null&&n!==void 0?n:_,onClose:g,closable:se,closeIcon:ae,focusTriggerAfterClose:i,transitionName:M(F,"zoom",e.transitionName),maskTransitionName:M(F,"fade",e.maskTransitionName),className:N(A,c,a==null?void 0:a.className),style:Object.assign(Object.assign({},a==null?void 0:a.style),C)})))))},X=Ne;function Z(e){const{icon:n,onCancel:l,onOk:t,close:o,onConfirm:a,isSilent:g,okText:y,okButtonProps:s,cancelText:c,cancelButtonProps:f,confirmPrefixCls:u,rootPrefixCls:m,type:d,okCancel:x,footer:h,locale:v}=e;let i=n;if(!n&&n!==null)switch(d){case"info":i=r.createElement(he,null);break;case"success":i=r.createElement(ve,null);break;case"error":i=r.createElement(be,null);break;default:i=r.createElement(ge,null)}const C=e.okType||"primary",p=x??d==="confirm",P=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[O]=B("Modal"),b=v||O,E=p&&r.createElement(D,{isSilent:g,actionFn:l,close:function(){o==null||o.apply(void 0,arguments),a==null||a(!1)},autoFocus:P==="cancel",buttonProps:f,prefixCls:`${m}-btn`},c||(b==null?void 0:b.cancelText));return r.createElement("div",{className:`${u}-body-wrapper`},r.createElement("div",{className:`${u}-body`},i,e.title===void 0?null:r.createElement("span",{className:`${u}-title`},e.title),r.createElement("div",{className:`${u}-content`},e.content)),h===void 0?r.createElement("div",{className:`${u}-btns`},E,r.createElement(D,{isSilent:g,type:C,actionFn:t,close:function(){o==null||o.apply(void 0,arguments),a==null||a(!0)},autoFocus:P==="ok",buttonProps:s,prefixCls:`${m}-btn`},y||(p?b==null?void 0:b.okText:b==null?void 0:b.justOkText))):h)}const $e=e=>{const{close:n,zIndex:l,afterClose:t,visible:o,open:a,keyboard:g,centered:y,getContainer:s,maskStyle:c,direction:f,prefixCls:u,wrapClassName:m,rootPrefixCls:d,iconPrefixCls:x,theme:h,bodyStyle:v,closable:i=!1,closeIcon:C,modalRender:p,focusTriggerAfterClose:P}=e,O=`${u}-confirm`,b=e.width||416,E=e.style||{},F=e.mask===void 0?!0:e.mask,R=e.maskClosable===void 0?!1:e.maskClosable,A=N(O,`${O}-${e.type}`,{[`${O}-rtl`]:f==="rtl"},e.className);return r.createElement(Ce,{prefixCls:d,iconPrefixCls:x,direction:f,theme:h},r.createElement(X,{prefixCls:u,className:A,wrapClassName:N({[`${O}-centered`]:!!e.centered},m),onCancel:()=>n==null?void 0:n({triggerCancel:!0}),open:a,title:"",footer:null,transitionName:M(d,"zoom",e.transitionName),maskTransitionName:M(d,"fade",e.maskTransitionName),mask:F,maskClosable:R,maskStyle:c,style:E,bodyStyle:v,width:b,zIndex:l,afterClose:t,keyboard:g,centered:y,getContainer:s,closable:i,closeIcon:C,modalRender:p,focusTriggerAfterClose:P},r.createElement(Z,Object.assign({},e,{confirmPrefixCls:O}))))},q=$e,Ie=[],T=Ie;var Se=globalThis&&globalThis.__rest||function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};let J="";function Fe(){return J}function S(e){const n=document.createDocumentFragment();let l=Object.assign(Object.assign({},e),{close:g,open:!0}),t;function o(){for(var s=arguments.length,c=new Array(s),f=0;f<s;f++)c[f]=arguments[f];const u=c.some(m=>m&&m.triggerCancel);e.onCancel&&u&&e.onCancel.apply(e,[()=>{}].concat(w(c.slice(1))));for(let m=0;m<T.length;m++)if(T[m]===g){T.splice(m,1);break}xe(n)}function a(s){var{okText:c,cancelText:f,prefixCls:u,getContainer:m}=s,d=Se(s,["okText","cancelText","prefixCls","getContainer"]);clearTimeout(t),t=setTimeout(()=>{const x=W(),{getPrefixCls:h,getIconPrefixCls:v,getTheme:i}=pe(),C=h(void 0,Fe()),p=u||`${C}-modal`,P=v(),O=i();let b=m;b===!1&&(b=void 0),ye(r.createElement(q,Object.assign({},d,{getContainer:b,prefixCls:p,rootPrefixCls:C,iconPrefixCls:P,okText:c,locale:x,theme:O,cancelText:f||x.cancelText})),n)})}function g(){for(var s=arguments.length,c=new Array(s),f=0;f<s;f++)c[f]=arguments[f];l=Object.assign(Object.assign({},l),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),o.apply(this,c)}}),l.visible&&delete l.visible,a(l)}function y(s){typeof s=="function"?l=s(l):l=Object.assign(Object.assign({},l),s),a(l)}return a(l),T.push(g),{destroy:g,update:y}}function K(e){return Object.assign(Object.assign({},e),{type:"warning"})}function V(e){return Object.assign(Object.assign({},e),{type:"info"})}function ee(e){return Object.assign(Object.assign({},e),{type:"success"})}function te(e){return Object.assign(Object.assign({},e),{type:"error"})}function ne(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function Ae(e){let{rootPrefixCls:n}=e;J=n}var Me=globalThis&&globalThis.__rest||function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};const Re=(e,n)=>{var l,{afterClose:t,config:o}=e,a=Me(e,["afterClose","config"]);const[g,y]=r.useState(!0),[s,c]=r.useState(o),{direction:f,getPrefixCls:u}=r.useContext(L),m=u("modal"),d=u(),x=()=>{var C;t(),(C=s.afterClose)===null||C===void 0||C.call(s)},h=function(){y(!1);for(var C=arguments.length,p=new Array(C),P=0;P<C;P++)p[P]=arguments[P];const O=p.some(b=>b&&b.triggerCancel);s.onCancel&&O&&s.onCancel.apply(s,[()=>{}].concat(w(p.slice(1))))};r.useImperativeHandle(n,()=>({destroy:h,update:C=>{c(p=>Object.assign(Object.assign({},p),C))}}));const v=(l=s.okCancel)!==null&&l!==void 0?l:s.type==="confirm",[i]=B("Modal",Oe.Modal);return r.createElement(q,Object.assign({prefixCls:m,rootPrefixCls:d},s,{close:h,open:g,afterClose:x,okText:s.okText||(v?i==null?void 0:i.okText:i==null?void 0:i.justOkText),direction:s.direction||f,cancelText:s.cancelText||(i==null?void 0:i.cancelText)},a))},_e=r.forwardRef(Re);let H=0;const Be=r.memo(r.forwardRef((e,n)=>{const[l,t]=je();return r.useImperativeHandle(n,()=>({patchElement:t}),[]),r.createElement(r.Fragment,null,l)}));function Le(){const e=r.useRef(null),[n,l]=r.useState([]);r.useEffect(()=>{n.length&&(w(n).forEach(g=>{g()}),l([]))},[n]);const t=r.useCallback(a=>function(y){var s;H+=1;const c=r.createRef();let f;const u=new Promise(v=>{f=v});let m=!1,d;const x=r.createElement(_e,{key:`modal-${H}`,config:a(y),ref:c,afterClose:()=>{d==null||d()},isSilent:()=>m,onConfirm:v=>{f(v)}});return d=(s=e.current)===null||s===void 0?void 0:s.patchElement(x),d&&T.push(d),{destroy:()=>{function v(){var i;(i=c.current)===null||i===void 0||i.destroy()}c.current?v():l(i=>[].concat(w(i),[v]))},update:v=>{function i(){var C;(C=c.current)===null||C===void 0||C.update(v)}c.current?i():l(C=>[].concat(w(C),[i]))},then:v=>(m=!0,u.then(v))}},[]);return[r.useMemo(()=>({info:t(V),success:t(ee),error:t(te),warning:t(K),confirm:t(ne)}),[]),r.createElement(Be,{key:"modal-holder",ref:e})]}var ze=globalThis&&globalThis.__rest||function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};const De=e=>{const{prefixCls:n,className:l,closeIcon:t,closable:o,type:a,title:g,children:y}=e,s=ze(e,["prefixCls","className","closeIcon","closable","type","title","children"]),{getPrefixCls:c}=r.useContext(L),f=c(),u=n||c("modal"),[,m]=G(u),d=`${u}-confirm`;let x={};return a?x={closable:o??!1,title:"",footer:"",children:r.createElement(Z,Object.assign({},e,{confirmPrefixCls:d,rootPrefixCls:f,content:y}))}:x={closable:o??!0,title:g,footer:e.footer===void 0?r.createElement(U,Object.assign({},e)):e.footer,children:y},r.createElement(Ee,Object.assign({prefixCls:u,className:N(m,`${u}-pure-panel`,a&&d,a&&`${d}-${a}`,l)},s,{closeIcon:Y(u,t),closable:o},x))},He=Pe(De);function oe(e){return S(K(e))}const k=X;k.useModal=Le;k.info=function(n){return S(V(n))};k.success=function(n){return S(ee(n))};k.error=function(n){return S(te(n))};k.warning=oe;k.warn=oe;k.confirm=function(n){return S(ne(n))};k.destroyAll=function(){for(;T.length;){const n=T.pop();n&&n()}};k.config=Ae;k._InternalPanelDoNotUseOrYouWillBeFired=He;const Xe=k;export{Xe as M,Le as u};
