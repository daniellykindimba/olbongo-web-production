import{r as t,aV as a,c as y,j as e,a7 as I,aZ as P,aR as C,a0 as D,cT as k,B,g as E,_ as q,c7 as N,aP as n,jO as O,cq as H}from"./index-ccfcd4da.js";import{F as R}from"./file_item_component-d475cd2c.js";import{D as T}from"./index-36291a54.js";import{f as _}from"./data_objects-ce8f5e44.js";import{F as G}from"./files_component-67e684ff.js";import{G as L}from"./index-efb9c68a.js";import"./index-3cbde207.js";import"./defineProperty-396cb65c.js";import"./pdf_document_viewer-45e7c6a7.js";import"./index-b84643af.js";import"./index-e733c2fd.js";import"./Skeleton-a2d4f426.js";import"./index-5c2e1e93.js";import"./index-27f5ca3f.js";import"./index-afc6ce50.js";import"./ActionButton-3b8e0c74.js";import"./index-b8a04bf2.js";import"./transButton-719ccb9d.js";import"./index-a75cd6c4.js";import"./index.esm-a9bf82b4.js";import"./iconBase-fee9e477.js";import"./index-885f566c.js";import"./index-3bfb9ed3.js";import"./index-08a49527.js";import"./Image-eeb38737.js";import"./DialogWrap-1d0538d4.js";import"./index-7da8bd4f.js";import"./fade-dd39912a.js";import"./index-65dd5ac4.js";import"./InfoCircleFilled-f916d949.js";const z=M=>{const[l,m]=t.useState([]),[p,f]=t.useState(!0),[h,x]=t.useState(1),[V,g]=t.useState(0),[Z,j]=t.useState(!0),[A,F]=t.useState(0),[S]=a.useForm();y();const[v,w]=t.useState(!1),[o,J]=t.useState(),c=!L.useBreakpoint().lg,u=async(r,i="",d=!1)=>{const{data:s}=await E.custom({url:"",method:"get",meta:{operation:"publicFiles",variables:{page:{value:r,type:"Int",required:!0},key:{value:i,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:_}]}}).catch(()=>(q.error("Error while fetching files"),{data:null})).then(b=>b);s&&(g(s.total),F(s.pages),j(s.hasNext),x(s.page),(i.length>0||i.length===0&&d)&&m(s.results),s.results.length>0&&!d&&m(l.concat(s.results))),f(!1)};return t.useEffect(()=>{u(h)},[]),p?e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(I,{})})}):e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx(C,{span:c?24:20,children:e.jsx(a,{layout:"vertical",form:S,onFinish:r=>u(0,r.key,!0),children:e.jsx(a.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(k,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(B,{children:e.jsx(G,{showDrive:!1,loading:p,data:l,min:!1})}),e.jsx(T,{title:"File Informations",anchor:"right",width:c?"100vw":"35vw",onClose:r=>w(r),open:v,noOverFlow:!0,children:e.jsx(R,{id:o==null?void 0:o.id})})]})},ye=()=>(t.useEffect(()=>{document.title=N.system_name+": Public Files"},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsxs(n,{children:[e.jsxs(n.Item,{children:[e.jsx(O,{}),e.jsx(H,{to:"/odrive",children:"Home"})]}),e.jsx(n.Item,{children:"Public Files"})]})}),e.jsx(z,{})]}));export{ye as DrivesPublicFilesPage};
