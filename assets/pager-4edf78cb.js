import{bG as fs,bF as Ss,bD as vs,cB as Cs,r as s,bC as bs,b4 as Is,j as e,w as Fs,bP as ks,bQ as Ms,ch as Ls,cJ as xt,cn as ye,aX as pe,aP as B,aW as ne,cL as Fe,aN as V,cz as ae,cX as As,aT as a,a1 as _,av as D,a8 as oe,aZ as le,cM as Es,cY as Ns,_ as x,cZ as Ps,c_ as Ds,c$ as zs,ce,aY as je,aR as Me,aU as J,af as Z,d0 as Ts,d1 as qs,d2 as Rs,d3 as Ys,d4 as Gs,S as H,d5 as Os,g as w,d6 as Ks,d7 as _s,cm as Ye,d8 as Bs,d9 as Us,da as Ws,cl as re,aO as Le,cd as Ge,db as Vs,dc as $s,dd as Hs,c as gt,P as Yt,de as Js,df as Qs,dg as ws,dh as Xs,di as Zs,dj as en,dk as tn,dl as sn,dm as nn,dn as rn,dp as ln,dq as an,dr as on,ds as dn,dt as Gt,du as Ot,dv as cn,dw as un,dx as hn,dy as mn,dz as xn,dA as Kt,dB as gn,dC as jn,dD as yn,dE as pn,dF as fn,dG as Sn,dH as vn,dI as _t,dJ as Cn,dK as bn,dL as In,dM as Fn,dN as kn,u as Ue,dO as Mn,dP as Ln,dQ as An,B as Ze,dR as En,dS as Nn,dT as Pn,cP as Bt,dU as We,dV as At,R as Dn,F as zn,dW as Tn,dX as qn,dY as Ut,dZ as Wt,d_ as Rn,d$ as Yn,e0 as Gn,e1 as On,e2 as Kn,e3 as _n,e4 as Bn,e5 as Un,e6 as Wn,e7 as Vn,e8 as $n,e9 as Hn,ea as Jn,eb as Qn,ec as wn,ed as Xn,ee as jt,ef as Qe,eg as yt,eh as Zn,ei as er,ej as tr,ek as sr,el as nr,em as rr,en as lr}from"./index-3fd7f13b.js";import{S as ar,L as et,D as ir,B as or,G as we,F as dr,U as cr}from"./school_switcher_component-f96742c3.js";import{I as pt}from"./index.es-46742b36.js";import{P as se}from"./index-e19e8fa9.js";import{L as de}from"./index-f4e848a4.js";import{S as ie}from"./SearchOutlined-ecf9dac0.js";import{P as Oe}from"./PlusCircleFilled-bd0b5d78.js";import{D as Ce}from"./index-8b6b3568.js";import{G as ve}from"./index-c712b740.js";import{D as he}from"./DeleteOutlined-59a1eb9c.js";import{M as Ae}from"./MoreOutlined-dd08292b.js";import{l as Ie}from"./index-7d6f4d39.js";import{D as st}from"./index-6d461898.js";import{S as ur}from"./index-ff9f6144.js";import{U as ft}from"./index-370d560f.js";import{I as nt}from"./InboxOutlined-5640d53d.js";import{D as St}from"./DownloadOutlined-a253c871.js";import{C as tt}from"./index-04e1a8e1.js";import{A as vt}from"./index-1914b305.js";import{S as Vt}from"./SyncOutlined-117adc60.js";import{U as $t}from"./UploadOutlined-23a06990.js";import{U as Ht}from"./UnlockFilled-b9661807.js";import{E as Ne}from"./EditOutlined-dae09423.js";import{K as Jt,U as Qt,P as wt,M as Xt,N as hr}from"./UnlockOutlined-1372aef1.js";import{I as _e}from"./index-4f2a380d.js";import{U as Zt}from"./UserAddOutlined-061c79a2.js";import{L as es}from"./LockOutlined-e917ce6d.js";import{B as mr}from"./BookOutlined-a1392ef4.js";import{S as xr}from"./schoool_examinations_component-0052bc9f.js";import{A as ts}from"./index-5066c649.js";import{a as ss,P as gr,R as jr,S as yr}from"./school_settings_component-9cadde0f.js";import{C as pr}from"./ClearOutlined-d4e183f1.js";import{S as fr}from"./SaveOutlined-84f0579f.js";import{T as Sr}from"./index-0c68c033.js";import{I as vr}from"./index-1334e9b9.js";import{D as ke}from"./index-8a153cba.js";import{n as Cr}from"./index-18cf270b.js";import{A as br}from"./index-a0d5af51.js";import{U as Be}from"./UserOutlined-663643a1.js";import{C as Et}from"./SwitcherOutlined-0a2ff52b.js";import{C as Nt}from"./CheckCircleFilled-0aa5cac2.js";import{A as Ir}from"./Alert-b93b50be.js";import{S as Fr}from"./SendOutlined-974b4318.js";import"./index-da5d94d5.js";import"./ActionButton-48d88ba2.js";import"./DeleteOutlined-25685737.js";import"./defineProperty-66303050.js";import"./useNotification-a00a699f.js";import"./DialogWrap-00743730.js";import"./index-f6743604.js";import"./localeData-47498326.js";import"./SinglePicker-f4348261.js";import"./index-bb42f71b.js";import"./useMutateObserver-b266d449.js";import"./index-f7d1c807.js";import"./InputNumber-be03144d.js";import"./Image-cf12dd1b.js";import"./Upload-37847211.js";import"./Rate-756f2bfe.js";import"./index-b611dc1e.js";import"./index-25197a99.js";import"./index-a1333c14.js";import"./SwapRightOutlined-c4e52b1e.js";import"./fade-2bd0ea45.js";import"./DownloadOutlined-6cd35f11.js";import"./Skeleton-b232d1c4.js";import"./DotChartOutlined-f39c986e.js";import"./InfoCircleFilled-b90f3a64.js";import"./InfoCircleFilled-baaa675e.js";import"./EditOutlined-401a1613.js";import"./UpOutlined-7082c42f.js";import"./ckeditor-3f84d6fc.js";import"./CheckOutlined-60076e80.js";import"./CloseOutlined-8ffd71c9.js";import"./transButton-bc924565.js";import"./ZoomOutOutlined-4d40b3b9.js";import"./index-1de3813f.js";import"./context-94074139.js";function kr(t){return fs("MuiAlertTitle",t)}Ss("MuiAlertTitle",["root"]);const Mr=["className"],Lr=t=>{const{classes:n}=t;return Ms({root:["root"]},kr,n)},Ar=vs(Cs,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(t,n)=>n.root})(({theme:t})=>({fontWeight:t.typography.fontWeightMedium,marginTop:-2})),Er=s.forwardRef(function(n,c){const l=bs({props:n,name:"MuiAlertTitle"}),{className:i}=l,m=Is(l,Mr),u=l,d=Lr(u);return e.jsx(Ar,Fs({gutterBottom:!0,component:"div",ownerState:u,ref:c,className:ks(d.root,i)},m))}),Nr=Er,Pr=Ls(e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOutlined"),Dr=s.lazy(()=>xt(()=>import("./school_analytics-8e35c2b7.js"),["assets/school_analytics-8e35c2b7.js","assets/index-3fd7f13b.js","assets/index-5e5904d3.css","assets/analytic_card_component-53ae350f.js","assets/Skeleton-b232d1c4.js","assets/DotChartOutlined-f39c986e.js","assets/index-fa873666.js","assets/EditOutlined-401a1613.js","assets/transButton-bc924565.js","assets/index-25197a99.js"]).then(t=>({default:t.SchoolAnalytics}))),zr=s.lazy(()=>xt(()=>import("./students_registration_bar_chart-4b69fab0.js"),["assets/students_registration_bar_chart-4b69fab0.js","assets/index-3fd7f13b.js","assets/index-5e5904d3.css","assets/index-0b92720a.js","assets/index-04e1a8e1.js","assets/Skeleton-b232d1c4.js","assets/DotChartOutlined-f39c986e.js","assets/index-bb42f71b.js"]).then(t=>({default:t.StudentsRegistrationLineChart}))),Tr=s.lazy(()=>xt(()=>import("./students_teachers_bar_chart-49d315cb.js"),["assets/students_teachers_bar_chart-49d315cb.js","assets/index-3fd7f13b.js","assets/index-5e5904d3.css","assets/index-0b92720a.js","assets/index-04e1a8e1.js","assets/Skeleton-b232d1c4.js","assets/DotChartOutlined-f39c986e.js","assets/index-bb42f71b.js"]).then(t=>({default:t.StudentsTeachersBarChart}))),qr=()=>{const[t,n]=s.useState(!0),[c,l]=s.useState(),[i,m]=s.useState([]),[u,d]=s.useState([]),o=async()=>{n(!0),As().then(h=>{n(!1),h&&(d(h.operatingTypes.map(C=>C.schoolType.code)),m(h.operatingTypes),l(h.data))})};return s.useEffect(()=>{document.title=ye.system_name+": School Manager",o()},[]),!t&&!c?e.jsx(pe,{direction:"horizontal",style:{width:"100%",height:"88vh",justifyContent:"center"},children:e.jsxs(B,{children:[e.jsx(ne,{children:e.jsx("h2",{children:"Your are not Connected to any Operation School"})}),e.jsx(ne,{style:{display:"flex",justifyContent:"center"},children:e.jsx(ar,{randKey:Math.random()})})]})}):e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Dashboard"})]})}),e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Dr,{operatingTypes:i,operationalSchool:c,operatingTypesCodes:u})}),e.jsxs(ne,{children:[e.jsx(B,{span:12,children:e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(zr,{})})}),e.jsx(B,{span:12,children:e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Tr,{})})})]})]})},Rr=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!0),[m,u]=s.useState(1),[d]=a.useForm(),[o,h]=s.useState(0),[C,k]=s.useState(0),[E,q]=s.useState(!0),I=async A=>{Ns(parseInt(A.toString())).then(N=>{N&&(N.success?(x.success(N.message),c(n.filter(b=>b.id.toString()!==A.toString())),t.onAdd(N.schoolEducationLevel)):x.error(N.message))})},M=async(A,N="")=>{Ps(A,N).then(b=>{b&&(k(b.total),h(b.pages),u(b.page),q(b.hasNext),c([...n,...b.results]))}),i(!1)};return s.useEffect(()=>{M(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(a,{layout:"vertical",form:d,onFinish:A=>{n.length=0,c([]),M(1,A.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search Level(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ne,{children:e.jsx(B,{span:24,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(se,{title:"Adding all education levels",description:"Are you sure to add all education levels?",overlayStyle:{zIndex:9999},onConfirm:()=>{n.forEach(A=>{I(A.id)})},disabled:n.length===0,children:e.jsx(D,{disabled:n.length===0,children:"Add All"})})})}),e.jsx(oe,{spinning:l,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(pt,{dataLength:C,next:()=>M(m),hasMore:E,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(oe,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(de,{itemLayout:"horizontal",dataSource:n,renderItem:A=>e.jsxs("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:[e.jsx(de.Item,{style:{marginBottom:1,padding:0},actions:[e.jsx(se,{title:"Are you sure to add this Education Level?",onConfirm:()=>I(A.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(D,{icon:e.jsx(Oe,{}),onClick:()=>{}})})],children:e.jsx(de.Item.Meta,{title:e.jsxs("a",{children:[A.name,e.jsx(le,{color:"green",children:A.schoolType.name})]}),description:e.jsx(e.Fragment,{})})},"file-"+A.id),e.jsx(Es,{})]})})})})})]})},Yr=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(1),[m,u]=s.useState(!1),[d,o]=s.useState(0),[h,C]=s.useState(!0),[k]=a.useForm(),E=async(I,M="",A=25)=>{C(!0),Ds(I,M,A,parseInt(t.educationLevel.id.toString())).then(N=>{N&&(o(N.total),i(N.page),u(N.hasNext),c([...n,...N.results]))}),C(!1)},q=async I=>{zs(I,parseInt(t.educationLevel.id.toString())).then(M=>{M&&(M.success?(x.success(M.message),c(n.filter(A=>A.id!==I)),t.onAdd(M.schoolEducationLevelCombination)):x.error(M.message))})};return s.useEffect(()=>{E(1,"",25)},[t.randKey,t.educationLevel]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(a,{layout:"vertical",form:k,onFinish:I=>{E(1,I.key,25)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search Subject(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(oe,{spinning:h,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(pt,{dataLength:d,next:()=>E(l),hasMore:m,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(oe,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(de,{itemLayout:"horizontal",dataSource:n,renderItem:I=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(de.Item,{style:{margin:0,padding:0},actions:[e.jsx(se,{title:"Are you sure to add this Combination?",onConfirm:()=>q(I.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(D,{icon:e.jsx(Oe,{}),onClick:()=>{}})})],children:e.jsx(de.Item.Meta,{title:e.jsxs("a",{children:[I.name,e.jsx("span",{style:{marginLeft:10},children:I.subjects.map(M=>e.jsx(le,{color:"green",children:M.name}))})]}),description:e.jsx(e.Fragment,{})})},"combination-"+I.id)})})})})})]})},Gr=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,E]=s.useState(!0),[q]=a.useForm(),M=!ve.useBreakpoint().lg,A=async v=>{c([v,...n])},N=[{title:"Name",dataIndex:"name",fixed:!0,render:(v,S)=>e.jsx("span",{children:e.jsx("a",{children:S.combination.name})})},{title:"Subjects",dataIndex:"subjects",fixed:!0,render:(v,S)=>{var L,j;return e.jsx("span",{children:(j=(L=S==null?void 0:S.combination)==null?void 0:L.subjects)==null?void 0:j.map(T=>e.jsx(le,{color:"green",children:T.name}))})}},{title:"Date Created",dataIndex:"created",render:(v,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(S.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(v,S)=>e.jsx("a",{children:S!=null&&S.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,S)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsx(J,{children:e.jsx(J.Item,{icon:e.jsx(he,{}),children:e.jsx(Z,{title:"Delete Combination",children:e.jsx(se,{title:"Are you sure to delete this ",onConfirm:()=>b(S==null?void 0:S.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(S!=null&&S.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",href:"",rel:"noopener noreferrer",download:!0,children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:L=>L.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],b=async v=>{Ts(v).then(S=>{S&&(S.success?(x.success(S.message),c(n.filter(L=>L.id!==v))):x.error(S.message))})},Y=async(v,S="",L=20)=>{var j;E(!0),qs(v,S,L,parseInt(((j=t.schoolEducationLevel)==null?void 0:j.id.toString())??"0")).then(T=>{T&&(u(T.total),c([...T.results]))}),E(!1)};return s.useEffect(()=>{Y(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:16,children:e.jsx(a,{layout:"vertical",form:q,onFinish:v=>{C(v.key),n.length=0,Y(1,v.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:M?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{size:"large",icon:e.jsx(ce,{}),onClick:()=>i(!0),children:"Add Combination"})})]}),e.jsx(je,{loading:k,columns:N,dataSource:n,pagination:{onChange:(v,S)=>{o(S),Y(v,h,S)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Ce,{title:"Adding School Education Level Combinations",anchor:"right",width:"35vw",onClose:v=>i(v),open:l,noOverFlow:!0,children:e.jsx(Yr,{randKey:Math.random(),onAdd:A,educationLevel:t.schoolEducationLevel})})]})},{TextArea:Or}=_,Kr=t=>{const[n]=a.useForm(),c=async l=>{Rs(l,t.educationLevel.id).then(i=>{i&&(i.success?(x.success(i.message),t.onAdd(i.schoolEducationLevelGroup),n.resetFields()):x.error(i.message))})};return e.jsx(e.Fragment,{children:e.jsxs(a,{layout:"vertical",form:n,onFinish:l=>{c(l)},requiredMark:!1,children:[e.jsx("span",{children:t.educationLevel.educationLevel.name}),e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(Or,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},_r=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,E]=s.useState(!0),[q]=a.useForm(),M=!ve.useBreakpoint().lg,A=async v=>{c([v,...n])},N=async v=>{Gs(v).then(S=>{S&&(S.success?(x.success(S.message),c(n.filter(L=>L.id!==v))):x.error(S.message))})},b=[{title:"Name",dataIndex:"name",fixed:!0,render:(v,S)=>e.jsx("span",{children:e.jsx("a",{children:S.name})})},{title:"Date Created",dataIndex:"created",render:(v,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(S.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(v,S)=>e.jsx("a",{children:S!=null&&S.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,S)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlayStyle:{zIndex:9999},overlay:e.jsx(J,{children:e.jsx(J.Item,{icon:e.jsx(he,{}),children:e.jsx(Z,{title:"Delete Group",children:e.jsx(se,{title:"Are you sure to delete this ",onConfirm:()=>N(S==null?void 0:S.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(S!=null&&S.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})})})}),children:e.jsx("a",{className:"ant-dropdown-link",onClick:L=>L.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],Y=async(v,S="",L=20)=>{var j;E(!0),Ys(v,S,L,parseInt(((j=t.schoolEducationLevel)==null?void 0:j.id.toString())??"0")).then(T=>{T&&(u(T.total),c([...T.results]))}),E(!1)};return s.useEffect(()=>{Y(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:16,children:e.jsx(a,{layout:"vertical",form:q,onFinish:v=>{C(v.key),n.length=0,Y(1,v.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:M?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{size:"large",icon:e.jsx(ce,{}),onClick:()=>i(!0),children:"Add Group"})})]}),e.jsx(je,{loading:k,columns:b,dataSource:n,pagination:{onChange:(v,S)=>{o(S),Y(v,h,S)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Ce,{title:"Adding School Education Level Group",anchor:"right",onClose:v=>i(v),open:l,noOverFlow:!0,width:"35vw",children:e.jsx(Kr,{randKey:Math.random(),onAdd:A,educationLevel:t.schoolEducationLevel})})]})},{Option:Br}=H,rt=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(null),d=async o=>{i(!0),Os(o,t.regionId??0).then(h=>{h&&c(h.results)}),i(!1)};return s.useEffect(()=>{t.regionId&&(u(null),d(""))},[t.regionId]),e.jsx(e.Fragment,{children:e.jsx(a.Item,{name:t.name??"districtId",label:t.label??"District",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"District")+"!"}],children:e.jsx(H,{loading:l,size:t.size??"large",value:m||t.districtId,disabled:!t.regionId,placeholder:"Please Choose "+(t.label??"District ...")+"!",style:{width:220},showSearch:!1,optionFilterProp:"children",filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),onSearch:o=>{o.length>3?d(o):d("")},onChange:o=>{o&&(u(o),t.onChange(parseInt(o)))},dropdownStyle:{zIndex:9999},children:n.map(o=>e.jsx(Br,{value:parseInt(o.id.toString()),children:o.name}))})})})},{Option:Ur}=H,ns=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(null),d=async o=>{i(!0);const{data:h}=await w.custom({url:"",method:"get",meta:{operation:"schoolEducationLevelGroups",variables:{key:{value:o,type:"String",required:!1},schoolEducationLevelId:{value:t.educationLevelId,type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});c(h.results),i(!1)};return s.useEffect(()=>{t.educationLevelId&&d("")},[t.educationLevelId]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:l,children:e.jsx(a.Item,{name:t.name??"groupId",label:t.label??"Education Level Group",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"Ward")+"!"}],children:e.jsx(H,{size:"large",value:m||t.groupId,disabled:!t.educationLevelId,placeholder:"Please Choose School Education Level Group ...",style:{width:450},showSearch:!1,optionFilterProp:"children",filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),onSearch:o=>{o.length>3?d(o):d("")},onChange:o=>{o&&(u(o),t.onChange(parseInt(o)))},dropdownStyle:{zIndex:9999},children:n.map(o=>e.jsx(Ur,{value:parseInt(o.id.toString()),children:o.name}))})})})})},{Option:Wr}=H,lt=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(null),[m,u]=s.useState(!0),d=async o=>{u(!0),Ks(o).then(h=>{h&&c(h.results),u(!1)})};return s.useEffect(()=>{d("")},[]),e.jsx(e.Fragment,{children:e.jsx(a.Item,{name:t.name??"regionId",label:t.label??"Region",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"Region")+"!"}],children:e.jsx(H,{loading:m,placeholder:"Please Choose "+(t.label??"Region ...")+"!",style:{width:220},size:t.size??"large",showSearch:!0,value:l||t.regionId,onChange:o=>{i(o),t.onChange(parseInt(o))},optionFilterProp:"children",filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),onSearch:o=>{o.length>3?d(o):d("")},dropdownStyle:{zIndex:9999},children:n.map(o=>e.jsx(Wr,{value:parseInt(o.id.toString()),children:o.name}))})})})},{Option:Vr}=H,at=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(null),d=async o=>{i(!0),_s(o,t.districtId).then(h=>{h&&c(h.results)}),i(!1)};return s.useEffect(()=>{t.districtId&&(u(null),d(""))},[t.districtId]),e.jsx(e.Fragment,{children:e.jsx(a.Item,{name:t.name??"wardId",label:t.label??"Ward",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"Ward")+"!"}],children:e.jsx(H,{loading:l,size:t.size??"large",value:m||t.wardId,disabled:!t.districtId,placeholder:"Please Choose "+(t.label??"Ward ...")+"!",style:{width:220},showSearch:!1,optionFilterProp:"children",filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),onSearch:o=>{o.length>3?d(o):d("")},onChange:o=>{u(o),t.onChange(parseInt(o))},dropdownStyle:{zIndex:9999},children:n.map(o=>e.jsx(Vr,{value:parseInt(o.id.toString()),children:o.name}))})})})},{Option:ct}=H,rs=[];for(let t=2022;t<new Date().getFullYear()+5;t++)rs.push(e.jsx(ct,{children:t.toString()},t));const Pt=t=>{var p,F;const[n,c]=s.useState(null),[l,i]=s.useState(null),[m,u]=s.useState(null),[d,o]=s.useState(null),[h,C]=s.useState(null),[k,E]=s.useState(null),[q,I]=s.useState(null),[M]=a.useForm(),[A,N]=s.useState(""),b=async r=>{I(r.format("YYYY-MM-DD"))},Y=async r=>{E(r)},v=async r=>{M.setFieldsValue({year:parseInt(r.toString())}),C(parseInt(r.toString()))},S=async r=>{o(r)},L=async r=>{u(r)},j=async r=>{c(r)},T=async r=>{i(r)},f=async r=>{var U;const{data:g}=await w.custom({url:"",method:"post",meta:{operation:"createSchoolEducationLevelStudent",variables:{schoolEducationLevelStudentId:{value:parseInt(((U=r.schoolEducationLevelStudentId)==null?void 0:U.toString())??"0"),type:"Int",required:!1},schoolEducationLevelId:{value:parseInt(t.educationLevel.id.toString()),type:"Int",required:!0},firstName:{value:r.firstName,type:"String",required:!0},middleName:{value:r.middleName,type:"String",required:!0},lastName:{value:r.lastName,type:"String",required:!0},email:{value:r.email,type:"String",required:!1},phones:{value:r.phones,type:"[String]",required:!1},registrationNumber:{value:r.registrationNumber,type:"String",required:!0},year:{value:parseInt(r.year.toString()),type:"Int",required:!0},gender:{value:r.gender,type:"String",required:!0},groupId:{value:r.groupId,type:"Int",required:!1},regionId:{value:r.regionId,type:"Int",required:!1},districtId:{value:r.districtId,type:"Int",required:!1},wardId:{value:r.wardId,type:"Int",required:!1},dob:{value:r.dob,type:"String",required:!1}},fields:["success","message",{schoolEducationLevelStudent:Bs}]}}).catch(()=>(x.error("Error occured while creating student"),{data:null})).then($=>$);g&&(g.success?(x.success(g.message),t.onAdd(g.schoolEducationLevelStudent,t.editting),M.resetFields()):(N(g.message),x.error(g.message)))};return s.useEffect(()=>{var r,g,U,$,R,G,X,me,ge,fe,K,P,te,ee,xe,Re,Pe,De,Ee,ze,z,y,Q,Se,Te,be,Ve,$e;o((g=(r=t.student)==null?void 0:r.group)==null?void 0:g.id),C((U=t.student)==null?void 0:U.year),E(($=t.student)==null?void 0:$.member.gender),c((G=(R=t.student)==null?void 0:R.region)==null?void 0:G.id),i((me=(X=t.student)==null?void 0:X.district)==null?void 0:me.id),u((fe=(ge=t.student)==null?void 0:ge.ward)==null?void 0:fe.id),M.setFieldsValue({firstName:(K=t.student)==null?void 0:K.member.firstName,middleName:(P=t.student)==null?void 0:P.member.middleName,lastName:(te=t.student)==null?void 0:te.member.lastName,email:(ee=t.student)==null?void 0:ee.member.email,registrationNumber:(xe=t.student)==null?void 0:xe.member.registrationNumber,year:(Re=t.student)==null?void 0:Re.year,gender:(Pe=t.student)==null?void 0:Pe.member.gender,groupId:(Ee=(De=t.student)==null?void 0:De.group)==null?void 0:Ee.id,regionId:(z=(ze=t.student)==null?void 0:ze.region)==null?void 0:z.id,districtId:(Q=(y=t.student)==null?void 0:y.district)==null?void 0:Q.id,wardId:(Te=(Se=t.student)==null?void 0:Se.ward)==null?void 0:Te.id}),(be=t.student)!=null&&be.member.dob&&(I(Ye((Ve=t.student)==null?void 0:Ve.member.dob)),M.setFieldsValue({dob:Ye(($e=t.student)==null?void 0:$e.member.dob)}))},[t.editting,t.student,t.educationLevel]),e.jsxs(e.Fragment,{children:[A.length>0&&e.jsx(Ie.Alert,{message:"Error",description:A,closable:!0}),e.jsxs(a,{layout:"vertical",form:M,onFinish:r=>{var g;t.editting&&(r.schoolEducationLevelStudentId=(g=t.student)==null?void 0:g.id),r.groupId=parseInt(d),r.year=h,r.dob=q,r.regionId=parseInt(n),r.districtId=parseInt(l),r.wardId=parseInt(m),f(r)},requiredMark:!0,children:[e.jsx(a.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(a.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(a.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10},children:e.jsx(Z,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(D,{type:"dashed",onClick:()=>x("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(_,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(a.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(_,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(a.Item,{name:"phones",label:"Phones Number",rules:[{required:!1,type:"string",message:"Please input Phones Number"}],children:e.jsx(_,{size:"large",placeholder:"Enter Phones Numbers ..."})}),e.jsxs(pe,{direction:"horizontal",children:[e.jsx(a.Item,{name:"dob",label:"Date of Birth",rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(st,{onChange:b,disabledDate:r=>r&&r>Ye().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(a.Item,{name:"gender",label:"Gender",rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:k,children:e.jsxs(H,{placeholder:"Please Choose Gender ...",style:{width:220},onChange:Y,dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(ct,{value:"female",children:"Female"}),e.jsx(ct,{value:"male",children:"Male"})]})}),e.jsx(a.Item,{name:"year",label:"Study Year",rules:[{required:!0,type:"integer",message:"Please choose Year"}],initialValue:h?parseInt(h.toString()):new Date().getFullYear(),children:e.jsx(H,{value:h?parseInt(h.toString()):new Date().getFullYear(),placeholder:"Please Choose Year ...",style:{width:220},onChange:v,dropdownStyle:{zIndex:9999},children:rs})})]}),e.jsxs(pe,{direction:"horizontal",children:[e.jsx(lt,{onChange:j,regionId:n,name:"region",label:"Region",size:"middle",required:!0}),e.jsx(rt,{regionId:parseInt(n),districtId:l,onChange:T,name:"district",label:"District",size:"middle",required:!0}),e.jsx(at,{districtId:parseInt(l),wardId:m,onChange:L,name:"ward",label:"Ward",size:"middle",required:!1})]}),e.jsx(ns,{educationLevelId:parseInt(t.educationLevel.id),groupId:(F=(p=t.student)==null?void 0:p.group)==null?void 0:F.id,onChange:S,name:"group",label:"School Education Level Group",size:"middle",required:!1}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},{Option:ot}=H,ut=[];for(let t=2022;t<new Date().getFullYear()+5;t++)ut.push(t);const $r=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(new Date().getFullYear()),[m,u]=s.useState(!0),[d]=a.useForm(),[o,h]=s.useState([]),[C,k]=s.useState(""),E=M=>{u(M)},q=async(M,A="",N=20)=>{var Y;const{data:b}=await w.custom({url:"",method:"get",meta:{operation:"schoolEducationLevelsToMigrate",variables:{schoolEducationLevelId:{value:parseInt(((Y=t.schoolEducationLevel)==null?void 0:Y.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Us}]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(v=>v);b&&h(b.results)},I=async M=>{var N;c(!0);const{data:A}=await w.custom({url:"",method:"post",meta:{operation:"studentsMigration",variables:{schoolEducationLevelId:{value:parseInt(((N=t.schoolEducationLevel)==null?void 0:N.id.toString())??"0"),type:"Int",required:!0},schoolEducationLevelToId:{value:M.school_education_level_to_id,type:"Int",required:!0},yearFrom:{value:M.yearFrom,type:"Int",required:!0},yearTo:{value:M.yearTo,type:"Int",required:!0},honor:{value:M.honor,type:"Boolean",required:!0}},fields:["success","message"]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(b=>b);A&&(A.success?(x.success(A.message),d.resetFields(),t.onFinish(M.yearTo)):(k(A.message),x.error(A.message))),c(!1)};return s.useEffect(()=>{d.resetFields(),q(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:10},children:[e.jsx(Ie.Alert,{message:"Info",description:"Only Active Members(Students) will be migration"}),C.length>0&&e.jsx(Ie.Alert,{message:"Error",description:C,closable:!0})]}),e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:d,onFinish:M=>{I(M)},requiredMark:!0,children:[e.jsx(a.Item,{name:"school_education_level_to_id",label:"School Education Level to Migrate From",rules:[{required:!0,type:"integer",message:"Please choose ..."}],children:e.jsx(H,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:"",onChange:M=>{},dropdownStyle:{zIndex:9999},children:o.map(M=>e.jsx(ot,{value:parseInt(M.id.toString()),children:M.educationLevel.name},M.id.toString()))})}),e.jsx(a.Item,{name:"yearFrom",label:"Year to Migrate From",initialValue:l,rules:[{required:!0,type:"integer",message:"Please choose ..."}],children:e.jsx(H,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:new Date().getFullYear(),onChange:M=>i(M),dropdownStyle:{zIndex:9999},children:ut.map(M=>e.jsx(ot,{value:M,children:M.toString()},M.toString()))})}),e.jsx(a.Item,{name:"yearTo",label:"Year to Migrate To",rules:[{required:!0,type:"integer",message:"Please choose ..."}],children:e.jsx(H,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:"",onChange:M=>{},dropdownStyle:{zIndex:9999},children:ut.filter(M=>M>l).map(M=>e.jsx(ot,{value:M,children:M.toString()},M.toString()))})}),e.jsx(a.Item,{name:"honor",label:"Honor Education Examinations Results",initialValue:m,rules:[{required:!0,type:"boolean",message:"Please choose ..."}],children:e.jsx(ur,{defaultChecked:!0,onChange:E})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})]})},{Option:ls}=H,as=[e.jsx(ls,{value:"",children:"Please choose Academic Year"})];for(let t=2022;t<new Date().getFullYear()+5;t++)as.push(e.jsx(ls,{value:t,children:t.toString()},t.toString()));const Hr=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,Jr=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(""),m=d=>{t.form.setFieldsValue({groupId:d})},u=async d=>{c(!0),i(""),Ws(d).then(o=>{o&&(o.success?(x(o.message),t.onFinish()):(i(o.message),x.error(o.message)))}),c(!1)};return s.useEffect(()=>{},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:10},children:[e.jsx(Ie.Alert,{message:"Info",description:"Please for a successfully upload, please use the template provided below, make sure the columns names remains the same"}),l.length>0&&e.jsx(Ie.Alert,{message:"Error",description:l,closable:!0})]}),e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:d=>{d.school_education_level_id=t.educationLevel.id,u(d)},requiredMark:!0,children:[e.jsx(ns,{educationLevelId:parseInt(t.educationLevel.id),onChange:m,name:"groupId",label:"Education Level Group"}),e.jsx(a.Item,{name:"year",label:"Academic Year",rules:[{required:!0,type:"integer",message:"Please select academic year"}],children:e.jsx(H,{size:"large",style:{width:"100%"},placeholder:"Please Select Academic Year",onChange:d=>{},dropdownStyle:{zIndex:9999},children:as})}),e.jsx(a.Item,{label:"Students Excel File",children:e.jsx(a.Item,{name:"files",valuePropName:"fileList",getValueFromEvent:Hr,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload students excel file"}],children:e.jsxs(ft.Dragger,{name:"files",accept:".xls, .xlsx",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(nt,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsxs("span",{children:["Download Uploading Excel Format Template",e.jsx("span",{style:{marginLeft:10},children:e.jsxs("a",{href:ye.student_registration_template_file,target:"_blank",children:[e.jsx(St,{}),"Download"]})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Register"})})]})})]})},{Option:is}=H,ht=[e.jsx(is,{value:null,children:"Please Select Year"},"default")];for(let t=2022;t<new Date().getFullYear()+5;t++)ht.push(e.jsx(is,{value:t,children:t.toString()},t));const Qr=t=>{const[n,c]=s.useState(null),[l,i]=s.useState(null),m=async o=>{c(o)},u=async o=>{i(o)},d=async(o,h)=>{const{data:C}=await w.custom({url:"",method:"post",meta:{operation:"studentsLoginAuthorize",variables:{authorizationType:{value:o,type:"Int",required:!0},schoolEducationLevelId:{value:parseInt(t.schoolEducationLevel.id),type:"Int",required:!0},year:{value:h,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(k=>k);C&&(C.success?(x.success(C.message),t.onFinish()):x.error(C.message))};return s.useEffect(()=>{},[]),e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{fontSize:20},children:"Platform supports Two mode of Default Login Authorizations to Students"}),e.jsxs(tt,{actions:[e.jsx(se,{title:e.jsx(e.Fragment,{children:e.jsxs(pe,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Authorize Login?"}),e.jsx("span",{style:{height:10}}),e.jsx("span",{children:e.jsx(H,{value:n||null,placeholder:"Please Choose Year ...",style:{width:220},onChange:m,allowClear:!0,onClear:()=>c(null),dropdownStyle:{zIndex:9999},children:ht})})]})}),onConfirm:()=>d(1,n),onCancel:()=>{},okButtonProps:{disabled:n===null},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(D,{icon:e.jsx(et,{}),children:"Authorize"})})],children:[e.jsxs("span",{style:{fontSize:18},children:["By Using Registration Number of Students as Default ",e.jsx("b",{children:"Username"})," ","and",e.jsx("b",{children:"Password"})]}),e.jsx("span",{style:{display:"block",color:"red"},children:"This action will be applicable only to those students with no Login Access to the Platform"})]}),e.jsxs(tt,{actions:[e.jsx(se,{title:e.jsx(e.Fragment,{children:e.jsxs(pe,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Authorize Login?"}),e.jsx("span",{style:{height:10}}),e.jsx("span",{children:e.jsx(H,{value:l||null,placeholder:"Please Choose Year ...",style:{width:220},onChange:u,allowClear:!0,onClear:()=>i(null),dropdownStyle:{zIndex:9999},children:ht})})]})}),onConfirm:()=>d(2,l),onCancel:()=>{},okButtonProps:{disabled:l===null},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(D,{icon:e.jsx(et,{}),children:"Authorize"})})],style:{marginTop:50},children:[e.jsxs("span",{style:{fontSize:18},children:["By Using Email/Phone of Students as Default ",e.jsx("b",{children:"Username"}),", While Default",e.jsx("b",{children:"Password"})," will be Randomly Generated"]}),e.jsx("span",{style:{display:"block",color:"red"},children:"This action will be applicable only to those students with no Login Access to the Platform"})]})]})},{Option:wr}=H,os=[];for(let t=2022;t<new Date().getFullYear()+5;t++)os.push(e.jsx(wr,{children:t.toString()},t.toString()));const Xr=t=>{var De,Ee,ze;const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(!1),[h,C]=s.useState(0),[k,E]=s.useState(20),[q,I]=s.useState(""),[M,A]=s.useState(!0),[N]=a.useForm(),[b]=a.useForm(),[Y]=a.useForm(),[v,S]=s.useState(!1),[L,j]=s.useState(new Date().getFullYear()),[T,f]=s.useState(!1),[p,F]=s.useState(!1),[r,g]=s.useState([]),[U,$]=s.useState(!1),R=async z=>{c(z),$(!0)},G=async()=>{F(!0)},X=z=>{c(z),S(!0)},me=async(z,y=!1)=>{y?(i(l.map(Q=>Q.id===z.id?z:Q)),S(!1)):i([z,...l])},ge=async(z,y)=>{$s(z,y).then(Q=>{Q&&(Q.success?(x.success(Q.message),i(l.filter(Se=>Se.id!==z))):x.error(Q.message))})},fe=async z=>{Hs(z).then(y=>{y&&(y.success?(x.success(y.message),i(l.filter(Q=>Q.id!==z))):x.error(y.message))})},K=async()=>{xe(1,"",20,L)},P=z=>{z.target.checked&&g(r.concat(parseInt(z.target.value))),z.target.checked||g(r.filter(y=>y!==parseInt(z.target.value)))},te=e.jsx(J,{items:[{key:"1",label:e.jsx(se,{title:"Are you sure to delete All Students?",onConfirm:()=>x("Deleting"),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsxs("a",{children:[e.jsx(he,{color:"red",style:{color:"red"}}),e.jsx("span",{style:{marginLeft:3},children:"Delete All"})]})})},{key:"2",label:e.jsx(se,{title:"Are you sure to delete All Selected Students?",onConfirm:()=>x("Deleting Selected"),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsxs("a",{children:[e.jsx(he,{color:"red",style:{color:"red"}}),e.jsx("span",{style:{marginLeft:3},children:"Delete Selected"})]})})}]}),ee=[{title:e.jsx(e.Fragment,{children:e.jsx(Me,{overlay:te,overlayStyle:{zIndex:9999},children:e.jsx("a",{onClick:z=>z.preventDefault(),children:e.jsxs(pe,{children:["Action(s)",e.jsx(ir,{})]})})})}),dataIndex:"year",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:e.jsx(Le,{onChange:P,value:y.id,defaultChecked:r.filter(Se=>Se===y.id).length>0})})},{title:"Year",dataIndex:"year",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.year})},{title:"Reg#",dataIndex:"registrationNumber",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:e.jsx("a",{children:y.member.registrationNumber})})},{title:"First Name",dataIndex:"firstName",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.member.firstName})},{title:"Middle Name",dataIndex:"middleName",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.member.middleName})},{title:"Last Name",dataIndex:"lastName",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.member.lastName})},{title:"Group",dataIndex:"group",fixed:!0,render:(z,y,Q)=>{var Se;return e.jsx("span",{children:y.group?(Se=y.group)==null?void 0:Se.name:"No Group"})}},{title:"Gender",dataIndex:"gender",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.member.gender})},{title:"Phone",dataIndex:"phone",fixed:!0,render:(z,y,Q)=>e.jsxs(e.Fragment,{children:[y.member.phone&&e.jsx("span",{children:y.member.phone}),!y.member.phone&&e.jsxs(e.Fragment,{children:[e.jsx(le,{color:"red",children:"No Phone Number"}),e.jsx(Z,{title:"View/Add Phone Number",color:"green",children:e.jsx(D,{icon:e.jsx(Ge,{}),onClick:()=>R(y)})})]})]})},{title:"Email",dataIndex:"email",fixed:!0,render:(z,y,Q)=>e.jsxs(e.Fragment,{children:[y.member.email&&e.jsx("span",{children:y.member.email}),!y.member.email&&e.jsxs(e.Fragment,{children:[e.jsx(le,{color:"red",children:"No Email Address"}),e.jsx(Z,{title:"View/Add Email Address",color:"green",children:e.jsx(D,{icon:e.jsx(Ge,{}),onClick:()=>R(y)})})]})]})},{title:"Authed",dataIndex:"isAuthed",render:(z,y,Q)=>e.jsx("a",{children:y.member.user?e.jsx(e.Fragment,{children:y!=null&&y.member.isAuthed?e.jsx(le,{color:"green",children:"Authed"}):e.jsx(le,{color:"red",children:"Not Authed"})}):e.jsx(le,{color:"red",children:"Not Authed"})})},{title:"Status",dataIndex:"isActive",render:(z,y,Q)=>e.jsx("a",{children:y!=null&&y.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(z,y,Q)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlayStyle:{zIndex:9999},overlay:e.jsxs(J,{children:[y!=null&&y.isActive?e.jsx(J.Item,{icon:e.jsx(or,{}),children:e.jsx(Z,{title:"Blocking Student",placement:"left",color:"red",children:e.jsx(se,{title:"Are you sure to Block Student ",onConfirm:()=>ge(y==null?void 0:y.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(y!=null&&y.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Block"})})})}):e.jsx(J.Item,{icon:e.jsx(Ht,{}),children:e.jsx(Z,{title:"Unblocking Student",placement:"left",color:"green",children:e.jsx(se,{title:"Are you sure to Unblock Student ",onConfirm:()=>ge(y==null?void 0:y.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(y!=null&&y.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Unblock"})})})}),e.jsx(J.Item,{icon:e.jsx(he,{}),children:e.jsx(Z,{title:"Delete Student",placement:"left",children:e.jsx(se,{title:"Are you sure to delete Student ",onConfirm:()=>fe(y==null?void 0:y.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(y!=null&&y.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})})}),e.jsx(J.Item,{icon:e.jsx(Ne,{}),disabled:!(y!=null&&y.canEdit),onClick:()=>X(y),children:e.jsx(Z,{title:"Edit Student Informations",placement:"left",children:e.jsx("a",{rel:"noopener noreferrer",children:"Edit"})})}),e.jsx(J.Item,{icon:e.jsx(Jt,{}),disabled:!(y!=null&&y.canManage),onClick:()=>x("Credentials"),children:e.jsx(Z,{title:"Recreate Credentials",placement:"left",children:e.jsx("a",{rel:"noopener noreferrer",children:"Reset Credentials"})})})]}),children:e.jsx("a",{className:"ant-dropdown-link",onClick:Se=>Se.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],xe=async(z,y="",Q=20,Se=new Date().getFullYear())=>{var Te;A(!0),Vs(z,y,Q,Se,((Te=t.schoolEducationLevel)==null?void 0:Te.id)??0).then(be=>{be&&(C(be.total),i([...be.results])),A(!1)})},Re=async()=>{xe(1,"",20,L),b.resetFields()},Pe=async z=>{j(z),Y.setFieldsValue({year:z}),xe(1,"",20,z)};return s.useEffect(()=>{Y.resetFields(),j(new Date().getFullYear()),xe(1,"",20,L)},[t.randKey,t.schoolEducationLevel]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsxs(B,{span:24,style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:[e.jsx(D,{size:"large",disabled:l.length===0,icon:e.jsx(et,{}),onClick:()=>o(!0),children:"Auth"}),e.jsx(D,{size:"large",icon:e.jsx(ce,{}),onClick:()=>u(!0),children:"Add Student"}),e.jsx(D,{size:"large",icon:e.jsx(Vt,{}),onClick:G,children:"Students Migration From"}),e.jsx(D,{size:"large",icon:e.jsx($t,{}),onClick:()=>f(!0),children:"Upload Student"})]}),e.jsx(B,{span:2,children:e.jsx(a,{layout:"vertical",form:Y,onFinish:z=>{},children:e.jsx(a.Item,{name:"year",children:e.jsx(H,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:L,value:L,onChange:z=>{j(parseInt(z.toString())),xe(1,"",20,parseInt(z.toString()))},dropdownStyle:{zIndex:9999},children:os})})})}),e.jsx(B,{span:12,children:e.jsx(a,{layout:"vertical",form:N,onFinish:z=>{I(z.key),l.length=0,xe(1,z.key,k,L)},children:e.jsxs(ne,{children:[e.jsx(B,{span:22,children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(B,{span:2,children:e.jsx(D,{icon:e.jsx(ie,{}),size:"large",onClick:()=>N.submit()})})]})})})]}),e.jsx(je,{loading:M,columns:ee,dataSource:l,pagination:{onChange:(z,y)=>{E(y),xe(z,q,y,L)},total:h,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0,y:"calc(100vh - 298px)"}}),e.jsx(Ce,{title:"Registering a Student for "+((De=t.schoolEducationLevel)==null?void 0:De.educationLevel.name),anchor:"right",onClose:z=>u(z),open:m,noOverFlow:!1,width:"80vw",children:e.jsx(Pt,{editting:!1,randKey:Math.random(),onAdd:me,educationLevel:t.schoolEducationLevel})}),e.jsx(Ce,{title:"Edit Student Informations",anchor:"right",onClose:z=>S(z),open:v,noOverFlow:!0,width:"70vw",children:e.jsx(Pt,{editting:!0,student:n,randKey:Math.random(),onAdd:me,educationLevel:t.schoolEducationLevel})}),e.jsx(re,{title:`Upload Student for ${(Ee=t.schoolEducationLevel)==null?void 0:Ee.educationLevel.name}`,open:T,onClose:z=>f(z),children:e.jsx(Jr,{educationLevel:t.schoolEducationLevel,randKey:Math.random(),onFinish:Re,form:b}),width:"50vw"}),e.jsx(re,{title:"Students Login Authorization",open:d,onClose:z=>o(z),children:e.jsx(Qr,{schoolEducationLevel:t.schoolEducationLevel,onFinish:K}),width:"50vw"}),e.jsx(re,{title:((ze=t.schoolEducationLevel)==null?void 0:ze.educationLevel.name)+" Students Migrations",open:p,onClose:z=>F(z),children:e.jsx($r,{randKey:Math.random(),schoolEducationLevel:t.schoolEducationLevel,onFinish:Pe}),width:"50vw"}),e.jsx(re,{title:(n==null?void 0:n.member.firstName)+" "+(n==null?void 0:n.member.middleName)+" "+(n==null?void 0:n.member.lastName)+" Contacts",open:U,onClose:z=>$(z),children:e.jsx(vt,{type:"info",description:"Contacts"}),width:"50vw"})]})},Zr=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!0),[m,u]=s.useState(1),[d]=a.useForm(),[o,h]=s.useState(0),[C,k]=s.useState(0),[E,q]=s.useState(!0),[I,M]=s.useState(2);gt();const A=async(b,Y)=>{Js(b,Y,I).then(v=>{v.success?(x.success(v.message),c(n.filter(S=>S.id.toString()!==b.toString())),t.onAdd(v.schoolEducationLevelSubject)):x.error(v.message)})},N=async(b,Y="")=>{i(!0),Qs(b,Y,t.schoolEducationLevel.id).then(v=>{v&&(k(v.total),h(v.pages),u(v.page),q(v.hasNext),c([...v.results]))}),i(!1)};return s.useEffect(()=>{n.length=0,c([]),N(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(a,{layout:"vertical",form:d,onFinish:b=>{n.length=0,c([]),N(1,b.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search Subject(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(oe,{spinning:l,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"78vh",overflowY:"auto"},children:e.jsx(de,{itemLayout:"horizontal",dataSource:n,renderItem:b=>{var Y;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(de.Item,{style:{margin:0,padding:0},actions:[e.jsx(se,{title:e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Are you sure you want to add"," ",e.jsx("b",{children:b.subject.name})," to"," ",e.jsx("b",{children:(Y=t.schoolEducationLevel)==null?void 0:Y.educationLevel.name}),"?"]}),e.jsx("div",{style:{marginTop:5},children:e.jsx(a,{layout:"vertical",children:e.jsx(a.Item,{label:"Max Number of Periods Per Week",children:e.jsx(_e,{size:"large",min:1,max:7,defaultValue:2,style:{width:"100%"},onChange:v=>{M(v)}})})})})]}),onConfirm:()=>A(b.id,t.schoolEducationLevel.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(D,{icon:e.jsx(Oe,{}),onClick:()=>{}})})],children:e.jsx(de.Item.Meta,{title:e.jsxs("a",{children:[b.subject.name,e.jsx("span",{style:{marginLeft:10},children:e.jsx(le,{color:"green",children:b.subject.schoolType.name})})]}),description:e.jsx(e.Fragment,{})})},"subject-"+b.id)})}})}),e.jsx("div",{style:{marginTop:10,marginBottom:10,display:"flex",justifyContent:"center"},children:e.jsx(Yt,{current:m,total:C,pageSize:10,onChange:b=>{N(b)},style:{textAlign:"center"}})})]})]})},el=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState([]),[m,u]=s.useState([]),d=async()=>{const{data:h}=await w.custom({url:"",method:"post",meta:{operation:"createAlternateSubjects",variables:{educationLevelSubjectId:{value:parseInt(t.subject.id),type:"Int",required:!0},choices:{value:m,type:"[Int]",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error occured while Creating Alternate subjects"),{data:null})).then(C=>C);h&&(h.success?(x.success(h.message),o(),u([]),t.onFinish()):x.error(h.message))},o=async()=>{const{data:h}=await w.custom({url:"",method:"get",meta:{operation:"alternateSubjectsChoices",variables:{subjectId:{value:parseInt(t.subject.id),type:"Int",required:!0}},fields:["choices"]}}).catch(()=>(x.error("Error occured while Examinations Types"),{data:null})).then(C=>C);h&&i(h.choices)};return s.useEffect(()=>{o()},[t.randKey]),e.jsx(e.Fragment,{children:e.jsxs(oe,{spinning:n,children:[e.jsx(de,{dataSource:l,renderItem:h=>e.jsx(de.Item,{children:e.jsx(ne,{children:e.jsxs(B,{span:24,children:[h.disabled&&e.jsx(Le,{disabled:h.disabled,checked:h.disabled,children:e.jsx("span",{style:{marginLeft:5},children:h.name})}),!h.disabled&&e.jsx(Le,{onChange:C=>{C.target.checked?u([...m,h.value]):u(m.filter(k=>k!==h.value))},children:e.jsx("span",{style:{marginLeft:5},children:h.name})})]})})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{size:"large",disabled:m.length===0,onClick:()=>d(),children:"Save"})})]})})},tl=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(0),[m,u]=s.useState(20),[d,o]=s.useState(""),[h,C]=s.useState(!0),[k]=a.useForm(),q=!ve.useBreakpoint().lg,I=async N=>{var b;Xs(N,parseInt(((b=t.schoolEducationLevelSubject)==null?void 0:b.id.toString())??"0")).then(Y=>{Y&&(Y.success?(x.success(Y.message),c(n.filter(v=>v.id!==N)),t.onAdd(Y.schoolEducationLevelSubjectTeacher)):x.error(Y.message))})},M=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(N,b,Y)=>e.jsx("span",{children:e.jsx("a",{children:b.user.fullName})})},{title:"",dataIndex:"action",render:(N,b,Y)=>{var v;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Z,{title:"Adding "+((v=t.schoolEducationLevelSubject)==null?void 0:v.schoolSubject.subject.name)+" Teacher",placement:"bottom",children:e.jsx(D,{icon:e.jsx(Zt,{}),onClick:()=>I(b==null?void 0:b.id),children:"Add"})})})}}],A=async(N,b="",Y=20)=>{var v;C(!0),ws(N,parseInt(((v=t.schoolEducationLevelSubject)==null?void 0:v.id.toString())??"0"),b,Y).then(S=>{S&&(i(S.total),c([...S.results])),C(!1)})};return s.useEffect(()=>{A(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{style:{marginTop:10},children:e.jsx(B,{span:16,children:e.jsx(a,{layout:"vertical",form:k,onFinish:N=>{o(N.key),n.length=0,A(1,N.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(je,{loading:h,columns:M,dataSource:n,pagination:{onChange:(N,b)=>{u(b),A(N,d,b)},total:l,pageSize:m,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}})]})},sl=t=>{var S;const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,E]=s.useState(!0),[q]=a.useForm(),M=!ve.useBreakpoint().lg,A=async L=>{c([L,...n])},N=async L=>{en(L).then(j=>{j&&(j.success?(x.success(j.message),c(n.filter(T=>T.id!==L))):x.error(j.message))})},b=async(L,j)=>{tn(L,j).then(T=>{T&&(T.success?(x.success(T.message),c(n.map(f=>f.id===L?T.schoolEducationLevelSubjectTeacher:f))):x.error(T.message))})},Y=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(L,j,T)=>e.jsx("span",{children:e.jsx("a",{children:j.schoolMember.user.fullName})})},{title:"Date Created",dataIndex:"created",render:(L,j,T)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(j.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(L,j,T)=>e.jsx("a",{children:j!=null&&j.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(L,j,T)=>{var f,p,F,r,g;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsxs(J,{children:[e.jsx(J.Item,{icon:e.jsx(he,{}),children:e.jsx(se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Remove "}),e.jsx("span",{style:{fontWeight:"bolder"},children:j.schoolMember.user.fullName}),e.jsx("span",{children:" as "}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:3},children:(f=t.schoolEducationLevelSubject)==null?void 0:f.schoolSubject.subject.name}),e.jsx("span",{style:{marginLeft:3},children:"Teacher"})]}),onConfirm:()=>N(j==null?void 0:j.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(j!=null&&j.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Remove"})})}),j!=null&&j.isActive?e.jsx(J.Item,{icon:e.jsx(es,{}),children:e.jsx(se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Lock "}),e.jsx("span",{style:{fontWeight:"bolder"},children:j.schoolMember.user.fullName}),e.jsx("span",{children:" as "}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:3},children:(p=t.schoolEducationLevelSubject)==null?void 0:p.schoolSubject.subject.name}),e.jsx("span",{style:{marginLeft:3},children:"Teacher"})]}),onConfirm:()=>b(j==null?void 0:j.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(j!=null&&j.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Block"})})}):e.jsx(J.Item,{icon:e.jsx(Qt,{}),children:e.jsx(se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Unblock "}),e.jsx("span",{style:{fontWeight:"bolder"},children:j.schoolMember.user.fullName}),e.jsx("span",{children:" as "}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:3},children:(g=(r=(F=t.schoolEducationLevelSubject)==null?void 0:F.schoolSubject)==null?void 0:r.subject)==null?void 0:g.name}),e.jsx("span",{style:{marginLeft:3},children:"Teacher"})]}),onConfirm:()=>b(j==null?void 0:j.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(j!=null&&j.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Unblock"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}}],v=async(L,j="",T=20)=>{var f;E(!0),Zs(L,j,T,((f=t.schoolEducationLevelSubject)==null?void 0:f.id)??0).then(p=>{p&&(u(p.total),c([...p.results]))}),E(!1)};return s.useEffect(()=>{v(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:16,children:e.jsx(a,{layout:"vertical",form:q,onFinish:L=>{C(L.key),n.length=0,v(1,L.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:M?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{size:"large",icon:e.jsx(ce,{}),onClick:()=>i(!0),children:"Add Teacher"})})]}),e.jsx(je,{loading:k,columns:Y,dataSource:n,pagination:{onChange:(L,j)=>{o(j),v(L,h,j)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}}),e.jsx(re,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{marginRight:3},children:"Adding"}),e.jsx("span",{style:{fontWeight:"bolder"},children:(S=t.schoolEducationLevelSubject)==null?void 0:S.schoolSubject.subject.name}),e.jsx("span",{style:{marginLeft:3},children:"Teachers"})]}),width:"40vw",open:l,onClose:L=>i(L),children:e.jsx(tl,{schoolEducationLevelSubject:t.schoolEducationLevelSubject,randKey:Math.random(),onAdd:A})})]})},nl=t=>{var R,G,X,me,ge,fe;const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(!1),[h,C]=s.useState(0),[k,E]=s.useState(20),[q,I]=s.useState(""),[M,A]=s.useState(!0),[N]=a.useForm(),[b,Y]=s.useState(!1),[v,S]=s.useState(0),j=!ve.useBreakpoint().lg,T=async K=>{c(K),Y(!0)},f=async K=>{c(K),o(!0)},p=async K=>{i([K,...l])},F=async K=>{rn(K).then(P=>{P.success?(x.success(P.message),i(l.filter(te=>te.id!==K))):x.error(P.message)})},r=async(K,P)=>{ln(K,P).then(te=>{te.success?(x.success(te.message),i(l.map(ee=>ee.id===K?te.schoolEducationLevelSubject:ee))):x.error(te.message)})},g=[{title:"Name",dataIndex:"name",fixed:!0,render:(K,P,te)=>{var ee;return e.jsxs("span",{children:[P.schoolSubject.subject.name,(P==null?void 0:P.combination)&&e.jsx(le,{style:{marginLeft:10},color:"red",children:(ee=P==null?void 0:P.combination)==null?void 0:ee.name})]})}},{title:"Subject Type",dataIndex:"subjecttype",fixed:!0,render:(K,P,te)=>e.jsx("span",{children:P.subjectTypeDisplay})},{title:"Teachers",dataIndex:"teachers",fixed:!0,render:(K,P,te)=>{var ee;return e.jsx("span",{children:e.jsx(Z,{title:((ee=t.schoolEducationLevel)==null?void 0:ee.educationLevel.name)+"  "+P.schoolSubject.subject.name+" Teachers",children:e.jsx("a",{onClick:()=>f(P),children:P.totalTeachers})})})}},{title:"Max Periods/Week",dataIndex:"maxPeriodsPerWeek",render:(K,P,te)=>e.jsx(e.Fragment,{children:e.jsx(Ie.Popconfirm,{title:"Ajust Max Periods",description:e.jsx(e.Fragment,{children:e.jsx(a,{layout:"vertical",children:e.jsx(a.Item,{label:"Max Number of Periods Per Week "+v,children:e.jsx(_e,{defaultValue:v,onChange:ee=>S(ee),style:{width:"100%"}})})})}),onConfirm:()=>{sn(P.id,v===0||v===null?P.maxPeriodsPerWeek:v).then(ee=>{ee&&ee.success&&i(l.map(xe=>xe.id===ee.schoolEducationLevelSubject.id?ee.schoolEducationLevelSubject:xe))})},onCancel:()=>{},okButtonProps:{disabled:v===0||v===null},onOpenChange:ee=>{S(ee?P.maxPeriodsPerWeek:0)},okText:"Update",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(le,{style:{cursor:"pointer"},children:P.maxPeriodsPerWeek})})})},{title:"Date Created",dataIndex:"created",render:(K,P,te)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(P.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(K,P,te)=>e.jsx(e.Fragment,{children:P!=null&&P.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(K,P,te)=>{var ee;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsxs(J,{children:[e.jsx(J.Item,{icon:e.jsx(he,{}),children:e.jsx(Z,{title:"Delete Subject",children:e.jsx(Ie.Popconfirm,{title:"Are you sure to delete this ",onConfirm:()=>F(P==null?void 0:P.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(P!=null&&P.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})})}),e.jsx(J.Item,{icon:e.jsx(Zt,{}),onClick:()=>f(P),children:e.jsx(Z,{title:((ee=t.schoolEducationLevel)==null?void 0:ee.educationLevel.name)+"  "+P.schoolSubject.subject.name+" Teachers",children:e.jsx("a",{children:"Teachers"})})}),P!=null&&P.isActive?e.jsx(J.Item,{icon:e.jsx(es,{}),children:e.jsx(Ie.Popconfirm,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Block "}),e.jsx("span",{style:{fontWeight:"bolder"},children:P.schoolSubject.subject.name})]}),onConfirm:()=>r(P==null?void 0:P.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(P!=null&&P.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Block"})})}):e.jsx(J.Item,{icon:e.jsx(Qt,{}),children:e.jsx(Ie.Popconfirm,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Unblock "}),e.jsx("span",{style:{fontWeight:"bolder"},children:P.schoolSubject.subject.name})]}),onConfirm:()=>r(P==null?void 0:P.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(P!=null&&P.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Block"})})}),e.jsx(J.Item,{icon:e.jsx(mr,{}),onClick:()=>T(P),children:e.jsx(Z,{title:"Create Alternate Subjects",children:e.jsx("a",{children:"Create Alternate Subjects"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:xe=>xe.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}}],U=async(K,P="",te=20)=>{var ee;nn(K,P,te,parseInt(((ee=t.schoolEducationLevel)==null?void 0:ee.id.toString())??"0")).then(xe=>{C(xe.total),i([...xe.results])}),A(!1)},$=async()=>{U(1,"",20)};return s.useEffect(()=>{U(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:16,children:e.jsx(a,{layout:"vertical",form:N,onFinish:K=>{I(K.key),l.length=0,U(1,K.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),["osc","pr"].some(K=>{var P,te;return K===((te=(P=t.schoolEducationLevel)==null?void 0:P.educationLevel)==null?void 0:te.schoolType.code.toLowerCase())})&&e.jsx(B,{span:j?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{size:"large",icon:e.jsx(ce,{}),onClick:()=>u(!0),children:"Add Subject"})})]}),e.jsx(je,{loading:M,columns:g,dataSource:l,pagination:{onChange:(K,P)=>{E(P),U(K,q,P)},total:h,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}}),e.jsx(Ce,{title:"Adding "+((R=t.schoolEducationLevel)==null?void 0:R.educationLevel.name)+" Subjects",anchor:"right",open:m,noOverFlow:!0,onClose:K=>u(K),width:"35vw",children:e.jsx(Zr,{randKey:Math.random(),onAdd:p,schoolEducationLevel:t.schoolEducationLevel})}),e.jsx(Ce,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{marginRight:5},children:(X=(G=n==null?void 0:n.schoolSubject)==null?void 0:G.subject)==null?void 0:X.name}),((me=n==null?void 0:n.combination)==null?void 0:me.name)&&e.jsx(le,{style:{marginLeft:5},color:"red",children:(ge=n==null?void 0:n.combination)==null?void 0:ge.name}),"Teachers"]}),ancho:"right",width:"45vw",onClose:K=>o(K),open:d,noOverFlow:!0,children:e.jsx(sl,{schoolEducationLevelSubject:n,randKey:Math.random()})}),e.jsx(re,{title:"Alternate "+((fe=n==null?void 0:n.schoolSubject)==null?void 0:fe.subject.name)+" Subject Creator",width:"35vw",open:b,onclose:K=>Y(K),children:e.jsx(el,{subject:n,onFinish:$})})]})},rl=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(0),[h,C]=s.useState(20),[k,E]=s.useState(""),[q,I]=s.useState(!0),[M]=a.useForm(),N=!ve.useBreakpoint().lg,[b,Y]=s.useState(!1),[v,S]=s.useState(!1),[L,j]=s.useState(!1),[T,f]=s.useState(!1),[p,F]=s.useState(1),r=K=>{F(K)},g=K=>{c(K),j(!0)},U=K=>{c(K),f(!0)},$=K=>{c(K),S(!0)},R=K=>{c(K),Y(!0)},G=async K=>{i([K,...l])},X=async K=>{on(K).then(P=>{P&&(P.success?(x.success(P.message),i(l.filter(te=>te.id!==K))):x.error(P.message))})},me=async K=>{dn(K,p).then(P=>{P&&(P.success?(x.success(P.message),i(l.map(te=>te.id===K?P.schoolEducationLevel:te))):x.error(P.message))})},ge=[{title:"Name",dataIndex:"name",fixed:!0,render:(K,P,te)=>e.jsx("span",{children:e.jsx("a",{children:P.educationLevel.name})})},{title:"School Type",dataIndex:"schoolType",fixed:!0,render:(K,P,te)=>e.jsx("span",{children:e.jsx(le,{color:"green",children:P.educationLevel.schoolType.name})})},{title:"Level Index",dataIndex:"levelIndex",fixed:!0,render:(K,P,te)=>e.jsx("span",{children:e.jsx(se,{disabled:!0,title:e.jsx(e.Fragment,{children:e.jsxs(pe,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Update Education Level Index?"}),e.jsx("div",{style:{height:"10px"}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Education Level Index"}),e.jsx("span",{children:e.jsx(_e,{min:1,max:10,defaultValue:P.levelIndex,onChange:r,style:{width:"100%"}})})]})}),onVisibleChange:ee=>{ee||F(P.levelIndex)},onConfirm:()=>me(P.id),onCancel:()=>{},okText:"Update",cancelText:"No",okButtonProps:{disabled:p<1||p>10},overlayStyle:{zIndex:9999},children:e.jsx("a",{children:e.jsx(le,{color:"green",children:P.levelIndex})})})})},{title:"Date Created",dataIndex:"created",render:(K,P,te)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(P.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(K,P,te)=>e.jsx("a",{children:P!=null&&P.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(K,P,te)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsxs(J,{children:[e.jsx(J.Item,{icon:e.jsx(he,{}),children:e.jsx(se,{title:"Are you sure to delete this task?",onConfirm:()=>X(P.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!P.canDelete,overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})}),["osc","pr"].some(ee=>ee===P.educationLevel.schoolType.code.toLowerCase())&&e.jsx(J.Item,{icon:e.jsx(we,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>R(P),children:"Groups"})}),["asc"].some(ee=>ee===P.educationLevel.schoolType.code)&&e.jsx(J.Item,{icon:e.jsx(we,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>$(P),children:"Combinations"})}),e.jsx(J.Item,{icon:e.jsx(we,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>U(P),children:"Students"})}),["osc","pr"].some(ee=>ee===P.educationLevel.schoolType.code.toLowerCase())&&e.jsx(J.Item,{icon:e.jsx(he,{}),onClick:()=>g(P),children:e.jsx("a",{children:"Subjects"})}),["asc"].some(ee=>ee===P.educationLevel.schoolType.code.toLowerCase())&&e.jsx(J.Item,{icon:e.jsx(he,{}),onClick:()=>g(P),children:e.jsx("a",{children:"Subjects"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:ee=>ee.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],fe=async(K,P="",te=20)=>{I(!0),an(K,P,te).then(ee=>{ee&&(o(ee.total),i([...ee.results]))}),I(!1)};return s.useEffect(()=>{fe(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:N?24:20,children:e.jsx(a,{layout:"vertical",form:M,onFinish:K=>{E(K.key),l.length=0,fe(1,K.key,h)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:N?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{icon:e.jsx(ce,{}),size:"large",onClick:()=>u(!0),children:"Add Education Level"})})]}),e.jsx(je,{loading:q,columns:ge,dataSource:l,pagination:{onChange:(K,P)=>{C(P),fe(K,k,P)},total:d,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Ce,{title:"Adding Education levels",onClose:K=>u(K),open:m,noOverFlow:!0,anchor:"right",width:"30vw",children:e.jsx(Rr,{randKey:Math.random(),onAdd:G})}),e.jsx(re,{title:"Education Level Groups",open:b,onClose:K=>Y(K),width:"50vw",children:e.jsx(_r,{schoolEducationLevel:n,height:55})}),e.jsx(re,{title:"Education Combinations",open:v,onClose:K=>S(K),width:"50vw",children:e.jsx(Gr,{schoolEducationLevel:n,height:55})}),e.jsx(Ce,{title:`${n==null?void 0:n.educationLevel.name} Students`,open:T,noOverFlow:!0,anchor:"right",width:"90vw",onClose:K=>f(K),children:e.jsx(Xr,{schoolEducationLevel:n,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.educationLevel.name)+" Subjects",open:L,width:"70vw",onClose:K=>j(K),children:e.jsx(nl,{schoolEducationLevel:n,height:55,randKey:Math.random()})})]})},ll=()=>(s.useEffect(()=>{document.title=ye.system_name+": Education Levels"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Education Levels"})]})}),e.jsx(rl,{})]})),{TextArea:al}=_,{Option:Dt}=H,il=t=>{const[n,c]=s.useState(!0),[l,i]=s.useState(!0),[m,u]=s.useState([]),[d,o]=s.useState([]),h=async(k,E="")=>{c(!0);const{data:q}=await w.custom({url:"",method:"get",meta:{operation:"schoolDepartments",variables:{page:{value:k,type:"Int",required:!0},key:{value:E,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Gt}]}}).catch(()=>(x.error("Error occured while fetching departments"),{data:null})).then(I=>I);q&&u([...q.results]),c(!1)},C=async(k,E="")=>{i(!0);const{data:q}=await w.custom({url:"",method:"get",meta:{operation:"systemProgrammes",variables:{page:{value:k,type:"Int",required:!0},key:{value:E,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Ot}]}}).catch(()=>(x.error("Error occured while fetching programmes"),{data:null})).then(I=>I);q&&o([...q.results]),i(!1)};return s.useEffect(()=>{h(1),C(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:k=>{t.onFinish(k)},requiredMark:!0,children:[e.jsx(a.Item,{name:"department_id",label:"Department",rules:[{required:!0,type:"string",message:"Please choose Department..."}],children:e.jsx(H,{showSearch:!0,placeholder:"Select a Department",optionFilterProp:"children",onChange:k=>{},onSearch:k=>{},filterOption:(k,E)=>E.children.toLowerCase().includes(k.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((k,E)=>e.jsx(Dt,{value:k.id,children:k.name}))})}),e.jsx(a.Item,{name:"programme_id",label:"Programme",rules:[{required:!0,type:"string",message:"Please choose Programme..."}],children:e.jsx(H,{showSearch:!0,placeholder:"Select a Programme",optionFilterProp:"children",onChange:k=>{},onSearch:k=>{},filterOption:(k,E)=>E.children.toLowerCase().includes(k.toLowerCase()),dropdownStyle:{zIndex:9999},children:d.map((k,E)=>e.jsx(Dt,{value:k.id,children:k.name}))})}),e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(al,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:ol}=_,{Option:zt}=H,dl=t=>{const[n,c]=s.useState(t.course.isActive),[l,i]=s.useState(!0),[m,u]=s.useState([]),[d,o]=s.useState([]),h=async(k,E="")=>{i(!0);const{data:q}=await w.custom({url:"",method:"get",meta:{operation:"schoolDepartments",variables:{page:{value:k,type:"Int",required:!0},key:{value:E,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Gt}]}}).catch(()=>(x.error("Error occured while fetching departments"),{data:null})).then(I=>I);q&&u([...q.results]),i(!1)},C=async(k,E="")=>{const{data:q}=await w.custom({url:"",method:"get",meta:{operation:"systemProgrammes",variables:{page:{value:k,type:"Int",required:!0},key:{value:E,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Ot}]}}).catch(()=>(x.error("Error occured while fetching programmes"),{data:null})).then(I=>I);q&&o([...q.results])};return s.useEffect(()=>{h(1),C(1),t.form.setFieldsValue({department_id:t.course.department.id,programme_id:t.course.programme.id,name:t.course.name,description:t.course.description,is_active:t.course.isActive})},[t.form,t.course,t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:l,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:k=>{k.is_active=n,k.id=parseInt(t.course.id),t.onFinish(k)},requiredMark:!0,children:[e.jsx(a.Item,{name:"department_id",label:"Department",rules:[{required:!0,type:"string",message:"Please choose Department..."}],children:e.jsx(H,{showSearch:!0,placeholder:"Select a Department",optionFilterProp:"children",onChange:k=>{},onSearch:k=>{},filterOption:(k,E)=>E.children.toLowerCase().includes(k.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((k,E)=>e.jsx(zt,{value:k.id,children:k.name}))})}),e.jsx(a.Item,{name:"programme_id",label:"Programme",rules:[{required:!0,type:"string",message:"Please choose Programme..."}],children:e.jsx(H,{showSearch:!0,placeholder:"Select a Programme",optionFilterProp:"children",onChange:k=>{},onSearch:k=>{},filterOption:(k,E)=>E.children.toLowerCase().includes(k.toLowerCase()),dropdownStyle:{zIndex:9999},children:d.map((k,E)=>e.jsx(zt,{value:k.id,children:k.name}))})}),e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(ol,{rows:4,maxLength:6})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Le,{checked:n,onChange:()=>c(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},cl=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(20),[d,o]=s.useState(""),[h,C]=s.useState(0),[k,E]=s.useState(!0),[q]=a.useForm(),[I]=a.useForm(),[M]=a.useForm(),N=!ve.useBreakpoint().lg,[b,Y]=s.useState(!1),[v,S]=s.useState(!1),L=r=>{c(r),S(!0)},j=async r=>{cn(r).then(g=>{g&&(g.success?(x.success(g.message),I.resetFields(),Y(!1),i([g.course,...l])):x.error(g.message))})},T=async r=>{un(r).then(g=>{g&&(g.success?(x.success(g.message),M.resetFields(),S(!1),i(l.map(U=>parseInt(U.id.toString())===parseInt(r.id.toString())?g.course:U))):x.error(g.message))})},f=async r=>{mn(r).then(g=>{g&&(g.success?(x.success(g.message),i(l.filter(U=>U.id!==r))):x.error(g.message))})},p=async(r,g="",U=20)=>{E(!0),hn(r,g,U).then($=>{$&&(C($.total),i([...$.results]))}),E(!1)};s.useEffect(()=>{p(1,"",20)},[]);const F=[{title:"Name",dataIndex:"name",fixed:!0,render:(r,g,U)=>e.jsx("span",{children:e.jsx("a",{children:g.name})})},{title:"Programme",dataIndex:"programme",fixed:!0,render:(r,g,U)=>e.jsx("span",{children:g.programme.name})},{title:"Department",dataIndex:"department",fixed:!0,render:(r,g,U)=>e.jsx("span",{children:g.department.name})},{title:"Created",dataIndex:"created",render:(r,g,U)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(g.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(r,g,U)=>e.jsx("a",{children:g!=null&&g.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(r,g,U)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(se,{title:"Are you sure to delete this Faculty?",onConfirm:()=>f(g==null?void 0:g.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(g!=null&&g.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(D,{icon:e.jsx(he,{}),disabled:!(g!=null&&g.canDelete)})}),e.jsx(Z,{title:"Edit "+(g==null?void 0:g.name)+" Faculty",color:"green",children:e.jsx(D,{icon:e.jsx(Ne,{}),disabled:!(g!=null&&g.canEdit),onClick:()=>L(g)})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:N?24:20,children:e.jsx(a,{layout:"vertical",form:q,onFinish:r=>{o(r.key),l.length=0,p(1,r.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:N?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Z,{title:"Add New Course",children:e.jsx(D,{icon:e.jsx(ce,{}),size:"large",onClick:()=>Y(!0),children:"Add Course"})})})]}),e.jsx(je,{loading:k,columns:F,dataSource:l,pagination:{onChange:(r,g)=>{u(g),p(r,d,g)},total:h,pageSize:m,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{open:b,onClose:r=>Y(r),width:"30vw",title:"Adding Course",children:e.jsx(il,{form:I,onFinish:j,randKey:Math.random()})}),e.jsx(re,{open:v,onClose:r=>S(r),width:"30vw",title:"Edit Course",children:e.jsx(dl,{course:n,onFinish:T,form:M,randKey:Math.random()})})]})},ul=()=>(s.useEffect(()=>{document.title=ye.system_name+": Courses"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Courses"})]})}),e.jsx(cl,{height:80,control:!1})]})),{TextArea:hl}=_,{Option:ml}=H,xl=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(!0),[m,u]=s.useState([]),d=async h=>{c(!0),xn(h).then(C=>{c(!1),C&&(C.success?(x.success(C.message),t.form.resetFields(),t.onFinish(C.department)):x.error(C.message))})},o=async(h,C="")=>{i(!0);const{data:k}=await w.custom({url:"",method:"get",meta:{operation:"schoolFaculties",variables:{page:{value:h,type:"Int",required:!0},key:{value:C,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Kt}]}}).catch(()=>(x.error("Error occured while fetching faculties"),{data:null})).then(E=>E);k&&u([...k.results]),i(!1)};return s.useEffect(()=>{o(1)},[t.randKey]),e.jsx("div",{style:{maxHeight:"100%",overflowY:"auto",overflowX:"hidden"},children:e.jsx(oe,{spinning:l,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:h=>{d(h)},requiredMark:!0,children:[e.jsx(a.Item,{name:"faculty_id",label:"Faculty",rules:[{required:!0,type:"string",message:"Please choose Faculty..."}],children:e.jsx(H,{showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,C)=>C.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((h,C)=>e.jsx(ml,{value:h.id,children:h.name}))})}),e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(hl,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Save"})})]})})})},{TextArea:gl}=_,{Option:jl}=H,yl=t=>{const[n,c]=s.useState(t.department.isActive),[l,i]=s.useState(!0),[m,u]=s.useState([]),d=async(o,h="")=>{i(!0);const{data:C}=await w.custom({url:"",method:"get",meta:{operation:"schoolFaculties",variables:{page:{value:o,type:"Int",required:!0},key:{value:h,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Kt}]}}).catch(()=>(x.error("Error occured while fetching faculties"),{data:null})).then(k=>k);C&&u([...C.results]),i(!1)};return s.useEffect(()=>{d(1),t.form.setFieldsValue({faculty_id:t.department.faculty.id,name:t.department.name,description:t.department.description,is_active:t.department.isActive})},[t.form,t.department,t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:l,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:o=>{o.is_active=n,o.id=parseInt(t.department.id),t.onFinish(o)},requiredMark:!0,children:[e.jsx(a.Item,{name:"faculty_id",label:"Faculty",rules:[{required:!0,type:"string",message:"Please choose Faculty..."}],children:e.jsx(H,{showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onChange:o=>{},onSearch:o=>{},filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((o,h)=>e.jsx(jl,{value:o.id,children:o.name}))})}),e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(gl,{rows:4,maxLength:6})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Le,{checked:n,onChange:()=>c(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},pl=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,E]=s.useState(!0),[q]=a.useForm(),[I]=a.useForm(),[M]=a.useForm();ve.useBreakpoint().lg;const[N,b]=s.useState(!1),[Y,v]=s.useState(!1),S=F=>{c(F),v(!0)},L=async F=>{gn(F).then(r=>{r&&(r.success?(x.success(r.message),M.resetFields(),v(!1),i(l.map(g=>parseInt(g.id.toString())===parseInt(F.id.toString())?r.department:g))):x.error(r.message))})},j=async F=>{yn(F).then(r=>{r&&(r.success?(x.success(r.message),i(l.filter(g=>g.id!==F))):x.error(r.message))})},T=()=>{x("Canceled")},f=async(F,r="",g=20)=>{E(!0),jn(F,r,g).then(U=>{U&&(u(U.total),i([...U.results]))}),E(!1)};s.useEffect(()=>{f(1,"",20)},[]);const p=[{title:"Name",dataIndex:"name",fixed:!0,render:(F,r,g)=>e.jsx("span",{children:e.jsx("a",{children:r.name})})},{title:"Faculty",dataIndex:"faculty",fixed:!0,render:(F,r,g)=>e.jsx("span",{children:r.faculty.name})},{title:"Created",dataIndex:"created",render:(F,r,g)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(r.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(F,r,g)=>e.jsx("a",{children:r!=null&&r.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(F,r,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(se,{title:"Are you sure to delete this Faculty?",onConfirm:()=>j(r==null?void 0:r.id),onCancel:()=>T,okText:"Yes",cancelText:"No",disabled:!(r!=null&&r.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(D,{icon:e.jsx(he,{}),disabled:!(r!=null&&r.canDelete)})}),e.jsx(Z,{title:"Edit "+(r==null?void 0:r.name)+" Faculty",color:"green",children:e.jsx(D,{icon:e.jsx(Ne,{}),disabled:!(r!=null&&r.canEdit),onClick:()=>S(r)})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:12,children:e.jsx(a,{layout:"vertical",form:q,onFinish:F=>{C(F.key),l.length=0,f(1,F.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Z,{title:"Add New Department",children:e.jsx(D,{icon:e.jsx(ce,{}),size:"large",onClick:()=>b(!0),children:"Add Department"})})})]}),e.jsx(je,{loading:k,columns:p,dataSource:l,pagination:{onChange:(F,r)=>{o(r),f(F,h,r)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{open:N,onClose:F=>b(F),title:"Adding Department",width:"30vw",children:e.jsx(xl,{form:I,onFinish:F=>{i([F,...l]),b(!1)},randKey:Math.random()})}),e.jsx(re,{open:Y,onClose:F=>v(F),title:"Edit Department",width:"30vw",children:e.jsx(yl,{department:n,form:M,onFinish:L,randKey:Math.random()})})]})},fl=()=>(s.useEffect(()=>{document.title=ye.system_name+": Departments"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Departments"})]})}),e.jsx(pl,{height:77})]})),Sl=()=>(s.useEffect(()=>{document.title=ye.system_name+": Examinations"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Examinations"})]})}),e.jsx(xr,{})]})),{TextArea:vl}=_,Cl=t=>{const[n,c]=s.useState(!1),l=async i=>{c(!0),pn(i).then(m=>{m&&(m.success?(x.success(m.message),t==null||t.form.resetFields(),t==null||t.onFinish(m.faculty)):x.error(m.message))}),c(!1)};return e.jsx(e.Fragment,{children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:i=>{l(i)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(vl,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Save"})})]})})},{TextArea:bl}=_,Il=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(t.faculty.isActive),m=async u=>{c(!0),fn(u).then(d=>{d&&(c(!1),d.success?(x.success(d.message),t.form.resetFields(),t.onFinish(d.faculty)):x.error(d.message))})};return s.useEffect(()=>{t.form.setFieldsValue({name:t.faculty.name,description:t.faculty.description,is_active:t.faculty.isActive})},[t.form,t.faculty]),e.jsx(e.Fragment,{children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:u=>{u.is_active=l,u.id=parseInt(t.faculty.id),m(u)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(bl,{rows:4,maxLength:6})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Le,{checked:l,onChange:()=>i(!l),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Save"})})]})})},Fl=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(20),[d,o]=s.useState(""),[h,C]=s.useState(0),[k,E]=s.useState(!0),[q]=a.useForm(),[I]=a.useForm(),[M]=a.useForm(),N=!ve.useBreakpoint().lg,[b,Y]=s.useState(!1),[v,S]=s.useState(!1),L=F=>{c(F),S(!0)},j=async F=>{vn(F).then(r=>{r&&(r.success?(x.success(r.message),i(l.filter(g=>g.id!==F))):x.error(r.message))})},T=()=>{x("Canceled")},f=async(F,r="",g=20)=>{E(!0),Sn(F,r,g).then(U=>{U&&(C(U.total),i([...U.results]))}),E(!1)};s.useEffect(()=>{f(1,"",20)},[]);const p=[{title:"Name",dataIndex:"name",fixed:!0,render:(F,r,g)=>e.jsx("span",{children:e.jsx("a",{children:r.name})})},{title:"Created",dataIndex:"created",render:(F,r,g)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(r.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(F,r,g)=>e.jsx("a",{children:r!=null&&r.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(F,r,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(se,{title:"Are you sure to delete this Faculty?",onConfirm:()=>j(r==null?void 0:r.id),onCancel:()=>T,okText:"Yes",cancelText:"No",disabled:!(r!=null&&r.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(D,{icon:e.jsx(he,{}),disabled:!(r!=null&&r.canDelete)})}),e.jsx(Z,{title:"Edit "+(r==null?void 0:r.name)+" Faculty",color:"green",children:e.jsx(D,{icon:e.jsx(Ne,{}),disabled:!(r!=null&&r.canEdit),onClick:()=>L(r)})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:N?24:20,children:e.jsx(a,{layout:"vertical",form:q,onFinish:F=>{o(F.key),l.length=0,f(1,F.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:N?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Z,{title:"Add New Faculty",children:e.jsx(D,{icon:e.jsx(ce,{}),size:"large",onClick:()=>Y(!0),children:"Add Faculty"})})})]}),e.jsx(je,{loading:k,columns:p,dataSource:l,pagination:{onChange:(F,r)=>{u(r),f(F,d,r)},total:h,pageSize:m,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{open:b,onClose:F=>Y(F),width:"30vw",title:"Adding Faculty",children:e.jsx(Cl,{form:I,onFinish:F=>{i([F,...l]),Y(!1)}})}),e.jsx(re,{open:v,onClose:F=>S(F),width:"30vw",title:"Edit Faculty",children:e.jsx(Il,{faculty:n,form:M,onFinish:F=>{i(l.map(r=>parseInt(r.id.toString())===parseInt(F.id.toString())?F:r)),S(!1)}})})]})},kl=()=>(s.useEffect(()=>{document.title=ye.system_name+": Faculties"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Faculties"})]})}),e.jsx(Fl,{height:77})]})),{TextArea:Ml}=_,Ll=t=>{const[n,c]=s.useState(!1),l=async i=>{const{data:m}=await w.custom({url:"",method:"post",meta:{operation:"createSchoolFee",variables:{name:{value:i.name,type:"String",required:!0},description:{value:i.description,type:"String",required:!1}},fields:["success","message",{schoolFee:_t}]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(u=>u);m&&(m.success?(x.success(m.message),t.onFinish(m.schoolFee)):x.error(m.message))};return s.useEffect(()=>{},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:i=>{l(i)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Ml,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:Al}=_,El=t=>{var i,m;const[n,c]=s.useState(!1),l=async u=>{var o;const{data:d}=await w.custom({url:"",method:"post",meta:{operation:"updateSchoolFee",variables:{schoolFeeId:{value:(o=t.schoolFee)==null?void 0:o.id,type:"Int",required:!0},name:{value:u.name,type:"String",required:!0},description:{value:u.description,type:"String",required:!1}},fields:["success","message",{schoolFee:_t}]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(h=>h);d&&(d.success?(x.success(d.message),t.onFinish(d.schoolFee)):x.error(d.message)),c(!1)};return s.useEffect(()=>{var u,d;t.form.setFieldsValue({name:(u=t.schoolFee)==null?void 0:u.name,description:(d=t.schoolFee)==null?void 0:d.description})},[t.form,t.randKey,(i=t.schoolFee)==null?void 0:i.description,(m=t.schoolFee)==null?void 0:m.name]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:u=>{l(u)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Al,{rows:4,maxLength:6})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},Nl=()=>{const[t,n]=s.useState(),[c,l]=s.useState([]),[i,m]=s.useState(!1),[u,d]=s.useState(0),[o,h]=s.useState(20),[C,k]=s.useState(""),[E,q]=s.useState(!0),[I]=a.useForm(),[M]=a.useForm(),[A]=a.useForm(),b=!ve.useBreakpoint().lg,{push:Y}=gt(),[v,S]=s.useState(!1),L=r=>{S(!0),n(r)},j=[{title:"Name",dataIndex:"name",fixed:!0,render:(r,g)=>e.jsx("span",{children:e.jsx("a",{onClick:()=>Y("/schoolmanager/school/fees/"+g.id+"/education/levels/"),children:g.name})})},{title:"Date Created",dataIndex:"created",render:(r,g)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(g.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(r,g)=>e.jsx("a",{children:g!=null&&g.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(r,g)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsxs(J,{children:[e.jsx(J.Item,{icon:e.jsx(we,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>Y("/schoolmanager/school/fees/"+g.id+"/education/levels/"),children:"Education Levels Fees"})}),e.jsx(J.Item,{icon:e.jsx(he,{}),children:e.jsx(se,{title:"Are you sure to delete this School Fee?",disabled:!(g!=null&&g.canDelete),onConfirm:()=>T(g.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(J.Item,{icon:e.jsx(Ne,{}),disabled:!g.canEdit,onClick:()=>L(g),children:e.jsx("a",{rel:"noopener noreferrer",children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],T=async r=>{Cn(r).then(g=>{g&&(g.success?(x.success(g.message),l(c.filter(U=>U.id!==r))):x.error(g.message))})},f=async(r,g="",U=20)=>{q(!0),bn(r,g,U).then($=>{$&&(d($.total),l([...$.results]))}),q(!1)},p=async r=>{l(c.map(g=>g.id===(t==null?void 0:t.id)?r:g)),A.resetFields(),S(!1)},F=async r=>{l([r,...c]),M.resetFields(),m(!1)};return s.useEffect(()=>{f(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:b?24:20,children:e.jsx(a,{layout:"vertical",form:I,onFinish:r=>{k(r.key),c.length=0,f(1,r.key,o)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:b?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{icon:e.jsx(ce,{}),size:"large",onClick:()=>m(!0),children:"Create Fee"})})]}),e.jsx(je,{loading:E,columns:j,dataSource:c,pagination:{onChange:(r,g)=>{h(g),f(r,C,g)},total:u,pageSize:o,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Creating School Fee",open:i,width:"40vw",onClose:r=>m(r),children:e.jsx(Ll,{form:M,onFinish:F})}),e.jsx(re,{title:"Editting "+(t==null?void 0:t.name),width:"40vw",open:v,onClose:r=>S(r),children:e.jsx(El,{form:A,schoolFee:t,randKey:Math.random(),onFinish:p})})]})},Pl=()=>(s.useEffect(()=>{document.title=ye.system_name+": School Fees"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"School Fees"})]})}),e.jsx(Nl,{})]})),{Option:Dl}=H,ds=[];for(let t=2022;t<new Date().getFullYear()+5;t++)ds.push(e.jsx(Dl,{children:t.toString()},t));const zl=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(0),[m,u]=s.useState(20),[d,o]=s.useState(""),[h,C]=s.useState(!0),[k]=a.useForm(),q=!ve.useBreakpoint().lg,[I,M]=s.useState(new Date().getFullYear()),[A,N]=s.useState(0),b=j=>{M(j)},Y=j=>{N(j)},v=[{title:"Name",dataIndex:"name",fixed:!0,render:(j,T,f)=>e.jsx("span",{children:e.jsx("a",{children:T.educationLevel.name})})},{title:"",dataIndex:"action",render:(j,T,f)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(se,{arrowPointAtCenter:!1,title:e.jsx(e.Fragment,{children:e.jsxs(pe,{direction:"vertical",children:[e.jsxs("span",{children:["Are you sure to Add ",T.educationLevel.name,' ?"']}),e.jsx("div",{style:{height:15}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Fee Amount"}),e.jsx("span",{children:e.jsx(_e,{size:"large",min:0,defaultValue:0,value:A,onChange:Y,style:{width:"100%"}})}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Academic Year"}),e.jsx("span",{children:e.jsx(H,{size:"large",value:I?parseInt(I.toString()):new Date().getFullYear(),placeholder:"Please Choose Year ...",style:{width:"100%"},onChange:b,dropdownStyle:{zIndex:9999},children:ds})})]})}),onConfirm:()=>S(T.id),onCancel:()=>{},onVisibleChange:p=>{p&&(M(new Date().getFullYear()),N(0))},okText:"Yes",cancelText:"No",okButtonProps:{disabled:A<=0},overlayStyle:{zIndex:9999},children:e.jsx(D,{icon:e.jsx(ce,{}),children:"Add"})})})}],S=async j=>{var T;In(j,I,A,((T=t.fee)==null?void 0:T.id)??0).then(f=>{f&&(f.success?(x.success(f.message),c(n.filter(p=>p.id!==j)),t.onFinish(f.schoolEducationLevelFee)):x.error(f.message))})},L=async(j,T="",f=20)=>{var p;C(!0),Fn(j,T,f,((p=t.fee)==null?void 0:p.id)??0).then(F=>{F&&(i(F.total),c([...F.results]))}),C(!1)};return s.useEffect(()=>{L(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{style:{marginTop:10},children:e.jsx(B,{span:q?24:20,children:e.jsx(a,{layout:"vertical",form:k,onFinish:j=>{o(j.key),n.length=0,L(1,j.key,m)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(je,{loading:h,columns:v,dataSource:n,pagination:{onChange:(j,T)=>{u(T),L(j,d,T)},total:l,pageSize:m,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})]})},Tl=t=>{var i,m;const[n,c]=s.useState(!1),l=async u=>{var o;const{data:d}=await w.custom({url:"",method:"post",meta:{operation:"updateSchoolEducationLevelFee",variables:{schoolEducationLevelFeeId:{value:(o=t.schoolEducationLevelFee)==null?void 0:o.id,type:"Int",required:!0},amount:{value:u.amount,type:"Float",required:!0},vatIncluded:{value:u.vatIncluded,type:"Boolean",required:!0}},fields:["success","message",{schoolEducationLevelFee:kn}]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(h=>h);d&&(d.success?(x.success(d.message),t.onFinish(d.schoolEducationLevelFee)):x.error(d.message)),c(!1)};return s.useEffect(()=>{var u,d;t.form.setFieldsValue({amount:(u=t.schoolEducationLevelFee)==null?void 0:u.amount,vatIncluded:(d=t.schoolEducationLevelFee)==null?void 0:d.vatIncluded})},[t.form,t.randKey,(i=t.schoolEducationLevelFee)==null?void 0:i.amount,(m=t.schoolEducationLevelFee)==null?void 0:m.vatIncluded]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:u=>{l(u)},requiredMark:!0,children:[e.jsx(a.Item,{name:"amount",label:"Amount",rules:[{required:!0,type:"number",min:0,message:"Please input Fee Amount"}],children:e.jsx(_e,{min:0,defaultValue:0,style:{width:"100%"}})}),e.jsx(a.Item,{name:"vatIncluded",valuePropName:"checked",initialValue:!0,rules:[{required:!0,type:"boolean",message:"Please check"}],children:e.jsx(Le,{children:"VAT Included"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},ql=t=>{var g,U;const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(0),[h,C]=s.useState(20),[k,E]=s.useState(""),[q,I]=s.useState(!0),[M]=a.useForm(),[A]=a.useForm(),[N]=a.useForm(),[b,Y]=s.useState(!1),S=!ve.useBreakpoint().lg,L=Ue(),j=async $=>{c($),Y(!0)},T=[{title:"Education Level",dataIndex:"educationLevel",fixed:!0,render:($,R)=>{var G,X;return e.jsx("span",{children:e.jsx("a",{children:(X=(G=R.schoolEducationLevel)==null?void 0:G.educationLevel)==null?void 0:X.name})})}},{title:"Year",dataIndex:"year",fixed:!0,render:($,R)=>e.jsx("span",{children:R.year})},{title:"Amount",dataIndex:"amount",fixed:!0,render:($,R)=>e.jsx("span",{children:parseFloat(R.amount).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")})},{title:"VAT Included",dataIndex:"vatIncluded",fixed:!0,render:($,R)=>e.jsx("span",{children:R.vatIncluded?"Yes":"No"})},{title:"Date Created",dataIndex:"created",render:($,R)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(R.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:($,R)=>e.jsx("a",{children:R!=null&&R.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:($,R)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsxs(J,{children:[e.jsx(J.Item,{icon:e.jsx(he,{}),children:e.jsx(se,{title:"Are you sure to delete this School Fee?",disabled:!(R!=null&&R.canDelete),onConfirm:()=>f(R.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(J.Item,{icon:e.jsx(Ne,{}),disabled:!R.canEdit,onClick:()=>j(R),children:e.jsx("a",{rel:"noopener noreferrer",children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:G=>G.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],f=async $=>{Mn($).then(R=>{R&&(R.success?(x.success(R.message),i(l.filter(G=>G.id!==$))):x.error(R.message))})},p=async($,R="",G=20)=>{I(!0),Ln($,R,G,L.schoolFeeId).then(X=>{X&&(o(X.total),i([...X.results]))}),I(!1)},F=async $=>{i(l.map(R=>R.id===(n==null?void 0:n.id)?$:R)),A.resetFields(),Y(!1)},r=async $=>{i([$,...l]),N.resetFields(),u(!1)};return s.useEffect(()=>{p(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:S?24:12,children:e.jsx(a,{layout:"vertical",form:M,onFinish:$=>{E($.key),l.length=0,p(1,$.key,h)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:S?24:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{icon:e.jsx(ce,{}),size:"large",disabled:!t.canAdd,onClick:()=>u(!0),children:"Add Education Level Fee"})})]}),e.jsx(je,{loading:q,columns:T,dataSource:l,pagination:{onChange:($,R)=>{C(R),p($,k,R)},total:d,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Ce,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Adding"}),e.jsx("span",{style:{marginLeft:5,color:"green"},children:(g=t.fee)==null?void 0:g.name}),e.jsx("span",{style:{marginLeft:5},children:"Education Levels Fees"})]}),width:"30vw",anchor:"right",onClose:()=>u(!1),open:m,noOverFlow:!0,children:e.jsx(zl,{fee:t.fee,randKey:Math.random(),onFinish:r})}),e.jsx(re,{title:((U=t.fee)==null?void 0:U.name)+" "+(n==null?void 0:n.schoolEducationLevel.educationLevel.name)+" Fee Editting",width:"40vw",open:b,onClose:$=>Y($),children:e.jsx(Tl,{form:A,schoolEducationLevelFee:n,randKey:Math.random(),onFinish:F})})]})},Rl=()=>{const[t,n]=s.useState(!1),[c,l]=s.useState(),i=Ue(),m=async()=>{n(!0);const{data:u}=await w.custom({url:"",method:"get",meta:{operation:"schoolFee",variables:{id:{value:parseInt(i.schoolFeeId),type:"Int",required:!0}},fields:["id",{school:["id","name"]},"name","description","isActive","created","updated","canEdit","canDelete","canManage"]}}).catch(d=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(d=>d);u&&l(u),n(!1)};return s.useEffect(()=>{document.title=ye.system_name+": Education Levels",m()},[i.schoolFeeId]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:e.jsxs(ae,{to:"/schoolmanager/school/fees",children:["School Fees",c&&e.jsx("span",{style:{marginLeft:10},children:e.jsx(le,{color:"green",children:c?c.name:"School Fee"})}),e.jsx(oe,{spinning:t})]})}),e.jsx(V.Item,{children:"Education Levels Fees"})]})}),e.jsx(ql,{fee:c,canAdd:(c==null?void 0:c.canManage)&&!t})]})},Yl=t=>{const[n,c]=s.useState([]),[l,i]=s.useState([]),[m,u]=s.useState(!1),d=async(o,h="")=>{const{data:C}=await w.custom({url:"",method:"get",meta:{operation:"schoolRolesMemberNotAssigned",variables:{page:{value:o,type:"Int",required:!0},key:{value:h,type:"String",required:!1},memberId:{value:parseInt(t.member.id),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:An}]}}).catch(()=>(x.error("Error occured while fetching roles"),{data:null})).then(k=>k);C&&c([...C.results])};return s.useEffect(()=>{d(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("h3",{children:[e.jsx("b",{children:"Full Name"}),": ",t.member.firstName," ",t.member.middleName," ",t.member.lastName]}),e.jsxs("h3",{children:[e.jsx("b",{children:"Email Address"}),": ",t.member.email]})]}),e.jsxs(a,{layout:"vertical",form:t.form,onFinish:o=>{o.roles=l.map(h=>parseInt(h.role.id.toString())),o.is_adminstrator=m,t.onFinish(o,t.member)},requiredMark:!0,children:[e.jsx(a.Item,{name:"registration_number",label:"Registration Number",rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(_,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(a.Item,{name:"is_adminstrator",rules:[{required:!1,type:"boolean"}],children:e.jsx(Le,{onChange:()=>{u(!m)},defaultChecked:m,children:"Is Adminstrator"})}),e.jsx(de,{bordered:!0,dataSource:n,renderItem:o=>e.jsx(de.Item,{children:e.jsx(Le,{onChange:h=>{h.target.checked?i([...l,o]):i(l.filter(C=>C.role.id!==o.role.id))},defaultChecked:l.includes(o),children:o.role.name})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:45},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},Gl=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!0),[d,o]=s.useState(1),[h,C]=s.useState(""),[k]=a.useForm(),[E]=a.useForm(),[q,I]=s.useState(0),[M,A]=s.useState(!1),N=v=>{A(!0),c(v)},b=async(v,S)=>{En(v,S).then(L=>{L&&(L.success?(x.success(L.message),i(l.filter(j=>j.id.toString()!==S.id.toString())),t.onAdd(L.member),A(!1),c(void 0),k.resetFields()):x.error(L.message))})},Y=async(v,S="")=>{u(!0),Nn(v,S).then(L=>{L&&(I(L.pages),o(L.page),i([...L.results]))}),u(!1)};return s.useEffect(()=>{Y(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(a,{layout:"vertical",form:E,onFinish:v=>{C(v.key),Y(1,v.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search Member(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(oe,{spinning:m,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"79vh",minHeight:"79vh",overflowY:"auto"},children:e.jsx(de,{itemLayout:"horizontal",dataSource:l,renderItem:v=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(de.Item,{style:{margin:0,padding:0},actions:[e.jsx(D,{icon:e.jsx(Oe,{}),onClick:()=>N(v)})],children:e.jsx(de.Item.Meta,{avatar:e.jsx(ts,{src:v.pic}),title:e.jsx("a",{children:v.fullName}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:v.email})})})},"file-"+v.id)})})}),e.jsx(Ze,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:2},children:e.jsx(ss,{count:q,color:"secondary",onChange:(v,S)=>{Y(S,h)}})})]}),e.jsx(re,{title:"Member Informations",open:M,onClose:v=>A(v),width:"40vw",children:e.jsx(Yl,{member:n,form:k,onFinish:b,randKey:Math.random()})})]})},{Option:cs}=H,us=[e.jsx(cs,{value:null,children:"Please Select Year"},"default")];for(let t=2022;t<new Date().getFullYear()+5;t++)us.push(e.jsx(cs,{value:t,children:t.toString()},t));const Ol=t=>{const[n,c]=s.useState(null),[l,i]=s.useState(!1),[m,u]=s.useState(!1),[d,o]=s.useState(""),[h,C]=s.useState(!1),k=async q=>{c(q)},E=async q=>{i(!0),Pn(q).then(I=>{I&&(o(I.message),I.success?(C(!0),x.success(I.message)):(C(!1),x.error(I.message)))}),i(!1),u(!0)};return s.useEffect(()=>{},[]),!l&&m?e.jsx(e.Fragment,{children:e.jsx(vt,{message:d,type:h?"success":"error",style:{fontSize:24},onClose:()=>{o(""),i(!1),C(!1),u(!1)},closable:!0})}):e.jsx(e.Fragment,{children:e.jsxs(oe,{spinning:l,children:[e.jsx("p",{style:{fontSize:20},children:"Platform supports Login Authorizations to School Members"}),e.jsxs(tt,{actions:[e.jsx(se,{title:e.jsx(e.Fragment,{children:e.jsxs(pe,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Authorize Login?"}),e.jsx("span",{style:{height:10}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Members Registration Year"}),e.jsx("span",{children:e.jsx(H,{size:"large",value:n||null,placeholder:"Please Choose Year ...",style:{width:220},onChange:k,allowClear:!0,onClear:()=>c(null),dropdownStyle:{zIndex:9999},children:us})})]})}),onConfirm:()=>E(n),onCancel:()=>{},okButtonProps:{disabled:n===null},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(D,{size:"large",icon:e.jsx(et,{}),children:"Authorize"})})],style:{marginTop:50},children:[e.jsxs("span",{style:{fontSize:18},children:["By Using Email/Phone/Registration Number of Member as Default"," ",e.jsx("b",{children:"Username"}),", While Default",e.jsx("b",{children:"Password"})," will be ",e.jsx("b",{children:"Randomly Generated"})," or same"," ",e.jsx("b",{children:"Registration Number"})]}),e.jsx("span",{style:{display:"block",color:"red",fontSize:20,marginTop:10},children:"This action will be applicable only to those Members with no Login Access/Authorization to the Platform"})]})]})})},Kl=t=>{const[n]=a.useForm(),[c,l]=s.useState(!1),i=async(m,u)=>{l(!0);const{data:d}=await w.custom({url:"",method:"post",meta:{operation:"resetMemberCredential",variables:{memberId:{value:parseInt(t.member.id.toString()),type:"Int",required:!0},phone:{value:m,type:"String",required:!0},email:{value:u,type:"String",required:!1}},fields:["success","message"]}}).catch(()=>(x.error("Error occured while resetting member credential ..."),{data:null})).then(o=>o);l(!1),d&&(d.success&&t.resetting(!1),t.resettingFeedback(d.success,d.message))};return s.useEffect(()=>{},[c]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:c,children:e.jsxs(a,{layout:"vertical",form:t.form?t.form:n,onFinish:m=>{i(m.phone,m.email)},requiredMark:!0,children:[e.jsx(a.Item,{name:"phone",label:"Mobile Phone",rules:[{required:!0,type:"string",message:"Please Mobile Phone number"}],children:e.jsx(_,{prefix:e.jsx(wt,{}),size:"large",placeholder:"Mobile Phone Number ...",onChange:m=>{t.resetPhoneChange(m.target.value)}})}),e.jsx(a.Item,{name:"email",label:"Email Addres",rules:[{required:!1,type:"string",message:"Please Email Address ..."}],children:e.jsx(_,{prefix:e.jsx(Xt,{}),size:"large",placeholder:"Email Address ..."})})]})})})},{Option:Tt}=H,_l=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(null),[m,u]=s.useState(null),[d,o]=s.useState(null),[h,C]=s.useState(null),[k,E]=s.useState(null),[q,I]=s.useState(""),[M]=a.useForm();gt();const A=async L=>{E(L.format("YYYY-MM-DD"))},N=async L=>{C(L)},b=async L=>{o(L)},Y=async L=>{i(L)},v=async L=>{u(L)},S=async L=>{c(!0);const{data:j}=await w.custom({url:"",method:"post",meta:{operation:"registerSchoolMember",variables:{firstName:{value:L.firstName,type:"String",required:!0},middleName:{value:L.middleName,type:"String",required:!0},lastName:{value:L.lastName,type:"String",required:!0},email:{value:L.email,type:"String",required:!1},phone:{value:L.phone,type:"String",required:!0},registrationNumber:{value:L.registrationNumber,type:"String",required:!0},gender:{value:L.gender,type:"String",required:!0},regionId:{value:L.regionId,type:"Int",required:!1},districtId:{value:L.districtId,type:"Int",required:!1},wardId:{value:L.wardId,type:"Int",required:!1},dob:{value:L.dob,type:"String",required:!1}},fields:["success","message",{schoolMember:We}]}}).catch(()=>(x.error("Error occured while creating School Member"),{data:null})).then(T=>T);j&&(j.success?(x.success(j.message),t.onAdd(j.schoolMember),M.resetFields()):(I(j.message),x.error(j.message))),c(!1)};return s.useEffect(()=>{},[t.randKey]),e.jsx("div",{style:{height:"100%",overflowY:"auto",overflowX:"hidden",marginBottom:"20px",padding:"10px"},children:e.jsx(Ie.Spin,{spinning:n,children:e.jsxs(e.Fragment,{children:[q.length>0&&e.jsx(Ie.Alert,{message:"Error",description:q,type:"error",closable:!0}),e.jsxs(a,{layout:"vertical",form:M,onFinish:L=>{L.regionId=l,L.districtId=m,L.wardId=d,S(L)},requiredMark:!0,children:[e.jsx(a.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(a.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(a.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10},children:e.jsx(Z,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(D,{type:"dashed",onClick:()=>x("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(_,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(a.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(_,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(a.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,type:"string",message:"Please input Phones Number"}],children:e.jsx(_,{size:"large",placeholder:"Enter Phone Number ..."})}),e.jsxs(pe,{direction:"horizontal",children:[e.jsx(a.Item,{name:"dob",label:"Date of Birth",rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(st,{size:"large",onChange:A,disabledDate:L=>L&&L>Ye().subtract(3,"years"),defaultValue:Bt(new Date).subtract(3,"years"),popupStyle:{zIndex:9999}})}),e.jsx(a.Item,{name:"gender",label:"Gender",rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:h,children:e.jsxs(H,{placeholder:"Please Choose Gender ...",style:{width:220},onChange:N,size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(Tt,{value:"female",children:"Female"}),e.jsx(Tt,{value:"male",children:"Male"})]})})]}),e.jsxs(pe,{direction:"horizontal",children:[e.jsx(pe,{direction:"vertical",children:e.jsx(lt,{onChange:Y,regionId:l,size:"large"})}),e.jsx(pe,{direction:"vertical",children:e.jsx(rt,{regionId:parseInt(l),districtId:m,onChange:v,size:"large"})})]}),e.jsx(pe,{direction:"horizontal",children:e.jsx(pe,{direction:"vertical",children:e.jsx(at,{districtId:parseInt(m),wardId:d,onChange:b,size:"large"})})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:30,marginBottom:30},children:[e.jsx(D,{size:"large",onClick:()=>{M.resetFields()},danger:!0,style:{float:"left"},icon:e.jsx(pr,{}),children:"Clear"}),e.jsx(D,{size:"large",htmlType:"submit",danger:!0,style:{float:"right"},icon:e.jsx(fr,{}),children:"Save"})]})]})]})})})},{Option:mt}=H,Bl=[];for(let t=2022;t<new Date().getFullYear()+5;t++)Bl.push(e.jsx(mt,{children:t.toString()},t));const Ul=t=>{const[n,c]=s.useState(null),[l,i]=s.useState(null),[m,u]=s.useState(null),[d,o]=s.useState(null),[h,C]=s.useState(null),[k]=a.useForm(),E=async b=>{C(b.format("YYYY-MM-DD"))},q=async b=>{o(b)},I=async b=>{u(b)},M=async b=>{c(b),i(null),u(null),k.resetFields(["districtId","wardId"])},A=async b=>{i(b),u(null),k.resetFields(["wardId"])},N=async b=>{var v;const{data:Y}=await w.custom({url:"",method:"post",meta:{operation:"updateSchoolMemberInformation",variables:{id:{value:parseInt(((v=t==null?void 0:t.member)==null?void 0:v.id.toString())??"0"),type:"Int",required:!0},firstName:{value:b.firstName,type:"String",required:!0},middleName:{value:b.middleName,type:"String",required:!0},lastName:{value:b.lastName,type:"String",required:!0},email:{value:b.email,type:"String",required:!1},phone:{value:b.phone,type:"String",required:!1},registrationNumber:{value:b.registrationNumber,type:"String",required:!0},gender:{value:b.gender,type:"String",required:!0},regionId:{value:b.regionId,type:"Int",required:!1},districtId:{value:b.districtId,type:"Int",required:!1},wardId:{value:b.wardId,type:"Int",required:!1},dob:{value:b.dob,type:"String",required:!1}},fields:["success","message",{schoolMember:We}]}}).catch(()=>(x.error("Error occured while updating member Informations"),{data:null})).then(S=>S);Y&&(Y.success?(x.success(Y.message),t.onFinish(Y.schoolMember,t.editting),k.resetFields()):x.error(Y.message))};return s.useEffect(()=>{var b,Y,v,S,L,j,T,f,p,F,r,g,U,$,R,G,X,me,ge,fe,K,P,te;o((b=t.member)==null?void 0:b.gender),c((v=(Y=t.member)==null?void 0:Y.region)==null?void 0:v.id),i((L=(S=t.member)==null?void 0:S.district)==null?void 0:L.id),u((T=(j=t.member)==null?void 0:j.ward)==null?void 0:T.id),k.setFieldsValue({firstName:(f=t.member)==null?void 0:f.firstName,middleName:(p=t.member)==null?void 0:p.middleName,lastName:(F=t.member)==null?void 0:F.lastName,email:(r=t.member)==null?void 0:r.email,phone:(g=t.member)==null?void 0:g.phone,registrationNumber:(U=t.member)==null?void 0:U.registrationNumber,gender:($=t.member)==null?void 0:$.gender,regionId:parseInt(((G=(R=t.member)==null?void 0:R.region)==null?void 0:G.id.toString())??"0"),districtId:parseInt(((me=(X=t.member)==null?void 0:X.district)==null?void 0:me.id.toString())??"0"),wardId:parseInt(((fe=(ge=t.member)==null?void 0:ge.ward)==null?void 0:fe.id.toString())??"0")}),(K=t.member)!=null&&K.dob&&(C(Ye((P=t.member)==null?void 0:P.dob)),k.setFieldsValue({dob:Bt((te=t.member)==null?void 0:te.dob)}))},[t.member]),e.jsx(e.Fragment,{children:e.jsxs(a,{layout:"vertical",form:k,onFinish:b=>{b.dob=h,N(b)},requiredMark:!0,children:[e.jsx(a.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(a.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(a.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10},children:e.jsx(Z,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(D,{type:"dashed",onClick:()=>x("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(_,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(a.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(_,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(a.Item,{name:"phone",label:"Phones Number",rules:[{required:!1,type:"string",message:"Please input Phones Number"}],children:e.jsx(_,{size:"large",placeholder:"Enter Phones Numbers ..."})}),e.jsxs(ne,{children:[e.jsx(B,{span:24,children:e.jsxs(pe,{direction:"horizontal",children:[e.jsx(a.Item,{name:"dob",label:"Date of Birth",rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(st,{onChange:E,disabledDate:b=>b&&b>Ye().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(a.Item,{name:"gender",label:"Gender",rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:d,children:e.jsxs(H,{size:"large",placeholder:"Please Choose Gender ...",style:{width:220},onChange:q,dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(mt,{value:"female",children:"Female"}),e.jsx(mt,{value:"male",children:"Male"})]})})]})}),e.jsxs(B,{span:24,children:[e.jsx(lt,{onChange:M,regionId:parseInt(n),name:"regionId",label:"Region",size:"middle",required:!1}),e.jsx(rt,{regionId:parseInt(n),districtId:parseInt(l),onChange:A,name:"districtId",label:"District",size:"middle",required:!1}),e.jsx(at,{districtId:parseInt(l),wardId:parseInt(m),onChange:I,name:"wardId",label:"Ward",size:"middle",required:!1})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Wl=t=>{const[n,c]=s.useState([]),[l,i]=s.useState([]),[m,u]=s.useState([]),d=async(E,q="")=>{const{data:I}=await w.custom({url:"",method:"get",meta:{operation:"systemRoleRecords",variables:{page:{value:E,type:"Int",required:!0},key:{value:q,type:"String",required:!1},userId:{value:parseInt(t.user.id),type:"Int",required:!0},schoolId:{value:parseInt(t.school.id),type:"Int",required:!0},custom:{value:!1,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["key","title","description","chosen"]}]}});c([...I.results])},o=async E=>{const{data:q}=await w.custom({url:"",method:"post",meta:{operation:"addUserRoles",variables:{userId:{value:parseInt(t.user.id),type:"Int",required:!0},roles:{value:E.map(I=>parseInt(I)),type:"[Int]",required:!0}},fields:["success","message"]}});q.success?(x.success(q.message),d(1)):x.error(q.message)},h=async E=>{const{data:q}=await w.custom({url:"",method:"post",meta:{operation:"removeUserRoles",variables:{userId:{value:parseInt(t.user.id),type:"Int",required:!0},roles:{value:E.map(I=>parseInt(I)),type:"[Int]",required:!0}},fields:["success","message"]}});q.success?(x.success(q.message),d(1)):x.error(q.message)},C=E=>{m.length>0&&o(m),l.length>0&&h(l)},k=(E,q)=>{u(E),i(q)};return s.useEffect(()=>{d(1)},[t.randKey,t.user]),e.jsx(e.Fragment,{children:e.jsx(Sr,{titles:["Not Assigned Roles","Assigned Roles"],dataSource:n,showSearch:!0,listStyle:{width:"100vw",height:"65vh"},operations:["Add","Remove"],targetKeys:n.filter(E=>E.chosen).map(E=>E.key),onChange:(E,q,I)=>C(E.map(M=>M.toString())),onSelectChange:(E,q)=>k(E.map(I=>I.toString()),q.map(I=>I.toString())),onSearch:(E,q)=>{},render:E=>E.title})})},Vl=t=>{const[n,c]=s.useState([]),l=async(m,u="")=>{const{data:d}=await w.custom({url:"",method:"get",meta:{operation:"userRoles",variables:{page:{value:m,type:"Int",required:!0},key:{value:u,type:"String",required:!1},userId:{value:parseInt(t.user.id),type:"Int",required:!0},schoolId:{value:parseInt(t.school.id),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","created","updated","isActive","canEdit","canDelete","canManage",{role:["id","name","code","description","created","updated","isActive","canEdit","canDelete","canManage"]}]}]}});c([...d.results])},i=async m=>{const{data:u}=await w.custom({url:"",method:"post",meta:{operation:"removeUserRole",variables:{roleId:{value:m.role.id,type:"Int",required:!0},userId:{value:parseInt(t.user.id),type:"Int",required:!0}},fields:["success","message"]}});u.success?(x.success(u.message),c(n.filter(d=>d.id!==m.id))):x.error(u.message)};return s.useEffect(()=>{l(1)},[t.randKey,t.user]),e.jsx(e.Fragment,{children:e.jsx(de,{dataSource:n,renderItem:m=>e.jsx(de.Item,{actions:[e.jsx(se,{placement:"topLeft",title:"Remove "+m.role.name,onConfirm:()=>i(m),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(D,{icon:e.jsx(he,{}),children:"Remove"})})],children:m.role.name})})})},$l=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,Hl=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(!1),[m]=a.useForm(),u=async d=>{const{data:o}=await w.custom({url:"",method:"post",meta:{operation:"uploadSchoolMemberProfilePhoto",variables:{id:{value:parseInt(t.member.id),type:"Int",required:!0},photo:{value:d.file,type:"Upload",required:!0}},fields:["success","message",{schoolMember:We}]}}).catch(h=>(console.error(h),x.error("Error occured while uploading profile picture"),{data:null})).then(h=>h);o&&(o.success?(x.success(o.message),t.onChange(o.schoolMember),c(!1)):x.error(o.message))};return s.useEffect(()=>{},[]),e.jsxs(e.Fragment,{children:[e.jsx(D,{block:!0,type:"primary",onClick:()=>c(!0),children:"Update Profile Picture"}),e.jsx(re,{title:"Change Profile Picture",open:n,width:"40vw",onClose:d=>c(d),children:e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:l,children:e.jsxs(a,{layout:"vertical",form:m,onFinish:d=>{u(d)},requiredMark:!0,autoComplete:"off",children:[e.jsx(a.Item,{label:"Pick Files ("+ye.supported_image_extensions.join()+")",children:e.jsx(a.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:$l,noStyle:!0,rules:[{required:!0,type:"array",message:"Please Upload Profile Picture"}],children:e.jsxs(ft.Dragger,{name:"file",accept:ye.supported_file_extensions.join(),multiple:!0,beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(nt,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",loading:l,children:"Change"})})]})})})})]})},Jl=t=>{var u,d,o,h,C,k,E;const[n,c]=s.useState(!1),[l,i]=s.useState(null),m=async()=>{c(!0);const{data:q}=await w.custom({url:"",method:"get",meta:{operation:"schoolMember",variables:{id:{value:parseInt(t.member.id),type:"Int",required:!0}},fields:We}}).catch(I=>(console.error(I),x.error("Error occured while getting school member"),{data:null})).then(I=>I);q&&i(q),c(!1)};return s.useEffect(()=>{i(t.member),m()},[]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(ne,{children:[e.jsxs(B,{span:4,children:[e.jsx(vr,{width:"100%",height:"280px",src:l==null?void 0:l.dp}),e.jsx("div",{style:{marginTop:10},children:e.jsx(Hl,{member:t.member,onChange:q=>{i(q)}})})]}),e.jsx(B,{span:20,children:e.jsxs("div",{style:{padding:10,marginLeft:10,border:"1px solid #e8e8e8",borderRadius:5},children:[e.jsxs(ke,{title:"Member Basic Informations",children:[e.jsx(ke.Item,{label:"Title",children:t.member.title}),e.jsx(ke.Item,{label:"First Name",children:t.member.firstName}),e.jsx(ke.Item,{label:"Middle Name",children:t.member.middleName}),e.jsx(ke.Item,{label:"Last Name",children:t.member.lastName}),e.jsx(ke.Item,{label:"Gender",children:t.member.gender}),e.jsx(ke.Item,{label:"DOB",children:t.member.dob}),e.jsx(ke.Item,{label:"Age",children:((u=t==null?void 0:t.member)==null?void 0:u.age)&&e.jsxs(e.Fragment,{children:[t.member.age," years"]})})]}),e.jsxs(ke,{title:"Member Contact Informations",children:[e.jsx(ke.Item,{label:"Mobile Phone Number",children:t.member.phone}),e.jsx(ke.Item,{label:"Email Address",children:t.member.email}),e.jsx(ke.Item,{label:"Region",children:(o=(d=t.member)==null?void 0:d.region)==null?void 0:o.name}),e.jsx(ke.Item,{label:"District",children:(C=(h=t.member)==null?void 0:h.district)==null?void 0:C.name}),e.jsx(ke.Item,{label:"Ward",children:(E=(k=t.member)==null?void 0:k.ward)==null?void 0:E.name}),e.jsx(ke.Item,{label:"Address",children:t.member.address})]})]})})]})})})},{TextArea:Ql}=_,{Option:wl}=H,Xl=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,Zl=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState([]),[m]=a.useForm(),u=async o=>{c(!0);const{data:h}=await w.custom({url:"",method:"post",meta:{operation:"createSchoolMemberContract",variables:{schoolMemberId:{value:parseInt(t.member.id),type:"Int",required:!0},contractNumber:{value:o.contractNumber,type:"String",required:!0},startDate:{value:o.contractStartDate,type:"String",required:!0},endDate:{value:o.contractEndDate,type:"String",required:!0},contractType:{value:o.contractType,type:"String",required:!0},description:{value:o.contractDescription,type:"String",required:!1},contractDocument:{value:o.file,type:"Upload",required:!0}},fields:["success","message"]}}).catch(C=>(console.error(C),x.error("Error occured while adding contract"),{data:null})).then(C=>C);console.log(h),c(!1)},d=async()=>{const{data:o}=await w.custom({url:"",method:"get",meta:{operation:"schoolMemberContractTypes",variables:{},fields:["data"]}}).catch(()=>(x.error("Error occured while fetching contract types"),{data:null})).then(h=>h);o&&i(o.data)};return s.useEffect(()=>{d()},[]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:m,onFinish:o=>{u(o)},requiredMark:!0,children:[e.jsx(a.Item,{name:"contractNumber",label:"Contract Number",rules:[{required:!0,type:"string",message:"Please input Contract Number"}],children:e.jsx(_,{})}),e.jsx(a.Item,{name:"contractStartDate",label:"Contract Start Date",rules:[{required:!0,type:"date",message:"Please input Contract Start Date"}],children:e.jsx(Ie.DatePicker,{style:{width:"50%"},popupStyle:{zIndex:9999},onChange:()=>{}})}),e.jsx(a.Item,{name:"contractEndDate",label:"Contract End Date",rules:[{required:!0,type:"date",message:"Please input Contract End Date"}],children:e.jsx(Ie.DatePicker,{style:{width:"50%"},popupStyle:{zIndex:9999},onChange:()=>{},disabledDate:o=>o&&o<m.getFieldValue("contractStartDate")})}),e.jsx(a.Item,{name:"contractType",label:"Contract Type",rules:[{required:!0,type:"string",message:"Please choose Contract Type..."}],children:e.jsx(H,{showSearch:!0,placeholder:"Select a Contract Type",optionFilterProp:"children",onChange:o=>{},onSearch:o=>{},filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),dropdownStyle:{zIndex:9999},children:l.map((o,h)=>e.jsx(wl,{value:o,children:o}))})}),e.jsx(a.Item,{name:"contractDescription",label:"Contract Description",rules:[{required:!1,type:"string",message:"Please input Contract Description"}],children:e.jsx(Ql,{rows:4})}),e.jsx(a.Item,{label:"Pick Files (pdf)",children:e.jsx(a.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:Xl,noStyle:!0,rules:[{required:!0,type:"array",message:"Please Upload Contract File"}],children:e.jsxs(Ie.Upload.Dragger,{name:"file",accept:"application/pdf",multiple:!1,beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(nt,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Search:ea}=_,ta=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(0),[m,u]=s.useState(0),[d,o]=s.useState(""),[h,C]=s.useState(null),[k,E]=s.useState(!1),q=async A=>{const{data:N}=await w.custom({url:"",method:"post",meta:{operation:"deleteSchoolMemberContract",variables:{id:{value:A,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error occured while deleting school member contract"),{data:null})).then(b=>b);N&&(x.success(N.message),C(h.filter(b=>b.id!==A)))},I=async(A,N)=>{const{data:b}=await w.custom({url:"",method:"post",meta:{operation:"blockUnblockSchoolMemberContract",variables:{id:{value:parseInt(A.toString()),type:"Int",required:!0},blocked:{value:N,type:"Boolean",required:!0}},fields:["success","message",{schoolMemberContract:At}]}}).catch(()=>(x.error("Error occured while blocking/unblocking school member contract"),{data:null})).then(Y=>Y);b?(x.success(b.message,{position:"top-left"}),C(h.map(Y=>Y.id.toString()===A.toString()?b.schoolMemberContract:Y))):x.error("Error occured while blocking/unblocking school member contract",{position:"bottom-right"})},M=async(A=1,N=25,b="")=>{c(!0);const{data:Y}=await w.custom({url:"",method:"get",meta:{operation:"schoolMemberContracts",variables:{schoolMemberId:{value:parseInt(t.member.id),type:"Int",required:!0},page:{value:A,type:"Int",required:!0},pageSize:{value:N,type:"Int",required:!0},key:{value:b,type:"String",required:!1}},fields:["total","pages","page","hasNext","hasPrev",{results:At}]}}).catch(()=>(x.error("Error occured while getting school member contracts"),{data:null})).then(v=>v);Y&&(i(Y.total),u(Y.pages),C(Y.results)),c(!1)};return s.useEffect(()=>{M(1,25,"")},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(B,{span:8,children:e.jsx(ea,{placeholder:"input search text",onSearch:A=>{o(A),M(1,25,A)},style:{width:"100%"}})}),e.jsx(B,{span:16,children:e.jsx(D,{type:"primary",style:{float:"right"},icon:e.jsx(ce,{}),onClick:()=>E(!0),disabled:n||!t.member.canManage,children:"Add Contract"})})]}),e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(je,{dataSource:h,columns:[{title:"Contract #",dataIndex:"contractNumber",key:"contractNumber"},{title:"Contract Type",dataIndex:"contractType",key:"contractType"},{title:"Start Date",dataIndex:"contractStartDate",key:"contractStartDate"},{title:"End Date",dataIndex:"contractEndDate",key:"contractEndDate"},{title:"Status",dataIndex:"status",key:"status",render:(A,N)=>e.jsx(e.Fragment,{children:N.isActive?e.jsx(Z,{title:"Active",placement:"top",children:e.jsx(le,{color:"green",children:"Active"})}):e.jsx(Z,{title:"Blocked",placement:"top",children:e.jsx(le,{color:"red",children:"Blocked"})})})},{title:"",dataIndex:"actions",key:"actions",render:(A,N)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(se,{title:"Delete Contract?",description:"Are you sure to delete this Contract?",onConfirm:()=>q(N.id),okText:"Yes",cancelText:"No",children:e.jsx(D,{type:"primary",icon:e.jsx(he,{}),disabled:!N.canDelete})}),N.isActive?e.jsx(Z,{title:"Block Contract",placement:"top",children:e.jsx(D,{type:"primary",style:{marginLeft:10},icon:e.jsx(Ht,{}),onClick:()=>{I(N.id,!1)}})}):e.jsx(Z,{title:"Unblock Contract",placement:"top",children:e.jsx(D,{type:"primary",style:{marginLeft:10},icon:e.jsx(Pr,{}),onClick:()=>{I(N.id,!0)}})}),e.jsx(Z,{title:"Download Contract Document",placement:"top",children:e.jsx(D,{type:"primary",style:{marginLeft:10},icon:e.jsx(St,{}),onClick:()=>{window.open(N.contractDocument,"_blank")}})})]})}]})})}),e.jsx(ne,{children:e.jsx(B,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(Yt,{defaultCurrent:1,total:l,onChange:(A,N)=>{M(A,N,d)}})})}),e.jsx(re,{title:"Add Contract",open:k,width:"40vw",onClose:A=>E(A),children:e.jsx(Zl,{member:t.member})})]})},sa=t=>{const[n,c]=s.useState(null),l=i=>i.charAt(0).toUpperCase()+i.slice(1);return s.useEffect(()=>{c(JSON.parse(t.member.availability))},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(B,{span:4,children:e.jsx("b",{children:"Day"})}),e.jsx(B,{span:2,children:e.jsx("b",{children:"Morning"})}),e.jsx(B,{span:2,children:e.jsx("b",{children:"After Noon"})}),e.jsx(B,{span:2,children:e.jsx("b",{children:"Evening"})}),e.jsx(B,{span:4,style:{textAlign:"right"},children:e.jsx("b",{children:"Time Range"})})]}),n&&Object.keys(n).map(i=>e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:4,children:i.charAt(0).toUpperCase()+i.slice(1)}),e.jsx(B,{span:2,children:e.jsx(se,{title:n[i].morning?"Available on "+l(i):"Not Available on "+l(i),description:e.jsx("div",{style:{width:"245px"},children:n[i].morning?"Are you sure you want to make this member unavailable in the morning?":"Are you sure you want to make this member available in the morning?"}),onConfirm:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(le,{color:n[i].morning?"green":"red",style:{cursor:"pointer"},children:n[i].morning?"Yes":"No"})})}),e.jsx(B,{span:2,children:e.jsx(se,{title:n[i].afternoon?"Available on "+l(i):"Not Available on "+l(i),description:e.jsx("div",{style:{width:"245px"},children:n[i].afternoon?"Are you sure you want to make this member unavailable in the morning?":"Are you sure you want to make this member available in the morning?"}),onConfirm:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(le,{color:n[i].afternoon?"green":"red",style:{cursor:"pointer"},children:n[i].afternoon?"Yes":"No"})})}),e.jsx(B,{span:2,children:e.jsx(se,{title:n[i].evening?"Available on "+l(i):"Not Available on "+l(i),description:e.jsx("div",{style:{width:"245px"},children:n[i].evening?"Are you sure you want to make this member unavailable in the morning?":"Are you sure you want to make this member available in the morning?"}),onConfirm:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(le,{color:n[i].evening?"green":"red",style:{cursor:"pointer"},children:n[i].evening?"Yes":"No"})})}),e.jsxs(B,{span:4,children:[n[i].time.map(m=>e.jsx("span",{children:m})),e.jsx(D,{size:"small",type:"primary",icon:e.jsx(Ne,{}),style:{float:"right"}})]})]}))]})},na=Dn.createContext({name:"Default"}),ra=t=>{var Ct,bt,It,Ft,kt;const[n,c]=Cr.useNotification(),[l,i]=s.useState(),[m,u]=s.useState([]),[d,o]=s.useState([]),[h,C]=s.useState(!1),[k,E]=s.useState(0),[q,I]=s.useState(20),[M,A]=s.useState(""),[N,b]=s.useState(!0),[Y]=a.useForm(),[v]=a.useForm(),L=!ve.useBreakpoint().lg,[j,T]=s.useState(!1),[f,p]=s.useState(!1),[F,r]=s.useState(!1),[g,U]=s.useState(!1),[$,R]=s.useState(!1),[G,X]=s.useState(!1),[me,ge]=s.useState(!1),[fe,K]=s.useState(),[P,te]=s.useState(!1),[ee,xe]=s.useState(!1),[Re,Pe]=s.useState(!1),[De,Ee]=s.useState(!1),ze=W=>{i(W),Ee(!0)},z=W=>{i(W),Pe(!0)},y=W=>{i(W),T(!0)},Q=W=>{i(W),ge(!0)},Se=(W,O)=>{W?n.success({message:"Member Credential Reset",description:O,placement:"bottomRight"}):n.error({message:"Member Credential Reset",description:O,placement:"bottomRight"})},Te=W=>{xe(W),te(!1),K(void 0),v.resetFields()},be=W=>{te(!0),i(W)},Ve=W=>{K(W)},$e=W=>{i(W),r(!0)},hs=W=>{i(W),p(!0)},ms=async W=>{u([W,...m])},xs=W=>{u([W,...m]),X(!1)},gs=async W=>{Tn(W).then(O=>{O&&(O.success?(x.success(O.message),u(m.filter(ue=>ue.id!==W))):x.error(O.message))})},it=async(W,O="",ue=20,qe=[])=>{b(!0),qn(W,O,ue,qe,t.status??"").then(Ke=>{Ke&&(E(Ke.total),u(Ke.results)),b(!1)})},js=async(W,O="",ue=20)=>{Ut(W,O,ue).then(qe=>{qe&&(E(qe.total),o([...qe.results]))})},ys=s.useMemo(()=>({name:"School Members"}),[]),ps=async W=>{u(m.map(O=>O.id===W.id?W:O)),T(!1)};return s.useEffect(()=>(it(1,"",20),js(1,"",20),document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[t.status]),e.jsx(e.Fragment,{children:e.jsxs(na.Provider,{value:ys,children:[c,e.jsx(br,{offsetTop:68,children:e.jsx(tt,{size:"small",style:{marginBottom:"10px"},children:e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:L?24:10,children:e.jsx(a,{layout:"horizontal",form:Y,onFinish:W=>{A(W.key),m.length=0,it(1,W.key,q,W.roles)},children:e.jsxs(ne,{children:[e.jsx(B,{span:L?24:16,children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(B,{span:6,children:e.jsx(a.Item,{name:"roles",children:e.jsx(H,{size:"large",mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"Please select Member Role(s)",onChange:()=>{},dropdownStyle:{zIndex:9999},children:d.map(W=>e.jsx(H.Option,{value:W.id,children:W.role.name},W.id))})})}),e.jsx(B,{children:e.jsx(D,{htmlType:"submit",size:"large",icon:e.jsx(ie,{}),onClick:()=>Y.submit()})})]})})}),e.jsxs(B,{span:L?24:14,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(D,{size:"large",icon:e.jsx(ce,{}),onClick:()=>R(!0),children:"Authorize Member"}),e.jsx(D,{size:"large",icon:e.jsx(ce,{}),onClick:()=>X(!0),children:"Register Member"}),e.jsx(D,{size:"large",icon:e.jsx(ce,{}),onClick:()=>C(!0),children:"Enroll Member(s)"})]})]})})}),e.jsx(je,{loading:N,columns:[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(W,O)=>e.jsx("span",{children:e.jsx("a",{children:O.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(W,O)=>e.jsx("span",{children:O.registrationNumber})},{title:"Email",dataIndex:"email",render:(W,O)=>{var ue;return e.jsx("span",{children:O.email?O.email:(ue=O==null?void 0:O.user)==null?void 0:ue.email})}},{title:"Username",dataIndex:"username",render:(W,O)=>{var ue;return e.jsx("span",{children:(ue=O==null?void 0:O.user)==null?void 0:ue.username})}},{title:"Phone",dataIndex:"phone",render:(W,O)=>{var ue;return e.jsx("span",{children:O.phone?O==null?void 0:O.phone:(ue=O==null?void 0:O.user)==null?void 0:ue.phone})}},{title:"Gender",dataIndex:"gender",render:(W,O)=>{var ue;return e.jsx("span",{children:O.gender?O.gender:(ue=O==null?void 0:O.user)==null?void 0:ue.gender})}},{title:"Region/District/Ward",dataIndex:"region_district_ward",render:(W,O)=>{var ue,qe,Ke,Mt,Lt;return e.jsxs("span",{children:[(ue=O==null?void 0:O.region)==null?void 0:ue.name,((qe=O==null?void 0:O.district)==null?void 0:qe.name)&&e.jsxs(e.Fragment,{children:["/",(Ke=O==null?void 0:O.district)==null?void 0:Ke.name]}),((Mt=O==null?void 0:O.ward)==null?void 0:Mt.name)&&e.jsxs(e.Fragment,{children:["/",(Lt=O==null?void 0:O.ward)==null?void 0:Lt.name]})]})}},{title:"Date Joined",dataIndex:"created",render:(W,O)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(O.created).toLocaleString()})})},{title:"Authed",dataIndex:"isAuthed",render:(W,O)=>{var ue;return e.jsx("a",{children:(ue=O==null?void 0:O.user)!=null&&ue.isAuthed?e.jsx(le,{color:"green",children:"Yes"}):e.jsx(le,{color:"red",children:"Not"})})}},{title:"Status",dataIndex:"isActive",render:(W,O)=>e.jsx("a",{children:O!=null&&O.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"Action(s)",dataIndex:"action",fixed:"right",render:(W,O)=>{var ue;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsxs(J,{children:[e.jsx(J.Item,{icon:e.jsx(Be,{style:{color:"red"}}),disabled:!O.canEdit,children:e.jsx(Z,{title:"Click to view Member Profile",placement:"left",color:"green",children:e.jsx(D,{type:"link",rel:"noopener noreferrer",onClick:()=>Q(O),children:"Profile"})})}),O.contractApplicable&&e.jsx(J.Item,{icon:e.jsx(Ge,{style:{color:"red"}}),disabled:!O.canManage,children:e.jsx(Z,{title:"Click to view Member Contracts",placement:"left",color:"green",children:e.jsx(D,{type:"link",rel:"noopener noreferrer",onClick:()=>z(O),children:"Contracts"})})}),e.jsx(J.Item,{icon:e.jsx(Ne,{style:{color:"red"}}),disabled:!O.canEdit,children:e.jsx(Z,{title:"Click to Edit Member Informations",placement:"left",color:"green",children:e.jsx(D,{type:"link",rel:"noopener noreferrer",onClick:()=>y(O),children:"Edit"})})}),e.jsx(J.Item,{icon:e.jsx(he,{style:{color:"red"}}),children:e.jsx(Z,{title:"Delete Member",placement:"left",color:"red",children:e.jsx(se,{title:"Are you sure to delete this ",placement:"topRight",onConfirm:()=>gs(O==null?void 0:O.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(O!=null&&O.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(D,{type:"link",disabled:!(O!=null&&O.canDelete),children:"Delete"})})})}),O.canConfigureAvailability&&e.jsx(J.Item,{icon:e.jsx(dr,{style:{color:"red"}}),children:e.jsx(D,{type:"link",onClick:()=>ze(O),children:"Manage Availability"})}),O.user&&e.jsxs(e.Fragment,{children:[e.jsx(J.Item,{icon:e.jsx(Be,{style:{color:"red"}}),children:e.jsx(D,{type:"link",onClick:()=>hs(O),children:"Roles"})}),e.jsx(J.Item,{icon:e.jsx(Be,{style:{color:"red"}}),children:e.jsx(D,{type:"link",onClick:()=>$e(O),children:"Manage Roles"})}),((ue=O==null?void 0:O.user)==null?void 0:ue.isAuthed)&&e.jsx(J.Item,{icon:e.jsx(Jt,{style:{color:"red"}}),children:e.jsx(Z,{title:"Click to Reset Member Credentials",placement:"left",color:"green",children:e.jsx(D,{type:"link",onClick:()=>be(O),children:"Reset Credentials"})})})]})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:qe=>qe.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}}],dataSource:m,pagination:{onChange:(W,O)=>{I(O),it(W,M,O)},total:k,pageSize:q,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"calc(100vh - 350px)"}}),e.jsx(Ce,{title:"Adding School Members",anchor:"right",open:h,noOverFlow:!0,onClose:W=>C(W),width:"35vw",children:e.jsx(Gl,{randKey:Math.random(),onAdd:ms})}),e.jsx(re,{title:"Resetting Password",open:P,onClose:W=>te(W),width:"30vw",children:e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Resetting Credentials for  ",e.jsx("b",{children:l==null?void 0:l.fullName})]}),e.jsx("p",{children:"Are you sure to reset this user's credentials?"}),e.jsx(Kl,{member:l==null?void 0:l.user,form:v,resetPhoneChange:Ve,randKey:Math.random(),resetting:Te,resettingFeedback:Se}),e.jsxs(zn,{justify:"space-between",children:[e.jsx(D,{onClick:()=>{te(!1),i(void 0)},children:"Close"}),e.jsx(D,{disabled:v.getFieldValue("phone")?v.getFieldValue("phone").length<10||ee:!0,onClick:()=>{v.submit()},children:"Reset"})]})]})}),e.jsx(re,{title:((Ct=l==null?void 0:l.user)==null?void 0:Ct.fullName)+" Roles",open:f,onClose:W=>p(W),width:"60vw",children:e.jsx(Vl,{user:l==null?void 0:l.user,school:l==null?void 0:l.school,randKey:Math.random()})}),e.jsx(re,{title:"Manage "+((bt=l==null?void 0:l.user)==null?void 0:bt.fullName)+" Roles",open:F,width:"40vw",onClose:W=>r(W),children:e.jsx(Wl,{user:l==null?void 0:l.user,school:l==null?void 0:l.school,randKey:Math.random()})}),e.jsx(re,{title:"Member Registration By Excel Uploading",open:g,width:"40vw",onClose:W=>U(W),children:e.jsx("span",{children:"member registration by excel uploading"})}),e.jsx(re,{title:"Members Authorization",open:$,width:"40vw",onClose:W=>R(W),children:e.jsx(Ol,{})}),e.jsx(re,{title:"Edit Member",open:j,width:"40vw",onClose:W=>T(W),children:e.jsx(Ul,{member:l,onFinish:ps})}),e.jsx(re,{title:"Managing "+((It=l==null?void 0:l.user)==null?void 0:It.fullName)+" Availability",open:De,width:"70vw",onClose:W=>Ee(W),children:e.jsx(sa,{member:l})}),e.jsx(Ce,{title:"Registering School Members",anchor:"right",open:G,onClose:W=>X(W),width:"35vw",noOverFlow:!0,children:e.jsx(_l,{onAdd:xs})}),e.jsx(Ce,{title:e.jsx(e.Fragment,{children:e.jsxs("span",{children:[e.jsx("b",{children:(Ft=l==null?void 0:l.user)==null?void 0:Ft.fullName})," Profile"]})}),anchor:"right",open:me,noOverFlow:!0,onClose:W=>ge(W),width:"85vw",children:e.jsx(Jl,{member:l})}),e.jsx(Ce,{title:e.jsx(e.Fragment,{children:e.jsxs("span",{children:[e.jsx("b",{children:(kt=l==null?void 0:l.user)==null?void 0:kt.fullName})," Contracts"]})}),anchor:"right",open:Re,noOverFlow:!0,onClose:W=>Pe(W),width:"60vw",children:e.jsx(ta,{member:l})})]})})},la=()=>{const{status:t}=Ue();return s.useEffect(()=>{document.title=t==="active"?ye.system_name+": Active Members":t==="blocked"?ye.system_name+": Blocked Members":ye.system_name+": All Members"},[t]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Members"}),e.jsx(V.Item,{children:t==="active"?"Active Members":t==="blocked"?"Blocked Members":"All Members"})]})}),e.jsx(ra,{status:t})]})},{TextArea:aa}=_,ia=t=>{const[n,c]=s.useState(!0),[l,i]=s.useState(!0);return s.useEffect(()=>{},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("h3",{children:["Course: ",t.studyCourse.course.name]}),e.jsxs("h3",{children:["Year: ",t.studyCourse.year]}),e.jsxs("h3",{children:["Level: ",t.studyCourse.levelDisplay]}),e.jsxs("h3",{children:["Semester: ",t.studyCourse.semesterDisplay]}),e.jsxs(a,{layout:"vertical",form:t.form,onFinish:m=>{m.study_course_id=t.studyCourse.id,m.create_class=n,m.create_drive=l,t.onFinish(m)},initialValues:{periods_per_week:2},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx(_,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(a.Item,{name:"periods_per_week",label:"Periods Per Week",rules:[{required:!0,type:"number",message:"Please input Periods Per Week"},{min:1,type:"number",message:"Periods Per Week must be greater than 0"}],children:e.jsx(Ie.InputNumber,{size:"large",placeholder:"Enter Periods Per Week ..."})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Le,{checked:n,onChange:()=>c(!n),children:"Auto Create Class"})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Le,{checked:l,onChange:()=>i(!l),children:"Auto Create Drive"})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(aa,{rows:2,placeholder:"Please input Description ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},{TextArea:oa}=_,da=t=>{var l,i,m,u,d,o,h,C,k;const[n,c]=s.useState(t.module.isActive);return s.useEffect(()=>{t.form.setFieldsValue({name:t.module.name,code:t.module.code,description:t.module.description,periods_per_week:t.module.periodsPerWeek,is_active:t.module.isActive})},[t.randKey,t.module,t.form]),e.jsxs(e.Fragment,{children:[e.jsxs("h3",{children:["Course: ",(m=(i=(l=t.module)==null?void 0:l.studyCourse)==null?void 0:i.course)==null?void 0:m.name]}),e.jsxs("h3",{children:["Year: ",(d=(u=t.module)==null?void 0:u.studyCourse)==null?void 0:d.year]}),e.jsxs("h3",{children:["Level: ",(h=(o=t.module)==null?void 0:o.studyCourse)==null?void 0:h.levelDisplay]}),e.jsxs("h3",{children:["Semester: ",(k=(C=t.module)==null?void 0:C.studyCourse)==null?void 0:k.semesterDisplay]}),e.jsxs(a,{layout:"vertical",form:t.form,onFinish:E=>{E.id=parseInt(t.module.id),E.study_course_id=t.module.studyCourse.id,E.is_active=n,t.onFinish(E)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx(_,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(oa,{rows:2,placeholder:"Please input Description ..."})}),e.jsx(a.Item,{name:"periods_per_week",label:"Periods Per Week",rules:[{required:!0,type:"number",message:"Please input Periods Per Week"},{min:1,type:"number",message:"Periods Per Week must be greater than 0"}],children:e.jsx(_e,{size:"large",placeholder:"Enter Periods Per Week ..."})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Le,{checked:n,onChange:()=>c(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},{Option:Xe}=H,ca=[];for(let t=2022;t<new Date().getFullYear()+5;t++)ca.push(e.jsx(Xe,{children:t.toString()},t));const ua=t=>{const[n,c]=s.useState(null),[l,i]=s.useState(null),[m,u]=s.useState(null),[d,o]=s.useState(null),[h,C]=s.useState(null),[k,E]=s.useState([]),[q]=a.useForm(),[I,M]=s.useState(""),A=async j=>{C(j.format("YYYY-MM-DD"))},N=async j=>{o(j)},b=async j=>{u(j)},Y=async j=>{c(j),i(null)},v=async j=>{i(j),u(null)},S=async()=>{var j;Wt(1,"",100,(j=t.studyCourse)==null?void 0:j.id).then(T=>{E(T.results)})},L=async j=>{var f;const{data:T}=await w.custom({url:"",method:"post",meta:{operation:"createStudyCourseStudent",variables:{studyCourseId:{value:j.studyCourseId,type:"Int",required:!1},firstName:{value:j.firstName,type:"String",required:!0},middleName:{value:j.middleName,type:"String",required:!0},lastName:{value:j.lastName,type:"String",required:!0},email:{value:j.email,type:"String",required:!1},phones:{value:j.phones,type:"[String]",required:!1},registrationNumber:{value:j.registrationNumber,type:"String",required:!0},gender:{value:j.gender,type:"String",required:!0},regionId:{value:j.regionId,type:"Int",required:!1},districtId:{value:j.districtId,type:"Int",required:!1},wardId:{value:j.wardId,type:"Int",required:!1},dob:{value:j.dob,type:"String",required:!1},groupId:{value:parseInt(((f=j.groupId)==null?void 0:f.toString())??"0"),type:"Int",required:!1}},fields:["success","message"]}}).catch(p=>(console.error(p),x.error("Error occured while creating student"),{data:null})).then(p=>p);T&&(T.success?(x.success(T.message),q.resetFields()):(M(T.message),x.error(T.message)))};return s.useEffect(()=>{S()},[t.editting,t.studyCourse]),e.jsxs(e.Fragment,{children:[I.length>0&&e.jsx(Ie.Alert,{message:"Info",description:I,closable:!0}),e.jsxs(a,{layout:"horizontal",form:q,onFinish:j=>{var T;j.studyCourseId=parseInt((T=t.studyCourse)==null?void 0:T.id),j.dob=h,j.regionId=parseInt(n),j.districtId=parseInt(l),j.wardId=parseInt(m),L(j)},requiredMark:!0,children:[e.jsx(a.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(a.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(a.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10,marginTop:5},children:e.jsx(Z,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(D,{size:"small",onClick:()=>x("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(_,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(a.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(_,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(a.Item,{name:"phones",label:"Phones Number",rules:[{required:!1,type:"string",message:"Please input Phones Number"}],children:e.jsx(_,{size:"large",placeholder:"Enter Phones Numbers ..."})}),e.jsx(a.Item,{name:"groupId",label:"Group/Stream",style:{marginTop:20},rules:[{required:k.length>0,type:"string",message:"Please choose Group/Stream"}],children:e.jsx(H,{placeholder:"Please Choose Group/Stream ...",style:{width:220},onChange:N,size:"large",dropdownStyle:{zIndex:9999},children:k.map(j=>e.jsx(Xe,{value:j.id,children:j.name}))})}),e.jsxs(pe,{direction:"horizontal",size:"small",children:[e.jsx(a.Item,{name:"dob",label:"Date of Birth",style:{marginTop:20},rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(st,{onChange:A,size:"large",disabledDate:j=>j&&j>Ye().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(a.Item,{name:"gender",label:"Gender",style:{marginTop:20},rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:d,children:e.jsxs(H,{placeholder:"Please Choose Gender ...",style:{width:220},onChange:N,size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(Xe,{value:"female",children:"Female"}),e.jsx(Xe,{value:"male",children:"Male"})]})})]}),e.jsxs(pe,{direction:"horizontal",size:"small",children:[e.jsx(lt,{onChange:Y,regionId:n,label:"Region",name:"regionId",size:"middle"}),e.jsx(rt,{size:"middle",regionId:parseInt(n),districtId:l,onChange:v,label:"District",name:"districtId"})]}),e.jsx(pe,{direction:"horizontal",size:"small",children:e.jsx(at,{size:"middle",districtId:parseInt(l),wardId:m,onChange:b,label:"Ward",name:"wardId"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},ha=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,ma=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(!1),[m,u]=s.useState(""),d=async o=>{c(!0),i(!0);const{data:h}=await w.custom({url:"",method:"post",meta:{operation:"createStudyCourseStudentsByUploading",variables:{studyCourseId:{value:parseInt(t.studyCourse.id),type:"Int",required:!0},files:{value:o.files,type:"[Upload]",required:!0}},fields:["success","message"]}}).catch(C=>(console.error(C),x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(C=>C);h&&(h.success?x(h.message):x.error(h.message),u(h.message)),c(!1),i(!0)};return s.useEffect(()=>{},[t.randKey]),l&&!n?e.jsx(e.Fragment,{children:e.jsx(vt,{type:"info",message:e.jsx(e.Fragment,{children:e.jsxs("p",{children:[m,e.jsx(D,{style:{marginLeft:20},onClick:()=>{t.form.resetFields(),i(!1),c(!1)},children:"Upload Another File"})]})})})}):e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n&&!l,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:o=>{d(o)},requiredMark:!0,children:[e.jsx(a.Item,{label:"Students Excel File",children:e.jsx(a.Item,{name:"files",valuePropName:"fileList",getValueFromEvent:ha,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload students excel file"}],children:e.jsxs(ft.Dragger,{name:"files",accept:".xls, .xlsx",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(nt,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsxs("span",{children:["Download Uploading Excel Format Template",e.jsx("span",{style:{marginLeft:10},children:e.jsxs("a",{href:ye.course_student_registration_template_file,target:"_blank",children:[e.jsx(St,{}),"Download"]})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Register"})})]})})})},qt=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!0),[m,u]=s.useState(1),[d]=a.useForm(),[o,h]=s.useState(0),[C,k]=s.useState(0),[E,q]=s.useState(!0),I=async A=>{Rn(A,t.module.id,t.memberType).then(N=>{N&&(N.success?(x.success(N.message),c(n.filter(b=>b.id.toString()!==A.id.toString())),t.onAdd(N.schoolModuleMember)):x.error(N.message))})},M=async(A,N="")=>{i(!0),Yn(A,N,t.module.id,t.memberType).then(b=>{b&&(k(b.total),h(b.pages),u(b.page),q(b.hasNext),c([...n,...b.results])),i(!1)})};return s.useEffect(()=>{M(1)},[t.module]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(B,{span:10,children:e.jsx(a,{layout:"vertical",form:d,onFinish:A=>{n.length=0,c([]),M(1,A.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search Member(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:14,children:e.jsx(D,{icon:e.jsx(ie,{}),size:"large",onClick:()=>d.submit()})})]}),e.jsx(oe,{spinning:l,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(pt,{dataLength:C,next:()=>M(m),hasMore:E,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(oe,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(de,{itemLayout:"horizontal",dataSource:n,renderItem:A=>{var N;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(de.Item,{style:{margin:0,padding:0},actions:[e.jsx(se,{title:"Are you sure to add this member?",onConfirm:()=>I(A),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(D,{size:"large",icon:e.jsx(Oe,{})})})],children:e.jsx(de.Item.Meta,{avatar:e.jsx(ts,{src:(N=A==null?void 0:A.user)==null?void 0:N.pic}),title:e.jsxs("a",{children:[e.jsx("span",{children:A.fullName}),A.registrationNumber&&e.jsx("span",{style:{marginLeft:5},children:e.jsx(le,{color:"green",children:A.registrationNumber})})]}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:A.email})})})},"adding-module-member-"+A.id)})}})})})})]})},Rt=t=>{var p,F;const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(!1),[d,o]=s.useState(1),[h,C]=s.useState(0),[k,E]=s.useState(20),[q,I]=s.useState(""),[M,A]=s.useState(!1),[N,b]=s.useState(!0),[Y]=a.useForm(),S=!ve.useBreakpoint().lg,L=async()=>{f(1,"",k)},j=async r=>{On(r).then(g=>{g&&(g.success?(x.success(g.message),c(n.filter(U=>U.id!==r))):x.error(g.message))})},T=[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(r,g)=>e.jsx("span",{children:e.jsx("a",{children:g.schoolMember.fullName??g.schoolMember.user.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(r,g)=>e.jsx("span",{children:g.schoolMember.registrationNumber})},{title:"Date Joined",dataIndex:"created",render:(r,g)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(g.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(r,g)=>e.jsx("a",{children:g!=null&&g.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(r,g)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsx(J,{children:e.jsx(J.Item,{icon:e.jsx(he,{}),children:e.jsx(Z,{title:"Delete a Module Member",children:e.jsx(se,{title:"Are you sure to delete this ",onConfirm:()=>j(g==null?void 0:g.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(g!=null&&g.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],f=async(r,g="",U=20)=>{var $;Gn(r,g,U,(($=t.module)==null?void 0:$.id)??0,t.memberType??"").then(R=>{R&&(o(R.page),C(R.total),A(R.hasNext),c(R.results)),b(!1)})};return s.useEffect(()=>{f(d)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:S?24:16,children:e.jsx(a,{layout:"vertical",form:Y,onFinish:r=>{o(1),n.length=0,f(1,r.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(B,{span:S?24:8,style:{display:"flex",justifyContent:"flex-end"},children:[t.memberType==="Student"&&e.jsx(D,{size:"large",icon:e.jsx(ce,{}),onClick:()=>u(!0),children:"Enroll Student(s)"}),t.memberType==="Teacher"&&e.jsx(D,{size:"large",icon:e.jsx(ce,{}),onClick:()=>u(!0),children:"Enroll Teacher(s)/Lecturer(s)"})]})]}),e.jsx(je,{loading:N,columns:T,dataSource:n,scroll:{x:!0,y:"calc(100vh - 350px)"},pagination:{onChange:(r,g)=>{E(g),f(r,q,g)},total:h,pageSize:k,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(Ce,{anchor:"left",open:l,noOverFlow:!0,onClose:r=>i(r),width:"80vw",title:"Adding "+((p=t.module)==null?void 0:p.name)+" Module Members",children:e.jsx(qt,{module:t.module,randKey:Math.random(),onAdd:L,memberType:t.memberType})}),e.jsx(Ce,{anchor:"left",open:m,noOverFlow:!0,onClose:r=>u(r),width:"80vw",title:"Enrolling "+((F=t.module)==null?void 0:F.name)+" Module Members",children:e.jsx(qt,{module:t.module,randKey:Math.random(),onAdd:L,memberType:t.memberType})})]})},xa=t=>{const[n,c]=s.useState([]),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(!1),[h,C]=s.useState(0),[k,E]=s.useState(20),[q,I]=s.useState(""),[M,A]=s.useState(!0),[N]=a.useForm(),Y=!ve.useBreakpoint().lg,v=async T=>{const{data:f}=await w.custom({url:"",method:"post",meta:{operation:"studyCourseStudentEnroll",variables:{studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0},studentId:{value:T,type:"Int",required:!0}},fields:["success","message",{studyCourseStudent:Kn}]}}).catch(()=>(x.error("Error in Bulk Enrolling of Students"),{data:null})).then(p=>p);f&&(f.success?(x.success(f.message),u(!1),o(!1),i([]),j(1,"",20),t.onAdd(f.studyCourseStudent)):x.error(f.message))},S=async()=>{const{data:T}=await w.custom({url:"",method:"post",meta:{operation:"createStudyCourseStudentsBulk",variables:{studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0},students:{value:l,type:"[Int]",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error in Bulk Enrolling of Students"),{data:null})).then(f=>f);T&&(T.success?(x.success(T.message),u(!1),o(!1),i([]),j(1,"",20),t.onAddAll()):x.error(T.message))},L=[{title:e.jsx(e.Fragment,{children:e.jsx(Le,{checked:d,onChange:T=>{T.target.checked?(u(!0),o(!0),i(n.map(f=>parseInt(f.id.toString())))):(u(!1),l.length=0,i([]),o(!1))}})}),dataIndex:"checkConfirm",fixed:!0,render:(T,f,p)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Le,{defaultChecked:m,checked:m||l.includes(parseInt(f.id)),onChange:F=>{const r=parseInt(f.id);F.target.checked?i([r,...l]):i(l.filter(g=>g!==r))}})})},{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(T,f,p)=>e.jsx("span",{children:e.jsx("a",{children:f.fullName?f.fullName:f.user.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(T,f,p)=>e.jsx("span",{children:f.registrationNumber})},{title:"Email",dataIndex:"email",fixed:!0,render:(T,f,p)=>e.jsx(e.Fragment,{children:e.jsxs(pe,{direction:"vertical",children:[e.jsx(le,{color:"green",children:f.email?f.email:f.user.email?f.user.email:""}),e.jsx(le,{color:"green",children:f.phone?f.phone:f.user.phone})]})})},{title:"Gender",dataIndex:"gender",fixed:!0,render:(T,f,p)=>e.jsx("span",{children:f.gender?f.gender:f.user.gender})},{title:"Status",dataIndex:"isActive",render:(T,f,p)=>e.jsx("a",{children:f!=null&&f.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(T,f,p)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(se,{title:"Adding Student "+(f.fullName?f.fullName:f.user.fullName),onConfirm:()=>v(parseInt(f.id)),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(f!=null&&f.canManage),overlayStyle:{zIndex:9999},children:e.jsx(D,{size:"large",icon:e.jsx(ce,{})})})})}],j=async(T,f="",p=20,F=[])=>{const{data:r}=await w.custom({url:"",method:"get",meta:{operation:"studyCourseStudentsToEnroll",variables:{page:{value:T,type:"Int",required:!0},key:{value:f,type:"String",required:!1},pageSize:{value:p,type:"Int",required:!1},studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:We}]}}).catch(()=>(x.error("Error fetching students"),{data:null})).then(g=>g);r&&(C(r.total),c([...r.results])),A(!1)};return s.useEffect(()=>{j(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:18,children:e.jsx(a,{layout:"horizontal",form:N,onFinish:T=>{I(T.key),n.length=0,j(1,T.key,k,T.roles)},children:e.jsxs(ne,{children:[e.jsx(B,{span:Y?24:16,children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(B,{children:e.jsx(D,{size:"large",icon:e.jsx(ie,{}),onClick:()=>N.submit()})})]})})}),l.length>0&&e.jsx(e.Fragment,{children:e.jsx(B,{span:6,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{size:"large",icon:e.jsx(ce,{}),onClick:S,children:"Add Selected"})})})]}),e.jsx(je,{loading:M,columns:L,dataSource:n,pagination:{onChange:(T,f)=>{E(f),j(T,q,f)},total:h,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0,y:"calc(100vh - 280px)"}})]})},ga=t=>{var p;const[n,c]=s.useState([]),[l,i]=s.useState([]),[m,u]=s.useState(null),[d,o]=s.useState(!1),[h,C]=s.useState(0),[k,E]=s.useState(20),[q,I]=s.useState(""),[M,A]=s.useState(!0),[N]=a.useForm(),Y=!ve.useBreakpoint().lg,v=[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(F,r,g)=>e.jsx("span",{children:e.jsx("a",{children:r.schoolMember.fullName?r.schoolMember.fullName:r.schoolMember.user.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(F,r,g)=>e.jsx("span",{children:r.schoolMember.registrationNumber})},{title:"Group/Stream",dataIndex:"group",fixed:!0,render:(F,r,g)=>{var U;return e.jsx("span",{children:(U=r==null?void 0:r.group)==null?void 0:U.name})}},{title:"Email",dataIndex:"email",fixed:!0,render:(F,r,g)=>{var U,$,R,G,X,me,ge,fe,K,P;return e.jsx(e.Fragment,{children:e.jsxs(pe,{direction:"vertical",children:[e.jsx(le,{children:(U=r.schoolMember)!=null&&U.email?($=r.schoolMember)==null?void 0:$.email:(G=(R=r.schoolMember)==null?void 0:R.user)!=null&&G.email?(me=(X=r.schoolMember)==null?void 0:X.user)==null?void 0:me.email:""}),e.jsx(le,{children:(ge=r.schoolMember)!=null&&ge.phone?(fe=r.schoolMember)==null?void 0:fe.phone:(P=(K=r.schoolMember)==null?void 0:K.user)==null?void 0:P.phone})]})})}},{title:"Gender",dataIndex:"gender",fixed:!0,render:(F,r,g)=>e.jsx("span",{children:r.schoolMember.gender?r.schoolMember.gender:r.schoolMember.user.gender})},{title:"Date Joined",dataIndex:"created",render:(F,r,g)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(r.created).toLocaleString()})})},{title:"Authed",dataIndex:"isAuthed",render:(F,r,g)=>{var U,$;return e.jsx("a",{children:($=(U=r.schoolMember)==null?void 0:U.user)!=null&&$.isAuthed?e.jsx(le,{color:"green",children:"Yes"}):e.jsx(le,{color:"red",children:"Not"})})}},{title:"Status",dataIndex:"isActive",render:(F,r,g)=>e.jsx("a",{children:r!=null&&r.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(F,r,g)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsx(J,{children:e.jsx(J.Item,{icon:e.jsx(he,{}),children:e.jsx(Z,{title:"Delete Student",color:"red",children:e.jsx(se,{title:"Are you sure to delete ",onConfirm:()=>L(r==null?void 0:r.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(r!=null&&r.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],S=async()=>{Wt(1,"",20,parseInt(t.studyCourse.id.toString())).then(F=>{F&&i(F.results)})},L=async F=>{_n(F).then(r=>{r&&(r.success?(x.success(r.message),c(n.filter(g=>g.id!==F))):x.error(r.message))})},j=async(F,r="",g=20,U=[],$=0)=>{A(!0),Bn(F,r,g,U,parseInt(t.studyCourse.id.toString()),$).then(R=>{R&&(C(R.total),c([...R.results])),A(!1)})},T=async F=>{c([F,...n])},f=async()=>{j(1,"",20)};return s.useEffect(()=>{S(),j(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:12,children:e.jsx(a,{layout:"horizontal",form:N,onFinish:F=>{I(F.key),n.length=0,j(1,F.key,k,F.roles)},children:e.jsxs(ne,{children:[e.jsx(B,{span:Y?24:16,children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(B,{children:e.jsx(D,{size:"large",icon:e.jsx(ie,{}),onClick:()=>N.submit()})})]})})}),e.jsx(B,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{size:"large",icon:e.jsx(ce,{}),onClick:()=>o(!0),children:"Add Student(s)"})})]}),l.length>0&&e.jsxs("div",{children:[e.jsxs(D,{type:m===null?"primary":"default",onClick:()=>{u(null),j(1,"",20)},children:[m===null&&e.jsx(e.Fragment,{children:"All"}),m!==null&&e.jsx(e.Fragment,{children:e.jsx(le,{children:"All"})})]}),l.map(F=>e.jsxs(D,{type:(m==null?void 0:m.id)===F.id?"primary":"default",onClick:()=>{u(F),j(1,"",20,[],F.id)},children:[(m==null?void 0:m.id)===F.id&&e.jsxs(e.Fragment,{children:[F.name," - ",F.totalStudents," Students"]}),(m==null?void 0:m.id)!==F.id&&e.jsxs(e.Fragment,{children:[e.jsx(le,{children:F.name}),e.jsxs(le,{color:"green",children:[F.totalStudents," Students"]})]})]},F.id))]}),e.jsx(je,{loading:M,columns:v,dataSource:n,pagination:{onChange:(F,r)=>{E(r),j(F,q,r)},total:h,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"calc(100vh - 290px)"}}),e.jsx(Ce,{title:"Enrolling "+((p=t.studyCourse)==null?void 0:p.course.name)+" Students",anchor:"left",open:d,noOverFlow:!0,onClose:F=>o(F),width:"70vw",children:e.jsx(xa,{studyCourse:t.studyCourse,randKey:Math.random(),onAdd:T,onAddAll:f})})]})},ja=t=>{var Pe,De,Ee,ze;const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,E]=s.useState(!0),[q]=a.useForm(),[I]=a.useForm(),[M]=a.useForm(),[A]=a.useForm(),b=!ve.useBreakpoint().lg,Y=Ue(),[v,S]=s.useState(!1),[L,j]=s.useState(!1),[T,f]=s.useState(!1),[p,F]=s.useState(!1),[r,g]=s.useState(!1),[U,$]=s.useState(!1),[R,G]=s.useState(!1),X=z=>{c(z),f(!0)},me=z=>{c(z),F(!0)},ge=z=>{c(z),j(!0)},fe=async z=>{Un(z).then(y=>{y&&(y.success?(x.success(y.message),I.resetFields(),S(!1),i([y.module,...l])):x.error(y.message))})},K=async z=>{Wn(z).then(y=>{y&&(y.success?(x.success(y.message),M.resetFields(),j(!1),i(l.map(Q=>Q.id.toString()===z.id.toString()?y.module:Q))):x.error(y.message))})},P=async z=>{Hn(z).then(y=>{y&&(y.success?(x.success(y.message),i(l.filter(Q=>Q.id!==z))):x.error(y.message))})},te=async z=>{Jn(z).then(y=>{y&&(y.success?(x.success(y.message),i(l.map(Q=>Q.id===y.module.id?y.module:Q))):x.error(y.message))})},ee=async z=>{Qn(z).then(y=>{y&&(y.success?(x.success(y.message),i(l.map(Q=>Q.id===y.module.id?y.module:Q))):x.error(y.message))})},xe=async(z,y="",Q=20)=>{var Se,Te;E(!0),((Se=t==null?void 0:t.studyCourse)==null?void 0:Se.id)??parseInt(Y.studyCourseId)?Vn(((Te=t==null?void 0:t.studyCourse)==null?void 0:Te.id)??parseInt(Y.studyCourseId),z,y,Q).then(be=>{be&&(u(be.total),i([...be.results]))}):$n(z,y,Q).then(be=>{be&&(u(be.total),i([...be.results]))}),E(!1)};s.useEffect(()=>{xe(1,"",20)},[]);const Re=[{title:"Name",dataIndex:"name",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:e.jsx("a",{children:y.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:e.jsx("a",{children:y.code})})},{title:"Course",dataIndex:"course",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:e.jsx("a",{children:y.studyCourse.course.name})})},{title:"Year",dataIndex:"year",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.studyCourse.year})},{title:"Level",dataIndex:"level",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.studyCourse.levelDisplay})},{title:"Semester",dataIndex:"semester",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.studyCourse.semesterDisplay})},{title:"Periods/Week",dataIndex:"periodsPerWeek",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.periodsPerWeek})},{title:"Students",dataIndex:"totalStudents",fixed:!0,render:(z,y,Q)=>e.jsx("a",{onClick:()=>me(y),children:e.jsx("span",{children:y.totalStudents})})},{title:"Lecturers",dataIndex:"totalTeachers",fixed:!0,render:(z,y,Q)=>e.jsx("a",{onClick:()=>X(y),children:e.jsx("span",{children:y.totalTeachers})})},{title:"Assistants",dataIndex:"totalAssistants",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.totalAssistants})},{title:"Has Drive",dataIndex:"hasDrive",render:(z,y,Q)=>y.hasDrive?e.jsx(Z,{title:"Click to View Drive",children:e.jsx(Nt,{style:{color:"green"}})}):e.jsx(Z,{title:"Click to Auto Create Drive For "+y.name,placement:"left",children:e.jsx(se,{placement:"topLeft",title:"Click to Auto Create Drive For "+y.name,onConfirm:()=>te(y),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(Et,{style:{color:"red"}})})})},{title:"Has Class",dataIndex:"hasClass",render:(z,y,Q)=>y.hasClass?e.jsx(Z,{title:"Click to View Class",children:e.jsx(Nt,{style:{color:"green"}})}):e.jsx(Z,{title:"Click to Auto Create Class For "+y.name,placement:"left",children:e.jsx(se,{placement:"topLeft",title:"Click to Auto Create Drive For "+y.name,onConfirm:()=>ee(y),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(Et,{style:{color:"red"}})})})},{title:"Created",dataIndex:"created",render:(z,y,Q)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(y.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(z,y,Q)=>e.jsx("a",{children:y!=null&&y.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(z,y,Q)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsxs(J,{children:[y.canDelete?e.jsx(J.Item,{icon:e.jsx(he,{}),children:e.jsx(se,{placement:"top",title:"Deleting "+y.name+", Are you sure?",onConfirm:()=>P(y==null?void 0:y.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})})}):e.jsx(e.Fragment,{}),e.jsx(J.Item,{icon:e.jsx(Ne,{}),onClick:()=>ge(y),children:e.jsx("a",{children:"Edit"})},"module-edit-"+y.id),e.jsx(J.Item,{icon:e.jsx(Be,{}),onClick:()=>X(y),children:e.jsx("a",{children:"Lecture(s)"})},"module-lectures-"+y.id),e.jsx(J.Item,{icon:e.jsx(Be,{}),onClick:()=>me(y),children:e.jsx("a",{children:"Student(s)"})},"module-students-"+y.id)]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:Se=>Se.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:b?24:12,children:e.jsx(a,{layout:"vertical",form:q,onFinish:z=>{C(z.key),l.length=0,xe(1,z.key,d)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),((Pe=t.studyCourse)==null?void 0:Pe.canManage)&&e.jsxs(B,{span:b?24:12,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(Z,{title:"Click to View "+t.studyCourse.course.name+" Students",children:e.jsx(D,{icon:e.jsx(Ge,{}),size:"large",onClick:()=>G(!0),children:"View Students"})}),e.jsx(Z,{title:"Register Students by Uploading Excel File",children:e.jsx(D,{icon:e.jsx(ce,{}),size:"large",onClick:()=>$(!0),children:"Add Student"})}),e.jsx(Z,{title:"Register Students by Uploading Excel File",children:e.jsx(D,{icon:e.jsx($t,{}),size:"large",onClick:()=>g(!0),children:"Upload Students"})}),e.jsx(Z,{title:"Add New Study Course Module",children:e.jsx(D,{icon:e.jsx(ce,{}),size:"large",onClick:()=>S(!0),children:"Add Module"})})]})]}),e.jsx(je,{loading:k,columns:Re,dataSource:l,pagination:{onChange:(z,y)=>{o(y),xe(z,h,y)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Adding Study Course Module",open:v,onClose:z=>S(z),width:"30vw",children:e.jsx(ia,{form:I,onFinish:fe,randKey:Math.random(),studyCourse:t.studyCourse})}),e.jsx(re,{title:"Edit "+(n==null?void 0:n.name)+" Informations",open:L,onClose:z=>j(z),width:"40vw",children:e.jsx(da,{studyCourse:t.studyCourse,module:n,onFinish:K,form:M,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.name)+" Lecture(s)",open:T,width:"80vw",onClose:z=>f(z),children:e.jsx(Rt,{memberType:"Teacher",module:n})}),e.jsx(re,{title:(n==null?void 0:n.name)+" Student(s)",open:p,onClose:z=>F(z),width:"80vw",children:e.jsx(Rt,{memberType:"Student",module:n,height:75})}),e.jsx(re,{title:"Uploading "+((De=t.studyCourse)==null?void 0:De.course.name)+" Student(s) by Excel",open:r,onClose:z=>g(z),width:"40vw",children:e.jsx(ma,{form:A,studyCourse:t.studyCourse,randKey:Math.random()})}),e.jsx(re,{title:"Registering "+((Ee=t.studyCourse)==null?void 0:Ee.course.name)+" Student(s)",open:U,onClose:z=>$(z),width:"40vw",children:e.jsx(ua,{studyCourse:t.studyCourse})}),e.jsx(Ce,{title:((ze=t.studyCourse)==null?void 0:ze.course.name)+" Students",anchor:"left",open:R,noOverFlow:!0,onClose:z=>G(z),width:"80vw",children:e.jsx(ga,{studyCourse:t.studyCourse,randKey:Math.random()})})]})},ya=()=>{const[t,n]=s.useState(!1),[c,l]=s.useState(),i=Ue(),m=async u=>{n(!0);const{data:d}=await w.custom({url:"",method:"get",meta:{operation:"studyCourse",variables:{id:{value:u,type:"Int",required:!0}},fields:["id","year","level","semester","levelDisplay","semesterDisplay","isActive","canDelete","canEdit","canManage",{course:["id","name"]}]}});l(d),n(!1)};return s.useEffect(()=>{document.title=ye.system_name+": Modules",i.studyCourseId!==void 0&&m(parseInt(i.studyCourseId))},[i.studyCourseId]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),c&&e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager/study/courses",children:"Study Courses"})}),e.jsx(V.Item,{children:c?e.jsx(e.Fragment,{children:e.jsx(ae,{to:"/schoolmanager/modules",children:"Modules"})}):e.jsx(e.Fragment,{children:"Modules"})}),c&&e.jsx(e.Fragment,{children:e.jsxs(V.Item,{children:[c.course.name,", ",c.levelDisplay," ,",c.semesterDisplay,", ",c.year]})})]})}),e.jsx(ja,{height:77,control:!1,studyCourse:c})]})},pa=()=>(s.useEffect(()=>{document.title=ye.system_name+": Programmes"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Programmes (High Education Level)"})]})}),e.jsx(gr,{height:80,control:!1})]})),fa=t=>{const[n,c]=s.useState([]),l=async(i,m="")=>{const{data:u}=await w.custom({url:"",method:"get",meta:{operation:"systemRolePermissions",variables:{page:{value:i,type:"Int",required:!0},key:{value:m,type:"String",required:!1},roleId:{value:t.role.id,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","created","updated","isActive","canEdit","canDelete","canManage",{permission:["id","name","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}]}});c([...u.results])};return s.useEffect(()=>{l(1)},[t.randKey,t.role]),e.jsx(e.Fragment,{children:e.jsx(de,{dataSource:n,renderItem:i=>e.jsx(de.Item,{children:i.permission.name})})})},Sa=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(0),[h,C]=s.useState(!0),[k,E]=s.useState(20),[q,I]=s.useState(""),[M]=a.useForm();ve.useBreakpoint().lg;const[N,b]=s.useState(!1),Y=f=>{c(f),b(!0)},v=f=>{c(f),u(!0)},S=[{title:"Name",dataIndex:"name",fixed:!0,render:(f,p,F)=>e.jsx("span",{children:e.jsx("a",{onClick:()=>v(p),children:p.role.name})})},{title:"Date Created",dataIndex:"created",render:(f,p,F)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(p.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(f,p,F)=>e.jsx("a",{children:p!=null&&p.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,p,F)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsxs(J,{children:[e.jsx(J.Item,{icon:e.jsx(Ge,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>Y(p),children:"Manage Permissions"})}),e.jsx(J.Item,{icon:e.jsx(Ge,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>v(p),children:"View Permissions"})}),e.jsx(J.Item,{icon:e.jsx(he,{}),children:e.jsx(se,{placement:"topLeft",title:`Are you sure you want to delete ${p.role.name} Role?`,onConfirm:()=>L(parseInt(p.id)),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Remove"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:r=>r.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],L=async f=>{wn(f).then(p=>{p&&(p.success?(x.success(p.message),i(l.filter(F=>F.id.toString()!==f.toString()))):x.error(p.message))})},j=async(f,p="",F=20)=>{C(!0),Ut(f,p,F).then(r=>{r&&(o(r.total),i([...r.results]))}),C(!1)},T=async()=>{Xn().then(f=>{f&&(f.success?(x.success(f.message),j(1)):x.error(f.message))})};return s.useEffect(()=>{j(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:12,children:e.jsx(a,{layout:"vertical",form:M,onFinish:f=>{I(f.key),l.length=0,j(1,f.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:12,children:e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Z,{title:"Sync Default School Roles",children:e.jsx(D,{icon:e.jsx(Vt,{}),size:"large",onClick:T,children:"Sync Default Roles"})})})})]}),e.jsx(je,{loading:h,columns:S,dataSource:l,pagination:{onChange:(f,p)=>{E(p),j(f,q,p)},total:d,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Manage Role Permissions For "+(n==null?void 0:n.role.name),width:"50vw",open:N,onClose:f=>b(f),children:e.jsx(jr,{role:n==null?void 0:n.role,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.role.name)+" Permissions",width:"50vw",open:m,onClose:f=>u(f),children:e.jsx(fa,{role:n==null?void 0:n.role,randKey:Math.random()})})]})},va=()=>(s.useEffect(()=>{document.title=ye.system_name+": Roles"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Roles"})]})}),e.jsx(Sa,{})]})),Ca=()=>(s.useEffect(()=>{document.title=ye.system_name+": Settings"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Settings"})]})}),e.jsx(yr,{})]})),{Option:He}=H;function*ba(t,n){let c=t;for(;c<n;)yield c++}const Ia=t=>{const[n,c]=s.useState(!0),[l,i]=s.useState([]),m=async(u,d="")=>{c(!0);const{data:o}=await w.custom({url:"",method:"get",meta:{operation:"schoolCourses",variables:{page:{value:u,type:"Int",required:!0},key:{value:d,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:jt}]}}).catch(()=>(x.error("Error occured while fetching courses"),{data:null})).then(h=>h);o&&i([...o.results]),c(!1)};return s.useEffect(()=>{m(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:u=>{t.onFinish(u)},requiredMark:!0,children:[e.jsx(a.Item,{name:"course_id",label:"Course",rules:[{required:!0,type:"string",message:"Please choose Course..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Course",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,d)=>d.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:l.map((u,d)=>e.jsx(He,{value:u.id,children:u.name}))})}),e.jsx(a.Item,{name:"year",label:"Year",rules:[{required:!0,type:"number",message:"Please choose Year..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Year",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,d)=>d.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:Array.from(ba(new Date().getFullYear(),new Date().getFullYear()+10)).map((u,d)=>e.jsx(He,{value:u,children:u}))})}),e.jsx(a.Item,{name:"level",label:"Level",rules:[{required:!0,type:"number",message:"Please choose Level..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Level",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,d)=>d.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First Year"},{value:2,name:"Second Year"},{value:3,name:"Third year"},{value:4,name:"Fourth year"},{value:5,name:"Fifth year"}].map((u,d)=>e.jsx(He,{value:u.value,children:u.name}))})}),e.jsx(a.Item,{name:"semester",label:"Semester",rules:[{required:!0,type:"number",message:"Please choose Semester..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Semester",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,d)=>d.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First"},{value:2,name:"Second"},{value:3,name:"Third"}].map((u,d)=>e.jsx(He,{value:u.value,children:u.name}))})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Option:Je}=H;function*Fa(t,n){let c=t;for(;c<n;)yield c++}const ka=t=>{const[n,c]=s.useState(t.studyCourse.isActive),[l,i]=s.useState(!0),[m,u]=s.useState([]),d=[{value:1,name:"First Year"},{value:2,name:"Second Year"},{value:3,name:"Third year"},{value:4,name:"Fourth year"},{value:5,name:"Fifth year"}],o=async(h,C="")=>{i(!0);const{data:k}=await w.custom({url:"",method:"get",meta:{operation:"schoolCourses",variables:{page:{value:h,type:"Int",required:!0},key:{value:C,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:jt}]}}).catch(()=>(x.error("Error occured while fetching courses"),{data:null})).then(E=>E);k&&u([...k.results]),i(!1)};return s.useEffect(()=>{o(1),t.form.setFieldsValue({course_id:t.studyCourse.course.id,year:t.studyCourse.year,level:parseInt(t.studyCourse.level),semester:t.studyCourse.semester,is_active:t.studyCourse.isActive})},[t.form,t.studyCourse,t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:l,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:h=>{h.id=parseInt(t.studyCourse.id),h.is_active=n,t.onFinish(h)},requiredMark:!0,children:[e.jsx(a.Item,{name:"course_id",label:"Course",rules:[{required:!0,type:"string",message:"Please choose Course..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Course",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,C)=>C.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((h,C)=>e.jsx(Je,{value:h.id,children:h.name}))})}),e.jsx(a.Item,{name:"year",label:"Year",rules:[{required:!0,type:"number",message:"Please choose Year..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Year",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,C)=>C.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:Array.from(Fa(new Date().getFullYear(),new Date().getFullYear()+10)).map((h,C)=>e.jsx(Je,{value:h,children:h}))})}),e.jsx(a.Item,{name:"level",label:"Level",rules:[{required:!0,type:"number",message:"Please choose Level..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Level",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,C)=>C.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:d.map((h,C)=>e.jsx(Je,{value:h.value,children:h.name}))})}),e.jsx(a.Item,{name:"semester",label:"Semester",rules:[{required:!0,type:"number",message:"Please choose Semester..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Semester",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,C)=>C.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First"},{value:2,name:"Second"},{value:3,name:"Third"}].map((h,C)=>e.jsx(Je,{value:h.value,children:h.name}))})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Le,{checked:n,onChange:()=>c(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Option:dt}=H;function*Ma(t,n){let c=t;for(;c<n;)yield c++}const La=t=>{const[n,c]=s.useState(!0),[l,i]=s.useState([]),m=async d=>{const{data:o}=await w.custom({url:"",method:"post",meta:{operation:"createSchoolStudyCourseBulk",variables:{year:{value:parseInt(d.year),type:"Int",required:!0},level:{value:d.level,type:"Int",required:!0},semester:{value:d.semester,type:"Int",required:!0}},fields:["success","message",{studyCourses:Qe}]}}).catch(()=>(x.error("Error occured while creating study course"),{data:null})).then(h=>h);o&&(o.success?(x.success(o.message),t.form.resetFields(),t.onFinish(o.studyCourses)):x.error(o.message))},u=async(d,o="")=>{c(!0);const{data:h}=await w.custom({url:"",method:"get",meta:{operation:"schoolCourses",variables:{page:{value:d,type:"Int",required:!0},key:{value:o,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:jt}]}}).catch(()=>(x.error("Error occured while fetching courses"),{data:null})).then(C=>C);h&&i([...h.results]),c(!1)};return s.useEffect(()=>{u(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:d=>{m(d)},requiredMark:!0,children:[e.jsxs(Ze,{sx:{marginBottom:2},children:[e.jsxs(Ir,{severity:"info",sx:{marginBottom:2},children:[e.jsx(Nr,{children:"Info"}),e.jsx("strong",{children:"Important Note:"})," All listed courses will be added to the study course as per the selected year, level and semester."]}),e.jsx(Ze,{sx:{maxHeight:"200px",overflowY:"scroll"},children:e.jsx(de,{bordered:!0,children:l.map((d,o)=>e.jsx(de.Item,{children:d.name},o))})})]}),e.jsx(a.Item,{name:"year",label:"Year",rules:[{required:!0,type:"number",message:"Please choose Year..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Year",optionFilterProp:"children",onChange:d=>{},onSearch:d=>{},filterOption:(d,o)=>o.children.toLowerCase().includes(d.toLowerCase()),dropdownStyle:{zIndex:9999},children:Array.from(Ma(new Date().getFullYear(),new Date().getFullYear()+10)).map((d,o)=>e.jsx(dt,{value:d,children:d}))})}),e.jsx(a.Item,{name:"level",label:"Level",rules:[{required:!0,type:"number",message:"Please choose Level..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Level",optionFilterProp:"children",onChange:d=>{},onSearch:d=>{},filterOption:(d,o)=>o.children.toLowerCase().includes(d.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First Year"},{value:2,name:"Second Year"},{value:3,name:"Third year"},{value:4,name:"Fourth year"},{value:5,name:"Fifth year"}].map((d,o)=>e.jsx(dt,{value:d.value,children:d.name}))})}),e.jsx(a.Item,{name:"semester",label:"Semester",rules:[{required:!0,type:"number",message:"Please choose Semester..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Semester",optionFilterProp:"children",onChange:d=>{},onSearch:d=>{},filterOption:(d,o)=>o.children.toLowerCase().includes(d.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First"},{value:2,name:"Second"},{value:3,name:"Third"}].map((d,o)=>e.jsx(dt,{value:d.value,children:d.name}))})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:Aa}=_,Ea=t=>{const[n,c]=s.useState(!1),[l]=a.useForm(),i=async m=>{var d;c(!0);const{data:u}=await w.custom({url:"",method:"post",meta:{operation:"createStudyCourseGroup",variables:{studyCourseId:{value:parseInt(((d=t==null?void 0:t.studyCourse)==null?void 0:d.id.toString())??"0"),type:"Int",required:!0},name:{value:m.name,type:"String",required:!0},description:{value:m.description,type:"String",required:!1}},fields:["success","message",{studyCourseGroup:yt}]}}).catch(()=>(x.error("Error occured while fetching departments"),{data:null})).then(o=>o);u&&(u.success?(x.success(u.message),t.onFinish(u.studyCourseGroup),l.resetFields()):x.error(u.message)),c(!1)};return s.useEffect(()=>{},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:l,onFinish:m=>{i(m)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Aa,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:Na}=_,Pa=t=>{var m,u;const[n,c]=s.useState(!1),[l]=a.useForm(),i=async d=>{var h;c(!0);const{data:o}=await w.custom({url:"",method:"post",meta:{operation:"updateStudyCourseGroup",variables:{id:{value:parseInt(((h=t==null?void 0:t.studyCourseGroup)==null?void 0:h.id.toString())??"0"),type:"Int",required:!0},name:{value:d.name,type:"String",required:!0},description:{value:d.description,type:"String",required:!1}},fields:["success","message",{studyCourseGroup:yt}]}}).catch(()=>(x.error("Error occured while updating study course group"),{data:null})).then(C=>C);o&&(o.success?(x.success(o.message),t.onFinish(o.studyCourseGroup),l.resetFields()):x.error(o.message)),c(!1)};return s.useEffect(()=>{t.studyCourseGroup&&l.setFieldsValue({name:t.studyCourseGroup.name,description:t.studyCourseGroup.description})},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:l,onFinish:d=>{i(d)},requiredMark:!0,initialValues:{name:(m=t.studyCourseGroup)==null?void 0:m.name,description:(u=t.studyCourseGroup)==null?void 0:u.description},children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(_,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Na,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},Da=t=>{var q;const[n,c]=s.useState(!0),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(null),[h,C]=s.useState(!1),k=async(I,M="")=>{c(!0);const{data:A}=await w.custom({url:"",method:"get",meta:{operation:"studyCourseGroups",variables:{page:{value:I,type:"Int",required:!0},key:{value:M,type:"String",required:!1},studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:yt}]}}).catch(N=>(console.error(N),x.error("Error occured while fetching study course groups"),{data:null})).then(N=>N);A&&i([...A.results]),c(!1)},E=async I=>{const{data:M}=await w.custom({url:"",method:"post",meta:{operation:"deleteStudyCourseGroup",variables:{id:{value:parseInt(I.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error occured while deleting study course group"),{data:null})).then(A=>A);M&&M.success&&(x.success(M.message),i(l.filter(A=>A.id!==I)))};return s.useEffect(()=>{k(1)},[t.form,t.studyCourse,t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:e.jsx(D,{icon:e.jsx(ce,{}),onClick:()=>u(!0),children:"Add Group/Stream"})}),e.jsx("div",{children:e.jsx(de,{bordered:!0,dataSource:l,renderItem:I=>e.jsx(de.Item,{actions:[e.jsx(D,{icon:e.jsx(Ne,{}),disabled:!I.canEdit,onClick:()=>{o(I),C(!0)},children:"Edit"}),e.jsx(se,{title:"Are you sure you want to delete this group/stream?",overlayStyle:{zIndex:999999},onConfirm:()=>E(I.id),okText:"Yes",cancelText:"No",children:e.jsx(D,{icon:e.jsx(he,{}),disabled:!I.canDelete,children:"Delete"})})],children:e.jsx(de.Item.Meta,{title:I.name,description:I.description})})})}),e.jsx(re,{title:"Add Group/Stream to "+((q=t.studyCourse)==null?void 0:q.name),open:m,width:"30vw",onClose:I=>u(I),children:e.jsx(Ea,{studyCourse:t.studyCourse,onFinish:I=>{i([I,...l])}})}),e.jsx(re,{title:"Updating Group/Stream to "+(d==null?void 0:d.name),open:h,width:"30vw",onClose:I=>C(I),children:e.jsx(Pa,{studyCourseGroup:d,onFinish:I=>{i(l.map(M=>M.id===I.id?I:M)),C(!1)}})})]})},za=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(0),[d,o]=s.useState(!0),[h,C]=s.useState(20),[k,E]=s.useState(""),[q]=a.useForm(),[I]=a.useForm(),[M]=a.useForm(),[A,N]=s.useState(!1);ve.useBreakpoint().lg;const[Y,v]=s.useState(!1),[S,L]=s.useState(!1),[j,T]=s.useState(!1),f=R=>{c(R),N(!0)},p=R=>{c(R),T(!0)},F=async R=>{const{data:G}=await w.custom({url:"",method:"post",meta:{operation:"createSchoolStudyCourse",variables:{courseId:{value:parseInt(R.course_id),type:"Int",required:!0},year:{value:parseInt(R.year),type:"Int",required:!0},level:{value:R.level,type:"Int",required:!0},semester:{value:R.semester,type:"Int",required:!0}},fields:["success","message",{studyCourse:Qe}]}}).catch(()=>(x.error("Error occured while creating study course"),{data:null})).then(X=>X);G&&(G.success?(x.success(G.message),I.resetFields(),v(!1),i([G.studyCourse,...l])):x.error(G.message))},r=async R=>{const{data:G}=await w.custom({url:"",method:"post",meta:{operation:"updateSchoolStudyCourse",variables:{id:{value:R.id,type:"Int",required:!0},courseId:{value:parseInt(R.course_id),type:"Int",required:!0},year:{value:parseInt(R.year),type:"Int",required:!0},level:{value:R.level,type:"Int",required:!0},semester:{value:R.semester,type:"Int",required:!0},isActive:{value:R.is_active,type:"Boolean",required:!0}},fields:["success","message",{studyCourse:Qe}]}}).catch(()=>(x.error("Error occured while updating study course"),{data:null})).then(X=>X);G&&(G.success?(x.success(G.message),M.resetFields(),T(!1),i(l.map(X=>parseInt(X.id.toString())===parseInt(R.id.toString())?G.studyCourse:X))):x.error(G.message))},g=async R=>{const{data:G}=await w.custom({url:"",method:"post",meta:{operation:"deleteSchoolStudyCourse",variables:{id:{value:parseInt(R.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error occured while deleting study course"),{data:null})).then(X=>X);G&&(G.success?(x.success(G.message),i(l.filter(X=>X.id!==R))):x.error(G.message))},U=async(R,G="",X=20)=>{const{data:me}=await w.custom({url:"",method:"get",meta:{operation:"schoolStudyCourses",variables:{page:{value:R,type:"Int",required:!0},key:{value:G,type:"String",required:!1},pageSize:{value:X,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Qe}]}}).catch(()=>(x.error("Error occured while fetching study courses"),{data:null})).then(ge=>ge);me&&(u(me.total),i([...me.results])),o(!1)};s.useEffect(()=>{U(1,"",20)},[]);const $=[{title:"Course",dataIndex:"course",fixed:!0,render:(R,G,X)=>e.jsx("span",{children:e.jsx("a",{children:G.course.name})})},{title:"Year",dataIndex:"year",fixed:!0,render:(R,G,X)=>e.jsx("span",{children:G.year})},{title:"Groups/Streams",dataIndex:"totalGroups",fixed:!0,render:(R,G,X)=>e.jsx("span",{children:G.totalGroups>0?G.totalGroups:"One Main Group/Stream"})},{title:"Max Students",dataIndex:"maxStudents",fixed:!0,render:(R,G,X)=>e.jsx("span",{children:G.maxStudents})},{title:"Available Students",dataIndex:"availableStudents",fixed:!0,render:(R,G,X)=>e.jsx("span",{children:G.availableStudents})},{title:"Level",dataIndex:"level",fixed:!0,render:(R,G,X)=>e.jsx("span",{children:G.levelDisplay})},{title:"Semester",dataIndex:"semester",fixed:!0,render:(R,G,X)=>e.jsx("span",{children:G.semesterDisplay})},{title:"Created",dataIndex:"created",render:(R,G,X)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(G.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(R,G,X)=>e.jsx("a",{children:G!=null&&G.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(R,G,X)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(Z,{title:"Deleting Study Course",color:"red",placement:"left",children:e.jsx(se,{title:"Are you sure to delete this Study Course?",onConfirm:()=>g(G==null?void 0:G.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(G!=null&&G.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(D,{icon:e.jsx(he,{}),disabled:!(G!=null&&G.canDelete)})})}),e.jsx(Z,{title:"Edit "+(G==null?void 0:G.name)+" Faculty",placement:"left",color:"green",children:e.jsx(D,{icon:e.jsx(Ne,{}),disabled:!(G!=null&&G.canEdit),onClick:()=>p(G)})}),e.jsx(Z,{title:"View Study Course Groups/Streams",placement:"right",color:"green",children:e.jsx(D,{icon:e.jsx(cr,{}),disabled:!(G!=null&&G.canManage),onClick:()=>f(G)})}),e.jsx(Z,{title:"View Study Course Modules",placement:"right",color:"green",children:e.jsx(ae,{to:"/schoolmanager/modules/"+G.id,children:e.jsx(D,{icon:e.jsx(Ge,{}),disabled:!(G!=null&&G.canManage)})})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:10,children:e.jsx(a,{layout:"vertical",form:q,onFinish:R=>{E(R.key),l.length=0,U(1,R.key,h)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(B,{span:14,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(Z,{title:"Bulk Add New Study Course",children:e.jsx(D,{icon:e.jsx(ce,{}),size:"large",onClick:()=>L(!0),children:"Bulk Add Study Course"})}),e.jsx(Z,{title:"Add New Study Course",children:e.jsx(D,{icon:e.jsx(ce,{}),size:"large",onClick:()=>v(!0),children:"Add Study Course"})})]})]}),e.jsx(je,{loading:d,columns:$,dataSource:l,pagination:{onChange:(R,G)=>{C(G),U(R,k,G)},total:m,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Bulk Adding Study Course",open:S,onClose:R=>L(R),width:"30vw",children:e.jsx(La,{form:I,onFinish:R=>{i([...R,...l]),L(!1)},randKey:Math.random()})}),e.jsx(re,{title:"Adding Study Course",open:Y,onClose:R=>v(R),width:"30vw",children:e.jsx(Ia,{form:I,onFinish:F,randKey:Math.random()})}),e.jsx(re,{title:"Edit "+(n==null?void 0:n.course.name)+" Informations",open:j,onClose:R=>T(R),width:"40vw",children:e.jsx(ka,{studyCourse:n,onFinish:r,form:M,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.course.name)+" Groups/Streams",open:A,onClose:R=>N(R),width:"40vw",children:e.jsx(Da,{studyCourse:n})})]})},Ta=()=>(s.useEffect(()=>{document.title=ye.system_name+": Study Courses"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Study Courses"})]})}),e.jsx(za,{height:77})]})),qa=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!0),[d,o]=s.useState(1),[h]=a.useForm(),[C,k]=s.useState(0),E=async I=>{Zn(I).then(M=>{M.success?(x.success(M.message),i(l.filter(A=>A.id.toString()!==I.toString())),t.onAdd(M.schoolSubject),c(void 0)):x.error(M.message)})},q=async(I=d,M="",A=25)=>{u(!0),er(I,M,A).then(N=>{N&&(k(N.pages),o(N.page),i([...N.results]))}),u(!1)};return s.useEffect(()=>{q(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(a,{layout:"vertical",form:h,onFinish:I=>{l.length=0,i([]),q(1,I.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search Subject(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(oe,{spinning:m,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(de,{itemLayout:"horizontal",dataSource:l,renderItem:I=>e.jsx(de.Item,{actions:[e.jsx(se,{placement:"topLeft",title:"Are you sure to add this subject?",onConfirm:()=>E(I.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(D,{icon:e.jsx(Oe,{})})})],children:e.jsx(de.Item.Meta,{title:e.jsx(e.Fragment,{children:e.jsxs("a",{children:[I.name,e.jsx(le,{color:"green",style:{marginLeft:10},children:I.schoolType.name})]})}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:I.description})})})},"file-"+I.id)})}),e.jsx(Ze,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:1},children:e.jsx(ss,{count:C,color:"secondary",onChange:(I,M)=>{q(M)}})})]})]})},Ra=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,E]=s.useState(!0),[q]=a.useForm(),M=!ve.useBreakpoint().lg,A=async v=>{c([v,...n])},N=async v=>{const{data:S}=await w.custom({url:"",method:"post",meta:{operation:"deleteSchoolSubject",variables:{id:{value:parseInt(v.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error deleting subject"),{data:null})).then(L=>L);S&&(S.success?(x.success(S.message),c(n.filter(L=>L.id!==v))):x.error(S.message))},b=[{title:"Name",dataIndex:"name",fixed:!0,render:(v,S,L)=>e.jsx("span",{children:e.jsx("a",{children:S.subject.name})})},{title:"School Type",dataIndex:"schoolType",fixed:!0,render:(v,S,L)=>e.jsx("span",{children:e.jsx(le,{color:"green",children:S.subject.schoolType.name})})},{title:"Date Created",dataIndex:"created",render:(v,S,L)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(S.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(v,S,L)=>e.jsx("a",{children:S!=null&&S.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,S,L)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsx(J,{children:e.jsx(J.Item,{icon:e.jsx(he,{}),children:e.jsx(Z,{title:"Delete/Remove Subject",placement:"left",color:S!=null&&S.canDelete?"green":"red",children:e.jsx(se,{title:"Are you sure to delete this ",onConfirm:()=>N(S==null?void 0:S.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(S!=null&&S.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(D,{type:"text",disabled:!(S!=null&&S.canDelete),children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:j=>j.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],Y=async(v,S="",L=20)=>{const{data:j}=await w.custom({url:"",method:"get",meta:{operation:"schoolSubjects",variables:{page:{value:v,type:"Int",required:!0},key:{value:S,type:"String",required:!1},pageSize:{value:L,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:tr}]}}).catch(()=>(x.error("Error getting subjects"),{data:null})).then(T=>T);j&&(u(j.total),c([...j.results])),E(!1)};return s.useEffect(()=>{Y(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:M?24:20,children:e.jsx(a,{layout:"vertical",form:q,onFinish:v=>{C(v.key),n.length=0,Y(1,v.key,d)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:M?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(D,{size:"large",icon:e.jsx(ce,{}),onClick:()=>i(!0),children:"Add Subject"})})]}),e.jsx(je,{loading:k,columns:b,dataSource:n,pagination:{onChange:(v,S)=>{o(S),Y(v,h,S)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Ce,{title:"Adding School Subjects",anchor:"right",width:"35vw",onClose:()=>i(!1),open:l,noOverFlow:!0,children:e.jsx(qa,{randKey:Math.random(),onAdd:A})})]})},Ya=()=>(s.useEffect(()=>{document.title=ye.system_name+": Subjects"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Subjects"})]})}),e.jsx(Ra,{})]})),Ga=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(1),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,E]=s.useState(!1),[q,I]=s.useState(!0),[M]=a.useForm(),[A]=a.useForm(),[N,b]=s.useState(!1),Y=async f=>{sr(f).then(p=>{p&&(p.success?(x.success(p.message),c([p.loginReedemCode,...n]),A.resetFields()):x.error(p.message))})},v=async f=>{rr(f).then(p=>{p&&(p.success?x.success(p.message):x.error(p.message))})},S=async f=>{lr(f).then(p=>{p&&(p.success?(x.success(p.message),c(n.filter(F=>F.id!==f))):x.error(p.message))})},L=()=>{x("Canceled")},j=[{title:"Reedem Code",dataIndex:"code",fixed:!0,render:(f,p,F)=>e.jsx("span",{children:e.jsx("a",{children:p.code})})},{title:"User",dataIndex:"user",render:(f,p,F)=>{var r,g,U;return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:(p==null?void 0:p.user)&&e.jsxs("span",{children:["Full Name: ",(r=p==null?void 0:p.user)==null?void 0:r.firstName," ",(g=p==null?void 0:p.user)==null?void 0:g.middleName," ",(U=p==null?void 0:p.user)==null?void 0:U.lastName]})}),e.jsx("span",{children:(p==null?void 0:p.email)&&e.jsxs(le,{children:["Email: ",p==null?void 0:p.email]})}),e.jsx("span",{children:(p==null?void 0:p.registrationNumber)&&e.jsxs(le,{children:["Reg#: ",p==null?void 0:p.registrationNumber]})})]})}},{title:"Phone Number",dataIndex:"phone",fixed:!0,render:(f,p,F)=>e.jsx("span",{children:e.jsx("a",{children:p.phone})})},{title:"Is Used",dataIndex:"isUsed",render:(f,p,F)=>e.jsx("a",{children:p!=null&&p.isUsed?e.jsx("span",{style:{color:"green"},children:"Used"}):e.jsx("span",{style:{color:"red"},children:"Not Used"})})},{title:"Status",dataIndex:"isActive",render:(f,p,F)=>e.jsx("a",{children:p!=null&&p.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,p,F)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(se,{title:"Resend this Reedem Code?",onConfirm:()=>v(p==null?void 0:p.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(p!=null&&p.canManage),overlayStyle:{zIndex:9999},children:e.jsx(D,{size:"large",icon:e.jsx(Fr,{}),disabled:!(p!=null&&p.canDelete)})}),e.jsx(se,{title:"Are you sure to delete this Reedem Code?",onConfirm:()=>S(p==null?void 0:p.id),onCancel:()=>L,okText:"Yes",cancelText:"No",disabled:!(p!=null&&p.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(D,{size:"large",icon:e.jsx(he,{}),disabled:!(p!=null&&p.canDelete)})})]})}],T=async(f,p="",F=20)=>{nr(f,p,F).then(r=>{i(r.page),u(r.total),E(r.hasNext),c(r.results)}),I(!1)};return s.useEffect(()=>{T(l)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:10,children:e.jsx(a,{layout:"vertical",form:M,onFinish:f=>{i(1),n.length=0,T(1,f.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(_,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:14,style:{display:"flex",justifyContent:"end"},children:e.jsx(D,{icon:e.jsx(Oe,{}),size:"large",onClick:()=>b(!0),children:"Reedem"})})]}),e.jsx(je,{loading:q,columns:j,dataSource:n,scroll:{x:!0},pagination:{onChange:(f,p)=>{o(p),T(f,h,p)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(re,{title:"Creating Reedem Code",open:N,onClose:f=>b(f),children:e.jsxs(e.Fragment,{children:[e.jsxs(a,{layout:"vertical",form:A,onFinish:f=>{Y(f)},children:[e.jsx(a.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,type:"string",message:"Please input Phone Number"}],children:e.jsx(_,{size:"large",placeholder:"Phone Number ...",prefix:e.jsx(wt,{}),autoComplete:"off"})}),e.jsx(a.Item,{name:"email",label:"Email Address",children:e.jsx(_,{size:"large",placeholder:"Email Address ...",prefix:e.jsx(Xt,{}),autoComplete:"off",allowClear:!0})}),e.jsx(a.Item,{name:"registrationNumber",label:"Registration Number",children:e.jsx(_,{size:"large",placeholder:"Registration Number ...",prefix:e.jsx(hr,{}),autoComplete:"off",allowClear:!0})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"end"},children:e.jsx(D,{size:"large",onClick:()=>A.submit(),children:"Reedem"})})]})})]})},Oa=()=>(s.useEffect(()=>{document.title=ye.system_name+": Login Reedems"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Login Reedems"})]})}),e.jsx(Ga,{height:80})]})),ho=t=>{const{page:n}=t;return n==="SchoolLoginReedemPage"?e.jsx(Oa,{}):n==="SchoolSubjectsPage"?e.jsx(Ya,{}):n==="SchoolStudyCoursesPage"?e.jsx(Ta,{}):n==="SchoolSettingsPage"?e.jsx(Ca,{}):n==="SchoolRolesPage"?e.jsx(va,{}):n==="SchoolProgrammesPage"?e.jsx(pa,{}):n==="SchoolModulesPage"?e.jsx(ya,{}):n==="SchoolMembersPage"?e.jsx(la,{}):n==="SchoolFeeEducationLevelsPage"?e.jsx(Rl,{}):n==="SchoolFeesPage"?e.jsx(Pl,{}):n==="SchoolFacultiesPage"?e.jsx(kl,{}):n==="SchoolExaminationsPage"?e.jsx(Sl,{}):n==="SchoolDepartmentsPage"?e.jsx(fl,{}):n==="SchoolCoursesPage"?e.jsx(ul,{}):n==="SchoolEducationLevelsPage"?e.jsx(ll,{}):n==="SchoolManagerPage"?e.jsx(qr,{}):e.jsx("div",{children:"Page not found ..."})};export{ho as SchoolManagerPages};
