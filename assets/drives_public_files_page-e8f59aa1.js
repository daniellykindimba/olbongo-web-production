import{r as t,c as o,l as I,aB as b,j as e,a as C,R as P,d as B,I as k,e as D,y as E,D as N,g as q,dp as H,_ as R,dv as L,ai as O}from"./index-0218b022.js";import{F as T}from"./file_item_component-abbfb25a.js";import{F as _}from"./files_component-498a758c.js";import{B as n}from"./Breadcrumb-8d007733.js";import"./index-27724231.js";import"./index-ab36f351.js";import"./toConsumableArray-d4f18d80.js";import"./addEventListener-a1a8dbaa.js";import"./index.esm-d9d36c7b.js";import"./iconBase-fea8a0f2.js";import"./index-1de60405.js";const z=G=>{const[l,c]=t.useState([]),[u,h]=t.useState(!0),[x,f]=t.useState(1),[M,g]=t.useState(0),[A,j]=t.useState(!0),[J,F]=t.useState(0),[S]=o.useForm();I();const[v,w]=t.useState(!1),[a,K]=t.useState(),m=!b.useBreakpoint().lg,p=async(r,i="",d=!1)=>{const{data:s}=await q.custom({url:"",method:"get",meta:{operation:"publicFiles",variables:{page:{value:r,type:"Int",required:!0},key:{value:i,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:H}]}}).catch(()=>(R.error("Error while fetching files"),{data:null})).then(y=>y);s&&(g(s.total),F(s.pages),j(s.hasNext),f(s.page),(i.length>0||i.length===0&&d)&&c(s.results),s.results.length>0&&!d&&c(l.concat(s.results))),h(!1)};return t.useEffect(()=>{p(x)},[]),u?e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(C,{})})}):e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx(B,{span:m?24:20,children:e.jsx(o,{layout:"vertical",form:S,onFinish:r=>p(0,r.key,!0),children:e.jsx(o.Item,{name:"key",children:e.jsx(k,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(D,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(E,{children:e.jsx(_,{loading:u,data:l,min:!1})}),e.jsx(N,{title:"File Informations",anchor:"right",width:m?"100vw":"35vw",onClose:r=>w(r),open:v,children:e.jsx(T,{id:a==null?void 0:a.id})})]})},ae=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsxs(n,{children:[e.jsxs(n.Item,{children:[e.jsx(L,{}),e.jsx(O,{to:"/odrive",children:"Home"})]}),e.jsx(n.Item,{children:"Public Files"})]})}),e.jsx(z,{})]});export{ae as DrivesPublicFilesPage};
