import{r as s,F as i,q as y,bw as I,j as e,s as C,y as P,z as k,I as B,S as q,u as D,ea as E,a2 as N,a_ as H,J as z,a$ as L,K as O,eb as R,au as T}from"./index-8ddffded.js";import{B as l}from"./Breadcrumb-86726eef.js";const _=G=>{const[o,c]=s.useState([]),[u,p]=s.useState(!0),[m,f]=s.useState(1),[J,g]=s.useState(0),[K,j]=s.useState(!0),[M,F]=s.useState(0),[S]=i.useForm();y();const[v,b]=s.useState(!1),[r,$]=s.useState(),d=!I.useBreakpoint().lg,h=async(a,n="",x=!1)=>{const{data:t}=await z.custom({url:"",method:"get",meta:{operation:"publicFiles",variables:{page:{value:a,type:"Int",required:!0},key:{value:n,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:L}]}}).catch(()=>(O.error("Error while fetching files"),{data:null})).then(w=>w);t&&(g(t.total),F(t.pages),j(t.hasNext),f(t.page),(n.length>0||n.length===0&&x)&&c(t.results),t.results.length>0&&!x&&c(o.concat(t.results))),p(!1)};return s.useEffect(()=>{h(m)},[]),u?e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(C,{})})}):e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx(k,{span:d?24:20,children:e.jsx(i,{layout:"vertical",form:S,onFinish:a=>h(0,a.key,!0),children:e.jsx(i.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(q,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(D,{children:e.jsx(E,{loading:u,data:o,min:!1})}),e.jsx(N,{title:"File Informations",anchor:"right",width:d?"100vw":"35vw",onClose:a=>b(a),open:v,children:e.jsx(H,{id:r==null?void 0:r.id})})]})},V=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsxs(l,{children:[e.jsxs(l.Item,{children:[e.jsx(R,{}),e.jsx(T,{to:"/odrive",children:"Home"})]}),e.jsx(l.Item,{children:"Public Files"})]})}),e.jsx(_,{})]});export{V as DrivesPublicFilesPage};
