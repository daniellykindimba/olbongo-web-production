var as=Object.defineProperty;var os=(w,o,O)=>o in w?as(w,o,{enumerable:!0,configurable:!0,writable:!0,value:O}):w[o]=O;var Oe=(w,o,O)=>(os(w,typeof o!="symbol"?o+"":o,O),O),ht=(w,o,O)=>{if(!o.has(w))throw TypeError("Cannot "+O)};var b=(w,o,O)=>(ht(w,o,"read from private field"),O?O.call(w):o.get(w)),Z=(w,o,O)=>{if(o.has(w))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(w):o.set(w,O)},me=(w,o,O,d)=>(ht(w,o,"write to private field"),d?d.call(w,O):o.set(w,O),O);var it=(w,o,O,d)=>({set _(E){me(w,o,E,O)},get _(){return b(w,o,d)}}),re=(w,o,O)=>(ht(w,o,"access private method"),O);import{r as reactExports,bL as ce,aM as jsxRuntimeExports,cc as Grid,ac as Spin,aB as Empty,ae as Button,co as PlusOutlined,aJ as Tag,cp as MoneyCollectFilled,c4 as Box,aH as Space,$ as Tooltip,aG as Row,ay as Col,aE as Pagination,bI as ModalComponent,M as Input,bJ as gqlDataProvider,bK as _t,bT as configs,aw as Breadcrumb,aC as Form,aI as Table,cq as OrderedListOutlined,cn as getDefaultExportFromCjs,cr as commonjsRequire,cs as require$$5,R as React,ct as PropTypes,bA as clsx,cu as BackwardOutlined,cv as ForwardOutlined,cw as DownloadOutlined,cx as ReadOutlined,aA as Dropdown,aD as Menu,cf as InfoCircleOutlined,cy as MoreOutlined,cz as StarFilled,cA as StarOutlined,cB as InfoOutlined,bV as DeleteOutlined,cC as PrinterOutlined,bQ as InboxOutlined,aF as Radio,ax as Checkbox,ca as Typography,cD as Divider,cE as FolderOpenFilled}from"./index-bf2a13da.js";import{B as BookPaymentFormComponent}from"./book_payment_form-27976553.js";import{C as Card}from"./index-992621f0.js";import{A as Avatar}from"./index-aff90bba.js";import{A as Affix}from"./index-eb33636b.js";import{D as DrawerComponent}from"./index-ffd78ccf.js";import{L as List}from"./index-8b58fb29.js";import{P as Popconfirm}from"./index-6044adfe.js";import{S as Skeleton}from"./Skeleton-3baadd7d.js";import{D as Descriptions}from"./index-1ebd7877.js";import{d as distExports,C as ClassicEditor}from"./ckeditor-ee4a3d87.js";import{U as Upload}from"./index-0cd66826.js";import{I as InputNumber}from"./index-53dd6adb.js";import"./index-9d7b7787.js";import"./InfoCircleFilled-d635786d.js";import"./index-ffbe86f1.js";import"./ActionButton-fe9a6812.js";import"./Upload-73adfd1a.js";import"./fade-0b1d8e26.js";import"./InputNumber-2d4d8741.js";function _mergeNamespaces(w,o){for(var O=0;O<o.length;O++){const d=o[O];if(typeof d!="string"&&!Array.isArray(d)){for(const E in d)if(E!=="default"&&!(E in w)){const L=Object.getOwnPropertyDescriptor(d,E);L&&Object.defineProperty(w,E,L.get?L:{enumerable:!0,get:()=>d[E]})}}}return Object.freeze(Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}))}const{Search:Search$7}=Input,BooksMarketPlaceComponent=w=>{const[o,O]=reactExports.useState(!1),[d,E]=reactExports.useState(0),[L,q]=reactExports.useState(0),[J,D]=reactExports.useState(1),[k,A]=reactExports.useState([]),[M,P]=reactExports.useState(),[_,p]=reactExports.useState(!1);ce();const u=y=>{P(y),p(!0)},a=async y=>{const{data:v}=await gqlDataProvider.custom({url:"",method:"post",meta:{operation:"addBookToReadings",variables:{bookId:{value:y,type:"Int",required:!0}},fields:["success","message",{book:["id","title","description","file","cover","price","downloadable","publisherCanAddToReadings","created","updated","isActive","isPublic","canEdit","canDelete","canManage",{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]}]}}).catch(()=>(_t.error("Error deleting book"),{data:null})).then(h=>h);v&&(v.success?(_t.success(v.message),A(k.map(h=>h.id===y?v.book:h))):_t.error(v.message))},f=async(y,v="")=>{O(!0);const{data:h}=await gqlDataProvider.custom({url:"",method:"get",meta:{operation:"marketplaceBooks",variables:{page:{value:y,type:"Int",required:!0},key:{value:v,type:"String",required:!1},public:{value:w.public,type:"Boolean",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","description","file","cover","price","created","updated","isActive","isPublic","hasPurchaseOrder","orderPaid","canEdit","canDelete","canManage",{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]}]}}).catch(()=>(_t.error("Error getting Books"),{data:null})).then(e=>e);h&&(E(h.total),q(h.pages),D(h.page),A(h.results)),O(!1)};return reactExports.useEffect(()=>{f(J,"")},[w.randKey]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Grid,{container:!0,spacing:0,sx:{display:"flex",justifyContent:"flex-start"},children:jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:12,md:4,lg:4,xl:4,children:jsxRuntimeExports.jsx(Search$7,{size:"large",placeholder:"Search Book(s) ...",onSearch:y=>f(1,y),style:{width:"100%"}})})}),jsxRuntimeExports.jsxs("div",{style:{maxHeight:"calc(100vh - 150px)",overflowY:"auto"},children:[jsxRuntimeExports.jsx(Spin,{spinning:o,children:jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:0,children:[k.length===0&&o&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:jsxRuntimeExports.jsx(Empty,{description:"Loading Books"})})}),k.length===0&&!o&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:jsxRuntimeExports.jsx(Empty,{description:"No Book Published"})})}),k.map(y=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6,children:jsxRuntimeExports.jsx(Card,{hoverable:!0,bordered:!0,style:{margin:"2px"},type:"inner",actions:[jsxRuntimeExports.jsxs("span",{style:{fontSize:"18px",display:y.price>0?"block":"none"},children:[y.price," Tsh"]}),jsxRuntimeExports.jsx("span",{style:{float:"right",marginRight:"10px",display:"flex"},children:y.isPublic?jsxRuntimeExports.jsx(Button,{size:"large",icon:jsxRuntimeExports.jsx(PlusOutlined,{}),onClick:()=>a(y.id),children:"Add to Readings"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[y.orderPaid&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Tag,{color:"green",children:"Already Purchased"})}),!y.orderPaid&&jsxRuntimeExports.jsx(Button,{size:"large",icon:jsxRuntimeExports.jsx(MoneyCollectFilled,{}),onClick:()=>u(y),children:"Buy"})]})})],children:jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:0,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:12,md:4,sx:{backgroundSize:"cover",backgroundPosition:"center",backgroundImage:"url("+y.cover+")"},children:jsxRuntimeExports.jsx(Box,{sx:{display:{xs:"block",md:"none"},height:100,width:"100%",backgroundSize:"cover",backgroundPosition:"center",backgroundImage:"url("+y.cover+")"}})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:12,md:8,children:jsxRuntimeExports.jsx(Box,{style:{padding:"10px"},children:jsxRuntimeExports.jsxs(Space,{direction:"vertical",children:[jsxRuntimeExports.jsx("a",{children:jsxRuntimeExports.jsx("h3",{children:y.title.length>50?y.title.substring(0,50)+"...":y.title})}),jsxRuntimeExports.jsx("p",{children:y.description.replace(/(<([^>]+)>)/gi,"").length>100?y.description.replace(/(<([^>]+)>)/gi,"").substring(0,100)+"...":y.description.replace(/(<([^>]+)>)/gi,"")}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Space,{children:jsxRuntimeExports.jsx(Tooltip,{title:"Click to View Author Profile",children:jsxRuntimeExports.jsxs("a",{children:[jsxRuntimeExports.jsx(Avatar,{size:"small",src:y.author.pic}),jsxRuntimeExports.jsx("span",{style:{marginLeft:"10px"},children:y.author.fullName})]})})})})]})})})]})})}))]})}),k.length>0&&jsxRuntimeExports.jsx(Row,{children:jsxRuntimeExports.jsx(Col,{span:24,style:{display:"flex",justifyContent:"center",marginTop:"10px",marginBottom:"20px"},children:jsxRuntimeExports.jsx(Pagination,{defaultCurrent:J,total:d})})})]}),jsxRuntimeExports.jsx(ModalComponent,{title:"Purchase Book",open:_,onClose:y=>p(y),width:"40vw",children:jsxRuntimeExports.jsx(BookPaymentFormComponent,{book:M,randKey:Math.random()})})]})},BooksMarketPlacePage=()=>{const{push:w}=ce();return reactExports.useEffect(()=>{document.title=configs.system_name+": Books MarketPlace"},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{marginTop:10},children:jsxRuntimeExports.jsxs(Breadcrumb,{children:[jsxRuntimeExports.jsx(Breadcrumb.Item,{children:jsxRuntimeExports.jsx("a",{onClick:()=>w("/olib"),children:"Home"})}),jsxRuntimeExports.jsx(Breadcrumb.Item,{children:"Books MarketPlace"})]})}),jsxRuntimeExports.jsx(BooksMarketPlaceComponent,{public:!1,randKey:Math.random()})]})},BooksPublicPage=()=>{const{push:w}=ce();return reactExports.useEffect(()=>(document.title=configs.system_name+": Public Books",document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{marginTop:10},children:jsxRuntimeExports.jsxs(Breadcrumb,{children:[jsxRuntimeExports.jsx(Breadcrumb.Item,{children:jsxRuntimeExports.jsx("a",{onClick:()=>w("/olib"),children:"Home"})}),jsxRuntimeExports.jsx(Breadcrumb.Item,{children:"Public Books"})]})}),jsxRuntimeExports.jsx(BooksMarketPlaceComponent,{public:!0,randKey:Math.random()})]})},{Search:Search$6}=Input,BooksPurchasesDisbursementsComponent=w=>{const[o,O]=reactExports.useState(!1),[d,E]=reactExports.useState(0),[L,q]=reactExports.useState(0),[J,D]=reactExports.useState(1),[k,A]=reactExports.useState(25),[M,P]=reactExports.useState(""),[_,p]=reactExports.useState([]);reactExports.useState(),Form.useForm(),reactExports.useState(!1);const[u,a]=reactExports.useState(!1);ce();const f=async(v,h="",e=25)=>{O(!0);const{data:n}=await gqlDataProvider.custom({url:"",method:"get",meta:{operation:"authorBooksPurchases",variables:{page:{value:v,type:"Int",required:!0},key:{value:h,type:"String",required:!1},pageSize:{value:e,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","price","paymentDate","receiptNumber","isPaid",{book:["id","title","description","file","cover","price","created","updated","isActive","isPublic","hasPurchaseOrder","canEdit","canDelete","canManage",{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]},{user:["id","firstName","middleName","lastName"]},{bill:["id","billNumber"]},"isActive","created","updated","canDelete","canManage"]}]}}).catch(r=>(_t.error("Error getting Bills"),{data:null})).then(r=>r);n&&(E(n.total),q(n.pages),D(n.page),p(n.results)),O(!1)},y=[{title:"Bill#",dataIndex:"billNumber",fixed:!0,render:(v,h,e)=>{var n;return jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx("a",{children:(n=h==null?void 0:h.bill)==null?void 0:n.billNumber})})}},{title:"Book Title",dataIndex:"bookTitle",fixed:!0,render:(v,h,e)=>{var n;return jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx("a",{children:(n=h==null?void 0:h.book)==null?void 0:n.title})})}},{title:"Amount",dataIndex:"billAmount",fixed:!0,render:(v,h,e)=>jsxRuntimeExports.jsxs("span",{children:[h.price," Tsh"]})}];return reactExports.useEffect(()=>{f(J,"",25)},[w.randKey]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Affix,{offsetTop:75,children:jsxRuntimeExports.jsxs(Row,{style:{display:"flex",justifyContent:"flex-start",marginTop:20},children:[jsxRuntimeExports.jsx(Col,{span:10,children:jsxRuntimeExports.jsx(Search$6,{size:"large",placeholder:"Search Disbursement(s) ...",onSearch:v=>f(1,v,25),style:{width:"100%"}})}),jsxRuntimeExports.jsx(Col,{span:14,style:{display:"flex",justifyContent:"flex-end"},children:jsxRuntimeExports.jsx(Button,{icon:jsxRuntimeExports.jsx(PlusOutlined,{}),size:"large",onClick:()=>a(!0),children:"Create Disbursement"})})]})}),jsxRuntimeExports.jsx(Row,{children:jsxRuntimeExports.jsx(Col,{span:24,children:jsxRuntimeExports.jsx(Table,{loading:o,columns:y,dataSource:_,pagination:{onChange:(v,h)=>{A(h),f(v,M,h)},total:d,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})})}),jsxRuntimeExports.jsx(ModalComponent,{title:"Creating Dibursement",width:"35vw",open:u,onClose:v=>a(v),children:jsxRuntimeExports.jsx("p",{children:"Creating Dibursement"})})]})},BooksPurchasesDisbursementsPage=()=>{const{push:w}=ce();return reactExports.useEffect(()=>{document.title=configs.system_name+": Books Purchases Disbursement"},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{marginTop:10},children:jsxRuntimeExports.jsxs(Breadcrumb,{children:[jsxRuntimeExports.jsx(Breadcrumb.Item,{children:jsxRuntimeExports.jsx("a",{onClick:()=>w("/olib"),children:"Home"})}),jsxRuntimeExports.jsx(Breadcrumb.Item,{children:jsxRuntimeExports.jsx("a",{onClick:()=>w("/olib/publish/books"),children:"Published Books"})}),jsxRuntimeExports.jsx(Breadcrumb.Item,{children:jsxRuntimeExports.jsx("a",{onClick:()=>w("/olib/books/purchases"),children:"Books Purchases"})}),jsxRuntimeExports.jsx(Breadcrumb.Item,{children:"Books Purchases Disbursement"})]})}),jsxRuntimeExports.jsx(BooksPurchasesDisbursementsComponent,{})]})},{Search:Search$5}=Input,BooksPurchasesComponent=w=>{const[o,O]=reactExports.useState(!1),[d,E]=reactExports.useState(0),[L,q]=reactExports.useState(0),[J,D]=reactExports.useState(1),[k,A]=reactExports.useState(25),[M,P]=reactExports.useState(""),[_,p]=reactExports.useState([]),[u,a]=reactExports.useState();Form.useForm();const[f,y]=reactExports.useState(!1),{push:v}=ce(),h=async(n,r="",t=25)=>{O(!0);const{data:c}=await gqlDataProvider.custom({url:"",method:"get",meta:{operation:"authorBooksPurchases",variables:{page:{value:n,type:"Int",required:!0},key:{value:r,type:"String",required:!1},pageSize:{value:t,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","price","paymentDate","receiptNumber","isPaid",{book:["id","title","description","file","cover","price","created","updated","isActive","isPublic","hasPurchaseOrder","canEdit","canDelete","canManage",{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]},{user:["id","firstName","middleName","lastName"]},{bill:["id","billNumber"]},"isActive","created","updated","canDelete","canManage"]}]}}).catch(C=>(_t.error("Error getting Bills"),{data:null})).then(C=>C);c&&(E(c.total),q(c.pages),D(c.page),p(c.results)),O(!1)},e=[{title:"Bill#",dataIndex:"billNumber",fixed:!0,render:(n,r,t)=>{var c;return jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx("a",{children:(c=r==null?void 0:r.bill)==null?void 0:c.billNumber})})}},{title:"Book Title",dataIndex:"bookTitle",fixed:!0,render:(n,r,t)=>{var c;return jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx("a",{children:(c=r==null?void 0:r.book)==null?void 0:c.title})})}},{title:"Amount",dataIndex:"billAmount",fixed:!0,render:(n,r,t)=>jsxRuntimeExports.jsxs("span",{children:[r.price," Tsh"]})}];return reactExports.useEffect(()=>{h(J,"",25)},[w.randKey]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Affix,{offsetTop:75,children:jsxRuntimeExports.jsxs(Row,{style:{display:"flex",justifyContent:"flex-start",marginTop:20},children:[jsxRuntimeExports.jsx(Col,{span:10,children:jsxRuntimeExports.jsx(Search$5,{size:"large",placeholder:"Search Purchase(s) ...",onSearch:n=>h(1,n,25),style:{width:"100%"}})}),jsxRuntimeExports.jsx(Col,{span:14,style:{display:"flex",justifyContent:"flex-end"},children:jsxRuntimeExports.jsx(Button,{icon:jsxRuntimeExports.jsx(OrderedListOutlined,{}),size:"large",onClick:()=>v("/olib/books/purchases/disbursements"),children:"Disbursement"})})]})}),jsxRuntimeExports.jsx(Row,{children:jsxRuntimeExports.jsx(Col,{span:24,children:jsxRuntimeExports.jsx(Table,{loading:o,columns:e,dataSource:_,pagination:{onChange:(n,r)=>{A(r),h(n,M,r)},total:d,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})})}),jsxRuntimeExports.jsx(ModalComponent,{title:"Order Details & Payment",open:f,width:"50vw",onClose:n=>y(n),children:jsxRuntimeExports.jsx(BookPaymentFormComponent,{book:u==null?void 0:u.book})})]})},BooksPurchasesPage=()=>{const{push:w}=ce();return reactExports.useEffect(()=>{document.title=configs.system_name+": Books Purchases"},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{marginTop:10},children:jsxRuntimeExports.jsxs(Breadcrumb,{children:[jsxRuntimeExports.jsx(Breadcrumb.Item,{children:jsxRuntimeExports.jsx("a",{onClick:()=>w("/olib"),children:"Home"})}),jsxRuntimeExports.jsx(Breadcrumb.Item,{children:jsxRuntimeExports.jsx("a",{onClick:()=>w("/olib/publish/books"),children:"Published Books"})}),jsxRuntimeExports.jsx(Breadcrumb.Item,{children:"Books Purchases"})]})}),jsxRuntimeExports.jsx(BooksPurchasesComponent,{})]})};var pdf$1={exports:{}};(function(module,exports){(function(o,O){module.exports=O()})(globalThis,()=>(()=>{var __webpack_modules__=[,(w,o)=>{var we;Object.defineProperty(o,"__esModule",{value:!0}),o.VerbosityLevel=o.Util=o.UnknownErrorException=o.UnexpectedResponseException=o.TextRenderingMode=o.RenderingIntentFlag=o.PromiseCapability=o.PermissionFlag=o.PasswordResponses=o.PasswordException=o.PageActionEventType=o.OPS=o.MissingPDFException=o.MAX_IMAGE_SIZE_TO_CACHE=o.LINE_FACTOR=o.LINE_DESCENT_FACTOR=o.InvalidPDFException=o.ImageKind=o.IDENTITY_MATRIX=o.FormatError=o.FeatureTest=o.FONT_IDENTITY_MATRIX=o.DocumentActionEventType=o.CMapCompressionType=o.BaseException=o.BASELINE_FACTOR=o.AnnotationType=o.AnnotationStateModelType=o.AnnotationReviewState=o.AnnotationReplyType=o.AnnotationMode=o.AnnotationMarkedState=o.AnnotationFlag=o.AnnotationFieldFlag=o.AnnotationEditorType=o.AnnotationEditorPrefix=o.AnnotationEditorParamsType=o.AnnotationBorderStyleType=o.AnnotationActionEventType=o.AbortException=void 0,o.assert=Ee,o.bytesToString=U,o.createValidAbsoluteUrl=ye,o.getModificationDate=ve,o.getVerbosityLevel=de,o.info=ie,o.isArrayBuffer=fe,o.isArrayEqual=Se,o.normalizeUnicode=Ae,o.objectFromMap=R,o.objectSize=x,o.setVerbosityLevel=ee,o.shadow=z,o.string32=l,o.stringToBytes=s,o.stringToPDFString=te,o.stringToUTF8String=ne,o.unreachable=ge,o.utf8StringToString=pe,o.warn=ue;const O=[1,0,0,1,0,0];o.IDENTITY_MATRIX=O;const d=[.001,0,0,.001,0,0];o.FONT_IDENTITY_MATRIX=d;const E=1e7;o.MAX_IMAGE_SIZE_TO_CACHE=E;const L=1.35;o.LINE_FACTOR=L;const q=.35;o.LINE_DESCENT_FACTOR=q;const J=q/L;o.BASELINE_FACTOR=J;const D={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};o.RenderingIntentFlag=D;const k={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};o.AnnotationMode=k;const A="pdfjs_internal_editor_";o.AnnotationEditorPrefix=A;const M={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};o.AnnotationEditorType=M;const P={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};o.AnnotationEditorParamsType=P;const _={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};o.PermissionFlag=_;const p={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};o.TextRenderingMode=p;const u={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};o.ImageKind=u;const a={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};o.AnnotationType=a;const f={MARKED:"Marked",REVIEW:"Review"};o.AnnotationStateModelType=f;const y={MARKED:"Marked",UNMARKED:"Unmarked"};o.AnnotationMarkedState=y;const v={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};o.AnnotationReviewState=v;const h={GROUP:"Group",REPLY:"R"};o.AnnotationReplyType=h;const e={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};o.AnnotationFlag=e;const n={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};o.AnnotationFieldFlag=n;const r={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};o.AnnotationBorderStyleType=r;const t={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};o.AnnotationActionEventType=t;const c={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};o.DocumentActionEventType=c;const C={O:"PageOpen",C:"PageClose"};o.PageActionEventType=C;const i={ERRORS:0,WARNINGS:1,INFOS:5};o.VerbosityLevel=i;const S={NONE:0,BINARY:1};o.CMapCompressionType=S;const H={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};o.OPS=H;const X={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};o.PasswordResponses=X;let Q=i.WARNINGS;function ee(he){Number.isInteger(he)&&(Q=he)}function de(){return Q}function ie(he){Q>=i.INFOS&&console.log(`Info: ${he}`)}function ue(he){Q>=i.WARNINGS&&console.log(`Warning: ${he}`)}function ge(he){throw new Error(he)}function Ee(he,F){he||ge(F)}function _e(he){switch(he==null?void 0:he.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ye(he,F=null,B=null){if(!he)return null;try{if(B&&typeof he=="string"){if(B.addDefaultProtocol&&he.startsWith("www.")){const xe=he.match(/\./g);(xe==null?void 0:xe.length)>=2&&(he=`http://${he}`)}if(B.tryConvertEncoding)try{he=ne(he)}catch{}}const le=F?new URL(he,F):new URL(he);if(_e(le))return le}catch{}return null}function z(he,F,B,le=!1){return Object.defineProperty(he,F,{value:B,enumerable:!le,configurable:!0,writable:!1}),B}const m=function(){function F(B,le){this.constructor===F&&ge("Cannot initialize BaseException."),this.message=B,this.name=le}return F.prototype=new Error,F.constructor=F,F}();o.BaseException=m;class g extends m{constructor(F,B){super(F,"PasswordException"),this.code=B}}o.PasswordException=g;class T extends m{constructor(F,B){super(F,"UnknownErrorException"),this.details=B}}o.UnknownErrorException=T;class W extends m{constructor(F){super(F,"InvalidPDFException")}}o.InvalidPDFException=W;class G extends m{constructor(F){super(F,"MissingPDFException")}}o.MissingPDFException=G;class $ extends m{constructor(F,B){super(F,"UnexpectedResponseException"),this.status=B}}o.UnexpectedResponseException=$;class I extends m{constructor(F){super(F,"FormatError")}}o.FormatError=I;class N extends m{constructor(F){super(F,"AbortException")}}o.AbortException=N;function U(he){(typeof he!="object"||(he==null?void 0:he.length)===void 0)&&ge("Invalid argument for bytesToString");const F=he.length,B=8192;if(F<B)return String.fromCharCode.apply(null,he);const le=[];for(let xe=0;xe<F;xe+=B){const Pe=Math.min(xe+B,F),Te=he.subarray(xe,Pe);le.push(String.fromCharCode.apply(null,Te))}return le.join("")}function s(he){typeof he!="string"&&ge("Invalid argument for stringToBytes");const F=he.length,B=new Uint8Array(F);for(let le=0;le<F;++le)B[le]=he.charCodeAt(le)&255;return B}function l(he){return String.fromCharCode(he>>24&255,he>>16&255,he>>8&255,he&255)}function x(he){return Object.keys(he).length}function R(he){const F=Object.create(null);for(const[B,le]of he)F[B]=le;return F}function j(){const he=new Uint8Array(4);return he[0]=1,new Uint32Array(he.buffer,0,1)[0]===1}function V(){try{return new Function(""),!0}catch{return!1}}class se{static get isLittleEndian(){return z(this,"isLittleEndian",j())}static get isEvalSupported(){return z(this,"isEvalSupported",V())}static get isOffscreenCanvasSupported(){return z(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?z(this,"platform",{isWin:!1,isMac:!1}):z(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}o.FeatureTest=se;const Y=[...Array(256).keys()].map(he=>he.toString(16).padStart(2,"0"));class ae{static makeHexColor(F,B,le){return`#${Y[F]}${Y[B]}${Y[le]}`}static scaleMinMax(F,B){let le;F[0]?(F[0]<0&&(le=B[0],B[0]=B[1],B[1]=le),B[0]*=F[0],B[1]*=F[0],F[3]<0&&(le=B[2],B[2]=B[3],B[3]=le),B[2]*=F[3],B[3]*=F[3]):(le=B[0],B[0]=B[2],B[2]=le,le=B[1],B[1]=B[3],B[3]=le,F[1]<0&&(le=B[2],B[2]=B[3],B[3]=le),B[2]*=F[1],B[3]*=F[1],F[2]<0&&(le=B[0],B[0]=B[1],B[1]=le),B[0]*=F[2],B[1]*=F[2]),B[0]+=F[4],B[1]+=F[4],B[2]+=F[5],B[3]+=F[5]}static transform(F,B){return[F[0]*B[0]+F[2]*B[1],F[1]*B[0]+F[3]*B[1],F[0]*B[2]+F[2]*B[3],F[1]*B[2]+F[3]*B[3],F[0]*B[4]+F[2]*B[5]+F[4],F[1]*B[4]+F[3]*B[5]+F[5]]}static applyTransform(F,B){const le=F[0]*B[0]+F[1]*B[2]+B[4],xe=F[0]*B[1]+F[1]*B[3]+B[5];return[le,xe]}static applyInverseTransform(F,B){const le=B[0]*B[3]-B[1]*B[2],xe=(F[0]*B[3]-F[1]*B[2]+B[2]*B[5]-B[4]*B[3])/le,Pe=(-F[0]*B[1]+F[1]*B[0]+B[4]*B[1]-B[5]*B[0])/le;return[xe,Pe]}static getAxialAlignedBoundingBox(F,B){const le=ae.applyTransform(F,B),xe=ae.applyTransform(F.slice(2,4),B),Pe=ae.applyTransform([F[0],F[3]],B),Te=ae.applyTransform([F[2],F[1]],B);return[Math.min(le[0],xe[0],Pe[0],Te[0]),Math.min(le[1],xe[1],Pe[1],Te[1]),Math.max(le[0],xe[0],Pe[0],Te[0]),Math.max(le[1],xe[1],Pe[1],Te[1])]}static inverseTransform(F){const B=F[0]*F[3]-F[1]*F[2];return[F[3]/B,-F[1]/B,-F[2]/B,F[0]/B,(F[2]*F[5]-F[4]*F[3])/B,(F[4]*F[1]-F[5]*F[0])/B]}static singularValueDecompose2dScale(F){const B=[F[0],F[2],F[1],F[3]],le=F[0]*B[0]+F[1]*B[2],xe=F[0]*B[1]+F[1]*B[3],Pe=F[2]*B[0]+F[3]*B[2],Te=F[2]*B[1]+F[3]*B[3],je=(le+Te)/2,ke=Math.sqrt((le+Te)**2-4*(le*Te-Pe*xe))/2,Me=je+ke||1,Ce=je-ke||1;return[Math.sqrt(Me),Math.sqrt(Ce)]}static normalizeRect(F){const B=F.slice(0);return F[0]>F[2]&&(B[0]=F[2],B[2]=F[0]),F[1]>F[3]&&(B[1]=F[3],B[3]=F[1]),B}static intersect(F,B){const le=Math.max(Math.min(F[0],F[2]),Math.min(B[0],B[2])),xe=Math.min(Math.max(F[0],F[2]),Math.max(B[0],B[2]));if(le>xe)return null;const Pe=Math.max(Math.min(F[1],F[3]),Math.min(B[1],B[3])),Te=Math.min(Math.max(F[1],F[3]),Math.max(B[1],B[3]));return Pe>Te?null:[le,Pe,xe,Te]}static bezierBoundingBox(F,B,le,xe,Pe,Te,je,ke){const Me=[],Ce=[[],[]];let Le,De,Ie,Fe,Ue,Ge,qe,We;for(let Xe=0;Xe<2;++Xe){if(Xe===0?(De=6*F-12*le+6*Pe,Le=-3*F+9*le-9*Pe+3*je,Ie=3*le-3*F):(De=6*B-12*xe+6*Te,Le=-3*B+9*xe-9*Te+3*ke,Ie=3*xe-3*B),Math.abs(Le)<1e-12){if(Math.abs(De)<1e-12)continue;Fe=-Ie/De,0<Fe&&Fe<1&&Me.push(Fe);continue}qe=De*De-4*Ie*Le,We=Math.sqrt(qe),!(qe<0)&&(Ue=(-De+We)/(2*Le),0<Ue&&Ue<1&&Me.push(Ue),Ge=(-De-We)/(2*Le),0<Ge&&Ge<1&&Me.push(Ge))}let Ne=Me.length,Be;const Ve=Ne;for(;Ne--;)Fe=Me[Ne],Be=1-Fe,Ce[0][Ne]=Be*Be*Be*F+3*Be*Be*Fe*le+3*Be*Fe*Fe*Pe+Fe*Fe*Fe*je,Ce[1][Ne]=Be*Be*Be*B+3*Be*Be*Fe*xe+3*Be*Fe*Fe*Te+Fe*Fe*Fe*ke;return Ce[0][Ve]=F,Ce[1][Ve]=B,Ce[0][Ve+1]=je,Ce[1][Ve+1]=ke,Ce[0].length=Ce[1].length=Ve+2,[Math.min(...Ce[0]),Math.min(...Ce[1]),Math.max(...Ce[0]),Math.max(...Ce[1])]}}o.Util=ae;const oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function te(he){if(he[0]>="ï"){let B;if(he[0]==="þ"&&he[1]==="ÿ"?B="utf-16be":he[0]==="ÿ"&&he[1]==="þ"?B="utf-16le":he[0]==="ï"&&he[1]==="»"&&he[2]==="¿"&&(B="utf-8"),B)try{const le=new TextDecoder(B,{fatal:!0}),xe=s(he);return le.decode(xe)}catch(le){ue(`stringToPDFString: "${le}".`)}}const F=[];for(let B=0,le=he.length;B<le;B++){const xe=oe[he.charCodeAt(B)];F.push(xe?String.fromCharCode(xe):he.charAt(B))}return F.join("")}function ne(he){return decodeURIComponent(escape(he))}function pe(he){return unescape(encodeURIComponent(he))}function fe(he){return typeof he=="object"&&(he==null?void 0:he.byteLength)!==void 0}function Se(he,F){if(he.length!==F.length)return!1;for(let B=0,le=he.length;B<le;B++)if(he[B]!==F[B])return!1;return!0}function ve(he=new Date){return[he.getUTCFullYear().toString(),(he.getUTCMonth()+1).toString().padStart(2,"0"),he.getUTCDate().toString().padStart(2,"0"),he.getUTCHours().toString().padStart(2,"0"),he.getUTCMinutes().toString().padStart(2,"0"),he.getUTCSeconds().toString().padStart(2,"0")].join("")}class Re{constructor(){Z(this,we,!1);this.promise=new Promise((F,B)=>{this.resolve=le=>{me(this,we,!0),F(le)},this.reject=le=>{me(this,we,!0),B(le)}})}get settled(){return b(this,we)}}we=new WeakMap,o.PromiseCapability=Re;let K=null,be=null;function Ae(he){return K||(K=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,be=new Map([["ﬅ","ſt"]])),he.replaceAll(K,(F,B,le)=>B?B.normalize("NFKC"):be.get(le))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var w,O,d,E,Je,q,at,D,k,A,M,P,_,p,u,pt,f,y,ft,h,e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:r,NodeCMapReaderFactory:t,NodeFilterFactory:c,NodeStandardFontDataFactory:C}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=r,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=t,exports.DefaultFilterFactory=DefaultFilterFactory=c,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=C}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:r}=__w_pdfjs_require__(21);createPDFNetworkStream=t=>new r(t)}else{const{PDFNetworkStream:r}=__w_pdfjs_require__(24),{PDFFetchStream:t}=__w_pdfjs_require__(25);createPDFNetworkStream=c=>(0,_display_utils.isValidFetchUrl)(c.url)?new t(c):new r(c)}function getDocument(r){if(typeof r=="string"||r instanceof URL?r={url:r}:(0,_util.isArrayBuffer)(r)&&(r={data:r}),typeof r!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!r.url&&!r.data&&!r.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const t=new PDFDocumentLoadingTask,{docId:c}=t,C=r.url?getUrlProp(r.url):null,i=r.data?getDataProp(r.data):null,S=r.httpHeaders||null,H=r.withCredentials===!0,X=r.password??null,Q=r.range instanceof PDFDataRangeTransport?r.range:null,ee=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let de=r.worker instanceof PDFWorker?r.worker:null;const ie=r.verbosity,ue=typeof r.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(r.docBaseUrl)?r.docBaseUrl:null,ge=typeof r.cMapUrl=="string"?r.cMapUrl:null,Ee=r.cMapPacked!==!1,_e=r.CMapReaderFactory||DefaultCMapReaderFactory,ye=typeof r.standardFontDataUrl=="string"?r.standardFontDataUrl:null,z=r.StandardFontDataFactory||DefaultStandardFontDataFactory,m=r.stopAtErrors!==!0,g=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,T=r.isEvalSupported!==!1,W=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!_is_node.isNodeJS,G=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,$=typeof r.disableFontFace=="boolean"?r.disableFontFace:_is_node.isNodeJS,I=r.fontExtraProperties===!0,N=r.enableXfa===!0,U=r.ownerDocument||globalThis.document,s=r.disableRange===!0,l=r.disableStream===!0,x=r.disableAutoFetch===!0,R=r.pdfBug===!0,j=Q?Q.length:r.length??NaN,V=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!_is_node.isNodeJS&&!$,se=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:_e===_display_utils.DOMCMapReaderFactory&&z===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(ge,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(ye,document.baseURI),Y=r.canvasFactory||new DefaultCanvasFactory({ownerDocument:U}),ae=r.filterFactory||new DefaultFilterFactory({docId:c,ownerDocument:U}),oe=null;(0,_util.setVerbosityLevel)(ie);const te={canvasFactory:Y,filterFactory:ae};if(se||(te.cMapReaderFactory=new _e({baseUrl:ge,isCompressed:Ee}),te.standardFontDataFactory=new z({baseUrl:ye})),!de){const fe={verbosity:ie,port:_worker_options.GlobalWorkerOptions.workerPort};de=fe.port?PDFWorker.fromPort(fe):new PDFWorker(fe),t._worker=de}const ne={docId:c,apiVersion:"3.6.172",data:i,password:X,disableAutoFetch:x,rangeChunkSize:ee,length:j,docBaseUrl:ue,enableXfa:N,evaluatorOptions:{maxImageSize:g,disableFontFace:$,ignoreErrors:m,isEvalSupported:T,isOffscreenCanvasSupported:W,canvasMaxAreaInBytes:G,fontExtraProperties:I,useSystemFonts:V,cMapUrl:se?ge:null,standardFontDataUrl:se?ye:null}},pe={ignoreErrors:m,isEvalSupported:T,disableFontFace:$,fontExtraProperties:I,enableXfa:N,ownerDocument:U,disableAutoFetch:x,pdfBug:R,styleElement:oe};return de.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");const fe=_fetchDocument(de,ne),Se=new Promise(function(ve){let Re;Q?Re=new _transport_stream.PDFDataTransportStream({length:j,initialData:Q.initialData,progressiveDone:Q.progressiveDone,contentDispositionFilename:Q.contentDispositionFilename,disableRange:s,disableStream:l},Q):i||(Re=createPDFNetworkStream({url:C,length:j,httpHeaders:S,withCredentials:H,rangeChunkSize:ee,disableRange:s,disableStream:l})),ve(Re)});return Promise.all([fe,Se]).then(function([ve,Re]){if(t.destroyed)throw new Error("Loading aborted");const K=new _message_handler.MessageHandler(c,ve,de.port),be=new WorkerTransport(K,t,Re,pe,te);t._transport=be,K.send("Ready",null)})}).catch(t._capability.reject),t}async function _fetchDocument(r,t){if(r.destroyed)throw new Error("Worker was destroyed");const c=await r.messageHandler.sendWithPromise("GetDocRequest",t,t.data?[t.data.buffer]:null);if(r.destroyed)throw new Error("Worker was destroyed");return c}function getUrlProp(r){if(r instanceof URL)return r.href;try{return new URL(r,window.location).href}catch{if(_is_node.isNodeJS&&typeof r=="string")return r}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(r){if(_is_node.isNodeJS&&typeof Buffer<"u"&&r instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(r);if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return(0,_util.stringToBytes)(r);if(typeof r=="object"&&!isNaN(r==null?void 0:r.length)||(0,_util.isArrayBuffer)(r))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const o=class o{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${it(o,w)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t;this.destroyed=!0,await((t=this._transport)==null?void 0:t.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};w=new WeakMap,Z(o,w,0);let PDFDocumentLoadingTask=o;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,c,C=!1,i=null){this.length=t,this.initialData=c,this.progressiveDone=C,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,c){for(const C of this._rangeListeners)C(t,c)}onDataProgress(t,c){this._readyCapability.promise.then(()=>{for(const C of this._progressListeners)C(t,c)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const c of this._progressiveReadListeners)c(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,c){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,c){this._pdfInfo=t,this._transport=c}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,c,C,i=!1){Z(this,E);Z(this,q);Z(this,O,null);Z(this,d,!1);this._pageIndex=t,this._pageInfo=c,this._transport=C,this._stats=i?new _display_utils.StatTimer:null,this._pdfBug=i,this.commonObjs=C.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:c=this.rotate,offsetX:C=0,offsetY:i=0,dontFlip:S=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:c,offsetX:C,offsetY:i,dontFlip:S})}getAnnotations({intent:t="display"}={}){const c=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,c.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:c,intent:C="display",annotationMode:i=_util.AnnotationMode.ENABLE,transform:S=null,background:H=null,optionalContentConfigPromise:X=null,annotationCanvasMap:Q=null,pageColors:ee=null,printAnnotationStorage:de=null}){var z,m,g;if((z=arguments[0])!=null&&z.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(m=this._stats)==null||m.time("Overall");const ie=this._transport.getRenderingIntent(C,i,de);me(this,d,!1),re(this,q,at).call(this),X||(X=this._transport.getOptionalContentConfig());let ue=this._intentStates.get(ie.cacheKey);ue||(ue=Object.create(null),this._intentStates.set(ie.cacheKey,ue)),ue.streamReaderCancelTimeout&&(clearTimeout(ue.streamReaderCancelTimeout),ue.streamReaderCancelTimeout=null);const ge=!!(ie.renderingIntent&_util.RenderingIntentFlag.PRINT);ue.displayReadyCapability||(ue.displayReadyCapability=new _util.PromiseCapability,ue.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(g=this._stats)==null||g.time("Page Request"),this._pumpOperatorList(ie));const Ee=T=>{var W,G;ue.renderTasks.delete(_e),(this._maybeCleanupAfterRender||ge)&&me(this,d,!0),re(this,E,Je).call(this,!ge),T?(_e.capability.reject(T),this._abortOperatorList({intentState:ue,reason:T instanceof Error?T:new Error(T)})):_e.capability.resolve(),(W=this._stats)==null||W.timeEnd("Rendering"),(G=this._stats)==null||G.timeEnd("Overall")},_e=new InternalRenderTask({callback:Ee,params:{canvasContext:t,viewport:c,transform:S,background:H},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Q,operatorList:ue.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ge,pdfBug:this._pdfBug,pageColors:ee});(ue.renderTasks||(ue.renderTasks=new Set)).add(_e);const ye=_e.task;return Promise.all([ue.displayReadyCapability.promise,X]).then(([T,W])=>{var G;if(b(this,d)){Ee();return}(G=this._stats)==null||G.time("Rendering"),_e.initializeGraphics({transparency:T,optionalContentConfig:W}),_e.operatorListChanged()}).catch(Ee),ye}getOperatorList({intent:t="display",annotationMode:c=_util.AnnotationMode.ENABLE,printAnnotationStorage:C=null}={}){var Q;function i(){H.operatorList.lastChunk&&(H.opListReadCapability.resolve(H.operatorList),H.renderTasks.delete(X))}const S=this._transport.getRenderingIntent(t,c,C,!0);let H=this._intentStates.get(S.cacheKey);H||(H=Object.create(null),this._intentStates.set(S.cacheKey,H));let X;return H.opListReadCapability||(X=Object.create(null),X.operatorListChanged=i,H.opListReadCapability=new _util.PromiseCapability,(H.renderTasks||(H.renderTasks=new Set)).add(X),H.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Q=this._stats)==null||Q.time("Page Request"),this._pumpOperatorList(S)),H.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:c=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:c===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(C=>_xfa_text.XfaText.textContent(C));const c=this.streamTextContent(t);return new Promise(function(C,i){function S(){H.read().then(function({value:Q,done:ee}){if(ee){C(X);return}Object.assign(X.styles,Q.styles),X.items.push(...Q.items),S()},i)}const H=c.getReader(),X={items:[],styles:Object.create(null)};S()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const c of this._intentStates.values())if(this._abortOperatorList({intentState:c,reason:new Error("Page was destroyed."),force:!0}),!c.opListReadCapability)for(const C of c.renderTasks)t.push(C.completed),C.cancel();return this.objs.clear(),me(this,d,!1),re(this,q,at).call(this),Promise.all(t)}cleanup(t=!1){me(this,d,!0);const c=re(this,E,Je).call(this,!1);return t&&c&&this._stats&&(this._stats=new _display_utils.StatTimer),c}_startRenderPage(t,c){var i,S;const C=this._intentStates.get(c);C&&((i=this._stats)==null||i.timeEnd("Page Request"),(S=C.displayReadyCapability)==null||S.resolve(t))}_renderPageChunk(t,c){for(let C=0,i=t.length;C<i;C++)c.operatorList.fnArray.push(t.fnArray[C]),c.operatorList.argsArray.push(t.argsArray[C]);c.operatorList.lastChunk=t.lastChunk,c.operatorList.separateAnnots=t.separateAnnots;for(const C of c.renderTasks)C.operatorListChanged();t.lastChunk&&re(this,E,Je).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:c,annotationStorageMap:C}){const S=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:c,annotationStorage:C}).getReader(),H=this._intentStates.get(c);H.streamReader=S;const X=()=>{S.read().then(({value:Q,done:ee})=>{if(ee){H.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Q,H),X())},Q=>{if(H.streamReader=null,!this._transport.destroyed){if(H.operatorList){H.operatorList.lastChunk=!0;for(const ee of H.renderTasks)ee.operatorListChanged();re(this,E,Je).call(this,!0)}if(H.displayReadyCapability)H.displayReadyCapability.reject(Q);else if(H.opListReadCapability)H.opListReadCapability.reject(Q);else throw Q}})};X()}_abortOperatorList({intentState:t,reason:c,force:C=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!C){if(t.renderTasks.size>0)return;if(c instanceof _display_utils.RenderingCancelledException){let i=RENDERING_CANCELLED_TIMEOUT;c.extraDelay>0&&c.extraDelay<1e3&&(i+=c.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:c,force:!0})},i);return}}if(t.streamReader.cancel(new _util.AbortException(c.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,S]of this._intentStates)if(S===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}O=new WeakMap,d=new WeakMap,E=new WeakSet,Je=function(t=!1){if(re(this,q,at).call(this),!b(this,d))return!1;if(t)return me(this,O,setTimeout(()=>{me(this,O,null),re(this,E,Je).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:c,operatorList:C}of this._intentStates.values())if(c.size>0||!C.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),me(this,d,!1),!0},q=new WeakSet,at=function(){b(this,O)&&(clearTimeout(b(this,O)),me(this,O,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Z(this,D,new Set);Z(this,k,Promise.resolve())}postMessage(t,c){const C={data:structuredClone(t,c?{transfer:c}:null)};b(this,k).then(()=>{for(const i of b(this,D))i.call(this,C)})}addEventListener(t,c){b(this,D).add(c)}removeEventListener(t,c){b(this,D).delete(c)}terminate(){b(this,D).clear()}}D=new WeakMap,k=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const r=(A=document==null?void 0:document.currentScript)==null?void 0:A.src;r&&(PDFWorkerUtil.fallbackWorkerSrc=r.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(r,t){let c;try{if(c=new URL(r),!c.origin||c.origin==="null")return!1}catch{return!1}const C=new URL(t,c);return c.origin===C.origin},PDFWorkerUtil.createCDNWrapper=function(r){const t=`importScripts("${r}");`;return URL.createObjectURL(new Blob([t]))}}const _PDFWorker=class _PDFWorker{constructor({name:r=null,port:t=null,verbosity:c=(0,_util.getVerbosityLevel)()}={}){if(t&&b(_PDFWorker,M).has(t))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=r,this.destroyed=!1,this.verbosity=c,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,t){b(_PDFWorker,M).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(r){this._port=r,this._messageHandler=new _message_handler.MessageHandler("main","worker",r),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:r}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,r)||(r=PDFWorkerUtil.createCDNWrapper(new URL(r,window.location).href));const t=new Worker(r),c=new _message_handler.MessageHandler("main","worker",t),C=()=>{t.removeEventListener("error",i),c.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=()=>{this._webWorker||C()};t.addEventListener("error",i),c.on("test",H=>{if(t.removeEventListener("error",i),this.destroyed){C();return}H?(this._messageHandler=c,this._port=t,this._webWorker=t,this._readyCapability.resolve(),c.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),c.destroy(),t.terminate())}),c.on("ready",H=>{if(t.removeEventListener("error",i),this.destroyed){C();return}try{S()}catch{this._setupFakeWorker()}});const S=()=>{const H=new Uint8Array;c.send("test",H,[H.buffer])};S();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(r=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new LoopbackPort;this._port=t;const c=`fake${PDFWorkerUtil.fakeWorkerId++}`,C=new _message_handler.MessageHandler(c+"_worker",c,t);r.setup(C,t);const i=new _message_handler.MessageHandler(c,c+"_worker",t);this._messageHandler=i,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})}).catch(r=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${r.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),b(_PDFWorker,M).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(r){if(!(r!=null&&r.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return b(this,M).has(r.port)?b(this,M).get(r.port):new _PDFWorker(r)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var r;try{return((r=globalThis.pdfjsWorker)==null?void 0:r.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};M=new WeakMap,Z(_PDFWorker,M,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(t,c,C,i,S){Z(this,u);Z(this,P,new Map);Z(this,_,new Map);Z(this,p,new Map);this.messageHandler=t,this.loadingTask=c,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this._params=i,this.canvasFactory=S.canvasFactory,this.filterFactory=S.filterFactory,this.cMapReaderFactory=S.cMapReaderFactory,this.standardFontDataFactory=S.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=C,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(t,c=_util.AnnotationMode.ENABLE,C=null,i=!1){let S=_util.RenderingIntentFlag.DISPLAY,H=null;switch(t){case"any":S=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":S=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(c){case _util.AnnotationMode.DISABLE:S+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:S+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:S+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,H=(S&_util.RenderingIntentFlag.PRINT&&C instanceof _annotation_storage.PrintAnnotationStorage?C:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${c}`)}return i&&(S+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:S,cacheKey:`${S}_${_annotation_storage.AnnotationStorage.getHash(H)}`,annotationStorageMap:H}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const C of b(this,_).values())t.push(C._destroy());b(this,_).clear(),b(this,p).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const c=this.messageHandler.sendWithPromise("Terminate",null);return t.push(c),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),b(this,P).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:c}=this;t.on("GetReader",(C,i)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=S=>{this._lastProgress={loaded:S.loaded,total:S.total}},i.onPull=()=>{this._fullReader.read().then(function({value:S,done:H}){if(H){i.close();return}(0,_util.assert)(S instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(S),1,[S])}).catch(S=>{i.error(S)})},i.onCancel=S=>{this._fullReader.cancel(S),i.ready.catch(H=>{if(!this.destroyed)throw H})}}),t.on("ReaderHeadersReady",C=>{const i=new _util.PromiseCapability,S=this._fullReader;return S.headersReady.then(()=>{var H;(!S.isStreamingSupported||!S.isRangeSupported)&&(this._lastProgress&&((H=c.onProgress)==null||H.call(c,this._lastProgress)),S.onProgress=X=>{var Q;(Q=c.onProgress)==null||Q.call(c,{loaded:X.loaded,total:X.total})}),i.resolve({isStreamingSupported:S.isStreamingSupported,isRangeSupported:S.isRangeSupported,contentLength:S.contentLength})},i.reject),i.promise}),t.on("GetRangeReader",(C,i)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const S=this._networkStream.getRangeReader(C.begin,C.end);if(!S){i.close();return}i.onPull=()=>{S.read().then(function({value:H,done:X}){if(X){i.close();return}(0,_util.assert)(H instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(H),1,[H])}).catch(H=>{i.error(H)})},i.onCancel=H=>{S.cancel(H),i.ready.catch(X=>{if(!this.destroyed)throw X})}}),t.on("GetDoc",({pdfInfo:C})=>{this._numPages=C.numPages,this._htmlForXfa=C.htmlForXfa,delete C.htmlForXfa,c._capability.resolve(new PDFDocumentProxy(C,this))}),t.on("DocException",function(C){let i;switch(C.name){case"PasswordException":i=new _util.PasswordException(C.message,C.code);break;case"InvalidPDFException":i=new _util.InvalidPDFException(C.message);break;case"MissingPDFException":i=new _util.MissingPDFException(C.message);break;case"UnexpectedResponseException":i=new _util.UnexpectedResponseException(C.message,C.status);break;case"UnknownErrorException":i=new _util.UnknownErrorException(C.message,C.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}c._capability.reject(i)}),t.on("PasswordRequest",C=>{if(this._passwordCapability=new _util.PromiseCapability,c.onPassword){const i=S=>{S instanceof Error?this._passwordCapability.reject(S):this._passwordCapability.resolve({password:S})};try{c.onPassword(i,C.code)}catch(S){this._passwordCapability.reject(S)}}else this._passwordCapability.reject(new _util.PasswordException(C.message,C.code));return this._passwordCapability.promise}),t.on("DataLoaded",C=>{var i;(i=c.onProgress)==null||i.call(c,{loaded:C.length,total:C.length}),this.downloadInfoCapability.resolve(C)}),t.on("StartRenderPage",C=>{if(this.destroyed)return;b(this,_).get(C.pageIndex)._startRenderPage(C.transparency,C.cacheKey)}),t.on("commonobj",([C,i,S])=>{var H;if(!this.destroyed&&!this.commonObjs.has(C))switch(i){case"Font":const X=this._params;if("error"in S){const de=S.error;(0,_util.warn)(`Error during font loading: ${de}`),this.commonObjs.resolve(C,de);break}const Q=X.pdfBug&&((H=globalThis.FontInspector)!=null&&H.enabled)?(de,ie)=>globalThis.FontInspector.fontAdded(de,ie):null,ee=new _font_loader.FontFaceObject(S,{isEvalSupported:X.isEvalSupported,disableFontFace:X.disableFontFace,ignoreErrors:X.ignoreErrors,inspectFont:Q});this.fontLoader.bind(ee).catch(de=>t.sendWithPromise("FontFallback",{id:C})).finally(()=>{!X.fontExtraProperties&&ee.data&&(ee.data=null),this.commonObjs.resolve(C,ee)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(C,S);break;default:throw new Error(`Got unknown common object type ${i}`)}}),t.on("obj",([C,i,S,H])=>{var Q;if(this.destroyed)return;const X=b(this,_).get(i);if(!X.objs.has(C))switch(S){case"Image":if(X.objs.resolve(C,H),H){let ee;if(H.bitmap){const{width:de,height:ie}=H;ee=de*ie*4}else ee=((Q=H.data)==null?void 0:Q.length)||0;ee>_util.MAX_IMAGE_SIZE_TO_CACHE&&(X._maybeCleanupAfterRender=!0)}break;case"Pattern":X.objs.resolve(C,H);break;default:throw new Error(`Got unknown object type ${S}`)}}),t.on("DocProgress",C=>{var i;this.destroyed||(i=c.onProgress)==null||i.call(c,{loaded:C.loaded,total:C.total})}),t.on("FetchBuiltInCMap",C=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(C):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",C=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(C):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var t;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((t=this._fullReader)==null?void 0:t.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const c=t-1,C=b(this,p).get(c);if(C)return C;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:c}).then(S=>{if(this.destroyed)throw new Error("Transport destroyed");const H=new PDFPageProxy(c,S,this,this._params.pdfBug);return b(this,_).set(c,H),H});return b(this,p).set(c,i),i}getPageIndex(t){return typeof t!="object"||t===null||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,c){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:c})}getFieldObjects(){return re(this,u,pt).call(this,"GetFieldObjects")}hasJSActions(){return re(this,u,pt).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(t=>new _optional_content_config.OptionalContentConfig(t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",c=b(this,P).get(t);if(c)return c;const C=this.messageHandler.sendWithPromise(t,null).then(i=>{var S,H;return{info:i[0],metadata:i[1]?new _metadata.Metadata(i[1]):null,contentDispositionFilename:((S=this._fullReader)==null?void 0:S.filename)??null,contentLength:((H=this._fullReader)==null?void 0:H.contentLength)??null}});return b(this,P).set(t,C),C}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const c of b(this,_).values())if(!c.cleanup())throw new Error(`startCleanup: Page ${c.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),b(this,P).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:t,enableXfa:c}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t,enableXfa:c})}}P=new WeakMap,_=new WeakMap,p=new WeakMap,u=new WeakSet,pt=function(t,c=null){const C=b(this,P).get(t);if(C)return C;const i=this.messageHandler.sendWithPromise(t,c);return b(this,P).set(t,i),i};class PDFObjects{constructor(){Z(this,y);Z(this,f,Object.create(null))}get(t,c=null){if(c){const i=re(this,y,ft).call(this,t);return i.capability.promise.then(()=>c(i.data)),null}const C=b(this,f)[t];if(!(C!=null&&C.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${t}.`);return C.data}has(t){const c=b(this,f)[t];return(c==null?void 0:c.capability.settled)||!1}resolve(t,c=null){const C=re(this,y,ft).call(this,t);C.data=c,C.capability.resolve()}clear(){var t;for(const c in b(this,f)){const{data:C}=b(this,f)[c];(t=C==null?void 0:C.bitmap)==null||t.close()}me(this,f,Object.create(null))}}f=new WeakMap,y=new WeakSet,ft=function(t){const c=b(this,f)[t];return c||(b(this,f)[t]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(t){Z(this,h,null);me(this,h,t),this.onContinue=null}get promise(){return b(this,h).capability.promise}cancel(t=0){b(this,h).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=b(this,h).operatorList;if(!t)return!1;const{annotationCanvasMap:c}=b(this,h);return t.form||t.canvas&&(c==null?void 0:c.size)>0}}h=new WeakMap,exports.RenderTask=RenderTask;const n=class n{constructor({callback:t,params:c,objs:C,commonObjs:i,annotationCanvasMap:S,operatorList:H,pageIndex:X,canvasFactory:Q,filterFactory:ee,useRequestAnimationFrame:de=!1,pdfBug:ie=!1,pageColors:ue=null}){this.callback=t,this.params=c,this.objs=C,this.commonObjs=i,this.annotationCanvasMap=S,this.operatorListIdx=null,this.operatorList=H,this._pageIndex=X,this.canvasFactory=Q,this.filterFactory=ee,this._pdfBug=ie,this.pageColors=ue,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=de===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=c.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:c}){var X,Q;if(this.cancelled)return;if(this._canvas){if(b(n,e).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");b(n,e).add(this._canvas)}this._pdfBug&&((X=globalThis.StepperManager)!=null&&X.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:C,viewport:i,transform:S,background:H}=this.params;this.gfx=new _canvas.CanvasGraphics(C,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:c},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:S,viewport:i,transparency:t,background:H}),this.operatorListIdx=0,this.graphicsReady=!0,(Q=this.graphicsReadyCallback)==null||Q.call(this)}cancel(t=null,c=0){var C;this.running=!1,this.cancelled=!0,(C=this.gfx)==null||C.endDrawing(),this._canvas&&b(n,e).delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",c))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&b(n,e).delete(this._canvas),this.callback())))}};e=new WeakMap,Z(n,e,new WeakSet);let InternalRenderTask=n;const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build},(w,o,O)=>{var D,k,A,It,P;Object.defineProperty(o,"__esModule",{value:!0}),o.PrintAnnotationStorage=o.AnnotationStorage=void 0;var d=O(1),E=O(4),L=O(8);class q{constructor(){Z(this,A);Z(this,D,!1);Z(this,k,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(p,u){const a=b(this,k).get(p);return a===void 0?u:Object.assign(u,a)}getRawValue(p){return b(this,k).get(p)}remove(p){if(b(this,k).delete(p),b(this,k).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const u of b(this,k).values())if(u instanceof E.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(p,u){const a=b(this,k).get(p);let f=!1;if(a!==void 0)for(const[y,v]of Object.entries(u))a[y]!==v&&(f=!0,a[y]=v);else f=!0,b(this,k).set(p,u);f&&re(this,A,It).call(this),u instanceof E.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(u.constructor._type)}has(p){return b(this,k).has(p)}getAll(){return b(this,k).size>0?(0,d.objectFromMap)(b(this,k)):null}setAll(p){for(const[u,a]of Object.entries(p))this.setValue(u,a)}get size(){return b(this,k).size}resetModified(){b(this,D)&&(me(this,D,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new J(this)}get serializable(){if(b(this,k).size===0)return null;const p=new Map;for(const[u,a]of b(this,k)){const f=a instanceof E.AnnotationEditor?a.serialize():a;f&&p.set(u,f)}return p}static getHash(p){if(!p)return"";const u=new L.MurmurHash3_64;for(const[a,f]of p)u.update(`${a}:${JSON.stringify(f)}`);return u.hexdigest()}}D=new WeakMap,k=new WeakMap,A=new WeakSet,It=function(){b(this,D)||(me(this,D,!0),typeof this.onSetModified=="function"&&this.onSetModified())},o.AnnotationStorage=q;class J extends q{constructor(u){super();Z(this,P,null);me(this,P,structuredClone(u.serializable))}get print(){(0,d.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return b(this,P)}}P=new WeakMap,o.PrintAnnotationStorage=J},(w,o,O)=>{var q,J,D,k,A,M;Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationEditor=void 0;var d=O(5),E=O(1);const P=class P{constructor(p){Z(this,q,this.focusin.bind(this));Z(this,J,this.focusout.bind(this));Z(this,D,!1);Z(this,k,!1);Z(this,A,!1);Oe(this,"_uiManager",null);Z(this,M,P._zIndex++);this.constructor===P&&(0,E.unreachable)("Cannot initialize AnnotationEditor."),this.parent=p.parent,this.id=p.id,this.width=this.height=null,this.pageIndex=p.parent.pageIndex,this.name=p.name,this.div=null,this._uiManager=p.uiManager;const{rotation:u,rawDims:{pageWidth:a,pageHeight:f,pageX:y,pageY:v}}=this.parent.viewport;this.rotation=u,this.pageRotation=(360+u-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[a,f],this.pageTranslation=[y,v];const[h,e]=this.parentDimensions;this.x=p.x/h,this.y=p.y/e,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,E.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(p){this._uiManager.addCommands(p)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=b(this,M)}setParent(p){p!==null&&(this.pageIndex=p.pageIndex,this.pageDimensions=p.pageDimensions),this.parent=p}focusin(p){b(this,D)?me(this,D,!1):this.parent.setSelected(this)}focusout(p){var a;if(!this.isAttachedToDOM)return;const u=p.relatedTarget;u!=null&&u.closest(`#${this.id}`)||(p.preventDefault(),(a=this.parent)!=null&&a.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(p){const u=this.parent.div.getBoundingClientRect();this.startX=p.clientX-u.x,this.startY=p.clientY-u.y,p.dataTransfer.setData("text/plain",this.id),p.dataTransfer.effectAllowed="move"}setAt(p,u,a,f){const[y,v]=this.parentDimensions;[a,f]=this.screenToPageTranslation(a,f),this.x=(p+a)/y,this.y=(u+f)/v,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(p,u){const[a,f]=this.parentDimensions;[p,u]=this.screenToPageTranslation(p,u),this.x+=p/a,this.y+=u/f,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(p,u){switch(this.parentRotation){case 90:return[u,-p];case 180:return[-p,-u];case 270:return[-u,p];default:return[p,u]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:p}=this._uiManager.viewParameters,[u,a]=this.pageDimensions;return[u*p,a*p]}setDims(p,u){const[a,f]=this.parentDimensions;this.div.style.width=`${100*p/a}%`,this.div.style.height=`${100*u/f}%`}fixDims(){const{style:p}=this.div,{height:u,width:a}=p,f=a.endsWith("%"),y=u.endsWith("%");if(f&&y)return;const[v,h]=this.parentDimensions;f||(p.width=`${100*parseFloat(a)/v}%`),y||(p.height=`${100*parseFloat(u)/h}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",b(this,q)),this.div.addEventListener("focusout",b(this,J));const[p,u]=this.getInitialTranslation();return this.translate(p,u),(0,d.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(p){const{isMac:u}=E.FeatureTest.platform;if(p.button!==0||p.ctrlKey&&u){p.preventDefault();return}p.ctrlKey&&!u||p.shiftKey||p.metaKey&&u?this.parent.toggleSelected(this):this.parent.setSelected(this),me(this,D,!0)}getRect(p,u){const a=this.parentScale,[f,y]=this.pageDimensions,[v,h]=this.pageTranslation,e=p/a,n=u/a,r=this.x*f,t=this.y*y,c=this.width*f,C=this.height*y;switch(this.rotation){case 0:return[r+e+v,y-t-n-C+h,r+e+c+v,y-t-n+h];case 90:return[r+n+v,y-t+e+h,r+n+C+v,y-t+e+c+h];case 180:return[r-e-c+v,y-t+n+h,r-e+v,y-t+n+C+h];case 270:return[r-n-C+v,y-t-e-c+h,r-n+v,y-t-e+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(p,u){const[a,f,y,v]=p,h=y-a,e=v-f;switch(this.rotation){case 0:return[a,u-v,h,e];case 90:return[a,u-f,e,h];case 180:return[y,u-f,h,e];case 270:return[y,u-v,e,h];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){me(this,A,!0)}disableEditMode(){me(this,A,!1)}isInEditMode(){return b(this,A)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var p;(p=this.div)==null||p.addEventListener("focusin",b(this,q))}serialize(){(0,E.unreachable)("An editor must be serializable")}static deserialize(p,u,a){const f=new this.prototype.constructor({parent:u,id:u.getNextId(),uiManager:a});f.rotation=p.rotation;const[y,v]=f.pageDimensions,[h,e,n,r]=f.getRectInCurrentCoords(p.rect,v);return f.x=h/y,f.y=e/v,f.width=n/y,f.height=r/v,f}remove(){this.div.removeEventListener("focusin",b(this,q)),this.div.removeEventListener("focusout",b(this,J)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var p;(p=this.div)==null||p.classList.add("selectedEditor")}unselect(){var p;(p=this.div)==null||p.classList.remove("selectedEditor")}updateParams(p,u){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return b(this,k)}set isEditing(p){me(this,k,p),p?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};q=new WeakMap,J=new WeakMap,D=new WeakMap,k=new WeakMap,A=new WeakMap,M=new WeakMap,Oe(P,"_colorManager",new d.ColorManager),Oe(P,"_zIndex",1);let L=P;o.AnnotationEditor=L},(w,o,O)=>{var P,_,p,u,a,f,Lt,h,e,n,r,t,c,C,i,S,H,X,Q,ee,de,ie,ue,ge,Ee,_e,ye,z,m,g,T,Nt,G,mt,I,Bt,U,Ut,l,He,R,tt,V,Gt,Y,qt,oe,gt,ne,st,fe,xt;Object.defineProperty(o,"__esModule",{value:!0}),o.KeyboardManager=o.CommandManager=o.ColorManager=o.AnnotationEditorUIManager=void 0,o.bindEvents=L,o.opacityToHex=q;var d=O(1),E=O(6);function L(Re,K,be){for(const Ae of be)K.addEventListener(Ae,Re[Ae].bind(Re))}function q(Re){return Math.round(Math.min(255,Math.max(1,255*Re))).toString(16).padStart(2,"0")}class J{constructor(){Z(this,P,0)}getId(){return`${d.AnnotationEditorPrefix}${it(this,P)._++}`}}P=new WeakMap;class D{constructor(K=128){Z(this,_,[]);Z(this,p,!1);Z(this,u,void 0);Z(this,a,-1);me(this,u,K)}add({cmd:K,undo:be,mustExec:Ae,type:we=NaN,overwriteIfSameType:he=!1,keepUndo:F=!1}){if(Ae&&K(),b(this,p))return;const B={cmd:K,undo:be,type:we};if(b(this,a)===-1){b(this,_).length>0&&(b(this,_).length=0),me(this,a,0),b(this,_).push(B);return}if(he&&b(this,_)[b(this,a)].type===we){F&&(B.undo=b(this,_)[b(this,a)].undo),b(this,_)[b(this,a)]=B;return}const le=b(this,a)+1;le===b(this,u)?b(this,_).splice(0,1):(me(this,a,le),le<b(this,_).length&&b(this,_).splice(le)),b(this,_).push(B)}undo(){b(this,a)!==-1&&(me(this,p,!0),b(this,_)[b(this,a)].undo(),me(this,p,!1),me(this,a,b(this,a)-1))}redo(){b(this,a)<b(this,_).length-1&&(me(this,a,b(this,a)+1),me(this,p,!0),b(this,_)[b(this,a)].cmd(),me(this,p,!1))}hasSomethingToUndo(){return b(this,a)!==-1}hasSomethingToRedo(){return b(this,a)<b(this,_).length-1}destroy(){me(this,_,null)}}_=new WeakMap,p=new WeakMap,u=new WeakMap,a=new WeakMap,o.CommandManager=D;class k{constructor(K){Z(this,f);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:be}=d.FeatureTest.platform;for(const[Ae,we]of K)for(const he of Ae){const F=he.startsWith("mac+");be&&F?(this.callbacks.set(he.slice(4),we),this.allKeys.add(he.split("+").at(-1))):!be&&!F&&(this.callbacks.set(he,we),this.allKeys.add(he.split("+").at(-1)))}}exec(K,be){if(!this.allKeys.has(be.key))return;const Ae=this.callbacks.get(re(this,f,Lt).call(this,be));Ae&&(Ae.bind(K)(),be.stopPropagation(),be.preventDefault())}}f=new WeakSet,Lt=function(K){K.altKey&&this.buffer.push("alt"),K.ctrlKey&&this.buffer.push("ctrl"),K.metaKey&&this.buffer.push("meta"),K.shiftKey&&this.buffer.push("shift"),this.buffer.push(K.key);const be=this.buffer.join("+");return this.buffer.length=0,be},o.KeyboardManager=k;const v=class v{get _colors(){const K=new Map([["CanvasText",null],["Canvas",null]]);return(0,E.getColorValues)(K),(0,d.shadow)(this,"_colors",K)}convert(K){const be=(0,E.getRGB)(K);if(!window.matchMedia("(forced-colors: active)").matches)return be;for(const[Ae,we]of this._colors)if(we.every((he,F)=>he===be[F]))return v._colorsMapping.get(Ae);return be}getHexCode(K){const be=this._colors.get(K);return be?d.Util.makeHexColor(...be):K}};Oe(v,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let A=v;o.ColorManager=A;const ve=class ve{constructor(K,be,Ae){Z(this,T);Z(this,G);Z(this,I);Z(this,U);Z(this,l);Z(this,R);Z(this,V);Z(this,Y);Z(this,oe);Z(this,ne);Z(this,fe);Z(this,h,null);Z(this,e,new Map);Z(this,n,new Map);Z(this,r,null);Z(this,t,new D);Z(this,c,0);Z(this,C,null);Z(this,i,new Set);Z(this,S,null);Z(this,H,new J);Z(this,X,!1);Z(this,Q,d.AnnotationEditorType.NONE);Z(this,ee,new Set);Z(this,de,this.copy.bind(this));Z(this,ie,this.cut.bind(this));Z(this,ue,this.paste.bind(this));Z(this,ge,this.keydown.bind(this));Z(this,Ee,this.onEditingAction.bind(this));Z(this,_e,this.onPageChanging.bind(this));Z(this,ye,this.onScaleChanging.bind(this));Z(this,z,this.onRotationChanging.bind(this));Z(this,m,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Z(this,g,null);me(this,g,K),me(this,S,be),b(this,S)._on("editingaction",b(this,Ee)),b(this,S)._on("pagechanging",b(this,_e)),b(this,S)._on("scalechanging",b(this,ye)),b(this,S)._on("rotationchanging",b(this,z)),me(this,r,Ae),this.viewParameters={realScale:E.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){re(this,G,mt).call(this),b(this,S)._off("editingaction",b(this,Ee)),b(this,S)._off("pagechanging",b(this,_e)),b(this,S)._off("scalechanging",b(this,ye)),b(this,S)._off("rotationchanging",b(this,z));for(const K of b(this,n).values())K.destroy();b(this,n).clear(),b(this,e).clear(),b(this,i).clear(),me(this,h,null),b(this,ee).clear(),b(this,t).destroy()}onPageChanging({pageNumber:K}){me(this,c,K-1)}focusMainContainer(){b(this,g).focus()}addShouldRescale(K){b(this,i).add(K)}removeShouldRescale(K){b(this,i).delete(K)}onScaleChanging({scale:K}){this.commitOrRemove(),this.viewParameters.realScale=K*E.PixelsPerInch.PDF_TO_CSS_UNITS;for(const be of b(this,i))be.onScaleChanging()}onRotationChanging({pagesRotation:K}){this.commitOrRemove(),this.viewParameters.rotation=K}addToAnnotationStorage(K){!K.isEmpty()&&b(this,r)&&!b(this,r).has(K.id)&&b(this,r).setValue(K.id,K)}copy(K){if(K.preventDefault(),b(this,h)&&b(this,h).commitOrRemove(),!this.hasSelection)return;const be=[];for(const Ae of b(this,ee))Ae.isEmpty()||be.push(Ae.serialize());be.length!==0&&K.clipboardData.setData("application/pdfjs",JSON.stringify(be))}cut(K){this.copy(K),this.delete()}paste(K){K.preventDefault();let be=K.clipboardData.getData("application/pdfjs");if(!be)return;try{be=JSON.parse(be)}catch(we){(0,d.warn)(`paste: "${we.message}".`);return}if(!Array.isArray(be))return;this.unselectAll();const Ae=b(this,n).get(b(this,c));try{const we=[];for(const B of be){const le=Ae.deserialize(B);if(!le)return;we.push(le)}const he=()=>{for(const B of we)re(this,oe,gt).call(this,B);re(this,fe,xt).call(this,we)},F=()=>{for(const B of we)B.remove()};this.addCommands({cmd:he,undo:F,mustExec:!0})}catch(we){(0,d.warn)(`paste: "${we.message}".`)}}keydown(K){var be;(be=this.getActive())!=null&&be.shouldGetKeyboardEvents()||ve._keyboardManager.exec(this,K)}onEditingAction(K){["undo","redo","delete","selectAll"].includes(K.name)&&this[K.name]()}setEditingState(K){K?(re(this,T,Nt).call(this),re(this,I,Bt).call(this),re(this,l,He).call(this,{isEditing:b(this,Q)!==d.AnnotationEditorType.NONE,isEmpty:re(this,ne,st).call(this),hasSomethingToUndo:b(this,t).hasSomethingToUndo(),hasSomethingToRedo:b(this,t).hasSomethingToRedo(),hasSelectedEditor:!1})):(re(this,G,mt).call(this),re(this,U,Ut).call(this),re(this,l,He).call(this,{isEditing:!1}))}registerEditorTypes(K){if(!b(this,C)){me(this,C,K);for(const be of b(this,C))re(this,R,tt).call(this,be.defaultPropertiesToUpdate)}}getId(){return b(this,H).getId()}get currentLayer(){return b(this,n).get(b(this,c))}get currentPageIndex(){return b(this,c)}addLayer(K){b(this,n).set(K.pageIndex,K),b(this,X)?K.enable():K.disable()}removeLayer(K){b(this,n).delete(K.pageIndex)}updateMode(K){if(me(this,Q,K),K===d.AnnotationEditorType.NONE)this.setEditingState(!1),re(this,Y,qt).call(this);else{this.setEditingState(!0),re(this,V,Gt).call(this);for(const be of b(this,n).values())be.updateMode(K)}}updateToolbar(K){K!==b(this,Q)&&b(this,S).dispatch("switchannotationeditormode",{source:this,mode:K})}updateParams(K,be){if(b(this,C)){for(const Ae of b(this,ee))Ae.updateParams(K,be);for(const Ae of b(this,C))Ae.updateDefaultParams(K,be)}}getEditors(K){const be=[];for(const Ae of b(this,e).values())Ae.pageIndex===K&&be.push(Ae);return be}getEditor(K){return b(this,e).get(K)}addEditor(K){b(this,e).set(K.id,K)}removeEditor(K){var be;b(this,e).delete(K.id),this.unselect(K),(be=b(this,r))==null||be.remove(K.id)}setActiveEditor(K){b(this,h)!==K&&(me(this,h,K),K&&re(this,R,tt).call(this,K.propertiesToUpdate))}toggleSelected(K){if(b(this,ee).has(K)){b(this,ee).delete(K),K.unselect(),re(this,l,He).call(this,{hasSelectedEditor:this.hasSelection});return}b(this,ee).add(K),K.select(),re(this,R,tt).call(this,K.propertiesToUpdate),re(this,l,He).call(this,{hasSelectedEditor:!0})}setSelected(K){for(const be of b(this,ee))be!==K&&be.unselect();b(this,ee).clear(),b(this,ee).add(K),K.select(),re(this,R,tt).call(this,K.propertiesToUpdate),re(this,l,He).call(this,{hasSelectedEditor:!0})}isSelected(K){return b(this,ee).has(K)}unselect(K){K.unselect(),b(this,ee).delete(K),re(this,l,He).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return b(this,ee).size!==0}undo(){b(this,t).undo(),re(this,l,He).call(this,{hasSomethingToUndo:b(this,t).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:re(this,ne,st).call(this)})}redo(){b(this,t).redo(),re(this,l,He).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:b(this,t).hasSomethingToRedo(),isEmpty:re(this,ne,st).call(this)})}addCommands(K){b(this,t).add(K),re(this,l,He).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:re(this,ne,st).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const K=[...b(this,ee)],be=()=>{for(const we of K)we.remove()},Ae=()=>{for(const we of K)re(this,oe,gt).call(this,we)};this.addCommands({cmd:be,undo:Ae,mustExec:!0})}commitOrRemove(){var K;(K=b(this,h))==null||K.commitOrRemove()}selectAll(){for(const K of b(this,ee))K.commit();re(this,fe,xt).call(this,b(this,e).values())}unselectAll(){if(b(this,h)){b(this,h).commitOrRemove();return}if(b(this,ee).size!==0){for(const K of b(this,ee))K.unselect();b(this,ee).clear(),re(this,l,He).call(this,{hasSelectedEditor:!1})}}isActive(K){return b(this,h)===K}getActive(){return b(this,h)}getMode(){return b(this,Q)}};h=new WeakMap,e=new WeakMap,n=new WeakMap,r=new WeakMap,t=new WeakMap,c=new WeakMap,C=new WeakMap,i=new WeakMap,S=new WeakMap,H=new WeakMap,X=new WeakMap,Q=new WeakMap,ee=new WeakMap,de=new WeakMap,ie=new WeakMap,ue=new WeakMap,ge=new WeakMap,Ee=new WeakMap,_e=new WeakMap,ye=new WeakMap,z=new WeakMap,m=new WeakMap,g=new WeakMap,T=new WeakSet,Nt=function(){b(this,g).addEventListener("keydown",b(this,ge))},G=new WeakSet,mt=function(){b(this,g).removeEventListener("keydown",b(this,ge))},I=new WeakSet,Bt=function(){document.addEventListener("copy",b(this,de)),document.addEventListener("cut",b(this,ie)),document.addEventListener("paste",b(this,ue))},U=new WeakSet,Ut=function(){document.removeEventListener("copy",b(this,de)),document.removeEventListener("cut",b(this,ie)),document.removeEventListener("paste",b(this,ue))},l=new WeakSet,He=function(K){Object.entries(K).some(([Ae,we])=>b(this,m)[Ae]!==we)&&b(this,S).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(b(this,m),K)})},R=new WeakSet,tt=function(K){b(this,S).dispatch("annotationeditorparamschanged",{source:this,details:K})},V=new WeakSet,Gt=function(){if(!b(this,X)){me(this,X,!0);for(const K of b(this,n).values())K.enable()}},Y=new WeakSet,qt=function(){if(this.unselectAll(),b(this,X)){me(this,X,!1);for(const K of b(this,n).values())K.disable()}},oe=new WeakSet,gt=function(K){const be=b(this,n).get(K.pageIndex);be?be.addOrRebuild(K):this.addEditor(K)},ne=new WeakSet,st=function(){if(b(this,e).size===0)return!0;if(b(this,e).size===1)for(const K of b(this,e).values())return K.isEmpty();return!1},fe=new WeakSet,xt=function(K){b(this,ee).clear();for(const be of K)be.isEmpty()||(b(this,ee).add(be),be.select());re(this,l,He).call(this,{hasSelectedEditor:!0})},Oe(ve,"_keyboardManager",new k([[["ctrl+a","mac+meta+a"],ve.prototype.selectAll],[["ctrl+z","mac+meta+z"],ve.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],ve.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],ve.prototype.delete],[["Escape","mac+Escape"],ve.prototype.unselectAll]]));let M=ve;o.AnnotationEditorUIManager=M},(w,o,O)=>{var de,ie,ue,ge,Ee,_e,ye,z,m,Qe,T,Ke,G,ze;Object.defineProperty(o,"__esModule",{value:!0}),o.StatTimer=o.RenderingCancelledException=o.PixelsPerInch=o.PageViewport=o.PDFDateString=o.DOMStandardFontDataFactory=o.DOMSVGFactory=o.DOMFilterFactory=o.DOMCanvasFactory=o.DOMCMapReaderFactory=o.AnnotationPrefix=void 0,o.deprecated=r,o.getColorValues=S,o.getCurrentTransform=H,o.getCurrentTransformInverse=X,o.getFilenameFromUrl=y,o.getPdfFilenameFromUrl=v,o.getRGB=i,o.getXfaPageViewport=C,o.isDataScheme=a,o.isPdfFile=f,o.isValidFetchUrl=e,o.loadScript=n,o.setLayerDimensions=Q;var d=O(7),E=O(1);const L="http://www.w3.org/2000/svg",q="pdfjs_internal_id_";o.AnnotationPrefix=q;const ee=class ee{};Oe(ee,"CSS",96),Oe(ee,"PDF",72),Oe(ee,"PDF_TO_CSS_UNITS",ee.CSS/ee.PDF);let J=ee;o.PixelsPerInch=J;class D extends d.BaseFilterFactory{constructor({docId:U,ownerDocument:s=globalThis.document}={}){super();Z(this,m);Z(this,T);Z(this,G);Z(this,de,void 0);Z(this,ie,void 0);Z(this,ue,void 0);Z(this,ge,void 0);Z(this,Ee,void 0);Z(this,_e,void 0);Z(this,ye,void 0);Z(this,z,0);me(this,ue,U),me(this,ge,s)}addFilter(U){if(!U)return"none";let s=b(this,m,Qe).get(U);if(s)return s;let l,x,R,j;if(U.length===1){const oe=U[0],te=new Array(256);for(let ne=0;ne<256;ne++)te[ne]=oe[ne]/255;j=l=x=R=te.join(",")}else{const[oe,te,ne]=U,pe=new Array(256),fe=new Array(256),Se=new Array(256);for(let ve=0;ve<256;ve++)pe[ve]=oe[ve]/255,fe[ve]=te[ve]/255,Se[ve]=ne[ve]/255;l=pe.join(","),x=fe.join(","),R=Se.join(","),j=`${l}${x}${R}`}if(s=b(this,m,Qe).get(j),s)return b(this,m,Qe).set(U,s),s;const V=`g_${b(this,ue)}_transfer_map_${it(this,z)._++}`,se=`url(#${V})`;b(this,m,Qe).set(U,se),b(this,m,Qe).set(j,se);const Y=b(this,ge).createElementNS(L,"filter",L);Y.setAttribute("id",V),Y.setAttribute("color-interpolation-filters","sRGB");const ae=b(this,ge).createElementNS(L,"feComponentTransfer");return Y.append(ae),re(this,G,ze).call(this,ae,"feFuncR",l),re(this,G,ze).call(this,ae,"feFuncG",x),re(this,G,ze).call(this,ae,"feFuncB",R),b(this,T,Ke).append(Y),se}addHCMFilter(U,s){var ne;const l=`${U}-${s}`;if(b(this,_e)===l)return b(this,ye);if(me(this,_e,l),me(this,ye,"none"),(ne=b(this,Ee))==null||ne.remove(),!U||!s)return b(this,ye);b(this,T,Ke).style.color=U,U=getComputedStyle(b(this,T,Ke)).getPropertyValue("color");const x=i(U);U=E.Util.makeHexColor(...x),b(this,T,Ke).style.color=s,s=getComputedStyle(b(this,T,Ke)).getPropertyValue("color");const R=i(s);if(s=E.Util.makeHexColor(...R),b(this,T,Ke).style.color="",U==="#000000"&&s==="#ffffff"||U===s)return b(this,ye);const j=new Array(256);for(let pe=0;pe<=255;pe++){const fe=pe/255;j[pe]=fe<=.03928?fe/12.92:((fe+.055)/1.055)**2.4}const V=j.join(","),se=`g_${b(this,ue)}_hcm_filter`,Y=me(this,Ee,b(this,ge).createElementNS(L,"filter",L));Y.setAttribute("id",se),Y.setAttribute("color-interpolation-filters","sRGB");let ae=b(this,ge).createElementNS(L,"feComponentTransfer");Y.append(ae),re(this,G,ze).call(this,ae,"feFuncR",V),re(this,G,ze).call(this,ae,"feFuncG",V),re(this,G,ze).call(this,ae,"feFuncB",V);const oe=b(this,ge).createElementNS(L,"feColorMatrix");oe.setAttribute("type","matrix"),oe.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Y.append(oe),ae=b(this,ge).createElementNS(L,"feComponentTransfer"),Y.append(ae);const te=(pe,fe)=>{const Se=x[pe]/255,ve=R[pe]/255,Re=new Array(fe+1);for(let K=0;K<=fe;K++)Re[K]=Se+K/fe*(ve-Se);return Re.join(",")};return re(this,G,ze).call(this,ae,"feFuncR",te(0,5)),re(this,G,ze).call(this,ae,"feFuncG",te(1,5)),re(this,G,ze).call(this,ae,"feFuncB",te(2,5)),b(this,T,Ke).append(Y),me(this,ye,`url(#${se})`),b(this,ye)}destroy(U=!1){U&&b(this,ye)||(b(this,ie)&&(b(this,ie).parentNode.parentNode.remove(),me(this,ie,null)),b(this,de)&&(b(this,de).clear(),me(this,de,null)),me(this,z,0))}}de=new WeakMap,ie=new WeakMap,ue=new WeakMap,ge=new WeakMap,Ee=new WeakMap,_e=new WeakMap,ye=new WeakMap,z=new WeakMap,m=new WeakSet,Qe=function(){return b(this,de)||me(this,de,new Map)},T=new WeakSet,Ke=function(){if(!b(this,ie)){const U=b(this,ge).createElement("div"),{style:s}=U;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const l=b(this,ge).createElementNS(L,"svg");l.setAttribute("width",0),l.setAttribute("height",0),me(this,ie,b(this,ge).createElementNS(L,"defs")),U.append(l),l.append(b(this,ie)),b(this,ge).body.append(U)}return b(this,ie)},G=new WeakSet,ze=function(U,s,l){const x=b(this,ge).createElementNS(L,s);x.setAttribute("type","discrete"),x.setAttribute("tableValues",l),U.append(x)},o.DOMFilterFactory=D;class k extends d.BaseCanvasFactory{constructor({ownerDocument:N=globalThis.document}={}){super(),this._document=N}_createCanvas(N,U){const s=this._document.createElement("canvas");return s.width=N,s.height=U,s}}o.DOMCanvasFactory=k;async function A(I,N=!1){if(e(I,document.baseURI)){const U=await fetch(I);if(!U.ok)throw new Error(U.statusText);return N?new Uint8Array(await U.arrayBuffer()):(0,E.stringToBytes)(await U.text())}return new Promise((U,s)=>{const l=new XMLHttpRequest;l.open("GET",I,!0),N&&(l.responseType="arraybuffer"),l.onreadystatechange=()=>{if(l.readyState===XMLHttpRequest.DONE){if(l.status===200||l.status===0){let x;if(N&&l.response?x=new Uint8Array(l.response):!N&&l.responseText&&(x=(0,E.stringToBytes)(l.responseText)),x){U(x);return}}s(new Error(l.statusText))}},l.send(null)})}class M extends d.BaseCMapReaderFactory{_fetchData(N,U){return A(N,this.isCompressed).then(s=>({cMapData:s,compressionType:U}))}}o.DOMCMapReaderFactory=M;class P extends d.BaseStandardFontDataFactory{_fetchData(N){return A(N,!0)}}o.DOMStandardFontDataFactory=P;class _ extends d.BaseSVGFactory{_createSVG(N){return document.createElementNS(L,N)}}o.DOMSVGFactory=_;class p{constructor({viewBox:N,scale:U,rotation:s,offsetX:l=0,offsetY:x=0,dontFlip:R=!1}){this.viewBox=N,this.scale=U,this.rotation=s,this.offsetX=l,this.offsetY=x;const j=(N[2]+N[0])/2,V=(N[3]+N[1])/2;let se,Y,ae,oe;switch(s%=360,s<0&&(s+=360),s){case 180:se=-1,Y=0,ae=0,oe=1;break;case 90:se=0,Y=1,ae=1,oe=0;break;case 270:se=0,Y=-1,ae=-1,oe=0;break;case 0:se=1,Y=0,ae=0,oe=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}R&&(ae=-ae,oe=-oe);let te,ne,pe,fe;se===0?(te=Math.abs(V-N[1])*U+l,ne=Math.abs(j-N[0])*U+x,pe=(N[3]-N[1])*U,fe=(N[2]-N[0])*U):(te=Math.abs(j-N[0])*U+l,ne=Math.abs(V-N[1])*U+x,pe=(N[2]-N[0])*U,fe=(N[3]-N[1])*U),this.transform=[se*U,Y*U,ae*U,oe*U,te-se*U*j-ae*U*V,ne-Y*U*j-oe*U*V],this.width=pe,this.height=fe}get rawDims(){const{viewBox:N}=this;return(0,E.shadow)(this,"rawDims",{pageWidth:N[2]-N[0],pageHeight:N[3]-N[1],pageX:N[0],pageY:N[1]})}clone({scale:N=this.scale,rotation:U=this.rotation,offsetX:s=this.offsetX,offsetY:l=this.offsetY,dontFlip:x=!1}={}){return new p({viewBox:this.viewBox.slice(),scale:N,rotation:U,offsetX:s,offsetY:l,dontFlip:x})}convertToViewportPoint(N,U){return E.Util.applyTransform([N,U],this.transform)}convertToViewportRectangle(N){const U=E.Util.applyTransform([N[0],N[1]],this.transform),s=E.Util.applyTransform([N[2],N[3]],this.transform);return[U[0],U[1],s[0],s[1]]}convertToPdfPoint(N,U){return E.Util.applyInverseTransform([N,U],this.transform)}}o.PageViewport=p;class u extends E.BaseException{constructor(N,U,s=0){super(N,"RenderingCancelledException"),this.type=U,this.extraDelay=s}}o.RenderingCancelledException=u;function a(I){const N=I.length;let U=0;for(;U<N&&I[U].trim()==="";)U++;return I.substring(U,U+5).toLowerCase()==="data:"}function f(I){return typeof I=="string"&&/\.pdf$/i.test(I)}function y(I,N=!1){return N||([I]=I.split(/[#?]/,1)),I.substring(I.lastIndexOf("/")+1)}function v(I,N="document.pdf"){if(typeof I!="string")return N;if(a(I))return(0,E.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),N;const U=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,l=U.exec(I);let x=s.exec(l[1])||s.exec(l[2])||s.exec(l[3]);if(x&&(x=x[0],x.includes("%")))try{x=s.exec(decodeURIComponent(x))[0]}catch{}return x||N}class h{constructor(){Oe(this,"started",Object.create(null));Oe(this,"times",[])}time(N){N in this.started&&(0,E.warn)(`Timer is already running for ${N}`),this.started[N]=Date.now()}timeEnd(N){N in this.started||(0,E.warn)(`Timer has not been started for ${N}`),this.times.push({name:N,start:this.started[N],end:Date.now()}),delete this.started[N]}toString(){const N=[];let U=0;for(const{name:s}of this.times)U=Math.max(s.length,U);for(const{name:s,start:l,end:x}of this.times)N.push(`${s.padEnd(U)} ${x-l}ms
`);return N.join("")}}o.StatTimer=h;function e(I,N){try{const{protocol:U}=N?new URL(I,N):new URL(I);return U==="http:"||U==="https:"}catch{return!1}}function n(I,N=!1){return new Promise((U,s)=>{const l=document.createElement("script");l.src=I,l.onload=function(x){N&&l.remove(),U(x)},l.onerror=function(){s(new Error(`Cannot load script at: ${l.src}`))},(document.head||document.documentElement).append(l)})}function r(I){console.log("Deprecated API usage: "+I)}let t;class c{static toDateObject(N){if(!N||typeof N!="string")return null;t||(t=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const U=t.exec(N);if(!U)return null;const s=parseInt(U[1],10);let l=parseInt(U[2],10);l=l>=1&&l<=12?l-1:0;let x=parseInt(U[3],10);x=x>=1&&x<=31?x:1;let R=parseInt(U[4],10);R=R>=0&&R<=23?R:0;let j=parseInt(U[5],10);j=j>=0&&j<=59?j:0;let V=parseInt(U[6],10);V=V>=0&&V<=59?V:0;const se=U[7]||"Z";let Y=parseInt(U[8],10);Y=Y>=0&&Y<=23?Y:0;let ae=parseInt(U[9],10)||0;return ae=ae>=0&&ae<=59?ae:0,se==="-"?(R+=Y,j+=ae):se==="+"&&(R-=Y,j-=ae),new Date(Date.UTC(s,l,x,R,j,V))}}o.PDFDateString=c;function C(I,{scale:N=1,rotation:U=0}){const{width:s,height:l}=I.attributes.style,x=[0,0,parseInt(s),parseInt(l)];return new p({viewBox:x,scale:N,rotation:U})}function i(I){if(I.startsWith("#")){const N=parseInt(I.slice(1),16);return[(N&16711680)>>16,(N&65280)>>8,N&255]}return I.startsWith("rgb(")?I.slice(4,-1).split(",").map(N=>parseInt(N)):I.startsWith("rgba(")?I.slice(5,-1).split(",").map(N=>parseInt(N)).slice(0,3):((0,E.warn)(`Not a valid color format: "${I}"`),[0,0,0])}function S(I){const N=document.createElement("span");N.style.visibility="hidden",document.body.append(N);for(const U of I.keys()){N.style.color=U;const s=window.getComputedStyle(N).color;I.set(U,i(s))}N.remove()}function H(I){const{a:N,b:U,c:s,d:l,e:x,f:R}=I.getTransform();return[N,U,s,l,x,R]}function X(I){const{a:N,b:U,c:s,d:l,e:x,f:R}=I.getTransform().invertSelf();return[N,U,s,l,x,R]}function Q(I,N,U=!1,s=!0){if(N instanceof p){const{pageWidth:l,pageHeight:x}=N.rawDims,{style:R}=I,j=`calc(var(--scale-factor) * ${l}px)`,V=`calc(var(--scale-factor) * ${x}px)`;!U||N.rotation%180===0?(R.width=j,R.height=V):(R.width=V,R.height=j)}s&&I.setAttribute("data-main-rotation",N.rotation)}},(w,o,O)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BaseStandardFontDataFactory=o.BaseSVGFactory=o.BaseFilterFactory=o.BaseCanvasFactory=o.BaseCMapReaderFactory=void 0;var d=O(1);class E{constructor(){this.constructor===E&&(0,d.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(A){return"none"}addHCMFilter(A,M){return"none"}destroy(A=!1){}}o.BaseFilterFactory=E;class L{constructor(){this.constructor===L&&(0,d.unreachable)("Cannot initialize BaseCanvasFactory.")}create(A,M){if(A<=0||M<=0)throw new Error("Invalid canvas size");const P=this._createCanvas(A,M);return{canvas:P,context:P.getContext("2d")}}reset(A,M,P){if(!A.canvas)throw new Error("Canvas is not specified");if(M<=0||P<=0)throw new Error("Invalid canvas size");A.canvas.width=M,A.canvas.height=P}destroy(A){if(!A.canvas)throw new Error("Canvas is not specified");A.canvas.width=0,A.canvas.height=0,A.canvas=null,A.context=null}_createCanvas(A,M){(0,d.unreachable)("Abstract method `_createCanvas` called.")}}o.BaseCanvasFactory=L;class q{constructor({baseUrl:A=null,isCompressed:M=!0}){this.constructor===q&&(0,d.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=A,this.isCompressed=M}async fetch({name:A}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!A)throw new Error("CMap name must be specified.");const M=this.baseUrl+A+(this.isCompressed?".bcmap":""),P=this.isCompressed?d.CMapCompressionType.BINARY:d.CMapCompressionType.NONE;return this._fetchData(M,P).catch(_=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${M}`)})}_fetchData(A,M){(0,d.unreachable)("Abstract method `_fetchData` called.")}}o.BaseCMapReaderFactory=q;class J{constructor({baseUrl:A=null}){this.constructor===J&&(0,d.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=A}async fetch({filename:A}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!A)throw new Error("Font filename must be specified.");const M=`${this.baseUrl}${A}`;return this._fetchData(M).catch(P=>{throw new Error(`Unable to load font data at: ${M}`)})}_fetchData(A){(0,d.unreachable)("Abstract method `_fetchData` called.")}}o.BaseStandardFontDataFactory=J;class D{constructor(){this.constructor===D&&(0,d.unreachable)("Cannot initialize BaseSVGFactory.")}create(A,M,P=!1){if(A<=0||M<=0)throw new Error("Invalid SVG dimensions");const _=this._createSVG("svg:svg");return _.setAttribute("version","1.1"),P||(_.setAttribute("width",`${A}px`),_.setAttribute("height",`${M}px`)),_.setAttribute("preserveAspectRatio","none"),_.setAttribute("viewBox",`0 0 ${A} ${M}`),_}createElement(A){if(typeof A!="string")throw new Error("Invalid SVG element type");return this._createSVG(A)}_createSVG(A){(0,d.unreachable)("Abstract method `_createSVG` called.")}}o.BaseSVGFactory=D},(w,o,O)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MurmurHash3_64=void 0;var d=O(1);const E=3285377520,L=4294901760,q=65535;class J{constructor(k){this.h1=k?k&4294967295:E,this.h2=k?k&4294967295:E}update(k){let A,M;if(typeof k=="string"){A=new Uint8Array(k.length*2),M=0;for(let r=0,t=k.length;r<t;r++){const c=k.charCodeAt(r);c<=255?A[M++]=c:(A[M++]=c>>>8,A[M++]=c&255)}}else if((0,d.isArrayBuffer)(k))A=k.slice(),M=A.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const P=M>>2,_=M-P*4,p=new Uint32Array(A.buffer,0,P);let u=0,a=0,f=this.h1,y=this.h2;const v=3432918353,h=461845907,e=v&q,n=h&q;for(let r=0;r<P;r++)r&1?(u=p[r],u=u*v&L|u*e&q,u=u<<15|u>>>17,u=u*h&L|u*n&q,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(a=p[r],a=a*v&L|a*e&q,a=a<<15|a>>>17,a=a*h&L|a*n&q,y^=a,y=y<<13|y>>>19,y=y*5+3864292196);switch(u=0,_){case 3:u^=A[P*4+2]<<16;case 2:u^=A[P*4+1]<<8;case 1:u^=A[P*4],u=u*v&L|u*e&q,u=u<<15|u>>>17,u=u*h&L|u*n&q,P&1?f^=u:y^=u}this.h1=f,this.h2=y}hexdigest(){let k=this.h1,A=this.h2;return k^=A>>>1,k=k*3981806797&L|k*36045&q,A=A*4283543511&L|((A<<16|k>>>16)*2950163797&L)>>>16,k^=A>>>1,k=k*444984403&L|k*60499&q,A=A*3301882366&L|((A<<16|k>>>16)*3120437893&L)>>>16,k^=A>>>1,(k>>>0).toString(16).padStart(8,"0")+(A>>>0).toString(16).padStart(8,"0")}}o.MurmurHash3_64=J},(w,o,O)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FontLoader=o.FontFaceObject=void 0;var d=O(1),E=O(10);class L{constructor({ownerDocument:D=globalThis.document,styleElement:k=null}){this._document=D,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(D){this.nativeFontFaces.push(D),this._document.fonts.add(D)}insertRule(D){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const k=this.styleElement.sheet;k.insertRule(D,k.cssRules.length)}clear(){for(const D of this.nativeFontFaces)this._document.fonts.delete(D);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(D){if(D.attached||D.missingFile)return;if(D.attached=!0,this.isFontLoadingAPISupported){const A=D.createNativeFontFace();if(A){this.addNativeFontFace(A);try{await A.loaded}catch(M){throw(0,d.warn)(`Failed to load font '${A.family}': '${M}'.`),D.disableFontFace=!0,M}}return}const k=D.createFontFaceRule();if(k){if(this.insertRule(k),this.isSyncFontLoadingSupported)return;await new Promise(A=>{const M=this._queueLoadingCallback(A);this._prepareFontLoadEvent(D,M)})}}get isFontLoadingAPISupported(){var k;const D=!!((k=this._document)!=null&&k.fonts);return(0,d.shadow)(this,"isFontLoadingAPISupported",D)}get isSyncFontLoadingSupported(){let D=!1;return(E.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(D=!0),(0,d.shadow)(this,"isSyncFontLoadingSupported",D)}_queueLoadingCallback(D){function k(){for((0,d.assert)(!M.done,"completeRequest() cannot be called twice."),M.done=!0;A.length>0&&A[0].done;){const P=A.shift();setTimeout(P.callback,0)}}const{loadingRequests:A}=this,M={done:!1,complete:k,callback:D};return A.push(M),M}get _loadTestFont(){const D=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,d.shadow)(this,"_loadTestFont",D)}_prepareFontLoadEvent(D,k){function A(i,S){return i.charCodeAt(S)<<24|i.charCodeAt(S+1)<<16|i.charCodeAt(S+2)<<8|i.charCodeAt(S+3)&255}function M(i,S,H,X){const Q=i.substring(0,S),ee=i.substring(S+H);return Q+X+ee}let P,_;const p=this._document.createElement("canvas");p.width=1,p.height=1;const u=p.getContext("2d");let a=0;function f(i,S){if(++a>30){(0,d.warn)("Load test font never loaded."),S();return}if(u.font="30px "+i,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){S();return}setTimeout(f.bind(null,i,S))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=M(v,976,y.length,y);const e=16,n=1482184792;let r=A(v,e);for(P=0,_=y.length-3;P<_;P+=4)r=r-n+A(y,P)|0;P<y.length&&(r=r-n+A(y+"XXX",P)|0),v=M(v,e,4,(0,d.string32)(r));const t=`url(data:font/opentype;base64,${btoa(v)});`,c=`@font-face {font-family:"${y}";src:${t}}`;this.insertRule(c);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const i of[D.loadedName,y]){const S=this._document.createElement("span");S.textContent="Hi",S.style.fontFamily=i,C.append(S)}this._document.body.append(C),f(y,()=>{C.remove(),k.complete()})}}o.FontLoader=L;class q{constructor(D,{isEvalSupported:k=!0,disableFontFace:A=!1,ignoreErrors:M=!1,inspectFont:P=null}){this.compiledGlyphs=Object.create(null);for(const _ in D)this[_]=D[_];this.isEvalSupported=k!==!1,this.disableFontFace=A===!0,this.ignoreErrors=M===!0,this._inspectFont=P}createNativeFontFace(){var k;if(!this.data||this.disableFontFace)return null;let D;if(!this.cssFontInfo)D=new FontFace(this.loadedName,this.data,{});else{const A={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(A.style=`oblique ${this.cssFontInfo.italicAngle}deg`),D=new FontFace(this.cssFontInfo.fontFamily,this.data,A)}return(k=this._inspectFont)==null||k.call(this,this),D}createFontFaceRule(){var M;if(!this.data||this.disableFontFace)return null;const D=(0,d.bytesToString)(this.data),k=`url(data:${this.mimetype};base64,${btoa(D)});`;let A;if(!this.cssFontInfo)A=`@font-face {font-family:"${this.loadedName}";src:${k}}`;else{let P=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(P+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),A=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${P}src:${k}}`}return(M=this._inspectFont)==null||M.call(this,this,k),A}getPathGenerator(D,k){if(this.compiledGlyphs[k]!==void 0)return this.compiledGlyphs[k];let A;try{A=D.get(this.loadedName+"_path_"+k)}catch(M){if(!this.ignoreErrors)throw M;return(0,d.warn)(`getPathGenerator - ignoring character: "${M}".`),this.compiledGlyphs[k]=function(P,_){}}if(this.isEvalSupported&&d.FeatureTest.isEvalSupported){const M=[];for(const P of A){const _=P.args!==void 0?P.args.join(","):"";M.push("c.",P.cmd,"(",_,`);
`)}return this.compiledGlyphs[k]=new Function("c","size",M.join(""))}return this.compiledGlyphs[k]=function(M,P){for(const _ of A)_.cmd==="scale"&&(_.args=[P,-P]),M[_.cmd].apply(M,_.args)}}}o.FontFaceObject=q},(w,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isNodeJS=void 0;const O=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");o.isNodeJS=O},(w,o,O)=>{var ue,bt,Ee,yt;Object.defineProperty(o,"__esModule",{value:!0}),o.CanvasGraphics=void 0;var d=O(1),E=O(6),L=O(12),q=O(13),J=O(10);const D=16,k=100,A=4096,M=15,P=10,_=1e3,p=16;function u(z,m){if(z._removeMirroring)throw new Error("Context is already forwarding operations.");z.__originalSave=z.save,z.__originalRestore=z.restore,z.__originalRotate=z.rotate,z.__originalScale=z.scale,z.__originalTranslate=z.translate,z.__originalTransform=z.transform,z.__originalSetTransform=z.setTransform,z.__originalResetTransform=z.resetTransform,z.__originalClip=z.clip,z.__originalMoveTo=z.moveTo,z.__originalLineTo=z.lineTo,z.__originalBezierCurveTo=z.bezierCurveTo,z.__originalRect=z.rect,z.__originalClosePath=z.closePath,z.__originalBeginPath=z.beginPath,z._removeMirroring=()=>{z.save=z.__originalSave,z.restore=z.__originalRestore,z.rotate=z.__originalRotate,z.scale=z.__originalScale,z.translate=z.__originalTranslate,z.transform=z.__originalTransform,z.setTransform=z.__originalSetTransform,z.resetTransform=z.__originalResetTransform,z.clip=z.__originalClip,z.moveTo=z.__originalMoveTo,z.lineTo=z.__originalLineTo,z.bezierCurveTo=z.__originalBezierCurveTo,z.rect=z.__originalRect,z.closePath=z.__originalClosePath,z.beginPath=z.__originalBeginPath,delete z._removeMirroring},z.save=function(){m.save(),this.__originalSave()},z.restore=function(){m.restore(),this.__originalRestore()},z.translate=function(T,W){m.translate(T,W),this.__originalTranslate(T,W)},z.scale=function(T,W){m.scale(T,W),this.__originalScale(T,W)},z.transform=function(T,W,G,$,I,N){m.transform(T,W,G,$,I,N),this.__originalTransform(T,W,G,$,I,N)},z.setTransform=function(T,W,G,$,I,N){m.setTransform(T,W,G,$,I,N),this.__originalSetTransform(T,W,G,$,I,N)},z.resetTransform=function(){m.resetTransform(),this.__originalResetTransform()},z.rotate=function(T){m.rotate(T),this.__originalRotate(T)},z.clip=function(T){m.clip(T),this.__originalClip(T)},z.moveTo=function(g,T){m.moveTo(g,T),this.__originalMoveTo(g,T)},z.lineTo=function(g,T){m.lineTo(g,T),this.__originalLineTo(g,T)},z.bezierCurveTo=function(g,T,W,G,$,I){m.bezierCurveTo(g,T,W,G,$,I),this.__originalBezierCurveTo(g,T,W,G,$,I)},z.rect=function(g,T,W,G){m.rect(g,T,W,G),this.__originalRect(g,T,W,G)},z.closePath=function(){m.closePath(),this.__originalClosePath()},z.beginPath=function(){m.beginPath(),this.__originalBeginPath()}}class a{constructor(m){this.canvasFactory=m,this.cache=Object.create(null)}getCanvas(m,g,T){let W;return this.cache[m]!==void 0?(W=this.cache[m],this.canvasFactory.reset(W,g,T)):(W=this.canvasFactory.create(g,T),this.cache[m]=W),W}delete(m){delete this.cache[m]}clear(){for(const m in this.cache){const g=this.cache[m];this.canvasFactory.destroy(g),delete this.cache[m]}}}function f(z,m,g,T,W,G,$,I,N,U){const[s,l,x,R,j,V]=(0,E.getCurrentTransform)(z);if(l===0&&x===0){const ae=$*s+j,oe=Math.round(ae),te=I*R+V,ne=Math.round(te),pe=($+N)*s+j,fe=Math.abs(Math.round(pe)-oe)||1,Se=(I+U)*R+V,ve=Math.abs(Math.round(Se)-ne)||1;return z.setTransform(Math.sign(s),0,0,Math.sign(R),oe,ne),z.drawImage(m,g,T,W,G,0,0,fe,ve),z.setTransform(s,l,x,R,j,V),[fe,ve]}if(s===0&&R===0){const ae=I*x+j,oe=Math.round(ae),te=$*l+V,ne=Math.round(te),pe=(I+U)*x+j,fe=Math.abs(Math.round(pe)-oe)||1,Se=($+N)*l+V,ve=Math.abs(Math.round(Se)-ne)||1;return z.setTransform(0,Math.sign(l),Math.sign(x),0,oe,ne),z.drawImage(m,g,T,W,G,0,0,ve,fe),z.setTransform(s,l,x,R,j,V),[ve,fe]}z.drawImage(m,g,T,W,G,$,I,N,U);const se=Math.hypot(s,l),Y=Math.hypot(x,R);return[se*N,Y*U]}function y(z){const{width:m,height:g}=z;if(m>_||g>_)return null;const T=1e3,W=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),G=m+1;let $=new Uint8Array(G*(g+1)),I,N,U;const s=m+7&-8;let l=new Uint8Array(s*g),x=0;for(const Y of z.data){let ae=128;for(;ae>0;)l[x++]=Y&ae?0:255,ae>>=1}let R=0;for(x=0,l[x]!==0&&($[0]=1,++R),N=1;N<m;N++)l[x]!==l[x+1]&&($[N]=l[x]?2:1,++R),x++;for(l[x]!==0&&($[N]=2,++R),I=1;I<g;I++){x=I*s,U=I*G,l[x-s]!==l[x]&&($[U]=l[x]?1:8,++R);let Y=(l[x]?4:0)+(l[x-s]?8:0);for(N=1;N<m;N++)Y=(Y>>2)+(l[x+1]?4:0)+(l[x-s+1]?8:0),W[Y]&&($[U+N]=W[Y],++R),x++;if(l[x-s]!==l[x]&&($[U+N]=l[x]?2:4,++R),R>T)return null}for(x=s*(g-1),U=I*G,l[x]!==0&&($[U]=8,++R),N=1;N<m;N++)l[x]!==l[x+1]&&($[U+N]=l[x]?4:8,++R),x++;if(l[x]!==0&&($[U+N]=4,++R),R>T)return null;const j=new Int32Array([0,G,-1,0,-G,0,0,0,1]),V=new Path2D;for(I=0;R&&I<=g;I++){let Y=I*G;const ae=Y+m;for(;Y<ae&&!$[Y];)Y++;if(Y===ae)continue;V.moveTo(Y%G,I);const oe=Y;let te=$[Y];do{const ne=j[te];do Y+=ne;while(!$[Y]);const pe=$[Y];pe!==5&&pe!==10?(te=pe,$[Y]=0):(te=pe&51*te>>4,$[Y]&=te>>2|te<<2),V.lineTo(Y%G,Y/G|0),$[Y]||--R}while(oe!==Y);--I}return l=null,$=null,function(Y){Y.save(),Y.scale(1/m,-1/g),Y.translate(0,-g),Y.fill(V),Y.beginPath(),Y.restore()}}class v{constructor(m,g){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=d.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=d.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=d.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,m,g])}clone(){const m=Object.create(this);return m.clipBox=this.clipBox.slice(),m}setCurrentPoint(m,g){this.x=m,this.y=g}updatePathMinMax(m,g,T){[g,T]=d.Util.applyTransform([g,T],m),this.minX=Math.min(this.minX,g),this.minY=Math.min(this.minY,T),this.maxX=Math.max(this.maxX,g),this.maxY=Math.max(this.maxY,T)}updateRectMinMax(m,g){const T=d.Util.applyTransform(g,m),W=d.Util.applyTransform(g.slice(2),m);this.minX=Math.min(this.minX,T[0],W[0]),this.minY=Math.min(this.minY,T[1],W[1]),this.maxX=Math.max(this.maxX,T[0],W[0]),this.maxY=Math.max(this.maxY,T[1],W[1])}updateScalingPathMinMax(m,g){d.Util.scaleMinMax(m,g),this.minX=Math.min(this.minX,g[0]),this.maxX=Math.max(this.maxX,g[1]),this.minY=Math.min(this.minY,g[2]),this.maxY=Math.max(this.maxY,g[3])}updateCurvePathMinMax(m,g,T,W,G,$,I,N,U,s){const l=d.Util.bezierBoundingBox(g,T,W,G,$,I,N,U);if(s){s[0]=Math.min(s[0],l[0],l[2]),s[1]=Math.max(s[1],l[0],l[2]),s[2]=Math.min(s[2],l[1],l[3]),s[3]=Math.max(s[3],l[1],l[3]);return}this.updateRectMinMax(m,l)}getPathBoundingBox(m=L.PathType.FILL,g=null){const T=[this.minX,this.minY,this.maxX,this.maxY];if(m===L.PathType.STROKE){g||(0,d.unreachable)("Stroke bounding box must include transform.");const W=d.Util.singularValueDecompose2dScale(g),G=W[0]*this.lineWidth/2,$=W[1]*this.lineWidth/2;T[0]-=G,T[1]-=$,T[2]+=G,T[3]+=$}return T}updateClipFromPath(){const m=d.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(m||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(m){this.clipBox=m,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(m=L.PathType.FILL,g=null){return d.Util.intersect(this.clipBox,this.getPathBoundingBox(m,g))}}function h(z,m){if(typeof ImageData<"u"&&m instanceof ImageData){z.putImageData(m,0,0);return}const g=m.height,T=m.width,W=g%p,G=(g-W)/p,$=W===0?G:G+1,I=z.createImageData(T,p);let N=0,U;const s=m.data,l=I.data;let x,R,j,V;if(m.kind===d.ImageKind.GRAYSCALE_1BPP){const se=s.byteLength,Y=new Uint32Array(l.buffer,0,l.byteLength>>2),ae=Y.length,oe=T+7>>3,te=4294967295,ne=d.FeatureTest.isLittleEndian?4278190080:255;for(x=0;x<$;x++){for(j=x<G?p:W,U=0,R=0;R<j;R++){const pe=se-N;let fe=0;const Se=pe>oe?T:pe*8-7,ve=Se&-8;let Re=0,K=0;for(;fe<ve;fe+=8)K=s[N++],Y[U++]=K&128?te:ne,Y[U++]=K&64?te:ne,Y[U++]=K&32?te:ne,Y[U++]=K&16?te:ne,Y[U++]=K&8?te:ne,Y[U++]=K&4?te:ne,Y[U++]=K&2?te:ne,Y[U++]=K&1?te:ne;for(;fe<Se;fe++)Re===0&&(K=s[N++],Re=128),Y[U++]=K&Re?te:ne,Re>>=1}for(;U<ae;)Y[U++]=0;z.putImageData(I,0,x*p)}}else if(m.kind===d.ImageKind.RGBA_32BPP){for(R=0,V=T*p*4,x=0;x<G;x++)l.set(s.subarray(N,N+V)),N+=V,z.putImageData(I,0,R),R+=p;x<$&&(V=T*W*4,l.set(s.subarray(N,N+V)),z.putImageData(I,0,R))}else if(m.kind===d.ImageKind.RGB_24BPP)for(j=p,V=T*j,x=0;x<$;x++){for(x>=G&&(j=W,V=T*j),U=0,R=V;R--;)l[U++]=s[N++],l[U++]=s[N++],l[U++]=s[N++],l[U++]=255;z.putImageData(I,0,x*p)}else throw new Error(`bad image kind: ${m.kind}`)}function e(z,m){if(m.bitmap){z.drawImage(m.bitmap,0,0);return}const g=m.height,T=m.width,W=g%p,G=(g-W)/p,$=W===0?G:G+1,I=z.createImageData(T,p);let N=0;const U=m.data,s=I.data;for(let l=0;l<$;l++){const x=l<G?p:W;({srcPos:N}=(0,q.convertBlackAndWhiteToRGBA)({src:U,srcPos:N,dest:s,width:T,height:x,nonBlackColor:0})),z.putImageData(I,0,l*p)}}function n(z,m){const g=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const T of g)z[T]!==void 0&&(m[T]=z[T]);z.setLineDash!==void 0&&(m.setLineDash(z.getLineDash()),m.lineDashOffset=z.lineDashOffset)}function r(z){z.strokeStyle=z.fillStyle="#000000",z.fillRule="nonzero",z.globalAlpha=1,z.lineWidth=1,z.lineCap="butt",z.lineJoin="miter",z.miterLimit=10,z.globalCompositeOperation="source-over",z.font="10px sans-serif",z.setLineDash!==void 0&&(z.setLineDash([]),z.lineDashOffset=0),J.isNodeJS||(z.filter="none")}function t(z,m,g,T){const W=z.length;for(let G=3;G<W;G+=4){const $=z[G];if($===0)z[G-3]=m,z[G-2]=g,z[G-1]=T;else if($<255){const I=255-$;z[G-3]=z[G-3]*$+m*I>>8,z[G-2]=z[G-2]*$+g*I>>8,z[G-1]=z[G-1]*$+T*I>>8}}}function c(z,m,g){const T=z.length,W=1/255;for(let G=3;G<T;G+=4){const $=g?g[z[G]]:z[G];m[G]=m[G]*$*W|0}}function C(z,m,g){const T=z.length;for(let W=3;W<T;W+=4){const G=z[W-3]*77+z[W-2]*152+z[W-1]*28;m[W]=g?m[W]*g[G>>8]>>8:m[W]*G>>16}}function i(z,m,g,T,W,G,$,I,N,U,s){const l=!!G,x=l?G[0]:0,R=l?G[1]:0,j=l?G[2]:0;let V;W==="Luminosity"?V=C:V=c;const Y=Math.min(T,Math.ceil(1048576/g));for(let ae=0;ae<T;ae+=Y){const oe=Math.min(Y,T-ae),te=z.getImageData(I-U,ae+(N-s),g,oe),ne=m.getImageData(I,ae+N,g,oe);l&&t(te.data,x,R,j),V(te.data,ne.data,$),m.putImageData(ne,I,ae+N)}}function S(z,m,g,T){const W=T[0],G=T[1],$=T[2]-W,I=T[3]-G;$===0||I===0||(i(m.context,g,$,I,m.subtype,m.backdrop,m.transferMap,W,G,m.offsetX,m.offsetY),z.save(),z.globalAlpha=1,z.globalCompositeOperation="source-over",z.setTransform(1,0,0,1,0,0),z.drawImage(g.canvas,0,0),z.restore())}function H(z,m){const g=d.Util.singularValueDecompose2dScale(z);g[0]=Math.fround(g[0]),g[1]=Math.fround(g[1]);const T=Math.fround((globalThis.devicePixelRatio||1)*E.PixelsPerInch.PDF_TO_CSS_UNITS);return m!==void 0?m:g[0]<=T||g[1]<=T}const X=["butt","round","square"],Q=["miter","round","bevel"],ee={},de={},ye=class ye{constructor(m,g,T,W,G,{optionalContentConfig:$,markedContentStack:I=null},N,U){Z(this,ue);Z(this,Ee);this.ctx=m,this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=g,this.objs=T,this.canvasFactory=W,this.filterFactory=G,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=I||[],this.optionalContentConfig=$,this.cachedCanvases=new a(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=N,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=U,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(m,g=null){return typeof m=="string"?m.startsWith("g_")?this.commonObjs.get(m):this.objs.get(m):g}beginDrawing({transform:m,viewport:g,transparency:T=!1,background:W=null}){const G=this.ctx.canvas.width,$=this.ctx.canvas.height,I=this.ctx.fillStyle;if(this.ctx.fillStyle=W||"#ffffff",this.ctx.fillRect(0,0,G,$),this.ctx.fillStyle=I,T){const N=this.cachedCanvases.getCanvas("transparent",G,$);this.compositeCtx=this.ctx,this.transparentCanvas=N.canvas,this.ctx=N.context,this.ctx.save(),this.ctx.transform(...(0,E.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),r(this.ctx),m&&(this.ctx.transform(...m),this.outputScaleX=m[0],this.outputScaleY=m[0]),this.ctx.transform(...g.transform),this.viewportScale=g.scale,this.baseTransform=(0,E.getCurrentTransform)(this.ctx)}executeOperatorList(m,g,T,W){const G=m.argsArray,$=m.fnArray;let I=g||0;const N=G.length;if(N===I)return I;const U=N-I>P&&typeof T=="function",s=U?Date.now()+M:0;let l=0;const x=this.commonObjs,R=this.objs;let j;for(;;){if(W!==void 0&&I===W.nextBreakPoint)return W.breakIt(I,T),I;if(j=$[I],j!==d.OPS.dependency)this[j].apply(this,G[I]);else for(const V of G[I]){const se=V.startsWith("g_")?x:R;if(!se.has(V))return se.get(V,T),I}if(I++,I===N)return I;if(U&&++l>P){if(Date.now()>s)return T(),I;l=0}}}endDrawing(){re(this,ue,bt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const m of this._cachedBitmapsMap.values()){for(const g of m.values())typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement&&(g.width=g.height=0);m.clear()}this._cachedBitmapsMap.clear(),re(this,Ee,yt).call(this)}_scaleImage(m,g){const T=m.width,W=m.height;let G=Math.max(Math.hypot(g[0],g[1]),1),$=Math.max(Math.hypot(g[2],g[3]),1),I=T,N=W,U="prescale1",s,l;for(;G>2&&I>1||$>2&&N>1;){let x=I,R=N;G>2&&I>1&&(x=I>=16384?Math.floor(I/2)-1||1:Math.ceil(I/2),G/=I/x),$>2&&N>1&&(R=N>=16384?Math.floor(N/2)-1||1:Math.ceil(N)/2,$/=N/R),s=this.cachedCanvases.getCanvas(U,x,R),l=s.context,l.clearRect(0,0,x,R),l.drawImage(m,0,0,I,N,0,0,x,R),m=s.canvas,I=x,N=R,U=U==="prescale1"?"prescale2":"prescale1"}return{img:m,paintWidth:I,paintHeight:N}}_createMaskCanvas(m){const g=this.ctx,{width:T,height:W}=m,G=this.current.fillColor,$=this.current.patternFill,I=(0,E.getCurrentTransform)(g);let N,U,s,l;if((m.bitmap||m.data)&&m.count>1){const fe=m.bitmap||m.data.buffer;U=JSON.stringify($?I:[I.slice(0,4),G]),N=this._cachedBitmapsMap.get(fe),N||(N=new Map,this._cachedBitmapsMap.set(fe,N));const Se=N.get(U);if(Se&&!$){const ve=Math.round(Math.min(I[0],I[2])+I[4]),Re=Math.round(Math.min(I[1],I[3])+I[5]);return{canvas:Se,offsetX:ve,offsetY:Re}}s=Se}s||(l=this.cachedCanvases.getCanvas("maskCanvas",T,W),e(l.context,m));let x=d.Util.transform(I,[1/T,0,0,-1/W,0,0]);x=d.Util.transform(x,[1,0,0,1,0,-W]);const R=d.Util.applyTransform([0,0],x),j=d.Util.applyTransform([T,W],x),V=d.Util.normalizeRect([R[0],R[1],j[0],j[1]]),se=Math.round(V[2]-V[0])||1,Y=Math.round(V[3]-V[1])||1,ae=this.cachedCanvases.getCanvas("fillCanvas",se,Y),oe=ae.context,te=Math.min(R[0],j[0]),ne=Math.min(R[1],j[1]);oe.translate(-te,-ne),oe.transform(...x),s||(s=this._scaleImage(l.canvas,(0,E.getCurrentTransformInverse)(oe)),s=s.img,N&&$&&N.set(U,s)),oe.imageSmoothingEnabled=H((0,E.getCurrentTransform)(oe),m.interpolate),f(oe,s,0,0,s.width,s.height,0,0,T,W),oe.globalCompositeOperation="source-in";const pe=d.Util.transform((0,E.getCurrentTransformInverse)(oe),[1,0,0,1,-te,-ne]);return oe.fillStyle=$?G.getPattern(g,this,pe,L.PathType.FILL):G,oe.fillRect(0,0,T,W),N&&!$&&(this.cachedCanvases.delete("fillCanvas"),N.set(U,ae.canvas)),{canvas:ae.canvas,offsetX:Math.round(te),offsetY:Math.round(ne)}}setLineWidth(m){m!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=m,this.ctx.lineWidth=m}setLineCap(m){this.ctx.lineCap=X[m]}setLineJoin(m){this.ctx.lineJoin=Q[m]}setMiterLimit(m){this.ctx.miterLimit=m}setDash(m,g){const T=this.ctx;T.setLineDash!==void 0&&(T.setLineDash(m),T.lineDashOffset=g)}setRenderingIntent(m){}setFlatness(m){}setGState(m){for(const[g,T]of m)switch(g){case"LW":this.setLineWidth(T);break;case"LC":this.setLineCap(T);break;case"LJ":this.setLineJoin(T);break;case"ML":this.setMiterLimit(T);break;case"D":this.setDash(T[0],T[1]);break;case"RI":this.setRenderingIntent(T);break;case"FL":this.setFlatness(T);break;case"Font":this.setFont(T[0],T[1]);break;case"CA":this.current.strokeAlpha=T;break;case"ca":this.current.fillAlpha=T,this.ctx.globalAlpha=T;break;case"BM":this.ctx.globalCompositeOperation=T;break;case"SMask":this.current.activeSMask=T?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(T);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const m=this.inSMaskMode;this.current.activeSMask&&!m?this.beginSMaskMode():!this.current.activeSMask&&m&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const m=this.ctx.canvas.width,g=this.ctx.canvas.height,T="smaskGroupAt"+this.groupLevel,W=this.cachedCanvases.getCanvas(T,m,g);this.suspendedCtx=this.ctx,this.ctx=W.context;const G=this.ctx;G.setTransform(...(0,E.getCurrentTransform)(this.suspendedCtx)),n(this.suspendedCtx,G),u(G,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),n(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(m){if(!this.current.activeSMask)return;m?(m[0]=Math.floor(m[0]),m[1]=Math.floor(m[1]),m[2]=Math.ceil(m[2]),m[3]=Math.ceil(m[3])):m=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const g=this.current.activeSMask,T=this.suspendedCtx;S(T,g,this.ctx,m),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(n(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const m=this.current;this.stateStack.push(m),this.current=m.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),n(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(m,g,T,W,G,$){this.ctx.transform(m,g,T,W,G,$),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(m,g,T){const W=this.ctx,G=this.current;let $=G.x,I=G.y,N,U;const s=(0,E.getCurrentTransform)(W),l=s[0]===0&&s[3]===0||s[1]===0&&s[2]===0,x=l?T.slice(0):null;for(let R=0,j=0,V=m.length;R<V;R++)switch(m[R]|0){case d.OPS.rectangle:$=g[j++],I=g[j++];const se=g[j++],Y=g[j++],ae=$+se,oe=I+Y;W.moveTo($,I),se===0||Y===0?W.lineTo(ae,oe):(W.lineTo(ae,I),W.lineTo(ae,oe),W.lineTo($,oe)),l||G.updateRectMinMax(s,[$,I,ae,oe]),W.closePath();break;case d.OPS.moveTo:$=g[j++],I=g[j++],W.moveTo($,I),l||G.updatePathMinMax(s,$,I);break;case d.OPS.lineTo:$=g[j++],I=g[j++],W.lineTo($,I),l||G.updatePathMinMax(s,$,I);break;case d.OPS.curveTo:N=$,U=I,$=g[j+4],I=g[j+5],W.bezierCurveTo(g[j],g[j+1],g[j+2],g[j+3],$,I),G.updateCurvePathMinMax(s,N,U,g[j],g[j+1],g[j+2],g[j+3],$,I,x),j+=6;break;case d.OPS.curveTo2:N=$,U=I,W.bezierCurveTo($,I,g[j],g[j+1],g[j+2],g[j+3]),G.updateCurvePathMinMax(s,N,U,$,I,g[j],g[j+1],g[j+2],g[j+3],x),$=g[j+2],I=g[j+3],j+=4;break;case d.OPS.curveTo3:N=$,U=I,$=g[j+2],I=g[j+3],W.bezierCurveTo(g[j],g[j+1],$,I,$,I),G.updateCurvePathMinMax(s,N,U,g[j],g[j+1],$,I,$,I,x),j+=4;break;case d.OPS.closePath:W.closePath();break}l&&G.updateScalingPathMinMax(s,x),G.setCurrentPoint($,I)}closePath(){this.ctx.closePath()}stroke(m=!0){const g=this.ctx,T=this.current.strokeColor;g.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof T=="object"&&(T!=null&&T.getPattern)?(g.save(),g.strokeStyle=T.getPattern(g,this,(0,E.getCurrentTransformInverse)(g),L.PathType.STROKE),this.rescaleAndStroke(!1),g.restore()):this.rescaleAndStroke(!0)),m&&this.consumePath(this.current.getClippedPathBoundingBox()),g.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(m=!0){const g=this.ctx,T=this.current.fillColor,W=this.current.patternFill;let G=!1;W&&(g.save(),g.fillStyle=T.getPattern(g,this,(0,E.getCurrentTransformInverse)(g),L.PathType.FILL),G=!0);const $=this.current.getClippedPathBoundingBox();this.contentVisible&&$!==null&&(this.pendingEOFill?(g.fill("evenodd"),this.pendingEOFill=!1):g.fill()),G&&g.restore(),m&&this.consumePath($)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ee}eoClip(){this.pendingClip=de}beginText(){this.current.textMatrix=d.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const m=this.pendingTextPaths,g=this.ctx;if(m===void 0){g.beginPath();return}g.save(),g.beginPath();for(const T of m)g.setTransform(...T.transform),g.translate(T.x,T.y),T.addToPath(g,T.fontSize);g.restore(),g.clip(),g.beginPath(),delete this.pendingTextPaths}setCharSpacing(m){this.current.charSpacing=m}setWordSpacing(m){this.current.wordSpacing=m}setHScale(m){this.current.textHScale=m/100}setLeading(m){this.current.leading=-m}setFont(m,g){const T=this.commonObjs.get(m),W=this.current;if(!T)throw new Error(`Can't find font for ${m}`);if(W.fontMatrix=T.fontMatrix||d.FONT_IDENTITY_MATRIX,(W.fontMatrix[0]===0||W.fontMatrix[3]===0)&&(0,d.warn)("Invalid font matrix for font "+m),g<0?(g=-g,W.fontDirection=-1):W.fontDirection=1,this.current.font=T,this.current.fontSize=g,T.isType3Font)return;const G=T.loadedName||"sans-serif";let $="normal";T.black?$="900":T.bold&&($="bold");const I=T.italic?"italic":"normal",N=`"${G}", ${T.fallbackName}`;let U=g;g<D?U=D:g>k&&(U=k),this.current.fontSizeScale=g/U,this.ctx.font=`${I} ${$} ${U}px ${N}`}setTextRenderingMode(m){this.current.textRenderingMode=m}setTextRise(m){this.current.textRise=m}moveText(m,g){this.current.x=this.current.lineX+=m,this.current.y=this.current.lineY+=g}setLeadingMoveText(m,g){this.setLeading(-g),this.moveText(m,g)}setTextMatrix(m,g,T,W,G,$){this.current.textMatrix=[m,g,T,W,G,$],this.current.textMatrixScale=Math.hypot(m,g),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(m,g,T,W){const G=this.ctx,$=this.current,I=$.font,N=$.textRenderingMode,U=$.fontSize/$.fontSizeScale,s=N&d.TextRenderingMode.FILL_STROKE_MASK,l=!!(N&d.TextRenderingMode.ADD_TO_PATH_FLAG),x=$.patternFill&&!I.missingFile;let R;(I.disableFontFace||l||x)&&(R=I.getPathGenerator(this.commonObjs,m)),I.disableFontFace||x?(G.save(),G.translate(g,T),G.beginPath(),R(G,U),W&&G.setTransform(...W),(s===d.TextRenderingMode.FILL||s===d.TextRenderingMode.FILL_STROKE)&&G.fill(),(s===d.TextRenderingMode.STROKE||s===d.TextRenderingMode.FILL_STROKE)&&G.stroke(),G.restore()):((s===d.TextRenderingMode.FILL||s===d.TextRenderingMode.FILL_STROKE)&&G.fillText(m,g,T),(s===d.TextRenderingMode.STROKE||s===d.TextRenderingMode.FILL_STROKE)&&G.strokeText(m,g,T)),l&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,E.getCurrentTransform)(G),x:g,y:T,fontSize:U,addToPath:R})}get isFontSubpixelAAEnabled(){const{context:m}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);m.scale(1.5,1),m.fillText("I",0,10);const g=m.getImageData(0,0,10,10).data;let T=!1;for(let W=3;W<g.length;W+=4)if(g[W]>0&&g[W]<255){T=!0;break}return(0,d.shadow)(this,"isFontSubpixelAAEnabled",T)}showText(m){const g=this.current,T=g.font;if(T.isType3Font)return this.showType3Text(m);const W=g.fontSize;if(W===0)return;const G=this.ctx,$=g.fontSizeScale,I=g.charSpacing,N=g.wordSpacing,U=g.fontDirection,s=g.textHScale*U,l=m.length,x=T.vertical,R=x?1:-1,j=T.defaultVMetrics,V=W*g.fontMatrix[0],se=g.textRenderingMode===d.TextRenderingMode.FILL&&!T.disableFontFace&&!g.patternFill;G.save(),G.transform(...g.textMatrix),G.translate(g.x,g.y+g.textRise),U>0?G.scale(s,-1):G.scale(s,1);let Y;if(g.patternFill){G.save();const pe=g.fillColor.getPattern(G,this,(0,E.getCurrentTransformInverse)(G),L.PathType.FILL);Y=(0,E.getCurrentTransform)(G),G.restore(),G.fillStyle=pe}let ae=g.lineWidth;const oe=g.textMatrixScale;if(oe===0||ae===0){const pe=g.textRenderingMode&d.TextRenderingMode.FILL_STROKE_MASK;(pe===d.TextRenderingMode.STROKE||pe===d.TextRenderingMode.FILL_STROKE)&&(ae=this.getSinglePixelWidth())}else ae/=oe;if($!==1&&(G.scale($,$),ae/=$),G.lineWidth=ae,T.isInvalidPDFjsFont){const pe=[];let fe=0;for(const Se of m)pe.push(Se.unicode),fe+=Se.width;G.fillText(pe.join(""),0,0),g.x+=fe*V*s,G.restore(),this.compose();return}let te=0,ne;for(ne=0;ne<l;++ne){const pe=m[ne];if(typeof pe=="number"){te+=R*pe*W/1e3;continue}let fe=!1;const Se=(pe.isSpace?N:0)+I,ve=pe.fontChar,Re=pe.accent;let K,be,Ae=pe.width;if(x){const he=pe.vmetric||j,F=-(pe.vmetric?he[1]:Ae*.5)*V,B=he[2]*V;Ae=he?-he[0]:Ae,K=F/$,be=(te+B)/$}else K=te/$,be=0;if(T.remeasure&&Ae>0){const he=G.measureText(ve).width*1e3/W*$;if(Ae<he&&this.isFontSubpixelAAEnabled){const F=Ae/he;fe=!0,G.save(),G.scale(F,1),K/=F}else Ae!==he&&(K+=(Ae-he)/2e3*W/$)}if(this.contentVisible&&(pe.isInFont||T.missingFile)){if(se&&!Re)G.fillText(ve,K,be);else if(this.paintChar(ve,K,be,Y),Re){const he=K+W*Re.offset.x/$,F=be-W*Re.offset.y/$;this.paintChar(Re.fontChar,he,F,Y)}}let we;x?we=Ae*V-Se*U:we=Ae*V+Se*U,te+=we,fe&&G.restore()}x?g.y-=te:g.x+=te*s,G.restore(),this.compose()}showType3Text(m){const g=this.ctx,T=this.current,W=T.font,G=T.fontSize,$=T.fontDirection,I=W.vertical?1:-1,N=T.charSpacing,U=T.wordSpacing,s=T.textHScale*$,l=T.fontMatrix||d.FONT_IDENTITY_MATRIX,x=m.length,R=T.textRenderingMode===d.TextRenderingMode.INVISIBLE;let j,V,se,Y;if(!(R||G===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,g.save(),g.transform(...T.textMatrix),g.translate(T.x,T.y),g.scale(s,$),j=0;j<x;++j){if(V=m[j],typeof V=="number"){Y=I*V*G/1e3,this.ctx.translate(Y,0),T.x+=Y*s;continue}const ae=(V.isSpace?U:0)+N,oe=W.charProcOperatorList[V.operatorListId];if(!oe){(0,d.warn)(`Type3 character "${V.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=V,this.save(),g.scale(G,G),g.transform(...l),this.executeOperatorList(oe),this.restore()),se=d.Util.applyTransform([V.width,0],l)[0]*G+ae,g.translate(se,0),T.x+=se*s}g.restore(),this.processingType3=null}}setCharWidth(m,g){}setCharWidthAndBounds(m,g,T,W,G,$){this.ctx.rect(T,W,G-T,$-W),this.ctx.clip(),this.endPath()}getColorN_Pattern(m){let g;if(m[0]==="TilingPattern"){const T=m[1],W=this.baseTransform||(0,E.getCurrentTransform)(this.ctx),G={createCanvasGraphics:$=>new ye($,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};g=new L.TilingPattern(m,T,this.ctx,G,W)}else g=this._getPattern(m[1],m[2]);return g}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(m,g,T){const W=d.Util.makeHexColor(m,g,T);this.ctx.strokeStyle=W,this.current.strokeColor=W}setFillRGBColor(m,g,T){const W=d.Util.makeHexColor(m,g,T);this.ctx.fillStyle=W,this.current.fillColor=W,this.current.patternFill=!1}_getPattern(m,g=null){let T;return this.cachedPatterns.has(m)?T=this.cachedPatterns.get(m):(T=(0,L.getShadingPattern)(this.getObject(m)),this.cachedPatterns.set(m,T)),g&&(T.matrix=g),T}shadingFill(m){if(!this.contentVisible)return;const g=this.ctx;this.save();const T=this._getPattern(m);g.fillStyle=T.getPattern(g,this,(0,E.getCurrentTransformInverse)(g),L.PathType.SHADING);const W=(0,E.getCurrentTransformInverse)(g);if(W){const G=g.canvas,$=G.width,I=G.height,N=d.Util.applyTransform([0,0],W),U=d.Util.applyTransform([0,I],W),s=d.Util.applyTransform([$,0],W),l=d.Util.applyTransform([$,I],W),x=Math.min(N[0],U[0],s[0],l[0]),R=Math.min(N[1],U[1],s[1],l[1]),j=Math.max(N[0],U[0],s[0],l[0]),V=Math.max(N[1],U[1],s[1],l[1]);this.ctx.fillRect(x,R,j-x,V-R)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,d.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,d.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(m,g){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(m)&&m.length===6&&this.transform(...m),this.baseTransform=(0,E.getCurrentTransform)(this.ctx),g)){const T=g[2]-g[0],W=g[3]-g[1];this.ctx.rect(g[0],g[1],T,W),this.current.updateRectMinMax((0,E.getCurrentTransform)(this.ctx),g),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(m){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const g=this.ctx;m.isolated||(0,d.info)("TODO: Support non-isolated groups."),m.knockout&&(0,d.warn)("Knockout groups not supported.");const T=(0,E.getCurrentTransform)(g);if(m.matrix&&g.transform(...m.matrix),!m.bbox)throw new Error("Bounding box is required.");let W=d.Util.getAxialAlignedBoundingBox(m.bbox,(0,E.getCurrentTransform)(g));const G=[0,0,g.canvas.width,g.canvas.height];W=d.Util.intersect(W,G)||[0,0,0,0];const $=Math.floor(W[0]),I=Math.floor(W[1]);let N=Math.max(Math.ceil(W[2])-$,1),U=Math.max(Math.ceil(W[3])-I,1),s=1,l=1;N>A&&(s=N/A,N=A),U>A&&(l=U/A,U=A),this.current.startNewPathAndClipBox([0,0,N,U]);let x="groupAt"+this.groupLevel;m.smask&&(x+="_smask_"+this.smaskCounter++%2);const R=this.cachedCanvases.getCanvas(x,N,U),j=R.context;j.scale(1/s,1/l),j.translate(-$,-I),j.transform(...T),m.smask?this.smaskStack.push({canvas:R.canvas,context:j,offsetX:$,offsetY:I,scaleX:s,scaleY:l,subtype:m.smask.subtype,backdrop:m.smask.backdrop,transferMap:m.smask.transferMap||null,startTransformInverse:null}):(g.setTransform(1,0,0,1,0,0),g.translate($,I),g.scale(s,l),g.save()),n(g,j),this.ctx=j,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(g),this.groupLevel++}endGroup(m){if(!this.contentVisible)return;this.groupLevel--;const g=this.ctx,T=this.groupStack.pop();if(this.ctx=T,this.ctx.imageSmoothingEnabled=!1,m.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const W=(0,E.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...W);const G=d.Util.getAxialAlignedBoundingBox([0,0,g.canvas.width,g.canvas.height],W);this.ctx.drawImage(g.canvas,0,0),this.ctx.restore(),this.compose(G)}}beginAnnotation(m,g,T,W,G){if(re(this,ue,bt).call(this),r(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(g)&&g.length===4){const $=g[2]-g[0],I=g[3]-g[1];if(G&&this.annotationCanvasMap){T=T.slice(),T[4]-=g[0],T[5]-=g[1],g=g.slice(),g[0]=g[1]=0,g[2]=$,g[3]=I;const[N,U]=d.Util.singularValueDecompose2dScale((0,E.getCurrentTransform)(this.ctx)),{viewportScale:s}=this,l=Math.ceil($*this.outputScaleX*s),x=Math.ceil(I*this.outputScaleY*s);this.annotationCanvas=this.canvasFactory.create(l,x);const{canvas:R,context:j}=this.annotationCanvas;this.annotationCanvasMap.set(m,R),this.annotationCanvas.savedCtx=this.ctx,this.ctx=j,this.ctx.save(),this.ctx.setTransform(N,0,0,-U,0,I*U),r(this.ctx)}else r(this.ctx),this.ctx.rect(g[0],g[1],$,I),this.ctx.clip(),this.endPath()}this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...T),this.transform(...W)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),re(this,Ee,yt).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(m){if(!this.contentVisible)return;const g=m.count;m=this.getObject(m.data,m),m.count=g;const T=this.ctx,W=this.processingType3;if(W&&(W.compiled===void 0&&(W.compiled=y(m)),W.compiled)){W.compiled(T);return}const G=this._createMaskCanvas(m),$=G.canvas;T.save(),T.setTransform(1,0,0,1,0,0),T.drawImage($,G.offsetX,G.offsetY),T.restore(),this.compose()}paintImageMaskXObjectRepeat(m,g,T=0,W=0,G,$){if(!this.contentVisible)return;m=this.getObject(m.data,m);const I=this.ctx;I.save();const N=(0,E.getCurrentTransform)(I);I.transform(g,T,W,G,0,0);const U=this._createMaskCanvas(m);I.setTransform(1,0,0,1,U.offsetX-N[4],U.offsetY-N[5]);for(let s=0,l=$.length;s<l;s+=2){const x=d.Util.transform(N,[g,T,W,G,$[s],$[s+1]]),[R,j]=d.Util.applyTransform([0,0],x);I.drawImage(U.canvas,R,j)}I.restore(),this.compose()}paintImageMaskXObjectGroup(m){if(!this.contentVisible)return;const g=this.ctx,T=this.current.fillColor,W=this.current.patternFill;for(const G of m){const{data:$,width:I,height:N,transform:U}=G,s=this.cachedCanvases.getCanvas("maskCanvas",I,N),l=s.context;l.save();const x=this.getObject($,G);e(l,x),l.globalCompositeOperation="source-in",l.fillStyle=W?T.getPattern(l,this,(0,E.getCurrentTransformInverse)(g),L.PathType.FILL):T,l.fillRect(0,0,I,N),l.restore(),g.save(),g.transform(...U),g.scale(1,-1),f(g,s.canvas,0,0,I,N,0,-1,1,1),g.restore()}this.compose()}paintImageXObject(m){if(!this.contentVisible)return;const g=this.getObject(m);if(!g){(0,d.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(g)}paintImageXObjectRepeat(m,g,T,W){if(!this.contentVisible)return;const G=this.getObject(m);if(!G){(0,d.warn)("Dependent image isn't ready yet");return}const $=G.width,I=G.height,N=[];for(let U=0,s=W.length;U<s;U+=2)N.push({transform:[g,0,0,T,W[U],W[U+1]],x:0,y:0,w:$,h:I});this.paintInlineImageXObjectGroup(G,N)}applyTransferMapsToCanvas(m){return this.current.transferMaps!=="none"&&(m.filter=this.current.transferMaps,m.drawImage(m.canvas,0,0),m.filter="none"),m.canvas}applyTransferMapsToBitmap(m){if(this.current.transferMaps==="none")return m.bitmap;const{bitmap:g,width:T,height:W}=m,G=this.cachedCanvases.getCanvas("inlineImage",T,W),$=G.context;return $.filter=this.current.transferMaps,$.drawImage(g,0,0),$.filter="none",G.canvas}paintInlineImageXObject(m){if(!this.contentVisible)return;const g=m.width,T=m.height,W=this.ctx;this.save(),J.isNodeJS||(W.filter="none"),W.scale(1/g,-1/T);let G;if(m.bitmap)G=this.applyTransferMapsToBitmap(m);else if(typeof HTMLElement=="function"&&m instanceof HTMLElement||!m.data)G=m;else{const N=this.cachedCanvases.getCanvas("inlineImage",g,T).context;h(N,m),G=this.applyTransferMapsToCanvas(N)}const $=this._scaleImage(G,(0,E.getCurrentTransformInverse)(W));W.imageSmoothingEnabled=H((0,E.getCurrentTransform)(W),m.interpolate),f(W,$.img,0,0,$.paintWidth,$.paintHeight,0,-T,g,T),this.compose(),this.restore()}paintInlineImageXObjectGroup(m,g){if(!this.contentVisible)return;const T=this.ctx;let W;if(m.bitmap)W=m.bitmap;else{const G=m.width,$=m.height,N=this.cachedCanvases.getCanvas("inlineImage",G,$).context;h(N,m),W=this.applyTransferMapsToCanvas(N)}for(const G of g)T.save(),T.transform(...G.transform),T.scale(1,-1),f(T,W,G.x,G.y,G.w,G.h,0,-1,1,1),T.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(m){}markPointProps(m,g){}beginMarkedContent(m){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(m,g){m==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(g)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(m){const g=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(m);const T=this.ctx;this.pendingClip&&(g||(this.pendingClip===de?T.clip("evenodd"):T.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),T.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const m=(0,E.getCurrentTransform)(this.ctx);if(m[1]===0&&m[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(m[0]),Math.abs(m[3]));else{const g=Math.abs(m[0]*m[3]-m[2]*m[1]),T=Math.hypot(m[0],m[2]),W=Math.hypot(m[1],m[3]);this._cachedGetSinglePixelWidth=Math.max(T,W)/g}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:m}=this.current,g=(0,E.getCurrentTransform)(this.ctx);let T,W;if(g[1]===0&&g[2]===0){const G=Math.abs(g[0]),$=Math.abs(g[3]);if(m===0)T=1/G,W=1/$;else{const I=G*m,N=$*m;T=I<1?1/I:1,W=N<1?1/N:1}}else{const G=Math.abs(g[0]*g[3]-g[2]*g[1]),$=Math.hypot(g[0],g[1]),I=Math.hypot(g[2],g[3]);if(m===0)T=I/G,W=$/G;else{const N=m*G;T=I>N?I/N:1,W=$>N?$/N:1}}this._cachedScaleForStroking=[T,W]}return this._cachedScaleForStroking}rescaleAndStroke(m){const{ctx:g}=this,{lineWidth:T}=this.current,[W,G]=this.getScaleForStroking();if(g.lineWidth=T||1,W===1&&G===1){g.stroke();return}let $,I,N;m&&($=(0,E.getCurrentTransform)(g),I=g.getLineDash().slice(),N=g.lineDashOffset),g.scale(W,G);const U=Math.max(W,G);g.setLineDash(g.getLineDash().map(s=>s/U)),g.lineDashOffset/=U,g.stroke(),m&&(g.setTransform(...$),g.setLineDash(I),g.lineDashOffset=N)}isContentVisible(){for(let m=this.markedContentStack.length-1;m>=0;m--)if(!this.markedContentStack[m].visible)return!1;return!0}};ue=new WeakSet,bt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ee=new WeakSet,yt=function(){if(this.pageColors){const m=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(m!=="none"){const g=this.ctx.filter;this.ctx.filter=m,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=g}}};let ie=ye;o.CanvasGraphics=ie;for(const z in d.OPS)ie.prototype[z]!==void 0&&(ie.prototype[d.OPS[z]]=ie.prototype[z])},(w,o,O)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TilingPattern=o.PathType=void 0,o.getShadingPattern=_;var d=O(1),E=O(6);const L={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};o.PathType=L;function q(f,y){if(!y)return;const v=y[2]-y[0],h=y[3]-y[1],e=new Path2D;e.rect(y[0],y[1],v,h),f.clip(e)}class J{constructor(){this.constructor===J&&(0,d.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,d.unreachable)("Abstract method `getPattern` called.")}}class D extends J{constructor(y){super(),this._type=y[1],this._bbox=y[2],this._colorStops=y[3],this._p0=y[4],this._p1=y[5],this._r0=y[6],this._r1=y[7],this.matrix=null}_createGradient(y){let v;this._type==="axial"?v=y.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(v=y.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const h of this._colorStops)v.addColorStop(h[0],h[1]);return v}getPattern(y,v,h,e){let n;if(e===L.STROKE||e===L.FILL){const r=v.current.getClippedPathBoundingBox(e,(0,E.getCurrentTransform)(y))||[0,0,0,0],t=Math.ceil(r[2]-r[0])||1,c=Math.ceil(r[3]-r[1])||1,C=v.cachedCanvases.getCanvas("pattern",t,c,!0),i=C.context;i.clearRect(0,0,i.canvas.width,i.canvas.height),i.beginPath(),i.rect(0,0,i.canvas.width,i.canvas.height),i.translate(-r[0],-r[1]),h=d.Util.transform(h,[1,0,0,1,r[0],r[1]]),i.transform(...v.baseTransform),this.matrix&&i.transform(...this.matrix),q(i,this._bbox),i.fillStyle=this._createGradient(i),i.fill(),n=y.createPattern(C.canvas,"no-repeat");const S=new DOMMatrix(h);n.setTransform(S)}else q(y,this._bbox),n=this._createGradient(y);return n}}function k(f,y,v,h,e,n,r,t){const c=y.coords,C=y.colors,i=f.data,S=f.width*4;let H;c[v+1]>c[h+1]&&(H=v,v=h,h=H,H=n,n=r,r=H),c[h+1]>c[e+1]&&(H=h,h=e,e=H,H=r,r=t,t=H),c[v+1]>c[h+1]&&(H=v,v=h,h=H,H=n,n=r,r=H);const X=(c[v]+y.offsetX)*y.scaleX,Q=(c[v+1]+y.offsetY)*y.scaleY,ee=(c[h]+y.offsetX)*y.scaleX,de=(c[h+1]+y.offsetY)*y.scaleY,ie=(c[e]+y.offsetX)*y.scaleX,ue=(c[e+1]+y.offsetY)*y.scaleY;if(Q>=ue)return;const ge=C[n],Ee=C[n+1],_e=C[n+2],ye=C[r],z=C[r+1],m=C[r+2],g=C[t],T=C[t+1],W=C[t+2],G=Math.round(Q),$=Math.round(ue);let I,N,U,s,l,x,R,j;for(let V=G;V<=$;V++){if(V<de){let te;V<Q?te=0:te=(Q-V)/(Q-de),I=X-(X-ee)*te,N=ge-(ge-ye)*te,U=Ee-(Ee-z)*te,s=_e-(_e-m)*te}else{let te;V>ue?te=1:de===ue?te=0:te=(de-V)/(de-ue),I=ee-(ee-ie)*te,N=ye-(ye-g)*te,U=z-(z-T)*te,s=m-(m-W)*te}let se;V<Q?se=0:V>ue?se=1:se=(Q-V)/(Q-ue),l=X-(X-ie)*se,x=ge-(ge-g)*se,R=Ee-(Ee-T)*se,j=_e-(_e-W)*se;const Y=Math.round(Math.min(I,l)),ae=Math.round(Math.max(I,l));let oe=S*V+Y*4;for(let te=Y;te<=ae;te++)se=(I-te)/(I-l),se<0?se=0:se>1&&(se=1),i[oe++]=N-(N-x)*se|0,i[oe++]=U-(U-R)*se|0,i[oe++]=s-(s-j)*se|0,i[oe++]=255}}function A(f,y,v){const h=y.coords,e=y.colors;let n,r;switch(y.type){case"lattice":const t=y.verticesPerRow,c=Math.floor(h.length/t)-1,C=t-1;for(n=0;n<c;n++){let i=n*t;for(let S=0;S<C;S++,i++)k(f,v,h[i],h[i+1],h[i+t],e[i],e[i+1],e[i+t]),k(f,v,h[i+t+1],h[i+1],h[i+t],e[i+t+1],e[i+1],e[i+t])}break;case"triangles":for(n=0,r=h.length;n<r;n+=3)k(f,v,h[n],h[n+1],h[n+2],e[n],e[n+1],e[n+2]);break;default:throw new Error("illegal figure")}}class M extends J{constructor(y){super(),this._coords=y[2],this._colors=y[3],this._figures=y[4],this._bounds=y[5],this._bbox=y[7],this._background=y[8],this.matrix=null}_createMeshCanvas(y,v,h){const t=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),C=Math.ceil(this._bounds[2])-t,i=Math.ceil(this._bounds[3])-c,S=Math.min(Math.ceil(Math.abs(C*y[0]*1.1)),3e3),H=Math.min(Math.ceil(Math.abs(i*y[1]*1.1)),3e3),X=C/S,Q=i/H,ee={coords:this._coords,colors:this._colors,offsetX:-t,offsetY:-c,scaleX:1/X,scaleY:1/Q},de=S+2*2,ie=H+2*2,ue=h.getCanvas("mesh",de,ie,!1),ge=ue.context,Ee=ge.createImageData(S,H);if(v){const ye=Ee.data;for(let z=0,m=ye.length;z<m;z+=4)ye[z]=v[0],ye[z+1]=v[1],ye[z+2]=v[2],ye[z+3]=255}for(const ye of this._figures)A(Ee,ye,ee);return ge.putImageData(Ee,2,2),{canvas:ue.canvas,offsetX:t-2*X,offsetY:c-2*Q,scaleX:X,scaleY:Q}}getPattern(y,v,h,e){q(y,this._bbox);let n;if(e===L.SHADING)n=d.Util.singularValueDecompose2dScale((0,E.getCurrentTransform)(y));else if(n=d.Util.singularValueDecompose2dScale(v.baseTransform),this.matrix){const t=d.Util.singularValueDecompose2dScale(this.matrix);n=[n[0]*t[0],n[1]*t[1]]}const r=this._createMeshCanvas(n,e===L.SHADING?null:this._background,v.cachedCanvases);return e!==L.SHADING&&(y.setTransform(...v.baseTransform),this.matrix&&y.transform(...this.matrix)),y.translate(r.offsetX,r.offsetY),y.scale(r.scaleX,r.scaleY),y.createPattern(r.canvas,"no-repeat")}}class P extends J{getPattern(){return"hotpink"}}function _(f){switch(f[0]){case"RadialAxial":return new D(f);case"Mesh":return new M(f);case"Dummy":return new P}throw new Error(`Unknown IR type: ${f[0]}`)}const p={COLORED:1,UNCOLORED:2},a=class a{constructor(y,v,h,e,n){this.operatorList=y[2],this.matrix=y[3]||[1,0,0,1,0,0],this.bbox=y[4],this.xstep=y[5],this.ystep=y[6],this.paintType=y[7],this.tilingType=y[8],this.color=v,this.ctx=h,this.canvasGraphicsFactory=e,this.baseTransform=n}createPatternCanvas(y){const v=this.operatorList,h=this.bbox,e=this.xstep,n=this.ystep,r=this.paintType,t=this.tilingType,c=this.color,C=this.canvasGraphicsFactory;(0,d.info)("TilingType: "+t);const i=h[0],S=h[1],H=h[2],X=h[3],Q=d.Util.singularValueDecompose2dScale(this.matrix),ee=d.Util.singularValueDecompose2dScale(this.baseTransform),de=[Q[0]*ee[0],Q[1]*ee[1]],ie=this.getSizeAndScale(e,this.ctx.canvas.width,de[0]),ue=this.getSizeAndScale(n,this.ctx.canvas.height,de[1]),ge=y.cachedCanvases.getCanvas("pattern",ie.size,ue.size,!0),Ee=ge.context,_e=C.createCanvasGraphics(Ee);_e.groupLevel=y.groupLevel,this.setFillAndStrokeStyleToContext(_e,r,c);let ye=i,z=S,m=H,g=X;return i<0&&(ye=0,m+=Math.abs(i)),S<0&&(z=0,g+=Math.abs(S)),Ee.translate(-(ie.scale*ye),-(ue.scale*z)),_e.transform(ie.scale,0,0,ue.scale,0,0),Ee.save(),this.clipBbox(_e,ye,z,m,g),_e.baseTransform=(0,E.getCurrentTransform)(_e.ctx),_e.executeOperatorList(v),_e.endDrawing(),{canvas:ge.canvas,scaleX:ie.scale,scaleY:ue.scale,offsetX:ye,offsetY:z}}getSizeAndScale(y,v,h){y=Math.abs(y);const e=Math.max(a.MAX_PATTERN_SIZE,v);let n=Math.ceil(y*h);return n>=e?n=e:h=n/y,{scale:h,size:n}}clipBbox(y,v,h,e,n){const r=e-v,t=n-h;y.ctx.rect(v,h,r,t),y.current.updateRectMinMax((0,E.getCurrentTransform)(y.ctx),[v,h,e,n]),y.clip(),y.endPath()}setFillAndStrokeStyleToContext(y,v,h){const e=y.ctx,n=y.current;switch(v){case p.COLORED:const r=this.ctx;e.fillStyle=r.fillStyle,e.strokeStyle=r.strokeStyle,n.fillColor=r.fillStyle,n.strokeColor=r.strokeStyle;break;case p.UNCOLORED:const t=d.Util.makeHexColor(h[0],h[1],h[2]);e.fillStyle=t,e.strokeStyle=t,n.fillColor=t,n.strokeColor=t;break;default:throw new d.FormatError(`Unsupported paint type: ${v}`)}}getPattern(y,v,h,e){let n=h;e!==L.SHADING&&(n=d.Util.transform(n,v.baseTransform),this.matrix&&(n=d.Util.transform(n,this.matrix)));const r=this.createPatternCanvas(v);let t=new DOMMatrix(n);t=t.translate(r.offsetX,r.offsetY),t=t.scale(1/r.scaleX,1/r.scaleY);const c=y.createPattern(r.canvas,"repeat");return c.setTransform(t),c}};Oe(a,"MAX_PATTERN_SIZE",3e3);let u=a;o.TilingPattern=u},(w,o,O)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.convertBlackAndWhiteToRGBA=L,o.convertToRGBA=E,o.grayToRGBA=J;var d=O(1);function E(D){switch(D.kind){case d.ImageKind.GRAYSCALE_1BPP:return L(D);case d.ImageKind.RGB_24BPP:return q(D)}return null}function L({src:D,srcPos:k=0,dest:A,width:M,height:P,nonBlackColor:_=4294967295,inverseDecode:p=!1}){const u=d.FeatureTest.isLittleEndian?4278190080:255,[a,f]=p?[_,u]:[u,_],y=M>>3,v=M&7,h=D.length;A=new Uint32Array(A.buffer);let e=0;for(let n=0;n<P;n++){for(const t=k+y;k<t;k++){const c=k<h?D[k]:255;A[e++]=c&128?f:a,A[e++]=c&64?f:a,A[e++]=c&32?f:a,A[e++]=c&16?f:a,A[e++]=c&8?f:a,A[e++]=c&4?f:a,A[e++]=c&2?f:a,A[e++]=c&1?f:a}if(v===0)continue;const r=k<h?D[k++]:255;for(let t=0;t<v;t++)A[e++]=r&1<<7-t?f:a}return{srcPos:k,destPos:e}}function q({src:D,srcPos:k=0,dest:A,destPos:M=0,width:P,height:_}){let p=0;const u=D.length>>2,a=new Uint32Array(D.buffer,k,u);if(d.FeatureTest.isLittleEndian){for(;p<u-2;p+=3,M+=4){const f=a[p],y=a[p+1],v=a[p+2];A[M]=f|4278190080,A[M+1]=f>>>24|y<<8|4278190080,A[M+2]=y>>>16|v<<16|4278190080,A[M+3]=v>>>8|4278190080}for(let f=p*4,y=D.length;f<y;f+=3)A[M++]=D[f]|D[f+1]<<8|D[f+2]<<16|4278190080}else{for(;p<u-2;p+=3,M+=4){const f=a[p],y=a[p+1],v=a[p+2];A[M]=f|255,A[M+1]=f<<24|y>>>8|255,A[M+2]=y<<16|v>>>16|255,A[M+3]=v<<8|255}for(let f=p*4,y=D.length;f<y;f+=3)A[M++]=D[f]<<24|D[f+1]<<16|D[f+2]<<8|255}return{srcPos:k,destPos:M}}function J(D,k){if(d.FeatureTest.isLittleEndian)for(let A=0,M=D.length;A<M;A++)k[A]=D[A]*65793|4278190080;else for(let A=0,M=D.length;A<M;A++)k[A]=D[A]*16843008|255}},(w,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GlobalWorkerOptions=void 0;const O=Object.create(null);o.GlobalWorkerOptions=O,O.workerPort=null,O.workerSrc=""},(w,o,O)=>{var D,Ht,A,Wt,P,ot;Object.defineProperty(o,"__esModule",{value:!0}),o.MessageHandler=void 0;var d=O(1);const E={UNKNOWN:0,DATA:1,ERROR:2},L={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function q(p){switch(p instanceof Error||typeof p=="object"&&p!==null||(0,d.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),p.name){case"AbortException":return new d.AbortException(p.message);case"MissingPDFException":return new d.MissingPDFException(p.message);case"PasswordException":return new d.PasswordException(p.message,p.code);case"UnexpectedResponseException":return new d.UnexpectedResponseException(p.message,p.status);case"UnknownErrorException":return new d.UnknownErrorException(p.message,p.details);default:return new d.UnknownErrorException(p.message,p.toString())}}class J{constructor(u,a,f){Z(this,D);Z(this,A);Z(this,P);this.sourceName=u,this.targetName=a,this.comObj=f,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=y=>{const v=y.data;if(v.targetName!==this.sourceName)return;if(v.stream){re(this,A,Wt).call(this,v);return}if(v.callback){const e=v.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],v.callback===E.DATA)n.resolve(v.data);else if(v.callback===E.ERROR)n.reject(q(v.reason));else throw new Error("Unexpected callback case");return}const h=this.actionHandler[v.action];if(!h)throw new Error(`Unknown action from worker: ${v.action}`);if(v.callbackId){const e=this.sourceName,n=v.sourceName;new Promise(function(r){r(h(v.data))}).then(function(r){f.postMessage({sourceName:e,targetName:n,callback:E.DATA,callbackId:v.callbackId,data:r})},function(r){f.postMessage({sourceName:e,targetName:n,callback:E.ERROR,callbackId:v.callbackId,reason:q(r)})});return}if(v.streamId){re(this,D,Ht).call(this,v);return}h(v.data)},f.addEventListener("message",this._onComObjOnMessage)}on(u,a){const f=this.actionHandler;if(f[u])throw new Error(`There is already an actionName called "${u}"`);f[u]=a}send(u,a,f){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,data:a},f)}sendWithPromise(u,a,f){const y=this.callbackId++,v=new d.PromiseCapability;this.callbackCapabilities[y]=v;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,callbackId:y,data:a},f)}catch(h){v.reject(h)}return v.promise}sendWithStream(u,a,f,y){const v=this.streamId++,h=this.sourceName,e=this.targetName,n=this.comObj;return new ReadableStream({start:r=>{const t=new d.PromiseCapability;return this.streamControllers[v]={controller:r,startCall:t,pullCall:null,cancelCall:null,isClosed:!1},n.postMessage({sourceName:h,targetName:e,action:u,streamId:v,data:a,desiredSize:r.desiredSize},y),t.promise},pull:r=>{const t=new d.PromiseCapability;return this.streamControllers[v].pullCall=t,n.postMessage({sourceName:h,targetName:e,stream:L.PULL,streamId:v,desiredSize:r.desiredSize}),t.promise},cancel:r=>{(0,d.assert)(r instanceof Error,"cancel must have a valid reason");const t=new d.PromiseCapability;return this.streamControllers[v].cancelCall=t,this.streamControllers[v].isClosed=!0,n.postMessage({sourceName:h,targetName:e,stream:L.CANCEL,streamId:v,reason:q(r)}),t.promise}},f)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}D=new WeakSet,Ht=function(u){const a=u.streamId,f=this.sourceName,y=u.sourceName,v=this.comObj,h=this,e=this.actionHandler[u.action],n={enqueue(r,t=1,c){if(this.isCancelled)return;const C=this.desiredSize;this.desiredSize-=t,C>0&&this.desiredSize<=0&&(this.sinkCapability=new d.PromiseCapability,this.ready=this.sinkCapability.promise),v.postMessage({sourceName:f,targetName:y,stream:L.ENQUEUE,streamId:a,chunk:r},c)},close(){this.isCancelled||(this.isCancelled=!0,v.postMessage({sourceName:f,targetName:y,stream:L.CLOSE,streamId:a}),delete h.streamSinks[a])},error(r){(0,d.assert)(r instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,v.postMessage({sourceName:f,targetName:y,stream:L.ERROR,streamId:a,reason:q(r)}))},sinkCapability:new d.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:u.desiredSize,ready:null};n.sinkCapability.resolve(),n.ready=n.sinkCapability.promise,this.streamSinks[a]=n,new Promise(function(r){r(e(u.data,n))}).then(function(){v.postMessage({sourceName:f,targetName:y,stream:L.START_COMPLETE,streamId:a,success:!0})},function(r){v.postMessage({sourceName:f,targetName:y,stream:L.START_COMPLETE,streamId:a,reason:q(r)})})},A=new WeakSet,Wt=function(u){const a=u.streamId,f=this.sourceName,y=u.sourceName,v=this.comObj,h=this.streamControllers[a],e=this.streamSinks[a];switch(u.stream){case L.START_COMPLETE:u.success?h.startCall.resolve():h.startCall.reject(q(u.reason));break;case L.PULL_COMPLETE:u.success?h.pullCall.resolve():h.pullCall.reject(q(u.reason));break;case L.PULL:if(!e){v.postMessage({sourceName:f,targetName:y,stream:L.PULL_COMPLETE,streamId:a,success:!0});break}e.desiredSize<=0&&u.desiredSize>0&&e.sinkCapability.resolve(),e.desiredSize=u.desiredSize,new Promise(function(n){var r;n((r=e.onPull)==null?void 0:r.call(e))}).then(function(){v.postMessage({sourceName:f,targetName:y,stream:L.PULL_COMPLETE,streamId:a,success:!0})},function(n){v.postMessage({sourceName:f,targetName:y,stream:L.PULL_COMPLETE,streamId:a,reason:q(n)})});break;case L.ENQUEUE:if((0,d.assert)(h,"enqueue should have stream controller"),h.isClosed)break;h.controller.enqueue(u.chunk);break;case L.CLOSE:if((0,d.assert)(h,"close should have stream controller"),h.isClosed)break;h.isClosed=!0,h.controller.close(),re(this,P,ot).call(this,h,a);break;case L.ERROR:(0,d.assert)(h,"error should have stream controller"),h.controller.error(q(u.reason)),re(this,P,ot).call(this,h,a);break;case L.CANCEL_COMPLETE:u.success?h.cancelCall.resolve():h.cancelCall.reject(q(u.reason)),re(this,P,ot).call(this,h,a);break;case L.CANCEL:if(!e)break;new Promise(function(n){var r;n((r=e.onCancel)==null?void 0:r.call(e,q(u.reason)))}).then(function(){v.postMessage({sourceName:f,targetName:y,stream:L.CANCEL_COMPLETE,streamId:a,success:!0})},function(n){v.postMessage({sourceName:f,targetName:y,stream:L.CANCEL_COMPLETE,streamId:a,reason:q(n)})}),e.sinkCapability.reject(q(u.reason)),e.isCancelled=!0,delete this.streamSinks[a];break;default:throw new Error("Unexpected stream case")}},P=new WeakSet,ot=async function(u,a){var f,y,v;await Promise.allSettled([(f=u.startCall)==null?void 0:f.promise,(y=u.pullCall)==null?void 0:y.promise,(v=u.cancelCall)==null?void 0:v.promise]),delete this.streamControllers[a]},o.MessageHandler=J},(w,o,O)=>{var L,q;Object.defineProperty(o,"__esModule",{value:!0}),o.Metadata=void 0;var d=O(1);class E{constructor({parsedData:D,rawData:k}){Z(this,L,void 0);Z(this,q,void 0);me(this,L,D),me(this,q,k)}getRaw(){return b(this,q)}get(D){return b(this,L).get(D)??null}getAll(){return(0,d.objectFromMap)(b(this,L))}has(D){return b(this,L).has(D)}}L=new WeakMap,q=new WeakMap,o.Metadata=E},(w,o,O)=>{var D,k,A,M,P,_,Et;Object.defineProperty(o,"__esModule",{value:!0}),o.OptionalContentConfig=void 0;var d=O(1),E=O(8);const L=Symbol("INTERNAL");class q{constructor(a,f){Z(this,D,!0);this.name=a,this.intent=f}get visible(){return b(this,D)}_setVisible(a,f){a!==L&&(0,d.unreachable)("Internal method `_setVisible` called."),me(this,D,f)}}D=new WeakMap;class J{constructor(a){Z(this,_);Z(this,k,null);Z(this,A,new Map);Z(this,M,null);Z(this,P,null);if(this.name=null,this.creator=null,a!==null){this.name=a.name,this.creator=a.creator,me(this,P,a.order);for(const f of a.groups)b(this,A).set(f.id,new q(f.name,f.intent));if(a.baseState==="OFF")for(const f of b(this,A).values())f._setVisible(L,!1);for(const f of a.on)b(this,A).get(f)._setVisible(L,!0);for(const f of a.off)b(this,A).get(f)._setVisible(L,!1);me(this,M,this.getHash())}}isVisible(a){if(b(this,A).size===0)return!0;if(!a)return(0,d.warn)("Optional content group not defined."),!0;if(a.type==="OCG")return b(this,A).has(a.id)?b(this,A).get(a.id).visible:((0,d.warn)(`Optional content group not found: ${a.id}`),!0);if(a.type==="OCMD"){if(a.expression)return re(this,_,Et).call(this,a.expression);if(!a.policy||a.policy==="AnyOn"){for(const f of a.ids){if(!b(this,A).has(f))return(0,d.warn)(`Optional content group not found: ${f}`),!0;if(b(this,A).get(f).visible)return!0}return!1}else if(a.policy==="AllOn"){for(const f of a.ids){if(!b(this,A).has(f))return(0,d.warn)(`Optional content group not found: ${f}`),!0;if(!b(this,A).get(f).visible)return!1}return!0}else if(a.policy==="AnyOff"){for(const f of a.ids){if(!b(this,A).has(f))return(0,d.warn)(`Optional content group not found: ${f}`),!0;if(!b(this,A).get(f).visible)return!0}return!1}else if(a.policy==="AllOff"){for(const f of a.ids){if(!b(this,A).has(f))return(0,d.warn)(`Optional content group not found: ${f}`),!0;if(b(this,A).get(f).visible)return!1}return!0}return(0,d.warn)(`Unknown optional content policy ${a.policy}.`),!0}return(0,d.warn)(`Unknown group type ${a.type}.`),!0}setVisibility(a,f=!0){if(!b(this,A).has(a)){(0,d.warn)(`Optional content group not found: ${a}`);return}b(this,A).get(a)._setVisible(L,!!f),me(this,k,null)}get hasInitialVisibility(){return this.getHash()===b(this,M)}getOrder(){return b(this,A).size?b(this,P)?b(this,P).slice():[...b(this,A).keys()]:null}getGroups(){return b(this,A).size>0?(0,d.objectFromMap)(b(this,A)):null}getGroup(a){return b(this,A).get(a)||null}getHash(){if(b(this,k)!==null)return b(this,k);const a=new E.MurmurHash3_64;for(const[f,y]of b(this,A))a.update(`${f}:${y.visible}`);return me(this,k,a.hexdigest())}}k=new WeakMap,A=new WeakMap,M=new WeakMap,P=new WeakMap,_=new WeakSet,Et=function(a){const f=a.length;if(f<2)return!0;const y=a[0];for(let v=1;v<f;v++){const h=a[v];let e;if(Array.isArray(h))e=re(this,_,Et).call(this,h);else if(b(this,A).has(h))e=b(this,A).get(h).visible;else return(0,d.warn)(`Optional content group not found: ${h}`),!0;switch(y){case"And":if(!e)return!1;break;case"Or":if(e)return!0;break;case"Not":return!e;default:return!0}}return y==="And"},o.OptionalContentConfig=J},(w,o,O)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFDataTransportStream=void 0;var d=O(1),E=O(6);class L{constructor({length:k,initialData:A,progressiveDone:M=!1,contentDispositionFilename:P=null,disableRange:_=!1,disableStream:p=!1},u){if((0,d.assert)(u,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=M,this._contentDispositionFilename=P,(A==null?void 0:A.length)>0){const a=A instanceof Uint8Array&&A.byteLength===A.buffer.byteLength?A.buffer:new Uint8Array(A).buffer;this._queuedChunks.push(a)}this._pdfDataRangeTransport=u,this._isStreamingSupported=!p,this._isRangeSupported=!_,this._contentLength=k,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((a,f)=>{this._onReceiveData({begin:a,chunk:f})}),this._pdfDataRangeTransport.addProgressListener((a,f)=>{this._onProgress({loaded:a,total:f})}),this._pdfDataRangeTransport.addProgressiveReadListener(a=>{this._onReceiveData({chunk:a})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:k,chunk:A}){const M=A instanceof Uint8Array&&A.byteLength===A.buffer.byteLength?A.buffer:new Uint8Array(A).buffer;if(k===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(M):this._queuedChunks.push(M);else{const P=this._rangeReaders.some(function(_){return _._begin!==k?!1:(_._enqueue(M),!0)});(0,d.assert)(P,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var k;return((k=this._fullRequestReader)==null?void 0:k._loaded)??0}_onProgress(k){var A,M,P,_;k.total===void 0?(M=(A=this._rangeReaders[0])==null?void 0:A.onProgress)==null||M.call(A,{loaded:k.loaded}):(_=(P=this._fullRequestReader)==null?void 0:P.onProgress)==null||_.call(P,{loaded:k.loaded,total:k.total})}_onProgressiveDone(){var k;(k=this._fullRequestReader)==null||k.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(k){const A=this._rangeReaders.indexOf(k);A>=0&&this._rangeReaders.splice(A,1)}getFullReader(){(0,d.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const k=this._queuedChunks;return this._queuedChunks=null,new q(this,k,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(k,A){if(A<=this._progressiveDataLength)return null;const M=new J(this,k,A);return this._pdfDataRangeTransport.requestDataRange(k,A),this._rangeReaders.push(M),M}cancelAllRequests(k){var A;(A=this._fullRequestReader)==null||A.cancel(k);for(const M of this._rangeReaders.slice(0))M.cancel(k);this._pdfDataRangeTransport.abort()}}o.PDFDataTransportStream=L;class q{constructor(k,A,M=!1,P=null){this._stream=k,this._done=M||!1,this._filename=(0,E.isPdfFile)(P)?P:null,this._queuedChunks=A||[],this._loaded=0;for(const _ of this._queuedChunks)this._loaded+=_.byteLength;this._requests=[],this._headersReady=Promise.resolve(),k._fullRequestReader=this,this.onProgress=null}_enqueue(k){this._done||(this._requests.length>0?this._requests.shift().resolve({value:k,done:!1}):this._queuedChunks.push(k),this._loaded+=k.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const k=new d.PromiseCapability;return this._requests.push(k),k.promise}cancel(k){this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class J{constructor(k,A,M){this._stream=k,this._begin=A,this._end=M,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(k){if(!this._done){if(this._requests.length===0)this._queuedChunk=k;else{this._requests.shift().resolve({value:k,done:!1});for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const A=this._queuedChunk;return this._queuedChunk=null,{value:A,done:!1}}if(this._done)return{value:void 0,done:!0};const k=new d.PromiseCapability;return this._requests.push(k),k.promise}cancel(k){this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(w,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaText=void 0;class O{static textContent(E){const L=[],q={items:L,styles:Object.create(null)};function J(D){var M;if(!D)return;let k=null;const A=D.name;if(A==="#text")k=D.value;else if(O.shouldBuildText(A))(M=D==null?void 0:D.attributes)!=null&&M.textContent?k=D.attributes.textContent:D.value&&(k=D.value);else return;if(k!==null&&L.push({str:k}),!!D.children)for(const P of D.children)J(P)}return J(E),q}static shouldBuildText(E){return!(E==="textarea"||E==="input"||E==="option"||E==="select")}}o.XfaText=O},(w,o,O)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.NodeStandardFontDataFactory=o.NodeFilterFactory=o.NodeCanvasFactory=o.NodeCMapReaderFactory=void 0;var d=O(7);const E=function(k){return new Promise((A,M)=>{require$$5.readFile(k,(_,p)=>{if(_||!p){M(new Error(_));return}A(new Uint8Array(p))})})};class L extends d.BaseFilterFactory{}o.NodeFilterFactory=L;class q extends d.BaseCanvasFactory{_createCanvas(A,M){return require$$5.createCanvas(A,M)}}o.NodeCanvasFactory=q;class J extends d.BaseCMapReaderFactory{_fetchData(A,M){return E(A).then(P=>({cMapData:P,compressionType:M}))}}o.NodeCMapReaderFactory=J;class D extends d.BaseStandardFontDataFactory{_fetchData(A){return E(A)}}o.NodeStandardFontDataFactory=D},(w,o,O)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNodeStream=void 0;var d=O(1),E=O(22);const L=require$$5,q=require$$5,J=require$$5,D=require$$5,k=/^file:\/\/\/[a-zA-Z]:\//;function A(v){const h=D.parse(v);return h.protocol==="file:"||h.host?h:/^[a-z]:[/\\]/i.test(v)?D.parse(`file:///${v}`):(h.host||(h.protocol="file:"),h)}class M{constructor(h){this.source=h,this.url=A(h.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&h.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var h;return((h=this._fullRequestReader)==null?void 0:h._loaded)??0}getFullReader(){return(0,d.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new f(this):new u(this),this._fullRequestReader}getRangeReader(h,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new y(this,h,e):new a(this,h,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(h){var e;(e=this._fullRequestReader)==null||e.cancel(h);for(const n of this._rangeRequestReaders.slice(0))n.cancel(h)}}o.PDFNodeStream=M;class P{constructor(h){this._url=h.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=h.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=new d.PromiseCapability,this._headersCapability=new d.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const h=this._readableStream.read();return h===null?(this._readCapability=new d.PromiseCapability,this.read()):(this._loaded+=h.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(h).buffer,done:!1})}cancel(h){if(!this._readableStream){this._error(h);return}this._readableStream.destroy(h)}_error(h){this._storedError=h,this._readCapability.resolve()}_setReadableStream(h){this._readableStream=h,h.on("readable",()=>{this._readCapability.resolve()}),h.on("end",()=>{h.destroy(),this._done=!0,this._readCapability.resolve()}),h.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new d.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _{constructor(h){this._url=h.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new d.PromiseCapability;const e=h.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const h=this._readableStream.read();return h===null?(this._readCapability=new d.PromiseCapability,this.read()):(this._loaded+=h.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(h).buffer,done:!1})}cancel(h){if(!this._readableStream){this._error(h);return}this._readableStream.destroy(h)}_error(h){this._storedError=h,this._readCapability.resolve()}_setReadableStream(h){this._readableStream=h,h.on("readable",()=>{this._readCapability.resolve()}),h.on("end",()=>{h.destroy(),this._done=!0,this._readCapability.resolve()}),h.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function p(v,h){return{protocol:v.protocol,auth:v.auth,host:v.hostname,port:v.port,path:v.path,method:"GET",headers:h}}class u extends P{constructor(h){super(h);const e=n=>{if(n.statusCode===404){const C=new d.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C,this._headersCapability.reject(C);return}this._headersCapability.resolve(),this._setReadableStream(n);const r=C=>this._readableStream.headers[C.toLowerCase()],{allowRangeRequests:t,suggestedLength:c}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:h.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=t,this._contentLength=c||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(r)};this._request=null,this._url.protocol==="http:"?this._request=q.request(p(this._url,h.httpHeaders),e):this._request=J.request(p(this._url,h.httpHeaders),e),this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class a extends _{constructor(h,e,n){super(h),this._httpHeaders={};for(const t in h.httpHeaders){const c=h.httpHeaders[t];c!==void 0&&(this._httpHeaders[t]=c)}this._httpHeaders.Range=`bytes=${e}-${n-1}`;const r=t=>{if(t.statusCode===404){const c=new d.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=c;return}this._setReadableStream(t)};this._request=null,this._url.protocol==="http:"?this._request=q.request(p(this._url,this._httpHeaders),r):this._request=J.request(p(this._url,this._httpHeaders),r),this._request.on("error",t=>{this._storedError=t}),this._request.end()}}class f extends P{constructor(h){super(h);let e=decodeURIComponent(this._url.path);k.test(this._url.href)&&(e=e.replace(/^\//,"")),L.lstat(e,(n,r)=>{if(n){n.code==="ENOENT"&&(n=new d.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=n,this._headersCapability.reject(n);return}this._contentLength=r.size,this._setReadableStream(L.createReadStream(e)),this._headersCapability.resolve()})}}class y extends _{constructor(h,e,n){super(h);let r=decodeURIComponent(this._url.path);k.test(this._url.href)&&(r=r.replace(/^\//,"")),this._setReadableStream(L.createReadStream(r,{start:e,end:n-1}))}}},(w,o,O)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createResponseStatusError=D,o.extractFilenameFromHeader=J,o.validateRangeRequestCapabilities=q,o.validateResponseStatus=k;var d=O(1),E=O(23),L=O(6);function q({getResponseHeader:A,isHttp:M,rangeChunkSize:P,disableRange:_}){const p={allowRangeRequests:!1,suggestedLength:void 0},u=parseInt(A("Content-Length"),10);return!Number.isInteger(u)||(p.suggestedLength=u,u<=2*P)||_||!M||A("Accept-Ranges")!=="bytes"||(A("Content-Encoding")||"identity")!=="identity"||(p.allowRangeRequests=!0),p}function J(A){const M=A("Content-Disposition");if(M){let P=(0,E.getFilenameFromContentDispositionHeader)(M);if(P.includes("%"))try{P=decodeURIComponent(P)}catch{}if((0,L.isPdfFile)(P))return P}return null}function D(A,M){return A===404||A===0&&M.startsWith("file:")?new d.MissingPDFException('Missing PDF "'+M+'".'):new d.UnexpectedResponseException(`Unexpected server response (${A}) while retrieving PDF "${M}".`,A)}function k(A){return A===200||A===206}},(w,o,O)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getFilenameFromContentDispositionHeader=E;var d=O(1);function E(L){let q=!0,J=D("filename\\*","i").exec(L);if(J){J=J[1];let u=P(J);return u=unescape(u),u=_(u),u=p(u),A(u)}if(J=M(L),J){const u=p(J);return A(u)}if(J=D("filename","i").exec(L),J){J=J[1];let u=P(J);return u=p(u),A(u)}function D(u,a){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',a)}function k(u,a){if(u){if(!/^[\x00-\xFF]+$/.test(a))return a;try{const f=new TextDecoder(u,{fatal:!0}),y=(0,d.stringToBytes)(a);a=f.decode(y),q=!1}catch{}}return a}function A(u){return q&&/[\x80-\xff]/.test(u)&&(u=k("utf-8",u),q&&(u=k("iso-8859-1",u))),u}function M(u){const a=[];let f;const y=D("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=y.exec(u))!==null;){let[,h,e,n]=f;if(h=parseInt(h,10),h in a){if(h===0)break;continue}a[h]=[e,n]}const v=[];for(let h=0;h<a.length&&h in a;++h){let[e,n]=a[h];n=P(n),e&&(n=unescape(n),h===0&&(n=_(n))),v.push(n)}return v.join("")}function P(u){if(u.startsWith('"')){const a=u.slice(1).split('\\"');for(let f=0;f<a.length;++f){const y=a[f].indexOf('"');y!==-1&&(a[f]=a[f].slice(0,y),a.length=f+1),a[f]=a[f].replaceAll(/\\(.)/g,"$1")}u=a.join('"')}return u}function _(u){const a=u.indexOf("'");if(a===-1)return u;const f=u.slice(0,a),v=u.slice(a+1).replace(/^[^']*'/,"");return k(f,v)}function p(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(a,f,y,v){if(y==="q"||y==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(h,e){return String.fromCharCode(parseInt(e,16))}),k(f,v);try{v=atob(v)}catch{}return k(f,v)})}return""}},(w,o,O)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNetworkStream=void 0;var d=O(1),E=O(22);const L=200,q=206;function J(P){const _=P.response;return typeof _!="string"?_:(0,d.stringToBytes)(_).buffer}class D{constructor(_,p={}){this.url=_,this.isHttp=/^https?:/i.test(_),this.httpHeaders=this.isHttp&&p.httpHeaders||Object.create(null),this.withCredentials=p.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(_,p,u){const a={begin:_,end:p};for(const f in u)a[f]=u[f];return this.request(a)}requestFull(_){return this.request(_)}request(_){const p=new XMLHttpRequest,u=this.currXhrId++,a=this.pendingRequests[u]={xhr:p};p.open("GET",this.url),p.withCredentials=this.withCredentials;for(const f in this.httpHeaders){const y=this.httpHeaders[f];y!==void 0&&p.setRequestHeader(f,y)}return this.isHttp&&"begin"in _&&"end"in _?(p.setRequestHeader("Range",`bytes=${_.begin}-${_.end-1}`),a.expectedStatus=q):a.expectedStatus=L,p.responseType="arraybuffer",_.onError&&(p.onerror=function(f){_.onError(p.status)}),p.onreadystatechange=this.onStateChange.bind(this,u),p.onprogress=this.onProgress.bind(this,u),a.onHeadersReceived=_.onHeadersReceived,a.onDone=_.onDone,a.onError=_.onError,a.onProgress=_.onProgress,p.send(null),u}onProgress(_,p){var a;const u=this.pendingRequests[_];u&&((a=u.onProgress)==null||a.call(u,p))}onStateChange(_,p){var h,e,n;const u=this.pendingRequests[_];if(!u)return;const a=u.xhr;if(a.readyState>=2&&u.onHeadersReceived&&(u.onHeadersReceived(),delete u.onHeadersReceived),a.readyState!==4||!(_ in this.pendingRequests))return;if(delete this.pendingRequests[_],a.status===0&&this.isHttp){(h=u.onError)==null||h.call(u,a.status);return}const f=a.status||L;if(!(f===L&&u.expectedStatus===q)&&f!==u.expectedStatus){(e=u.onError)==null||e.call(u,a.status);return}const v=J(a);if(f===q){const r=a.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(r);u.onDone({begin:parseInt(t[1],10),chunk:v})}else v?u.onDone({begin:0,chunk:v}):(n=u.onError)==null||n.call(u,a.status)}getRequestXhr(_){return this.pendingRequests[_].xhr}isPendingRequest(_){return _ in this.pendingRequests}abortRequest(_){const p=this.pendingRequests[_].xhr;delete this.pendingRequests[_],p.abort()}}class k{constructor(_){this._source=_,this._manager=new D(_.url,{httpHeaders:_.httpHeaders,withCredentials:_.withCredentials}),this._rangeChunkSize=_.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(_){const p=this._rangeRequestReaders.indexOf(_);p>=0&&this._rangeRequestReaders.splice(p,1)}getFullReader(){return(0,d.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new A(this._manager,this._source),this._fullRequestReader}getRangeReader(_,p){const u=new M(this._manager,_,p);return u.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(u),u}cancelAllRequests(_){var p;(p=this._fullRequestReader)==null||p.cancel(_);for(const u of this._rangeRequestReaders.slice(0))u.cancel(_)}}o.PDFNetworkStream=k;class A{constructor(_,p){this._manager=_;const u={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=p.url,this._fullRequestId=_.requestFull(u),this._headersReceivedCapability=new d.PromiseCapability,this._disableRange=p.disableRange||!1,this._contentLength=p.length,this._rangeChunkSize=p.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const _=this._fullRequestId,p=this._manager.getRequestXhr(_),u=y=>p.getResponseHeader(y),{allowRangeRequests:a,suggestedLength:f}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=f||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(u),this._isRangeSupported&&this._manager.abortRequest(_),this._headersReceivedCapability.resolve()}_onDone(_){if(_&&(this._requests.length>0?this._requests.shift().resolve({value:_.chunk,done:!1}):this._cachedChunks.push(_.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(_){this._storedError=(0,E.createResponseStatusError)(_,this._url),this._headersReceivedCapability.reject(this._storedError);for(const p of this._requests)p.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(_){var p;(p=this.onProgress)==null||p.call(this,{loaded:_.loaded,total:_.lengthComputable?_.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const _=new d.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0,this._headersReceivedCapability.reject(_);for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class M{constructor(_,p,u){this._manager=_;const a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=_.url,this._requestId=_.requestRange(p,u,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var _;(_=this.onClosed)==null||_.call(this,this)}_onDone(_){const p=_.chunk;this._requests.length>0?this._requests.shift().resolve({value:p,done:!1}):this._queuedChunk=p,this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(_){this._storedError=(0,E.createResponseStatusError)(_,this._url);for(const p of this._requests)p.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(_){var p;this.isStreamingSupported||(p=this.onProgress)==null||p.call(this,{loaded:_.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const p=this._queuedChunk;return this._queuedChunk=null,{value:p,done:!1}}if(this._done)return{value:void 0,done:!0};const _=new d.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(w,o,O)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFFetchStream=void 0;var d=O(1),E=O(22);function L(M,P,_){return{method:"GET",headers:M,signal:_.signal,mode:"cors",credentials:P?"include":"same-origin",redirect:"follow"}}function q(M){const P=new Headers;for(const _ in M){const p=M[_];p!==void 0&&P.append(_,p)}return P}function J(M){return M instanceof Uint8Array?M.buffer:M instanceof ArrayBuffer?M:((0,d.warn)(`getArrayBuffer - unexpected data format: ${M}`),new Uint8Array(M).buffer)}class D{constructor(P){this.source=P,this.isHttp=/^https?:/i.test(P.url),this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var P;return((P=this._fullRequestReader)==null?void 0:P._loaded)??0}getFullReader(){return(0,d.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new k(this),this._fullRequestReader}getRangeReader(P,_){if(_<=this._progressiveDataLength)return null;const p=new A(this,P,_);return this._rangeRequestReaders.push(p),p}cancelAllRequests(P){var _;(_=this._fullRequestReader)==null||_.cancel(P);for(const p of this._rangeRequestReaders.slice(0))p.cancel(P)}}o.PDFFetchStream=D;class k{constructor(P){this._stream=P,this._reader=null,this._loaded=0,this._filename=null;const _=P.source;this._withCredentials=_.withCredentials||!1,this._contentLength=_.length,this._headersCapability=new d.PromiseCapability,this._disableRange=_.disableRange||!1,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!_.disableStream,this._isRangeSupported=!_.disableRange,this._headers=q(this._stream.httpHeaders);const p=_.url;fetch(p,L(this._headers,this._withCredentials,this._abortController)).then(u=>{if(!(0,E.validateResponseStatus)(u.status))throw(0,E.createResponseStatusError)(u.status,p);this._reader=u.body.getReader(),this._headersCapability.resolve();const a=v=>u.headers.get(v),{allowRangeRequests:f,suggestedLength:y}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=f,this._contentLength=y||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new d.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var p;await this._headersCapability.promise;const{value:P,done:_}=await this._reader.read();return _?{value:P,done:_}:(this._loaded+=P.byteLength,(p=this.onProgress)==null||p.call(this,{loaded:this._loaded,total:this._contentLength}),{value:J(P),done:!1})}cancel(P){var _;(_=this._reader)==null||_.cancel(P),this._abortController.abort()}}class A{constructor(P,_,p){this._stream=P,this._reader=null,this._loaded=0;const u=P.source;this._withCredentials=u.withCredentials||!1,this._readCapability=new d.PromiseCapability,this._isStreamingSupported=!u.disableStream,this._abortController=new AbortController,this._headers=q(this._stream.httpHeaders),this._headers.append("Range",`bytes=${_}-${p-1}`);const a=u.url;fetch(a,L(this._headers,this._withCredentials,this._abortController)).then(f=>{if(!(0,E.validateResponseStatus)(f.status))throw(0,E.createResponseStatusError)(f.status,a);this._readCapability.resolve(),this._reader=f.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var p;await this._readCapability.promise;const{value:P,done:_}=await this._reader.read();return _?{value:P,done:_}:(this._loaded+=P.byteLength,(p=this.onProgress)==null||p.call(this,{loaded:this._loaded}),{value:J(P),done:!1})}cancel(P){var _;(_=this._reader)==null||_.cancel(P),this._abortController.abort()}}},(w,o,O)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TextLayerRenderTask=void 0,o.renderTextLayer=u,o.updateTextLayer=a;var d=O(1),E=O(6);const L=1e5,q=30,J=.8,D=new Map;function k(f,y){let v;if(y&&d.FeatureTest.isOffscreenCanvasSupported)v=new OffscreenCanvas(f,f).getContext("2d",{alpha:!1});else{const h=document.createElement("canvas");h.width=h.height=f,v=h.getContext("2d",{alpha:!1})}return v}function A(f,y){const v=D.get(f);if(v)return v;const h=k(q,y);h.font=`${q}px ${f}`;const e=h.measureText("");let n=e.fontBoundingBoxAscent,r=Math.abs(e.fontBoundingBoxDescent);if(n){const c=n/(n+r);return D.set(f,c),h.canvas.width=h.canvas.height=0,c}h.strokeStyle="red",h.clearRect(0,0,q,q),h.strokeText("g",0,0);let t=h.getImageData(0,0,q,q).data;r=0;for(let c=t.length-1-3;c>=0;c-=4)if(t[c]>0){r=Math.ceil(c/4/q);break}h.clearRect(0,0,q,q),h.strokeText("A",0,q),t=h.getImageData(0,0,q,q).data,n=0;for(let c=0,C=t.length;c<C;c+=4)if(t[c]>0){n=q-Math.floor(c/4/q);break}if(h.canvas.width=h.canvas.height=0,n){const c=n/(n+r);return D.set(f,c),c}return D.set(f,J),J}function M(f,y,v){const h=document.createElement("span"),e={angle:0,canvasWidth:0,hasText:y.str!=="",hasEOL:y.hasEOL,fontSize:0};f._textDivs.push(h);const n=d.Util.transform(f._transform,y.transform);let r=Math.atan2(n[1],n[0]);const t=v[y.fontName];t.vertical&&(r+=Math.PI/2);const c=Math.hypot(n[2],n[3]),C=c*A(t.fontFamily,f._isOffscreenCanvasSupported);let i,S;r===0?(i=n[4],S=n[5]-C):(i=n[4]+C*Math.sin(r),S=n[5]-C*Math.cos(r));const H="calc(var(--scale-factor)*",X=h.style;f._container===f._rootContainer?(X.left=`${(100*i/f._pageWidth).toFixed(2)}%`,X.top=`${(100*S/f._pageHeight).toFixed(2)}%`):(X.left=`${H}${i.toFixed(2)}px)`,X.top=`${H}${S.toFixed(2)}px)`),X.fontSize=`${H}${c.toFixed(2)}px)`,X.fontFamily=t.fontFamily,e.fontSize=c,h.setAttribute("role","presentation"),h.textContent=y.str,h.dir=y.dir,f._fontInspectorEnabled&&(h.dataset.fontName=y.fontName),r!==0&&(e.angle=r*(180/Math.PI));let Q=!1;if(y.str.length>1)Q=!0;else if(y.str!==" "&&y.transform[0]!==y.transform[3]){const ee=Math.abs(y.transform[0]),de=Math.abs(y.transform[3]);ee!==de&&Math.max(ee,de)/Math.min(ee,de)>1.5&&(Q=!0)}Q&&(e.canvasWidth=t.vertical?y.height:y.width),f._textDivProperties.set(h,e),f._isReadableStream&&f._layoutText(h)}function P(f){const{div:y,scale:v,properties:h,ctx:e,prevFontSize:n,prevFontFamily:r}=f,{style:t}=y;let c="";if(h.canvasWidth!==0&&h.hasText){const{fontFamily:C}=t,{canvasWidth:i,fontSize:S}=h;(n!==S||r!==C)&&(e.font=`${S*v}px ${C}`,f.prevFontSize=S,f.prevFontFamily=C);const{width:H}=e.measureText(y.textContent);H>0&&(c=`scaleX(${i*v/H})`)}h.angle!==0&&(c=`rotate(${h.angle}deg) ${c}`),c.length>0&&(t.transform=c)}function _(f){if(f._canceled)return;const y=f._textDivs,v=f._capability;if(y.length>L){v.resolve();return}if(!f._isReadableStream)for(const e of y)f._layoutText(e);v.resolve()}class p{constructor({textContentSource:y,container:v,viewport:h,textDivs:e,textDivProperties:n,textContentItemsStr:r,isOffscreenCanvasSupported:t}){var H;this._textContentSource=y,this._isReadableStream=y instanceof ReadableStream,this._container=this._rootContainer=v,this._textDivs=e||[],this._textContentItemsStr=r||[],this._isOffscreenCanvasSupported=t,this._fontInspectorEnabled=!!((H=globalThis.FontInspector)!=null&&H.enabled),this._reader=null,this._textDivProperties=n||new WeakMap,this._canceled=!1,this._capability=new d.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:h.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:k(0,t)};const{pageWidth:c,pageHeight:C,pageX:i,pageY:S}=h.rawDims;this._transform=[1,0,0,-1,-i,S+C],this._pageWidth=c,this._pageHeight=C,(0,E.setLayerDimensions)(v,h),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new d.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new d.AbortException("TextLayer task cancelled."))}_processItems(y,v){for(const h of y){if(h.str===void 0){if(h.type==="beginMarkedContentProps"||h.type==="beginMarkedContent"){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),h.id!==null&&this._container.setAttribute("id",`${h.id}`),e.append(this._container)}else h.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(h.str),M(this,h,v)}}_layoutText(y){const v=this._layoutTextParams.properties=this._textDivProperties.get(y);if(this._layoutTextParams.div=y,P(this._layoutTextParams),v.hasText&&this._container.append(y),v.hasEOL){const h=document.createElement("br");h.setAttribute("role","presentation"),this._container.append(h)}}_render(){const y=new d.PromiseCapability;let v=Object.create(null);if(this._isReadableStream){const h=()=>{this._reader.read().then(({value:e,done:n})=>{if(n){y.resolve();return}Object.assign(v,e.styles),this._processItems(e.items,v),h()},y.reject)};this._reader=this._textContentSource.getReader(),h()}else if(this._textContentSource){const{items:h,styles:e}=this._textContentSource;this._processItems(h,e),y.resolve()}else throw new Error('No "textContentSource" parameter specified.');y.promise.then(()=>{v=null,_(this)},this._capability.reject)}}o.TextLayerRenderTask=p;function u(f){!f.textContentSource&&(f.textContent||f.textContentStream)&&((0,E.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),f.textContentSource=f.textContent||f.textContentStream);const{container:y,viewport:v}=f,h=getComputedStyle(y),e=h.getPropertyValue("visibility"),n=parseFloat(h.getPropertyValue("--scale-factor"));e==="visible"&&(!n||Math.abs(n-v.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const r=new p(f);return r._render(),r}function a({container:f,viewport:y,textDivs:v,textDivProperties:h,isOffscreenCanvasSupported:e,mustRotate:n=!0,mustRescale:r=!0}){if(n&&(0,E.setLayerDimensions)(f,{rotation:y.rotation}),r){const t=k(0,e),C={prevFontSize:null,prevFontFamily:null,div:null,scale:y.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:t};for(const i of v)C.properties=h.get(i),C.div=i,P(C)}}},(w,o,O)=>{var k,A,M,P,_,p,u,a,f,At,v,Vt,e,vt,r,St;Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationEditorLayer=void 0;var d=O(1),E=O(5),L=O(28),q=O(29),J=O(6);const c=class c{constructor(i){Z(this,f);Z(this,v);Z(this,e);Z(this,r);Z(this,k,void 0);Z(this,A,!1);Z(this,M,this.pointerup.bind(this));Z(this,P,this.pointerdown.bind(this));Z(this,_,new Map);Z(this,p,!1);Z(this,u,!1);Z(this,a,void 0);c._initialized||(c._initialized=!0,L.FreeTextEditor.initialize(i.l10n),q.InkEditor.initialize(i.l10n)),i.uiManager.registerEditorTypes([L.FreeTextEditor,q.InkEditor]),me(this,a,i.uiManager),this.pageIndex=i.pageIndex,this.div=i.div,me(this,k,i.accessibilityManager),b(this,a).addLayer(this)}get isEmpty(){return b(this,_).size===0}updateToolbar(i){b(this,a).updateToolbar(i)}updateMode(i=b(this,a).getMode()){re(this,r,St).call(this),i===d.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),b(this,a).unselectAll(),i!==d.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",i===d.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",i===d.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(i){if(!i&&b(this,a).getMode()!==d.AnnotationEditorType.INK)return;if(!i){for(const H of b(this,_).values())if(H.isEmpty()){H.setInBackground();return}}re(this,e,vt).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(i){b(this,a).setEditingState(i)}addCommands(i){b(this,a).addCommands(i)}enable(){this.div.style.pointerEvents="auto";for(const i of b(this,_).values())i.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const i of b(this,_).values())i.disableEditing();re(this,r,St).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(i){b(this,a).getActive()!==i&&b(this,a).setActiveEditor(i)}enableClick(){this.div.addEventListener("pointerdown",b(this,P)),this.div.addEventListener("pointerup",b(this,M))}disableClick(){this.div.removeEventListener("pointerdown",b(this,P)),this.div.removeEventListener("pointerup",b(this,M))}attach(i){b(this,_).set(i.id,i)}detach(i){var S;b(this,_).delete(i.id),(S=b(this,k))==null||S.removePointerInTextLayer(i.contentDiv)}remove(i){b(this,a).removeEditor(i),this.detach(i),i.div.style.display="none",setTimeout(()=>{i.div.style.display="",i.div.remove(),i.isAttachedToDOM=!1,document.activeElement===document.body&&b(this,a).focusMainContainer()},0),b(this,u)||this.addInkEditorIfNeeded(!1)}add(i){if(re(this,f,At).call(this,i),b(this,a).addEditor(i),this.attach(i),!i.isAttachedToDOM){const S=i.render();this.div.append(S),i.isAttachedToDOM=!0}this.moveEditorInDOM(i),i.onceAdded(),b(this,a).addToAnnotationStorage(i)}moveEditorInDOM(i){var S;(S=b(this,k))==null||S.moveElementInDOM(this.div,i.div,i.contentDiv,!0)}addOrRebuild(i){i.needsToBeRebuilt()?i.rebuild():this.add(i)}addANewEditor(i){const S=()=>{this.addOrRebuild(i)},H=()=>{i.remove()};this.addCommands({cmd:S,undo:H,mustExec:!0})}addUndoableEditor(i){const S=()=>{this.addOrRebuild(i)},H=()=>{i.remove()};this.addCommands({cmd:S,undo:H,mustExec:!1})}getNextId(){return b(this,a).getId()}deserialize(i){switch(i.annotationType){case d.AnnotationEditorType.FREETEXT:return L.FreeTextEditor.deserialize(i,this,b(this,a));case d.AnnotationEditorType.INK:return q.InkEditor.deserialize(i,this,b(this,a))}return null}setSelected(i){b(this,a).setSelected(i)}toggleSelected(i){b(this,a).toggleSelected(i)}isSelected(i){return b(this,a).isSelected(i)}unselect(i){b(this,a).unselect(i)}pointerup(i){const{isMac:S}=d.FeatureTest.platform;if(!(i.button!==0||i.ctrlKey&&S)&&i.target===this.div&&b(this,p)){if(me(this,p,!1),!b(this,A)){me(this,A,!0);return}re(this,e,vt).call(this,i)}}pointerdown(i){const{isMac:S}=d.FeatureTest.platform;if(i.button!==0||i.ctrlKey&&S||i.target!==this.div)return;me(this,p,!0);const H=b(this,a).getActive();me(this,A,!H||H.isEmpty())}drop(i){const S=i.dataTransfer.getData("text/plain"),H=b(this,a).getEditor(S);if(!H)return;i.preventDefault(),i.dataTransfer.dropEffect="move",re(this,f,At).call(this,H);const X=this.div.getBoundingClientRect(),Q=i.clientX-X.x,ee=i.clientY-X.y;H.translate(Q-H.startX,ee-H.startY),this.moveEditorInDOM(H),H.div.focus()}dragover(i){i.preventDefault()}destroy(){var i,S;((i=b(this,a).getActive())==null?void 0:i.parent)===this&&b(this,a).setActiveEditor(null);for(const H of b(this,_).values())(S=b(this,k))==null||S.removePointerInTextLayer(H.contentDiv),H.setParent(null),H.isAttachedToDOM=!1,H.div.remove();this.div=null,b(this,_).clear(),b(this,a).removeLayer(this)}render({viewport:i}){this.viewport=i,(0,J.setLayerDimensions)(this.div,i),(0,E.bindEvents)(this,this.div,["dragover","drop"]);for(const S of b(this,a).getEditors(this.pageIndex))this.add(S);this.updateMode()}update({viewport:i}){b(this,a).commitOrRemove(),this.viewport=i,(0,J.setLayerDimensions)(this.div,{rotation:i.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:i,pageHeight:S}=this.viewport.rawDims;return[i,S]}};k=new WeakMap,A=new WeakMap,M=new WeakMap,P=new WeakMap,_=new WeakMap,p=new WeakMap,u=new WeakMap,a=new WeakMap,f=new WeakSet,At=function(i){var S;i.parent!==this&&(this.attach(i),(S=i.parent)==null||S.detach(i),i.setParent(this),i.div&&i.isAttachedToDOM&&(i.div.remove(),this.div.append(i.div)))},v=new WeakSet,Vt=function(i){switch(b(this,a).getMode()){case d.AnnotationEditorType.FREETEXT:return new L.FreeTextEditor(i);case d.AnnotationEditorType.INK:return new q.InkEditor(i)}return null},e=new WeakSet,vt=function(i){const S=this.getNextId(),H=re(this,v,Vt).call(this,{parent:this,id:S,x:i.offsetX,y:i.offsetY,uiManager:b(this,a)});return H&&this.add(H),H},r=new WeakSet,St=function(){me(this,u,!0);for(const i of b(this,_).values())i.isEmpty()&&i.remove();me(this,u,!1)},Oe(c,"_initialized",!1);let D=c;o.AnnotationEditorLayer=D},(w,o,O)=>{var J,D,k,A,M,P,_,p,u,a,zt,y,$t,h,Xt,n,Rt;Object.defineProperty(o,"__esModule",{value:!0}),o.FreeTextEditor=void 0;var d=O(1),E=O(5),L=O(4);const t=class t extends L.AnnotationEditor{constructor(i){super({...i,name:"freeTextEditor"});Z(this,a);Z(this,y);Z(this,h);Z(this,n);Z(this,J,this.editorDivBlur.bind(this));Z(this,D,this.editorDivFocus.bind(this));Z(this,k,this.editorDivInput.bind(this));Z(this,A,this.editorDivKeydown.bind(this));Z(this,M,void 0);Z(this,P,"");Z(this,_,`${this.id}-editor`);Z(this,p,!1);Z(this,u,void 0);me(this,M,i.color||t._defaultColor||L.AnnotationEditor._defaultLineColor),me(this,u,i.fontSize||t._defaultFontSize)}static initialize(i){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(H=>[H,i.get(H)]));const S=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(S.getPropertyValue("--freetext-padding"))}static updateDefaultParams(i,S){switch(i){case d.AnnotationEditorParamsType.FREETEXT_SIZE:t._defaultFontSize=S;break;case d.AnnotationEditorParamsType.FREETEXT_COLOR:t._defaultColor=S;break}}updateParams(i,S){switch(i){case d.AnnotationEditorParamsType.FREETEXT_SIZE:re(this,a,zt).call(this,S);break;case d.AnnotationEditorParamsType.FREETEXT_COLOR:re(this,y,$t).call(this,S);break}}static get defaultPropertiesToUpdate(){return[[d.AnnotationEditorParamsType.FREETEXT_SIZE,t._defaultFontSize],[d.AnnotationEditorParamsType.FREETEXT_COLOR,t._defaultColor||L.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[d.AnnotationEditorParamsType.FREETEXT_SIZE,b(this,u)],[d.AnnotationEditorParamsType.FREETEXT_COLOR,b(this,M)]]}getInitialTranslation(){const i=this.parentScale;return[-t._internalPadding*i,-(t._internalPadding+b(this,u))*i]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(d.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",b(this,A)),this.editorDiv.addEventListener("focus",b(this,D)),this.editorDiv.addEventListener("blur",b(this,J)),this.editorDiv.addEventListener("input",b(this,k)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",b(this,_)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",b(this,A)),this.editorDiv.removeEventListener("focus",b(this,D)),this.editorDiv.removeEventListener("blur",b(this,J)),this.editorDiv.removeEventListener("input",b(this,k)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(i){super.focusin(i),i.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),b(this,p)||(me(this,p,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),me(this,P,re(this,h,Xt).call(this).trimEnd()),re(this,n,Rt).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(i){this.enableEditMode(),this.editorDiv.focus()}keydown(i){i.target===this.div&&i.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(i){t._keyboardManager.exec(this,i)}editorDivFocus(i){this.isEditing=!0}editorDivBlur(i){this.isEditing=!1}editorDivInput(i){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let i,S;this.width&&(i=this.x,S=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",b(this,_)),this.enableEditing(),t._l10nPromise.get("editor_free_text2_aria_label").then(X=>{var Q;return(Q=this.editorDiv)==null?void 0:Q.setAttribute("aria-label",X)}),t._l10nPromise.get("free_text2_default_content").then(X=>{var Q;return(Q=this.editorDiv)==null?void 0:Q.setAttribute("default-content",X)}),this.editorDiv.contentEditable=!0;const{style:H}=this.editorDiv;if(H.fontSize=`calc(${b(this,u)}px * var(--scale-factor))`,H.color=b(this,M),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,E.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[X,Q]=this.parentDimensions;this.setAt(i*X,S*Q,this.width*X,this.height*Q);for(const ee of b(this,P).split(`
`)){const de=document.createElement("div");de.append(ee?document.createTextNode(ee):document.createElement("br")),this.editorDiv.append(de)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(i,S,H){const X=super.deserialize(i,S,H);return me(X,u,i.fontSize),me(X,M,d.Util.makeHexColor(...i.color)),me(X,P,i.value),X}serialize(){if(this.isEmpty())return null;const i=t._internalPadding*this.parentScale,S=this.getRect(i,i),H=L.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:b(this,M));return{annotationType:d.AnnotationEditorType.FREETEXT,color:H,fontSize:b(this,u),value:b(this,P),pageIndex:this.pageIndex,rect:S,rotation:this.rotation}}};J=new WeakMap,D=new WeakMap,k=new WeakMap,A=new WeakMap,M=new WeakMap,P=new WeakMap,_=new WeakMap,p=new WeakMap,u=new WeakMap,a=new WeakSet,zt=function(i){const S=X=>{this.editorDiv.style.fontSize=`calc(${X}px * var(--scale-factor))`,this.translate(0,-(X-b(this,u))*this.parentScale),me(this,u,X),re(this,n,Rt).call(this)},H=b(this,u);this.addCommands({cmd:()=>{S(i)},undo:()=>{S(H)},mustExec:!0,type:d.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},y=new WeakSet,$t=function(i){const S=b(this,M);this.addCommands({cmd:()=>{me(this,M,this.editorDiv.style.color=i)},undo:()=>{me(this,M,this.editorDiv.style.color=S)},mustExec:!0,type:d.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},h=new WeakSet,Xt=function(){const i=this.editorDiv.getElementsByTagName("div");if(i.length===0)return this.editorDiv.innerText;const S=[];for(const H of i)S.push(H.innerText.replace(/\r\n?|\n/,""));return S.join(`
`)},n=new WeakSet,Rt=function(){const[i,S]=this.parentDimensions;let H;if(this.isAttachedToDOM)H=this.div.getBoundingClientRect();else{const{currentLayer:X,div:Q}=this,ee=Q.style.display;Q.style.display="hidden",X.div.append(this.div),H=Q.getBoundingClientRect(),Q.remove(),Q.style.display=ee}this.width=H.width/i,this.height=H.height/S},Oe(t,"_freeTextDefaultContent",""),Oe(t,"_l10nPromise"),Oe(t,"_internalPadding",0),Oe(t,"_defaultColor",null),Oe(t,"_defaultFontSize",10),Oe(t,"_keyboardManager",new E.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.prototype.commitOrRemove]])),Oe(t,"_type","freetext");let q=t;o.FreeTextEditor=q},(w,o,O)=>{var k,A,M,P,_,p,u,a,f,y,v,h,e,n,r,Kt,c,Yt,i,Jt,H,Qt,Q,Pt,de,Zt,ue,es,Ee,ts,ye,$e,m,Ct,T,lt,G,ct,I,Ze,U,Tt,l,ut,R,kt,V,ss,Y,ns,oe,rs,ne,jt,fe,dt,ve,et,K,wt;Object.defineProperty(o,"__esModule",{value:!0}),o.InkEditor=void 0,Object.defineProperty(o,"fitCurve",{enumerable:!0,get:function(){return L.fitCurve}});var d=O(1),E=O(4),L=O(30),q=O(5);const J=16,Ae=class Ae extends E.AnnotationEditor{constructor(F){super({...F,name:"inkEditor"});Z(this,r);Z(this,c);Z(this,i);Z(this,H);Z(this,Q);Z(this,de);Z(this,ue);Z(this,Ee);Z(this,ye);Z(this,m);Z(this,T);Z(this,G);Z(this,I);Z(this,U);Z(this,l);Z(this,V);Z(this,Y);Z(this,oe);Z(this,ne);Z(this,fe);Z(this,ve);Z(this,K);Z(this,k,0);Z(this,A,0);Z(this,M,0);Z(this,P,this.canvasPointermove.bind(this));Z(this,_,this.canvasPointerleave.bind(this));Z(this,p,this.canvasPointerup.bind(this));Z(this,u,this.canvasPointerdown.bind(this));Z(this,a,!1);Z(this,f,!1);Z(this,y,null);Z(this,v,null);Z(this,h,0);Z(this,e,0);Z(this,n,null);this.color=F.color||null,this.thickness=F.thickness||null,this.opacity=F.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(F){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(B=>[B,F.get(B)]))}static updateDefaultParams(F,B){switch(F){case d.AnnotationEditorParamsType.INK_THICKNESS:Ae._defaultThickness=B;break;case d.AnnotationEditorParamsType.INK_COLOR:Ae._defaultColor=B;break;case d.AnnotationEditorParamsType.INK_OPACITY:Ae._defaultOpacity=B/100;break}}updateParams(F,B){switch(F){case d.AnnotationEditorParamsType.INK_THICKNESS:re(this,r,Kt).call(this,B);break;case d.AnnotationEditorParamsType.INK_COLOR:re(this,c,Yt).call(this,B);break;case d.AnnotationEditorParamsType.INK_OPACITY:re(this,i,Jt).call(this,B);break}}static get defaultPropertiesToUpdate(){return[[d.AnnotationEditorParamsType.INK_THICKNESS,Ae._defaultThickness],[d.AnnotationEditorParamsType.INK_COLOR,Ae._defaultColor||E.AnnotationEditor._defaultLineColor],[d.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ae._defaultOpacity*100)]]}get propertiesToUpdate(){return[[d.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ae._defaultThickness],[d.AnnotationEditorParamsType.INK_COLOR,this.color||Ae._defaultColor||E.AnnotationEditor._defaultLineColor],[d.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ae._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(re(this,T,lt).call(this),re(this,G,ct).call(this)),this.isAttachedToDOM||(this.parent.add(this),re(this,I,Ze).call(this)),re(this,ve,et).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,b(this,v).disconnect(),me(this,v,null),super.remove())}setParent(F){!this.parent&&F?this._uiManager.removeShouldRescale(this):this.parent&&F===null&&this._uiManager.addShouldRescale(this),super.setParent(F)}onScaleChanging(){const[F,B]=this.parentDimensions,le=this.width*F,xe=this.height*B;this.setDimensions(le,xe)}enableEditMode(){b(this,a)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",b(this,u)),this.canvas.addEventListener("pointerup",b(this,p)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",b(this,u)),this.canvas.removeEventListener("pointerup",b(this,p)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){b(this,a)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),me(this,a,!0),this.div.classList.add("disabled"),re(this,ve,et).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(F){super.focusin(F),this.enableEditMode()}canvasPointerdown(F){F.button!==0||!this.isInEditMode()||b(this,a)||(this.setInForeground(),F.type!=="mouse"&&this.div.focus(),F.stopPropagation(),this.canvas.addEventListener("pointerleave",b(this,_)),this.canvas.addEventListener("pointermove",b(this,P)),re(this,de,Zt).call(this,F.offsetX,F.offsetY))}canvasPointermove(F){F.stopPropagation(),re(this,ue,es).call(this,F.offsetX,F.offsetY)}canvasPointerup(F){F.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(F.stopPropagation(),re(this,m,Ct).call(this,F),this.setInBackground())}canvasPointerleave(F){re(this,m,Ct).call(this,F),this.setInBackground()}render(){if(this.div)return this.div;let F,B;this.width&&(F=this.x,B=this.y),super.render(),Ae._l10nPromise.get("editor_ink2_aria_label").then(je=>{var ke;return(ke=this.div)==null?void 0:ke.setAttribute("aria-label",je)});const[le,xe,Pe,Te]=re(this,H,Qt).call(this);if(this.setAt(le,xe,0,0),this.setDims(Pe,Te),re(this,T,lt).call(this),this.width){const[je,ke]=this.parentDimensions;this.setAt(F*je,B*ke,this.width*je,this.height*ke),me(this,f,!0),re(this,I,Ze).call(this),this.setDims(this.width*je,this.height*ke),re(this,ye,$e).call(this),re(this,K,wt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return re(this,G,ct).call(this),this.div}setDimensions(F,B){const le=Math.round(F),xe=Math.round(B);if(b(this,h)===le&&b(this,e)===xe)return;me(this,h,le),me(this,e,xe),this.canvas.style.visibility="hidden",b(this,k)&&Math.abs(b(this,k)-F/B)>.01&&(B=Math.ceil(F/b(this,k)),this.setDims(F,B));const[Pe,Te]=this.parentDimensions;this.width=F/Pe,this.height=B/Te,b(this,a)&&re(this,U,Tt).call(this,F,B),re(this,I,Ze).call(this),re(this,ye,$e).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(F,B,le){var De,Ie;const xe=super.deserialize(F,B,le);xe.thickness=F.thickness,xe.color=d.Util.makeHexColor(...F.color),xe.opacity=F.opacity;const[Pe,Te]=xe.pageDimensions,je=xe.width*Pe,ke=xe.height*Te,Me=xe.parentScale,Ce=F.thickness/2;me(xe,k,je/ke),me(xe,a,!0),me(xe,h,Math.round(je)),me(xe,e,Math.round(ke));for(const{bezier:Fe}of F.paths){const Ue=[];xe.paths.push(Ue);let Ge=Me*(Fe[0]-Ce),qe=Me*(ke-Fe[1]-Ce);for(let Ne=2,Be=Fe.length;Ne<Be;Ne+=6){const Ve=Me*(Fe[Ne]-Ce),Xe=Me*(ke-Fe[Ne+1]-Ce),nt=Me*(Fe[Ne+2]-Ce),rt=Me*(ke-Fe[Ne+3]-Ce),Dt=Me*(Fe[Ne+4]-Ce),Ot=Me*(ke-Fe[Ne+5]-Ce);Ue.push([[Ge,qe],[Ve,Xe],[nt,rt],[Dt,Ot]]),Ge=Dt,qe=Ot}const We=re(this,R,kt).call(this,Ue);xe.bezierPath2D.push(We)}const Le=re(De=xe,ne,jt).call(De);return me(xe,M,Math.max(J,Le[2]-Le[0])),me(xe,A,Math.max(J,Le[3]-Le[1])),re(Ie=xe,U,Tt).call(Ie,je,ke),xe}serialize(){if(this.isEmpty())return null;const F=this.getRect(0,0),B=this.rotation%180===0?F[3]-F[1]:F[2]-F[0],le=E.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:d.AnnotationEditorType.INK,color:le,thickness:this.thickness,opacity:this.opacity,paths:re(this,V,ss).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,B),pageIndex:this.pageIndex,rect:F,rotation:this.rotation}}};k=new WeakMap,A=new WeakMap,M=new WeakMap,P=new WeakMap,_=new WeakMap,p=new WeakMap,u=new WeakMap,a=new WeakMap,f=new WeakMap,y=new WeakMap,v=new WeakMap,h=new WeakMap,e=new WeakMap,n=new WeakMap,r=new WeakSet,Kt=function(F){const B=this.thickness;this.addCommands({cmd:()=>{this.thickness=F,re(this,ve,et).call(this)},undo:()=>{this.thickness=B,re(this,ve,et).call(this)},mustExec:!0,type:d.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},c=new WeakSet,Yt=function(F){const B=this.color;this.addCommands({cmd:()=>{this.color=F,re(this,ye,$e).call(this)},undo:()=>{this.color=B,re(this,ye,$e).call(this)},mustExec:!0,type:d.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},i=new WeakSet,Jt=function(F){F/=100;const B=this.opacity;this.addCommands({cmd:()=>{this.opacity=F,re(this,ye,$e).call(this)},undo:()=>{this.opacity=B,re(this,ye,$e).call(this)},mustExec:!0,type:d.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},H=new WeakSet,Qt=function(){const{parentRotation:F,parentDimensions:[B,le]}=this;switch(F){case 90:return[0,le,le,B];case 180:return[B,le,B,le];case 270:return[B,0,le,B];default:return[0,0,B,le]}},Q=new WeakSet,Pt=function(){const{ctx:F,color:B,opacity:le,thickness:xe,parentScale:Pe,scaleFactor:Te}=this;F.lineWidth=xe*Pe/Te,F.lineCap="round",F.lineJoin="round",F.miterLimit=10,F.strokeStyle=`${B}${(0,q.opacityToHex)(le)}`},de=new WeakSet,Zt=function(F,B){this.isEditing=!0,b(this,f)||(me(this,f,!0),re(this,I,Ze).call(this),this.thickness||(this.thickness=Ae._defaultThickness),this.color||(this.color=Ae._defaultColor||E.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ae._defaultOpacity)),this.currentPath.push([F,B]),me(this,y,null),re(this,Q,Pt).call(this),this.ctx.beginPath(),this.ctx.moveTo(F,B),me(this,n,()=>{b(this,n)&&(b(this,y)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):re(this,ye,$e).call(this),this.ctx.lineTo(...b(this,y)),me(this,y,null),this.ctx.stroke()),window.requestAnimationFrame(b(this,n)))}),window.requestAnimationFrame(b(this,n))},ue=new WeakSet,es=function(F,B){const[le,xe]=this.currentPath.at(-1);F===le&&B===xe||(this.currentPath.push([F,B]),me(this,y,[F,B]))},Ee=new WeakSet,ts=function(F,B){var Me;this.ctx.closePath(),me(this,n,null),F=Math.min(Math.max(F,0),this.canvas.width),B=Math.min(Math.max(B,0),this.canvas.height);const[le,xe]=this.currentPath.at(-1);(F!==le||B!==xe)&&this.currentPath.push([F,B]);let Pe;if(this.currentPath.length!==1)Pe=(0,L.fitCurve)(this.currentPath,30,null);else{const Ce=[F,B];Pe=[[Ce,Ce.slice(),Ce.slice(),Ce]]}const Te=re(Me=Ae,R,kt).call(Me,Pe);this.currentPath.length=0;const je=()=>{this.paths.push(Pe),this.bezierPath2D.push(Te),this.rebuild()},ke=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(re(this,T,lt).call(this),re(this,G,ct).call(this)),re(this,ve,et).call(this))};this.addCommands({cmd:je,undo:ke,mustExec:!0})},ye=new WeakSet,$e=function(){if(this.isEmpty()){re(this,l,ut).call(this);return}re(this,Q,Pt).call(this);const{canvas:F,ctx:B}=this;B.setTransform(1,0,0,1,0,0),B.clearRect(0,0,F.width,F.height),re(this,l,ut).call(this);for(const le of this.bezierPath2D)B.stroke(le)},m=new WeakSet,Ct=function(F){re(this,Ee,ts).call(this,F.offsetX,F.offsetY),this.canvas.removeEventListener("pointerleave",b(this,_)),this.canvas.removeEventListener("pointermove",b(this,P)),this.addToAnnotationStorage()},T=new WeakSet,lt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Ae._l10nPromise.get("editor_ink_canvas_aria_label").then(F=>{var B;return(B=this.canvas)==null?void 0:B.setAttribute("aria-label",F)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},G=new WeakSet,ct=function(){me(this,v,new ResizeObserver(F=>{const B=F[0].contentRect;B.width&&B.height&&this.setDimensions(B.width,B.height)})),b(this,v).observe(this.div)},I=new WeakSet,Ze=function(){if(!b(this,f))return;const[F,B]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*F),this.canvas.height=Math.ceil(this.height*B),re(this,l,ut).call(this)},U=new WeakSet,Tt=function(F,B){const le=re(this,fe,dt).call(this),xe=(F-le)/b(this,M),Pe=(B-le)/b(this,A);this.scaleFactor=Math.min(xe,Pe)},l=new WeakSet,ut=function(){const F=re(this,fe,dt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+F,this.translationY*this.scaleFactor+F)},R=new WeakSet,kt=function(F){const B=new Path2D;for(let le=0,xe=F.length;le<xe;le++){const[Pe,Te,je,ke]=F[le];le===0&&B.moveTo(...Pe),B.bezierCurveTo(Te[0],Te[1],je[0],je[1],ke[0],ke[1])}return B},V=new WeakSet,ss=function(F,B,le,xe){const Te=[],je=this.thickness/2;let ke,Me;for(const Ce of this.paths){ke=[],Me=[];for(let Le=0,De=Ce.length;Le<De;Le++){const[Ie,Fe,Ue,Ge]=Ce[Le],qe=F*(Ie[0]+B)+je,We=xe-F*(Ie[1]+le)-je,Ne=F*(Fe[0]+B)+je,Be=xe-F*(Fe[1]+le)-je,Ve=F*(Ue[0]+B)+je,Xe=xe-F*(Ue[1]+le)-je,nt=F*(Ge[0]+B)+je,rt=xe-F*(Ge[1]+le)-je;Le===0&&(ke.push(qe,We),Me.push(qe,We)),ke.push(Ne,Be,Ve,Xe,nt,rt),re(this,Y,ns).call(this,qe,We,Ne,Be,Ve,Xe,nt,rt,4,Me)}Te.push({bezier:ke,points:Me})}return Te},Y=new WeakSet,ns=function(F,B,le,xe,Pe,Te,je,ke,Me,Ce){if(re(this,oe,rs).call(this,F,B,le,xe,Pe,Te,je,ke)){Ce.push(je,ke);return}for(let Le=1;Le<Me-1;Le++){const De=Le/Me,Ie=1-De;let Fe=De*F+Ie*le,Ue=De*B+Ie*xe,Ge=De*le+Ie*Pe,qe=De*xe+Ie*Te;const We=De*Pe+Ie*je,Ne=De*Te+Ie*ke;Fe=De*Fe+Ie*Ge,Ue=De*Ue+Ie*qe,Ge=De*Ge+Ie*We,qe=De*qe+Ie*Ne,Fe=De*Fe+Ie*Ge,Ue=De*Ue+Ie*qe,Ce.push(Fe,Ue)}Ce.push(je,ke)},oe=new WeakSet,rs=function(F,B,le,xe,Pe,Te,je,ke){const Ce=(3*le-2*F-je)**2,Le=(3*xe-2*B-ke)**2,De=(3*Pe-F-2*je)**2,Ie=(3*Te-B-2*ke)**2;return Math.max(Ce,De)+Math.max(Le,Ie)<=10},ne=new WeakSet,jt=function(){let F=1/0,B=-1/0,le=1/0,xe=-1/0;for(const Pe of this.paths)for(const[Te,je,ke,Me]of Pe){const Ce=d.Util.bezierBoundingBox(...Te,...je,...ke,...Me);F=Math.min(F,Ce[0]),le=Math.min(le,Ce[1]),B=Math.max(B,Ce[2]),xe=Math.max(xe,Ce[3])}return[F,le,B,xe]},fe=new WeakSet,dt=function(){return b(this,a)?Math.ceil(this.thickness*this.parentScale):0},ve=new WeakSet,et=function(F=!1){if(this.isEmpty())return;if(!b(this,a)){re(this,ye,$e).call(this);return}const B=re(this,ne,jt).call(this),le=re(this,fe,dt).call(this);me(this,M,Math.max(J,B[2]-B[0])),me(this,A,Math.max(J,B[3]-B[1]));const xe=Math.ceil(le+b(this,M)*this.scaleFactor),Pe=Math.ceil(le+b(this,A)*this.scaleFactor),[Te,je]=this.parentDimensions;this.width=xe/Te,this.height=Pe/je,me(this,k,xe/Pe),re(this,K,wt).call(this);const ke=this.translationX,Me=this.translationY;this.translationX=-B[0],this.translationY=-B[1],re(this,I,Ze).call(this),re(this,ye,$e).call(this),me(this,h,xe),me(this,e,Pe),this.setDims(xe,Pe);const Ce=F?le/this.scaleFactor/2:0;this.translate(ke-this.translationX-Ce,Me-this.translationY-Ce)},K=new WeakSet,wt=function(){const{style:F}=this.div;b(this,k)>=1?(F.minHeight=`${J}px`,F.minWidth=`${Math.round(b(this,k)*J)}px`):(F.minWidth=`${J}px`,F.minHeight=`${Math.round(J/b(this,k))}px`)},Z(Ae,R),Oe(Ae,"_defaultColor",null),Oe(Ae,"_defaultOpacity",1),Oe(Ae,"_defaultThickness",1),Oe(Ae,"_l10nPromise"),Oe(Ae,"_type","ink");let D=Ae;o.InkEditor=D},(w,o,O)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.fitCurve=void 0;const d=O(31);o.fitCurve=d},w=>{function o(p,u,a){if(!Array.isArray(p))throw new TypeError("First argument should be an array");if(p.forEach(h=>{if(!Array.isArray(h)||h.some(e=>typeof e!="number")||h.length!==p[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),p=p.filter((h,e)=>e===0||!h.every((n,r)=>n===p[e-1][r])),p.length<2)return[];const f=p.length,y=M(p[1],p[0]),v=M(p[f-2],p[f-1]);return O(p,y,v,u,a)}function O(p,u,a,f,y){var h,e,n,r,t,c,C,i,S,H,X,Q,ee;if(p.length===2)return Q=P.vectorLen(P.subtract(p[0],p[1]))/3,h=[p[0],P.addArrays(p[0],P.mulItems(u,Q)),P.addArrays(p[1],P.mulItems(a,Q)),p[1]],[h];if(e=J(p),[h,r,c]=d(p,e,e,u,a,y),r===0||r<f)return[h];if(r<f*f)for(n=e,t=r,C=c,ee=0;ee<20;ee++){if(n=L(h,p,n),[h,r,c]=d(p,e,n,u,a,y),r<f)return[h];if(c===C){let de=r/t;if(de>.9999&&de<1.0001)break}t=r,C=c}return X=[],i=P.subtract(p[c-1],p[c+1]),i.every(de=>de===0)&&(i=P.subtract(p[c-1],p[c]),[i[0],i[1]]=[-i[1],i[0]]),S=P.normalize(i),H=P.mulItems(S,-1),X=X.concat(O(p.slice(0,c+1),u,S,f,y)),X=X.concat(O(p.slice(c),H,a,f,y)),X}function d(p,u,a,f,y,v){var h,e,n;return h=E(p,a,f,y),[e,n]=D(p,h,u),v&&v({bez:h,points:p,params:u,maxErr:e,maxPoint:n}),[h,e,n]}function E(p,u,a,f){var y,v,h,e,n,r,t,c,C,i,S,H,X,Q,ee,de,ie,ue=p[0],ge=p[p.length-1];for(y=[ue,null,null,ge],v=P.zeros_Xx2x2(u.length),X=0,Q=u.length;X<Q;X++)de=u[X],ie=1-de,h=v[X],h[0]=P.mulItems(a,3*de*(ie*ie)),h[1]=P.mulItems(f,3*ie*(de*de));for(e=[[0,0],[0,0]],n=[0,0],X=0,Q=p.length;X<Q;X++)de=u[X],h=v[X],e[0][0]+=P.dot(h[0],h[0]),e[0][1]+=P.dot(h[0],h[1]),e[1][0]+=P.dot(h[0],h[1]),e[1][1]+=P.dot(h[1],h[1]),ee=P.subtract(p[X],_.q([ue,ue,ge,ge],de)),n[0]+=P.dot(h[0],ee),n[1]+=P.dot(h[1],ee);return r=e[0][0]*e[1][1]-e[1][0]*e[0][1],t=e[0][0]*n[1]-e[1][0]*n[0],c=n[0]*e[1][1]-n[1]*e[0][1],C=r===0?0:c/r,i=r===0?0:t/r,H=P.vectorLen(P.subtract(ue,ge)),S=1e-6*H,C<S||i<S?(y[1]=P.addArrays(ue,P.mulItems(a,H/3)),y[2]=P.addArrays(ge,P.mulItems(f,H/3))):(y[1]=P.addArrays(ue,P.mulItems(a,C)),y[2]=P.addArrays(ge,P.mulItems(f,i))),y}function L(p,u,a){return a.map((f,y)=>q(p,u[y],f))}function q(p,u,a){var f=P.subtract(_.q(p,a),u),y=_.qprime(p,a),v=P.mulMatrix(f,y),h=P.sum(P.squareItems(y))+2*P.mulMatrix(f,_.qprimeprime(p,a));return h===0?a:a-v/h}function J(p){var u=[],a,f,y;return p.forEach((v,h)=>{a=h?f+P.vectorLen(P.subtract(v,y)):0,u.push(a),f=a,y=v}),u=u.map(v=>v/f),u}function D(p,u,a){var f,y,v,h,e,n,r,t;y=0,v=Math.floor(p.length/2);const c=k(u,10);for(e=0,n=p.length;e<n;e++)r=p[e],t=A(u,a[e],c,10),h=P.subtract(_.q(u,t),r),f=h[0]*h[0]+h[1]*h[1],f>y&&(y=f,v=e);return[y,v]}var k=function(p,u){for(var a,f=[0],y=p[0],v=0,h=1;h<=u;h++)a=_.q(p,h/u),v+=P.vectorLen(P.subtract(a,y)),f.push(v),y=a;return f=f.map(e=>e/v),f};function A(p,u,a,f){if(u<0)return 0;if(u>1)return 1;for(var y,v,h,e,n,r=1;r<=f;r++)if(u<=a[r]){e=(r-1)/f,h=r/f,v=a[r-1],y=a[r],n=(u-v)/(y-v)*(h-e)+e;break}return n}function M(p,u){return P.normalize(P.subtract(p,u))}class P{static zeros_Xx2x2(u){for(var a=[];u--;)a.push([0,0]);return a}static mulItems(u,a){return u.map(f=>f*a)}static mulMatrix(u,a){return u.reduce((f,y,v)=>f+y*a[v],0)}static subtract(u,a){return u.map((f,y)=>f-a[y])}static addArrays(u,a){return u.map((f,y)=>f+a[y])}static addItems(u,a){return u.map(f=>f+a)}static sum(u){return u.reduce((a,f)=>a+f)}static dot(u,a){return P.mulMatrix(u,a)}static vectorLen(u){return Math.hypot(...u)}static divItems(u,a){return u.map(f=>f/a)}static squareItems(u){return u.map(a=>a*a)}static normalize(u){return this.divItems(u,this.vectorLen(u))}}class _{static q(u,a){var f=1-a,y=P.mulItems(u[0],f*f*f),v=P.mulItems(u[1],3*f*f*a),h=P.mulItems(u[2],3*f*a*a),e=P.mulItems(u[3],a*a*a);return P.addArrays(P.addArrays(y,v),P.addArrays(h,e))}static qprime(u,a){var f=1-a,y=P.mulItems(P.subtract(u[1],u[0]),3*f*f),v=P.mulItems(P.subtract(u[2],u[1]),6*f*a),h=P.mulItems(P.subtract(u[3],u[2]),3*a*a);return P.addArrays(P.addArrays(y,v),h)}static qprimeprime(u,a){return P.addArrays(P.mulItems(P.addArrays(P.subtract(u[2],P.mulItems(u[1],2)),u[0]),6*(1-a)),P.mulItems(P.addArrays(P.subtract(u[3],P.mulItems(u[2],2)),u[1]),6*a))}}w.exports=o,w.exports.fitCubic=O,w.exports.createTangent=M},(w,o,O)=>{var ye,Ye,m,is,W,Ft,$,Mt;Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationLayer=void 0;var d=O(1),E=O(6),L=O(3),q=O(33),J=O(34);const D=1e3,k=9,A=new WeakSet;function M(U){return{width:U[2]-U[0],height:U[3]-U[1]}}class P{static create(s){switch(s.data.annotationType){case d.AnnotationType.LINK:return new p(s);case d.AnnotationType.TEXT:return new u(s);case d.AnnotationType.WIDGET:switch(s.data.fieldType){case"Tx":return new f(s);case"Btn":return s.data.radioButton?new v(s):s.data.checkBox?new y(s):new h(s);case"Ch":return new e(s)}return new a(s);case d.AnnotationType.POPUP:return new n(s);case d.AnnotationType.FREETEXT:return new t(s);case d.AnnotationType.LINE:return new c(s);case d.AnnotationType.SQUARE:return new C(s);case d.AnnotationType.CIRCLE:return new i(s);case d.AnnotationType.POLYLINE:return new S(s);case d.AnnotationType.CARET:return new X(s);case d.AnnotationType.INK:return new Q(s);case d.AnnotationType.POLYGON:return new H(s);case d.AnnotationType.HIGHLIGHT:return new ee(s);case d.AnnotationType.UNDERLINE:return new de(s);case d.AnnotationType.SQUIGGLY:return new ie(s);case d.AnnotationType.STRIKEOUT:return new ue(s);case d.AnnotationType.STAMP:return new ge(s);case d.AnnotationType.FILEATTACHMENT:return new Ee(s);default:return new _(s)}}}class _{constructor(s,{isRenderable:l=!1,ignoreBorder:x=!1,createQuadrilaterals:R=!1}={}){this.isRenderable=l,this.data=s.data,this.layer=s.layer,this.page=s.page,this.viewport=s.viewport,this.linkService=s.linkService,this.downloadManager=s.downloadManager,this.imageResourcesPath=s.imageResourcesPath,this.renderForms=s.renderForms,this.svgFactory=s.svgFactory,this.annotationStorage=s.annotationStorage,this.enableScripting=s.enableScripting,this.hasJSActions=s.hasJSActions,this._fieldObjects=s.fieldObjects,l&&(this.container=this._createContainer(x)),R&&(this.quadrilaterals=this._createQuadrilaterals(x))}_createContainer(s=!1){const{data:l,page:x,viewport:R}=this,j=document.createElement("section");j.setAttribute("data-annotation-id",l.id),l.noRotate&&j.classList.add("norotate");const{pageWidth:V,pageHeight:se,pageX:Y,pageY:ae}=R.rawDims,{width:oe,height:te}=M(l.rect),ne=d.Util.normalizeRect([l.rect[0],x.view[3]-l.rect[1]+x.view[1],l.rect[2],x.view[3]-l.rect[3]+x.view[1]]);if(!s&&l.borderStyle.width>0){j.style.borderWidth=`${l.borderStyle.width}px`;const fe=l.borderStyle.horizontalCornerRadius,Se=l.borderStyle.verticalCornerRadius;if(fe>0||Se>0){const Re=`calc(${fe}px * var(--scale-factor)) / calc(${Se}px * var(--scale-factor))`;j.style.borderRadius=Re}else if(this instanceof v){const Re=`calc(${oe}px * var(--scale-factor)) / calc(${te}px * var(--scale-factor))`;j.style.borderRadius=Re}switch(l.borderStyle.style){case d.AnnotationBorderStyleType.SOLID:j.style.borderStyle="solid";break;case d.AnnotationBorderStyleType.DASHED:j.style.borderStyle="dashed";break;case d.AnnotationBorderStyleType.BEVELED:(0,d.warn)("Unimplemented border style: beveled");break;case d.AnnotationBorderStyleType.INSET:(0,d.warn)("Unimplemented border style: inset");break;case d.AnnotationBorderStyleType.UNDERLINE:j.style.borderBottomStyle="solid";break}const ve=l.borderColor||null;ve?j.style.borderColor=d.Util.makeHexColor(ve[0]|0,ve[1]|0,ve[2]|0):j.style.borderWidth=0}j.style.left=`${100*(ne[0]-Y)/V}%`,j.style.top=`${100*(ne[1]-ae)/se}%`;const{rotation:pe}=l;return l.hasOwnCanvas||pe===0?(j.style.width=`${100*oe/V}%`,j.style.height=`${100*te/se}%`):this.setRotation(pe,j),j}setRotation(s,l=this.container){const{pageWidth:x,pageHeight:R}=this.viewport.rawDims,{width:j,height:V}=M(this.data.rect);let se,Y;s%180===0?(se=100*j/x,Y=100*V/R):(se=100*V/x,Y=100*j/R),l.style.width=`${se}%`,l.style.height=`${Y}%`,l.setAttribute("data-main-rotation",(360-s)%360)}get _commonActions(){const s=(l,x,R)=>{const j=R.detail[l];R.target.style[x]=q.ColorConverters[`${j[0]}_HTML`](j.slice(1))};return(0,d.shadow)(this,"_commonActions",{display:l=>{const x=l.detail.display%2===1;this.container.style.visibility=x?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:x,print:l.detail.display===0||l.detail.display===3})},print:l=>{this.annotationStorage.setValue(this.data.id,{print:l.detail.print})},hidden:l=>{this.container.style.visibility=l.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:l.detail.hidden})},focus:l=>{setTimeout(()=>l.target.focus({preventScroll:!1}),0)},userName:l=>{l.target.title=l.detail.userName},readonly:l=>{l.detail.readonly?l.target.setAttribute("readonly",""):l.target.removeAttribute("readonly")},required:l=>{this._setRequired(l.target,l.detail.required)},bgColor:l=>{s("bgColor","backgroundColor",l)},fillColor:l=>{s("fillColor","backgroundColor",l)},fgColor:l=>{s("fgColor","color",l)},textColor:l=>{s("textColor","color",l)},borderColor:l=>{s("borderColor","borderColor",l)},strokeColor:l=>{s("strokeColor","borderColor",l)},rotation:l=>{const x=l.detail.rotation;this.setRotation(x),this.annotationStorage.setValue(this.data.id,{rotation:x})}})}_dispatchEventFromSandbox(s,l){const x=this._commonActions;for(const R of Object.keys(l.detail)){const j=s[R]||x[R];j==null||j(l)}}_setDefaultPropertiesFromJS(s){if(!this.enableScripting)return;const l=this.annotationStorage.getRawValue(this.data.id);if(!l)return;const x=this._commonActions;for(const[R,j]of Object.entries(l)){const V=x[R];if(V){const se={detail:{[R]:j},target:s};V(se),delete l[R]}}}_createQuadrilaterals(s=!1){if(!this.data.quadPoints)return null;const l=[],x=this.data.rect;for(const R of this.data.quadPoints)this.data.rect=[R[2].x,R[2].y,R[1].x,R[1].y],l.push(this._createContainer(s));return this.data.rect=x,l}_createPopup(s,l){let x=this.container;this.quadrilaterals&&(s||(s=this.quadrilaterals),x=this.quadrilaterals[0]),s||(s=document.createElement("div"),s.classList.add("popupTriggerArea"),x.append(s));const j=new r({container:x,trigger:s,color:l.color,titleObj:l.titleObj,modificationDate:l.modificationDate,contentsObj:l.contentsObj,richText:l.richText,hideWrapper:!0}).render();j.style.left="100%",x.append(j)}_renderQuadrilaterals(s){for(const l of this.quadrilaterals)l.classList.add(s);return this.quadrilaterals}render(){(0,d.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(s,l=null){const x=[];if(this._fieldObjects){const R=this._fieldObjects[s];if(R)for(const{page:j,id:V,exportValues:se}of R){if(j===-1||V===l)continue;const Y=typeof se=="string"?se:null,ae=document.querySelector(`[data-element-id="${V}"]`);if(ae&&!A.has(ae)){(0,d.warn)(`_getElementsByName - element not allowed: ${V}`);continue}x.push({id:V,exportValue:Y,domElement:ae})}return x}for(const R of document.getElementsByName(s)){const{exportValue:j}=R,V=R.getAttribute("data-element-id");V!==l&&A.has(R)&&x.push({id:V,exportValue:j,domElement:R})}return x}}class p extends _{constructor(l,x=null){super(l,{isRenderable:!0,ignoreBorder:!!(x!=null&&x.ignoreBorder),createQuadrilaterals:!0});Z(this,ye);Z(this,m);this.isTooltipOnly=l.data.isTooltipOnly}render(){const{data:l,linkService:x}=this,R=document.createElement("a");R.setAttribute("data-element-id",l.id);let j=!1;return l.url?(x.addLinkAttributes(R,l.url,l.newWindow),j=!0):l.action?(this._bindNamedAction(R,l.action),j=!0):l.attachment?(this._bindAttachment(R,l.attachment),j=!0):l.setOCGState?(re(this,m,is).call(this,R,l.setOCGState),j=!0):l.dest?(this._bindLink(R,l.dest),j=!0):(l.actions&&(l.actions.Action||l.actions["Mouse Up"]||l.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(R,l),j=!0),l.resetForm?(this._bindResetFormAction(R,l.resetForm),j=!0):this.isTooltipOnly&&!j&&(this._bindLink(R,""),j=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((V,se)=>{const Y=se===0?R:R.cloneNode();return V.append(Y),V}):(this.container.classList.add("linkAnnotation"),j&&this.container.append(R),this.container)}_bindLink(l,x){l.href=this.linkService.getDestinationHash(x),l.onclick=()=>(x&&this.linkService.goToDestination(x),!1),(x||x==="")&&re(this,ye,Ye).call(this)}_bindNamedAction(l,x){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.linkService.executeNamedAction(x),!1),re(this,ye,Ye).call(this)}_bindAttachment(l,x){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>{var R;return(R=this.downloadManager)==null||R.openOrDownloadData(this.container,x.content,x.filename),!1},re(this,ye,Ye).call(this)}_bindJSAction(l,x){l.href=this.linkService.getAnchorUrl("");const R=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const j of Object.keys(x.actions)){const V=R.get(j);V&&(l[V]=()=>{var se;return(se=this.linkService.eventBus)==null||se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x.id,name:j}}),!1})}l.onclick||(l.onclick=()=>!1),re(this,ye,Ye).call(this)}_bindResetFormAction(l,x){const R=l.onclick;if(R||(l.href=this.linkService.getAnchorUrl("")),re(this,ye,Ye).call(this),!this._fieldObjects){(0,d.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),R||(l.onclick=()=>!1);return}l.onclick=()=>{var te;R==null||R();const{fields:j,refs:V,include:se}=x,Y=[];if(j.length!==0||V.length!==0){const ne=new Set(V);for(const pe of j){const fe=this._fieldObjects[pe]||[];for(const{id:Se}of fe)ne.add(Se)}for(const pe of Object.values(this._fieldObjects))for(const fe of pe)ne.has(fe.id)===se&&Y.push(fe)}else for(const ne of Object.values(this._fieldObjects))Y.push(...ne);const ae=this.annotationStorage,oe=[];for(const ne of Y){const{id:pe}=ne;switch(oe.push(pe),ne.type){case"text":{const Se=ne.defaultValue||"";ae.setValue(pe,{value:Se});break}case"checkbox":case"radiobutton":{const Se=ne.defaultValue===ne.exportValues;ae.setValue(pe,{value:Se});break}case"combobox":case"listbox":{const Se=ne.defaultValue||"";ae.setValue(pe,{value:Se});break}default:continue}const fe=document.querySelector(`[data-element-id="${pe}"]`);if(fe){if(!A.has(fe)){(0,d.warn)(`_bindResetFormAction - element not allowed: ${pe}`);continue}}else continue;fe.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((te=this.linkService.eventBus)==null||te.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:oe,name:"ResetForm"}})),!1}}}ye=new WeakSet,Ye=function(){this.container.setAttribute("data-internal-link","")},m=new WeakSet,is=function(l,x){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.linkService.executeSetOCGState(x),!1),re(this,ye,Ye).call(this)};class u extends _{constructor(s){var x,R,j;const l=!!(s.data.hasPopup||(x=s.data.titleObj)!=null&&x.str||(R=s.data.contentsObj)!=null&&R.str||(j=s.data.richText)!=null&&j.str);super(s,{isRenderable:l})}render(){this.container.classList.add("textAnnotation");const s=document.createElement("img");return s.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",s.alt="[{{type}} Annotation]",s.dataset.l10nId="text_annotation_type",s.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(s,this.data),this.container.append(s),this.container}}class a extends _{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(s){var l;this.data.hasOwnCanvas&&(((l=s.previousSibling)==null?void 0:l.nodeName)==="CANVAS"&&(s.previousSibling.hidden=!0),s.hidden=!1)}_getKeyModifier(s){const{isWin:l,isMac:x}=d.FeatureTest.platform;return l&&s.ctrlKey||x&&s.metaKey}_setEventListener(s,l,x,R){l.includes("mouse")?s.addEventListener(l,j=>{var V;(V=this.linkService.eventBus)==null||V.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:x,value:R(j),shift:j.shiftKey,modifier:this._getKeyModifier(j)}})}):s.addEventListener(l,j=>{var V;(V=this.linkService.eventBus)==null||V.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:x,value:R(j)}})})}_setEventListeners(s,l,x){var R;for(const[j,V]of l)(V==="Action"||(R=this.data.actions)!=null&&R[V])&&this._setEventListener(s,j,V,x)}_setBackgroundColor(s){const l=this.data.backgroundColor||null;s.style.backgroundColor=l===null?"transparent":d.Util.makeHexColor(l[0],l[1],l[2])}_setTextStyle(s){const l=["left","center","right"],{fontColor:x}=this.data.defaultAppearanceData,R=this.data.defaultAppearanceData.fontSize||k,j=s.style;let V;const se=2,Y=ae=>Math.round(10*ae)/10;if(this.data.multiLine){const ae=Math.abs(this.data.rect[3]-this.data.rect[1]-se),oe=Math.round(ae/(d.LINE_FACTOR*R))||1,te=ae/oe;V=Math.min(R,Y(te/d.LINE_FACTOR))}else{const ae=Math.abs(this.data.rect[3]-this.data.rect[1]-se);V=Math.min(R,Y(ae/d.LINE_FACTOR))}j.fontSize=`calc(${V}px * var(--scale-factor))`,j.color=d.Util.makeHexColor(x[0],x[1],x[2]),this.data.textAlignment!==null&&(j.textAlign=l[this.data.textAlignment])}_setRequired(s,l){l?s.setAttribute("required",!0):s.removeAttribute("required"),s.setAttribute("aria-required",l)}}class f extends a{constructor(s){const l=s.renderForms||!s.data.hasAppearance&&!!s.data.fieldValue;super(s,{isRenderable:l})}setPropertyOnSiblings(s,l,x,R){const j=this.annotationStorage;for(const V of this._getElementsByName(s.name,s.id))V.domElement&&(V.domElement[l]=x),j.setValue(V.id,{[R]:x})}render(){var R;const s=this.annotationStorage,l=this.data.id;this.container.classList.add("textWidgetAnnotation");let x=null;if(this.renderForms){const j=s.getValue(l,{value:this.data.fieldValue});let V=j.formattedValue||j.value||"";const se=s.getValue(l,{charLimit:this.data.maxLen}).charLimit;se&&V.length>se&&(V=V.slice(0,se));const Y={userValue:V,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(x=document.createElement("textarea"),x.textContent=V,this.data.doNotScroll&&(x.style.overflowY="hidden")):(x=document.createElement("input"),x.type="text",x.setAttribute("value",V),this.data.doNotScroll&&(x.style.overflowX="hidden")),this.data.hasOwnCanvas&&(x.hidden=!0),A.add(x),x.setAttribute("data-element-id",l),x.disabled=this.data.readOnly,x.name=this.data.fieldName,x.tabIndex=D,this._setRequired(x,this.data.required),se&&(x.maxLength=se),x.addEventListener("input",oe=>{s.setValue(l,{value:oe.target.value}),this.setPropertyOnSiblings(x,"value",oe.target.value,"value")}),x.addEventListener("resetform",oe=>{const te=this.data.defaultFieldValue??"";x.value=Y.userValue=te,Y.formattedValue=null});let ae=oe=>{const{formattedValue:te}=Y;te!=null&&(oe.target.value=te),oe.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){x.addEventListener("focus",te=>{const{target:ne}=te;Y.userValue&&(ne.value=Y.userValue),Y.lastCommittedValue=ne.value,Y.commitKey=1}),x.addEventListener("updatefromsandbox",te=>{this.showElementAndHideCanvas(te.target);const ne={value(pe){Y.userValue=pe.detail.value??"",s.setValue(l,{value:Y.userValue.toString()}),pe.target.value=Y.userValue},formattedValue(pe){const{formattedValue:fe}=pe.detail;Y.formattedValue=fe,fe!=null&&pe.target!==document.activeElement&&(pe.target.value=fe),s.setValue(l,{formattedValue:fe})},selRange(pe){pe.target.setSelectionRange(...pe.detail.selRange)},charLimit:pe=>{var Re;const{charLimit:fe}=pe.detail,{target:Se}=pe;if(fe===0){Se.removeAttribute("maxLength");return}Se.setAttribute("maxLength",fe);let ve=Y.userValue;!ve||ve.length<=fe||(ve=ve.slice(0,fe),Se.value=Y.userValue=ve,s.setValue(l,{value:ve}),(Re=this.linkService.eventBus)==null||Re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:ve,willCommit:!0,commitKey:1,selStart:Se.selectionStart,selEnd:Se.selectionEnd}}))}};this._dispatchEventFromSandbox(ne,te)}),x.addEventListener("keydown",te=>{var fe;Y.commitKey=1;let ne=-1;if(te.key==="Escape"?ne=0:te.key==="Enter"&&!this.data.multiLine?ne=2:te.key==="Tab"&&(Y.commitKey=3),ne===-1)return;const{value:pe}=te.target;Y.lastCommittedValue!==pe&&(Y.lastCommittedValue=pe,Y.userValue=pe,(fe=this.linkService.eventBus)==null||fe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:pe,willCommit:!0,commitKey:ne,selStart:te.target.selectionStart,selEnd:te.target.selectionEnd}}))});const oe=ae;ae=null,x.addEventListener("blur",te=>{var pe;if(!te.relatedTarget)return;const{value:ne}=te.target;Y.userValue=ne,Y.lastCommittedValue!==ne&&((pe=this.linkService.eventBus)==null||pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:ne,willCommit:!0,commitKey:Y.commitKey,selStart:te.target.selectionStart,selEnd:te.target.selectionEnd}})),oe(te)}),(R=this.data.actions)!=null&&R.Keystroke&&x.addEventListener("beforeinput",te=>{var be;Y.lastCommittedValue=null;const{data:ne,target:pe}=te,{value:fe,selectionStart:Se,selectionEnd:ve}=pe;let Re=Se,K=ve;switch(te.inputType){case"deleteWordBackward":{const Ae=fe.substring(0,Se).match(/\w*[^\w]*$/);Ae&&(Re-=Ae[0].length);break}case"deleteWordForward":{const Ae=fe.substring(Se).match(/^[^\w]*\w*/);Ae&&(K+=Ae[0].length);break}case"deleteContentBackward":Se===ve&&(Re-=1);break;case"deleteContentForward":Se===ve&&(K+=1);break}te.preventDefault(),(be=this.linkService.eventBus)==null||be.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:fe,change:ne||"",willCommit:!1,selStart:Re,selEnd:K}})}),this._setEventListeners(x,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],te=>te.target.value)}if(ae&&x.addEventListener("blur",ae),this.data.comb){const te=(this.data.rect[2]-this.data.rect[0])/se;x.classList.add("comb"),x.style.letterSpacing=`calc(${te}px * var(--scale-factor) - 1ch)`}}else x=document.createElement("div"),x.textContent=this.data.fieldValue,x.style.verticalAlign="middle",x.style.display="table-cell";return this._setTextStyle(x),this._setBackgroundColor(x),this._setDefaultPropertiesFromJS(x),this.container.append(x),this.container}}class y extends a{constructor(s){super(s,{isRenderable:s.renderForms})}render(){const s=this.annotationStorage,l=this.data,x=l.id;let R=s.getValue(x,{value:l.exportValue===l.fieldValue}).value;typeof R=="string"&&(R=R!=="Off",s.setValue(x,{value:R})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const j=document.createElement("input");return A.add(j),j.setAttribute("data-element-id",x),j.disabled=l.readOnly,this._setRequired(j,this.data.required),j.type="checkbox",j.name=l.fieldName,R&&j.setAttribute("checked",!0),j.setAttribute("exportValue",l.exportValue),j.tabIndex=D,j.addEventListener("change",V=>{const{name:se,checked:Y}=V.target;for(const ae of this._getElementsByName(se,x)){const oe=Y&&ae.exportValue===l.exportValue;ae.domElement&&(ae.domElement.checked=oe),s.setValue(ae.id,{value:oe})}s.setValue(x,{value:Y})}),j.addEventListener("resetform",V=>{const se=l.defaultFieldValue||"Off";V.target.checked=se===l.exportValue}),this.enableScripting&&this.hasJSActions&&(j.addEventListener("updatefromsandbox",V=>{const se={value(Y){Y.target.checked=Y.detail.value!=="Off",s.setValue(x,{value:Y.target.checked})}};this._dispatchEventFromSandbox(se,V)}),this._setEventListeners(j,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],V=>V.target.checked)),this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}class v extends a{constructor(s){super(s,{isRenderable:s.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const s=this.annotationStorage,l=this.data,x=l.id;let R=s.getValue(x,{value:l.fieldValue===l.buttonValue}).value;typeof R=="string"&&(R=R!==l.buttonValue,s.setValue(x,{value:R}));const j=document.createElement("input");if(A.add(j),j.setAttribute("data-element-id",x),j.disabled=l.readOnly,this._setRequired(j,this.data.required),j.type="radio",j.name=l.fieldName,R&&j.setAttribute("checked",!0),j.tabIndex=D,j.addEventListener("change",V=>{const{name:se,checked:Y}=V.target;for(const ae of this._getElementsByName(se,x))s.setValue(ae.id,{value:!1});s.setValue(x,{value:Y})}),j.addEventListener("resetform",V=>{const se=l.defaultFieldValue;V.target.checked=se!=null&&se===l.buttonValue}),this.enableScripting&&this.hasJSActions){const V=l.buttonValue;j.addEventListener("updatefromsandbox",se=>{const Y={value:ae=>{const oe=V===ae.detail.value;for(const te of this._getElementsByName(ae.target.name)){const ne=oe&&te.id===x;te.domElement&&(te.domElement.checked=ne),s.setValue(te.id,{value:ne})}}};this._dispatchEventFromSandbox(Y,se)}),this._setEventListeners(j,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],se=>se.target.checked)}return this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}class h extends p{constructor(s){super(s,{ignoreBorder:s.data.hasAppearance})}render(){const s=super.render();s.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(s.title=this.data.alternativeText);const l=s.lastChild;return this.enableScripting&&this.hasJSActions&&l&&(this._setDefaultPropertiesFromJS(l),l.addEventListener("updatefromsandbox",x=>{this._dispatchEventFromSandbox({},x)})),s}}class e extends a{constructor(s){super(s,{isRenderable:s.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const s=this.annotationStorage,l=this.data.id,x=s.getValue(l,{value:this.data.fieldValue}),R=document.createElement("select");A.add(R),R.setAttribute("data-element-id",l),R.disabled=this.data.readOnly,this._setRequired(R,this.data.required),R.name=this.data.fieldName,R.tabIndex=D;let j=this.data.combo&&this.data.options.length>0;this.data.combo||(R.size=this.data.options.length,this.data.multiSelect&&(R.multiple=!0)),R.addEventListener("resetform",oe=>{const te=this.data.defaultFieldValue;for(const ne of R.options)ne.selected=ne.value===te});for(const oe of this.data.options){const te=document.createElement("option");te.textContent=oe.displayValue,te.value=oe.exportValue,x.value.includes(oe.exportValue)&&(te.setAttribute("selected",!0),j=!1),R.append(te)}let V=null;if(j){const oe=document.createElement("option");oe.value=" ",oe.setAttribute("hidden",!0),oe.setAttribute("selected",!0),R.prepend(oe),V=()=>{oe.remove(),R.removeEventListener("input",V),V=null},R.addEventListener("input",V)}const se=oe=>{const te=oe?"value":"textContent",{options:ne,multiple:pe}=R;return pe?Array.prototype.filter.call(ne,fe=>fe.selected).map(fe=>fe[te]):ne.selectedIndex===-1?null:ne[ne.selectedIndex][te]};let Y=se(!1);const ae=oe=>{const te=oe.target.options;return Array.prototype.map.call(te,ne=>({displayValue:ne.textContent,exportValue:ne.value}))};return this.enableScripting&&this.hasJSActions?(R.addEventListener("updatefromsandbox",oe=>{const te={value(ne){V==null||V();const pe=ne.detail.value,fe=new Set(Array.isArray(pe)?pe:[pe]);for(const Se of R.options)Se.selected=fe.has(Se.value);s.setValue(l,{value:se(!0)}),Y=se(!1)},multipleSelection(ne){R.multiple=!0},remove(ne){const pe=R.options,fe=ne.detail.remove;pe[fe].selected=!1,R.remove(fe),pe.length>0&&Array.prototype.findIndex.call(pe,ve=>ve.selected)===-1&&(pe[0].selected=!0),s.setValue(l,{value:se(!0),items:ae(ne)}),Y=se(!1)},clear(ne){for(;R.length!==0;)R.remove(0);s.setValue(l,{value:null,items:[]}),Y=se(!1)},insert(ne){const{index:pe,displayValue:fe,exportValue:Se}=ne.detail.insert,ve=R.children[pe],Re=document.createElement("option");Re.textContent=fe,Re.value=Se,ve?ve.before(Re):R.append(Re),s.setValue(l,{value:se(!0),items:ae(ne)}),Y=se(!1)},items(ne){const{items:pe}=ne.detail;for(;R.length!==0;)R.remove(0);for(const fe of pe){const{displayValue:Se,exportValue:ve}=fe,Re=document.createElement("option");Re.textContent=Se,Re.value=ve,R.append(Re)}R.options.length>0&&(R.options[0].selected=!0),s.setValue(l,{value:se(!0),items:ae(ne)}),Y=se(!1)},indices(ne){const pe=new Set(ne.detail.indices);for(const fe of ne.target.options)fe.selected=pe.has(fe.index);s.setValue(l,{value:se(!0)}),Y=se(!1)},editable(ne){ne.target.disabled=!ne.detail.editable}};this._dispatchEventFromSandbox(te,oe)}),R.addEventListener("input",oe=>{var ne;const te=se(!0);s.setValue(l,{value:te}),oe.preventDefault(),(ne=this.linkService.eventBus)==null||ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:Y,changeEx:te,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(R,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],oe=>oe.target.value)):R.addEventListener("input",function(oe){s.setValue(l,{value:se(!0)})}),this.data.combo&&this._setTextStyle(R),this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}const T=class T extends _{constructor(s){var R,j,V;const{data:l}=s,x=!T.IGNORE_TYPES.has(l.parentType)&&!!((R=l.titleObj)!=null&&R.str||(j=l.contentsObj)!=null&&j.str||(V=l.richText)!=null&&V.str);super(s,{isRenderable:x})}render(){this.container.classList.add("popupAnnotation");const s=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(s.length===0)return this.container;const l=new r({container:this.container,trigger:Array.from(s),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),x=this.page,R=d.Util.normalizeRect([this.data.parentRect[0],x.view[3]-this.data.parentRect[1]+x.view[1],this.data.parentRect[2],x.view[3]-this.data.parentRect[3]+x.view[1]]),j=R[0]+this.data.parentRect[2]-this.data.parentRect[0],V=R[1],{pageWidth:se,pageHeight:Y,pageX:ae,pageY:oe}=this.viewport.rawDims;return this.container.style.left=`${100*(j-ae)/se}%`,this.container.style.top=`${100*(V-oe)/Y}%`,this.container.append(l.render()),this.container}};Oe(T,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));let n=T;class r{constructor(s){this.container=s.container,this.trigger=s.trigger,this.color=s.color,this.titleObj=s.titleObj,this.modificationDate=s.modificationDate,this.contentsObj=s.contentsObj,this.richText=s.richText,this.hideWrapper=s.hideWrapper||!1,this.pinned=!1}render(){var se,Y;const l=document.createElement("div");l.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?l:this.container,this.hideElement.hidden=!0;const x=document.createElement("div");x.classList.add("popup");const R=this.color;if(R){const ae=.7*(255-R[0])+R[0],oe=.7*(255-R[1])+R[1],te=.7*(255-R[2])+R[2];x.style.backgroundColor=d.Util.makeHexColor(ae|0,oe|0,te|0)}const j=document.createElement("h1");j.dir=this.titleObj.dir,j.textContent=this.titleObj.str,x.append(j);const V=E.PDFDateString.toDateObject(this.modificationDate);if(V){const ae=document.createElement("span");ae.classList.add("popupDate"),ae.textContent="{{date}}, {{time}}",ae.dataset.l10nId="annotation_date_string",ae.dataset.l10nArgs=JSON.stringify({date:V.toLocaleDateString(),time:V.toLocaleTimeString()}),x.append(ae)}if((se=this.richText)!=null&&se.str&&(!((Y=this.contentsObj)!=null&&Y.str)||this.contentsObj.str===this.richText.str))J.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:x}),x.lastChild.classList.add("richText","popupContent");else{const ae=this._formatContents(this.contentsObj);x.append(ae)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const ae of this.trigger)ae.addEventListener("click",this._toggle.bind(this)),ae.addEventListener("mouseover",this._show.bind(this,!1)),ae.addEventListener("mouseout",this._hide.bind(this,!1));return x.addEventListener("click",this._hide.bind(this,!0)),l.append(x),l}_formatContents({str:s,dir:l}){const x=document.createElement("p");x.classList.add("popupContent"),x.dir=l;const R=s.split(/(?:\r\n?|\n)/);for(let j=0,V=R.length;j<V;++j){const se=R[j];x.append(document.createTextNode(se)),j<V-1&&x.append(document.createElement("br"))}return x}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(s=!1){s&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(s=!0){s&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class t extends _{constructor(s){var x,R,j;const l=!!(s.data.hasPopup||(x=s.data.titleObj)!=null&&x.str||(R=s.data.contentsObj)!=null&&R.str||(j=s.data.richText)!=null&&j.str);super(s,{isRenderable:l,ignoreBorder:!0}),this.textContent=s.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const s=document.createElement("div");s.classList.add("annotationTextContent"),s.setAttribute("role","comment");for(const l of this.textContent){const x=document.createElement("span");x.textContent=l,s.append(x)}this.container.append(s)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class c extends _{constructor(s){var x,R,j;const l=!!(s.data.hasPopup||(x=s.data.titleObj)!=null&&x.str||(R=s.data.contentsObj)!=null&&R.str||(j=s.data.richText)!=null&&j.str);super(s,{isRenderable:l,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const s=this.data,{width:l,height:x}=M(s.rect),R=this.svgFactory.create(l,x,!0),j=this.svgFactory.createElement("svg:line");return j.setAttribute("x1",s.rect[2]-s.lineCoordinates[0]),j.setAttribute("y1",s.rect[3]-s.lineCoordinates[1]),j.setAttribute("x2",s.rect[2]-s.lineCoordinates[2]),j.setAttribute("y2",s.rect[3]-s.lineCoordinates[3]),j.setAttribute("stroke-width",s.borderStyle.width||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),R.append(j),this.container.append(R),this._createPopup(j,s),this.container}}class C extends _{constructor(s){var x,R,j;const l=!!(s.data.hasPopup||(x=s.data.titleObj)!=null&&x.str||(R=s.data.contentsObj)!=null&&R.str||(j=s.data.richText)!=null&&j.str);super(s,{isRenderable:l,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const s=this.data,{width:l,height:x}=M(s.rect),R=this.svgFactory.create(l,x,!0),j=s.borderStyle.width,V=this.svgFactory.createElement("svg:rect");return V.setAttribute("x",j/2),V.setAttribute("y",j/2),V.setAttribute("width",l-j),V.setAttribute("height",x-j),V.setAttribute("stroke-width",j||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),R.append(V),this.container.append(R),this._createPopup(V,s),this.container}}class i extends _{constructor(s){var x,R,j;const l=!!(s.data.hasPopup||(x=s.data.titleObj)!=null&&x.str||(R=s.data.contentsObj)!=null&&R.str||(j=s.data.richText)!=null&&j.str);super(s,{isRenderable:l,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const s=this.data,{width:l,height:x}=M(s.rect),R=this.svgFactory.create(l,x,!0),j=s.borderStyle.width,V=this.svgFactory.createElement("svg:ellipse");return V.setAttribute("cx",l/2),V.setAttribute("cy",x/2),V.setAttribute("rx",l/2-j/2),V.setAttribute("ry",x/2-j/2),V.setAttribute("stroke-width",j||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),R.append(V),this.container.append(R),this._createPopup(V,s),this.container}}class S extends _{constructor(s){var x,R,j;const l=!!(s.data.hasPopup||(x=s.data.titleObj)!=null&&x.str||(R=s.data.contentsObj)!=null&&R.str||(j=s.data.richText)!=null&&j.str);super(s,{isRenderable:l,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const s=this.data,{width:l,height:x}=M(s.rect),R=this.svgFactory.create(l,x,!0);let j=[];for(const se of s.vertices){const Y=se.x-s.rect[0],ae=s.rect[3]-se.y;j.push(Y+","+ae)}j=j.join(" ");const V=this.svgFactory.createElement(this.svgElementName);return V.setAttribute("points",j),V.setAttribute("stroke-width",s.borderStyle.width||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),R.append(V),this.container.append(R),this._createPopup(V,s),this.container}}class H extends S{constructor(s){super(s),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class X extends _{constructor(s){var x,R,j;const l=!!(s.data.hasPopup||(x=s.data.titleObj)!=null&&x.str||(R=s.data.contentsObj)!=null&&R.str||(j=s.data.richText)!=null&&j.str);super(s,{isRenderable:l,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Q extends _{constructor(s){var x,R,j;const l=!!(s.data.hasPopup||(x=s.data.titleObj)!=null&&x.str||(R=s.data.contentsObj)!=null&&R.str||(j=s.data.richText)!=null&&j.str);super(s,{isRenderable:l,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const s=this.data,{width:l,height:x}=M(s.rect),R=this.svgFactory.create(l,x,!0);for(const j of s.inkLists){let V=[];for(const Y of j){const ae=Y.x-s.rect[0],oe=s.rect[3]-Y.y;V.push(`${ae},${oe}`)}V=V.join(" ");const se=this.svgFactory.createElement(this.svgElementName);se.setAttribute("points",V),se.setAttribute("stroke-width",s.borderStyle.width||1),se.setAttribute("stroke","transparent"),se.setAttribute("fill","transparent"),this._createPopup(se,s),R.append(se)}return this.container.append(R),this.container}}class ee extends _{constructor(s){var x,R,j;const l=!!(s.data.hasPopup||(x=s.data.titleObj)!=null&&x.str||(R=s.data.contentsObj)!=null&&R.str||(j=s.data.richText)!=null&&j.str);super(s,{isRenderable:l,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class de extends _{constructor(s){var x,R,j;const l=!!(s.data.hasPopup||(x=s.data.titleObj)!=null&&x.str||(R=s.data.contentsObj)!=null&&R.str||(j=s.data.richText)!=null&&j.str);super(s,{isRenderable:l,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class ie extends _{constructor(s){var x,R,j;const l=!!(s.data.hasPopup||(x=s.data.titleObj)!=null&&x.str||(R=s.data.contentsObj)!=null&&R.str||(j=s.data.richText)!=null&&j.str);super(s,{isRenderable:l,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class ue extends _{constructor(s){var x,R,j;const l=!!(s.data.hasPopup||(x=s.data.titleObj)!=null&&x.str||(R=s.data.contentsObj)!=null&&R.str||(j=s.data.richText)!=null&&j.str);super(s,{isRenderable:l,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class ge extends _{constructor(s){var x,R,j;const l=!!(s.data.hasPopup||(x=s.data.titleObj)!=null&&x.str||(R=s.data.contentsObj)!=null&&R.str||(j=s.data.richText)!=null&&j.str);super(s,{isRenderable:l,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Ee extends _{constructor(s){var R;super(s,{isRenderable:!0});const{filename:l,content:x}=this.data.file;this.filename=(0,E.getFilenameFromUrl)(l,!0),this.content=x,(R=this.linkService.eventBus)==null||R.dispatch("fileattachmentannotation",{source:this,filename:l,content:x})}render(){var l,x;this.container.classList.add("fileAttachmentAnnotation");let s;return this.data.hasAppearance?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),s.classList.add("popupTriggerArea"),s.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((l=this.data.titleObj)!=null&&l.str||(x=this.data.contentsObj)!=null&&x.str||this.data.richText)&&this._createPopup(s,this.data),this.container.append(s),this.container}_download(){var s;(s=this.downloadManager)==null||s.openOrDownloadData(this.container,this.content,this.filename)}}const N=class N{static render(s){var Y,ae;const{annotations:l,div:x,viewport:R,accessibilityManager:j}=s;(0,E.setLayerDimensions)(x,R);const V={data:null,layer:x,page:s.page,viewport:R,linkService:s.linkService,downloadManager:s.downloadManager,imageResourcesPath:s.imageResourcesPath||"",renderForms:s.renderForms!==!1,svgFactory:new E.DOMSVGFactory,annotationStorage:s.annotationStorage||new L.AnnotationStorage,enableScripting:s.enableScripting===!0,hasJSActions:s.hasJSActions,fieldObjects:s.fieldObjects};let se=0;for(const oe of l){if(oe.noHTML)continue;if(oe.annotationType!==d.AnnotationType.POPUP){const{width:pe,height:fe}=M(oe.rect);if(pe<=0||fe<=0)continue}V.data=oe;const te=P.create(V);if(!te.isRenderable)continue;const ne=te.render();if(oe.hidden&&(ne.style.visibility="hidden"),Array.isArray(ne))for(const pe of ne)pe.style.zIndex=se++,re(Y=N,W,Ft).call(Y,pe,oe.id,x,j);else ne.style.zIndex=se++,te instanceof n?x.prepend(ne):re(ae=N,W,Ft).call(ae,ne,oe.id,x,j)}re(this,$,Mt).call(this,x,s.annotationCanvasMap)}static update(s){const{annotationCanvasMap:l,div:x,viewport:R}=s;(0,E.setLayerDimensions)(x,{rotation:R.rotation}),re(this,$,Mt).call(this,x,l),x.hidden=!1}};W=new WeakSet,Ft=function(s,l,x,R){const j=s.firstChild||s;j.id=`${E.AnnotationPrefix}${l}`,x.append(s),R==null||R.moveElementInDOM(x,s,j,!1)},$=new WeakSet,Mt=function(s,l){if(l){for(const[x,R]of l){const j=s.querySelector(`[data-annotation-id="${x}"]`);if(!j)continue;const{firstChild:V}=j;V?V.nodeName==="CANVAS"?V.replaceWith(R):V.before(R):j.append(R)}l.clear()}},Z(N,W),Z(N,$);let _e=N;o.AnnotationLayer=_e},(w,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorConverters=void 0;function O(E){return Math.floor(Math.max(0,Math.min(1,E))*255).toString(16).padStart(2,"0")}class d{static CMYK_G([L,q,J,D]){return["G",1-Math.min(1,.3*L+.59*J+.11*q+D)]}static G_CMYK([L]){return["CMYK",0,0,0,1-L]}static G_RGB([L]){return["RGB",L,L,L]}static G_HTML([L]){const q=O(L);return`#${q}${q}${q}`}static RGB_G([L,q,J]){return["G",.3*L+.59*q+.11*J]}static RGB_HTML([L,q,J]){const D=O(L),k=O(q),A=O(J);return`#${D}${k}${A}`}static T_HTML(){return"#00000000"}static CMYK_RGB([L,q,J,D]){return["RGB",1-Math.min(1,L+D),1-Math.min(1,J+D),1-Math.min(1,q+D)]}static CMYK_HTML(L){const q=this.CMYK_RGB(L).slice(1);return this.RGB_HTML(q)}static RGB_CMYK([L,q,J]){const D=1-L,k=1-q,A=1-J,M=Math.min(D,k,A);return["CMYK",D,k,A,M]}}o.ColorConverters=d},(w,o,O)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaLayer=void 0;var d=O(19);class E{static setupStorage(q,J,D,k,A){const M=k.getValue(J,{value:null});switch(D.name){case"textarea":if(M.value!==null&&(q.textContent=M.value),A==="print")break;q.addEventListener("input",P=>{k.setValue(J,{value:P.target.value})});break;case"input":if(D.attributes.type==="radio"||D.attributes.type==="checkbox"){if(M.value===D.attributes.xfaOn?q.setAttribute("checked",!0):M.value===D.attributes.xfaOff&&q.removeAttribute("checked"),A==="print")break;q.addEventListener("change",P=>{k.setValue(J,{value:P.target.checked?P.target.getAttribute("xfaOn"):P.target.getAttribute("xfaOff")})})}else{if(M.value!==null&&q.setAttribute("value",M.value),A==="print")break;q.addEventListener("input",P=>{k.setValue(J,{value:P.target.value})})}break;case"select":if(M.value!==null)for(const P of D.children)P.attributes.value===M.value&&(P.attributes.selected=!0);q.addEventListener("input",P=>{const _=P.target.options,p=_.selectedIndex===-1?"":_[_.selectedIndex].value;k.setValue(J,{value:p})});break}}static setAttributes({html:q,element:J,storage:D=null,intent:k,linkService:A}){const{attributes:M}=J,P=q instanceof HTMLAnchorElement;M.type==="radio"&&(M.name=`${M.name}-${k}`);for(const[_,p]of Object.entries(M))if(p!=null)switch(_){case"class":p.length&&q.setAttribute(_,p.join(" "));break;case"dataId":break;case"id":q.setAttribute("data-element-id",p);break;case"style":Object.assign(q.style,p);break;case"textContent":q.textContent=p;break;default:(!P||_!=="href"&&_!=="newWindow")&&q.setAttribute(_,p)}P&&A.addLinkAttributes(q,M.href,M.newWindow),D&&M.dataId&&this.setupStorage(q,M.dataId,J,D)}static render(q){var u;const J=q.annotationStorage,D=q.linkService,k=q.xfaHtml,A=q.intent||"display",M=document.createElement(k.name);k.attributes&&this.setAttributes({html:M,element:k,intent:A,linkService:D});const P=[[k,-1,M]],_=q.div;if(_.append(M),q.viewport){const a=`matrix(${q.viewport.transform.join(",")})`;_.style.transform=a}A!=="richText"&&_.setAttribute("class","xfaLayer xfaFont");const p=[];for(;P.length>0;){const[a,f,y]=P.at(-1);if(f+1===a.children.length){P.pop();continue}const v=a.children[++P.at(-1)[1]];if(v===null)continue;const{name:h}=v;if(h==="#text"){const n=document.createTextNode(v.value);p.push(n),y.append(n);continue}let e;if((u=v==null?void 0:v.attributes)!=null&&u.xmlns?e=document.createElementNS(v.attributes.xmlns,h):e=document.createElement(h),y.append(e),v.attributes&&this.setAttributes({html:e,element:v,storage:J,intent:A,linkService:D}),v.children&&v.children.length>0)P.push([v,-1,e]);else if(v.value){const n=document.createTextNode(v.value);d.XfaText.shouldBuildText(h)&&p.push(n),e.append(n)}}for(const a of _.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))a.setAttribute("readOnly",!0);return{textDivs:p}}static update(q){const J=`matrix(${q.viewport.transform.join(",")})`;q.div.style.transform=J,q.div.hidden=!1}}o.XfaLayer=E},(w,o,O)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SVGGraphics=void 0;var d=O(6),E=O(1),L=O(10);let q=class{constructor(){(0,E.unreachable)("Not implemented: SVGGraphics")}};o.SVGGraphics=q;{let u=function(e){let n=[];const r=[];for(const t of e){if(t.fn==="save"){n.push({fnId:92,fn:"group",items:[]}),r.push(n),n=n.at(-1).items;continue}t.fn==="restore"?n=r.pop():n.push(t)}return n},a=function(e){if(Number.isInteger(e))return e.toString();const n=e.toFixed(10);let r=n.length-1;if(n[r]!=="0")return n;do r--;while(n[r]==="0");return n.substring(0,n[r]==="."?r:r+1)},f=function(e){if(e[4]===0&&e[5]===0){if(e[1]===0&&e[2]===0)return e[0]===1&&e[3]===1?"":`scale(${a(e[0])} ${a(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2]){const n=Math.acos(e[0])*180/Math.PI;return`rotate(${a(n)})`}}else if(e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1)return`translate(${a(e[4])} ${a(e[5])})`;return`matrix(${a(e[0])} ${a(e[1])} ${a(e[2])} ${a(e[3])} ${a(e[4])} ${a(e[5])})`};const J={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},D="http://www.w3.org/XML/1998/namespace",k="http://www.w3.org/1999/xlink",A=["butt","round","square"],M=["miter","round","bevel"],P=function(e,n="",r=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!r)return URL.createObjectURL(new Blob([e],{type:n}));const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let c=`data:${n};base64,`;for(let C=0,i=e.length;C<i;C+=3){const S=e[C]&255,H=e[C+1]&255,X=e[C+2]&255,Q=S>>2,ee=(S&3)<<4|H>>4,de=C+1<i?(H&15)<<2|X>>6:64,ie=C+2<i?X&63:64;c+=t[Q]+t[ee]+t[de]+t[ie]}return c},_=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),n=12,r=new Int32Array(256);for(let X=0;X<256;X++){let Q=X;for(let ee=0;ee<8;ee++)Q&1?Q=3988292384^Q>>1&2147483647:Q=Q>>1&2147483647;r[X]=Q}function t(X,Q,ee){let de=-1;for(let ie=Q;ie<ee;ie++){const ue=(de^X[ie])&255,ge=r[ue];de=de>>>8^ge}return de^-1}function c(X,Q,ee,de){let ie=de;const ue=Q.length;ee[ie]=ue>>24&255,ee[ie+1]=ue>>16&255,ee[ie+2]=ue>>8&255,ee[ie+3]=ue&255,ie+=4,ee[ie]=X.charCodeAt(0)&255,ee[ie+1]=X.charCodeAt(1)&255,ee[ie+2]=X.charCodeAt(2)&255,ee[ie+3]=X.charCodeAt(3)&255,ie+=4,ee.set(Q,ie),ie+=Q.length;const ge=t(ee,de+4,ie);ee[ie]=ge>>24&255,ee[ie+1]=ge>>16&255,ee[ie+2]=ge>>8&255,ee[ie+3]=ge&255}function C(X,Q,ee){let de=1,ie=0;for(let ue=Q;ue<ee;++ue)de=(de+(X[ue]&255))%65521,ie=(ie+de)%65521;return ie<<16|de}function i(X){if(!L.isNodeJS)return S(X);try{let Q;parseInt(process.versions.node)>=8?Q=X:Q=Buffer.from(X);const ee=require$$5.deflateSync(Q,{level:9});return ee instanceof Uint8Array?ee:new Uint8Array(ee)}catch(Q){(0,E.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Q)}return S(X)}function S(X){let Q=X.length;const ee=65535,de=Math.ceil(Q/ee),ie=new Uint8Array(2+Q+de*5+4);let ue=0;ie[ue++]=120,ie[ue++]=156;let ge=0;for(;Q>ee;)ie[ue++]=0,ie[ue++]=255,ie[ue++]=255,ie[ue++]=0,ie[ue++]=0,ie.set(X.subarray(ge,ge+ee),ue),ue+=ee,ge+=ee,Q-=ee;ie[ue++]=1,ie[ue++]=Q&255,ie[ue++]=Q>>8&255,ie[ue++]=~Q&65535&255,ie[ue++]=(~Q&65535)>>8&255,ie.set(X.subarray(ge),ue),ue+=X.length-ge;const Ee=C(X,0,X.length);return ie[ue++]=Ee>>24&255,ie[ue++]=Ee>>16&255,ie[ue++]=Ee>>8&255,ie[ue++]=Ee&255,ie}function H(X,Q,ee,de){const ie=X.width,ue=X.height;let ge,Ee,_e;const ye=X.data;switch(Q){case E.ImageKind.GRAYSCALE_1BPP:Ee=0,ge=1,_e=ie+7>>3;break;case E.ImageKind.RGB_24BPP:Ee=2,ge=8,_e=ie*3;break;case E.ImageKind.RGBA_32BPP:Ee=6,ge=8,_e=ie*4;break;default:throw new Error("invalid format")}const z=new Uint8Array((1+_e)*ue);let m=0,g=0;for(let N=0;N<ue;++N)z[m++]=0,z.set(ye.subarray(g,g+_e),m),g+=_e,m+=_e;if(Q===E.ImageKind.GRAYSCALE_1BPP&&de){m=0;for(let N=0;N<ue;N++){m++;for(let U=0;U<_e;U++)z[m++]^=255}}const T=new Uint8Array([ie>>24&255,ie>>16&255,ie>>8&255,ie&255,ue>>24&255,ue>>16&255,ue>>8&255,ue&255,ge,Ee,0,0,0]),W=i(z),G=e.length+n*3+T.length+W.length,$=new Uint8Array(G);let I=0;return $.set(e,I),I+=e.length,c("IHDR",T,$,I),I+=n+T.length,c("IDATA",W,$,I),I+=n+W.length,c("IEND",new Uint8Array(0),$,I),P($,"image/png",ee)}return function(Q,ee,de){const ie=Q.kind===void 0?E.ImageKind.GRAYSCALE_1BPP:Q.kind;return H(Q,ie,ee,de)}}();class p{constructor(){this.fontSizeScale=1,this.fontWeight=J.fontWeight,this.fontSize=0,this.textMatrix=E.IDENTITY_MATRIX,this.fontMatrix=E.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=E.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=J.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(n,r){this.x=n,this.y=r}}let y=0,v=0,h=0;o.SVGGraphics=q=class{constructor(e,n,r=!1){(0,d.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new d.DOMSVGFactory,this.current=new p,this.transformMatrix=E.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=n,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!r,this._operatorIdMapping=[];for(const t in E.OPS)this._operatorIdMapping[E.OPS[t]]=t}getObject(e,n=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):n}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const n=e.fnArray,r=e.argsArray;for(let t=0,c=n.length;t<c;t++)if(n[t]===E.OPS.dependency)for(const C of r[t]){const i=C.startsWith("g_")?this.commonObjs:this.objs,S=new Promise(H=>{i.get(C,H)});this.current.dependencies.push(S)}return Promise.all(this.current.dependencies)}transform(e,n,r,t,c,C){const i=[e,n,r,t,c,C];this.transformMatrix=E.Util.transform(this.transformMatrix,i),this.tgrp=null}getSVG(e,n){this.viewport=n;const r=this._initialize(n);return this.loadDependencies(e).then(()=>(this.transformMatrix=E.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),r))}convertOpList(e){const n=this._operatorIdMapping,r=e.argsArray,t=e.fnArray,c=[];for(let C=0,i=t.length;C<i;C++){const S=t[C];c.push({fnId:S,fn:n[S],args:r[C]})}return u(c)}executeOpTree(e){for(const n of e){const r=n.fn,t=n.fnId,c=n.args;switch(t|0){case E.OPS.beginText:this.beginText();break;case E.OPS.dependency:break;case E.OPS.setLeading:this.setLeading(c);break;case E.OPS.setLeadingMoveText:this.setLeadingMoveText(c[0],c[1]);break;case E.OPS.setFont:this.setFont(c);break;case E.OPS.showText:this.showText(c[0]);break;case E.OPS.showSpacedText:this.showText(c[0]);break;case E.OPS.endText:this.endText();break;case E.OPS.moveText:this.moveText(c[0],c[1]);break;case E.OPS.setCharSpacing:this.setCharSpacing(c[0]);break;case E.OPS.setWordSpacing:this.setWordSpacing(c[0]);break;case E.OPS.setHScale:this.setHScale(c[0]);break;case E.OPS.setTextMatrix:this.setTextMatrix(c[0],c[1],c[2],c[3],c[4],c[5]);break;case E.OPS.setTextRise:this.setTextRise(c[0]);break;case E.OPS.setTextRenderingMode:this.setTextRenderingMode(c[0]);break;case E.OPS.setLineWidth:this.setLineWidth(c[0]);break;case E.OPS.setLineJoin:this.setLineJoin(c[0]);break;case E.OPS.setLineCap:this.setLineCap(c[0]);break;case E.OPS.setMiterLimit:this.setMiterLimit(c[0]);break;case E.OPS.setFillRGBColor:this.setFillRGBColor(c[0],c[1],c[2]);break;case E.OPS.setStrokeRGBColor:this.setStrokeRGBColor(c[0],c[1],c[2]);break;case E.OPS.setStrokeColorN:this.setStrokeColorN(c);break;case E.OPS.setFillColorN:this.setFillColorN(c);break;case E.OPS.shadingFill:this.shadingFill(c[0]);break;case E.OPS.setDash:this.setDash(c[0],c[1]);break;case E.OPS.setRenderingIntent:this.setRenderingIntent(c[0]);break;case E.OPS.setFlatness:this.setFlatness(c[0]);break;case E.OPS.setGState:this.setGState(c[0]);break;case E.OPS.fill:this.fill();break;case E.OPS.eoFill:this.eoFill();break;case E.OPS.stroke:this.stroke();break;case E.OPS.fillStroke:this.fillStroke();break;case E.OPS.eoFillStroke:this.eoFillStroke();break;case E.OPS.clip:this.clip("nonzero");break;case E.OPS.eoClip:this.clip("evenodd");break;case E.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case E.OPS.paintImageXObject:this.paintImageXObject(c[0]);break;case E.OPS.paintInlineImageXObject:this.paintInlineImageXObject(c[0]);break;case E.OPS.paintImageMaskXObject:this.paintImageMaskXObject(c[0]);break;case E.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(c[0],c[1]);break;case E.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case E.OPS.closePath:this.closePath();break;case E.OPS.closeStroke:this.closeStroke();break;case E.OPS.closeFillStroke:this.closeFillStroke();break;case E.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case E.OPS.nextLine:this.nextLine();break;case E.OPS.transform:this.transform(c[0],c[1],c[2],c[3],c[4],c[5]);break;case E.OPS.constructPath:this.constructPath(c[0],c[1]);break;case E.OPS.endPath:this.endPath();break;case 92:this.group(n.items);break;default:(0,E.warn)(`Unimplemented operator ${r}`);break}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,n,r,t,c,C){const i=this.current;i.textMatrix=i.lineMatrix=[e,n,r,t,c,C],i.textMatrixScale=Math.hypot(e,n),i.x=i.lineX=0,i.y=i.lineY=0,i.xcoords=[],i.ycoords=[],i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${a(i.fontSize)}px`),i.tspan.setAttributeNS(null,"y",a(-i.y)),i.txtElement=this.svgFactory.createElement("svg:text"),i.txtElement.append(i.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=E.IDENTITY_MATRIX,e.lineMatrix=E.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,n){const r=this.current;r.x=r.lineX+=e,r.y=r.lineY+=n,r.xcoords=[],r.ycoords=[],r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size",`${a(r.fontSize)}px`),r.tspan.setAttributeNS(null,"y",a(-r.y))}showText(e){const n=this.current,r=n.font,t=n.fontSize;if(t===0)return;const c=n.fontSizeScale,C=n.charSpacing,i=n.wordSpacing,S=n.fontDirection,H=n.textHScale*S,X=r.vertical,Q=X?1:-1,ee=r.defaultVMetrics,de=t*n.fontMatrix[0];let ie=0;for(const Ee of e){if(Ee===null){ie+=S*i;continue}else if(typeof Ee=="number"){ie+=Q*Ee*t/1e3;continue}const _e=(Ee.isSpace?i:0)+C,ye=Ee.fontChar;let z,m,g=Ee.width;if(X){let W;const G=Ee.vmetric||ee;W=Ee.vmetric?G[1]:g*.5,W=-W*de;const $=G[2]*de;g=G?-G[0]:g,z=W/c,m=(ie+$)/c}else z=ie/c,m=0;(Ee.isInFont||r.missingFile)&&(n.xcoords.push(n.x+z),X&&n.ycoords.push(-n.y+m),n.tspan.textContent+=ye);let T;X?T=g*de-_e*S:T=g*de+_e*S,ie+=T}n.tspan.setAttributeNS(null,"x",n.xcoords.map(a).join(" ")),X?n.tspan.setAttributeNS(null,"y",n.ycoords.map(a).join(" ")):n.tspan.setAttributeNS(null,"y",a(-n.y)),X?n.y-=ie:n.x+=ie*H,n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",`${a(n.fontSize)}px`),n.fontStyle!==J.fontStyle&&n.tspan.setAttributeNS(null,"font-style",n.fontStyle),n.fontWeight!==J.fontWeight&&n.tspan.setAttributeNS(null,"font-weight",n.fontWeight);const ue=n.textRenderingMode&E.TextRenderingMode.FILL_STROKE_MASK;if(ue===E.TextRenderingMode.FILL||ue===E.TextRenderingMode.FILL_STROKE?(n.fillColor!==J.fillColor&&n.tspan.setAttributeNS(null,"fill",n.fillColor),n.fillAlpha<1&&n.tspan.setAttributeNS(null,"fill-opacity",n.fillAlpha)):n.textRenderingMode===E.TextRenderingMode.ADD_TO_PATH?n.tspan.setAttributeNS(null,"fill","transparent"):n.tspan.setAttributeNS(null,"fill","none"),ue===E.TextRenderingMode.STROKE||ue===E.TextRenderingMode.FILL_STROKE){const Ee=1/(n.textMatrixScale||1);this._setStrokeAttributes(n.tspan,Ee)}let ge=n.textMatrix;n.textRise!==0&&(ge=ge.slice(),ge[5]+=n.textRise),n.txtElement.setAttributeNS(null,"transform",`${f(ge)} scale(${a(H)}, -1)`),n.txtElement.setAttributeNS(D,"xml:space","preserve"),n.txtElement.append(n.tspan),n.txtgrp.append(n.txtElement),this._ensureTransformGroup().append(n.txtElement)}setLeadingMoveText(e,n){this.setLeading(-n),this.moveText(e,n)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const n=P(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}"; src: url(${n}); }
`}setFont(e){const n=this.current,r=this.commonObjs.get(e[0]);let t=e[1];n.font=r,this.embedFonts&&!r.missingFile&&!this.embeddedFonts[r.loadedName]&&(this.addFontStyle(r),this.embeddedFonts[r.loadedName]=r),n.fontMatrix=r.fontMatrix||E.FONT_IDENTITY_MATRIX;let c="normal";r.black?c="900":r.bold&&(c="bold");const C=r.italic?"italic":"normal";t<0?(t=-t,n.fontDirection=-1):n.fontDirection=1,n.fontSize=t,n.fontFamily=r.loadedName,n.fontWeight=c,n.fontStyle=C,n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"y",a(-n.y)),n.xcoords=[],n.ycoords=[]}endText(){var n;const e=this.current;e.textRenderingMode&E.TextRenderingMode.ADD_TO_PATH_FLAG&&((n=e.txtElement)!=null&&n.hasChildNodes())&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=A[e]}setLineJoin(e){this.current.lineJoin=M[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,n,r){this.current.strokeColor=E.Util.makeHexColor(e,n,r)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,n,r){this.current.fillColor=E.Util.makeHexColor(e,n,r),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const n=this.viewport.width,r=this.viewport.height,t=E.Util.inverseTransform(this.transformMatrix),c=E.Util.applyTransform([0,0],t),C=E.Util.applyTransform([0,r],t),i=E.Util.applyTransform([n,0],t),S=E.Util.applyTransform([n,r],t),H=Math.min(c[0],C[0],i[0],S[0]),X=Math.min(c[1],C[1],i[1],S[1]),Q=Math.max(c[0],C[0],i[0],S[0]),ee=Math.max(c[1],C[1],i[1],S[1]),de=this.svgFactory.createElement("svg:rect");de.setAttributeNS(null,"x",H),de.setAttributeNS(null,"y",X),de.setAttributeNS(null,"width",Q-H),de.setAttributeNS(null,"height",ee-X),de.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&de.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(de)}_makeColorN_Pattern(e){return e[0]==="TilingPattern"?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const n=e[1],r=e[2],t=e[3]||E.IDENTITY_MATRIX,[c,C,i,S]=e[4],H=e[5],X=e[6],Q=e[7],ee=`shading${h++}`,[de,ie,ue,ge]=E.Util.normalizeRect([...E.Util.applyTransform([c,C],t),...E.Util.applyTransform([i,S],t)]),[Ee,_e]=E.Util.singularValueDecompose2dScale(t),ye=H*Ee,z=X*_e,m=this.svgFactory.createElement("svg:pattern");m.setAttributeNS(null,"id",ee),m.setAttributeNS(null,"patternUnits","userSpaceOnUse"),m.setAttributeNS(null,"width",ye),m.setAttributeNS(null,"height",z),m.setAttributeNS(null,"x",`${de}`),m.setAttributeNS(null,"y",`${ie}`);const g=this.svg,T=this.transformMatrix,W=this.current.fillColor,G=this.current.strokeColor,$=this.svgFactory.create(ue-de,ge-ie);if(this.svg=$,this.transformMatrix=t,Q===2){const I=E.Util.makeHexColor(...n);this.current.fillColor=I,this.current.strokeColor=I}return this.executeOpTree(this.convertOpList(r)),this.svg=g,this.transformMatrix=T,this.current.fillColor=W,this.current.strokeColor=G,m.append($.childNodes[0]),this.defs.append(m),`url(#${ee})`}_makeShadingPattern(e){switch(typeof e=="string"&&(e=this.objs.get(e)),e[0]){case"RadialAxial":const n=`shading${h++}`,r=e[3];let t;switch(e[1]){case"axial":const c=e[4],C=e[5];t=this.svgFactory.createElement("svg:linearGradient"),t.setAttributeNS(null,"id",n),t.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),t.setAttributeNS(null,"x1",c[0]),t.setAttributeNS(null,"y1",c[1]),t.setAttributeNS(null,"x2",C[0]),t.setAttributeNS(null,"y2",C[1]);break;case"radial":const i=e[4],S=e[5],H=e[6],X=e[7];t=this.svgFactory.createElement("svg:radialGradient"),t.setAttributeNS(null,"id",n),t.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),t.setAttributeNS(null,"cx",S[0]),t.setAttributeNS(null,"cy",S[1]),t.setAttributeNS(null,"r",X),t.setAttributeNS(null,"fx",i[0]),t.setAttributeNS(null,"fy",i[1]),t.setAttributeNS(null,"fr",H);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(const c of r){const C=this.svgFactory.createElement("svg:stop");C.setAttributeNS(null,"offset",c[0]),C.setAttributeNS(null,"stop-color",c[1]),t.append(C)}return this.defs.append(t),`url(#${n})`;case"Mesh":return(0,E.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(e,n){this.current.dashArray=e,this.current.dashPhase=n}constructPath(e,n){const r=this.current;let t=r.x,c=r.y,C=[],i=0;for(const S of e)switch(S|0){case E.OPS.rectangle:t=n[i++],c=n[i++];const H=n[i++],X=n[i++],Q=t+H,ee=c+X;C.push("M",a(t),a(c),"L",a(Q),a(c),"L",a(Q),a(ee),"L",a(t),a(ee),"Z");break;case E.OPS.moveTo:t=n[i++],c=n[i++],C.push("M",a(t),a(c));break;case E.OPS.lineTo:t=n[i++],c=n[i++],C.push("L",a(t),a(c));break;case E.OPS.curveTo:t=n[i+4],c=n[i+5],C.push("C",a(n[i]),a(n[i+1]),a(n[i+2]),a(n[i+3]),a(t),a(c)),i+=6;break;case E.OPS.curveTo2:C.push("C",a(t),a(c),a(n[i]),a(n[i+1]),a(n[i+2]),a(n[i+3])),t=n[i+2],c=n[i+3],i+=4;break;case E.OPS.curveTo3:t=n[i+2],c=n[i+3],C.push("C",a(n[i]),a(n[i+1]),a(t),a(c),a(t),a(c)),i+=4;break;case E.OPS.closePath:C.push("Z");break}C=C.join(" "),r.path&&e.length>0&&e[0]!==E.OPS.rectangle&&e[0]!==E.OPS.moveTo?C=r.path.getAttributeNS(null,"d")+C:(r.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(r.path)),r.path.setAttributeNS(null,"d",C),r.path.setAttributeNS(null,"fill","none"),r.element=r.path,r.setCurrentPoint(t,c)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element){this.pendingClip=null;return}const n=`clippath${y++}`,r=this.svgFactory.createElement("svg:clipPath");r.setAttributeNS(null,"id",n),r.setAttributeNS(null,"transform",f(this.transformMatrix));const t=e.element.cloneNode(!0);if(this.pendingClip==="evenodd"?t.setAttributeNS(null,"clip-rule","evenodd"):t.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,r.append(t),this.defs.append(r),e.activeClipUrl){e.clipGroup=null;for(const c of this.extraStack)c.clipGroup=null;r.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl=`url(#${n})`,this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const n=`${e.path.getAttributeNS(null,"d")}Z`;e.path.setAttributeNS(null,"d",n)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[n,r]of e)switch(n){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r);break;case"CA":this.setStrokeAlpha(r);break;case"ca":this.setFillAlpha(r);break;default:(0,E.warn)(`Unimplemented graphic state operator ${n}`);break}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e,n=1){const r=this.current;let t=r.dashArray;n!==1&&t.length>0&&(t=t.map(function(c){return n*c})),e.setAttributeNS(null,"stroke",r.strokeColor),e.setAttributeNS(null,"stroke-opacity",r.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",a(r.miterLimit)),e.setAttributeNS(null,"stroke-linecap",r.lineCap),e.setAttributeNS(null,"stroke-linejoin",r.lineJoin),e.setAttributeNS(null,"stroke-width",a(n*r.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",t.map(a).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",a(n*r.dashPhase)+"px")}eoFill(){var e;(e=this.current.element)==null||e.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var e;(e=this.current.element)==null||e.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(e)}paintImageXObject(e){const n=this.getObject(e);if(!n){(0,E.warn)(`Dependent image with object ID ${e} is not ready yet`);return}this.paintInlineImageXObject(n)}paintInlineImageXObject(e,n){const r=e.width,t=e.height,c=_(e,this.forceDataSchema,!!n),C=this.svgFactory.createElement("svg:rect");C.setAttributeNS(null,"x","0"),C.setAttributeNS(null,"y","0"),C.setAttributeNS(null,"width",a(r)),C.setAttributeNS(null,"height",a(t)),this.current.element=C,this.clip("nonzero");const i=this.svgFactory.createElement("svg:image");i.setAttributeNS(k,"xlink:href",c),i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y",a(-t)),i.setAttributeNS(null,"width",a(r)+"px"),i.setAttributeNS(null,"height",a(t)+"px"),i.setAttributeNS(null,"transform",`scale(${a(1/r)} ${a(-1/t)})`),n?n.append(i):this._ensureTransformGroup().append(i)}paintImageMaskXObject(e){const n=this.getObject(e.data,e);if(n.bitmap){(0,E.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const r=this.current,t=n.width,c=n.height,C=r.fillColor;r.maskId=`mask${v++}`;const i=this.svgFactory.createElement("svg:mask");i.setAttributeNS(null,"id",r.maskId);const S=this.svgFactory.createElement("svg:rect");S.setAttributeNS(null,"x","0"),S.setAttributeNS(null,"y","0"),S.setAttributeNS(null,"width",a(t)),S.setAttributeNS(null,"height",a(c)),S.setAttributeNS(null,"fill",C),S.setAttributeNS(null,"mask",`url(#${r.maskId})`),this.defs.append(i),this._ensureTransformGroup().append(S),this.paintInlineImageXObject(n,i)}paintFormXObjectBegin(e,n){if(Array.isArray(e)&&e.length===6&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),n){const r=n[2]-n[0],t=n[3]-n[1],c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x",n[0]),c.setAttributeNS(null,"y",n[1]),c.setAttributeNS(null,"width",a(r)),c.setAttributeNS(null,"height",a(t)),this.current.element=c,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const n=this.svgFactory.create(e.width,e.height),r=this.svgFactory.createElement("svg:defs");n.append(r),this.defs=r;const t=this.svgFactory.createElement("svg:g");return t.setAttributeNS(null,"transform",f(e.transform)),n.append(t),this.svg=t,n}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",f(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(w){var o=__webpack_module_cache__[w];if(o!==void 0)return o.exports;var O=__webpack_module_cache__[w]={exports:{}};return __webpack_modules__[w](O,O.exports,__w_pdfjs_require__),O.exports}var __webpack_exports__={};return(()=>{var w=__webpack_exports__;Object.defineProperty(w,"__esModule",{value:!0}),Object.defineProperty(w,"AbortException",{enumerable:!0,get:function(){return o.AbortException}}),Object.defineProperty(w,"AnnotationEditorLayer",{enumerable:!0,get:function(){return L.AnnotationEditorLayer}}),Object.defineProperty(w,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return o.AnnotationEditorParamsType}}),Object.defineProperty(w,"AnnotationEditorType",{enumerable:!0,get:function(){return o.AnnotationEditorType}}),Object.defineProperty(w,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return q.AnnotationEditorUIManager}}),Object.defineProperty(w,"AnnotationLayer",{enumerable:!0,get:function(){return J.AnnotationLayer}}),Object.defineProperty(w,"AnnotationMode",{enumerable:!0,get:function(){return o.AnnotationMode}}),Object.defineProperty(w,"CMapCompressionType",{enumerable:!0,get:function(){return o.CMapCompressionType}}),Object.defineProperty(w,"FeatureTest",{enumerable:!0,get:function(){return o.FeatureTest}}),Object.defineProperty(w,"GlobalWorkerOptions",{enumerable:!0,get:function(){return D.GlobalWorkerOptions}}),Object.defineProperty(w,"InvalidPDFException",{enumerable:!0,get:function(){return o.InvalidPDFException}}),Object.defineProperty(w,"MissingPDFException",{enumerable:!0,get:function(){return o.MissingPDFException}}),Object.defineProperty(w,"OPS",{enumerable:!0,get:function(){return o.OPS}}),Object.defineProperty(w,"PDFDataRangeTransport",{enumerable:!0,get:function(){return O.PDFDataRangeTransport}}),Object.defineProperty(w,"PDFDateString",{enumerable:!0,get:function(){return d.PDFDateString}}),Object.defineProperty(w,"PDFWorker",{enumerable:!0,get:function(){return O.PDFWorker}}),Object.defineProperty(w,"PasswordResponses",{enumerable:!0,get:function(){return o.PasswordResponses}}),Object.defineProperty(w,"PermissionFlag",{enumerable:!0,get:function(){return o.PermissionFlag}}),Object.defineProperty(w,"PixelsPerInch",{enumerable:!0,get:function(){return d.PixelsPerInch}}),Object.defineProperty(w,"PromiseCapability",{enumerable:!0,get:function(){return o.PromiseCapability}}),Object.defineProperty(w,"RenderingCancelledException",{enumerable:!0,get:function(){return d.RenderingCancelledException}}),Object.defineProperty(w,"SVGGraphics",{enumerable:!0,get:function(){return k.SVGGraphics}}),Object.defineProperty(w,"UnexpectedResponseException",{enumerable:!0,get:function(){return o.UnexpectedResponseException}}),Object.defineProperty(w,"Util",{enumerable:!0,get:function(){return o.Util}}),Object.defineProperty(w,"VerbosityLevel",{enumerable:!0,get:function(){return o.VerbosityLevel}}),Object.defineProperty(w,"XfaLayer",{enumerable:!0,get:function(){return A.XfaLayer}}),Object.defineProperty(w,"build",{enumerable:!0,get:function(){return O.build}}),Object.defineProperty(w,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return o.createValidAbsoluteUrl}}),Object.defineProperty(w,"getDocument",{enumerable:!0,get:function(){return O.getDocument}}),Object.defineProperty(w,"getFilenameFromUrl",{enumerable:!0,get:function(){return d.getFilenameFromUrl}}),Object.defineProperty(w,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return d.getPdfFilenameFromUrl}}),Object.defineProperty(w,"getXfaPageViewport",{enumerable:!0,get:function(){return d.getXfaPageViewport}}),Object.defineProperty(w,"isDataScheme",{enumerable:!0,get:function(){return d.isDataScheme}}),Object.defineProperty(w,"isPdfFile",{enumerable:!0,get:function(){return d.isPdfFile}}),Object.defineProperty(w,"loadScript",{enumerable:!0,get:function(){return d.loadScript}}),Object.defineProperty(w,"normalizeUnicode",{enumerable:!0,get:function(){return o.normalizeUnicode}}),Object.defineProperty(w,"renderTextLayer",{enumerable:!0,get:function(){return E.renderTextLayer}}),Object.defineProperty(w,"setLayerDimensions",{enumerable:!0,get:function(){return d.setLayerDimensions}}),Object.defineProperty(w,"shadow",{enumerable:!0,get:function(){return o.shadow}}),Object.defineProperty(w,"updateTextLayer",{enumerable:!0,get:function(){return E.updateTextLayer}}),Object.defineProperty(w,"version",{enumerable:!0,get:function(){return O.version}});var o=__w_pdfjs_require__(1),O=__w_pdfjs_require__(2),d=__w_pdfjs_require__(6),E=__w_pdfjs_require__(26),L=__w_pdfjs_require__(27),q=__w_pdfjs_require__(5),J=__w_pdfjs_require__(32),D=__w_pdfjs_require__(14),k=__w_pdfjs_require__(35),A=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule,pdfjs$1=pdfjs;var __spreadArray=globalThis&&globalThis.__spreadArray||function(w,o,O){if(O||arguments.length===2)for(var d=0,E=o.length,L;d<E;d++)(L||!(d in o))&&(L||(L=Array.prototype.slice.call(o,0,d)),L[d]=o[d]);return w.concat(L||Array.prototype.slice.call(o))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(w,o){var O={};return allEvents.forEach(function(d){var E=w[d];E&&(o?O[d]=function(L){return E(L,o(d))}:O[d]=E)}),O}function makeCancellablePromise(w){var o=!1,O=new Promise(function(d,E){w.then(function(L){return!o&&d(L)}).catch(function(L){return!o&&E(L)})});return{promise:O,cancel:function(){o=!0}}}var isProduction=!0,prefix="Invariant failed";function invariant(w,o){if(!w){if(isProduction)throw new Error(prefix);var O=typeof o=="function"?o():o,d=O?"".concat(prefix,": ").concat(O):prefix;throw new Error(d)}}function warning(w,o){}const DocumentContext=reactExports.createContext(null);function Message({children:w,type:o}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${o}`},w)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(o){this.pdfDocument=o}setViewer(o){this.pdfViewer=o}setExternalLinkRel(o){this.externalLinkRel=o}setExternalLinkTarget(o){this.externalLinkTarget=o}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(o){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=o}get rotation(){return 0}set rotation(o){}goToDestination(o){return new Promise(O=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(o,"Destination is not specified."),typeof o=="string"?this.pdfDocument.getDestination(o).then(O):Array.isArray(o)?O(o):o.then(O)}).then(O=>{invariant(Array.isArray(O),`"${O}" is not a valid destination array.`);const d=O[0];new Promise(E=>{invariant(this.pdfDocument,"PDF document not loaded."),d instanceof Object?this.pdfDocument.getPageIndex(d).then(L=>{E(L)}).catch(()=>{invariant(!1,`"${d}" is not a valid page reference.`)}):typeof d=="number"?E(d):invariant(!1,`"${d}" is not a valid destination reference.`)}).then(E=>{const L=E+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(L>=1&&L<=this.pagesCount,`"${L}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:O,pageIndex:E,pageNumber:L})})})}navigateTo(o){this.goToDestination(o)}goToPage(o){const O=o-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(o>=1&&o<=this.pagesCount,`"${o}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:O,pageNumber:o})}addLinkAttributes(o,O,d){o.href=O,o.rel=this.externalLinkRel||DEFAULT_LINK_REL,o.target=d?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses,isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(w){return typeof w<"u"}function isProvided(w){return isDefined(w)&&w!==null}function isString(w){return typeof w=="string"}function isArrayBuffer(w){return w instanceof ArrayBuffer}function isBlob(w){return invariant(isBrowser,"isBlob can only be used in a browser environment"),w instanceof Blob}function isDataURI(w){return isString(w)&&/^data:/.test(w)}function dataURItoByteString(w){invariant(isDataURI(w),"Invalid data URI.");const[o="",O=""]=w.split(",");return o.split(";").indexOf("base64")!==-1?atob(O):unescape(O)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}function displayWorkerWarning(){}function cancelRunningTask(w){w&&w.cancel&&w.cancel()}function makePageCallback(w,o){return Object.defineProperty(w,"width",{get(){return this.view[2]*o},configurable:!0}),Object.defineProperty(w,"height",{get(){return this.view[3]*o},configurable:!0}),Object.defineProperty(w,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(w,"originalHeight",{get(){return this.view[3]},configurable:!0}),w}function isCancelException(w){return w.name==="RenderingCancelledException"}function loadFromFile(w){return new Promise((o,O)=>{const d=new FileReader;d.onload=()=>{if(!d.result)return O(new Error("Error while reading a file."));o(d.result)},d.onerror=E=>{if(!E.target)return O(new Error("Error while reading a file."));const{error:L}=E.target;if(!L)return O(new Error("Error while reading a file."));switch(L.code){case L.NOT_FOUND_ERR:return O(new Error("Error while reading a file: File not found."));case L.SECURITY_ERR:return O(new Error("Error while reading a file: Security error."));case L.ABORT_ERR:return O(new Error("Error while reading a file: Aborted."));default:return O(new Error("Error while reading a file."))}},d.readAsArrayBuffer(w)})}function reducer(w,o){switch(o.type){case"RESOLVE":return{value:o.value,error:void 0};case"REJECT":return{value:!1,error:o.error};case"RESET":return{value:void 0,error:void 0};default:return w}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs$1,eventProps=(()=>{const w={};return allEvents.forEach(o=>{w[o]=PropTypes.func}),w})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function w(o,O,d){const{[O]:E,pageNumber:L,pdf:q}=o;if(!isDefined(q))return null;if(isDefined(E)){if(typeof E!="number")return new Error(`\`${O}\` of type \`${typeof E}\` supplied to \`${d}\`, expected \`number\`.`);if(E<0)return new Error(`Expected \`${O}\` to be greater or equal to 0.`);const{numPages:J}=q;if(E+1>J)return new Error(`Expected \`${O}\` to be less or equal to ${J-1}.`)}else if(!isDefined(L))return new Error(`\`${O}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${d}\`.`);return null},isPageNumber=function w(o,O,d){const{[O]:E,pageIndex:L,pdf:q}=o;if(!isDefined(q))return null;if(isDefined(E)){if(typeof E!="number")return new Error(`\`${O}\` of type \`${typeof E}\` supplied to \`${d}\`, expected \`number\`.`);if(E<1)return new Error(`Expected \`${O}\` to be greater or equal to 1.`);const{numPages:J}=q;if(E>J)return new Error(`Expected \`${O}\` to be less or equal to ${J}.`)}else if(!isDefined(L))return new Error(`\`${O}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${d}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=globalThis&&globalThis.__awaiter||function(w,o,O,d){function E(L){return L instanceof O?L:new O(function(q){q(L)})}return new(O||(O=Promise))(function(L,q){function J(A){try{k(d.next(A))}catch(M){q(M)}}function D(A){try{k(d.throw(A))}catch(M){q(M)}}function k(A){A.done?L(A.value):E(A.value).then(J,D)}k((d=d.apply(w,o||[])).next())})},__rest$1=globalThis&&globalThis.__rest||function(w,o){var O={};for(var d in w)Object.prototype.hasOwnProperty.call(w,d)&&o.indexOf(d)<0&&(O[d]=w[d]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,d=Object.getOwnPropertySymbols(w);E<d.length;E++)o.indexOf(d[E])<0&&Object.prototype.propertyIsEnumerable.call(w,d[E])&&(O[d[E]]=w[d[E]]);return O};const{PDFDataRangeTransport}=pdfjs$1,defaultOnPassword=(w,o)=>{switch(o){case PasswordResponses$1.NEED_PASSWORD:{const O=prompt("Enter the password to open this PDF file.");w(O);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const O=prompt("Invalid password. Please try again.");w(O);break}}},Document=reactExports.forwardRef(function w(o,O){var{children:d,className:E,error:L="Failed to load PDF file.",externalLinkRel:q,externalLinkTarget:J,file:D,inputRef:k,imageResourcesPath:A,loading:M="Loading PDF…",noData:P="No PDF file specified.",onItemClick:_,onLoadError:p,onLoadProgress:u,onLoadSuccess:a,onPassword:f=defaultOnPassword,onSourceError:y,onSourceSuccess:v,options:h,renderMode:e,rotate:n}=o,r=__rest$1(o,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[t,c]=useResolver(),{value:C,error:i}=t,[S,H]=useResolver(),{value:X,error:Q}=S,ee=reactExports.useRef(new LinkService),de=reactExports.useRef([]),ie=reactExports.useRef({scrollPageIntoView:s=>{const{dest:l,pageNumber:x,pageIndex:R=x-1}=s;if(_){_({dest:l,pageIndex:R,pageNumber:x});return}const j=de.current[R];if(j){j.scrollIntoView();return}}});reactExports.useImperativeHandle(O,()=>({linkService:ee,pages:de,viewer:ie}),[]);function ue(){v&&v()}function ge(){i&&(i.toString(),y&&y(i))}function Ee(){c({type:"RESET"})}reactExports.useEffect(Ee,[D,c]);const _e=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!D)return null;if(typeof D=="string")return isDataURI(D)?{data:dataURItoByteString(D)}:{url:D};if(D instanceof PDFDataRangeTransport)return{range:D};if(isArrayBuffer(D))return{data:D};if(isBrowser&&isBlob(D))return{data:yield loadFromFile(D)};if(invariant(typeof D=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant("data"in D||"range"in D||"url"in D,"Invalid parameter object: need either .data, .range or .url"),"url"in D&&typeof D.url=="string"&&isDataURI(D.url)){const{url:s}=D,l=__rest$1(D,["url"]),x=dataURItoByteString(s);return Object.assign({data:x},l)}return D}),[D]);reactExports.useEffect(()=>{const s=makeCancellablePromise(_e());return s.promise.then(l=>{c({type:"RESOLVE",value:l})}).catch(l=>{c({type:"REJECT",error:l})}),()=>{cancelRunningTask(s)}},[_e,c]),reactExports.useEffect(()=>{if(!(typeof C>"u")){if(C===!1){ge();return}ue()}},[C]);function ye(){X&&(a&&a(X),de.current=new Array(X.numPages),ee.current.setDocument(X))}function z(){Q&&(Q.toString(),p&&p(Q))}function m(){H({type:"RESET"})}reactExports.useEffect(m,[H,C]);function g(){if(!C)return;const s=h?Object.assign(Object.assign({},C),h):C,l=pdfjs$1.getDocument(s);u&&(l.onProgress=u),f&&(l.onPassword=f);const x=l;return x.promise.then(R=>{H({type:"RESOLVE",value:R})}).catch(R=>{x.destroyed||H({type:"REJECT",error:R})}),()=>{x.destroy()}}reactExports.useEffect(g,[h,H,C]),reactExports.useEffect(()=>{if(!(typeof X>"u")){if(X===!1){z();return}ye()}},[X]);function T(){ee.current.setViewer(ie.current),ee.current.setExternalLinkRel(q),ee.current.setExternalLinkTarget(J)}reactExports.useEffect(T,[q,J]);function W(s,l){de.current[s]=l}function G(s){delete de.current[s]}const $=reactExports.useMemo(()=>({imageResourcesPath:A,linkService:ee.current,onItemClick:_,pdf:X,registerPage:W,renderMode:e,rotate:n,unregisterPage:G}),[A,_,X,e,n]),I=reactExports.useMemo(()=>makeEventProps(r,()=>X),[r,X]);function N(){return React.createElement(DocumentContext.Provider,{value:$},d)}function U(){return D?X==null?React.createElement(Message,{type:"loading"},typeof M=="function"?M():M):X===!1?React.createElement(Message,{type:"error"},typeof L=="function"?L():L):N():React.createElement(Message,{type:"no-data"},typeof P=="function"?P():P)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",E),ref:k,style:{"--scale-factor":"1"}},I),U())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});const Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var w=[],o=0;o<arguments.length;o++)w[o]=arguments[o];var O=w.filter(Boolean);if(O.length<=1){var d=O[0];return d||null}return function(L){O.forEach(function(q){typeof q=="function"?q(L):q&&(q.current=L)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(w){return w in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(w){return"children"in w}function isStructTreeNodeWithOnlyContentChild(w){return isStructTreeNode(w)?w.children.length===1&&0 in w.children&&"id"in w.children[0]:!1}function getRoleAttributes(w){const o={};if(isStructTreeNode(w)){const{role:O}=w,d=O.match(HEADING_PATTERN);if(d)o.role="heading",o["aria-level"]=Number(d[1]);else if(isPdfRole(O)){const E=PDF_ROLE_TO_HTML_ROLE[O];E&&(o.role=E)}}return o}function getBaseAttributes(w){const o={};if(isStructTreeNode(w)){if(w.alt!==void 0&&(o["aria-label"]=w.alt),w.lang!==void 0&&(o.lang=w.lang),isStructTreeNodeWithOnlyContentChild(w)){const[O]=w.children;if(O){const d=getBaseAttributes(O);return Object.assign(Object.assign({},o),d)}}}else"id"in w&&(o["aria-owns"]=w.id);return o}function getAttributes(w){return w?Object.assign(Object.assign({},getRoleAttributes(w)),getBaseAttributes(w)):null}function StructTreeItem({className:w,node:o}){const O=reactExports.useMemo(()=>getAttributes(o),[o]),d=reactExports.useMemo(()=>!isStructTreeNode(o)||isStructTreeNodeWithOnlyContentChild(o)?null:o.children.map((E,L)=>React.createElement(StructTreeItem,{key:L,node:E})),[o]);return React.createElement("span",Object.assign({className:w},O),d)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const w=usePageContext();invariant(w,"Unable to find Page context.");const{onGetStructTreeError:o,onGetStructTreeSuccess:O}=w,[d,E]=useResolver(),{value:L,error:q}=d,{customTextRenderer:J,page:D}=w;function k(){L&&O&&O(L)}function A(){q&&(q.toString(),o&&o(q))}function M(){E({type:"RESET"})}reactExports.useEffect(M,[E,D]);function P(){if(J||!D)return;const _=makeCancellablePromise(D.getStructTree()),p=_;return _.promise.then(u=>{E({type:"RESOLVE",value:u})}).catch(u=>{E({type:"REJECT",error:u})}),()=>cancelRunningTask(p)}return reactExports.useEffect(P,[J,D,E]),reactExports.useEffect(()=>{if(L!==void 0){if(L===!1){A();return}k()}},[L]),L?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:L}):null}const ANNOTATION_MODE=pdfjs$1.AnnotationMode;function PageCanvas(w){const o=usePageContext();invariant(o,"Unable to find Page context.");const O=Object.assign(Object.assign({},o),w),{_className:d,canvasBackground:E,devicePixelRatio:L=getDevicePixelRatio(),onRenderError:q,onRenderSuccess:J,page:D,renderForms:k,renderTextLayer:A,rotate:M,scale:P}=O,{canvasRef:_}=w;invariant(D,"Attempted to render page canvas, but no page was specified.");const p=reactExports.useRef(null);function u(){D&&J&&J(makePageCallback(D,P))}function a(e){isCancelException(e)||(e.toString(),q&&q(e))}const f=reactExports.useMemo(()=>D.getViewport({scale:P*L,rotation:M}),[L,D,M,P]),y=reactExports.useMemo(()=>D.getViewport({scale:P,rotation:M}),[D,M,P]);function v(){if(!D)return;D.cleanup();const{current:e}=p;if(!e)return;e.width=f.width,e.height=f.height,e.style.width=`${Math.floor(y.width)}px`,e.style.height=`${Math.floor(y.height)}px`,e.style.visibility="hidden";const n={annotationMode:k?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:e.getContext("2d",{alpha:!1}),viewport:f};E&&(n.background=E);const r=D.render(n),t=r;return r.promise.then(()=>{e.style.visibility="",u()}).catch(a),()=>cancelRunningTask(t)}reactExports.useEffect(v,[E,p,L,D,k,f,y]);const h=reactExports.useCallback(()=>{const{current:e}=p;e&&(e.width=0,e.height=0)},[p]);return reactExports.useEffect(()=>h,[h]),React.createElement("canvas",{className:`${d}__canvas`,dir:"ltr",ref:mergeRefs(_,p),style:{display:"block",userSelect:"none"}},A?React.createElement(StructTree,null):null)}function PageSVG(){const w=usePageContext();invariant(w,"Unable to find Page context.");const{_className:o,onRenderSuccess:O,onRenderError:d,page:E,rotate:L,scale:q}=w;invariant(E,"Attempted to render page SVG, but no page was specified.");const[J,D]=useResolver(),{value:k,error:A}=J;function M(){E&&O&&O(makePageCallback(E,q))}function P(){A&&(isCancelException(A)||(A.toString(),d&&d(A)))}const _=reactExports.useMemo(()=>E.getViewport({scale:q,rotation:L}),[E,L,q]);function p(){D({type:"RESET"})}reactExports.useEffect(p,[E,D,_]);function u(){if(!E)return;const v=makeCancellablePromise(E.getOperatorList());return v.promise.then(h=>{new pdfjs$1.SVGGraphics(E.commonObjs,E.objs).getSVG(h,_).then(n=>{D({type:"RESOLVE",value:n})}).catch(n=>{D({type:"REJECT",error:n})})}).catch(h=>{D({type:"REJECT",error:h})}),()=>cancelRunningTask(v)}reactExports.useEffect(u,[E,D,_]),reactExports.useEffect(()=>{if(k!==void 0){if(k===!1){P();return}M()}},[k]);function a(v){if(!v||!k)return;v.firstElementChild||v.appendChild(k);const{width:h,height:e}=_;k.setAttribute("width",`${h}`),k.setAttribute("height",`${e}`)}const{width:f,height:y}=_;return React.createElement("div",{className:`${o}__svg`,ref:v=>a(v),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:f,height:y,userSelect:"none"}})}function isTextItem(w){return"str"in w}function TextLayer(){const w=usePageContext();invariant(w,"Unable to find Page context.");const{customTextRenderer:o,onGetTextError:O,onGetTextSuccess:d,onRenderTextLayerError:E,onRenderTextLayerSuccess:L,page:q,pageIndex:J,pageNumber:D,rotate:k,scale:A}=w;invariant(q,"Attempted to load page text content, but no page was specified.");const[M,P]=useResolver(),{value:_,error:p}=M,u=reactExports.useRef(null),a=reactExports.useRef();parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10);function f(){_&&d&&d(_)}function y(){p&&(p.toString(),O&&O(p))}function v(){P({type:"RESET"})}reactExports.useEffect(v,[q,P]);function h(){if(!q)return;const i=makeCancellablePromise(q.getTextContent()),S=i;return i.promise.then(H=>{P({type:"RESOLVE",value:H})}).catch(H=>{P({type:"REJECT",error:H})}),()=>cancelRunningTask(S)}reactExports.useEffect(h,[q,P]),reactExports.useEffect(()=>{if(_!==void 0){if(_===!1){y();return}f()}},[_]);const e=reactExports.useCallback(()=>{L&&L()},[L]),n=reactExports.useCallback(i=>{i.toString(),E&&E(i)},[E]);function r(){const i=a.current;i&&i.classList.add("active")}function t(){const i=a.current;i&&i.classList.remove("active")}const c=reactExports.useMemo(()=>q.getViewport({scale:A,rotation:k}),[q,k,A]);function C(){if(!q||!_)return;const{current:i}=u;if(!i)return;i.innerHTML="";const S=q.streamTextContent({includeMarkedContent:!0}),H={container:i,textContentSource:S,viewport:c},X=pdfjs$1.renderTextLayer(H),Q=X;return X.promise.then(()=>{const ee=document.createElement("div");ee.className="endOfContent",i.append(ee),a.current=ee;const ie=!!i.querySelector(".markedContent")?i.querySelectorAll(".markedContent > *:not(.markedContent"):i.children;if(o){let ue=0;_.items.forEach((ge,Ee)=>{if(!isTextItem(ge))return;const _e=ie[ue];if(!_e)return;const ye=o(Object.assign({pageIndex:J,pageNumber:D,itemIndex:Ee},ge));_e.innerHTML=ye,ue+=ge.str&&ge.hasEOL?2:1})}e()}).catch(n),()=>cancelRunningTask(Q)}return reactExports.useLayoutEffect(C,[o,n,e,q,J,D,_,c]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:t,onMouseDown:r,ref:u})}function AnnotationLayer(){const w=useDocumentContext();invariant(w,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const o=usePageContext();invariant(o,"Unable to find Page context.");const O=Object.assign(Object.assign({},w),o),{imageResourcesPath:d,linkService:E,onGetAnnotationsError:L,onGetAnnotationsSuccess:q,onRenderAnnotationLayerError:J,onRenderAnnotationLayerSuccess:D,page:k,pdf:A,renderForms:M,rotate:P,scale:_=1}=O;invariant(k,"Attempted to load page annotations, but no page was specified.");const[p,u]=useResolver(),{value:a,error:f}=p,y=reactExports.useRef(null);parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10);function v(){a&&q&&q(a)}function h(){f&&(f.toString(),L&&L(f))}function e(){u({type:"RESET"})}reactExports.useEffect(e,[u,k]);function n(){if(!k)return;const i=makeCancellablePromise(k.getAnnotations()),S=i;return i.promise.then(H=>{u({type:"RESOLVE",value:H})}).catch(H=>{u({type:"REJECT",error:H})}),()=>{cancelRunningTask(S)}}reactExports.useEffect(n,[u,k,M]),reactExports.useEffect(()=>{if(a!==void 0){if(a===!1){h();return}v()}},[a]);function r(){D&&D()}function t(i){J&&J(i)}const c=reactExports.useMemo(()=>k.getViewport({scale:_,rotation:P}),[k,P,_]);function C(){if(!A||!k||!a)return;const{current:i}=y;if(!i)return;const S=c.clone({dontFlip:!0}),H={annotations:a,annotationStorage:A.annotationStorage,div:i,downloadManager:null,imageResourcesPath:d,linkService:E,page:k,renderForms:M,viewport:S};i.innerHTML="";try{pdfjs$1.AnnotationLayer.render(H),r()}catch(X){t(X)}return()=>{}}return reactExports.useEffect(C,[a,d,E,k,M,c]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:y})}var __rest=globalThis&&globalThis.__rest||function(w,o){var O={};for(var d in w)Object.prototype.hasOwnProperty.call(w,d)&&o.indexOf(d)<0&&(O[d]=w[d]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,d=Object.getOwnPropertySymbols(w);E<d.length;E++)o.indexOf(d[E])<0&&Object.prototype.propertyIsEnumerable.call(w,d[E])&&(O[d[E]]=w[d[E]]);return O};const defaultScale=1,Page=function w(o){const O=useDocumentContext();invariant(O,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const d=Object.assign(Object.assign({},O),o),{_className:E="react-pdf__Page",_enableRegisterUnregisterPage:L=!0,canvasBackground:q,canvasRef:J,children:D,className:k,customRenderer:A,customTextRenderer:M,devicePixelRatio:P,error:_="Failed to load the page.",height:p,inputRef:u,loading:a="Loading page…",noData:f="No page specified.",onGetAnnotationsError:y,onGetAnnotationsSuccess:v,onGetStructTreeError:h,onGetStructTreeSuccess:e,onGetTextError:n,onGetTextSuccess:r,onLoadError:t,onLoadSuccess:c,onRenderAnnotationLayerError:C,onRenderAnnotationLayerSuccess:i,onRenderError:S,onRenderSuccess:H,onRenderTextLayerError:X,onRenderTextLayerSuccess:Q,pageIndex:ee,pageNumber:de,pdf:ie,registerPage:ue,renderAnnotationLayer:ge=!0,renderForms:Ee=!1,renderMode:_e="canvas",renderTextLayer:ye=!0,rotate:z,scale:m=defaultScale,unregisterPage:g,width:T}=d,W=__rest(d,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[G,$]=useResolver(),{value:I,error:N}=G,U=reactExports.useRef(null);invariant(ie,"Attempted to load a page, but no document was specified.");const s=isProvided(de)?de-1:ee??null,l=de??(isProvided(ee)?ee+1:null),x=z??(I?I.rotate:null),R=reactExports.useMemo(()=>{if(!I)return null;let be=1;const Ae=m??defaultScale;if(T||p){const we=I.getViewport({scale:1,rotation:x});T?be=T/we.width:p&&(be=p/we.height)}return Ae*be},[p,I,x,m,T]);function j(){return()=>{isProvided(s)&&L&&g&&g(s)}}reactExports.useEffect(j,[L,ie,s,g]);function V(){if(c){if(!I||!R)return;c(makePageCallback(I,R))}if(L&&ue){if(!isProvided(s)||!U.current)return;ue(s,U.current)}}function se(){N&&(N.toString(),t&&t(N))}function Y(){$({type:"RESET"})}reactExports.useEffect(Y,[$,ie,s]);function ae(){if(!ie||!l)return;const be=makeCancellablePromise(ie.getPage(l)),Ae=be;return be.promise.then(we=>{$({type:"RESOLVE",value:we})}).catch(we=>{$({type:"REJECT",error:we})}),()=>cancelRunningTask(Ae)}reactExports.useEffect(ae,[$,ie,s,l,ue]),reactExports.useEffect(()=>{if(I!==void 0){if(I===!1){se();return}V()}},[I,R]);const oe=reactExports.useMemo(()=>I&&isProvided(s)&&l&&isProvided(x)&&isProvided(R)?{_className:E,canvasBackground:q,customTextRenderer:M,devicePixelRatio:P,onGetAnnotationsError:y,onGetAnnotationsSuccess:v,onGetStructTreeError:h,onGetStructTreeSuccess:e,onGetTextError:n,onGetTextSuccess:r,onRenderAnnotationLayerError:C,onRenderAnnotationLayerSuccess:i,onRenderError:S,onRenderSuccess:H,onRenderTextLayerError:X,onRenderTextLayerSuccess:Q,page:I,pageIndex:s,pageNumber:l,renderForms:Ee,renderTextLayer:ye,rotate:x,scale:R}:null,[E,q,M,P,y,v,h,e,n,r,C,i,S,H,X,Q,I,s,l,Ee,ye,x,R]),te=reactExports.useMemo(()=>makeEventProps(W,()=>I&&(R?makePageCallback(I,R):void 0)),[W,I,R]),ne=`${s}@${R}/${x}`,pe=`${s}/${x}`;function fe(){switch(_e){case"custom":return invariant(A,'renderMode was set to "custom", but no customRenderer was passed.'),React.createElement(A,{key:`${ne}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${pe}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${ne}_canvas`,canvasRef:J})}}function Se(){return ye?React.createElement(TextLayer,{key:`${ne}_text`}):null}function ve(){return ge?React.createElement(AnnotationLayer,{key:`${ne}_annotations`}):null}function Re(){return React.createElement(PageContext.Provider,{value:oe},fe(),Se(),ve(),D)}function K(){return l?ie===null||I===void 0||I===null?React.createElement(Message,{type:"loading"},typeof a=="function"?a():a):ie===!1||I===!1?React.createElement(Message,{type:"error"},typeof _=="function"?_():_):Re():React.createElement(Message,{type:"no-data"},typeof f=="function"?f():f)}return React.createElement("div",Object.assign({className:clsx(E,k),"data-page-number":l,ref:mergeRefs(u,U),style:{"--scale-factor":`${R}`,backgroundColor:q||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},te),K())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});const Page$1=Page;displayWorkerWarning();pdfjs$1.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdfjs$1.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs$1.version}/pdf.worker.js`;const BookReaderComponent=w=>{const[o,O]=reactExports.useState(900),[d,E]=reactExports.useState(),[L,q]=reactExports.useState(1),[J,D]=reactExports.useState(!1),k=P=>{q(_=>_+P)},A=()=>{k(-1)},M=()=>{k(1)};return reactExports.useEffect(()=>{O(window.innerWidth)},[w.randKey]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{maxHeight:"85vh",minHeight:"85vh",overflowY:"auto",overflowX:"hidden"},onContextMenu:P=>{},children:jsxRuntimeExports.jsx(Document$1,{file:w.book.file,onLoadSuccess:({numPages:P})=>{E(P),D(!0)},children:jsxRuntimeExports.jsx(Page$1,{pageNumber:L,width:o/1.3})})}),J&&jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",paddingTop:"10px"},children:[jsxRuntimeExports.jsxs(Button,{disabled:L<=1,onClick:A,children:[jsxRuntimeExports.jsx(BackwardOutlined,{}),"Previous Page (",L," of ",d,")"]}),"  ",jsxRuntimeExports.jsxs(Button,{disabled:L===d,onClick:M,children:["Next Page (",L," of ",d,")",jsxRuntimeExports.jsx(ForwardOutlined,{})]})]})]})})},{Search:Search$4}=Input,OlibDashboard=w=>{const[o,O]=reactExports.useState(!1),[d,E]=reactExports.useState(!1),[L,q]=reactExports.useState(),[J,D]=reactExports.useState(0),[k,A]=reactExports.useState(0),[M,P]=reactExports.useState(1),[_,p]=reactExports.useState([]),[u,a]=reactExports.useState(),[f,y]=reactExports.useState(!1);Form.useForm();const{push:v}=ce(),h=c=>{a(c),y(!0)},e=async(c,C="")=>{O(!0);const{data:i}=await gqlDataProvider.custom({url:"",method:"get",meta:{operation:"userBooks",variables:{page:{value:c,type:"Int",required:!0},key:{value:C,type:"String",required:!1},pageSize:{value:20,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{book:["id","title","description","file","cover","price","created","updated","isActive","isPublic","averageRating","downloadable","canEdit","canDelete","canManage",{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]}]}]}}).catch(S=>(_t.error("Error getting Books"),{data:null})).then(S=>S);i&&(D(i.total),A(i.pages),P(i.page),p(i.results)),O(!1)},n=async()=>{E(!0);const{data:c}=await gqlDataProvider.custom({url:"",method:"get",meta:{operation:"olibDashboardAnalytics",fields:["analytics"]}}).catch(C=>(_t.error("Error fetching analytics"),{data:null})).then(C=>C);c&&q(c.analytics),E(!1)},r=async(c,C)=>{const{data:i}=await gqlDataProvider.custom({url:"",method:"post",meta:{operation:"createBookRating",variables:{bookId:{value:C,type:"Int",required:!0},rating:{value:c,type:"Int",required:!0}},fields:["success","message",{userBook:["id",{book:["id","title","description","file","cover","price","created","updated","isActive","isPublic","averageRating","downloadable","canEdit","canDelete","canManage",{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]}]}]}}).catch(S=>(console.log(S),{data:null})).then(S=>S);if(i){const S=_.map(H=>H.id===i.userBook.id?i.userBook:H);p(S)}},t=(c,C)=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"Rated: "}),jsxRuntimeExports.jsxs("span",{children:[[1,2,3,4,5].map(i=>jsxRuntimeExports.jsx("span",{style:{marginRight:5},children:i<=c?jsxRuntimeExports.jsx(Tooltip,{title:i,children:jsxRuntimeExports.jsx("a",{onClick:()=>{r(i,C)},style:{display:"inline"},children:jsxRuntimeExports.jsx(StarFilled,{style:{color:"orange"}})})}):jsxRuntimeExports.jsx(Tooltip,{title:i,children:jsxRuntimeExports.jsx("a",{onClick:()=>{r(i,C)},style:{display:"inline"},children:jsxRuntimeExports.jsx(StarOutlined,{})})})})),jsxRuntimeExports.jsx(Tag,{color:"green",children:c})]})]});return reactExports.useEffect(()=>{n(),e(M,"")},[w.randKey]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Box,{children:jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:0,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:6,sm:6,md:2,children:jsxRuntimeExports.jsx("a",{onClick:()=>v("/olib"),children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(Tag,{children:L==null?void 0:L.my_books})," Books To Read"]})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:6,sm:6,md:2,children:jsxRuntimeExports.jsx("a",{onClick:()=>v("/olib/books/public"),children:jsxRuntimeExports.jsxs(Card,{style:{cursor:"pointer"},children:[jsxRuntimeExports.jsx(Tag,{children:L==null?void 0:L.public_books})," Public Books"]})})})]})}),jsxRuntimeExports.jsx(Affix,{offsetTop:75,children:jsxRuntimeExports.jsx(Box,{sx:{display:"flex",justifyContent:"center",mt:1,mb:1},children:jsxRuntimeExports.jsx(Grid,{container:!0,spacing:0,sx:{display:"flex",justifyContent:"flex-start"},children:jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:4,md:6,children:jsxRuntimeExports.jsx(Search$4,{size:"large",placeholder:"Enter Book Title, Description to search ...",onSearch:c=>e(1,c),style:{width:"100%"}})})})})}),jsxRuntimeExports.jsx("div",{style:{maxHeight:"calc(100vh - 240px)",overflowY:"auto"},children:jsxRuntimeExports.jsxs(Spin,{spinning:o,children:[jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:0,children:[_.length===0&&!o&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:12,md:12,children:jsxRuntimeExports.jsx(Empty,{description:"No Book Published"})})}),_.map(c=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:12,md:6,children:jsxRuntimeExports.jsx(Card,{hoverable:!0,bordered:!0,style:{margin:"2px"},type:"inner",actions:[jsxRuntimeExports.jsx("span",{children:t(c.book.averageRating,c.book.id)}),jsxRuntimeExports.jsxs("span",{style:{float:"right",marginRight:"10px",display:"flex"},children:[c.book.downloadable&&jsxRuntimeExports.jsx(Button,{icon:jsxRuntimeExports.jsx(DownloadOutlined,{}),children:jsxRuntimeExports.jsx("a",{href:c.book.file,target:"_blank",download:!0,children:"Download"})}),jsxRuntimeExports.jsx(Button,{style:{marginRight:"10px"},icon:jsxRuntimeExports.jsx(ReadOutlined,{}),onClick:()=>h(c),children:"Read"}),jsxRuntimeExports.jsx(Dropdown,{trigger:["click"],overlay:jsxRuntimeExports.jsxs(Menu,{children:[jsxRuntimeExports.jsx(Menu.Item,{icon:jsxRuntimeExports.jsx(ReadOutlined,{}),onClick:()=>h(c),children:jsxRuntimeExports.jsx("a",{rel:"noopener noreferrer",children:"Read"})}),jsxRuntimeExports.jsx(Menu.Item,{icon:jsxRuntimeExports.jsx(InfoCircleOutlined,{}),onClick:()=>_t("Under construction"),children:jsxRuntimeExports.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:jsxRuntimeExports.jsx("a",{className:"ant-dropdown-link",onClick:C=>C.preventDefault(),children:jsxRuntimeExports.jsx(MoreOutlined,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})]})],children:jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:0,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:12,md:4,sx:{backgroundSize:"cover",backgroundPosition:"center",backgroundImage:"url("+c.book.cover+")"},children:jsxRuntimeExports.jsx(Box,{sx:{display:{xs:"block",md:"none"},height:100,width:"100%",backgroundSize:"cover",backgroundPosition:"center",backgroundImage:"url("+c.book.cover+")"}})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:12,md:8,children:jsxRuntimeExports.jsx(Box,{style:{padding:"10px"},children:jsxRuntimeExports.jsxs(Space,{direction:"vertical",children:[jsxRuntimeExports.jsx("a",{children:jsxRuntimeExports.jsx("h3",{children:c.book.title.length>50?c.book.title.substring(0,50)+"...":c.book.title})}),jsxRuntimeExports.jsx("p",{children:c.book.description.replace(/(<([^>]+)>)/gi,"").length>100?c.book.description.replace(/(<([^>]+)>)/gi,"").substring(0,100)+"...":c.book.description.replace(/(<([^>]+)>)/gi,"")}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Space,{children:jsxRuntimeExports.jsx(Tooltip,{title:"Click to View Author Profile",children:jsxRuntimeExports.jsxs("a",{children:[jsxRuntimeExports.jsx(Avatar,{size:"small",src:c.book.author.pic}),jsxRuntimeExports.jsx("span",{style:{marginLeft:"10px"},children:c.book.author.fullName})]})})})})]})})})]})})}))]}),jsxRuntimeExports.jsx(Row,{children:jsxRuntimeExports.jsx(Col,{span:24,style:{display:"flex",justifyContent:"center",marginTop:"10px",marginBottom:"20px"},children:jsxRuntimeExports.jsx(Pagination,{defaultCurrent:M,total:J,defaultPageSize:20,onChange:c=>{P(c),e(c,"")}})})})]})}),jsxRuntimeExports.jsx(DrawerComponent,{title:u==null?void 0:u.book.title,anchor:"right",width:"80vw",onClose:c=>y(c),open:f,children:jsxRuntimeExports.jsx(BookReaderComponent,{book:u==null?void 0:u.book,randKey:Math.random()})})]})},OlibDashboardPage=()=>{const{push:w}=ce();return reactExports.useEffect(()=>(document.title=configs.system_name+": Dashboard",document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{marginTop:10},children:jsxRuntimeExports.jsxs(Breadcrumb,{children:[jsxRuntimeExports.jsx(Breadcrumb.Item,{children:jsxRuntimeExports.jsx("a",{onClick:()=>w("/olib"),children:"Home"})}),jsxRuntimeExports.jsx(Breadcrumb.Item,{children:"Dashboard"})]})}),jsxRuntimeExports.jsx(OlibDashboard,{})]})},{Search:Search$3}=Input,AuthorsToAddComponent=w=>{const[o,O]=reactExports.useState(!0),[d,E]=reactExports.useState(!1),[L,q]=reactExports.useState(0),[J,D]=reactExports.useState(0),[k,A]=reactExports.useState(1),[M,P]=reactExports.useState(25),[_,p]=reactExports.useState(""),[u,a]=reactExports.useState(!1),[f,y]=reactExports.useState([]);ce();const v=async(e,n="",r=25)=>{E(!0);const{data:t}=await gqlDataProvider.custom({url:"",method:"get",meta:{operation:"booksAuthorsToAdd",variables:{page:{value:e,type:"Int",required:!0},key:{value:n,type:"String",required:!1},pageSize:{value:r,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","firstName","middleName","lastName","fullName","email","pic","isActive","created","updated","canDelete","canManage"]}]}}).catch(()=>(_t.error("Error getting authors"),{data:null})).then(c=>c);t&&(q(t.total),D(t.pages),A(t.page),a(t.hasNext),y([...t.results])),E(!1)},h=async e=>{const{data:n}=await gqlDataProvider.custom({url:"",method:"post",meta:{operation:"addBooksAuthor",variables:{authorId:{value:e,type:"Int",required:!0}},fields:["success","message",{bookAuthor:["id",{user:["id","firstName","middleName","lastName","fullName","email","pic","isActive","created","updated","canDelete","canManage"]},"isActive","created","updated","canDelete","canManage"]}]}}).catch(()=>(_t.error("Error Adding Author"),{data:null})).then(r=>r);n&&(n.success?(_t.success(n.message),y(f.filter(r=>parseInt(r.id.toString())!==e)),w.onAdd(n.bookAuthor)):_t.error(n.message)),E(!1)};return reactExports.useEffect(()=>{v(k,_,M),O(!1)},[w.randKey]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Affix,{offsetTop:90,children:jsxRuntimeExports.jsx(Row,{style:{display:"flex",justifyContent:"flex-start"},children:jsxRuntimeExports.jsx(Col,{span:10,children:jsxRuntimeExports.jsx(Search$3,{size:"large",placeholder:"Search Purchase(s) ...",onSearch:e=>{p(e),v(1,e,M)},style:{width:"100%"}})})})}),jsxRuntimeExports.jsx("div",{style:{maxHeight:"80vh",minHeight:"80vh",overflowY:"auto",overflowX:"hidden",marginTop:"10px"},children:jsxRuntimeExports.jsx(List,{itemLayout:"horizontal",dataSource:f,renderItem:e=>jsxRuntimeExports.jsx(List.Item,{actions:[jsxRuntimeExports.jsx(Popconfirm,{title:"Adding Books Author??",onConfirm:()=>h(parseInt(e.id.toString())),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:jsxRuntimeExports.jsx(Button,{icon:jsxRuntimeExports.jsx(PlusOutlined,{}),size:"large"})})],children:jsxRuntimeExports.jsx(Skeleton,{avatar:!0,title:!1,loading:d,active:!0,children:jsxRuntimeExports.jsx(List.Item.Meta,{avatar:jsxRuntimeExports.jsx(Avatar,{src:e.pic}),title:jsxRuntimeExports.jsx("a",{children:e.fullName}),description:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Tag,{color:"green",children:e.email})})})})})})}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsx(Pagination,{defaultCurrent:k,total:L,pageSize:25,onChange:(e,n)=>{P(n),A(e),v(e,_,n)}})})]})},{Search:Search$2}=Input,BooksAuthorsComponent=w=>{const[o,O]=reactExports.useState(!1),[d,E]=reactExports.useState(0),[L,q]=reactExports.useState(0),[J,D]=reactExports.useState(1),[k,A]=reactExports.useState([]);reactExports.useState(),reactExports.useState(!1);const[M,P]=reactExports.useState(!1),[_,p]=reactExports.useState(!1);Form.useForm(),ce();const u=async(f,y="")=>{O(!0);const{data:v}=await gqlDataProvider.custom({url:"",method:"get",meta:{operation:"vertedBooksPublishers",variables:{page:{value:f,type:"Int",required:!0},key:{value:y,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{user:["id","firstName","lastName","middleName","fullName","email","pic"]},"canEdit","canDelete","canManage"]}]}}).catch(h=>(_t.error("Error getting Books"),{data:null})).then(h=>h);v&&(E(v.total),q(v.pages),D(v.page),A(v.results)),O(!1)},a=async f=>{A([f,...k])};return reactExports.useEffect(()=>{u(J,"")},[w.randKey]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Row,{style:{display:"flex",justifyContent:"flex-start",marginTop:20},children:[jsxRuntimeExports.jsx(Col,{span:10,children:jsxRuntimeExports.jsx(Search$2,{size:"large",placeholder:"Search Purchase(s) ...",onSearch:f=>u(1,f),style:{width:"100%"}})}),jsxRuntimeExports.jsx(Col,{span:14,style:{display:"flex",justifyContent:"flex-end"},children:jsxRuntimeExports.jsx(Button,{icon:jsxRuntimeExports.jsx(PlusOutlined,{}),size:"large",onClick:()=>P(!0),children:"Add Authors"})})]}),jsxRuntimeExports.jsx(Spin,{spinning:o,children:jsxRuntimeExports.jsxs(Row,{children:[k.length===0&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Col,{span:24,children:jsxRuntimeExports.jsx(Empty,{description:"No Book Published"})})}),k.map(f=>jsxRuntimeExports.jsx(Col,{span:6,children:jsxRuntimeExports.jsx(Card,{hoverable:!0,bordered:!0,style:{margin:"2px"},bodyStyle:{minHeight:100,maxHeight:100},actions:[jsxRuntimeExports.jsx(Button,{disabled:!0,size:"large",children:"100 Books"}),jsxRuntimeExports.jsx(Tooltip,{title:"View Authors Details",color:"green",children:jsxRuntimeExports.jsx(Button,{icon:jsxRuntimeExports.jsx(InfoOutlined,{}),size:"large",onClick:()=>p(!0)})}),jsxRuntimeExports.jsx("span",{style:{background:"red"},children:f.canDelete&&jsxRuntimeExports.jsx(Popconfirm,{title:"Delete the Author",okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:jsxRuntimeExports.jsx(Button,{size:"large",icon:jsxRuntimeExports.jsx(DeleteOutlined,{})})})})],children:jsxRuntimeExports.jsx(Row,{children:jsxRuntimeExports.jsx(Col,{span:24,style:{padding:"10px"},children:jsxRuntimeExports.jsx(Space,{direction:"horizontal",children:jsxRuntimeExports.jsxs("a",{children:[jsxRuntimeExports.jsx(Avatar,{src:f.user.pic,size:"large"}),jsxRuntimeExports.jsx("span",{style:{marginLeft:10},children:f.user.fullName})]})})})})})},f.id))]})}),jsxRuntimeExports.jsx(Row,{children:jsxRuntimeExports.jsx(Col,{span:24,style:{display:"flex",justifyContent:"center",marginTop:"10px",marginBottom:"20px"},children:jsxRuntimeExports.jsx(Pagination,{defaultCurrent:J,total:d})})}),jsxRuntimeExports.jsx(DrawerComponent,{title:"Adding Authors",anchor:"right",width:"50vw",onClose:f=>P(f),open:M,children:jsxRuntimeExports.jsx(AuthorsToAddComponent,{randKey:Math.random(),onAdd:a})}),jsxRuntimeExports.jsx(DrawerComponent,{title:"Author Details",width:"50vw",anchor:"right",onClose:f=>p(f),open:_,children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Descriptions,{title:"Author Info",children:[jsxRuntimeExports.jsx(Descriptions.Item,{label:"UserName",children:"Zhou Maomao"}),jsxRuntimeExports.jsx(Descriptions.Item,{label:"Telephone",children:"1810000000"}),jsxRuntimeExports.jsx(Descriptions.Item,{label:"Live",children:"Hangzhou, Zhejiang"}),jsxRuntimeExports.jsx(Descriptions.Item,{label:"Remark",children:"empty"}),jsxRuntimeExports.jsx(Descriptions.Item,{label:"Address",children:"No. 18, Wantang Road, Xihu District, Hangzhou, Zhejiang, China"})]}),jsxRuntimeExports.jsxs(Descriptions,{title:"Author Company Info",children:[jsxRuntimeExports.jsx(Descriptions.Item,{label:"UserName",children:"Zhou Maomao"}),jsxRuntimeExports.jsx(Descriptions.Item,{label:"Telephone",children:"1810000000"}),jsxRuntimeExports.jsx(Descriptions.Item,{label:"Live",children:"Hangzhou, Zhejiang"}),jsxRuntimeExports.jsx(Descriptions.Item,{label:"Remark",children:"empty"}),jsxRuntimeExports.jsx(Descriptions.Item,{label:"Address",children:"No. 18, Wantang Road, Xihu District, Hangzhou, Zhejiang, China"})]})]})})]})},OlibBooksAuthorsPage=()=>{const{push:w}=ce();return reactExports.useEffect(()=>{document.title=configs.system_name+": Books Authors"},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{marginTop:10},children:jsxRuntimeExports.jsxs(Breadcrumb,{children:[jsxRuntimeExports.jsx(Breadcrumb.Item,{children:jsxRuntimeExports.jsx("a",{onClick:()=>w("/olib"),children:"Home"})}),jsxRuntimeExports.jsx(Breadcrumb.Item,{children:"Books Authors"})]})}),jsxRuntimeExports.jsx(BooksAuthorsComponent,{randKey:Math.random()})]})},{Search:Search$1}=Input,OlibOrdersComponent=w=>{const[o,O]=reactExports.useState(!1),[d,E]=reactExports.useState(0),[L,q]=reactExports.useState(0),[J,D]=reactExports.useState(1),[k,A]=reactExports.useState(25),[M,P]=reactExports.useState(""),[_,p]=reactExports.useState([]),[u,a]=reactExports.useState();Form.useForm();const[f,y]=reactExports.useState(!1);ce();const v=async r=>{a(r),y(!0)},h=async(r,t="",c=25)=>{O(!0);const{data:C}=await gqlDataProvider.custom({url:"",method:"get",meta:{operation:"myBooksOrders",variables:{page:{value:r,type:"Int",required:!0},key:{value:t,type:"String",required:!1},pageSize:{value:c,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","price","paymentDate","receiptNumber","isPaid",{book:["id","title","description","file","cover","price","created","updated","isActive","isPublic","hasPurchaseOrder","canEdit","canDelete","canManage",{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]},{user:["id","firstName","middleName","lastName"]},{bill:["id","billNumber"]},"isActive","created","updated","canDelete","canManage"]}]}}).catch(i=>(_t.error("Error getting Bills"),{data:null})).then(i=>i);C&&(E(C.total),q(C.pages),D(C.page),p(C.results)),O(!1)},e=async r=>{const{data:t}=await gqlDataProvider.custom({url:"",method:"post",meta:{operation:"deleteBookOrder",variables:{id:{value:r,type:"Int",required:!0}},fields:["success","message"]}}).catch(c=>(_t.error("Error deleting Order"),{data:null})).then(c=>c);t&&p(_.filter(c=>c.id!==r))},n=[{title:"Bill#",dataIndex:"billNumber",fixed:!0,render:(r,t,c)=>{var C;return jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx("a",{children:(C=t==null?void 0:t.bill)==null?void 0:C.billNumber})})}},{title:"Book Title",dataIndex:"bookTitle",fixed:!0,render:(r,t,c)=>{var C;return jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx("a",{children:(C=t==null?void 0:t.book)==null?void 0:C.title})})}},{title:"Bill Amount",dataIndex:"billAmount",fixed:!0,render:(r,t,c)=>jsxRuntimeExports.jsxs("span",{children:[t.price," Tsh"]})},{title:"Paid",dataIndex:"isPaid",fixed:!0,render:(r,t,c)=>jsxRuntimeExports.jsx("span",{children:t.isPaid?jsxRuntimeExports.jsx(Tag,{color:"green",children:"Yes"}):jsxRuntimeExports.jsx(Tag,{color:"red",children:"No"})})},{title:"Created",dataIndex:"created",render:(r,t,c)=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("span",{children:new Date(t.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(r,t,c)=>jsxRuntimeExports.jsx("a",{children:t!=null&&t.isActive?jsxRuntimeExports.jsx("span",{style:{color:"green"},children:"Active"}):jsxRuntimeExports.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(r,t,c)=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[!t.isPaid&&jsxRuntimeExports.jsx(Popconfirm,{title:"Are you sure to delete this Order?",onConfirm:()=>e(t.id),okText:"Yes",cancelText:"No",disabled:!(t!=null&&t.canDelete),overlayStyle:{zIndex:9999},children:jsxRuntimeExports.jsx(Button,{icon:jsxRuntimeExports.jsx(DeleteOutlined,{}),disabled:!(t!=null&&t.canDelete),size:"large"})}),t.isPaid&&jsxRuntimeExports.jsx(Tooltip,{title:"Print Receipt",children:jsxRuntimeExports.jsx(Button,{icon:jsxRuntimeExports.jsx(PrinterOutlined,{}),size:"large"})}),!t.isPaid&&jsxRuntimeExports.jsx(Tooltip,{title:"View Order Details",placement:"topLeft",children:jsxRuntimeExports.jsx(Button,{icon:jsxRuntimeExports.jsx(OrderedListOutlined,{}),size:"large",onClick:()=>v(t)})})]})}];return reactExports.useEffect(()=>{h(J,"",25)},[w.randKey]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Affix,{offsetTop:75,children:jsxRuntimeExports.jsx(Row,{style:{display:"flex",justifyContent:"flex-start",marginTop:20},children:jsxRuntimeExports.jsx(Col,{span:10,children:jsxRuntimeExports.jsx(Search$1,{size:"large",placeholder:"Search Bill(s) ...",onSearch:r=>h(1,r,25),style:{width:"100%"}})})})}),jsxRuntimeExports.jsx(Row,{children:jsxRuntimeExports.jsx(Col,{span:24,children:jsxRuntimeExports.jsx(Table,{loading:o,columns:n,dataSource:_,pagination:{onChange:(r,t)=>{A(t),h(r,M,t)},total:d,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})})}),jsxRuntimeExports.jsx(ModalComponent,{title:"Order Details & Payment",open:f,width:"50vw",onClose:r=>y(r),children:jsxRuntimeExports.jsx(BookPaymentFormComponent,{book:u==null?void 0:u.book})})]})},OlibOrdersPage=()=>{const{push:w}=ce();return reactExports.useEffect(()=>{document.title=configs.system_name+": Books Orders"},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{marginTop:10},children:jsxRuntimeExports.jsxs(Breadcrumb,{children:[jsxRuntimeExports.jsx(Breadcrumb.Item,{children:jsxRuntimeExports.jsx("a",{onClick:()=>w("/olib"),children:"Home"})}),jsxRuntimeExports.jsx(Breadcrumb.Item,{children:"Books Orders"})]})}),jsxRuntimeExports.jsx(OlibOrdersComponent,{})]})},supportedFileExtensions$1=[".pdf"],normFile$1=w=>Array.isArray(w)?w:w==null?void 0:w.fileList,PublishBookFormComponent=w=>{const[o,O]=reactExports.useState(""),[d,E]=reactExports.useState(!1),[L,q]=reactExports.useState(!1),[J,D]=reactExports.useState(!1),[k,A]=reactExports.useState(""),[M]=Form.useForm(),P=[{label:"Public (Free)",value:!0},{label:"Private (Payable or Rentable)",value:!1}],_=async u=>{E(!0);const{data:a}=await gqlDataProvider.custom({url:"",method:"post",meta:{operation:"publishBook",variables:{file:{value:u.file,type:"Upload",required:!0},title:{value:u.title,type:"String",required:!0},description:{value:u.description,type:"String",required:!0},price:{value:u.price,type:"Float",required:!1},isPublic:{value:u.is_public,type:"Boolean",required:!0},downloadable:{value:u.downloadable,type:"Boolean",required:!1}},fields:["success","message"]}}).catch(f=>(_t.error("Error creating publishing book"),{data:null})).then(f=>f);a&&(a.success?(_t.success(a.message),w.onFinish()):_t.error(a.message)),E(!1)},p=u=>(u=u.replace(/[-_]/g," "),u=u.replace(/.pdf/g,""),u=u.replace(/[.]/g," "),u=u.replace(/\s+/g," "),u=u.trim(),u);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Spin,{spinning:d,children:jsxRuntimeExports.jsxs(Form,{layout:"vertical",form:M,onFinish:u=>{u.price=u.price??0,u.downloadable=J,u.description=k,_(u)},requiredMark:!0,children:[jsxRuntimeExports.jsx(Form.Item,{label:"Pick a Book ("+supportedFileExtensions$1.join()+")",children:jsxRuntimeExports.jsx(Form.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:u=>{var f,y;O((f=u==null?void 0:u.file)==null?void 0:f.name);const a=(y=u==null?void 0:u.file)==null?void 0:y.name.split(".");return a.pop(),M.setFieldsValue({title:p(a.join("."))}),normFile$1(u)},noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload Book file"}],children:jsxRuntimeExports.jsxs(Upload.Dragger,{name:"file",accept:supportedFileExtensions$1.join(),multiple:!1,maxCount:1,beforeUpload:()=>!1,onRemove:()=>{O(""),M.setFieldsValue({title:""})},children:[jsxRuntimeExports.jsx("p",{className:"ant-upload-drag-icon",children:jsxRuntimeExports.jsx(InboxOutlined,{})}),jsxRuntimeExports.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})})}),jsxRuntimeExports.jsx(Form.Item,{name:"title",label:"Book Title",initialValue:o,rules:[{required:!0,type:"string"}],children:jsxRuntimeExports.jsx(Input,{size:"large",placeholder:"Enter Book Title ..."})}),jsxRuntimeExports.jsx(Form.Item,{name:"is_public",label:"Availability",initialValue:!0,children:jsxRuntimeExports.jsx(Radio.Group,{options:P,onChange:u=>{q(!u.target.value)},value:!0})}),L&&jsxRuntimeExports.jsx(Form.Item,{label:"Book Cost (Tsh)",name:"price",rules:[{required:L,type:"number",min:1e3,message:"Price must be greater than 1000"}],children:jsxRuntimeExports.jsx(InputNumber,{style:{width:"50%"},size:"large"})}),jsxRuntimeExports.jsx(Form.Item,{name:"downloadable",valuePropName:"checked",children:jsxRuntimeExports.jsx(Checkbox,{onChange:u=>{D(u.target.checked)},children:"Downloadable"})}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:20},children:[jsxRuntimeExports.jsx("h3",{children:"Description"}),jsxRuntimeExports.jsx(distExports.CKEditor,{disabled:d,editor:ClassicEditor,data:k,onReady:u=>{u.editing.view.change(a=>{a.setStyle("min-height","100px",u.editing.view.document.getRoot())})},onChange:(u,a)=>{const f=a.getData();A(f)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:jsxRuntimeExports.jsx(Button,{type:"primary",size:"large",htmlType:"submit",loading:d,children:"Publish"})})]})})})},supportedFileExtensions=[".pdf"],normFile=w=>Array.isArray(w)?w:w==null?void 0:w.fileList,BookPublishingManagerComponent=w=>{var y,v,h,e,n,r,t,c,C,i;const[o,O]=reactExports.useState(0),[d,E]=reactExports.useState(""),[L,q]=reactExports.useState(!1),[J,D]=reactExports.useState(!1),[k,A]=reactExports.useState(!1),[M,P]=reactExports.useState(""),[_]=Form.useForm(),[p]=Form.useForm(),u=[{label:"Public (Free)",value:!0},{label:"Private (Payable or Rentable)",value:!1}],a=async S=>{q(!0);const{data:H}=await gqlDataProvider.custom({url:"",method:"post",meta:{operation:"publishBook",variables:{file:{value:S.file,type:"Upload",required:!0},title:{value:S.title,type:"String",required:!0},description:{value:S.description,type:"String",required:!0},price:{value:S.price,type:"Float",required:!1},isPublic:{value:S.is_public,type:"Boolean",required:!0},downloadable:{value:S.downloadable,type:"Boolean",required:!1}},fields:["success","message"]}}).catch(X=>(_t.error("Error creating publishing book"),{data:null})).then(X=>X);H&&(H.success?(_t.success(H.message),w.onFinish()):_t.error(H.message)),q(!1)},f=S=>(S=S.replace(/[-_]/g," "),S=S.replace(/.pdf/g,""),S=S.replace(/[.]/g," "),S=S.replace(/\s+/g," "),S=S.trim(),S);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"flex-end"},children:[jsxRuntimeExports.jsx(Button,{onClick:()=>O(0),children:"Book Info"}),jsxRuntimeExports.jsx(Button,{onClick:()=>O(1),children:"Edit Book Basic Info"}),jsxRuntimeExports.jsx(Button,{onClick:()=>O(2),children:"Edit Book Cover Image"}),jsxRuntimeExports.jsx(Button,{onClick:()=>O(3),children:"Edit Book Descriptions"})]}),o===0&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(Box,{sx:{width:"100%"},children:[jsxRuntimeExports.jsxs(Typography,{variant:"h4",gutterBottom:!0,children:[jsxRuntimeExports.jsx("b",{children:"Title"}),": ",(y=w.book)==null?void 0:y.title,jsxRuntimeExports.jsx(Divider,{})]}),jsxRuntimeExports.jsxs(Typography,{variant:"h5",gutterBottom:!0,children:[jsxRuntimeExports.jsx("b",{children:"Availability"}),": ",(v=w.book)!=null&&v.isPublic?"Public":"Private",jsxRuntimeExports.jsx(Divider,{})]}),jsxRuntimeExports.jsxs(Typography,{variant:"h5",gutterBottom:!0,children:[jsxRuntimeExports.jsx("b",{children:"Downloadable"}),": ",(h=w.book)!=null&&h.downloadable?"Yes":"No",jsxRuntimeExports.jsx(Divider,{})]}),jsxRuntimeExports.jsxs(Typography,{variant:"h5",gutterBottom:!0,children:[jsxRuntimeExports.jsx("b",{children:"Price"}),": ",(e=w.book)==null?void 0:e.price," Tsh",jsxRuntimeExports.jsx(Divider,{})]}),jsxRuntimeExports.jsxs(Typography,{variant:"subtitle1",gutterBottom:!0,children:[jsxRuntimeExports.jsx("b",{children:"Description"}),": ",(n=w.book)==null?void 0:n.description]})]})}),o===1&&jsxRuntimeExports.jsxs(Form,{layout:"vertical",form:p,onFinish:S=>{S.price=S.price??0,S.downloadable=k,S.description=M,a(S)},requiredMark:!0,initialValues:{title:(r=w.book)==null?void 0:r.title,is_public:(t=w.book)==null?void 0:t.isPublic,price:(c=w.book)==null?void 0:c.price,downloadable:(C=w.book)==null?void 0:C.downloadable},children:[jsxRuntimeExports.jsx(Form.Item,{name:"title",label:"Book Title",initialValue:d,rules:[{required:!0,type:"string"}],children:jsxRuntimeExports.jsx(Input,{size:"large",placeholder:"Enter Book Title ..."})}),jsxRuntimeExports.jsx(Form.Item,{name:"is_public",label:"Availability",initialValue:!0,children:jsxRuntimeExports.jsx(Radio.Group,{options:u,onChange:S=>{D(!S.target.value)},value:!0})}),!((i=w.book)!=null&&i.isPublic)&&jsxRuntimeExports.jsx(Form.Item,{label:"Book Cost (Tsh)",name:"price",rules:[{required:J,type:"number",min:0}],children:jsxRuntimeExports.jsx(InputNumber,{style:{width:"50%"},size:"large"})}),jsxRuntimeExports.jsx(Form.Item,{name:"downloadable",valuePropName:"checked",children:jsxRuntimeExports.jsx(Checkbox,{onChange:S=>{A(S.target.checked)},children:"Downloadable"})}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:20},children:[jsxRuntimeExports.jsx("h3",{children:"Description"}),jsxRuntimeExports.jsx(distExports.CKEditor,{disabled:L,editor:ClassicEditor,data:M,onReady:S=>{S.editing.view.change(H=>{H.setStyle("min-height","100px",S.editing.view.document.getRoot())})},onChange:(S,H)=>{const X=H.getData();P(X)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:jsxRuntimeExports.jsx(Button,{type:"primary",size:"large",htmlType:"submit",loading:L,children:"Publish"})})]}),o===2&&jsxRuntimeExports.jsx(Form,{layout:"vertical",form:_,onFinish:S=>{S.price=S.price??0,S.downloadable=k,S.description=M,a(S)},requiredMark:!0,children:jsxRuntimeExports.jsx(Form.Item,{label:"Pick a Book ("+supportedFileExtensions.join()+")",children:jsxRuntimeExports.jsx(Form.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:S=>{var X,Q;E((X=S==null?void 0:S.file)==null?void 0:X.name);const H=(Q=S==null?void 0:S.file)==null?void 0:Q.name.split(".");return H.pop(),_.setFieldsValue({title:f(H.join("."))}),normFile(S)},noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload Book file"}],children:jsxRuntimeExports.jsxs(Upload.Dragger,{name:"file",accept:supportedFileExtensions.join(),multiple:!1,maxCount:1,beforeUpload:()=>!1,onRemove:()=>{E(""),_.setFieldsValue({title:""})},children:[jsxRuntimeExports.jsx("p",{className:"ant-upload-drag-icon",children:jsxRuntimeExports.jsx(InboxOutlined,{})}),jsxRuntimeExports.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})})})}),o===3&&jsxRuntimeExports.jsxs(Form,{layout:"vertical",form:_,onFinish:S=>{S.price=S.price??0,S.downloadable=k,S.description=M,a(S)},requiredMark:!0,children:[jsxRuntimeExports.jsx(Form.Item,{label:"Pick a Book ("+supportedFileExtensions.join()+")",children:jsxRuntimeExports.jsx(Form.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:S=>{var X,Q;E((X=S==null?void 0:S.file)==null?void 0:X.name);const H=(Q=S==null?void 0:S.file)==null?void 0:Q.name.split(".");return H.pop(),_.setFieldsValue({title:f(H.join("."))}),normFile(S)},noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload Book file"}],children:jsxRuntimeExports.jsxs(Upload.Dragger,{name:"file",accept:supportedFileExtensions.join(),multiple:!1,maxCount:1,beforeUpload:()=>!1,onRemove:()=>{E(""),_.setFieldsValue({title:""})},children:[jsxRuntimeExports.jsx("p",{className:"ant-upload-drag-icon",children:jsxRuntimeExports.jsx(InboxOutlined,{})}),jsxRuntimeExports.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})})}),jsxRuntimeExports.jsx(Form.Item,{name:"title",label:"Book Title",initialValue:d,rules:[{required:!0,type:"string"}],children:jsxRuntimeExports.jsx(Input,{size:"large",placeholder:"Enter Book Title ..."})}),jsxRuntimeExports.jsx(Form.Item,{name:"is_public",label:"Availability",initialValue:!0,children:jsxRuntimeExports.jsx(Radio.Group,{options:u,onChange:S=>{D(!S.target.value)},value:!0})}),J&&jsxRuntimeExports.jsx(Form.Item,{label:"Book Cost (Tsh)",name:"price",rules:[{required:J,type:"number",min:0}],children:jsxRuntimeExports.jsx(InputNumber,{style:{width:"50%"},size:"large"})}),jsxRuntimeExports.jsx(Form.Item,{name:"downloadable",valuePropName:"checked",children:jsxRuntimeExports.jsx(Checkbox,{onChange:S=>{A(S.target.checked)},children:"Downloadable"})}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:20},children:[jsxRuntimeExports.jsx("h3",{children:"Description"}),jsxRuntimeExports.jsx(distExports.CKEditor,{disabled:L,editor:ClassicEditor,data:M,onReady:S=>{S.editing.view.change(H=>{H.setStyle("min-height","100px",S.editing.view.document.getRoot())})},onChange:(S,H)=>{const X=H.getData();P(X)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:jsxRuntimeExports.jsx(Button,{type:"primary",size:"large",htmlType:"submit",loading:L,children:"Publish"})})]})]})},{Search}=Input,PublishBooksComponent=w=>{const[o,O]=reactExports.useState(!1),[d,E]=reactExports.useState(0),[L,q]=reactExports.useState(0),[J,D]=reactExports.useState(1),[k,A]=reactExports.useState([]),[M,P]=reactExports.useState();Form.useForm();const[_,p]=reactExports.useState(!1),[u,a]=reactExports.useState(!1),{push:f}=ce(),y=async n=>{P(n),a(!0)},v=async()=>{e(1,""),p(!1)},h=async n=>{const{data:r}=await gqlDataProvider.custom({url:"",method:"post",meta:{operation:"deleteBook",variables:{bookId:{value:n,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(_t.error("Error deleting book"),{data:null})).then(t=>t);r&&(r.success?(_t.success(r.message),A(k.filter(t=>t.id!==n))):_t.error(r.message))},e=async(n,r="")=>{O(!0);const{data:t}=await gqlDataProvider.custom({url:"",method:"get",meta:{operation:"publisherBooks",variables:{page:{value:n,type:"Int",required:!0},key:{value:r,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","description","file","cover","price","downloadable","publisherCanAddToReadings","created","updated","isActive","isPublic","canEdit","canDelete","canManage",{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]}]}}).catch(()=>(_t.error("Error getting Books"),{data:null})).then(c=>c);t&&(E(t.total),q(t.pages),D(t.page),A(t.results)),O(!1)};return reactExports.useEffect(()=>{e(J,"")},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Button,{size:"large",style:{float:"right"},icon:jsxRuntimeExports.jsx(MoneyCollectFilled,{}),onClick:()=>f("/olib/books/purchases"),children:"Purchases"}),jsxRuntimeExports.jsx(Button,{size:"large",style:{float:"right"},icon:jsxRuntimeExports.jsx(PlusOutlined,{}),onClick:()=>p(!0),children:"Publish"})]}),jsxRuntimeExports.jsx(Grid,{container:!0,spacing:0,sx:{display:"flex",justifyContent:"flex-start"},children:jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:12,md:4,lg:4,xl:4,children:jsxRuntimeExports.jsx(Search,{size:"large",placeholder:"Enter Book Title, Description to search ...",onSearch:n=>e(1,n),style:{width:"100%"}})})}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:0,children:[k.length===0&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:jsxRuntimeExports.jsx(Empty,{description:"No Book Published"})})}),k.map(n=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6,children:jsxRuntimeExports.jsx(Card,{hoverable:!0,bordered:!0,style:{margin:"2px"},bodyStyle:{minHeight:190,maxHeight:190},type:"inner",actions:[jsxRuntimeExports.jsxs("span",{style:{fontSize:"18px"},children:[n.price," Tsh"]}),jsxRuntimeExports.jsxs("span",{style:{float:"right",marginRight:"10px",display:"flex"},children:[jsxRuntimeExports.jsx(Button,{style:{marginRight:"10px"},icon:jsxRuntimeExports.jsx(FolderOpenFilled,{}),onClick:()=>y(n),children:"View"}),jsxRuntimeExports.jsx(Dropdown,{trigger:["click"],overlay:jsxRuntimeExports.jsxs(Menu,{children:[jsxRuntimeExports.jsx(Menu.Item,{icon:jsxRuntimeExports.jsx(FolderOpenFilled,{}),onClick:()=>y(n),children:jsxRuntimeExports.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"View"})}),jsxRuntimeExports.jsx(Menu.Item,{icon:jsxRuntimeExports.jsx(DeleteOutlined,{}),children:jsxRuntimeExports.jsx(Popconfirm,{title:"Are you sure to delete this Book?",onConfirm:()=>h(n.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:jsxRuntimeExports.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})})]}),overlayStyle:{zIndex:9999},children:jsxRuntimeExports.jsx("a",{className:"ant-dropdown-link",onClick:r=>r.preventDefault(),children:jsxRuntimeExports.jsx(MoreOutlined,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})]})],children:jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:0,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:12,md:4,sx:{backgroundSize:"cover",backgroundPosition:"center",backgroundImage:"url("+n.cover+")"},children:jsxRuntimeExports.jsx(Box,{sx:{display:{xs:"block",md:"none"},height:100,width:"100%",backgroundSize:"cover",backgroundPosition:"center",backgroundImage:"url("+n.cover+")"}})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:12,md:8,children:jsxRuntimeExports.jsx(Box,{style:{padding:"10px"},children:jsxRuntimeExports.jsxs(Space,{direction:"vertical",children:[jsxRuntimeExports.jsx("a",{children:jsxRuntimeExports.jsx("h3",{children:n.title.length>50?n.title.substring(0,50)+"...":n.title})}),jsxRuntimeExports.jsx("p",{children:n.description.replace(/(<([^>]+)>)/gi,"").length>100?n.description.replace(/(<([^>]+)>)/gi,"").substring(0,100)+"...":n.description.replace(/(<([^>]+)>)/gi,"")}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Space,{children:jsxRuntimeExports.jsx(Tooltip,{title:"Click to View Author Profile",children:jsxRuntimeExports.jsxs("a",{children:[jsxRuntimeExports.jsx(Avatar,{size:"small",src:n.author.pic}),jsxRuntimeExports.jsx("span",{style:{marginLeft:"10px"},children:n.author.fullName})]})})})})]})})})]})})}))]}),jsxRuntimeExports.jsx(Row,{children:jsxRuntimeExports.jsx(Col,{span:24,style:{display:"flex",justifyContent:"center",marginTop:"10px",marginBottom:"20px"},children:jsxRuntimeExports.jsx(Pagination,{defaultCurrent:J,total:L})})}),jsxRuntimeExports.jsx(ModalComponent,{title:"Publishing Book",open:_,width:"60vw",onClose:n=>p(n),children:jsxRuntimeExports.jsx(PublishBookFormComponent,{randKey:Math.random(),onFinish:v})}),jsxRuntimeExports.jsx(DrawerComponent,{title:M==null?void 0:M.title,width:"80vw",anchor:"right",onClose:n=>a(n),open:u,children:jsxRuntimeExports.jsx(BookPublishingManagerComponent,{book:M})})]})},PublishBooksPage=()=>{const{push:w}=ce();return reactExports.useEffect(()=>{document.title=configs.system_name+": Publish Books"},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{marginTop:10},children:jsxRuntimeExports.jsxs(Breadcrumb,{children:[jsxRuntimeExports.jsx(Breadcrumb.Item,{children:jsxRuntimeExports.jsx("a",{onClick:()=>w("/olib"),children:"Home"})}),jsxRuntimeExports.jsx(Breadcrumb.Item,{children:"Publish Books"})]})}),jsxRuntimeExports.jsx(PublishBooksComponent,{})]})},OlibPages=w=>{const{page:o}=w;return o==="PublishBooksPage"?jsxRuntimeExports.jsx(PublishBooksPage,{}):o==="OlibOrdersPage"?jsxRuntimeExports.jsx(OlibOrdersPage,{}):o==="OlibBooksAuthorsPage"?jsxRuntimeExports.jsx(OlibBooksAuthorsPage,{}):o==="OlibDashboardPage"?jsxRuntimeExports.jsx(OlibDashboardPage,{}):o==="BooksPurchasesPage"?jsxRuntimeExports.jsx(BooksPurchasesPage,{}):o==="BooksPurchasesDisbursementsPage"?jsxRuntimeExports.jsx(BooksPurchasesDisbursementsPage,{}):o==="BooksPublicPage"?jsxRuntimeExports.jsx(BooksPublicPage,{}):o==="BooksMarketPlacePage"?jsxRuntimeExports.jsx(BooksMarketPlacePage,{}):jsxRuntimeExports.jsx("div",{children:"Page not found ..."})};export{OlibPages};
