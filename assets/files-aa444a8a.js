import{bq as Z,br as ee,bo as oe,bs as fe,bC as G,h as y,be as M,r as a,bn as te,aR as se,aM as o,bA as D,bB as re,aC as S,bL as me,aG as he,ay as W,ae as O,cJ as N,i9 as xe,M as H,cF as J,c4 as A,aE as be,bI as E,bJ as K,bK as V}from"./index-2fc17c3b.js";import{F as ve}from"./file_item_component-1b710721.js";import{U as Ce,a as ye}from"./upload_folder-c832207d.js";import{D as je}from"./index-ce61678e.js";import{f as Fe}from"./data_objects-8fb99e43.js";import{F as Be}from"./files_component-a859f1cf.js";import{G as Te}from"./index-7067581d.js";import{A as ze}from"./index-9b2d1d25.js";import{C as Q}from"./index-f023b25a.js";import"./index-9a0bdbec.js";import"./extends-538408d9.js";import"./index-9c7bc008.js";import"./index-651f824b.js";import"./ActionButton-e92b0465.js";import"./index-0b5f66ee.js";import"./index-9abc7cc3.js";import"./transButton-b0336faf.js";import"./index.esm-25816442.js";import"./iconBase-6bf168e2.js";import"./index-ca65b019.js";import"./index-20752ece.js";import"./index-6af274c2.js";import"./Image-e05734f9.js";import"./DialogWrap-b6ee72d4.js";import"./index-93153875.js";import"./fade-7be4fa1b.js";import"./index-389401b2.js";import"./InfoCircleFilled-c05f8e68.js";import"./index-eae8dd11.js";import"./Upload-7e9943b4.js";import"./index-c57ac89c.js";import"./useNotification-c6a88f9b.js";import"./PickerPanel-be3ca01f.js";import"./localeData-6904e615.js";import"./RangePicker-7a53e9ae.js";import"./MutateObserver-517aa91f.js";import"./index-812618d0.js";import"./InputNumber-5bec0d4b.js";import"./index-79fec706.js";import"./index-6215977a.js";import"./Skeleton-94302138.js";function Re(e){return ee("MuiToggleButton",e)}const Se=Z("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge"]),Y=Se,$e=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],we=e=>{const{classes:t,fullWidth:r,selected:i,disabled:c,size:p,color:x}=e,n={root:["root",i&&"selected",c&&"disabled",r&&"fullWidth",`size${G(p)}`,x]};return re(n,Re,t)},ke=oe(fe,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`size${G(r.size)}`]]}})(({theme:e,ownerState:t})=>{let r=t.color==="standard"?e.palette.text.primary:e.palette[t.color].main,i;return e.vars&&(r=t.color==="standard"?e.vars.palette.text.primary:e.vars.palette[t.color].main,i=t.color==="standard"?e.vars.palette.text.primaryChannel:e.vars.palette[t.color].mainChannel),y({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${Y.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:M(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Y.selected}`]:{color:r,backgroundColor:e.vars?`rgba(${i} / ${e.vars.palette.action.selectedOpacity})`:M(r,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${i} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:M(r,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${i} / ${e.vars.palette.action.selectedOpacity})`:M(r,e.palette.action.selectedOpacity)}}}},t.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},t.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)})}),Ue=a.forwardRef(function(t,r){const i=te({props:t,name:"MuiToggleButton"}),{children:c,className:p,color:x="standard",disabled:n=!1,disableFocusRipple:j=!1,fullWidth:u=!1,onChange:g,onClick:v,selected:$,size:d="medium",value:C}=i,F=se(i,$e),f=y({},i,{color:x,disabled:n,disableFocusRipple:j,fullWidth:u,size:d}),B=we(f),U=l=>{v&&(v(l,C),l.defaultPrevented)||g&&g(l,C)};return o.jsx(ke,y({className:D(B.root,p),disabled:n,focusRipple:!j,ref:r,onClick:U,onChange:g,value:C,ownerState:f,"aria-pressed":$},F,{children:c}))}),X=Ue;function Me(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.indexOf(e)>=0:e===t}function We(e){return ee("MuiToggleButtonGroup",e)}const Oe=Z("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical"]),h=Oe,Ge=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],Ie=e=>{const{classes:t,orientation:r,fullWidth:i,disabled:c}=e,p={root:["root",r==="vertical"&&"vertical",i&&"fullWidth"],grouped:["grouped",`grouped${G(r)}`,c&&"disabled"]};return re(p,We,t)},Le=oe("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${h.grouped}`]:t.grouped},{[`& .${h.grouped}`]:t[`grouped${G(r.orientation)}`]},t.root,r.orientation==="vertical"&&t.vertical,r.fullWidth&&t.fullWidth]}})(({ownerState:e,theme:t})=>y({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.orientation==="vertical"&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${h.grouped}`]:y({},e.orientation==="horizontal"?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${h.selected} + .${h.grouped}.${h.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${h.selected} + .${h.grouped}.${h.selected}`]:{borderTop:0,marginTop:0}})})),Ne=a.forwardRef(function(t,r){const i=te({props:t,name:"MuiToggleButtonGroup"}),{children:c,className:p,color:x="standard",disabled:n=!1,exclusive:j=!1,fullWidth:u=!1,onChange:g,orientation:v="horizontal",size:$="medium",value:d}=i,C=se(i,Ge),F=y({},i,{disabled:n,fullWidth:u,orientation:v,size:$}),f=Ie(F),B=(l,b)=>{if(!g)return;const w=d&&d.indexOf(b);let T;d&&w>=0?(T=d.slice(),T.splice(w,1)):T=d?d.concat(b):[b],g(l,T)},U=(l,b)=>{g&&g(l,d===b?null:b)};return o.jsx(Le,y({role:"group",className:D(f.root,p),ref:r,ownerState:F},C,{children:a.Children.map(c,l=>a.isValidElement(l)?a.cloneElement(l,{className:D(f.grouped,l.props.className),onChange:j?U:B,selected:l.props.selected===void 0?Me(l.props.value,d):l.props.selected,size:l.props.size||$,fullWidth:u,color:l.props.color||x,disabled:l.props.disabled||n}):null)}))}),Ae=Ne,ko=e=>{const[t,r]=a.useState(!1),[i,c]=a.useState([]),[p,x]=a.useState(!0),[n,j]=a.useState(1),[u,g]=a.useState(e.min?5:20),[v]=S.useForm();S.useForm();const[$,d]=a.useState(0),[C,F]=a.useState(0),[f,B]=a.useState(""),[U,l]=a.useState(!0);me();const[b,w]=a.useState(!1),[T,I]=a.useState(!1),[ae,ie]=a.useState(!1),[L,Ee]=a.useState(),[le,ne]=a.useState(!1),[P,de]=a.useState("files"),z=!Te.useBreakpoint().lg,_=()=>{w(!0)},q=s=>{c([...s,...i])},k=async(s,m="",ue=25)=>{x(!0);const{data:R}=await K.custom({url:"",method:"get",meta:{operation:"files",variables:{page:{value:s,type:"Int",required:!0},key:{value:m,type:"String",required:!1},pageSize:{value:ue,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Fe}]}}).catch(()=>(V.error("Error getting files"),{data:null})).then(ge=>ge);R&&(F(R.total),d(R.pages),j(R.page),l(R.hasNext),c(R.results)),x(!1)},ce=(s,m)=>{g(m),k(n,f,m)},pe=async()=>{const{data:s}=await K.custom({url:"",method:"get",meta:{operation:"odriveAuthorization",variables:{},fields:["auth"]}}).catch(()=>(V.error("Error getting Odrive Authorization"),{data:null})).then(m=>m);s&&r(s.auth.upload_files)};return a.useEffect(()=>{pe(),k(n,f,u)},[]),o.jsxs(o.Fragment,{children:[!e.min&&o.jsx(ze,{offsetTop:63,children:o.jsxs(he,{children:[z&&o.jsxs(o.Fragment,{children:[o.jsxs(W,{span:24,style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:[o.jsx(O,{size:"large",icon:o.jsx(N,{}),disabled:!t,onClick:()=>_(),children:"Upload File(s)"}),o.jsx(O,{size:"large",icon:o.jsx(xe,{}),disabled:!t,onClick:()=>I(!0),children:"Upload Folder"})]}),o.jsx(W,{span:24,children:o.jsx(Q,{bodyStyle:{paddingTop:10,paddingBottom:0},children:o.jsx(S,{layout:"vertical",form:v,onFinish:s=>{B(s.key),k(1,s.key,u)},children:o.jsx(S.Item,{name:"key",children:o.jsx(H,{size:"large",placeholder:"Search file(s)...",prefix:o.jsx(J,{}),autoComplete:"off",allowClear:!0})})})})})]}),!z&&o.jsxs(o.Fragment,{children:[o.jsx(W,{span:12,children:o.jsx(Q,{bodyStyle:{paddingTop:10,paddingBottom:0},children:o.jsx(S,{layout:"vertical",form:v,onFinish:s=>{B(s.key),k(1,s.key,u)},children:o.jsx(S.Item,{name:"key",children:o.jsx(H,{size:"large",placeholder:"Search file(s)...",prefix:o.jsx(J,{}),autoComplete:"off",allowClear:!0})})})})}),o.jsxs(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:[o.jsx(O,{size:"large",icon:o.jsx(N,{}),disabled:!t,onClick:()=>_(),children:"Upload File(s)"}),o.jsx(O,{size:"large",icon:o.jsx(N,{}),disabled:!t,onClick:()=>I(!0),children:"Upload Folder"})]})]})]})}),!e.min&&o.jsxs(A,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:2,marginTop:2},children:[o.jsx(A,{sx:{marginRight:2,fontSize:24},children:"Filter By:"}),o.jsxs(Ae,{color:"primary",value:P,exclusive:!0,onChange:(s,m)=>{m!==null&&de(m)},"aria-label":"Alignment",sx:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[o.jsx(X,{value:"files",sx:{"&.Mui-selected":{backgroundColor:"red",color:"white",fontWeight:"bold","&:hover":{backgroundColor:"red",color:"white",fontWeight:"bold"}},fontWeight:"bold"},children:"Files"}),o.jsx(X,{value:"folders",sx:{"&.Mui-selected":{backgroundColor:"red",color:"white",fontWeight:"bold","&:hover":{backgroundColor:"red",color:"white",fontWeight:"bold"}},fontWeight:"bold"},children:"Folders"})]})]}),P==="files"&&o.jsxs(o.Fragment,{children:[o.jsx(A,{sx:{maxHeight:"calc(100vh - 330px)",overflowY:"auto"},children:o.jsx("div",{style:{marginTop:e.min?0:20},children:o.jsx(Be,{showDrive:!0,loading:p,data:i,min:e.min??!1})})}),!e.min&&o.jsx(o.Fragment,{children:!p&&o.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:10,marginTop:20},children:o.jsx(be,{showSizeChanger:!0,showQuickJumper:!0,defaultCurrent:n,current:n,total:C,pageSize:u,onShowSizeChange:ce,onChange:s=>k(s,f,u)})})})]}),o.jsx(E,{title:"Uploading Files",open:b,onClose:s=>w(s),width:z?"100vw":"50vw",children:o.jsx(Ce,{onFinish:s=>q(s),mode:"file"})}),o.jsx(E,{title:"Uploading Folder",open:T,onClose:s=>I(s),width:z?"100vw":"50vw",children:o.jsx(ye,{onFinish:s=>q(s),mode:"file"})}),o.jsx(je,{title:"File Informations",anchor:"right",width:z?"100vw":"35vw",onClose:s=>ie(s),open:ae,children:o.jsx(ve,{id:L==null?void 0:L.id})}),o.jsx(E,{title:"Share File",open:le,onClose:s=>ne(s),width:z?"100vw":"50vw",children:o.jsx("span",{})})]})};export{ko as Files};
