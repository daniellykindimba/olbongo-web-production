import{bD as Ds,bE as qs,$ as Rs,T as Os,r as s,bF as Gs,bG as Ys,j as e,bH as _s,as as $s,bI as Ks,K as Be,p as Bs,q as Ws,s as Us,t as Vt,u as Ue,z as Vs,w as Hs,v as Js,x as Qs,y as ws,D as Xs,J as Zs,N as Ht,X as en,V as bt,d as xe,al as ye,n as K,R as ne,bJ as tn,F as o,I as $,aP as ie,aD as te,a as T,S as le,aC as oe,bk as _e,aj as ae,aN as sn,bK as nn,_ as y,bL as rn,bM as an,bN as ln,Q as fe,ai as ce,ap as he,ax as ke,ay as H,aG as de,e as w,az as Ee,bO as on,bP as cn,bQ as dn,aW as V,g as Q,i as Ge,bR as un,bS as hn,aJ as Ct,aK as it,av as vt,k as tt,bT as st,be as jt,bg as Jt,ah as mn,M as re,A as It,bU as xn,aM as Me,a7 as Ye,bV as gn,bd as Qt,aZ as Pe,bj as wt,bW as jn,bX as yn,bY as fn,m as lt,bZ as pn,b_ as Sn,b$ as Xt,c0 as bn,c1 as Cn,bt as Zt,bu as es,c2 as vn,c3 as In,c4 as Fn,c5 as kn,c6 as Mn,c7 as En,c8 as Ln,c9 as An,ca as we,cb as Nn,cc as Pn,cd as Tn,ao as Z,aU as pe,ce as ts,cf as ss,cg as zn,ch as Dn,ci as qn,cj as Rn,ck as On,cl as ns,cm as Gn,cn as Yn,co as _n,cp as $n,cq as Kn,cr as Bn,cs as Wn,ct as rs,cu as Un,cv as Vn,cw as Hn,cx as Jn,cy as Qn,b2 as Ve,cz as wn,cA as Xn,cB as Zn,am as as,B as nt,cC as er,cD as tr,cE as sr,bp as is,bq as ls,aX as os,cF as nr,bl as rr,cG as He,aH as Fe,an as ar,cH as qt,O as ir,bn as We,cI as lr,cJ as or,cK as cr,cL as cs,cM as ds,cN as dr,cO as ur,cP as hr,cQ as mr,cR as xr,cS as gr,cT as jr,cU as yr,cV as fr,cW as pr,cX as Sr,bz as Rt,cY as Ot,cZ as br,c_ as Cr,c$ as vr,d0 as Ir,d1 as Fr,d2 as Ft,d3 as Xe,d4 as kt,d5 as kr,d6 as Mr,br as Er,d7 as Lr,bs as Ar,d8 as Nr,d9 as Pr,da as Tr}from"./index-cdd95245.js";import{G as zr,a as Dr,D as qr,b as Rr,c as Or,d as Gr,U as Yr,A as _r,e as $r}from"./core_api-848f4817.js";import{I as ot}from"./index.es-e4ddf9aa.js";import{D as Se}from"./index-c62eae5d.js";import{R as ve}from"./ReactTimeAgo-d90e120d.js";import{D as ct}from"./index-c2046d3a.js";import{S as Kr}from"./index-73ed0e8b.js";import{I as Ke}from"./index-8e8c07f8.js";import{l as Oe}from"./index-92a98b7e.js";import{S as Br}from"./schoool_examinations_component-cafb1479.js";import{a as us,T as Wr,P as Ur,R as Vr,S as Hr}from"./school_settings_component-4632f4e1.js";import{I as Jr}from"./index-d6c3bfd0.js";import{N as Qr,u as wr}from"./useNotification-f11fc5a0.js";import{A as Xr}from"./index-d33120e9.js";import{A as Zr}from"./Alert-7f4ee931.js";import"./memoize-one.esm-297ddbcb.js";import"./index-875e851c.js";import"./PickerPanel-c8c9357d.js";import"./localeData-ee9c919c.js";import"./RangePicker-1f5cbaa1.js";import"./index-2322a34b.js";import"./InputNumber-d6d7b041.js";import"./objectWithoutProperties-9bed54bb.js";import"./DialogWrap-870f1462.js";import"./index-0577c22f.js";import"./ckeditor-f0755184.js";import"./index-a087753e.js";function ea(t){return Ds("MuiAlertTitle",t)}qs("MuiAlertTitle",["root"]);const ta=["className"],sa=t=>{const{classes:n}=t;return Ks({root:["root"]},ea,n)},na=Rs(Os,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(t,n)=>n.root})(({theme:t})=>({fontWeight:t.typography.fontWeightMedium,marginTop:-2})),ra=s.forwardRef(function(n,i){const r=Gs({props:n,name:"MuiAlertTitle"}),{className:a}=r,h=Ys(r,ta),c=r,d=sa(c);return e.jsx(na,_s({gutterBottom:!0,component:"div",ownerState:c,ref:i,className:$s(d.root,a)},h))}),aa=ra,ia=t=>{const{componentCls:n,width:i,notificationMarginEdge:r}=t,a=new Be("antNotificationTopFadeIn",{"0%":{marginTop:"-100%",opacity:0},"100%":{marginTop:0,opacity:1}}),h=new Be("antNotificationBottomFadeIn",{"0%":{marginBottom:"-100%",opacity:0},"100%":{marginBottom:0,opacity:1}}),c=new Be("antNotificationLeftFadeIn",{"0%":{right:{_skip_check_:!0,value:i},opacity:0},"100%":{right:{_skip_check_:!0,value:0},opacity:1}});return{[`&${n}-top, &${n}-bottom`]:{marginInline:0},[`&${n}-top`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:a}},[`&${n}-bottom`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:h}},[`&${n}-topLeft, &${n}-bottomLeft`]:{marginInlineEnd:0,marginInlineStart:r,[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:c}}}},la=ia,oa=t=>{const{iconCls:n,componentCls:i,boxShadow:r,fontSizeLG:a,notificationMarginBottom:h,borderRadiusLG:c,colorSuccess:d,colorInfo:l,colorWarning:u,colorError:S,colorTextHeading:v,notificationBg:k,notificationPadding:A,notificationMarginEdge:C,motionDurationMid:P,motionEaseInOut:M,fontSize:F,lineHeight:p,width:z,notificationIconSize:b,colorText:j}=t,E=`${i}-notice`,N=new Be("antNotificationFadeIn",{"0%":{left:{_skip_check_:!0,value:z},opacity:0},"100%":{left:{_skip_check_:!0,value:0},opacity:1}}),R=new Be("antNotificationFadeOut",{"0%":{maxHeight:t.animationMaxHeight,marginBottom:h,opacity:1},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}}),L={position:"relative",width:z,maxWidth:`calc(100vw - ${C*2}px)`,marginBottom:h,marginInlineStart:"auto",padding:A,overflow:"hidden",lineHeight:p,wordWrap:"break-word",background:k,borderRadius:c,boxShadow:r,[`${i}-close-icon`]:{fontSize:F,cursor:"pointer"},[`${E}-message`]:{marginBottom:t.marginXS,color:v,fontSize:a,lineHeight:t.lineHeightLG},[`${E}-description`]:{fontSize:F,color:j},[`&${E}-closable ${E}-message`]:{paddingInlineEnd:t.paddingLG},[`${E}-with-icon ${E}-message`]:{marginBottom:t.marginXS,marginInlineStart:t.marginSM+b,fontSize:a},[`${E}-with-icon ${E}-description`]:{marginInlineStart:t.marginSM+b,fontSize:F},[`${E}-icon`]:{position:"absolute",fontSize:b,lineHeight:0,[`&-success${n}`]:{color:d},[`&-info${n}`]:{color:l},[`&-warning${n}`]:{color:u},[`&-error${n}`]:{color:S}},[`${E}-close`]:{position:"absolute",top:t.notificationPaddingVertical,insetInlineEnd:t.notificationPaddingHorizontal,color:t.colorIcon,outline:"none",width:t.notificationCloseButtonSize,height:t.notificationCloseButtonSize,borderRadius:t.borderRadiusSM,transition:`background-color ${t.motionDurationMid}, color ${t.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:t.colorIconHover,backgroundColor:t.wireframe?"transparent":t.colorFillContent}},[`${E}-btn`]:{float:"right",marginTop:t.marginSM}};return[{[i]:Object.assign(Object.assign(Object.assign(Object.assign({},Us(t)),{position:"fixed",zIndex:t.zIndexPopup,marginInlineEnd:C,[`${i}-hook-holder`]:{position:"relative"},[`&${i}-top, &${i}-bottom`]:{[E]:{marginInline:"auto auto"}},[`&${i}-topLeft, &${i}-bottomLeft`]:{[E]:{marginInlineEnd:"auto",marginInlineStart:0}},[`${i}-fade-enter, ${i}-fade-appear`]:{animationDuration:t.motionDurationMid,animationTimingFunction:M,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${i}-fade-leave`]:{animationTimingFunction:M,animationFillMode:"both",animationDuration:P,animationPlayState:"paused"},[`${i}-fade-enter${i}-fade-enter-active, ${i}-fade-appear${i}-fade-appear-active`]:{animationName:N,animationPlayState:"running"},[`${i}-fade-leave${i}-fade-leave-active`]:{animationName:R,animationPlayState:"running"}}),la(t)),{"&-rtl":{direction:"rtl",[`${E}-btn`]:{float:"left"}}})},{[i]:{[E]:Object.assign({},L)}},{[`${E}-pure-panel`]:Object.assign(Object.assign({},L),{margin:0})}]},hs=Bs("Notification",t=>{const n=t.paddingMD,i=t.paddingLG,r=Ws(t,{notificationBg:t.colorBgElevated,notificationPaddingVertical:n,notificationPaddingHorizontal:i,notificationIconSize:t.fontSizeLG*t.lineHeightLG,notificationCloseButtonSize:t.controlHeightLG*.55,notificationMarginBottom:t.margin,notificationPadding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`,notificationMarginEdge:t.marginLG,animationMaxHeight:150});return[oa(r)]},t=>({zIndexPopup:t.zIndexPopupBase+50,width:384}),{clientOnly:!0});var ca=globalThis&&globalThis.__rest||function(t,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(i[r[a]]=t[r[a]]);return i};function Mt(t,n){return n===null||n===!1?null:n||s.createElement("span",{className:`${t}-close-x`},s.createElement(Vs,{className:`${t}-close-icon`}))}const da={success:Hs,info:Js,error:Qs,warning:ws},ms=t=>{const{prefixCls:n,icon:i,type:r,message:a,description:h,btn:c,role:d="alert"}=t;let l=null;return i?l=s.createElement("span",{className:`${n}-icon`},i):r&&(l=s.createElement(da[r]||null,{className:Ue(`${n}-icon`,`${n}-icon-${r}`)})),s.createElement("div",{className:Ue({[`${n}-with-icon`]:l}),role:d},l,s.createElement("div",{className:`${n}-message`},a),s.createElement("div",{className:`${n}-description`},h),c&&s.createElement("div",{className:`${n}-btn`},c))},ua=t=>{const{prefixCls:n,className:i,icon:r,type:a,message:h,description:c,btn:d,closable:l=!0,closeIcon:u}=t,S=ca(t,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon"]),{getPrefixCls:v}=s.useContext(Vt),k=n||v("notification"),A=`${k}-notice`,[,C]=hs(k);return s.createElement(Qr,Object.assign({},S,{prefixCls:k,className:Ue(i,C,`${A}-pure-panel`),eventKey:"pure",duration:null,closable:l,closeIcon:Mt(k,u),content:s.createElement(ms,{prefixCls:A,icon:r,type:a,message:h,description:c,btn:d})}))},ha=ua;function ma(t,n,i){let r;switch(t){case"top":r={left:"50%",transform:"translateX(-50%)",right:"auto",top:n,bottom:"auto"};break;case"topLeft":r={left:0,top:n,bottom:"auto"};break;case"topRight":r={right:0,top:n,bottom:"auto"};break;case"bottom":r={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:i};break;case"bottomLeft":r={left:0,top:"auto",bottom:i};break;default:r={right:0,top:"auto",bottom:i};break}return r}function xa(t){return{motionName:`${t}-fade`}}var ga=globalThis&&globalThis.__rest||function(t,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(i[r[a]]=t[r[a]]);return i};const Gt=24,ja=4.5,ya="topRight",fa=s.forwardRef((t,n)=>{const{top:i,bottom:r,prefixCls:a,getContainer:h,maxCount:c,rtl:d,onAllRemoved:l}=t,{getPrefixCls:u,getPopupContainer:S,notification:v}=s.useContext(Vt),k=a||u("notification"),A=z=>ma(z,i??Gt,r??Gt),[,C]=hs(k),P=()=>Ue(C,{[`${k}-rtl`]:d}),M=()=>xa(k),[F,p]=wr({prefixCls:k,style:A,className:P,motion:M,closable:!0,closeIcon:Mt(k),duration:ja,getContainer:()=>(h==null?void 0:h())||(S==null?void 0:S())||document.body,maxCount:c,onAllRemoved:l});return s.useImperativeHandle(n,()=>Object.assign(Object.assign({},F),{prefixCls:k,hashId:C,notification:v})),p});function xs(t){const n=s.useRef(null);return[s.useMemo(()=>{const r=d=>{var l;if(!n.current)return;const{open:u,prefixCls:S,hashId:v,notification:k}=n.current,A=`${S}-notice`,{message:C,description:P,icon:M,type:F,btn:p,className:z,style:b,role:j="alert",closeIcon:E}=d,N=ga(d,["message","description","icon","type","btn","className","style","role","closeIcon"]),R=Mt(A,E);return u(Object.assign(Object.assign({placement:(l=t==null?void 0:t.placement)!==null&&l!==void 0?l:ya},N),{content:s.createElement(ms,{prefixCls:A,icon:M,type:F,message:C,description:P,btn:p,role:j}),className:Ue(F&&`${A}-${F}`,v,z,k==null?void 0:k.className),style:Object.assign(Object.assign({},k==null?void 0:k.style),b),closeIcon:R,closable:!!R}))},h={open:r,destroy:d=>{var l,u;d!==void 0?(l=n.current)===null||l===void 0||l.close(d):(u=n.current)===null||u===void 0||u.destroy()}};return["success","info","warning","error"].forEach(d=>{h[d]=l=>r(Object.assign(Object.assign({},l),{type:d}))}),h},[]),s.createElement(fa,Object.assign({key:"notification-holder"},t,{ref:n}))]}function pa(t){return xs(t)}let Ne=null,Ze=t=>t(),rt=[],at={};function Yt(){const{prefixCls:t,getContainer:n,rtl:i,maxCount:r,top:a,bottom:h}=at,c=t??Ht().getPrefixCls("notification"),d=(n==null?void 0:n())||document.body;return{prefixCls:c,getContainer:()=>d,rtl:i,maxCount:r,top:a,bottom:h}}const Sa=s.forwardRef((t,n)=>{const[i,r]=s.useState(Yt),[a,h]=xs(i),c=Ht(),d=c.getRootPrefixCls(),l=c.getIconPrefixCls(),u=c.getTheme(),S=()=>{r(Yt)};return s.useEffect(S,[]),s.useImperativeHandle(n,()=>{const v=Object.assign({},a);return Object.keys(v).forEach(k=>{v[k]=function(){return S(),a[k].apply(a,arguments)}}),{instance:v,sync:S}}),s.createElement(Zs,{prefixCls:d,iconPrefixCls:l,theme:u},h)});function Et(){if(!Ne){const t=document.createDocumentFragment(),n={fragment:t};Ne=n,Ze(()=>{Xs(s.createElement(Sa,{ref:i=>{const{instance:r,sync:a}=i||{};Promise.resolve().then(()=>{!n.instance&&r&&(n.instance=r,n.sync=a,Et())})}}),t)});return}Ne.instance&&(rt.forEach(t=>{switch(t.type){case"open":{Ze(()=>{Ne.instance.open(Object.assign(Object.assign({},at),t.config))});break}case"destroy":Ze(()=>{Ne==null||Ne.instance.destroy(t.key)});break}}),rt=[])}function ba(t){at=Object.assign(Object.assign({},at),t),Ze(()=>{var n;(n=Ne==null?void 0:Ne.sync)===null||n===void 0||n.call(Ne)})}function gs(t){rt.push({type:"open",config:t}),Et()}function Ca(t){rt.push({type:"destroy",key:t}),Et()}const va=["success","info","warning","error"],Ia={open:gs,destroy:Ca,config:ba,useNotification:pa,_InternalPanelDoNotUseOrYouWillBeFired:ha},js=Ia;va.forEach(t=>{js[t]=n=>gs(Object.assign(Object.assign({},n),{type:t}))});const Fa=js,ka=en(e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOutlined"),Ma=s.lazy(()=>bt(()=>import("./school_analytics-d9abc2ff.js"),["assets/school_analytics-d9abc2ff.js","assets/index-cdd95245.js","assets/index-5e5904d3.css","assets/core_api-848f4817.js","assets/analytic_card_component-0f793a7a.js"]).then(t=>({default:t.SchoolAnalytics}))),Ea=s.lazy(()=>bt(()=>import("./students_registration_bar_chart-04106e91.js"),["assets/students_registration_bar_chart-04106e91.js","assets/index-cdd95245.js","assets/index-5e5904d3.css","assets/index-689b281c.js"]).then(t=>({default:t.StudentsRegistrationLineChart}))),La=s.lazy(()=>bt(()=>import("./students_teachers_bar_chart-1f64841a.js"),["assets/students_teachers_bar_chart-1f64841a.js","assets/index-cdd95245.js","assets/index-5e5904d3.css","assets/index-689b281c.js"]).then(t=>({default:t.StudentsTeachersBarChart}))),Aa=()=>{const[t,n]=s.useState(!0),[i,r]=s.useState(),[a,h]=s.useState([]),[c,d]=s.useState([]),l=async()=>{n(!0),zr().then(u=>{n(!1),u&&(d(u.operatingTypes.map(S=>S.schoolType.code)),h(u.operatingTypes),r(u.data))})};return s.useEffect(()=>{document.title=xe.system_name+": School Manager",l()},[]),!t&&!i?e.jsx(ye,{direction:"horizontal",style:{width:"100%",height:"88vh",justifyContent:"center"},children:e.jsxs(K,{children:[e.jsx(ne,{children:e.jsx("h2",{children:"Your are not Connected to any Operation School"})}),e.jsx(ne,{style:{display:"flex",justifyContent:"center"},children:e.jsx(tn,{randKey:Math.random()})})]})}):e.jsxs("div",{style:{marginTop:10},children:[e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Ma,{operatingTypes:a,operationalSchool:i,operatingTypesCodes:c})}),e.jsxs(ne,{children:[e.jsx(K,{span:12,children:e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Ea,{})})}),e.jsx(K,{span:12,children:e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(La,{})})})]})]})},Na=t=>{const[n,i]=s.useState([]),[r,a]=s.useState(!0),[h,c]=s.useState(1),[d]=o.useForm(),[l,u]=s.useState(0),[S,v]=s.useState(0),[k,A]=s.useState(!0),C=async M=>{nn(parseInt(M.toString())).then(F=>{F&&(F.success?(y.success(F.message),i(n.filter(p=>p.id.toString()!==M.toString())),t.onAdd(F.schoolEducationLevel)):y.error(F.message))})},P=async(M,F="")=>{rn(M,F).then(p=>{p&&(v(p.total),u(p.pages),c(p.page),A(p.hasNext),i([...n,...p.results]))}),a(!1)};return s.useEffect(()=>{P(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(K,{span:24,children:e.jsx(o,{layout:"vertical",form:d,onFinish:M=>{n.length=0,i([]),P(1,M.key)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search Level(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ne,{children:e.jsx(K,{span:24,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(te,{title:"Adding all education levels",description:"Are you sure to add all education levels?",overlayStyle:{zIndex:9999},onConfirm:()=>{n.forEach(M=>{C(M.id)})},disabled:n.length===0,children:e.jsx(T,{disabled:n.length===0,children:"Add All"})})})}),e.jsx(le,{spinning:r,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(ot,{dataLength:S,next:()=>P(h),hasMore:k,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(le,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(oe,{itemLayout:"horizontal",dataSource:n,renderItem:M=>e.jsxs("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:[e.jsx(oe.Item,{style:{marginBottom:1,padding:0},actions:[e.jsx(te,{title:"Are you sure to add this Education Level?",onConfirm:()=>C(M.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{icon:e.jsx(_e,{}),onClick:()=>{}})})],children:e.jsx(oe.Item.Meta,{title:e.jsxs("a",{children:[M.name,e.jsx(ae,{color:"green",children:M.schoolType.name})]}),description:e.jsx(e.Fragment,{})})},"file-"+M.id),e.jsx(sn,{})]})})})})})]})},Pa=t=>{const[n,i]=s.useState([]),[r,a]=s.useState(1),[h,c]=s.useState(!1),[d,l]=s.useState(0),[u,S]=s.useState(!0),[v]=o.useForm(),k=async(C,P="",M=25)=>{S(!0),an(C,P,M,parseInt(t.educationLevel.id.toString())).then(F=>{F&&(l(F.total),a(F.page),c(F.hasNext),i([...n,...F.results]))}),S(!1)},A=async C=>{ln(C,parseInt(t.educationLevel.id.toString())).then(P=>{P&&(P.success?(y.success(P.message),i(n.filter(M=>M.id!==C)),t.onAdd(P.schoolEducationLevelCombination)):y.error(P.message))})};return s.useEffect(()=>{k(1,"",25)},[t.randKey,t.educationLevel]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(K,{span:24,children:e.jsx(o,{layout:"vertical",form:v,onFinish:C=>{k(1,C.key,25)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search Subject(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(le,{spinning:u,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(ot,{dataLength:d,next:()=>k(r),hasMore:h,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(le,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(oe,{itemLayout:"horizontal",dataSource:n,renderItem:C=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(oe.Item,{style:{margin:0,padding:0},actions:[e.jsx(te,{title:"Are you sure to add this Combination?",onConfirm:()=>A(C.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{icon:e.jsx(_e,{}),onClick:()=>{}})})],children:e.jsx(oe.Item.Meta,{title:e.jsxs("a",{children:[C.name,e.jsx("span",{style:{marginLeft:10},children:C.subjects.map(P=>e.jsx(ae,{color:"green",children:P.name}))})]}),description:e.jsx(e.Fragment,{})})},"combination-"+C.id)})})})})})]})},Ta=t=>{const[n,i]=s.useState([]),[r,a]=s.useState(!1),[h,c]=s.useState(0),[d,l]=s.useState(20),[u,S]=s.useState(""),[v,k]=s.useState(!0),[A]=o.useForm(),P=!fe.useBreakpoint().lg,M=async b=>{i([b,...n])},F=[{title:"Name",dataIndex:"name",fixed:!0,render:(b,j)=>e.jsx("span",{children:e.jsx("a",{children:j.combination.name})})},{title:"Subjects",dataIndex:"subjects",fixed:!0,render:(b,j)=>{var E,N;return e.jsx("span",{children:(N=(E=j==null?void 0:j.combination)==null?void 0:E.subjects)==null?void 0:N.map(R=>e.jsx(ae,{color:"green",children:R.name}))})}},{title:"Date Created",dataIndex:"created",render:(b,j)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(j.created)})})})},{title:"Status",dataIndex:"isActive",render:(b,j)=>e.jsx("a",{children:j!=null&&j.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(b,j)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsx(H,{children:e.jsx(H.Item,{icon:e.jsx(de,{}),children:e.jsx(w,{title:"Delete Combination",children:e.jsx(te,{title:"Are you sure to delete this ",onConfirm:()=>p(j==null?void 0:j.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(j!=null&&j.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",href:"",rel:"noopener noreferrer",download:!0,children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:E=>E.preventDefault(),children:e.jsx(Ee,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],p=async b=>{on(b).then(j=>{j&&(j.success?(y.success(j.message),i(n.filter(E=>E.id!==b))):y.error(j.message))})},z=async(b,j="",E=20)=>{var N;k(!0),cn(b,j,E,parseInt(((N=t.schoolEducationLevel)==null?void 0:N.id.toString())??"0")).then(R=>{R&&(c(R.total),i([...R.results]))}),k(!1)};return s.useEffect(()=>{z(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:16,children:e.jsx(o,{layout:"vertical",form:A,onFinish:b=>{S(b.key),n.length=0,z(1,b.key)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:P?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{size:"large",icon:e.jsx(ce,{}),onClick:()=>a(!0),children:"Add Combination"})})]}),e.jsx(he,{loading:v,columns:F,dataSource:n,pagination:{onChange:(b,j)=>{l(j),z(b,u,j)},total:h,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:"Adding School Education Level Combinations",anchor:"right",width:"35vw",onClose:b=>a(b),visible:r,children:e.jsx(Pa,{randKey:Math.random(),onAdd:M,educationLevel:t.schoolEducationLevel})})]})},{TextArea:za}=$,Da=t=>{const[n]=o.useForm(),i=async r=>{dn(r,t.educationLevel.id).then(a=>{a&&(a.success?(y.success(a.message),t.onAdd(a.schoolEducationLevelGroup),n.resetFields()):y.error(a.message))})};return e.jsx(e.Fragment,{children:e.jsxs(o,{layout:"vertical",form:n,onFinish:r=>{i(r)},requiredMark:!1,children:[e.jsx("span",{children:t.educationLevel.educationLevel.name}),e.jsx(o.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(za,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},qa=t=>{const[n,i]=s.useState([]),[r,a]=s.useState(!1),[h,c]=s.useState(0),[d,l]=s.useState(20),[u,S]=s.useState(""),[v,k]=s.useState(!0),[A]=o.useForm(),P=!fe.useBreakpoint().lg,M=async b=>{i([b,...n])},F=async b=>{qr(b).then(j=>{j&&(j.success?(y.success(j.message),i(n.filter(E=>E.id!==b))):y.error(j.message))})},p=[{title:"Name",dataIndex:"name",fixed:!0,render:(b,j)=>e.jsx("span",{children:e.jsx("a",{children:j.name})})},{title:"Date Created",dataIndex:"created",render:(b,j)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(j.created)})})})},{title:"Status",dataIndex:"isActive",render:(b,j)=>e.jsx("a",{children:j!=null&&j.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(b,j)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlayStyle:{zIndex:9999},overlay:e.jsx(H,{children:e.jsx(H.Item,{icon:e.jsx(de,{}),children:e.jsx(w,{title:"Delete Group",children:e.jsx(te,{title:"Are you sure to delete this ",onConfirm:()=>F(j==null?void 0:j.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(j!=null&&j.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})})})}),children:e.jsx("a",{className:"ant-dropdown-link",onClick:E=>E.preventDefault(),children:e.jsx(Ee,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],z=async(b,j="",E=20)=>{var N;k(!0),Dr(b,j,E,parseInt(((N=t.schoolEducationLevel)==null?void 0:N.id.toString())??"0")).then(R=>{R&&(c(R.total),i([...R.results]))}),k(!1)};return s.useEffect(()=>{z(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:16,children:e.jsx(o,{layout:"vertical",form:A,onFinish:b=>{S(b.key),n.length=0,z(1,b.key)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:P?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{size:"large",icon:e.jsx(ce,{}),onClick:()=>a(!0),children:"Add Group"})})]}),e.jsx(he,{loading:v,columns:p,dataSource:n,pagination:{onChange:(b,j)=>{l(j),z(b,u,j)},total:h,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:"Adding School Education Level Group",anchor:"right",onClose:b=>a(b),open:r,width:"35vw",children:e.jsx(Da,{randKey:Math.random(),onAdd:M,educationLevel:t.schoolEducationLevel})})]})},{Option:Ra}=V,dt=t=>{const[n,i]=s.useState([]),[r,a]=s.useState(!1),[h,c]=s.useState(null),d=async l=>{a(!0),Rr(l,t.regionId??0).then(u=>{u&&i(u.results)}),a(!1)};return s.useEffect(()=>{t.regionId&&(c(null),d(""))},[t.regionId]),e.jsx(e.Fragment,{children:e.jsx(o.Item,{name:t.name??"districtId",label:t.label??"District",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"District")+"!"}],children:e.jsx(V,{loading:r,size:t.size??"large",value:h||t.districtId,disabled:!t.regionId,placeholder:"Please Choose "+(t.label??"District ...")+"!",style:{width:220},showSearch:!1,optionFilterProp:"children",filterOption:(l,u)=>u.children.toLowerCase().includes(l.toLowerCase()),onSearch:l=>{l.length>3?d(l):d("")},onChange:l=>{l&&(c(l),t.onChange(parseInt(l)))},dropdownStyle:{zIndex:9999},children:n.map(l=>e.jsx(Ra,{value:parseInt(l.id.toString()),children:l.name}))})})})},{Option:Oa}=V,ys=t=>{const[n,i]=s.useState([]),[r,a]=s.useState(!1),[h,c]=s.useState(null),d=async l=>{a(!0);const{data:u}=await Q.custom({url:"",method:"get",meta:{operation:"schoolEducationLevelGroups",variables:{key:{value:l,type:"String",required:!1},schoolEducationLevelId:{value:t.educationLevelId,type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});i(u.results),a(!1)};return s.useEffect(()=>{t.educationLevelId&&d("")},[t.educationLevelId]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:r,children:e.jsx(o.Item,{name:t.name??"groupId",label:t.label??"Education Level Group",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"Ward")+"!"}],children:e.jsx(V,{size:"large",value:h||t.groupId,disabled:!t.educationLevelId,placeholder:"Please Choose School Education Level Group ...",style:{width:450},showSearch:!1,optionFilterProp:"children",filterOption:(l,u)=>u.children.toLowerCase().includes(l.toLowerCase()),onSearch:l=>{l.length>3?d(l):d("")},onChange:l=>{l&&(c(l),t.onChange(parseInt(l)))},dropdownStyle:{zIndex:9999},children:n.map(l=>e.jsx(Oa,{value:parseInt(l.id.toString()),children:l.name}))})})})})},{Option:Ga}=V,ut=t=>{const[n,i]=s.useState([]),[r,a]=s.useState(null),[h,c]=s.useState(!0),d=async l=>{c(!0),Or(l).then(u=>{u&&i(u.results),c(!1)})};return s.useEffect(()=>{d("")},[]),e.jsx(e.Fragment,{children:e.jsx(o.Item,{name:t.name??"regionId",label:t.label??"Region",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"Region")+"!"}],children:e.jsx(V,{loading:h,placeholder:"Please Choose "+(t.label??"Region ...")+"!",style:{width:220},size:t.size??"large",showSearch:!0,value:r||t.regionId,onChange:l=>{a(l),t.onChange(parseInt(l))},optionFilterProp:"children",filterOption:(l,u)=>u.children.toLowerCase().includes(l.toLowerCase()),onSearch:l=>{l.length>3?d(l):d("")},dropdownStyle:{zIndex:9999},children:n.map(l=>e.jsx(Ga,{value:parseInt(l.id.toString()),children:l.name}))})})})},{Option:Ya}=V,ht=t=>{const[n,i]=s.useState([]),[r,a]=s.useState(!1),[h,c]=s.useState(null),d=async l=>{a(!0),Gr(l,t.districtId).then(u=>{u&&i(u.results)}),a(!1)};return s.useEffect(()=>{t.districtId&&(c(null),d(""))},[t.districtId]),e.jsx(e.Fragment,{children:e.jsx(o.Item,{name:t.name??"wardId",label:t.label??"Ward",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"Ward")+"!"}],children:e.jsx(V,{loading:r,size:t.size??"large",value:h||t.wardId,disabled:!t.districtId,placeholder:"Please Choose "+(t.label??"Ward ...")+"!",style:{width:220},showSearch:!1,optionFilterProp:"children",filterOption:(l,u)=>u.children.toLowerCase().includes(l.toLowerCase()),onSearch:l=>{l.length>3?d(l):d("")},onChange:l=>{c(l),t.onChange(parseInt(l))},dropdownStyle:{zIndex:9999},children:n.map(l=>e.jsx(Ya,{value:parseInt(l.id.toString()),children:l.name}))})})})},{Option:yt}=V,fs=[];for(let t=2022;t<new Date().getFullYear()+5;t++)fs.push(e.jsx(yt,{children:t.toString()},t));const _t=t=>{var R,L;const[n,i]=s.useState(null),[r,a]=s.useState(null),[h,c]=s.useState(null),[d,l]=s.useState(null),[u,S]=s.useState(null),[v,k]=s.useState(null),[A,C]=s.useState(null),[P]=o.useForm(),M=async g=>{C(g.format("YYYY-MM-DD"))},F=async g=>{k(g)},p=async g=>{P.setFieldsValue({year:parseInt(g.toString())}),S(parseInt(g.toString()))},z=async g=>{l(g)},b=async g=>{c(g)},j=async g=>{i(g)},E=async g=>{a(g)},N=async g=>{var m;const{data:I}=await Q.custom({url:"",method:"post",meta:{operation:"createSchoolEducationLevelStudent",variables:{schoolEducationLevelStudentId:{value:parseInt(((m=g.schoolEducationLevelStudentId)==null?void 0:m.toString())??"0"),type:"Int",required:!1},schoolEducationLevelId:{value:parseInt(t.educationLevel.id.toString()),type:"Int",required:!0},firstName:{value:g.firstName,type:"String",required:!0},middleName:{value:g.middleName,type:"String",required:!0},lastName:{value:g.lastName,type:"String",required:!0},email:{value:g.email,type:"String",required:!1},phones:{value:g.phones,type:"[String]",required:!1},registrationNumber:{value:g.registrationNumber,type:"String",required:!0},year:{value:parseInt(g.year.toString()),type:"Int",required:!0},gender:{value:g.gender,type:"String",required:!0},groupId:{value:g.groupId,type:"Int",required:!1},regionId:{value:g.regionId,type:"Int",required:!1},districtId:{value:g.districtId,type:"Int",required:!1},wardId:{value:g.wardId,type:"Int",required:!1},dob:{value:g.dob,type:"String",required:!1}},fields:["success","message",{schoolEducationLevelStudent:un}]}}).catch(()=>(y.error("Error occured while creating student"),{data:null})).then(x=>x);I&&(I.success?(y.success(I.message),t.onAdd(I.schoolEducationLevelStudent,t.editting),P.resetFields()):y.error(I.message))};return s.useEffect(()=>{var g,I,m,x,B,U,O,G,X,me,ge,be,Y,D,se,ee,ue,Re,Te,ze,Ae,De,q,f,J,je,qe,Ie;l((I=(g=t.student)==null?void 0:g.group)==null?void 0:I.id),S((m=t.student)==null?void 0:m.year),k((x=t.student)==null?void 0:x.member.gender),i((U=(B=t.student)==null?void 0:B.region)==null?void 0:U.id),a((G=(O=t.student)==null?void 0:O.district)==null?void 0:G.id),c((me=(X=t.student)==null?void 0:X.ward)==null?void 0:me.id),P.setFieldsValue({firstName:(ge=t.student)==null?void 0:ge.member.firstName,middleName:(be=t.student)==null?void 0:be.member.middleName,lastName:(Y=t.student)==null?void 0:Y.member.lastName,email:(D=t.student)==null?void 0:D.member.email,registrationNumber:(se=t.student)==null?void 0:se.member.registrationNumber,year:(ee=t.student)==null?void 0:ee.year,gender:(ue=t.student)==null?void 0:ue.member.gender,groupId:(Te=(Re=t.student)==null?void 0:Re.group)==null?void 0:Te.id,regionId:(Ae=(ze=t.student)==null?void 0:ze.region)==null?void 0:Ae.id,districtId:(q=(De=t.student)==null?void 0:De.district)==null?void 0:q.id,wardId:(J=(f=t.student)==null?void 0:f.ward)==null?void 0:J.id}),(je=t.student)!=null&&je.member.dob&&(C(Ge((qe=t.student)==null?void 0:qe.member.dob)),P.setFieldsValue({dob:Ge((Ie=t.student)==null?void 0:Ie.member.dob)}))},[t.editting,t.student,t.educationLevel]),e.jsx(e.Fragment,{children:e.jsxs(o,{layout:"vertical",form:P,onFinish:g=>{var I;t.editting&&(g.schoolEducationLevelStudentId=(I=t.student)==null?void 0:I.id),g.groupId=parseInt(d),g.year=u,g.dob=A,g.regionId=parseInt(n),g.districtId=parseInt(r),g.wardId=parseInt(h),N(g)},requiredMark:!0,children:[e.jsx(o.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(o.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(o.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10},children:e.jsx(w,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(T,{type:"dashed",onClick:()=>y("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx($,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(o.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx($,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(o.Item,{name:"phones",label:"Phones Number",rules:[{required:!1,type:"string",message:"Please input Phones Number"}],children:e.jsx($,{size:"large",placeholder:"Enter Phones Numbers ..."})}),e.jsxs(ye,{direction:"horizontal",children:[e.jsx(o.Item,{name:"dob",label:"Date of Birth",rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(ct,{onChange:M,disabledDate:g=>g&&g>Ge().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(o.Item,{name:"gender",label:"Gender",rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:v,children:e.jsxs(V,{placeholder:"Please Choose Gender ...",style:{width:220},onChange:F,dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(yt,{value:"female",children:"Female"}),e.jsx(yt,{value:"male",children:"Male"})]})}),e.jsx(o.Item,{name:"year",label:"Study Year",rules:[{required:!0,type:"integer",message:"Please choose Year"}],initialValue:u?parseInt(u.toString()):new Date().getFullYear(),children:e.jsx(V,{value:u?parseInt(u.toString()):new Date().getFullYear(),placeholder:"Please Choose Year ...",style:{width:220},onChange:p,dropdownStyle:{zIndex:9999},children:fs})})]}),e.jsxs(ye,{direction:"horizontal",children:[e.jsx(ut,{onChange:j,regionId:n,name:"region",label:"Region",size:"middle",required:!0}),e.jsx(dt,{regionId:parseInt(n),districtId:r,onChange:E,name:"district",label:"District",size:"middle",required:!0}),e.jsx(ht,{districtId:parseInt(r),wardId:h,onChange:b,name:"ward",label:"Ward",size:"middle",required:!1})]}),e.jsx(ys,{educationLevelId:parseInt(t.educationLevel.id),groupId:(L=(R=t.student)==null?void 0:R.group)==null?void 0:L.id,onChange:z,name:"group",label:"School Education Level Group",size:"middle",required:!1}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},{Option:xt}=V,ft=[];for(let t=2022;t<new Date().getFullYear()+5;t++)ft.push(t);const _a=t=>{const[n,i]=s.useState(!1),[r,a]=s.useState(new Date().getFullYear()),[h,c]=s.useState(!0),[d]=o.useForm(),[l,u]=s.useState([]),S=A=>{c(A)},v=async(A,C="",P=20)=>{var F;const{data:M}=await Q.custom({url:"",method:"get",meta:{operation:"schoolEducationLevelsToMigrate",variables:{schoolEducationLevelId:{value:parseInt(((F=t.schoolEducationLevel)==null?void 0:F.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:hn}]}}).catch(()=>(y.error("Something Went Wrong ..."),{data:null})).then(p=>p);M&&u(M.results)},k=async A=>{var P;i(!0);const{data:C}=await Q.custom({url:"",method:"post",meta:{operation:"studentsMigration",variables:{schoolEducationLevelId:{value:parseInt(((P=t.schoolEducationLevel)==null?void 0:P.id.toString())??"0"),type:"Int",required:!0},schoolEducationLevelToId:{value:A.school_education_level_to_id,type:"Int",required:!0},yearFrom:{value:A.yearFrom,type:"Int",required:!0},yearTo:{value:A.yearTo,type:"Int",required:!0},honor:{value:A.honor,type:"Boolean",required:!0}},fields:["success","message"]}}).catch(()=>(y.error("Something Went Wrong ..."),{data:null})).then(M=>M);C&&(C.success?(y.success(C.message),d.resetFields(),t.onFinish(A.yearTo)):y.error(C.message)),i(!1)};return s.useEffect(()=>{d.resetFields(),v(1,"",20)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:n,children:e.jsxs(o,{layout:"vertical",form:d,onFinish:A=>{k(A)},requiredMark:!0,children:[e.jsx(o.Item,{name:"school_education_level_to_id",label:"School Education Level to Migrate From",rules:[{required:!0,type:"integer",message:"Please choose ..."}],children:e.jsx(V,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:"",onChange:A=>{},dropdownStyle:{zIndex:9999},children:l.map(A=>e.jsx(xt,{value:parseInt(A.id.toString()),children:A.educationLevel.name},A.id.toString()))})}),e.jsx(o.Item,{name:"yearFrom",label:"Year to Migrate From",initialValue:r,rules:[{required:!0,type:"integer",message:"Please choose ..."}],children:e.jsx(V,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:new Date().getFullYear(),onChange:A=>a(A),dropdownStyle:{zIndex:9999},children:ft.map(A=>e.jsx(xt,{value:A,children:A.toString()},A.toString()))})}),e.jsx(o.Item,{name:"yearTo",label:"Year to Migrate To",rules:[{required:!0,type:"integer",message:"Please choose ..."}],children:e.jsx(V,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:"",onChange:A=>{},dropdownStyle:{zIndex:9999},children:ft.filter(A=>A>r).map(A=>e.jsx(xt,{value:A,children:A.toString()},A.toString()))})}),e.jsx(o.Item,{name:"honor",label:"Honor Education Examinations Results",initialValue:h,rules:[{required:!0,type:"boolean",message:"Please choose ..."}],children:e.jsx(Kr,{defaultChecked:!0,onChange:S})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Option:ps}=V,Ss=[e.jsx(ps,{value:"",children:"Please choose Academic Year"})];for(let t=2022;t<new Date().getFullYear()+5;t++)Ss.push(e.jsx(ps,{value:t,children:t.toString()},t.toString()));const $a=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,Ka=t=>{const[n,i]=s.useState(!1),r=h=>{t.form.setFieldsValue({groupId:h})},a=async h=>{i(!0),Yr(h).then(c=>{c&&(c.success?(y(c.message),t.onFinish()):y.error(c.message))}),i(!1)};return s.useEffect(()=>{},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:n,children:e.jsxs(o,{layout:"vertical",form:t.form,onFinish:h=>{h.school_education_level_id=t.educationLevel.id,a(h)},requiredMark:!0,children:[e.jsx(ys,{educationLevelId:parseInt(t.educationLevel.id),onChange:r,name:"groupId",label:"Education Level Group"}),e.jsx(o.Item,{name:"year",label:"Academic Year",rules:[{required:!0,type:"integer",message:"Please select academic year"}],children:e.jsx(V,{size:"large",style:{width:"100%"},placeholder:"Please Select Academic Year",onChange:h=>{},dropdownStyle:{zIndex:9999},children:Ss})}),e.jsx(o.Item,{label:"Students Excel File",children:e.jsx(o.Item,{name:"files",valuePropName:"fileList",getValueFromEvent:$a,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload students excel file"}],children:e.jsxs(Ct.Dragger,{name:"files",accept:".xls, .xlsx",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(it,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsxs("span",{children:["Download Uploading Excel Format Template",e.jsx("span",{style:{marginLeft:10},children:e.jsxs("a",{href:xe.student_registration_template_file,target:"_blank",children:[e.jsx(vt,{}),"Download"]})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Register"})})]})})})},{Option:bs}=V,pt=[e.jsx(bs,{value:null,children:"Please Select Year"},"default")];for(let t=2022;t<new Date().getFullYear()+5;t++)pt.push(e.jsx(bs,{value:t,children:t.toString()},t));const Ba=t=>{const[n,i]=s.useState(null),[r,a]=s.useState(null),h=async l=>{i(l)},c=async l=>{a(l)},d=async(l,u)=>{const{data:S}=await Q.custom({url:"",method:"post",meta:{operation:"studentsLoginAuthorize",variables:{authorizationType:{value:l,type:"Int",required:!0},schoolEducationLevelId:{value:parseInt(t.schoolEducationLevel.id),type:"Int",required:!0},year:{value:u,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(y.error("Something Went Wrong ..."),{data:null})).then(v=>v);S&&(S.success?(y.success(S.message),t.onFinish()):y.error(S.message))};return s.useEffect(()=>{},[]),e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{fontSize:20},children:"Platform supports Two mode of Default Login Authorizations to Students"}),e.jsxs(tt,{actions:[e.jsx(te,{title:e.jsx(e.Fragment,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Authorize Login?"}),e.jsx("span",{style:{height:10}}),e.jsx("span",{children:e.jsx(V,{value:n||null,placeholder:"Please Choose Year ...",style:{width:220},onChange:h,allowClear:!0,onClear:()=>i(null),dropdownStyle:{zIndex:9999},children:pt})})]})}),onConfirm:()=>d(1,n),onCancel:()=>{},okButtonProps:{disabled:n===null},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{icon:e.jsx(st,{}),children:"Authorize"})})],children:[e.jsxs("span",{style:{fontSize:18},children:["By Using Registration Number of Students as Default ",e.jsx("b",{children:"Username"})," ","and",e.jsx("b",{children:"Password"})]}),e.jsx("span",{style:{display:"block",color:"red"},children:"This action will be applicable only to those students with no Login Access to the Platform"})]}),e.jsxs(tt,{actions:[e.jsx(te,{title:e.jsx(e.Fragment,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Authorize Login?"}),e.jsx("span",{style:{height:10}}),e.jsx("span",{children:e.jsx(V,{value:r||null,placeholder:"Please Choose Year ...",style:{width:220},onChange:c,allowClear:!0,onClear:()=>a(null),dropdownStyle:{zIndex:9999},children:pt})})]})}),onConfirm:()=>d(2,r),onCancel:()=>{},okButtonProps:{disabled:r===null},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{icon:e.jsx(st,{}),children:"Authorize"})})],style:{marginTop:50},children:[e.jsxs("span",{style:{fontSize:18},children:["By Using Email/Phone of Students as Default ",e.jsx("b",{children:"Username"}),", While Default",e.jsx("b",{children:"Password"})," will be Randomly Generated"]}),e.jsx("span",{style:{display:"block",color:"red"},children:"This action will be applicable only to those students with no Login Access to the Platform"})]})]})},{Option:Wa}=V,Cs=[];for(let t=2022;t<new Date().getFullYear()+5;t++)Cs.push(e.jsx(Wa,{children:t.toString()},t.toString()));const Ua=t=>{var ze,Ae,De;const[n,i]=s.useState(),[r,a]=s.useState([]),[h,c]=s.useState(!1),[d,l]=s.useState(!1),[u,S]=s.useState(0),[v,k]=s.useState(20),[A,C]=s.useState(""),[P,M]=s.useState(!0),[F]=o.useForm(),[p]=o.useForm(),[z]=o.useForm(),[b,j]=s.useState(!1),[E,N]=s.useState(new Date().getFullYear()),[R,L]=s.useState(!1),[g,I]=s.useState(!1),[m,x]=s.useState([]),[B,U]=s.useState(!1),O=async q=>{i(q),U(!0)},G=async()=>{I(!0)},X=q=>{i(q),j(!0)},me=async(q,f=!1)=>{f?(a(r.map(J=>J.id===q.id?q:J)),j(!1)):a([q,...r])},ge=async(q,f)=>{yn(q,f).then(J=>{J&&(J.success?(y.success(J.message),a(r.filter(je=>je.id!==q))):y.error(J.message))})},be=async q=>{fn(q).then(f=>{f&&(f.success?(y.success(f.message),a(r.filter(J=>J.id!==q))):y.error(f.message))})},Y=async()=>{ue(1,"",20,E)},D=q=>{q.target.checked&&x(m.concat(parseInt(q.target.value))),q.target.checked||x(m.filter(f=>f!==parseInt(q.target.value)))},se=e.jsx(H,{items:[{key:"1",label:e.jsx(te,{title:"Are you sure to delete All Students?",onConfirm:()=>y("Deleting"),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsxs("a",{children:[e.jsx(de,{color:"red",style:{color:"red"}}),e.jsx("span",{style:{marginLeft:3},children:"Delete All"})]})})},{key:"2",label:e.jsx(te,{title:"Are you sure to delete All Selected Students?",onConfirm:()=>y("Deleting Selected"),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsxs("a",{children:[e.jsx(de,{color:"red",style:{color:"red"}}),e.jsx("span",{style:{marginLeft:3},children:"Delete Selected"})]})})}]}),ee=[{title:e.jsx(e.Fragment,{children:e.jsx(ke,{overlay:se,overlayStyle:{zIndex:9999},children:e.jsx("a",{onClick:q=>q.preventDefault(),children:e.jsxs(ye,{children:["Action(s)",e.jsx(xn,{})]})})})}),dataIndex:"year",fixed:!0,render:(q,f,J)=>e.jsx("span",{children:e.jsx(Me,{onChange:D,value:f.id,defaultChecked:m.filter(je=>je===f.id).length>0})})},{title:"Year",dataIndex:"year",fixed:!0,render:(q,f,J)=>e.jsx("span",{children:f.year})},{title:"Reg#",dataIndex:"registrationNumber",fixed:!0,render:(q,f,J)=>e.jsx("span",{children:e.jsx("a",{children:f.member.registrationNumber})})},{title:"First Name",dataIndex:"firstName",fixed:!0,render:(q,f,J)=>e.jsx("span",{children:f.member.firstName})},{title:"Middle Name",dataIndex:"middleName",fixed:!0,render:(q,f,J)=>e.jsx("span",{children:f.member.middleName})},{title:"Last Name",dataIndex:"lastName",fixed:!0,render:(q,f,J)=>e.jsx("span",{children:f.member.lastName})},{title:"Group",dataIndex:"group",fixed:!0,render:(q,f,J)=>{var je;return e.jsx("span",{children:f.group?(je=f.group)==null?void 0:je.name:"No Group"})}},{title:"Gender",dataIndex:"gender",fixed:!0,render:(q,f,J)=>e.jsx("span",{children:f.member.gender})},{title:"Phone",dataIndex:"phone",fixed:!0,render:(q,f,J)=>e.jsxs(e.Fragment,{children:[f.member.phone&&e.jsx("span",{children:f.member.phone}),!f.member.phone&&e.jsxs(e.Fragment,{children:[e.jsx(ae,{color:"red",children:"No Phone Number"}),e.jsx(w,{title:"View/Add Phone Number",color:"green",children:e.jsx(T,{icon:e.jsx(Ye,{}),onClick:()=>O(f)})})]})]})},{title:"Email",dataIndex:"email",fixed:!0,render:(q,f,J)=>e.jsxs(e.Fragment,{children:[f.member.email&&e.jsx("span",{children:f.member.email}),!f.member.email&&e.jsxs(e.Fragment,{children:[e.jsx(ae,{color:"red",children:"No Email Address"}),e.jsx(w,{title:"View/Add Email Address",color:"green",children:e.jsx(T,{icon:e.jsx(Ye,{}),onClick:()=>O(f)})})]})]})},{title:"Authed",dataIndex:"isAuthed",render:(q,f,J)=>e.jsx("a",{children:f.member.user?e.jsx(e.Fragment,{children:f!=null&&f.member.isAuthed?e.jsx(ae,{color:"green",children:"Authed"}):e.jsx(ae,{color:"red",children:"Not Authed"})}):e.jsx(ae,{color:"red",children:"Not Authed"})})},{title:"Status",dataIndex:"isActive",render:(q,f,J)=>e.jsx("a",{children:f!=null&&f.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(q,f,J)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlayStyle:{zIndex:9999},overlay:e.jsxs(H,{children:[f!=null&&f.isActive?e.jsx(H.Item,{icon:e.jsx(gn,{}),children:e.jsx(w,{title:"Blocking Student",placement:"left",color:"red",children:e.jsx(te,{title:"Are you sure to Block Student ",onConfirm:()=>ge(f==null?void 0:f.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(f!=null&&f.canManage),overlayStyle:{zIndex:9999},children:e.jsx(T,{type:"text",disabled:!(f!=null&&f.canManage),children:"Block"})})})}):e.jsx(H.Item,{icon:e.jsx(Qt,{}),children:e.jsx(w,{title:"Unblocking Student",placement:"left",color:"green",children:e.jsx(te,{title:"Are you sure to Unblock Student ",onConfirm:()=>ge(f==null?void 0:f.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(f!=null&&f.canManage),overlayStyle:{zIndex:9999},children:e.jsx(T,{type:"text",disabled:!(f!=null&&f.canManage),children:"Unblock"})})})}),e.jsx(H.Item,{icon:e.jsx(de,{}),children:e.jsx(w,{title:"Delete Student",placement:"left",children:e.jsx(te,{title:"Are you sure to delete Student ",onConfirm:()=>be(f==null?void 0:f.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(f!=null&&f.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})})}),e.jsx(H.Item,{icon:e.jsx(Pe,{}),disabled:!(f!=null&&f.canEdit),onClick:()=>X(f),children:e.jsx(w,{title:"Edit Student Informations",placement:"left",children:e.jsx("a",{rel:"noopener noreferrer",children:"Edit"})})}),e.jsx(H.Item,{icon:e.jsx(wt,{}),disabled:!(f!=null&&f.canManage),onClick:()=>y("Credentials"),children:e.jsx(w,{title:"Recreate Credentials",placement:"left",children:e.jsx("a",{rel:"noopener noreferrer",children:"Reset Credentials"})})})]}),children:e.jsx("a",{className:"ant-dropdown-link",onClick:je=>je.preventDefault(),children:e.jsx(Ee,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],ue=async(q,f="",J=20,je=new Date().getFullYear())=>{var qe;jn(q,f,J,je,((qe=t.schoolEducationLevel)==null?void 0:qe.id)??0).then(Ie=>{Ie&&(S(Ie.total),a([...Ie.results]))}),M(!1)},Re=async()=>{ue(1,"",20,E),p.resetFields()},Te=async q=>{N(q),z.setFieldsValue({year:q}),ue(1,"",20,q)};return s.useEffect(()=>{z.resetFields(),N(new Date().getFullYear()),ue(1,"",20,E)},[t.randKey,t.schoolEducationLevel]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsxs(K,{span:24,style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:[e.jsx(T,{size:"large",disabled:r.length===0,icon:e.jsx(st,{}),onClick:()=>l(!0),children:"Auth"}),e.jsx(T,{size:"large",icon:e.jsx(ce,{}),onClick:()=>c(!0),children:"Add Student"}),e.jsx(T,{size:"large",icon:e.jsx(jt,{}),onClick:G,children:"From Another School"}),e.jsx(T,{size:"large",icon:e.jsx(jt,{}),onClick:G,children:"Students Migration From"}),e.jsx(T,{size:"large",icon:e.jsx(Jt,{}),onClick:()=>L(!0),children:"Upload Student"})]}),e.jsx(K,{span:2,children:e.jsx(o,{layout:"vertical",form:z,onFinish:q=>{},children:e.jsx(o.Item,{name:"year",children:e.jsx(V,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:E,value:E,onChange:q=>{N(parseInt(q.toString())),ue(1,"",20,parseInt(q.toString()))},dropdownStyle:{zIndex:9999},children:Cs})})})}),e.jsx(K,{span:12,children:e.jsx(o,{layout:"vertical",form:F,onFinish:q=>{C(q.key),r.length=0,ue(1,q.key,v,E)},children:e.jsxs(ne,{children:[e.jsx(K,{span:22,children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(K,{span:2,children:e.jsx(T,{icon:e.jsx(ie,{}),size:"large",onClick:()=>F.submit()})})]})})})]}),r.length===0&&e.jsx(mn,{image:"/images/nodata.png",imageStyle:{height:180},description:e.jsx("span",{style:{fontSize:20},children:"There are not Students Registered, please you can use the registration menues above to Register Students"})}),r.length>0&&e.jsx(he,{loading:P,columns:ee,dataSource:r,pagination:{onChange:(q,f)=>{k(f),ue(q,A,f,E)},total:u,pageSize:v,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0,y:"calc(100vh - 298px)"}}),e.jsx(Se,{title:"Registering a Student for "+((ze=t.schoolEducationLevel)==null?void 0:ze.educationLevel.name),anchor:"right",onClose:q=>c(q),open:h,width:"80vw",children:e.jsx(_t,{editting:!1,randKey:Math.random(),onAdd:me,educationLevel:t.schoolEducationLevel})}),e.jsx(Se,{title:"Edit Student Informations",anchor:"right",onClose:q=>j(q),open:b,width:"70vw",children:e.jsx(_t,{editting:!0,student:n,randKey:Math.random(),onAdd:me,educationLevel:t.schoolEducationLevel})}),e.jsx(re,{title:`Upload Student for ${(Ae=t.schoolEducationLevel)==null?void 0:Ae.educationLevel.name}`,open:R,onClose:q=>L(q),children:e.jsx(Ka,{educationLevel:t.schoolEducationLevel,randKey:Math.random(),onFinish:Re,form:p}),width:"50vw"}),e.jsx(re,{title:"Students Login Authorization",open:d,onClose:q=>l(q),children:e.jsx(Ba,{schoolEducationLevel:t.schoolEducationLevel,onFinish:Y}),width:"50vw"}),e.jsx(re,{title:((De=t.schoolEducationLevel)==null?void 0:De.educationLevel.name)+" Students Migrations",open:g,onClose:q=>I(q),children:e.jsx(_a,{randKey:Math.random(),schoolEducationLevel:t.schoolEducationLevel,onFinish:Te}),width:"50vw"}),e.jsx(re,{title:(n==null?void 0:n.member.firstName)+" "+(n==null?void 0:n.member.middleName)+" "+(n==null?void 0:n.member.lastName)+" Contacts",open:B,onClose:q=>U(q),children:e.jsx(It,{type:"info",description:"Contacts"}),width:"50vw"})]})},Va=t=>{const[n,i]=s.useState([]),[r,a]=s.useState(!0),[h,c]=s.useState(1),[d]=o.useForm(),[l,u]=s.useState(0),[S,v]=s.useState(0),[k,A]=s.useState(!0),[C,P]=s.useState(2);lt();const M=async(p,z)=>{pn(p,z,C).then(b=>{b.success?(y.success(b.message),i(n.filter(j=>j.id.toString()!==p.toString())),t.onAdd(b.schoolEducationLevelSubject)):y.error(b.message)})},F=async(p,z="")=>{a(!0),Sn(p,z,t.schoolEducationLevel.id).then(b=>{b&&(v(b.total),u(b.pages),c(b.page),A(b.hasNext),i([...n,...b.results]))}),a(!1)};return s.useEffect(()=>{n.length=0,i([]),F(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(K,{span:24,children:e.jsx(o,{layout:"vertical",form:d,onFinish:p=>{n.length=0,i([]),F(1,p.key)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search Subject(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(le,{spinning:r,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(ot,{dataLength:S,next:()=>F(h),hasMore:k,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(le,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(oe,{itemLayout:"horizontal",dataSource:n,renderItem:p=>{var z;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(oe.Item,{style:{margin:0,padding:0},actions:[e.jsx(te,{title:e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Are you sure you want to add"," ",e.jsx("b",{children:p.subject.name})," to"," ",e.jsx("b",{children:(z=t.schoolEducationLevel)==null?void 0:z.educationLevel.name}),"?"]}),e.jsx("div",{style:{marginTop:5},children:e.jsx(o,{layout:"vertical",children:e.jsx(o.Item,{label:"Max Number of Periods Per Week",children:e.jsx(Ke,{size:"large",min:1,max:7,defaultValue:2,style:{width:"100%"},onChange:b=>{P(b)}})})})})]}),onConfirm:()=>M(p.id,t.schoolEducationLevel.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{icon:e.jsx(_e,{}),onClick:()=>{}})})],children:e.jsx(oe.Item.Meta,{title:e.jsxs("a",{children:[p.subject.name,e.jsx("span",{style:{marginLeft:10},children:e.jsx(ae,{color:"green",children:p.subject.schoolType.name})})]}),description:e.jsx(e.Fragment,{})})},"subject-"+p.id)})}})})})})]})},Ha=t=>{const[n,i]=s.useState(!1),[r,a]=s.useState([]),[h,c]=s.useState([]),d=async()=>{const{data:u}=await Q.custom({url:"",method:"post",meta:{operation:"createAlternateSubjects",variables:{educationLevelSubjectId:{value:parseInt(t.subject.id),type:"Int",required:!0},choices:{value:h,type:"[Int]",required:!0}},fields:["success","message"]}}).catch(()=>(y.error("Error occured while Creating Alternate subjects"),{data:null})).then(S=>S);u&&(u.success?(y.success(u.message),l(),c([]),t.onFinish()):y.error(u.message))},l=async()=>{const{data:u}=await Q.custom({url:"",method:"get",meta:{operation:"alternateSubjectsChoices",variables:{subjectId:{value:parseInt(t.subject.id),type:"Int",required:!0}},fields:["choices"]}}).catch(()=>(y.error("Error occured while Examinations Types"),{data:null})).then(S=>S);u&&a(u.choices)};return s.useEffect(()=>{l()},[t.randKey]),e.jsx(e.Fragment,{children:e.jsxs(le,{spinning:n,children:[e.jsx(oe,{dataSource:r,renderItem:u=>e.jsx(oe.Item,{children:e.jsx(ne,{children:e.jsxs(K,{span:24,children:[u.disabled&&e.jsx(Me,{disabled:u.disabled,checked:u.disabled,children:e.jsx("span",{style:{marginLeft:5},children:u.name})}),!u.disabled&&e.jsx(Me,{onChange:S=>{S.target.checked?c([...h,u.value]):c(h.filter(v=>v!==u.value))},children:e.jsx("span",{style:{marginLeft:5},children:u.name})})]})})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{size:"large",disabled:h.length===0,onClick:()=>d(),children:"Save"})})]})})},Ja=t=>{const[n,i]=s.useState([]),[r,a]=s.useState(0),[h,c]=s.useState(20),[d,l]=s.useState(""),[u,S]=s.useState(!0),[v]=o.useForm(),A=!fe.useBreakpoint().lg,C=async F=>{var p;Cn(F,parseInt(((p=t.schoolEducationLevelSubject)==null?void 0:p.id.toString())??"0")).then(z=>{z&&(z.success?(y.success(z.message),i(n.filter(b=>b.id!==F)),t.onAdd(z.schoolEducationLevelSubjectTeacher)):y.error(z.message))})},P=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(F,p,z)=>e.jsx("span",{children:e.jsx("a",{children:p.user.fullName})})},{title:"",dataIndex:"action",render:(F,p,z)=>{var b;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(w,{title:"Adding "+((b=t.schoolEducationLevelSubject)==null?void 0:b.schoolSubject.subject.name)+" Teacher",placement:"bottom",children:e.jsx(T,{icon:e.jsx(Xt,{}),onClick:()=>C(p==null?void 0:p.id),children:"Add"})})})}}],M=async(F,p="",z=20)=>{var b;S(!0),bn(F,parseInt(((b=t.schoolEducationLevelSubject)==null?void 0:b.id.toString())??"0"),p,z).then(j=>{j&&(a(j.total),i([...j.results])),S(!1)})};return s.useEffect(()=>{M(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{style:{marginTop:10},children:e.jsx(K,{span:16,children:e.jsx(o,{layout:"vertical",form:v,onFinish:F=>{l(F.key),n.length=0,M(1,F.key)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(he,{loading:u,columns:P,dataSource:n,pagination:{onChange:(F,p)=>{c(p),M(F,d,p)},total:r,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}})]})},Qa=t=>{var j;const[n,i]=s.useState([]),[r,a]=s.useState(!1),[h,c]=s.useState(0),[d,l]=s.useState(20),[u,S]=s.useState(""),[v,k]=s.useState(!0),[A]=o.useForm(),P=!fe.useBreakpoint().lg,M=async E=>{i([E,...n])},F=async E=>{In(E).then(N=>{N&&(N.success?(y.success(N.message),i(n.filter(R=>R.id!==E))):y.error(N.message))})},p=async(E,N)=>{Fn(E,N).then(R=>{R&&(R.success?(y.success(R.message),i(n.map(L=>L.id===E?R.schoolEducationLevelSubjectTeacher:L))):y.error(R.message))})},z=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(E,N,R)=>e.jsx("span",{children:e.jsx("a",{children:N.schoolMember.user.fullName})})},{title:"Date Created",dataIndex:"created",render:(E,N,R)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(N.created)})})})},{title:"Status",dataIndex:"isActive",render:(E,N,R)=>e.jsx("a",{children:N!=null&&N.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(E,N,R)=>{var L,g,I,m,x;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(de,{}),children:e.jsx(te,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Remove "}),e.jsx("span",{style:{fontWeight:"bolder"},children:N.schoolMember.user.fullName}),e.jsx("span",{children:" as "}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:3},children:(L=t.schoolEducationLevelSubject)==null?void 0:L.schoolSubject.subject.name}),e.jsx("span",{style:{marginLeft:3},children:"Teacher"})]}),onConfirm:()=>F(N==null?void 0:N.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(N!=null&&N.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Remove"})})}),N!=null&&N.isActive?e.jsx(H.Item,{icon:e.jsx(Zt,{}),children:e.jsx(te,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Lock "}),e.jsx("span",{style:{fontWeight:"bolder"},children:N.schoolMember.user.fullName}),e.jsx("span",{children:" as "}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:3},children:(g=t.schoolEducationLevelSubject)==null?void 0:g.schoolSubject.subject.name}),e.jsx("span",{style:{marginLeft:3},children:"Teacher"})]}),onConfirm:()=>p(N==null?void 0:N.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(N!=null&&N.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Block"})})}):e.jsx(H.Item,{icon:e.jsx(es,{}),children:e.jsx(te,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Unblock "}),e.jsx("span",{style:{fontWeight:"bolder"},children:N.schoolMember.user.fullName}),e.jsx("span",{children:" as "}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:3},children:(x=(m=(I=t.schoolEducationLevelSubject)==null?void 0:I.schoolSubject)==null?void 0:m.subject)==null?void 0:x.name}),e.jsx("span",{style:{marginLeft:3},children:"Teacher"})]}),onConfirm:()=>p(N==null?void 0:N.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(N!=null&&N.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Unblock"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:B=>B.preventDefault(),children:e.jsx(Ee,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}}],b=async(E,N="",R=20)=>{var L;k(!0),vn(E,N,R,((L=t.schoolEducationLevelSubject)==null?void 0:L.id)??0).then(g=>{g&&(c(g.total),i([...g.results]))}),k(!1)};return s.useEffect(()=>{b(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:16,children:e.jsx(o,{layout:"vertical",form:A,onFinish:E=>{S(E.key),n.length=0,b(1,E.key)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:P?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{size:"large",icon:e.jsx(ce,{}),onClick:()=>a(!0),children:"Add Teacher"})})]}),e.jsx(he,{loading:v,columns:z,dataSource:n,pagination:{onChange:(E,N)=>{l(N),b(E,u,N)},total:h,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}}),e.jsx(re,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{marginRight:3},children:"Adding"}),e.jsx("span",{style:{fontWeight:"bolder"},children:(j=t.schoolEducationLevelSubject)==null?void 0:j.schoolSubject.subject.name}),e.jsx("span",{style:{marginLeft:3},children:"Teachers"})]}),width:"40vw",open:r,onClose:E=>a(E),children:e.jsx(Ja,{schoolEducationLevelSubject:t.schoolEducationLevelSubject,randKey:Math.random(),onAdd:M})})]})},wa=t=>{var O,G,X,me,ge,be;const[n,i]=s.useState(),[r,a]=s.useState([]),[h,c]=s.useState(!1),[d,l]=s.useState(!1),[u,S]=s.useState(0),[v,k]=s.useState(20),[A,C]=s.useState(""),[P,M]=s.useState(!0),[F]=o.useForm(),[p,z]=s.useState(!1),[b,j]=s.useState(0),N=!fe.useBreakpoint().lg,R=async Y=>{i(Y),z(!0)},L=async Y=>{i(Y),l(!0)},g=async Y=>{a([Y,...r])},I=async Y=>{Ln(Y).then(D=>{D.success?(y.success(D.message),a(r.filter(se=>se.id!==Y))):y.error(D.message)})},m=async(Y,D)=>{An(Y,D).then(se=>{se.success?(y.success(se.message),a(r.map(ee=>ee.id===Y?se.schoolEducationLevelSubject:ee))):y.error(se.message)})},x=[{title:"Name",dataIndex:"name",fixed:!0,render:(Y,D,se)=>{var ee;return e.jsxs("span",{children:[D.schoolSubject.subject.name,(D==null?void 0:D.combination)&&e.jsx(ae,{style:{marginLeft:10},color:"red",children:(ee=D==null?void 0:D.combination)==null?void 0:ee.name})]})}},{title:"Subject Type",dataIndex:"subjecttype",fixed:!0,render:(Y,D,se)=>e.jsx("span",{children:D.subjectTypeDisplay})},{title:"Teachers",dataIndex:"teachers",fixed:!0,render:(Y,D,se)=>{var ee;return e.jsx("span",{children:e.jsx(w,{title:((ee=t.schoolEducationLevel)==null?void 0:ee.educationLevel.name)+"  "+D.schoolSubject.subject.name+" Teachers",children:e.jsx("a",{onClick:()=>L(D),children:D.totalTeachers})})})}},{title:"Max Periods/Week",dataIndex:"maxPeriodsPerWeek",render:(Y,D,se)=>e.jsx(e.Fragment,{children:e.jsx(Oe.Popconfirm,{title:"Ajust Max Periods",description:e.jsx(e.Fragment,{children:e.jsx(o,{layout:"vertical",children:e.jsx(o.Item,{label:"Max Number of Periods Per Week "+b,children:e.jsx(Ke,{defaultValue:b,onChange:ee=>j(ee),style:{width:"100%"}})})})}),onConfirm:()=>{kn(D.id,b===0||b===null?D.maxPeriodsPerWeek:b).then(ee=>{ee&&ee.success&&a(r.map(ue=>ue.id===ee.schoolEducationLevelSubject.id?ee.schoolEducationLevelSubject:ue))})},onCancel:()=>{},okButtonProps:{disabled:b===0||b===null},onOpenChange:ee=>{j(ee?D.maxPeriodsPerWeek:0)},okText:"Update",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(ae,{style:{cursor:"pointer"},children:D.maxPeriodsPerWeek})})})},{title:"Date Created",dataIndex:"created",render:(Y,D,se)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(D.created)})})})},{title:"Status",dataIndex:"isActive",render:(Y,D,se)=>e.jsx(e.Fragment,{children:D!=null&&D.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(Y,D,se)=>{var ee;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(de,{}),children:e.jsx(w,{title:"Delete Subject",children:e.jsx(Oe.Popconfirm,{title:"Are you sure to delete this ",onConfirm:()=>I(D==null?void 0:D.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(D!=null&&D.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})})}),e.jsx(H.Item,{icon:e.jsx(Xt,{}),onClick:()=>L(D),children:e.jsx(w,{title:((ee=t.schoolEducationLevel)==null?void 0:ee.educationLevel.name)+"  "+D.schoolSubject.subject.name+" Teachers",children:e.jsx("a",{children:"Teachers"})})}),D!=null&&D.isActive?e.jsx(H.Item,{icon:e.jsx(Zt,{}),children:e.jsx(Oe.Popconfirm,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Block "}),e.jsx("span",{style:{fontWeight:"bolder"},children:D.schoolSubject.subject.name})]}),onConfirm:()=>m(D==null?void 0:D.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(D!=null&&D.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Block"})})}):e.jsx(H.Item,{icon:e.jsx(es,{}),children:e.jsx(Oe.Popconfirm,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Unblock "}),e.jsx("span",{style:{fontWeight:"bolder"},children:D.schoolSubject.subject.name})]}),onConfirm:()=>m(D==null?void 0:D.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(D!=null&&D.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Block"})})}),e.jsx(H.Item,{icon:e.jsx(Mn,{}),onClick:()=>R(D),children:e.jsx(w,{title:"Create Alternate Subjects",children:e.jsx("a",{children:"Create Alternate Subjects"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:ue=>ue.preventDefault(),children:e.jsx(Ee,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}}],B=async(Y,D="",se=20)=>{var ee;En(Y,D,se,parseInt(((ee=t.schoolEducationLevel)==null?void 0:ee.id.toString())??"0")).then(ue=>{S(ue.total),a([...ue.results])}),M(!1)},U=async()=>{B(1,"",20)};return s.useEffect(()=>{B(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:16,children:e.jsx(o,{layout:"vertical",form:F,onFinish:Y=>{C(Y.key),r.length=0,B(1,Y.key)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),["osc","pr"].some(Y=>{var D,se;return Y===((se=(D=t.schoolEducationLevel)==null?void 0:D.educationLevel)==null?void 0:se.schoolType.code.toLowerCase())})&&e.jsx(K,{span:N?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{size:"large",icon:e.jsx(ce,{}),onClick:()=>c(!0),children:"Add Subject"})})]}),e.jsx(he,{loading:P,columns:x,dataSource:r,pagination:{onChange:(Y,D)=>{k(D),B(Y,A,D)},total:u,pageSize:v,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}}),e.jsx(Se,{title:"Adding "+((O=t.schoolEducationLevel)==null?void 0:O.educationLevel.name)+" Subjects",anchor:"right",open:h,onClose:Y=>c(Y),width:"35vw",children:e.jsx(Va,{randKey:Math.random(),onAdd:g,schoolEducationLevel:t.schoolEducationLevel})}),e.jsx(Se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{marginRight:5},children:(X=(G=n==null?void 0:n.schoolSubject)==null?void 0:G.subject)==null?void 0:X.name}),((me=n==null?void 0:n.combination)==null?void 0:me.name)&&e.jsx(ae,{style:{marginLeft:5},color:"red",children:(ge=n==null?void 0:n.combination)==null?void 0:ge.name}),"Teachers"]}),ancho:"right",width:"45vw",onClose:Y=>l(Y),open:d,children:e.jsx(Qa,{schoolEducationLevelSubject:n,randKey:Math.random()})}),e.jsx(re,{title:"Alternate "+((be=n==null?void 0:n.schoolSubject)==null?void 0:be.subject.name)+" Subject Creator",width:"35vw",open:p,onclose:Y=>z(Y),children:e.jsx(Ha,{subject:n,onFinish:U})})]})},Xa=t=>{const[n,i]=s.useState(),[r,a]=s.useState([]),[h,c]=s.useState(!1),[d,l]=s.useState(0),[u,S]=s.useState(20),[v,k]=s.useState(""),[A,C]=s.useState(!0),[P]=o.useForm(),F=!fe.useBreakpoint().lg,[p,z]=s.useState(!1),[b,j]=s.useState(!1),[E,N]=s.useState(!1),[R,L]=s.useState(!1),[g,I]=s.useState(1),m=Y=>{I(Y)},x=Y=>{i(Y),N(!0)},B=Y=>{i(Y),L(!0)},U=Y=>{i(Y),j(!0)},O=Y=>{i(Y),z(!0)},G=async Y=>{a([Y,...r])},X=async Y=>{Pn(Y).then(D=>{D&&(D.success?(y.success(D.message),a(r.filter(se=>se.id!==Y))):y.error(D.message))})},me=async Y=>{Tn(Y,g).then(D=>{D&&(D.success?(y.success(D.message),a(r.map(se=>se.id===Y?D.schoolEducationLevel:se))):y.error(D.message))})},ge=[{title:"Name",dataIndex:"name",fixed:!0,render:(Y,D,se)=>e.jsx("span",{children:e.jsx("a",{children:D.educationLevel.name})})},{title:"School Type",dataIndex:"schoolType",fixed:!0,render:(Y,D,se)=>e.jsx("span",{children:e.jsx(ae,{color:"green",children:D.educationLevel.schoolType.name})})},{title:"Level Index",dataIndex:"levelIndex",fixed:!0,render:(Y,D,se)=>e.jsx("span",{children:e.jsx(te,{disabled:!0,title:e.jsx(e.Fragment,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Update Education Level Index?"}),e.jsx("div",{style:{height:"10px"}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Education Level Index"}),e.jsx("span",{children:e.jsx(Ke,{min:1,max:10,defaultValue:D.levelIndex,onChange:m,style:{width:"100%"}})})]})}),onVisibleChange:ee=>{ee||I(D.levelIndex)},onConfirm:()=>me(D.id),onCancel:()=>{},okText:"Update",cancelText:"No",okButtonProps:{disabled:g<1||g>10},overlayStyle:{zIndex:9999},children:e.jsx("a",{children:e.jsx(ae,{color:"green",children:D.levelIndex})})})})},{title:"Date Created",dataIndex:"created",render:(Y,D,se)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(D.created)})})})},{title:"Status",dataIndex:"isActive",render:(Y,D,se)=>e.jsx("a",{children:D!=null&&D.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(Y,D,se)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(de,{}),children:e.jsx(te,{title:"Are you sure to delete this task?",onConfirm:()=>X(D.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!D.canDelete,overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})}),["osc","pr"].some(ee=>ee===D.educationLevel.schoolType.code.toLowerCase())&&e.jsx(H.Item,{icon:e.jsx(we,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>O(D),children:"Groups"})}),["asc"].some(ee=>ee===D.educationLevel.schoolType.code)&&e.jsx(H.Item,{icon:e.jsx(we,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>U(D),children:"Combinations"})}),e.jsx(H.Item,{icon:e.jsx(we,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>B(D),children:"Students"})}),["osc","pr"].some(ee=>ee===D.educationLevel.schoolType.code.toLowerCase())&&e.jsx(H.Item,{icon:e.jsx(de,{}),onClick:()=>x(D),children:e.jsx("a",{children:"Subjects"})}),["asc"].some(ee=>ee===D.educationLevel.schoolType.code.toLowerCase())&&e.jsx(H.Item,{icon:e.jsx(de,{}),onClick:()=>x(D),children:e.jsx("a",{children:"Subjects"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:ee=>ee.preventDefault(),children:e.jsx(Ee,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],be=async(Y,D="",se=20)=>{C(!0),Nn(Y,D,se).then(ee=>{ee&&(l(ee.total),a([...ee.results]))}),C(!1)};return s.useEffect(()=>{be(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:F?24:20,children:e.jsx(o,{layout:"vertical",form:P,onFinish:Y=>{k(Y.key),r.length=0,be(1,Y.key,u)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:F?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{icon:e.jsx(ce,{}),size:"large",onClick:()=>c(!0),children:"Add Education Level"})})]}),e.jsx(he,{loading:A,columns:ge,dataSource:r,pagination:{onChange:(Y,D)=>{S(D),be(Y,v,D)},total:d,pageSize:u,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:"Adding Education levels",onClose:Y=>c(Y),open:h,anchor:"right",width:"30vw",children:e.jsx(Na,{randKey:Math.random(),onAdd:G})}),e.jsx(re,{title:"Education Level Groups",open:p,onClose:Y=>z(Y),width:"50vw",children:e.jsx(qa,{schoolEducationLevel:n,height:55})}),e.jsx(re,{title:"Education Combinations",open:b,onClose:Y=>j(Y),width:"50vw",children:e.jsx(Ta,{schoolEducationLevel:n,height:55})}),e.jsx(Se,{title:`${n==null?void 0:n.educationLevel.name} Students`,open:R,anchor:"right",width:"90vw",onClose:Y=>L(Y),children:e.jsx(Ua,{schoolEducationLevel:n,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.educationLevel.name)+" Subjects",open:E,width:"70vw",onClose:Y=>N(Y),children:e.jsx(wa,{schoolEducationLevel:n,height:55,randKey:Math.random()})})]})},Za=()=>(s.useEffect(()=>{document.title=xe.system_name+": Education Levels"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(pe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Education Levels"})]}),e.jsx(Xa,{})]})),{TextArea:ei}=$,{Option:$t}=V,ti=t=>{const[n,i]=s.useState(!0),[r,a]=s.useState(!0),[h,c]=s.useState([]),[d,l]=s.useState([]),u=async(v,k="")=>{i(!0);const{data:A}=await Q.custom({url:"",method:"get",meta:{operation:"schoolDepartments",variables:{page:{value:v,type:"Int",required:!0},key:{value:k,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:ts}]}}).catch(()=>(y.error("Error occured while fetching departments"),{data:null})).then(C=>C);A&&c([...A.results]),i(!1)},S=async(v,k="")=>{a(!0);const{data:A}=await Q.custom({url:"",method:"get",meta:{operation:"systemProgrammes",variables:{page:{value:v,type:"Int",required:!0},key:{value:k,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:ss}]}}).catch(()=>(y.error("Error occured while fetching programmes"),{data:null})).then(C=>C);A&&l([...A.results]),a(!1)};return s.useEffect(()=>{u(1),S(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:n,children:e.jsxs(o,{layout:"vertical",form:t.form,onFinish:v=>{t.onFinish(v)},requiredMark:!0,children:[e.jsx(o.Item,{name:"department_id",label:"Department",rules:[{required:!0,type:"string",message:"Please choose Department..."}],children:e.jsx(V,{showSearch:!0,placeholder:"Select a Department",optionFilterProp:"children",onChange:v=>{},onSearch:v=>{},filterOption:(v,k)=>k.children.toLowerCase().includes(v.toLowerCase()),dropdownStyle:{zIndex:9999},children:h.map((v,k)=>e.jsx($t,{value:v.id,children:v.name}))})}),e.jsx(o.Item,{name:"programme_id",label:"Programme",rules:[{required:!0,type:"string",message:"Please choose Programme..."}],children:e.jsx(V,{showSearch:!0,placeholder:"Select a Programme",optionFilterProp:"children",onChange:v=>{},onSearch:v=>{},filterOption:(v,k)=>k.children.toLowerCase().includes(v.toLowerCase()),dropdownStyle:{zIndex:9999},children:d.map((v,k)=>e.jsx($t,{value:v.id,children:v.name}))})}),e.jsx(o.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(ei,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:si}=$,{Option:Kt}=V,ni=t=>{const[n,i]=s.useState(t.course.isActive),[r,a]=s.useState(!0),[h,c]=s.useState([]),[d,l]=s.useState([]),u=async(v,k="")=>{a(!0);const{data:A}=await Q.custom({url:"",method:"get",meta:{operation:"schoolDepartments",variables:{page:{value:v,type:"Int",required:!0},key:{value:k,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:ts}]}}).catch(()=>(y.error("Error occured while fetching departments"),{data:null})).then(C=>C);A&&c([...A.results]),a(!1)},S=async(v,k="")=>{const{data:A}=await Q.custom({url:"",method:"get",meta:{operation:"systemProgrammes",variables:{page:{value:v,type:"Int",required:!0},key:{value:k,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:ss}]}}).catch(()=>(y.error("Error occured while fetching programmes"),{data:null})).then(C=>C);A&&l([...A.results])};return s.useEffect(()=>{u(1),S(1),t.form.setFieldsValue({department_id:t.course.department.id,programme_id:t.course.programme.id,name:t.course.name,description:t.course.description,is_active:t.course.isActive})},[t.form,t.course,t.randKey]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:r,children:e.jsxs(o,{layout:"vertical",form:t.form,onFinish:v=>{v.is_active=n,v.id=parseInt(t.course.id),t.onFinish(v)},requiredMark:!0,children:[e.jsx(o.Item,{name:"department_id",label:"Department",rules:[{required:!0,type:"string",message:"Please choose Department..."}],children:e.jsx(V,{showSearch:!0,placeholder:"Select a Department",optionFilterProp:"children",onChange:v=>{},onSearch:v=>{},filterOption:(v,k)=>k.children.toLowerCase().includes(v.toLowerCase()),dropdownStyle:{zIndex:9999},children:h.map((v,k)=>e.jsx(Kt,{value:v.id,children:v.name}))})}),e.jsx(o.Item,{name:"programme_id",label:"Programme",rules:[{required:!0,type:"string",message:"Please choose Programme..."}],children:e.jsx(V,{showSearch:!0,placeholder:"Select a Programme",optionFilterProp:"children",onChange:v=>{},onSearch:v=>{},filterOption:(v,k)=>k.children.toLowerCase().includes(v.toLowerCase()),dropdownStyle:{zIndex:9999},children:d.map((v,k)=>e.jsx(Kt,{value:v.id,children:v.name}))})}),e.jsx(o.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(si,{rows:4,maxLength:6})}),e.jsx(o.Item,{name:"is_active",children:e.jsx(Me,{checked:n,onChange:()=>i(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},ri=t=>{const[n,i]=s.useState(),[r,a]=s.useState([]),[h,c]=s.useState(20),[d,l]=s.useState(""),[u,S]=s.useState(0),[v,k]=s.useState(!0),[A]=o.useForm(),[C]=o.useForm(),[P]=o.useForm(),F=!fe.useBreakpoint().lg,[p,z]=s.useState(!1),[b,j]=s.useState(!1),E=m=>{i(m),j(!0)},N=async m=>{zn(m).then(x=>{x&&(x.success?(y.success(x.message),C.resetFields(),z(!1),a([x.course,...r])):y.error(x.message))})},R=async m=>{Dn(m).then(x=>{x&&(x.success?(y.success(x.message),P.resetFields(),j(!1),a(r.map(B=>parseInt(B.id.toString())===parseInt(m.id.toString())?x.course:B))):y.error(x.message))})},L=async m=>{Rn(m).then(x=>{x&&(x.success?(y.success(x.message),a(r.filter(B=>B.id!==m))):y.error(x.message))})},g=async(m,x="",B=20)=>{k(!0),qn(m,x,B).then(U=>{U&&(S(U.total),a([...U.results]))}),k(!1)};s.useEffect(()=>{g(1,"",20)},[]);const I=[{title:"Name",dataIndex:"name",fixed:!0,render:(m,x,B)=>e.jsx("span",{children:e.jsx("a",{children:x.name})})},{title:"Programme",dataIndex:"programme",fixed:!0,render:(m,x,B)=>e.jsx("span",{children:x.programme.name})},{title:"Department",dataIndex:"department",fixed:!0,render:(m,x,B)=>e.jsx("span",{children:x.department.name})},{title:"Created",dataIndex:"created",render:(m,x,B)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(x.created)})})})},{title:"Status",dataIndex:"isActive",render:(m,x,B)=>e.jsx("a",{children:x!=null&&x.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(m,x,B)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(te,{title:"Are you sure to delete this Faculty?",onConfirm:()=>L(x==null?void 0:x.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(x!=null&&x.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(T,{icon:e.jsx(de,{}),disabled:!(x!=null&&x.canDelete)})}),e.jsx(w,{title:"Edit "+(x==null?void 0:x.name)+" Faculty",color:"green",children:e.jsx(T,{icon:e.jsx(Pe,{}),disabled:!(x!=null&&x.canEdit),onClick:()=>E(x)})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:F?24:20,children:e.jsx(o,{layout:"vertical",form:A,onFinish:m=>{l(m.key),r.length=0,g(1,m.key)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:F?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(w,{title:"Add New Course",children:e.jsx(T,{icon:e.jsx(ce,{}),size:"large",onClick:()=>z(!0),children:"Add Course"})})})]}),e.jsx(he,{loading:v,columns:I,dataSource:r,pagination:{onChange:(m,x)=>{c(x),g(m,d,x)},total:u,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{open:p,onClose:m=>z(m),width:"30vw",title:"Adding Course",children:e.jsx(ti,{form:C,onFinish:N,randKey:Math.random()})}),e.jsx(re,{open:b,onClose:m=>j(m),width:"30vw",title:"Edit Course",children:e.jsx(ni,{course:n,onFinish:R,form:P,randKey:Math.random()})})]})},ai=()=>(s.useEffect(()=>{document.title=xe.system_name+": Courses"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(pe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Courses"})]}),e.jsx(ri,{height:80,control:!1})]})),{TextArea:ii}=$,{Option:li}=V,oi=t=>{const[n,i]=s.useState(!1),[r,a]=s.useState(!0),[h,c]=s.useState([]),d=async u=>{i(!0),On(u).then(S=>{i(!1),S&&(S.success?(y.success(S.message),t.form.resetFields(),t.onFinish(S.department)):y.error(S.message))})},l=async(u,S="")=>{a(!0);const{data:v}=await Q.custom({url:"",method:"get",meta:{operation:"schoolFaculties",variables:{page:{value:u,type:"Int",required:!0},key:{value:S,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:ns}]}}).catch(()=>(y.error("Error occured while fetching faculties"),{data:null})).then(k=>k);v&&c([...v.results]),a(!1)};return s.useEffect(()=>{l(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:r,children:e.jsxs(o,{layout:"vertical",form:t.form,onFinish:u=>{d(u)},requiredMark:!0,children:[e.jsx(o.Item,{name:"faculty_id",label:"Faculty",rules:[{required:!0,type:"string",message:"Please choose Faculty..."}],children:e.jsx(V,{showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,S)=>S.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:h.map((u,S)=>e.jsx(li,{value:u.id,children:u.name}))})}),e.jsx(o.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(ii,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Save"})})]})})})},{TextArea:ci}=$,{Option:di}=V,ui=t=>{const[n,i]=s.useState(t.department.isActive),[r,a]=s.useState(!0),[h,c]=s.useState([]),d=async(l,u="")=>{a(!0);const{data:S}=await Q.custom({url:"",method:"get",meta:{operation:"schoolFaculties",variables:{page:{value:l,type:"Int",required:!0},key:{value:u,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:ns}]}}).catch(()=>(y.error("Error occured while fetching faculties"),{data:null})).then(v=>v);S&&c([...S.results]),a(!1)};return s.useEffect(()=>{d(1),t.form.setFieldsValue({faculty_id:t.department.faculty.id,name:t.department.name,description:t.department.description,is_active:t.department.isActive})},[t.form,t.department,t.randKey]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:r,children:e.jsxs(o,{layout:"vertical",form:t.form,onFinish:l=>{l.is_active=n,l.id=parseInt(t.department.id),t.onFinish(l)},requiredMark:!0,children:[e.jsx(o.Item,{name:"faculty_id",label:"Faculty",rules:[{required:!0,type:"string",message:"Please choose Faculty..."}],children:e.jsx(V,{showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onChange:l=>{},onSearch:l=>{},filterOption:(l,u)=>u.children.toLowerCase().includes(l.toLowerCase()),dropdownStyle:{zIndex:9999},children:h.map((l,u)=>e.jsx(di,{value:l.id,children:l.name}))})}),e.jsx(o.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(ci,{rows:4,maxLength:6})}),e.jsx(o.Item,{name:"is_active",children:e.jsx(Me,{checked:n,onChange:()=>i(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},hi=t=>{const[n,i]=s.useState(),[r,a]=s.useState([]),[h,c]=s.useState(0),[d,l]=s.useState(20),[u,S]=s.useState(""),[v,k]=s.useState(!0),[A]=o.useForm(),[C]=o.useForm(),[P]=o.useForm(),F=!fe.useBreakpoint().lg,[p,z]=s.useState(!1),[b,j]=s.useState(!1),E=m=>{i(m),j(!0)},N=async m=>{Gn(m).then(x=>{x&&(x.success?(y.success(x.message),P.resetFields(),j(!1),a(r.map(B=>parseInt(B.id.toString())===parseInt(m.id.toString())?x.department:B))):y.error(x.message))})},R=async m=>{_n(m).then(x=>{x&&(x.success?(y.success(x.message),a(r.filter(B=>B.id!==m))):y.error(x.message))})},L=()=>{y("Canceled")},g=async(m,x="",B=20)=>{k(!0),Yn(m,x,B).then(U=>{U&&(c(U.total),a([...U.results]))}),k(!1)};s.useEffect(()=>{g(1,"",20)},[]);const I=[{title:"Name",dataIndex:"name",fixed:!0,render:(m,x,B)=>e.jsx("span",{children:e.jsx("a",{children:x.name})})},{title:"Faculty",dataIndex:"faculty",fixed:!0,render:(m,x,B)=>e.jsx("span",{children:x.faculty.name})},{title:"Created",dataIndex:"created",render:(m,x,B)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(x.created)})})})},{title:"Status",dataIndex:"isActive",render:(m,x,B)=>e.jsx("a",{children:x!=null&&x.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(m,x,B)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(te,{title:"Are you sure to delete this Faculty?",onConfirm:()=>R(x==null?void 0:x.id),onCancel:()=>L,okText:"Yes",cancelText:"No",disabled:!(x!=null&&x.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(T,{icon:e.jsx(de,{}),disabled:!(x!=null&&x.canDelete)})}),e.jsx(w,{title:"Edit "+(x==null?void 0:x.name)+" Faculty",color:"green",children:e.jsx(T,{icon:e.jsx(Pe,{}),disabled:!(x!=null&&x.canEdit),onClick:()=>E(x)})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:F?24:20,children:e.jsx(o,{layout:"vertical",form:A,onFinish:m=>{S(m.key),r.length=0,g(1,m.key)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:F?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(w,{title:"Add New Department",children:e.jsx(T,{icon:e.jsx(ce,{}),size:"large",onClick:()=>z(!0),children:"Add Department"})})})]}),e.jsx(he,{loading:v,columns:I,dataSource:r,pagination:{onChange:(m,x)=>{l(x),g(m,u,x)},total:h,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{open:p,onClose:m=>z(m),title:"Adding Department",width:"30vw",children:e.jsx(oi,{form:C,onFinish:m=>{a([m,...r]),z(!1)},randKey:Math.random()})}),e.jsx(re,{open:b,onClose:m=>j(m),title:"Edit Department",width:"30vw",children:e.jsx(ui,{department:n,form:P,onFinish:N,randKey:Math.random()})})]})},mi=()=>(s.useEffect(()=>{document.title=xe.system_name+": Departments"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(pe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Departments"})]}),e.jsx(hi,{height:77})]})),xi=()=>(s.useEffect(()=>{document.title=xe.system_name+": Examinations"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(pe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Examinations"})]}),e.jsx(Br,{})]})),{TextArea:gi}=$,ji=t=>{const[n,i]=s.useState(!1),r=async a=>{i(!0),$n(a).then(h=>{h&&(h.success?(y.success(h.message),t==null||t.form.resetFields(),t==null||t.onFinish(h.faculty)):y.error(h.message))}),i(!1)};return e.jsx(e.Fragment,{children:e.jsxs(o,{layout:"vertical",form:t.form,onFinish:a=>{r(a)},requiredMark:!0,children:[e.jsx(o.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(gi,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Save"})})]})})},{TextArea:yi}=$,fi=t=>{const[n,i]=s.useState(!1),[r,a]=s.useState(t.faculty.isActive),h=async c=>{i(!0),Kn(c).then(d=>{d&&(i(!1),d.success?(y.success(d.message),t.form.resetFields(),t.onFinish(d.faculty)):y.error(d.message))})};return s.useEffect(()=>{t.form.setFieldsValue({name:t.faculty.name,description:t.faculty.description,is_active:t.faculty.isActive})},[t.form,t.faculty]),e.jsx(e.Fragment,{children:e.jsxs(o,{layout:"vertical",form:t.form,onFinish:c=>{c.is_active=r,c.id=parseInt(t.faculty.id),h(c)},requiredMark:!0,children:[e.jsx(o.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(yi,{rows:4,maxLength:6})}),e.jsx(o.Item,{name:"is_active",children:e.jsx(Me,{checked:r,onChange:()=>a(!r),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Save"})})]})})},pi=t=>{const[n,i]=s.useState(),[r,a]=s.useState([]),[h,c]=s.useState(20),[d,l]=s.useState(""),[u,S]=s.useState(0),[v,k]=s.useState(!0),[A]=o.useForm(),[C]=o.useForm(),[P]=o.useForm(),F=!fe.useBreakpoint().lg,[p,z]=s.useState(!1),[b,j]=s.useState(!1),E=I=>{i(I),j(!0)},N=async I=>{Wn(I).then(m=>{m&&(m.success?(y.success(m.message),a(r.filter(x=>x.id!==I))):y.error(m.message))})},R=()=>{y("Canceled")},L=async(I,m="",x=20)=>{k(!0),Bn(I,m,x).then(B=>{B&&(S(B.total),a([...B.results]))}),k(!1)};s.useEffect(()=>{L(1,"",20)},[]);const g=[{title:"Name",dataIndex:"name",fixed:!0,render:(I,m,x)=>e.jsx("span",{children:e.jsx("a",{children:m.name})})},{title:"Created",dataIndex:"created",render:(I,m,x)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(m.created)})})})},{title:"Status",dataIndex:"isActive",render:(I,m,x)=>e.jsx("a",{children:m!=null&&m.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(I,m,x)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(te,{title:"Are you sure to delete this Faculty?",onConfirm:()=>N(m==null?void 0:m.id),onCancel:()=>R,okText:"Yes",cancelText:"No",disabled:!(m!=null&&m.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(T,{icon:e.jsx(de,{}),disabled:!(m!=null&&m.canDelete)})}),e.jsx(w,{title:"Edit "+(m==null?void 0:m.name)+" Faculty",color:"green",children:e.jsx(T,{icon:e.jsx(Pe,{}),disabled:!(m!=null&&m.canEdit),onClick:()=>E(m)})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:F?24:20,children:e.jsx(o,{layout:"vertical",form:A,onFinish:I=>{l(I.key),r.length=0,L(1,I.key)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:F?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(w,{title:"Add New Faculty",children:e.jsx(T,{icon:e.jsx(ce,{}),size:"large",onClick:()=>z(!0),children:"Add Faculty"})})})]}),e.jsx(he,{loading:v,columns:g,dataSource:r,pagination:{onChange:(I,m)=>{c(m),L(I,d,m)},total:u,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{open:p,onClose:I=>z(I),width:"30vw",title:"Adding Faculty",children:e.jsx(ji,{form:C,onFinish:I=>{a([I,...r]),z(!1)}})}),e.jsx(re,{open:b,onClose:I=>j(I),width:"30vw",title:"Edit Faculty",children:e.jsx(fi,{faculty:n,form:P,onFinish:I=>{a(r.map(m=>parseInt(m.id.toString())===parseInt(I.id.toString())?I:m)),j(!1)}})})]})},Si=()=>(s.useEffect(()=>{document.title=xe.system_name+": Faculties"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(pe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Faculties"})]}),e.jsx(pi,{height:77})]})),{TextArea:bi}=$,Ci=t=>{const[n,i]=s.useState(!1),r=async a=>{const{data:h}=await Q.custom({url:"",method:"post",meta:{operation:"createSchoolFee",variables:{name:{value:a.name,type:"String",required:!0},description:{value:a.description,type:"String",required:!1}},fields:["success","message",{schoolFee:rs}]}}).catch(()=>(y.error("Something Went Wrong ..."),{data:null})).then(c=>c);h&&(h.success?(y.success(h.message),t.onFinish(h.schoolFee)):y.error(h.message))};return s.useEffect(()=>{},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:n,children:e.jsxs(o,{layout:"vertical",form:t.form,onFinish:a=>{r(a)},requiredMark:!0,children:[e.jsx(o.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(bi,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:vi}=$,Ii=t=>{var a,h;const[n,i]=s.useState(!1),r=async c=>{var l;const{data:d}=await Q.custom({url:"",method:"post",meta:{operation:"updateSchoolFee",variables:{schoolFeeId:{value:(l=t.schoolFee)==null?void 0:l.id,type:"Int",required:!0},name:{value:c.name,type:"String",required:!0},description:{value:c.description,type:"String",required:!1}},fields:["success","message",{schoolFee:rs}]}}).catch(()=>(y.error("Something Went Wrong ..."),{data:null})).then(u=>u);d&&(d.success?(y.success(d.message),t.onFinish(d.schoolFee)):y.error(d.message)),i(!1)};return s.useEffect(()=>{var c,d;t.form.setFieldsValue({name:(c=t.schoolFee)==null?void 0:c.name,description:(d=t.schoolFee)==null?void 0:d.description})},[t.form,t.randKey,(a=t.schoolFee)==null?void 0:a.description,(h=t.schoolFee)==null?void 0:h.name]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:n,children:e.jsxs(o,{layout:"vertical",form:t.form,onFinish:c=>{r(c)},requiredMark:!0,children:[e.jsx(o.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(vi,{rows:4,maxLength:6})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},Fi=()=>{const[t,n]=s.useState(),[i,r]=s.useState([]),[a,h]=s.useState(!1),[c,d]=s.useState(0),[l,u]=s.useState(20),[S,v]=s.useState(""),[k,A]=s.useState(!0),[C]=o.useForm(),[P]=o.useForm(),[M]=o.useForm(),p=!fe.useBreakpoint().lg,{push:z}=lt(),[b,j]=s.useState(!1),E=m=>{j(!0),n(m)},N=[{title:"Name",dataIndex:"name",fixed:!0,render:(m,x)=>e.jsx("span",{children:e.jsx("a",{onClick:()=>z("/schoolmanager/school/fees/"+x.id+"/education/levels/"),children:x.name})})},{title:"Date Created",dataIndex:"created",render:(m,x)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(x.created)})})})},{title:"Status",dataIndex:"isActive",render:(m,x)=>e.jsx("a",{children:x!=null&&x.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(m,x)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(we,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>z("/schoolmanager/school/fees/"+x.id+"/education/levels/"),children:"Education Levels Fees"})}),e.jsx(H.Item,{icon:e.jsx(de,{}),children:e.jsx(te,{title:"Are you sure to delete this School Fee?",disabled:!(x!=null&&x.canDelete),onConfirm:()=>R(x.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(H.Item,{icon:e.jsx(Pe,{}),disabled:!x.canEdit,onClick:()=>E(x),children:e.jsx("a",{rel:"noopener noreferrer",children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:B=>B.preventDefault(),children:e.jsx(Ee,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],R=async m=>{Un(m).then(x=>{x&&(x.success?(y.success(x.message),r(i.filter(B=>B.id!==m))):y.error(x.message))})},L=async(m,x="",B=20)=>{A(!0),Vn(m,x,B).then(U=>{U&&(d(U.total),r([...U.results]))}),A(!1)},g=async m=>{r(i.map(x=>x.id===(t==null?void 0:t.id)?m:x)),M.resetFields(),j(!1)},I=async m=>{r([m,...i]),P.resetFields(),h(!1)};return s.useEffect(()=>{L(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:p?24:20,children:e.jsx(o,{layout:"vertical",form:C,onFinish:m=>{v(m.key),i.length=0,L(1,m.key,l)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:p?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{icon:e.jsx(ce,{}),size:"large",onClick:()=>h(!0),children:"Create Fee"})})]}),e.jsx(he,{loading:k,columns:N,dataSource:i,pagination:{onChange:(m,x)=>{u(x),L(m,S,x)},total:c,pageSize:l,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Creating School Fee",open:a,width:"40vw",onClose:m=>h(m),children:e.jsx(Ci,{form:P,onFinish:I})}),e.jsx(re,{title:"Editting "+(t==null?void 0:t.name),width:"40vw",open:b,onClose:m=>j(m),children:e.jsx(Ii,{form:M,schoolFee:t,randKey:Math.random(),onFinish:g})})]})},ki=()=>(s.useEffect(()=>{document.title=xe.system_name+": School Fees"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(pe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"School Fees"})]}),e.jsx(Fi,{})]})),{Option:Mi}=V,vs=[];for(let t=2022;t<new Date().getFullYear()+5;t++)vs.push(e.jsx(Mi,{children:t.toString()},t));const Ei=t=>{const[n,i]=s.useState([]),[r,a]=s.useState(0),[h,c]=s.useState(20),[d,l]=s.useState(""),[u,S]=s.useState(!0),[v]=o.useForm(),A=!fe.useBreakpoint().lg,[C,P]=s.useState(new Date().getFullYear()),[M,F]=s.useState(0),p=N=>{P(N)},z=N=>{F(N)},b=[{title:"Name",dataIndex:"name",fixed:!0,render:(N,R,L)=>e.jsx("span",{children:e.jsx("a",{children:R.educationLevel.name})})},{title:"",dataIndex:"action",render:(N,R,L)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(te,{arrowPointAtCenter:!1,title:e.jsx(e.Fragment,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsxs("span",{children:["Are you sure to Add ",R.educationLevel.name,' ?"']}),e.jsx("div",{style:{height:15}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Fee Amount"}),e.jsx("span",{children:e.jsx(Ke,{size:"large",min:0,defaultValue:0,value:M,onChange:z,style:{width:"100%"}})}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Academic Year"}),e.jsx("span",{children:e.jsx(V,{size:"large",value:C?parseInt(C.toString()):new Date().getFullYear(),placeholder:"Please Choose Year ...",style:{width:"100%"},onChange:p,dropdownStyle:{zIndex:9999},children:vs})})]})}),onConfirm:()=>j(R.id),onCancel:()=>{},onVisibleChange:g=>{g&&(P(new Date().getFullYear()),F(0))},okText:"Yes",cancelText:"No",okButtonProps:{disabled:M<=0},overlayStyle:{zIndex:9999},children:e.jsx(T,{icon:e.jsx(ce,{}),children:"Add"})})})}],j=async N=>{var R;Hn(N,C,M,((R=t.fee)==null?void 0:R.id)??0).then(L=>{L&&(L.success?(y.success(L.message),i(n.filter(g=>g.id!==N)),t.onFinish(L.schoolEducationLevelFee)):y.error(L.message))})},E=async(N,R="",L=20)=>{var g;S(!0),Jn(N,R,L,((g=t.fee)==null?void 0:g.id)??0).then(I=>{I&&(a(I.total),i([...I.results]))}),S(!1)};return s.useEffect(()=>{E(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{style:{marginTop:10},children:e.jsx(K,{span:A?24:20,children:e.jsx(o,{layout:"vertical",form:v,onFinish:N=>{l(N.key),n.length=0,E(1,N.key,h)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(he,{loading:u,columns:b,dataSource:n,pagination:{onChange:(N,R)=>{c(R),E(N,d,R)},total:r,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})]})},Li=t=>{var a,h;const[n,i]=s.useState(!1),r=async c=>{var l;const{data:d}=await Q.custom({url:"",method:"post",meta:{operation:"updateSchoolEducationLevelFee",variables:{schoolEducationLevelFeeId:{value:(l=t.schoolEducationLevelFee)==null?void 0:l.id,type:"Int",required:!0},amount:{value:c.amount,type:"Float",required:!0},vatIncluded:{value:c.vatIncluded,type:"Boolean",required:!0}},fields:["success","message",{schoolEducationLevelFee:Qn}]}}).catch(()=>(y.error("Something Went Wrong ..."),{data:null})).then(u=>u);d&&(d.success?(y.success(d.message),t.onFinish(d.schoolEducationLevelFee)):y.error(d.message)),i(!1)};return s.useEffect(()=>{var c,d;t.form.setFieldsValue({amount:(c=t.schoolEducationLevelFee)==null?void 0:c.amount,vatIncluded:(d=t.schoolEducationLevelFee)==null?void 0:d.vatIncluded})},[t.form,t.randKey,(a=t.schoolEducationLevelFee)==null?void 0:a.amount,(h=t.schoolEducationLevelFee)==null?void 0:h.vatIncluded]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:n,children:e.jsxs(o,{layout:"vertical",form:t.form,onFinish:c=>{r(c)},requiredMark:!0,children:[e.jsx(o.Item,{name:"amount",label:"Amount",rules:[{required:!0,type:"number",min:0,message:"Please input Fee Amount"}],children:e.jsx(Ke,{min:0,defaultValue:0,style:{width:"100%"}})}),e.jsx(o.Item,{name:"vatIncluded",valuePropName:"checked",initialValue:!0,rules:[{required:!0,type:"boolean",message:"Please check"}],children:e.jsx(Me,{children:"VAT Included"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},Ai=t=>{var x,B;const[n,i]=s.useState(),[r,a]=s.useState([]),[h,c]=s.useState(!1),[d,l]=s.useState(0),[u,S]=s.useState(20),[v,k]=s.useState(""),[A,C]=s.useState(!0),[P]=o.useForm(),[M]=o.useForm(),[F]=o.useForm(),[p,z]=s.useState(!1),j=!fe.useBreakpoint().lg,E=Ve(),N=async U=>{i(U),z(!0)},R=[{title:"Education Level",dataIndex:"educationLevel",fixed:!0,render:(U,O)=>{var G,X;return e.jsx("span",{children:e.jsx("a",{children:(X=(G=O.schoolEducationLevel)==null?void 0:G.educationLevel)==null?void 0:X.name})})}},{title:"Year",dataIndex:"year",fixed:!0,render:(U,O)=>e.jsx("span",{children:O.year})},{title:"Amount",dataIndex:"amount",fixed:!0,render:(U,O)=>e.jsx("span",{children:parseFloat(O.amount).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")})},{title:"VAT Included",dataIndex:"vatIncluded",fixed:!0,render:(U,O)=>e.jsx("span",{children:O.vatIncluded?"Yes":"No"})},{title:"Date Created",dataIndex:"created",render:(U,O)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(O.created)})})})},{title:"Status",dataIndex:"isActive",render:(U,O)=>e.jsx("a",{children:O!=null&&O.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(U,O)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(de,{}),children:e.jsx(te,{title:"Are you sure to delete this School Fee?",disabled:!(O!=null&&O.canDelete),onConfirm:()=>L(O.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(H.Item,{icon:e.jsx(Pe,{}),disabled:!O.canEdit,onClick:()=>N(O),children:e.jsx("a",{rel:"noopener noreferrer",children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:G=>G.preventDefault(),children:e.jsx(Ee,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],L=async U=>{wn(U).then(O=>{O&&(O.success?(y.success(O.message),a(r.filter(G=>G.id!==U))):y.error(O.message))})},g=async(U,O="",G=20)=>{C(!0),Xn(U,O,G,E.schoolFeeId).then(X=>{X&&(l(X.total),a([...X.results]))}),C(!1)},I=async U=>{a(r.map(O=>O.id===(n==null?void 0:n.id)?U:O)),M.resetFields(),z(!1)},m=async U=>{a([U,...r]),F.resetFields(),c(!1)};return s.useEffect(()=>{g(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:j?24:12,children:e.jsx(o,{layout:"vertical",form:P,onFinish:U=>{k(U.key),r.length=0,g(1,U.key,u)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:j?24:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{icon:e.jsx(ce,{}),size:"large",disabled:!t.canAdd,onClick:()=>c(!0),children:"Add Education Level Fee"})})]}),e.jsx(he,{loading:A,columns:R,dataSource:r,pagination:{onChange:(U,O)=>{S(O),g(U,v,O)},total:d,pageSize:u,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Adding"}),e.jsx("span",{style:{marginLeft:5,color:"green"},children:(x=t.fee)==null?void 0:x.name}),e.jsx("span",{style:{marginLeft:5},children:"Education Levels Fees"})]}),width:"30vw",anchor:"right",onClose:()=>c(!1),open:h,children:e.jsx(Ei,{fee:t.fee,randKey:Math.random(),onFinish:m})}),e.jsx(re,{title:((B=t.fee)==null?void 0:B.name)+" "+(n==null?void 0:n.schoolEducationLevel.educationLevel.name)+" Fee Editting",width:"40vw",open:p,onClose:U=>z(U),children:e.jsx(Li,{form:M,schoolEducationLevelFee:n,randKey:Math.random(),onFinish:I})})]})},Ni=()=>{const[t,n]=s.useState(!1),[i,r]=s.useState(),a=Ve(),h=async()=>{n(!0);const{data:c}=await Q.custom({url:"",method:"get",meta:{operation:"schoolFee",variables:{id:{value:parseInt(a.schoolFeeId),type:"Int",required:!0}},fields:["id",{school:["id","name"]},"name","description","isActive","created","updated","canEdit","canDelete","canManage"]}}).catch(d=>(y.error("Something Went Wrong ..."),{data:null})).then(d=>d);c&&r(c),n(!1)};return s.useEffect(()=>{document.title=xe.system_name+": Education Levels",h()},[a.schoolFeeId]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(pe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:e.jsxs(pe,{to:"/schoolmanager/school/fees",children:["School Fees",i&&e.jsx("span",{style:{marginLeft:10},children:e.jsx(ae,{color:"green",children:i?i.name:"School Fee"})}),e.jsx(le,{spinning:t})]})}),e.jsx(Z.Item,{children:"Education Levels Fees"})]}),e.jsx(Ai,{fee:i,canAdd:(i==null?void 0:i.canManage)&&!t})]})},Pi=t=>{const[n,i]=s.useState([]),[r,a]=s.useState([]),[h,c]=s.useState(!1),d=async(l,u="")=>{const{data:S}=await Q.custom({url:"",method:"get",meta:{operation:"schoolRolesMemberNotAssigned",variables:{page:{value:l,type:"Int",required:!0},key:{value:u,type:"String",required:!1},memberId:{value:parseInt(t.member.id),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Zn}]}}).catch(()=>(y.error("Error occured while fetching roles"),{data:null})).then(v=>v);S&&i([...S.results])};return s.useEffect(()=>{d(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("h3",{children:[e.jsx("b",{children:"Full Name"}),": ",t.member.firstName," ",t.member.middleName," ",t.member.lastName]}),e.jsxs("h3",{children:[e.jsx("b",{children:"Email Address"}),": ",t.member.email]})]}),e.jsxs(o,{layout:"vertical",form:t.form,onFinish:l=>{l.roles=r.map(u=>parseInt(u.role.id.toString())),l.is_adminstrator=h,t.onFinish(l,t.member)},requiredMark:!0,children:[e.jsx(o.Item,{name:"registration_number",label:"Registration Number",rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx($,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(o.Item,{name:"is_adminstrator",rules:[{required:!1,type:"boolean"}],children:e.jsx(Me,{onChange:()=>{c(!h)},defaultChecked:h,children:"Is Adminstrator"})}),e.jsx(oe,{bordered:!0,dataSource:n,renderItem:l=>e.jsx(oe.Item,{children:e.jsx(Me,{onChange:u=>{u.target.checked?a([...r,l]):a(r.filter(S=>S.role.id!==l.role.id))},defaultChecked:r.includes(l),children:l.role.name})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:45},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},Ti=t=>{const[n,i]=s.useState(),[r,a]=s.useState([]),[h,c]=s.useState(!0),[d,l]=s.useState(1),[u,S]=s.useState(""),[v]=o.useForm(),[k]=o.useForm(),[A,C]=s.useState(0),[P,M]=s.useState(!1),F=b=>{M(!0),i(b)},p=async(b,j)=>{er(b,j).then(E=>{E&&(E.success?(y.success(E.message),a(r.filter(N=>N.id.toString()!==j.id.toString())),t.onAdd(E.member),M(!1),i(void 0),v.resetFields()):y.error(E.message))})},z=async(b,j="")=>{c(!0),tr(b,j).then(E=>{E&&(C(E.pages),l(E.page),a([...E.results]))}),c(!1)};return s.useEffect(()=>{z(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(K,{span:24,children:e.jsx(o,{layout:"vertical",form:k,onFinish:b=>{S(b.key),z(1,b.key)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search Member(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(le,{spinning:h,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"79vh",minHeight:"79vh",overflowY:"auto"},children:e.jsx(oe,{itemLayout:"horizontal",dataSource:r,renderItem:b=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(oe.Item,{style:{margin:0,padding:0},actions:[e.jsx(T,{icon:e.jsx(_e,{}),onClick:()=>F(b)})],children:e.jsx(oe.Item.Meta,{avatar:e.jsx(as,{src:b.pic}),title:e.jsx("a",{children:b.fullName}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:b.email})})})},"file-"+b.id)})})}),e.jsx(nt,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:2},children:e.jsx(us,{count:A,color:"secondary",onChange:(b,j)=>{z(j,u)}})})]}),e.jsx(re,{title:"Member Informations",open:P,onClose:b=>M(b),width:"60vw",children:e.jsx(Pi,{member:n,form:v,onFinish:p,randKey:Math.random()})})]})},{Option:Is}=V,Fs=[e.jsx(Is,{value:null,children:"Please Select Year"},"default")];for(let t=2022;t<new Date().getFullYear()+5;t++)Fs.push(e.jsx(Is,{value:t,children:t.toString()},t));const zi=t=>{const[n,i]=s.useState(null),[r,a]=s.useState(!1),[h,c]=s.useState(!1),[d,l]=s.useState(""),[u,S]=s.useState(!1),v=async A=>{i(A)},k=async A=>{a(!0),sr(A).then(C=>{C&&(l(C.message),C.success?(S(!0),y.success(C.message)):(S(!1),y.error(C.message)))}),a(!1),c(!0)};return s.useEffect(()=>{},[]),!r&&h?e.jsx(e.Fragment,{children:e.jsx(It,{message:d,type:u?"success":"error",style:{fontSize:24},onClose:()=>{l(""),a(!1),S(!1),c(!1)},closable:!0})}):e.jsx(e.Fragment,{children:e.jsxs(le,{spinning:r,children:[e.jsx("p",{style:{fontSize:20},children:"Platform supports Login Authorizations to School Members"}),e.jsxs(tt,{actions:[e.jsx(te,{title:e.jsx(e.Fragment,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Authorize Login?"}),e.jsx("span",{style:{height:10}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Members Registration Year"}),e.jsx("span",{children:e.jsx(V,{size:"large",value:n||null,placeholder:"Please Choose Year ...",style:{width:220},onChange:v,allowClear:!0,onClear:()=>i(null),dropdownStyle:{zIndex:9999},children:Fs})})]})}),onConfirm:()=>k(n),onCancel:()=>{},okButtonProps:{disabled:n===null},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{size:"large",icon:e.jsx(st,{}),children:"Authorize"})})],style:{marginTop:50},children:[e.jsxs("span",{style:{fontSize:18},children:["By Using Email/Phone/Registration Number of Member as Default"," ",e.jsx("b",{children:"Username"}),", While Default",e.jsx("b",{children:"Password"})," will be ",e.jsx("b",{children:"Randomly Generated"})," or same"," ",e.jsx("b",{children:"Registration Number"})]}),e.jsx("span",{style:{display:"block",color:"red",fontSize:20,marginTop:10},children:"This action will be applicable only to those Members with no Login Access/Authorization to the Platform"})]})]})})},Di=t=>{const[n]=o.useForm(),[i,r]=s.useState(!1),a=async(h,c)=>{r(!0);const{data:d}=await Q.custom({url:"",method:"post",meta:{operation:"resetMemberCredential",variables:{memberId:{value:parseInt(t.member.id.toString()),type:"Int",required:!0},phone:{value:h,type:"String",required:!0},email:{value:c,type:"String",required:!1}},fields:["success","message"]}}).catch(()=>(y.error("Error occured while resetting member credential ..."),{data:null})).then(l=>l);r(!1),d&&(d.success&&t.resetting(!1),t.resettingFeedback(d.success,d.message))};return s.useEffect(()=>{},[i]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:i,children:e.jsxs(o,{layout:"vertical",form:t.form?t.form:n,onFinish:h=>{a(h.phone,h.email)},requiredMark:!0,children:[e.jsx(o.Item,{name:"phone",label:"Mobile Phone",rules:[{required:!0,type:"string",message:"Please Mobile Phone number"}],children:e.jsx($,{prefix:e.jsx(is,{}),size:"large",placeholder:"Mobile Phone Number ...",onChange:h=>{t.resetPhoneChange(h.target.value)}})}),e.jsx(o.Item,{name:"email",label:"Email Addres",rules:[{required:!1,type:"string",message:"Please Email Address ..."}],children:e.jsx($,{prefix:e.jsx(ls,{}),size:"large",placeholder:"Email Address ..."})})]})})})},{Option:Bt}=V,qi=t=>{s.useState(!0);const[n,i]=s.useState(null),[r,a]=s.useState(null),[h,c]=s.useState(null);s.useState(null),s.useState(null);const[d,l]=s.useState(null),[u,S]=s.useState(null),[v]=o.useForm();lt();const k=async p=>{S(p.format("YYYY-MM-DD"))},A=async p=>{l(p)},C=async p=>{c(p)},P=async p=>{i(p)},M=async p=>{a(p)},F=async p=>{const{data:z}=await Q.custom({url:"",method:"post",meta:{operation:"registerSchoolMember",variables:{firstName:{value:p.firstName,type:"String",required:!0},middleName:{value:p.middleName,type:"String",required:!0},lastName:{value:p.lastName,type:"String",required:!0},email:{value:p.email,type:"String",required:!1},phone:{value:p.phone,type:"String",required:!0},registrationNumber:{value:p.registrationNumber,type:"String",required:!0},gender:{value:p.gender,type:"String",required:!0},regionId:{value:p.regionId,type:"Int",required:!1},districtId:{value:p.districtId,type:"Int",required:!1},wardId:{value:p.wardId,type:"Int",required:!1},dob:{value:p.dob,type:"String",required:!1}},fields:["success","message",{schoolMember:He}]}}).catch(()=>(y.error("Error occured while creating School Member"),{data:null})).then(b=>b);z&&(z.success?(y.success(z.message),t.onAdd(z.schoolMember),v.resetFields()):y.error(z.message))};return s.useEffect(()=>{},[t.randKey]),e.jsx(e.Fragment,{children:e.jsxs(o,{layout:"vertical",form:v,onFinish:p=>{p.regionId=n,p.districtId=r,p.wardId=h,F(p)},requiredMark:!0,children:[e.jsx(o.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(o.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(o.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10},children:e.jsx(w,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(T,{type:"dashed",onClick:()=>y("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx($,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(o.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx($,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(o.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,type:"string",message:"Please input Phones Number"}],children:e.jsx($,{size:"large",placeholder:"Enter Phone Number ..."})}),e.jsxs(ye,{direction:"horizontal",children:[e.jsx(o.Item,{name:"dob",label:"Date of Birth",rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(ct,{size:"large",onChange:k,disabledDate:p=>p&&p>Ge().subtract(3,"years"),defaultValue:os(new Date).subtract(3,"years"),popupStyle:{zIndex:9999}})}),e.jsx(o.Item,{name:"gender",label:"Gender",rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:d,children:e.jsxs(V,{placeholder:"Please Choose Gender ...",style:{width:220},onChange:A,size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(Bt,{value:"female",children:"Female"}),e.jsx(Bt,{value:"male",children:"Male"})]})})]}),e.jsxs(ye,{direction:"horizontal",children:[e.jsxs(ye,{direction:"vertical",children:[e.jsx("h4",{children:"Region"}),e.jsx(ut,{onChange:P,regionId:n,size:"large"})]}),e.jsxs(ye,{direction:"vertical",children:[e.jsx("h4",{children:"District"}),e.jsx(dt,{regionId:parseInt(n),districtId:r,onChange:M,size:"large"})]}),e.jsxs(ye,{direction:"vertical",children:[e.jsx("h4",{children:"Ward"}),e.jsx(ht,{districtId:parseInt(r),wardId:h,onChange:C,size:"large"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:30},children:[e.jsx(T,{size:"large",onClick:()=>{v.resetFields()},danger:!0,style:{float:"left"},icon:e.jsx(nr,{}),children:"Clear"}),e.jsx(T,{size:"large",htmlType:"submit",danger:!0,style:{float:"right"},icon:e.jsx(rr,{}),children:"Save"})]})]})})},{Option:St}=V,Ri=[];for(let t=2022;t<new Date().getFullYear()+5;t++)Ri.push(e.jsx(St,{children:t.toString()},t));const Oi=t=>{const[n,i]=s.useState(null),[r,a]=s.useState(null),[h,c]=s.useState(null),[d,l]=s.useState(null),[u,S]=s.useState(null),[v]=o.useForm(),k=async p=>{S(p.format("YYYY-MM-DD"))},A=async p=>{l(p)},C=async p=>{c(p)},P=async p=>{i(p),a(null),c(null),v.resetFields(["districtId","wardId"])},M=async p=>{a(p),c(null),v.resetFields(["wardId"])},F=async p=>{var b;const{data:z}=await Q.custom({url:"",method:"post",meta:{operation:"updateSchoolMemberInformation",variables:{id:{value:parseInt(((b=t==null?void 0:t.member)==null?void 0:b.id.toString())??"0"),type:"Int",required:!0},firstName:{value:p.firstName,type:"String",required:!0},middleName:{value:p.middleName,type:"String",required:!0},lastName:{value:p.lastName,type:"String",required:!0},email:{value:p.email,type:"String",required:!1},phone:{value:p.phone,type:"String",required:!1},registrationNumber:{value:p.registrationNumber,type:"String",required:!0},gender:{value:p.gender,type:"String",required:!0},regionId:{value:p.regionId,type:"Int",required:!1},districtId:{value:p.districtId,type:"Int",required:!1},wardId:{value:p.wardId,type:"Int",required:!1},dob:{value:p.dob,type:"String",required:!1}},fields:["success","message",{schoolMember:He}]}}).catch(()=>(y.error("Error occured while updating member Informations"),{data:null})).then(j=>j);z&&(z.success?(y.success(z.message),t.onFinish(z.schoolMember,t.editting),v.resetFields()):y.error(z.message))};return s.useEffect(()=>{var p,z,b,j,E,N,R,L,g,I,m,x,B,U,O,G,X,me,ge,be,Y,D,se;l((p=t.member)==null?void 0:p.gender),i((b=(z=t.member)==null?void 0:z.region)==null?void 0:b.id),a((E=(j=t.member)==null?void 0:j.district)==null?void 0:E.id),c((R=(N=t.member)==null?void 0:N.ward)==null?void 0:R.id),v.setFieldsValue({firstName:(L=t.member)==null?void 0:L.firstName,middleName:(g=t.member)==null?void 0:g.middleName,lastName:(I=t.member)==null?void 0:I.lastName,email:(m=t.member)==null?void 0:m.email,phone:(x=t.member)==null?void 0:x.phone,registrationNumber:(B=t.member)==null?void 0:B.registrationNumber,gender:(U=t.member)==null?void 0:U.gender,regionId:parseInt(((G=(O=t.member)==null?void 0:O.region)==null?void 0:G.id.toString())??"0"),districtId:parseInt(((me=(X=t.member)==null?void 0:X.district)==null?void 0:me.id.toString())??"0"),wardId:parseInt(((be=(ge=t.member)==null?void 0:ge.ward)==null?void 0:be.id.toString())??"0")}),(Y=t.member)!=null&&Y.dob&&(S(Ge((D=t.member)==null?void 0:D.dob)),v.setFieldsValue({dob:os((se=t.member)==null?void 0:se.dob)}))},[t.member]),e.jsx(e.Fragment,{children:e.jsxs(o,{layout:"vertical",form:v,onFinish:p=>{p.dob=u,F(p)},requiredMark:!0,children:[e.jsx(o.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(o.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(o.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10},children:e.jsx(w,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(T,{type:"dashed",onClick:()=>y("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx($,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(o.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx($,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(o.Item,{name:"phone",label:"Phones Number",rules:[{required:!1,type:"string",message:"Please input Phones Number"}],children:e.jsx($,{size:"large",placeholder:"Enter Phones Numbers ..."})}),e.jsxs(ne,{children:[e.jsx(K,{span:24,children:e.jsxs(ye,{direction:"horizontal",children:[e.jsx(o.Item,{name:"dob",label:"Date of Birth",rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(ct,{onChange:k,disabledDate:p=>p&&p>Ge().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(o.Item,{name:"gender",label:"Gender",rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:d,children:e.jsxs(V,{size:"large",placeholder:"Please Choose Gender ...",style:{width:220},onChange:A,dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(St,{value:"female",children:"Female"}),e.jsx(St,{value:"male",children:"Male"})]})})]})}),e.jsxs(K,{span:24,children:[e.jsx(ut,{onChange:P,regionId:parseInt(n),name:"regionId",label:"Region",size:"middle",required:!1}),e.jsx(dt,{regionId:parseInt(n),districtId:parseInt(r),onChange:M,name:"districtId",label:"District",size:"middle",required:!1}),e.jsx(ht,{districtId:parseInt(r),wardId:parseInt(h),onChange:C,name:"wardId",label:"Ward",size:"middle",required:!1})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Gi=t=>{const[n,i]=s.useState([]),[r,a]=s.useState([]),[h,c]=s.useState([]),[d,l]=s.useState([]),u=async(C,P="")=>{const{data:M}=await Q.custom({url:"",method:"get",meta:{operation:"systemRoleRecords",variables:{page:{value:C,type:"Int",required:!0},key:{value:P,type:"String",required:!1},userId:{value:parseInt(t.user.id),type:"Int",required:!0},schoolId:{value:parseInt(t.school.id),type:"Int",required:!0},custom:{value:!1,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["key","title","description","chosen"]}]}}),F=[];M.results.forEach(p=>{p.chosen&&F.push(p.key)}),i([...M.results]),a(F)},S=async C=>{const{data:P}=await Q.custom({url:"",method:"post",meta:{operation:"addUserRoles",variables:{userId:{value:parseInt(t.user.id),type:"Int",required:!0},roles:{value:C,type:"[Int]",required:!0}},fields:["success","message"]}});P.success?y.success(P.message):y.error(P.message)},v=async C=>{const{data:P}=await Q.custom({url:"",method:"post",meta:{operation:"removeUserRoles",variables:{userId:{value:parseInt(t.user.id),type:"Int",required:!0},roles:{value:C,type:"[Int]",required:!0}},fields:["success","message"]}});P.success?y.success(P.message):y.error(P.message)},k=C=>{a(C),d.length>0&&S(d),h.length>0&&v(h)},A=(C,P)=>{l(C),c(P)};return s.useEffect(()=>{u(1)},[t.randKey,t.user]),e.jsx(e.Fragment,{children:e.jsx(Wr,{titles:["Not Assigned Roles","Assigned Roles"],dataSource:n,showSearch:!0,listStyle:{width:"100vw",height:"65vh"},operations:["Add","Remove"],targetKeys:r,onChange:k,onSelectChange:A,onSearch:(C,P)=>{},render:C=>C.title})})},Yi=t=>{const[n,i]=s.useState([]),r=async(h,c="")=>{const{data:d}=await Q.custom({url:"",method:"get",meta:{operation:"userRoles",variables:{page:{value:h,type:"Int",required:!0},key:{value:c,type:"String",required:!1},userId:{value:parseInt(t.user.id),type:"Int",required:!0},schoolId:{value:parseInt(t.school.id),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","created","updated","isActive","canEdit","canDelete","canManage",{role:["id","name","code","description","created","updated","isActive","canEdit","canDelete","canManage"]}]}]}});i([...d.results])},a=async h=>{const{data:c}=await Q.custom({url:"",method:"post",meta:{operation:"removeUserRole",variables:{roleId:{value:h.role.id,type:"Int",required:!0},userId:{value:parseInt(t.user.id),type:"Int",required:!0}},fields:["success","message"]}});c.success?(y.success(c.message),i(n.filter(d=>d.id!==h.id))):y.error(c.message)};return s.useEffect(()=>{r(1)},[t.randKey,t.user]),e.jsx(e.Fragment,{children:e.jsx(oe,{dataSource:n,renderItem:h=>e.jsx(oe.Item,{actions:[e.jsx(te,{placement:"topLeft",title:"Remove "+h.role.name,onConfirm:()=>a(h),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{icon:e.jsx(de,{}),children:"Remove"})})],children:h.role.name})})})},_i=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,$i=t=>{const[n,i]=s.useState(!1),[r,a]=s.useState(!1),[h]=o.useForm(),c=async d=>{const{data:l}=await Q.custom({url:"",method:"post",meta:{operation:"uploadSchoolMemberProfilePhoto",variables:{id:{value:parseInt(t.member.id),type:"Int",required:!0},photo:{value:d.file,type:"Upload",required:!0}},fields:["success","message",{schoolMember:He}]}}).catch(u=>(console.error(u),y.error("Error occured while uploading profile picture"),{data:null})).then(u=>u);l&&(l.success?(y.success(l.message),t.onChange(l.schoolMember),i(!1)):y.error(l.message))};return s.useEffect(()=>{},[]),e.jsxs(e.Fragment,{children:[e.jsx(T,{block:!0,type:"primary",onClick:()=>i(!0),children:"Update Profile Picture"}),e.jsx(re,{title:"Change Profile Picture",open:n,width:"40vw",onClose:d=>i(d),children:e.jsx(e.Fragment,{children:e.jsx(le,{spinning:r,children:e.jsxs(o,{layout:"vertical",form:h,onFinish:d=>{c(d)},requiredMark:!0,autoComplete:"off",children:[e.jsx(o.Item,{label:"Pick Files ("+xe.supported_image_extensions.join()+")",children:e.jsx(o.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:_i,noStyle:!0,rules:[{required:!0,type:"array",message:"Please Upload Profile Picture"}],children:e.jsxs(Ct.Dragger,{name:"file",accept:xe.supported_file_extensions.join(),multiple:!0,beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(it,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",loading:r,children:"Change"})})]})})})})]})},Ki=t=>{var c,d,l,u,S,v,k;const[n,i]=s.useState(!1),[r,a]=s.useState(null),h=async()=>{i(!0);const{data:A}=await Q.custom({url:"",method:"get",meta:{operation:"schoolMember",variables:{id:{value:parseInt(t.member.id),type:"Int",required:!0}},fields:He}}).catch(C=>(console.error(C),y.error("Error occured while getting school member"),{data:null})).then(C=>C);A&&a(A),i(!1)};return s.useEffect(()=>{a(t.member),h()},[]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:n,children:e.jsxs(ne,{children:[e.jsxs(K,{span:4,children:[e.jsx(Jr,{width:"100%",height:"280px",src:r==null?void 0:r.dp}),e.jsx("div",{style:{marginTop:10},children:e.jsx($i,{member:t.member,onChange:A=>{a(A)}})})]}),e.jsx(K,{span:20,children:e.jsxs("div",{style:{padding:10,marginLeft:10,border:"1px solid #e8e8e8",borderRadius:5},children:[e.jsxs(Fe,{title:"Member Basic Informations",children:[e.jsx(Fe.Item,{label:"Title",children:t.member.title}),e.jsx(Fe.Item,{label:"First Name",children:t.member.firstName}),e.jsx(Fe.Item,{label:"Middle Name",children:t.member.middleName}),e.jsx(Fe.Item,{label:"Last Name",children:t.member.lastName}),e.jsx(Fe.Item,{label:"Gender",children:t.member.gender}),e.jsx(Fe.Item,{label:"DOB",children:t.member.dob}),e.jsx(Fe.Item,{label:"Age",children:((c=t==null?void 0:t.member)==null?void 0:c.age)&&e.jsxs(e.Fragment,{children:[t.member.age," years"]})})]}),e.jsxs(Fe,{title:"Member Contact Informations",children:[e.jsx(Fe.Item,{label:"Mobile Phone Number",children:t.member.phone}),e.jsx(Fe.Item,{label:"Email Address",children:t.member.email}),e.jsx(Fe.Item,{label:"Region",children:(l=(d=t.member)==null?void 0:d.region)==null?void 0:l.name}),e.jsx(Fe.Item,{label:"District",children:(S=(u=t.member)==null?void 0:u.district)==null?void 0:S.name}),e.jsx(Fe.Item,{label:"Ward",children:(k=(v=t.member)==null?void 0:v.ward)==null?void 0:k.name}),e.jsx(Fe.Item,{label:"Address",children:t.member.address})]})]})})]})})})},{TextArea:Bi}=$,{Option:Wi}=V,Ui=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,Vi=t=>{const[n,i]=s.useState(!1),[r,a]=s.useState([]),[h]=o.useForm(),c=async l=>{i(!0);const{data:u}=await Q.custom({url:"",method:"post",meta:{operation:"createSchoolMemberContract",variables:{schoolMemberId:{value:parseInt(t.member.id),type:"Int",required:!0},contractNumber:{value:l.contractNumber,type:"String",required:!0},startDate:{value:l.contractStartDate,type:"String",required:!0},endDate:{value:l.contractEndDate,type:"String",required:!0},contractType:{value:l.contractType,type:"String",required:!0},description:{value:l.contractDescription,type:"String",required:!1},contractDocument:{value:l.file,type:"Upload",required:!0}},fields:["success","message"]}}).catch(S=>(console.error(S),y.error("Error occured while adding contract"),{data:null})).then(S=>S);console.log(u),i(!1)},d=async()=>{const{data:l}=await Q.custom({url:"",method:"get",meta:{operation:"schoolMemberContractTypes",variables:{},fields:["data"]}}).catch(()=>(y.error("Error occured while fetching contract types"),{data:null})).then(u=>u);l&&a(l.data)};return s.useEffect(()=>{d()},[]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:n,children:e.jsxs(o,{layout:"vertical",form:h,onFinish:l=>{c(l)},requiredMark:!0,children:[e.jsx(o.Item,{name:"contractNumber",label:"Contract Number",rules:[{required:!0,type:"string",message:"Please input Contract Number"}],children:e.jsx($,{})}),e.jsx(o.Item,{name:"contractStartDate",label:"Contract Start Date",rules:[{required:!0,type:"date",message:"Please input Contract Start Date"}],children:e.jsx(Oe.DatePicker,{style:{width:"50%"},popupStyle:{zIndex:9999},onChange:()=>{}})}),e.jsx(o.Item,{name:"contractEndDate",label:"Contract End Date",rules:[{required:!0,type:"date",message:"Please input Contract End Date"}],children:e.jsx(Oe.DatePicker,{style:{width:"50%"},popupStyle:{zIndex:9999},onChange:()=>{},disabledDate:l=>l&&l<h.getFieldValue("contractStartDate")})}),e.jsx(o.Item,{name:"contractType",label:"Contract Type",rules:[{required:!0,type:"string",message:"Please choose Contract Type..."}],children:e.jsx(V,{showSearch:!0,placeholder:"Select a Contract Type",optionFilterProp:"children",onChange:l=>{},onSearch:l=>{},filterOption:(l,u)=>u.children.toLowerCase().includes(l.toLowerCase()),dropdownStyle:{zIndex:9999},children:r.map((l,u)=>e.jsx(Wi,{value:l,children:l}))})}),e.jsx(o.Item,{name:"contractDescription",label:"Contract Description",rules:[{required:!1,type:"string",message:"Please input Contract Description"}],children:e.jsx(Bi,{rows:4})}),e.jsx(o.Item,{label:"Pick Files (pdf)",children:e.jsx(o.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:Ui,noStyle:!0,rules:[{required:!0,type:"array",message:"Please Upload Contract File"}],children:e.jsxs(Oe.Upload.Dragger,{name:"file",accept:"application/pdf",multiple:!1,beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(it,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Search:Hi}=$,Ji=t=>{const[n,i]=s.useState(!1),[r,a]=s.useState(0),[h,c]=s.useState(0),[d,l]=s.useState(""),[u,S]=s.useState(null),[v,k]=s.useState(!1),A=async M=>{const{data:F}=await Q.custom({url:"",method:"post",meta:{operation:"deleteSchoolMemberContract",variables:{id:{value:M,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(y.error("Error occured while deleting school member contract"),{data:null})).then(p=>p);F&&(y.success(F.message),S(u.filter(p=>p.id!==M)))},C=async(M,F)=>{const{data:p}=await Q.custom({url:"",method:"post",meta:{operation:"blockUnblockSchoolMemberContract",variables:{id:{value:parseInt(M.toString()),type:"Int",required:!0},blocked:{value:F,type:"Boolean",required:!0}},fields:["success","message",{schoolMemberContract:qt}]}}).catch(()=>(y.error("Error occured while blocking/unblocking school member contract"),{data:null})).then(z=>z);p?(y.success(p.message,{position:"top-left"}),S(u.map(z=>z.id.toString()===M.toString()?p.schoolMemberContract:z))):y.error("Error occured while blocking/unblocking school member contract",{position:"bottom-right"})},P=async(M=1,F=25,p="")=>{i(!0);const{data:z}=await Q.custom({url:"",method:"get",meta:{operation:"schoolMemberContracts",variables:{schoolMemberId:{value:parseInt(t.member.id),type:"Int",required:!0},page:{value:M,type:"Int",required:!0},pageSize:{value:F,type:"Int",required:!0},key:{value:p,type:"String",required:!1}},fields:["total","pages","page","hasNext","hasPrev",{results:qt}]}}).catch(()=>(y.error("Error occured while getting school member contracts"),{data:null})).then(b=>b);z&&(a(z.total),c(z.pages),S(z.results)),i(!1)};return s.useEffect(()=>{P(1,25,"")},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(K,{span:8,children:e.jsx(Hi,{placeholder:"input search text",onSearch:M=>{l(M),P(1,25,M)},style:{width:"100%"}})}),e.jsx(K,{span:16,children:e.jsx(T,{type:"primary",style:{float:"right"},icon:e.jsx(ce,{}),onClick:()=>k(!0),disabled:n||!t.member.canManage,children:"Add Contract"})})]}),e.jsx(ne,{children:e.jsx(K,{span:24,children:e.jsx(he,{dataSource:u,columns:[{title:"Contract #",dataIndex:"contractNumber",key:"contractNumber"},{title:"Contract Type",dataIndex:"contractType",key:"contractType"},{title:"Start Date",dataIndex:"contractStartDate",key:"contractStartDate"},{title:"End Date",dataIndex:"contractEndDate",key:"contractEndDate"},{title:"Status",dataIndex:"status",key:"status",render:(M,F)=>e.jsx(e.Fragment,{children:F.isActive?e.jsx(w,{title:"Active",placement:"top",children:e.jsx(ae,{color:"green",children:"Active"})}):e.jsx(w,{title:"Blocked",placement:"top",children:e.jsx(ae,{color:"red",children:"Blocked"})})})},{title:"",dataIndex:"actions",key:"actions",render:(M,F)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(te,{title:"Delete Contract?",description:"Are you sure to delete this Contract?",onConfirm:()=>A(F.id),okText:"Yes",cancelText:"No",children:e.jsx(T,{type:"primary",icon:e.jsx(de,{}),disabled:!F.canDelete})}),F.isActive?e.jsx(w,{title:"Block Contract",placement:"top",children:e.jsx(T,{type:"primary",style:{marginLeft:10},icon:e.jsx(Qt,{}),onClick:()=>{C(F.id,!1)}})}):e.jsx(w,{title:"Unblock Contract",placement:"top",children:e.jsx(T,{type:"primary",style:{marginLeft:10},icon:e.jsx(ka,{}),onClick:()=>{C(F.id,!0)}})}),e.jsx(w,{title:"Download Contract Document",placement:"top",children:e.jsx(T,{type:"primary",style:{marginLeft:10},icon:e.jsx(vt,{}),onClick:()=>{window.open(F.contractDocument,"_blank")}})})]})}]})})}),e.jsx(ne,{children:e.jsx(K,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(ar,{defaultCurrent:1,total:r,onChange:(M,F)=>{P(M,F,d)}})})}),e.jsx(re,{title:"Add Contract",open:v,width:"40vw",onClose:M=>k(M),children:e.jsx(Vi,{member:t.member})})]})},Qi=t=>{const[n,i]=s.useState(null),r=a=>a.charAt(0).toUpperCase()+a.slice(1);return s.useEffect(()=>{i(JSON.parse(t.member.availability))},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(K,{span:4,children:e.jsx("b",{children:"Day"})}),e.jsx(K,{span:2,children:e.jsx("b",{children:"Morning"})}),e.jsx(K,{span:2,children:e.jsx("b",{children:"After Noon"})}),e.jsx(K,{span:2,children:e.jsx("b",{children:"Evening"})}),e.jsx(K,{span:4,style:{textAlign:"right"},children:e.jsx("b",{children:"Time Range"})})]}),n&&Object.keys(n).map(a=>e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:4,children:a.charAt(0).toUpperCase()+a.slice(1)}),e.jsx(K,{span:2,children:e.jsx(te,{title:n[a].morning?"Available on "+r(a):"Not Available on "+r(a),description:e.jsx("div",{style:{width:"245px"},children:n[a].morning?"Are you sure you want to make this member unavailable in the morning?":"Are you sure you want to make this member available in the morning?"}),onConfirm:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(ae,{color:n[a].morning?"green":"red",style:{cursor:"pointer"},children:n[a].morning?"Yes":"No"})})}),e.jsx(K,{span:2,children:e.jsx(te,{title:n[a].afternoon?"Available on "+r(a):"Not Available on "+r(a),description:e.jsx("div",{style:{width:"245px"},children:n[a].afternoon?"Are you sure you want to make this member unavailable in the morning?":"Are you sure you want to make this member available in the morning?"}),onConfirm:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(ae,{color:n[a].afternoon?"green":"red",style:{cursor:"pointer"},children:n[a].afternoon?"Yes":"No"})})}),e.jsx(K,{span:2,children:e.jsx(te,{title:n[a].evening?"Available on "+r(a):"Not Available on "+r(a),description:e.jsx("div",{style:{width:"245px"},children:n[a].evening?"Are you sure you want to make this member unavailable in the morning?":"Are you sure you want to make this member available in the morning?"}),onConfirm:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(ae,{color:n[a].evening?"green":"red",style:{cursor:"pointer"},children:n[a].evening?"Yes":"No"})})}),e.jsxs(K,{span:4,children:[n[a].time.map(h=>e.jsx("span",{children:h})),e.jsx(T,{size:"small",type:"primary",icon:e.jsx(Pe,{}),style:{float:"right"}})]})]}))]})},wi=ir.createContext({name:"Default"}),Xi=t=>{var Lt,At,Nt,Pt,Tt;const[n,i]=Fa.useNotification(),[r,a]=s.useState(),[h,c]=s.useState([]),[d,l]=s.useState([]),[u,S]=s.useState(!1),[v,k]=s.useState(0),[A,C]=s.useState(20),[P,M]=s.useState(""),[F,p]=s.useState(!0),[z]=o.useForm(),[b]=o.useForm(),E=!fe.useBreakpoint().lg,[N,R]=s.useState(!1),[L,g]=s.useState(!1),[I,m]=s.useState(!1),[x,B]=s.useState(!1),[U,O]=s.useState(!1),[G,X]=s.useState(!1),[me,ge]=s.useState(!1),[be,Y]=s.useState(),[D,se]=s.useState(!1),[ee,ue]=s.useState(!1),[Re,Te]=s.useState(!1),[ze,Ae]=s.useState(!1),De=W=>{a(W),Ae(!0)},q=W=>{a(W),Te(!0)},f=W=>{a(W),R(!0)},J=W=>{a(W),ge(!0)},je=(W,_)=>{W?n.success({message:"Member Credential Reset",description:_,placement:"bottomRight"}):n.error({message:"Member Credential Reset",description:_,placement:"bottomRight"})},qe=W=>{ue(W),se(!1),Y(void 0),b.resetFields()},Ie=W=>{a(W)},ks=W=>{Y(W)},Ms=W=>{a(W),m(!0)},Es=W=>{a(W),g(!0)},Ls=async W=>{c([W,...h])},As=W=>{c([W,...h]),X(!1)},Ns=async W=>{or(W).then(_=>{_&&(_.success?(y.success(_.message),c(h.filter(Ce=>Ce.id!==W))):y.error(_.message))})},mt=async(W,_="",Ce=20,Le=[])=>{p(!0),cr(W,_,Ce,Le,t.status??"").then($e=>{$e&&(k($e.total),c($e.results)),p(!1)})},Ps=async(W,_="",Ce=20)=>{cs(W,_,Ce).then(Le=>{Le&&(k(Le.total),l([...Le.results]))})},Ts=s.useMemo(()=>({name:"School Members"}),[]),zs=async W=>{c(h.map(_=>_.id===W.id?W:_)),R(!1)};return s.useEffect(()=>(mt(1,"",20),Ps(1,"",20),document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[t.status]),e.jsx(e.Fragment,{children:e.jsxs(wi.Provider,{value:Ts,children:[i,e.jsx(Xr,{offsetTop:68,children:e.jsx(tt,{size:"small",style:{marginBottom:"10px"},children:e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:E?24:10,children:e.jsx(o,{layout:"horizontal",form:z,onFinish:W=>{M(W.key),h.length=0,mt(1,W.key,A,W.roles)},children:e.jsxs(ne,{children:[e.jsx(K,{span:E?24:16,children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(K,{span:6,children:e.jsx(o.Item,{name:"roles",children:e.jsx(V,{size:"large",mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"Please select Member Role(s)",onChange:()=>{},dropdownStyle:{zIndex:9999},children:d.map(W=>e.jsx(V.Option,{value:W.id,children:W.role.name},W.id))})})}),e.jsx(K,{children:e.jsx(T,{htmlType:"submit",size:"large",icon:e.jsx(ie,{}),onClick:()=>z.submit()})})]})})}),e.jsxs(K,{span:E?24:14,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(T,{size:"large",icon:e.jsx(ce,{}),onClick:()=>O(!0),children:"Authorize Member"}),e.jsx(T,{size:"large",icon:e.jsx(ce,{}),onClick:()=>X(!0),children:"Register Member"}),e.jsx(T,{size:"large",icon:e.jsx(ce,{}),onClick:()=>S(!0),children:"Enroll Member(s)"})]})]})})}),e.jsx(he,{loading:F,columns:[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(W,_)=>e.jsx("span",{children:e.jsx("a",{children:_.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(W,_)=>e.jsx("span",{children:_.registrationNumber})},{title:"Email",dataIndex:"email",render:(W,_)=>e.jsx("span",{children:_.email?_.email:_.user.email})},{title:"Username",dataIndex:"username",render:(W,_)=>{var Ce;return e.jsx("span",{children:(Ce=_==null?void 0:_.user)==null?void 0:Ce.username})}},{title:"Phone",dataIndex:"phone",render:(W,_)=>e.jsx("span",{children:_.phone?_.phone:_.user.phone})},{title:"Gender",dataIndex:"gender",render:(W,_)=>e.jsx("span",{children:_.gender?_.gender:_.user.gender})},{title:"Region/District/Ward",dataIndex:"region_district_ward",render:(W,_)=>{var Ce,Le,$e,zt,Dt;return e.jsxs("span",{children:[(Ce=_==null?void 0:_.region)==null?void 0:Ce.name,((Le=_==null?void 0:_.district)==null?void 0:Le.name)&&e.jsxs(e.Fragment,{children:["/",($e=_==null?void 0:_.district)==null?void 0:$e.name]}),((zt=_==null?void 0:_.ward)==null?void 0:zt.name)&&e.jsxs(e.Fragment,{children:["/",(Dt=_==null?void 0:_.ward)==null?void 0:Dt.name]})]})}},{title:"Date Joined",dataIndex:"created",render:(W,_)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(_.created)})})})},{title:"Authed",dataIndex:"isAuthed",render:(W,_)=>{var Ce;return e.jsx("a",{children:(Ce=_==null?void 0:_.user)!=null&&Ce.isAuthed?e.jsx(ae,{color:"green",children:"Yes"}):e.jsx(ae,{color:"red",children:"Not"})})}},{title:"Status",dataIndex:"isActive",render:(W,_)=>e.jsx("a",{children:_!=null&&_.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"Action(s)",dataIndex:"action",fixed:"right",render:(W,_)=>{var Ce;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(We,{style:{color:"red"}}),disabled:!_.canEdit,children:e.jsx(w,{title:"Click to view Member Profile",placement:"left",color:"green",children:e.jsx(T,{type:"link",rel:"noopener noreferrer",onClick:()=>J(_),children:"Profile"})})}),_.contractApplicable&&e.jsx(H.Item,{icon:e.jsx(Ye,{style:{color:"red"}}),disabled:!_.canManage,children:e.jsx(w,{title:"Click to view Member Contracts",placement:"left",color:"green",children:e.jsx(T,{type:"link",rel:"noopener noreferrer",onClick:()=>q(_),children:"Contracts"})})}),e.jsx(H.Item,{icon:e.jsx(Pe,{style:{color:"red"}}),disabled:!_.canEdit,children:e.jsx(w,{title:"Click to Edit Member Informations",placement:"left",color:"green",children:e.jsx(T,{type:"link",rel:"noopener noreferrer",onClick:()=>f(_),children:"Edit"})})}),e.jsx(H.Item,{icon:e.jsx(de,{style:{color:"red"}}),children:e.jsx(w,{title:"Delete Member",placement:"left",color:"red",children:e.jsx(te,{title:"Are you sure to delete this ",placement:"topRight",onConfirm:()=>Ns(_==null?void 0:_.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(_!=null&&_.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(T,{type:"link",disabled:!(_!=null&&_.canDelete),children:"Delete"})})})}),_.canConfigureAvailability&&e.jsx(H.Item,{icon:e.jsx(lr,{style:{color:"red"}}),children:e.jsx(T,{type:"link",onClick:()=>De(_),children:"Manage Availability"})}),_.user&&e.jsxs(e.Fragment,{children:[e.jsx(H.Item,{icon:e.jsx(We,{style:{color:"red"}}),children:e.jsx(T,{type:"link",onClick:()=>Es(_),children:"Roles"})}),e.jsx(H.Item,{icon:e.jsx(We,{style:{color:"red"}}),children:e.jsx(T,{type:"link",onClick:()=>Ms(_),children:"Manage Roles"})}),((Ce=_==null?void 0:_.user)==null?void 0:Ce.isAuthed)&&e.jsx(te,{title:e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Resetting Credentials for ",e.jsx("b",{children:r==null?void 0:r.fullName})]}),e.jsx("p",{children:"Are you sure to reset this user's credentials?"}),e.jsx(Di,{member:r==null?void 0:r.user,form:b,resetPhoneChange:ks,randKey:Math.random(),resetting:qe,resettingFeedback:je})]}),visible:D,onConfirm:()=>{b.submit()},onCancel:()=>{Y(void 0),se(!1),b.resetFields()},onVisibleChange:Le=>{Le?(Y(r==null?void 0:r.phone),se(!0)):Y(void 0)},okButtonProps:{disabled:b.getFieldValue("phone")?b.getFieldValue("phone").length<10||ee:!0},okText:"Reset",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(H.Item,{icon:e.jsx(wt,{style:{color:"red"}}),children:e.jsx(w,{title:"Click to Reset Member Credentials",placement:"left",color:"green",children:e.jsx(T,{type:"link",onClick:()=>Ie(_),children:"Reset Credentials"})})})})]})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:Le=>Le.preventDefault(),children:e.jsx(Ee,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}}],dataSource:h,pagination:{onChange:(W,_)=>{C(_),mt(W,P,_)},total:v,pageSize:A,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"calc(100vh - 350px)"}}),e.jsx(Se,{title:"Adding School Members",anchor:"right",open:u,onClose:W=>S(W),width:"35vw",children:e.jsx(Ti,{randKey:Math.random(),onAdd:Ls})}),e.jsx(re,{title:((Lt=r==null?void 0:r.user)==null?void 0:Lt.fullName)+" Roles",open:L,onClose:W=>g(W),width:"60vw",children:e.jsx(Yi,{user:r==null?void 0:r.user,school:r==null?void 0:r.school,randKey:Math.random()})}),e.jsx(re,{title:"Manage "+((At=r==null?void 0:r.user)==null?void 0:At.fullName)+" Roles",open:I,width:"40vw",onClose:W=>m(W),children:e.jsx(Gi,{user:r==null?void 0:r.user,school:r==null?void 0:r.school,randKey:Math.random()})}),e.jsx(re,{title:"Member Registration By Excel Uploading",open:x,width:"40vw",onClose:W=>B(W),children:e.jsx("span",{children:"member registration by excel uploading"})}),e.jsx(re,{title:"Members Authorization",open:U,width:"40vw",onClose:W=>O(W),children:e.jsx(zi,{})}),e.jsx(re,{title:"Edit Member",open:N,width:"40vw",onClose:W=>R(W),children:e.jsx(Oi,{member:r,onFinish:zs})}),e.jsx(re,{title:"Managing "+((Nt=r==null?void 0:r.user)==null?void 0:Nt.fullName)+" Availability",open:ze,width:"70vw",onClose:W=>Ae(W),children:e.jsx(Qi,{member:r})}),e.jsx(Se,{title:"Registering School Members",anchor:"right",open:G,onClose:W=>X(W),width:"35vw",children:e.jsx(qi,{onAdd:As})}),e.jsx(Se,{title:e.jsx(e.Fragment,{children:e.jsxs("span",{children:[e.jsx("b",{children:(Pt=r==null?void 0:r.user)==null?void 0:Pt.fullName})," Profile"]})}),anchor:"right",open:me,onClose:W=>ge(W),width:"85vw",children:e.jsx(Ki,{member:r})}),e.jsx(Se,{title:e.jsx(e.Fragment,{children:e.jsxs("span",{children:[e.jsx("b",{children:(Tt=r==null?void 0:r.user)==null?void 0:Tt.fullName})," Contracts"]})}),anchor:"right",open:Re,onClose:W=>Te(W),width:"60vw",children:e.jsx(Ji,{member:r})})]})})},Zi=()=>{const{status:t}=Ve();return s.useEffect(()=>{document.title=t==="active"?xe.system_name+": Active Members":t==="blocked"?xe.system_name+": Blocked Members":xe.system_name+": All Members"},[t]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(pe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Members"}),e.jsx(Z.Item,{children:t==="active"?"Active Members":t==="blocked"?"Blocked Members":"All Members"})]}),e.jsx(Xi,{status:t})]})},{TextArea:el}=$,tl=t=>{const[n,i]=s.useState(!0),[r,a]=s.useState(!0);return s.useEffect(()=>{},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("h3",{children:["Course: ",t.studyCourse.course.name]}),e.jsxs("h3",{children:["Year: ",t.studyCourse.year]}),e.jsxs("h3",{children:["Level: ",t.studyCourse.levelDisplay]}),e.jsxs("h3",{children:["Semester: ",t.studyCourse.semesterDisplay]}),e.jsxs(o,{layout:"vertical",form:t.form,onFinish:h=>{h.study_course_id=t.studyCourse.id,h.create_class=n,h.create_drive=r,t.onFinish(h)},initialValues:{periods_per_week:2},requiredMark:!0,children:[e.jsx(o.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx($,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(o.Item,{name:"periods_per_week",label:"Periods Per Week",rules:[{required:!0,type:"number",message:"Please input Periods Per Week"},{min:1,type:"number",message:"Periods Per Week must be greater than 0"}],children:e.jsx(Oe.InputNumber,{size:"large",placeholder:"Enter Periods Per Week ..."})}),e.jsx(o.Item,{name:"is_active",children:e.jsx(Me,{checked:n,onChange:()=>i(!n),children:"Auto Create Class"})}),e.jsx(o.Item,{name:"is_active",children:e.jsx(Me,{checked:r,onChange:()=>a(!r),children:"Auto Create Drive"})}),e.jsx(o.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(el,{rows:2,placeholder:"Please input Description ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},{TextArea:sl}=$,nl=t=>{var r,a,h,c,d,l,u,S,v;const[n,i]=s.useState(t.module.isActive);return s.useEffect(()=>{t.form.setFieldsValue({name:t.module.name,code:t.module.code,description:t.module.description,periods_per_week:t.module.periodsPerWeek,is_active:t.module.isActive})},[t.randKey,t.module,t.form]),e.jsxs(e.Fragment,{children:[e.jsxs("h3",{children:["Course: ",(h=(a=(r=t.module)==null?void 0:r.studyCourse)==null?void 0:a.course)==null?void 0:h.name]}),e.jsxs("h3",{children:["Year: ",(d=(c=t.module)==null?void 0:c.studyCourse)==null?void 0:d.year]}),e.jsxs("h3",{children:["Level: ",(u=(l=t.module)==null?void 0:l.studyCourse)==null?void 0:u.levelDisplay]}),e.jsxs("h3",{children:["Semester: ",(v=(S=t.module)==null?void 0:S.studyCourse)==null?void 0:v.semesterDisplay]}),e.jsxs(o,{layout:"vertical",form:t.form,onFinish:k=>{k.id=parseInt(t.module.id),k.study_course_id=t.module.studyCourse.id,k.is_active=n,t.onFinish(k)},requiredMark:!0,children:[e.jsx(o.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx($,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(o.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(sl,{rows:2,placeholder:"Please input Description ..."})}),e.jsx(o.Item,{name:"periods_per_week",label:"Periods Per Week",rules:[{required:!0,type:"number",message:"Please input Periods Per Week"},{min:1,type:"number",message:"Periods Per Week must be greater than 0"}],children:e.jsx(Ke,{size:"large",placeholder:"Enter Periods Per Week ..."})}),e.jsx(o.Item,{name:"is_active",children:e.jsx(Me,{checked:n,onChange:()=>i(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},{Option:et}=V,rl=[];for(let t=2022;t<new Date().getFullYear()+5;t++)rl.push(e.jsx(et,{children:t.toString()},t));const al=t=>{s.useState(!0);const[n,i]=s.useState(null),[r,a]=s.useState(null),[h,c]=s.useState(null),[d,l]=s.useState(null),[u,S]=s.useState(null),[v,k]=s.useState([]),[A]=o.useForm();lt();const C=async j=>{S(j.format("YYYY-MM-DD"))},P=async j=>{l(j)},M=async j=>{c(j)},F=async j=>{i(j),a(null)},p=async j=>{a(j),c(null)},z=async()=>{var j;ds(1,"",100,(j=t.studyCourse)==null?void 0:j.id).then(E=>{k(E.results)})},b=async j=>{var N;const{data:E}=await Q.custom({url:"",method:"post",meta:{operation:"createStudyCourseStudent",variables:{studyCourseId:{value:j.studyCourseId,type:"Int",required:!1},firstName:{value:j.firstName,type:"String",required:!0},middleName:{value:j.middleName,type:"String",required:!0},lastName:{value:j.lastName,type:"String",required:!0},email:{value:j.email,type:"String",required:!1},phones:{value:j.phones,type:"[String]",required:!1},registrationNumber:{value:j.registrationNumber,type:"String",required:!0},gender:{value:j.gender,type:"String",required:!0},regionId:{value:j.regionId,type:"Int",required:!1},districtId:{value:j.districtId,type:"Int",required:!1},wardId:{value:j.wardId,type:"Int",required:!1},dob:{value:j.dob,type:"String",required:!1},groupId:{value:parseInt(((N=j.groupId)==null?void 0:N.toString())??"0"),type:"Int",required:!1}},fields:["success","message"]}}).catch(R=>(console.error(R),y.error("Error occured while creating student"),{data:null})).then(R=>R);E&&(E.success?(y.success(E.message),A.resetFields()):y.error(E.message))};return s.useEffect(()=>{z()},[t.editting,t.studyCourse]),e.jsx(e.Fragment,{children:e.jsxs(o,{layout:"horizontal",form:A,onFinish:j=>{var E;j.studyCourseId=parseInt((E=t.studyCourse)==null?void 0:E.id),j.dob=u,j.regionId=parseInt(n),j.districtId=parseInt(r),j.wardId=parseInt(h),b(j)},requiredMark:!0,children:[e.jsx(o.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(o.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(o.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10,marginTop:5},children:e.jsx(w,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(T,{size:"small",onClick:()=>y("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx($,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(o.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx($,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(o.Item,{name:"phones",label:"Phones Number",rules:[{required:!1,type:"string",message:"Please input Phones Number"}],children:e.jsx($,{size:"large",placeholder:"Enter Phones Numbers ..."})}),e.jsx(o.Item,{name:"groupId",label:"Group/Stream",style:{marginTop:20},rules:[{required:v.length>0,type:"string",message:"Please choose Group/Stream"}],children:e.jsx(V,{placeholder:"Please Choose Group/Stream ...",style:{width:220},onChange:P,size:"large",dropdownStyle:{zIndex:9999},children:v.map(j=>e.jsx(et,{value:j.id,children:j.name}))})}),e.jsxs(ye,{direction:"horizontal",size:"small",children:[e.jsx(o.Item,{name:"dob",label:"Date of Birth",style:{marginTop:20},rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(ct,{onChange:C,size:"large",disabledDate:j=>j&&j>Ge().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(o.Item,{name:"gender",label:"Gender",style:{marginTop:20},rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:d,children:e.jsxs(V,{placeholder:"Please Choose Gender ...",style:{width:220},onChange:P,size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(et,{value:"female",children:"Female"}),e.jsx(et,{value:"male",children:"Male"})]})})]}),e.jsxs(ye,{direction:"horizontal",size:"small",children:[e.jsx(ut,{onChange:F,regionId:n,label:"Region",name:"regionId",size:"middle"}),e.jsx(dt,{size:"middle",regionId:parseInt(n),districtId:r,onChange:p,label:"District",name:"districtId"})]}),e.jsx(ye,{direction:"horizontal",size:"small",children:e.jsx(ht,{size:"middle",districtId:parseInt(r),wardId:h,onChange:M,label:"Ward",name:"wardId"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},il=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,ll=t=>{const[n,i]=s.useState(!1),[r,a]=s.useState(!1),[h,c]=s.useState(""),d=async l=>{i(!0),a(!0);const{data:u}=await Q.custom({url:"",method:"post",meta:{operation:"createStudyCourseStudentsByUploading",variables:{studyCourseId:{value:parseInt(t.studyCourse.id),type:"Int",required:!0},files:{value:l.files,type:"[Upload]",required:!0}},fields:["success","message"]}}).catch(()=>(y.error("Something Went Wrong ..."),{data:null})).then(S=>S);u&&(u.success?y(u.message):y.error(u.message),c(u.message)),i(!1),a(!0)};return s.useEffect(()=>{},[t.randKey]),r&&!n?e.jsx(e.Fragment,{children:e.jsx(It,{type:"info",message:e.jsx(e.Fragment,{children:e.jsxs("p",{children:[h,e.jsx(T,{style:{marginLeft:20},onClick:()=>{t.form.resetFields(),a(!1),i(!1)},children:"Upload Another File"})]})})})}):e.jsx(e.Fragment,{children:e.jsx(le,{spinning:n&&!r,children:e.jsxs(o,{layout:"vertical",form:t.form,onFinish:l=>{d(l)},requiredMark:!0,children:[e.jsx(o.Item,{label:"Students Excel File",children:e.jsx(o.Item,{name:"files",valuePropName:"fileList",getValueFromEvent:il,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload students excel file"}],children:e.jsxs(Ct.Dragger,{name:"files",accept:".xls, .xlsx",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(it,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsxs("span",{children:["Download Uploading Excel Format Template",e.jsx("span",{style:{marginLeft:10},children:e.jsxs("a",{href:xe.course_student_registration_template_file,target:"_blank",children:[e.jsx(vt,{}),"Download"]})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Register"})})]})})})},Wt=t=>{const[n,i]=s.useState([]),[r,a]=s.useState(!0),[h,c]=s.useState(1),[d]=o.useForm(),[l,u]=s.useState(0),[S,v]=s.useState(0),[k,A]=s.useState(!0),C=async M=>{dr(M,t.module.id,t.memberType).then(F=>{F&&(F.success?(y.success(F.message),i(n.filter(p=>p.id.toString()!==M.id.toString())),t.onAdd(F.schoolModuleMember)):y.error(F.message))})},P=async(M,F="")=>{a(!0),ur(M,F,t.module.id,t.memberType).then(p=>{p&&(v(p.total),u(p.pages),c(p.page),A(p.hasNext),i([...n,...p.results]))}),a(!1)};return s.useEffect(()=>{P(1)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(K,{span:10,children:e.jsx(o,{layout:"vertical",form:d,onFinish:M=>{n.length=0,i([]),P(1,M.key)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search Member(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:14,children:e.jsx(T,{icon:e.jsx(ie,{}),size:"large",onClick:()=>d.submit()})})]}),e.jsx(le,{spinning:r,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(ot,{dataLength:S,next:()=>P(h),hasMore:k,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(le,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(oe,{itemLayout:"horizontal",dataSource:n,renderItem:M=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(oe.Item,{style:{margin:0,padding:0},actions:[e.jsx(te,{title:"Are you sure to add this member?",onConfirm:()=>C(M),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{size:"large",icon:e.jsx(_e,{})})})],children:e.jsx(oe.Item.Meta,{avatar:e.jsx(as,{src:M.user.pic}),title:e.jsxs("a",{children:[e.jsx("span",{children:M.user.fullName}),M.registrationNumber&&e.jsx("span",{style:{marginLeft:5},children:e.jsx(ae,{color:"green",children:M.registrationNumber})})]}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:M.email})})})},"adding-module-member-"+M.id)})})})})})]})},Ut=t=>{var g,I;const[n,i]=s.useState([]),[r,a]=s.useState(!1),[h,c]=s.useState(!1),[d,l]=s.useState(1),[u,S]=s.useState(0),[v,k]=s.useState(20),[A,C]=s.useState(""),[P,M]=s.useState(!1),[F,p]=s.useState(!0),[z]=o.useForm(),j=!fe.useBreakpoint().lg,E=async()=>{L(1,"",v)},N=async m=>{mr(m).then(x=>{x&&(x.success?(y.success(x.message),i(n.filter(B=>B.id!==m))):y.error(x.message))})},R=[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(m,x)=>e.jsx("span",{children:e.jsx("a",{children:x.schoolMember.fullName??x.schoolMember.user.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(m,x)=>e.jsx("span",{children:x.schoolMember.registrationNumber})},{title:"Date Joined",dataIndex:"created",render:(m,x)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(x.created)})})})},{title:"Status",dataIndex:"isActive",render:(m,x)=>e.jsx("a",{children:x!=null&&x.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(m,x)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsx(H,{children:e.jsx(H.Item,{icon:e.jsx(de,{}),children:e.jsx(w,{title:"Delete a Module Member",children:e.jsx(te,{title:"Are you sure to delete this ",onConfirm:()=>N(x==null?void 0:x.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(x!=null&&x.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:B=>B.preventDefault(),children:e.jsx(Ee,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],L=async(m,x="",B=20)=>{var U;hr(m,x,B,((U=t.module)==null?void 0:U.id)??0,t.memberType??"").then(O=>{O&&(l(O.page),S(O.total),M(O.hasNext),i(O.results))}),p(!1)};return s.useEffect(()=>{L(d)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:j?24:16,children:e.jsx(o,{layout:"vertical",form:z,onFinish:m=>{l(1),n.length=0,L(1,m.key)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(K,{span:j?24:8,style:{display:"flex",justifyContent:"flex-end"},children:[t.memberType==="Student"&&e.jsx(T,{size:"large",icon:e.jsx(ce,{}),onClick:()=>c(!0),children:"Enroll Student(s)"}),t.memberType==="Teacher"&&e.jsx(T,{size:"large",icon:e.jsx(ce,{}),onClick:()=>c(!0),children:"Enroll Teacher(s)/Lecturer(s)"})]})]}),e.jsx(he,{loading:F,columns:R,dataSource:n,scroll:{x:!0,y:"calc(100vh - 350px)"},pagination:{onChange:(m,x)=>{k(x),L(m,A,x)},total:u,pageSize:v,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(Se,{anchor:"left",open:r,onClose:m=>a(m),width:"80vw",title:"Adding "+((g=t.module)==null?void 0:g.name)+" Module Members",children:e.jsx(Wt,{module:t.module,randKey:Math.random(),onAdd:E,memberType:t.memberType})}),e.jsx(Se,{anchor:"left",open:h,onClose:m=>c(m),width:"80vw",title:"Enrolling "+((I=t.module)==null?void 0:I.name)+" Module Members",children:e.jsx(Wt,{module:t.module,randKey:Math.random(),onAdd:E,memberType:t.memberType})})]})},ol=t=>{const[n,i]=s.useState([]),[r,a]=s.useState([]),[h,c]=s.useState(!1),[d,l]=s.useState(!1),[u,S]=s.useState(0),[v,k]=s.useState(20),[A,C]=s.useState(""),[P,M]=s.useState(!0),[F]=o.useForm(),z=!fe.useBreakpoint().lg,b=async R=>{const{data:L}=await Q.custom({url:"",method:"post",meta:{operation:"studyCourseStudentEnroll",variables:{studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0},studentId:{value:R,type:"Int",required:!0}},fields:["success","message",{studyCourseStudent:xr}]}}).catch(()=>(y.error("Error in Bulk Enrolling of Students"),{data:null})).then(g=>g);L&&(L.success?(y.success(L.message),c(!1),l(!1),a([]),N(1,"",20),t.onAdd(L.studyCourseStudent)):y.error(L.message))},j=async()=>{const{data:R}=await Q.custom({url:"",method:"post",meta:{operation:"createStudyCourseStudentsBulk",variables:{studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0},students:{value:r,type:"[Int]",required:!0}},fields:["success","message"]}}).catch(()=>(y.error("Error in Bulk Enrolling of Students"),{data:null})).then(L=>L);R&&(R.success?(y.success(R.message),c(!1),l(!1),a([]),N(1,"",20),t.onAddAll()):y.error(R.message))},E=[{title:e.jsx(e.Fragment,{children:e.jsx(Me,{checked:d,onChange:R=>{R.target.checked?(c(!0),l(!0),a(n.map(L=>parseInt(L.id.toString())))):(c(!1),r.length=0,a([]),l(!1))}})}),dataIndex:"checkConfirm",fixed:!0,render:(R,L,g)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{defaultChecked:h,checked:h||r.includes(parseInt(L.id)),onChange:I=>{const m=parseInt(L.id);I.target.checked?a([m,...r]):a(r.filter(x=>x!==m))}})})},{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(R,L,g)=>e.jsx("span",{children:e.jsx("a",{children:L.fullName?L.fullName:L.user.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(R,L,g)=>e.jsx("span",{children:L.registrationNumber})},{title:"Email",dataIndex:"email",fixed:!0,render:(R,L,g)=>e.jsx(e.Fragment,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsx(ae,{color:"green",children:L.email?L.email:L.user.email?L.user.email:""}),e.jsx(ae,{color:"green",children:L.phone?L.phone:L.user.phone})]})})},{title:"Gender",dataIndex:"gender",fixed:!0,render:(R,L,g)=>e.jsx("span",{children:L.gender?L.gender:L.user.gender})},{title:"Status",dataIndex:"isActive",render:(R,L,g)=>e.jsx("a",{children:L!=null&&L.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(R,L,g)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(te,{title:"Adding Student "+(L.fullName?L.fullName:L.user.fullName),onConfirm:()=>b(parseInt(L.id)),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(L!=null&&L.canManage),overlayStyle:{zIndex:9999},children:e.jsx(T,{size:"large",icon:e.jsx(ce,{})})})})}],N=async(R,L="",g=20,I=[])=>{const{data:m}=await Q.custom({url:"",method:"get",meta:{operation:"studyCourseStudentsToEnroll",variables:{page:{value:R,type:"Int",required:!0},key:{value:L,type:"String",required:!1},pageSize:{value:g,type:"Int",required:!1},studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:He}]}}).catch(()=>(y.error("Error fetching students"),{data:null})).then(x=>x);m&&(S(m.total),i([...m.results])),M(!1)};return s.useEffect(()=>{N(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:18,children:e.jsx(o,{layout:"horizontal",form:F,onFinish:R=>{C(R.key),n.length=0,N(1,R.key,v,R.roles)},children:e.jsxs(ne,{children:[e.jsx(K,{span:z?24:16,children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(K,{children:e.jsx(T,{size:"large",icon:e.jsx(ie,{}),onClick:()=>F.submit()})})]})})}),r.length>0&&e.jsx(e.Fragment,{children:e.jsx(K,{span:6,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{size:"large",icon:e.jsx(ce,{}),onClick:j,children:"Add Selected"})})})]}),e.jsx(he,{loading:P,columns:E,dataSource:n,pagination:{onChange:(R,L)=>{k(L),N(R,A,L)},total:u,pageSize:v,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0,y:"calc(100vh - 280px)"}})]})},cl=t=>{var g;const[n,i]=s.useState([]),[r,a]=s.useState([]),[h,c]=s.useState(null),[d,l]=s.useState(!1),[u,S]=s.useState(0),[v,k]=s.useState(20),[A,C]=s.useState(""),[P,M]=s.useState(!0),[F]=o.useForm(),z=!fe.useBreakpoint().lg,b=[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(I,m,x)=>e.jsx("span",{children:e.jsx("a",{children:m.schoolMember.fullName?m.schoolMember.fullName:m.schoolMember.user.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(I,m,x)=>e.jsx("span",{children:m.schoolMember.registrationNumber})},{title:"Group/Stream",dataIndex:"group",fixed:!0,render:(I,m,x)=>{var B;return e.jsx("span",{children:(B=m==null?void 0:m.group)==null?void 0:B.name})}},{title:"Email",dataIndex:"email",fixed:!0,render:(I,m,x)=>e.jsx(e.Fragment,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsx(ae,{children:m.schoolMember.email?m.schoolMember.email:m.schoolMember.user.email?m.schoolMember.user.email:""}),e.jsx(ae,{children:m.schoolMember.phone?m.schoolMember.phone:m.schoolMember.user.phone})]})})},{title:"Gender",dataIndex:"gender",fixed:!0,render:(I,m,x)=>e.jsx("span",{children:m.schoolMember.gender?m.schoolMember.gender:m.schoolMember.user.gender})},{title:"Date Joined",dataIndex:"created",render:(I,m,x)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(m.created)})})})},{title:"Authed",dataIndex:"isAuthed",render:(I,m,x)=>{var B,U;return e.jsx("a",{children:(U=(B=m.schoolMember)==null?void 0:B.user)!=null&&U.isAuthed?e.jsx(ae,{color:"green",children:"Yes"}):e.jsx(ae,{color:"red",children:"Not"})})}},{title:"Status",dataIndex:"isActive",render:(I,m,x)=>e.jsx("a",{children:m!=null&&m.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(I,m,x)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsx(H,{children:e.jsx(H.Item,{icon:e.jsx(de,{}),children:e.jsx(w,{title:"Delete Student",color:"red",children:e.jsx(te,{title:"Are you sure to delete ",onConfirm:()=>E(m==null?void 0:m.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(m!=null&&m.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:B=>B.preventDefault(),children:e.jsx(Ee,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],j=async()=>{ds(1,"",20,parseInt(t.studyCourse.id.toString())).then(I=>{I&&a(I.results)})},E=async I=>{gr(I).then(m=>{m&&(m.success?(y.success(m.message),i(n.filter(x=>x.id!==I))):y.error(m.message))})},N=async(I,m="",x=20,B=[],U=0)=>{M(!0),jr(I,m,x,B,parseInt(t.studyCourse.id.toString()),U).then(O=>{O&&(S(O.total),i([...O.results])),M(!1)})},R=async I=>{i([I,...n])},L=async()=>{N(1,"",20)};return s.useEffect(()=>{j(),N(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:12,children:e.jsx(o,{layout:"horizontal",form:F,onFinish:I=>{C(I.key),n.length=0,N(1,I.key,v,I.roles)},children:e.jsxs(ne,{children:[e.jsx(K,{span:z?24:16,children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(K,{children:e.jsx(T,{size:"large",icon:e.jsx(ie,{}),onClick:()=>F.submit()})})]})})}),e.jsx(K,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{size:"large",icon:e.jsx(ce,{}),onClick:()=>l(!0),children:"Add Student(s)"})})]}),r.length>0&&e.jsxs("div",{children:[e.jsxs(T,{type:h===null?"primary":"default",onClick:()=>{c(null),N(1,"",20)},children:[h===null&&e.jsx(e.Fragment,{children:"All"}),h!==null&&e.jsx(e.Fragment,{children:e.jsx(ae,{children:"All"})})]}),r.map(I=>e.jsxs(T,{type:(h==null?void 0:h.id)===I.id?"primary":"default",onClick:()=>{c(I),N(1,"",20,[],I.id)},children:[(h==null?void 0:h.id)===I.id&&e.jsxs(e.Fragment,{children:[I.name," - ",I.totalStudents," Students"]}),(h==null?void 0:h.id)!==I.id&&e.jsxs(e.Fragment,{children:[e.jsx(ae,{children:I.name}),e.jsxs(ae,{color:"green",children:[I.totalStudents," Students"]})]})]},I.id))]}),e.jsx(he,{loading:P,columns:b,dataSource:n,pagination:{onChange:(I,m)=>{k(m),N(I,A,m)},total:u,pageSize:v,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"calc(100vh - 290px)"}}),e.jsx(Se,{title:"Enrolling "+((g=t.studyCourse)==null?void 0:g.course.name)+" Students",anchor:"left",open:d,onClose:I=>l(I),width:"70vw",children:e.jsx(ol,{studyCourse:t.studyCourse,randKey:Math.random(),onAdd:R,onAddAll:L})})]})},dl=t=>{var Te,ze,Ae,De;const[n,i]=s.useState(),[r,a]=s.useState([]),[h,c]=s.useState(0),[d,l]=s.useState(20),[u,S]=s.useState(""),[v,k]=s.useState(!0),[A]=o.useForm(),[C]=o.useForm(),[P]=o.useForm(),[M]=o.useForm(),p=!fe.useBreakpoint().lg,z=Ve(),[b,j]=s.useState(!1),[E,N]=s.useState(!1),[R,L]=s.useState(!1),[g,I]=s.useState(!1),[m,x]=s.useState(!1),[B,U]=s.useState(!1),[O,G]=s.useState(!1),X=q=>{i(q),L(!0)},me=q=>{i(q),I(!0)},ge=q=>{i(q),N(!0)},be=async q=>{yr(q).then(f=>{f&&(f.success?(y.success(f.message),C.resetFields(),j(!1),a([f.module,...r])):y.error(f.message))})},Y=async q=>{fr(q).then(f=>{f&&(f.success?(y.success(f.message),P.resetFields(),N(!1),a(r.map(J=>J.id.toString()===q.id.toString()?f.module:J))):y.error(f.message))})},D=async q=>{br(q).then(f=>{f&&(f.success?(y.success(f.message),a(r.filter(J=>J.id!==q))):y.error(f.message))})},se=async q=>{Cr(q).then(f=>{f&&(f.success?(y.success(f.message),a(r.map(J=>J.id===f.module.id?f.module:J))):y.error(f.message))})},ee=async q=>{vr(q).then(f=>{f&&(f.success?(y.success(f.message),a(r.map(J=>J.id===f.module.id?f.module:J))):y.error(f.message))})},ue=async(q,f="",J=20)=>{var je,qe;k(!0),((je=t==null?void 0:t.studyCourse)==null?void 0:je.id)??parseInt(z.studyCourseId)?pr(((qe=t==null?void 0:t.studyCourse)==null?void 0:qe.id)??parseInt(z.studyCourseId),q,f,J).then(Ie=>{Ie&&(c(Ie.total),a([...Ie.results]))}):Sr(q,f,J).then(Ie=>{Ie&&(c(Ie.total),a([...Ie.results]))}),k(!1)};s.useEffect(()=>{ue(1,"",20)},[]);const Re=[{title:"Name",dataIndex:"name",fixed:!0,render:(q,f,J)=>e.jsx("span",{children:e.jsx("a",{children:f.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(q,f,J)=>e.jsx("span",{children:e.jsx("a",{children:f.code})})},{title:"Course",dataIndex:"course",fixed:!0,render:(q,f,J)=>e.jsx("span",{children:e.jsx("a",{children:f.studyCourse.course.name})})},{title:"Year",dataIndex:"year",fixed:!0,render:(q,f,J)=>e.jsx("span",{children:f.studyCourse.year})},{title:"Level",dataIndex:"level",fixed:!0,render:(q,f,J)=>e.jsx("span",{children:f.studyCourse.levelDisplay})},{title:"Semester",dataIndex:"semester",fixed:!0,render:(q,f,J)=>e.jsx("span",{children:f.studyCourse.semesterDisplay})},{title:"Periods/Week",dataIndex:"periodsPerWeek",fixed:!0,render:(q,f,J)=>e.jsx("span",{children:f.periodsPerWeek})},{title:"Students",dataIndex:"totalStudents",fixed:!0,render:(q,f,J)=>e.jsx("a",{onClick:()=>me(f),children:e.jsx("span",{children:f.totalStudents})})},{title:"Lecturers",dataIndex:"totalTeachers",fixed:!0,render:(q,f,J)=>e.jsx("a",{onClick:()=>X(f),children:e.jsx("span",{children:f.totalTeachers})})},{title:"Assistants",dataIndex:"totalAssistants",fixed:!0,render:(q,f,J)=>e.jsx("span",{children:f.totalAssistants})},{title:"Has Drive",dataIndex:"hasDrive",render:(q,f,J)=>f.hasDrive?e.jsx(w,{title:"Click to View Drive",children:e.jsx(Rt,{style:{color:"green"}})}):e.jsx(w,{title:"Click to Auto Create Drive For "+f.name,placement:"left",children:e.jsx(te,{placement:"topLeft",title:"Click to Auto Create Drive For "+f.name,onConfirm:()=>se(f),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(Ot,{style:{color:"red"}})})})},{title:"Has Class",dataIndex:"hasClass",render:(q,f,J)=>f.hasClass?e.jsx(w,{title:"Click to View Class",children:e.jsx(Rt,{style:{color:"green"}})}):e.jsx(w,{title:"Click to Auto Create Class For "+f.name,placement:"left",children:e.jsx(te,{placement:"topLeft",title:"Click to Auto Create Drive For "+f.name,onConfirm:()=>ee(f),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(Ot,{style:{color:"red"}})})})},{title:"Created",dataIndex:"created",render:(q,f,J)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(f.created)})})})},{title:"Status",dataIndex:"isActive",render:(q,f,J)=>e.jsx("a",{children:f!=null&&f.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(q,f,J)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsxs(H,{children:[f.canDelete?e.jsx(H.Item,{icon:e.jsx(de,{}),children:e.jsx(te,{placement:"top",title:"Deleting "+f.name+", Are you sure?",onConfirm:()=>D(f==null?void 0:f.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})})}):e.jsx(e.Fragment,{}),e.jsx(H.Item,{icon:e.jsx(Pe,{}),onClick:()=>ge(f),children:e.jsx("a",{children:"Edit"})},"module-edit-"+f.id),e.jsx(H.Item,{icon:e.jsx(We,{}),onClick:()=>X(f),children:e.jsx("a",{children:"Lecture(s)"})},"module-lectures-"+f.id),e.jsx(H.Item,{icon:e.jsx(We,{}),onClick:()=>me(f),children:e.jsx("a",{children:"Student(s)"})},"module-students-"+f.id)]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:je=>je.preventDefault(),children:e.jsx(Ee,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:p?24:12,children:e.jsx(o,{layout:"vertical",form:A,onFinish:q=>{S(q.key),r.length=0,ue(1,q.key,d)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),((Te=t.studyCourse)==null?void 0:Te.canManage)&&e.jsxs(K,{span:p?24:12,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(w,{title:"Click to View "+t.studyCourse.course.name+" Students",children:e.jsx(T,{icon:e.jsx(Ye,{}),size:"large",onClick:()=>G(!0),children:"View Students"})}),e.jsx(w,{title:"Register Students by Uploading Excel File",children:e.jsx(T,{icon:e.jsx(ce,{}),size:"large",onClick:()=>U(!0),children:"Add Student"})}),e.jsx(w,{title:"Register Students by Uploading Excel File",children:e.jsx(T,{icon:e.jsx(Jt,{}),size:"large",onClick:()=>x(!0),children:"Upload Students"})}),e.jsx(w,{title:"Add New Study Course Module",children:e.jsx(T,{icon:e.jsx(ce,{}),size:"large",onClick:()=>j(!0),children:"Add Module"})})]})]}),e.jsx(he,{loading:v,columns:Re,dataSource:r,pagination:{onChange:(q,f)=>{l(f),ue(q,u,f)},total:h,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Adding Study Course Module",open:b,onClose:q=>j(q),width:"30vw",children:e.jsx(tl,{form:C,onFinish:be,randKey:Math.random(),studyCourse:t.studyCourse})}),e.jsx(re,{title:"Edit "+(n==null?void 0:n.name)+" Informations",open:E,onClose:q=>N(q),width:"40vw",children:e.jsx(nl,{studyCourse:t.studyCourse,module:n,onFinish:Y,form:P,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.name)+" Lecture(s)",open:R,width:"80vw",onClose:q=>L(q),children:e.jsx(Ut,{memberType:"Teacher",module:n})}),e.jsx(re,{title:(n==null?void 0:n.name)+" Student(s)",open:g,onClose:q=>I(q),width:"80vw",children:e.jsx(Ut,{memberType:"Student",module:n,height:75})}),e.jsx(re,{title:"Uploading "+((ze=t.studyCourse)==null?void 0:ze.course.name)+" Student(s) by Excel",open:m,onClose:q=>x(q),width:"40vw",children:e.jsx(ll,{form:M,studyCourse:t.studyCourse,randKey:Math.random()})}),e.jsx(re,{title:"Registering "+((Ae=t.studyCourse)==null?void 0:Ae.course.name)+" Student(s)",open:B,onClose:q=>U(q),width:"40vw",children:e.jsx(al,{studyCourse:t.studyCourse})}),e.jsx(Se,{title:((De=t.studyCourse)==null?void 0:De.course.name)+" Students",anchor:"left",open:O,onClose:q=>G(q),width:"80vw",children:e.jsx(cl,{studyCourse:t.studyCourse,randKey:Math.random()})})]})},ul=()=>{const[t,n]=s.useState(!1),[i,r]=s.useState(),a=Ve(),h=async c=>{n(!0);const{data:d}=await Q.custom({url:"",method:"get",meta:{operation:"studyCourse",variables:{id:{value:c,type:"Int",required:!0}},fields:["id","year","level","semester","levelDisplay","semesterDisplay","isActive","canDelete","canEdit","canManage",{course:["id","name"]}]}});r(d),n(!1)};return s.useEffect(()=>{document.title=xe.system_name+": Modules",a.studyCourseId!==void 0&&h(parseInt(a.studyCourseId))},[a.studyCourseId]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(pe,{to:"/schoolmanager",children:"Home"})}),i&&e.jsx(Z.Item,{children:e.jsx(pe,{to:"/schoolmanager/study/courses",children:"Study Courses"})}),e.jsx(Z.Item,{children:i?e.jsx(e.Fragment,{children:e.jsx(pe,{to:"/schoolmanager/modules",children:"Modules"})}):e.jsx(e.Fragment,{children:"Modules"})}),i&&e.jsx(e.Fragment,{children:e.jsxs(Z.Item,{children:[i.course.name,", ",i.levelDisplay," ,",i.semesterDisplay,", ",i.year]})})]}),e.jsx(dl,{height:77,control:!1,studyCourse:i})]})},hl=()=>(s.useEffect(()=>{document.title=xe.system_name+": Programmes"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(pe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Programmes (High Education Level)"})]}),e.jsx(Ur,{height:80,control:!1})]})),ml=t=>{const[n,i]=s.useState([]),r=async(a,h="")=>{const{data:c}=await Q.custom({url:"",method:"get",meta:{operation:"systemRolePermissions",variables:{page:{value:a,type:"Int",required:!0},key:{value:h,type:"String",required:!1},roleId:{value:t.role.id,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","created","updated","isActive","canEdit","canDelete","canManage",{permission:["id","name","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}]}});i([...c.results])};return s.useEffect(()=>{r(1)},[t.randKey,t.role]),e.jsx(e.Fragment,{children:e.jsx(oe,{dataSource:n,renderItem:a=>e.jsx(oe.Item,{children:a.permission.name})})})},xl=t=>{const[n,i]=s.useState(),[r,a]=s.useState([]),[h,c]=s.useState(!1),[d,l]=s.useState(0),[u,S]=s.useState(!0),[v,k]=s.useState(20),[A,C]=s.useState(""),[P]=o.useForm(),F=!fe.useBreakpoint().lg,[p,z]=s.useState(!1),b=g=>{i(g),z(!0)},j=g=>{i(g),c(!0)},E=[{title:"Name",dataIndex:"name",fixed:!0,render:(g,I,m)=>e.jsx("span",{children:e.jsx("a",{onClick:()=>j(I),children:I.role.name})})},{title:"Date Created",dataIndex:"created",render:(g,I,m)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(I.created)})})})},{title:"Status",dataIndex:"isActive",render:(g,I,m)=>e.jsx("a",{children:I!=null&&I.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(g,I,m)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(Ye,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>b(I),children:"Manage Permissions"})}),e.jsx(H.Item,{icon:e.jsx(Ye,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>j(I),children:"View Permissions"})}),e.jsx(H.Item,{icon:e.jsx(de,{}),children:e.jsx(te,{placement:"topLeft",title:`Are you sure you want to delete ${I.role.name} Role?`,onConfirm:()=>N(parseInt(I.id)),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Remove"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:x=>x.preventDefault(),children:e.jsx(Ee,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],N=async g=>{Ir(g).then(I=>{I&&(I.success?(y.success(I.message),a(r.filter(m=>m.id.toString()!==g.toString()))):y.error(I.message))})},R=async(g,I="",m=20)=>{S(!0),cs(g,I,m).then(x=>{x&&(l(x.total),a([...x.results]))}),S(!1)},L=async()=>{Fr().then(g=>{g&&(g.success?(y.success(g.message),R(1)):y.error(g.message))})};return s.useEffect(()=>{R(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:F?24:20,children:e.jsx(o,{layout:"vertical",form:P,onFinish:g=>{C(g.key),r.length=0,R(1,g.key)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:F?24:4,children:e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(w,{title:"Sync Default School Roles",children:e.jsx(T,{icon:e.jsx(jt,{}),size:"large",onClick:L})})})})]}),e.jsx(he,{loading:u,columns:E,dataSource:r,pagination:{onChange:(g,I)=>{k(I),R(g,A,I)},total:d,pageSize:v,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Manage Role Permissions For "+(n==null?void 0:n.role.name),width:"50vw",open:p,onClose:g=>z(g),children:e.jsx(Vr,{role:n==null?void 0:n.role,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.role.name)+" Permissions",width:"50vw",open:h,onClose:g=>c(g),children:e.jsx(ml,{role:n==null?void 0:n.role,randKey:Math.random()})})]})},gl=()=>(s.useEffect(()=>{document.title=xe.system_name+": Roles"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(pe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Roles"})]}),e.jsx(xl,{})]})),jl=()=>(s.useEffect(()=>{document.title=xe.system_name+": Settings"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(pe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Settings"})]}),e.jsx(Hr,{})]})),{Option:Je}=V;function*yl(t,n){let i=t;for(;i<n;)yield i++}const fl=t=>{const[n,i]=s.useState(!0),[r,a]=s.useState([]),h=async(c,d="")=>{i(!0);const{data:l}=await Q.custom({url:"",method:"get",meta:{operation:"schoolCourses",variables:{page:{value:c,type:"Int",required:!0},key:{value:d,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Ft}]}}).catch(()=>(y.error("Error occured while fetching courses"),{data:null})).then(u=>u);l&&a([...l.results]),i(!1)};return s.useEffect(()=>{h(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:n,children:e.jsxs(o,{layout:"vertical",form:t.form,onFinish:c=>{t.onFinish(c)},requiredMark:!0,children:[e.jsx(o.Item,{name:"course_id",label:"Course",rules:[{required:!0,type:"string",message:"Please choose Course..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Course",optionFilterProp:"children",onChange:c=>{},onSearch:c=>{},filterOption:(c,d)=>d.children.toLowerCase().includes(c.toLowerCase()),dropdownStyle:{zIndex:9999},children:r.map((c,d)=>e.jsx(Je,{value:c.id,children:c.name}))})}),e.jsx(o.Item,{name:"year",label:"Year",rules:[{required:!0,type:"number",message:"Please choose Year..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Year",optionFilterProp:"children",onChange:c=>{},onSearch:c=>{},filterOption:(c,d)=>d.children.toLowerCase().includes(c.toLowerCase()),dropdownStyle:{zIndex:9999},children:Array.from(yl(new Date().getFullYear(),new Date().getFullYear()+10)).map((c,d)=>e.jsx(Je,{value:c,children:c}))})}),e.jsx(o.Item,{name:"level",label:"Level",rules:[{required:!0,type:"number",message:"Please choose Level..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Level",optionFilterProp:"children",onChange:c=>{},onSearch:c=>{},filterOption:(c,d)=>d.children.toLowerCase().includes(c.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First Year"},{value:2,name:"Second Year"},{value:3,name:"Third year"},{value:4,name:"Fourth year"},{value:5,name:"Fifth year"}].map((c,d)=>e.jsx(Je,{value:c.value,children:c.name}))})}),e.jsx(o.Item,{name:"semester",label:"Semester",rules:[{required:!0,type:"number",message:"Please choose Semester..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Semester",optionFilterProp:"children",onChange:c=>{},onSearch:c=>{},filterOption:(c,d)=>d.children.toLowerCase().includes(c.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First"},{value:2,name:"Second"},{value:3,name:"Third"}].map((c,d)=>e.jsx(Je,{value:c.value,children:c.name}))})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Option:Qe}=V;function*pl(t,n){let i=t;for(;i<n;)yield i++}const Sl=t=>{const[n,i]=s.useState(t.studyCourse.isActive),[r,a]=s.useState(!0),[h,c]=s.useState([]),d=[{value:1,name:"First Year"},{value:2,name:"Second Year"},{value:3,name:"Third year"},{value:4,name:"Fourth year"},{value:5,name:"Fifth year"}],l=async(u,S="")=>{a(!0);const{data:v}=await Q.custom({url:"",method:"get",meta:{operation:"schoolCourses",variables:{page:{value:u,type:"Int",required:!0},key:{value:S,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Ft}]}}).catch(()=>(y.error("Error occured while fetching courses"),{data:null})).then(k=>k);v&&c([...v.results]),a(!1)};return s.useEffect(()=>{l(1),t.form.setFieldsValue({course_id:t.studyCourse.course.id,year:t.studyCourse.year,level:parseInt(t.studyCourse.level),semester:t.studyCourse.semester,is_active:t.studyCourse.isActive})},[t.form,t.studyCourse,t.randKey]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:r,children:e.jsxs(o,{layout:"vertical",form:t.form,onFinish:u=>{u.id=parseInt(t.studyCourse.id),u.is_active=n,t.onFinish(u)},requiredMark:!0,children:[e.jsx(o.Item,{name:"course_id",label:"Course",rules:[{required:!0,type:"string",message:"Please choose Course..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Course",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,S)=>S.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:h.map((u,S)=>e.jsx(Qe,{value:u.id,children:u.name}))})}),e.jsx(o.Item,{name:"year",label:"Year",rules:[{required:!0,type:"number",message:"Please choose Year..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Year",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,S)=>S.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:Array.from(pl(new Date().getFullYear(),new Date().getFullYear()+10)).map((u,S)=>e.jsx(Qe,{value:u,children:u}))})}),e.jsx(o.Item,{name:"level",label:"Level",rules:[{required:!0,type:"number",message:"Please choose Level..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Level",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,S)=>S.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:d.map((u,S)=>e.jsx(Qe,{value:u.value,children:u.name}))})}),e.jsx(o.Item,{name:"semester",label:"Semester",rules:[{required:!0,type:"number",message:"Please choose Semester..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Semester",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,S)=>S.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First"},{value:2,name:"Second"},{value:3,name:"Third"}].map((u,S)=>e.jsx(Qe,{value:u.value,children:u.name}))})}),e.jsx(o.Item,{name:"is_active",children:e.jsx(Me,{checked:n,onChange:()=>i(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Option:gt}=V;function*bl(t,n){let i=t;for(;i<n;)yield i++}const Cl=t=>{const[n,i]=s.useState(!0),[r,a]=s.useState([]),h=async d=>{const{data:l}=await Q.custom({url:"",method:"post",meta:{operation:"createSchoolStudyCourseBulk",variables:{year:{value:parseInt(d.year),type:"Int",required:!0},level:{value:d.level,type:"Int",required:!0},semester:{value:d.semester,type:"Int",required:!0}},fields:["success","message",{studyCourses:Xe}]}}).catch(()=>(y.error("Error occured while creating study course"),{data:null})).then(u=>u);l&&(l.success?(y.success(l.message),t.form.resetFields(),t.onFinish(l.studyCourses)):y.error(l.message))},c=async(d,l="")=>{i(!0);const{data:u}=await Q.custom({url:"",method:"get",meta:{operation:"schoolCourses",variables:{page:{value:d,type:"Int",required:!0},key:{value:l,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Ft}]}}).catch(()=>(y.error("Error occured while fetching courses"),{data:null})).then(S=>S);u&&a([...u.results]),i(!1)};return s.useEffect(()=>{c(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:n,children:e.jsxs(o,{layout:"vertical",form:t.form,onFinish:d=>{h(d)},requiredMark:!0,children:[e.jsxs(nt,{sx:{marginBottom:2},children:[e.jsxs(Zr,{severity:"info",sx:{marginBottom:2},children:[e.jsx(aa,{children:"Info"}),e.jsx("strong",{children:"Important Note:"})," All listed courses will be added to the study course as per the selected year, level and semester."]}),e.jsx(nt,{sx:{maxHeight:"200px",overflowY:"scroll"},children:e.jsx(oe,{bordered:!0,children:r.map((d,l)=>e.jsx(oe.Item,{children:d.name},l))})})]}),e.jsx(o.Item,{name:"year",label:"Year",rules:[{required:!0,type:"number",message:"Please choose Year..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Year",optionFilterProp:"children",onChange:d=>{},onSearch:d=>{},filterOption:(d,l)=>l.children.toLowerCase().includes(d.toLowerCase()),dropdownStyle:{zIndex:9999},children:Array.from(bl(new Date().getFullYear(),new Date().getFullYear()+10)).map((d,l)=>e.jsx(gt,{value:d,children:d}))})}),e.jsx(o.Item,{name:"level",label:"Level",rules:[{required:!0,type:"number",message:"Please choose Level..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Level",optionFilterProp:"children",onChange:d=>{},onSearch:d=>{},filterOption:(d,l)=>l.children.toLowerCase().includes(d.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First Year"},{value:2,name:"Second Year"},{value:3,name:"Third year"},{value:4,name:"Fourth year"},{value:5,name:"Fifth year"}].map((d,l)=>e.jsx(gt,{value:d.value,children:d.name}))})}),e.jsx(o.Item,{name:"semester",label:"Semester",rules:[{required:!0,type:"number",message:"Please choose Semester..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Semester",optionFilterProp:"children",onChange:d=>{},onSearch:d=>{},filterOption:(d,l)=>l.children.toLowerCase().includes(d.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First"},{value:2,name:"Second"},{value:3,name:"Third"}].map((d,l)=>e.jsx(gt,{value:d.value,children:d.name}))})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:vl}=$,Il=t=>{const[n,i]=s.useState(!1),[r]=o.useForm(),a=async h=>{var d;i(!0);const{data:c}=await Q.custom({url:"",method:"post",meta:{operation:"createStudyCourseGroup",variables:{studyCourseId:{value:parseInt(((d=t==null?void 0:t.studyCourse)==null?void 0:d.id.toString())??"0"),type:"Int",required:!0},name:{value:h.name,type:"String",required:!0},description:{value:h.description,type:"String",required:!1}},fields:["success","message",{studyCourseGroup:kt}]}}).catch(()=>(y.error("Error occured while fetching departments"),{data:null})).then(l=>l);c&&(c.success?(y.success(c.message),t.onFinish(c.studyCourseGroup),r.resetFields()):y.error(c.message)),i(!1)};return s.useEffect(()=>{},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:n,children:e.jsxs(o,{layout:"vertical",form:r,onFinish:h=>{a(h)},requiredMark:!0,children:[e.jsx(o.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(vl,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:Fl}=$,kl=t=>{var h,c;const[n,i]=s.useState(!1),[r]=o.useForm(),a=async d=>{var u;i(!0);const{data:l}=await Q.custom({url:"",method:"post",meta:{operation:"updateStudyCourseGroup",variables:{id:{value:parseInt(((u=t==null?void 0:t.studyCourseGroup)==null?void 0:u.id.toString())??"0"),type:"Int",required:!0},name:{value:d.name,type:"String",required:!0},description:{value:d.description,type:"String",required:!1}},fields:["success","message",{studyCourseGroup:kt}]}}).catch(()=>(y.error("Error occured while updating study course group"),{data:null})).then(S=>S);l&&(l.success?(y.success(l.message),t.onFinish(l.studyCourseGroup),r.resetFields()):y.error(l.message)),i(!1)};return s.useEffect(()=>{t.studyCourseGroup&&r.setFieldsValue({name:t.studyCourseGroup.name,description:t.studyCourseGroup.description})},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(le,{spinning:n,children:e.jsxs(o,{layout:"vertical",form:r,onFinish:d=>{a(d)},requiredMark:!0,initialValues:{name:(h=t.studyCourseGroup)==null?void 0:h.name,description:(c=t.studyCourseGroup)==null?void 0:c.description},children:[e.jsx(o.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx($,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(o.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Fl,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},Ml=t=>{var A;const[n,i]=s.useState(!0),[r,a]=s.useState([]),[h,c]=s.useState(!1),[d,l]=s.useState(null),[u,S]=s.useState(!1),v=async(C,P="")=>{i(!0);const{data:M}=await Q.custom({url:"",method:"get",meta:{operation:"studyCourseGroups",variables:{page:{value:C,type:"Int",required:!0},key:{value:P,type:"String",required:!1},studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:kt}]}}).catch(F=>(console.error(F),y.error("Error occured while fetching study course groups"),{data:null})).then(F=>F);M&&a([...M.results]),i(!1)},k=async C=>{const{data:P}=await Q.custom({url:"",method:"post",meta:{operation:"deleteStudyCourseGroup",variables:{id:{value:parseInt(C.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(y.error("Error occured while deleting study course group"),{data:null})).then(M=>M);P&&P.success&&(y.success(P.message),a(r.filter(M=>M.id!==C)))};return s.useEffect(()=>{v(1)},[t.form,t.studyCourse,t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:e.jsx(T,{icon:e.jsx(ce,{}),onClick:()=>c(!0),children:"Add Group/Stream"})}),e.jsx("div",{children:e.jsx(oe,{bordered:!0,dataSource:r,renderItem:C=>e.jsx(oe.Item,{actions:[e.jsx(T,{icon:e.jsx(Pe,{}),disabled:!C.canEdit,onClick:()=>{l(C),S(!0)},children:"Edit"}),e.jsx(te,{title:"Are you sure you want to delete this group/stream?",overlayStyle:{zIndex:999999},onConfirm:()=>k(C.id),okText:"Yes",cancelText:"No",children:e.jsx(T,{icon:e.jsx(de,{}),disabled:!C.canDelete,children:"Delete"})})],children:e.jsx(oe.Item.Meta,{title:C.name,description:C.description})})})}),e.jsx(re,{title:"Add Group/Stream to "+((A=t.studyCourse)==null?void 0:A.name),open:h,width:"30vw",onClose:C=>c(C),children:e.jsx(Il,{studyCourse:t.studyCourse,onFinish:C=>{a([C,...r])}})}),e.jsx(re,{title:"Updating Group/Stream to "+(d==null?void 0:d.name),open:u,width:"30vw",onClose:C=>S(C),children:e.jsx(kl,{studyCourseGroup:d,onFinish:C=>{a(r.map(P=>P.id===C.id?C:P)),S(!1)}})})]})},El=t=>{const[n,i]=s.useState(),[r,a]=s.useState([]),[h,c]=s.useState(0),[d,l]=s.useState(!0),[u,S]=s.useState(20),[v,k]=s.useState(""),[A]=o.useForm(),[C]=o.useForm(),[P]=o.useForm(),[M,F]=s.useState(!1);fe.useBreakpoint().lg;const[z,b]=s.useState(!1),[j,E]=s.useState(!1),[N,R]=s.useState(!1),L=O=>{i(O),F(!0)},g=O=>{i(O),R(!0)},I=async O=>{const{data:G}=await Q.custom({url:"",method:"post",meta:{operation:"createSchoolStudyCourse",variables:{courseId:{value:parseInt(O.course_id),type:"Int",required:!0},year:{value:parseInt(O.year),type:"Int",required:!0},level:{value:O.level,type:"Int",required:!0},semester:{value:O.semester,type:"Int",required:!0}},fields:["success","message",{studyCourse:Xe}]}}).catch(()=>(y.error("Error occured while creating study course"),{data:null})).then(X=>X);G&&(G.success?(y.success(G.message),C.resetFields(),b(!1),a([G.studyCourse,...r])):y.error(G.message))},m=async O=>{const{data:G}=await Q.custom({url:"",method:"post",meta:{operation:"updateSchoolStudyCourse",variables:{id:{value:O.id,type:"Int",required:!0},courseId:{value:parseInt(O.course_id),type:"Int",required:!0},year:{value:parseInt(O.year),type:"Int",required:!0},level:{value:O.level,type:"Int",required:!0},semester:{value:O.semester,type:"Int",required:!0},isActive:{value:O.is_active,type:"Boolean",required:!0}},fields:["success","message",{studyCourse:Xe}]}}).catch(()=>(y.error("Error occured while updating study course"),{data:null})).then(X=>X);G&&(G.success?(y.success(G.message),P.resetFields(),R(!1),a(r.map(X=>parseInt(X.id.toString())===parseInt(O.id.toString())?G.studyCourse:X))):y.error(G.message))},x=async O=>{const{data:G}=await Q.custom({url:"",method:"post",meta:{operation:"deleteSchoolStudyCourse",variables:{id:{value:parseInt(O.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(y.error("Error occured while deleting study course"),{data:null})).then(X=>X);G&&(G.success?(y.success(G.message),a(r.filter(X=>X.id!==O))):y.error(G.message))},B=async(O,G="",X=20)=>{const{data:me}=await Q.custom({url:"",method:"get",meta:{operation:"schoolStudyCourses",variables:{page:{value:O,type:"Int",required:!0},key:{value:G,type:"String",required:!1},pageSize:{value:X,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Xe}]}}).catch(()=>(y.error("Error occured while fetching study courses"),{data:null})).then(ge=>ge);me&&(c(me.total),a([...me.results])),l(!1)};s.useEffect(()=>{B(1,"",20)},[]);const U=[{title:"Course",dataIndex:"course",fixed:!0,render:(O,G,X)=>e.jsx("span",{children:e.jsx("a",{children:G.course.name})})},{title:"Year",dataIndex:"year",fixed:!0,render:(O,G,X)=>e.jsx("span",{children:G.year})},{title:"Groups/Streams",dataIndex:"totalGroups",fixed:!0,render:(O,G,X)=>e.jsx("span",{children:G.totalGroups>0?G.totalGroups:"One Main Group/Stream"})},{title:"Max Students",dataIndex:"maxStudents",fixed:!0,render:(O,G,X)=>e.jsx("span",{children:G.maxStudents})},{title:"Available Students",dataIndex:"availableStudents",fixed:!0,render:(O,G,X)=>e.jsx("span",{children:G.availableStudents})},{title:"Level",dataIndex:"level",fixed:!0,render:(O,G,X)=>e.jsx("span",{children:G.levelDisplay})},{title:"Semester",dataIndex:"semester",fixed:!0,render:(O,G,X)=>e.jsx("span",{children:G.semesterDisplay})},{title:"Created",dataIndex:"created",render:(O,G,X)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(G.created)})})})},{title:"Status",dataIndex:"isActive",render:(O,G,X)=>e.jsx("a",{children:G!=null&&G.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(O,G,X)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(w,{title:"Deleting Study Course",color:"red",placement:"left",children:e.jsx(te,{title:"Are you sure to delete this Study Course?",onConfirm:()=>x(G==null?void 0:G.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(G!=null&&G.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(T,{icon:e.jsx(de,{}),disabled:!(G!=null&&G.canDelete)})})}),e.jsx(w,{title:"Edit "+(G==null?void 0:G.name)+" Faculty",placement:"left",color:"green",children:e.jsx(T,{icon:e.jsx(Pe,{}),disabled:!(G!=null&&G.canEdit),onClick:()=>g(G)})}),e.jsx(w,{title:"View Study Course Groups/Streams",placement:"right",color:"green",children:e.jsx(T,{icon:e.jsx(kr,{}),disabled:!(G!=null&&G.canManage),onClick:()=>L(G)})}),e.jsx(w,{title:"View Study Course Modules",placement:"right",color:"green",children:e.jsx(pe,{to:"/schoolmanager/modules/"+G.id,children:e.jsx(T,{icon:e.jsx(Ye,{}),disabled:!(G!=null&&G.canManage)})})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:10,children:e.jsx(o,{layout:"vertical",form:A,onFinish:O=>{k(O.key),r.length=0,B(1,O.key,u)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(K,{span:14,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(w,{title:"Bulk Add New Study Course",children:e.jsx(T,{icon:e.jsx(ce,{}),size:"large",onClick:()=>E(!0),children:"Bulk Add Study Course"})}),e.jsx(w,{title:"Add New Study Course",children:e.jsx(T,{icon:e.jsx(ce,{}),size:"large",onClick:()=>b(!0),children:"Add Study Course"})})]})]}),e.jsx(he,{loading:d,columns:U,dataSource:r,pagination:{onChange:(O,G)=>{S(G),B(O,v,G)},total:h,pageSize:u,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Bulk Adding Study Course",open:j,onClose:O=>E(O),width:"30vw",children:e.jsx(Cl,{form:C,onFinish:O=>{a([...O,...r]),E(!1)},randKey:Math.random()})}),e.jsx(re,{title:"Adding Study Course",open:z,onClose:O=>b(O),width:"30vw",children:e.jsx(fl,{form:C,onFinish:I,randKey:Math.random()})}),e.jsx(re,{title:"Edit "+(n==null?void 0:n.course.name)+" Informations",open:N,onClose:O=>R(O),width:"40vw",children:e.jsx(Sl,{studyCourse:n,onFinish:m,form:P,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.course.name)+" Groups/Streams",open:M,onClose:O=>F(O),width:"40vw",children:e.jsx(Ml,{studyCourse:n})})]})},Ll=()=>(s.useEffect(()=>{document.title=xe.system_name+": Study Courses"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(pe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Study Courses"})]}),e.jsx(El,{height:77})]})),Al=t=>{const[n,i]=s.useState(),[r,a]=s.useState([]),[h,c]=s.useState(!0),[d,l]=s.useState(1),[u]=o.useForm(),[S,v]=s.useState(0),k=async C=>{_r(C).then(P=>{P.success?(y.success(P.message),a(r.filter(M=>M.id.toString()!==C.toString())),t.onAdd(P.schoolSubject),i(void 0)):y.error(P.message)})},A=async(C=d,P="",M=25)=>{c(!0),$r(C,P,M).then(F=>{F&&(v(F.pages),l(F.page),a([...F.results]))}),c(!1)};return s.useEffect(()=>{A(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(K,{span:24,children:e.jsx(o,{layout:"vertical",form:u,onFinish:C=>{r.length=0,a([]),A(1,C.key)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search Subject(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(le,{spinning:h,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(oe,{itemLayout:"horizontal",dataSource:r,renderItem:C=>e.jsx(oe.Item,{actions:[e.jsx(te,{placement:"topLeft",title:"Are you sure to add this subject?",onConfirm:()=>k(C.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{icon:e.jsx(_e,{})})})],children:e.jsx(oe.Item.Meta,{title:e.jsx(e.Fragment,{children:e.jsxs("a",{children:[C.name,e.jsx(ae,{color:"green",style:{marginLeft:10},children:C.schoolType.name})]})}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:C.description})})})},"file-"+C.id)})}),e.jsx(nt,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:1},children:e.jsx(us,{count:S,color:"secondary",onChange:(C,P)=>{A(P)}})})]})]})},Nl=t=>{const[n,i]=s.useState([]),[r,a]=s.useState(!1),[h,c]=s.useState(0),[d,l]=s.useState(20),[u,S]=s.useState(""),[v,k]=s.useState(!0),[A]=o.useForm(),P=!fe.useBreakpoint().lg,M=async b=>{i([b,...n])},F=async b=>{const{data:j}=await Q.custom({url:"",method:"post",meta:{operation:"deleteSchoolSubject",variables:{id:{value:parseInt(b.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(y.error("Error deleting subject"),{data:null})).then(E=>E);j&&(j.success?(y.success(j.message),i(n.filter(E=>E.id!==b))):y.error(j.message))},p=[{title:"Name",dataIndex:"name",fixed:!0,render:(b,j,E)=>e.jsx("span",{children:e.jsx("a",{children:j.subject.name})})},{title:"School Type",dataIndex:"schoolType",fixed:!0,render:(b,j,E)=>e.jsx("span",{children:e.jsx(ae,{color:"green",children:j.subject.schoolType.name})})},{title:"Date Created",dataIndex:"created",render:(b,j,E)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ve,{date:new Date(j.created)})})})},{title:"Status",dataIndex:"isActive",render:(b,j,E)=>e.jsx("a",{children:j!=null&&j.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(b,j,E)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsx(H,{children:e.jsx(H.Item,{icon:e.jsx(de,{}),children:e.jsx(w,{title:"Delete/Remove Subject",placement:"left",color:j!=null&&j.canDelete?"green":"red",children:e.jsx(te,{title:"Are you sure to delete this ",onConfirm:()=>F(j==null?void 0:j.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(j!=null&&j.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(T,{type:"text",disabled:!(j!=null&&j.canDelete),children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:N=>N.preventDefault(),children:e.jsx(Ee,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],z=async(b,j="",E=20)=>{const{data:N}=await Q.custom({url:"",method:"get",meta:{operation:"schoolSubjects",variables:{page:{value:b,type:"Int",required:!0},key:{value:j,type:"String",required:!1},pageSize:{value:E,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Mr}]}}).catch(()=>(y.error("Error getting subjects"),{data:null})).then(R=>R);N&&(c(N.total),i([...N.results])),k(!1)};return s.useEffect(()=>{z(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:P?24:20,children:e.jsx(o,{layout:"vertical",form:A,onFinish:b=>{S(b.key),n.length=0,z(1,b.key,d)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:P?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{size:"large",icon:e.jsx(ce,{}),onClick:()=>a(!0),children:"Add Subject"})})]}),e.jsx(he,{loading:v,columns:p,dataSource:n,pagination:{onChange:(b,j)=>{l(j),z(b,u,j)},total:h,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:"Adding School Subjects",anchor:"right",width:"35vw",onClose:()=>a(!1),open:r,children:e.jsx(Al,{randKey:Math.random(),onAdd:M})})]})},Pl=()=>(s.useEffect(()=>{document.title=xe.system_name+": Subjects"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(pe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Subjects"})]}),e.jsx(Nl,{})]})),Tl=t=>{const[n,i]=s.useState([]),[r,a]=s.useState(1),[h,c]=s.useState(0),[d,l]=s.useState(20),[u,S]=s.useState(""),[v,k]=s.useState(!1),[A,C]=s.useState(!0),[P]=o.useForm(),[M]=o.useForm(),[F,p]=s.useState(!1),z=async L=>{Lr(L).then(g=>{g&&(g.success?(y.success(g.message),i([g.loginReedemCode,...n]),M.resetFields()):y.error(g.message))})},b=async L=>{Pr(L).then(g=>{g&&(g.success?y.success(g.message):y.error(g.message))})},j=async L=>{Tr(L).then(g=>{g&&(g.success?(y.success(g.message),i(n.filter(I=>I.id!==L))):y.error(g.message))})},E=()=>{y("Canceled")},N=[{title:"Reedem Code",dataIndex:"code",fixed:!0,render:(L,g,I)=>e.jsx("span",{children:e.jsx("a",{children:g.code})})},{title:"User",dataIndex:"user",render:(L,g,I)=>{var m,x,B;return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:(g==null?void 0:g.user)&&e.jsxs("span",{children:["Full Name: ",(m=g==null?void 0:g.user)==null?void 0:m.firstName," ",(x=g==null?void 0:g.user)==null?void 0:x.middleName," ",(B=g==null?void 0:g.user)==null?void 0:B.lastName]})}),e.jsx("span",{children:(g==null?void 0:g.email)&&e.jsxs(ae,{children:["Email: ",g==null?void 0:g.email]})}),e.jsx("span",{children:(g==null?void 0:g.registrationNumber)&&e.jsxs(ae,{children:["Reg#: ",g==null?void 0:g.registrationNumber]})})]})}},{title:"Phone Number",dataIndex:"phone",fixed:!0,render:(L,g,I)=>e.jsx("span",{children:e.jsx("a",{children:g.phone})})},{title:"Is Used",dataIndex:"isUsed",render:(L,g,I)=>e.jsx("a",{children:g!=null&&g.isUsed?e.jsx("span",{style:{color:"green"},children:"Used"}):e.jsx("span",{style:{color:"red"},children:"Not Used"})})},{title:"Status",dataIndex:"isActive",render:(L,g,I)=>e.jsx("a",{children:g!=null&&g.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(L,g,I)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(te,{title:"Resend this Reedem Code?",onConfirm:()=>b(g==null?void 0:g.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(g!=null&&g.canManage),overlayStyle:{zIndex:9999},children:e.jsx(T,{size:"large",icon:e.jsx(Ar,{}),disabled:!(g!=null&&g.canDelete)})}),e.jsx(te,{title:"Are you sure to delete this Reedem Code?",onConfirm:()=>j(g==null?void 0:g.id),onCancel:()=>E,okText:"Yes",cancelText:"No",disabled:!(g!=null&&g.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(T,{size:"large",icon:e.jsx(de,{}),disabled:!(g!=null&&g.canDelete)})})]})}],R=async(L,g="",I=20)=>{Nr(L,g,I).then(m=>{a(m.page),c(m.total),k(m.hasNext),i(m.results)}),C(!1)};return s.useEffect(()=>{R(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(K,{span:10,children:e.jsx(o,{layout:"vertical",form:P,onFinish:L=>{a(1),n.length=0,R(1,L.key)},children:e.jsx(o.Item,{name:"key",children:e.jsx($,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:14,style:{display:"flex",justifyContent:"end"},children:e.jsx(T,{icon:e.jsx(_e,{}),size:"large",onClick:()=>p(!0),children:"Reedem"})})]}),e.jsx(he,{loading:A,columns:N,dataSource:n,scroll:{x:!0},pagination:{onChange:(L,g)=>{l(g),R(L,u,g)},total:h,pageSize:d,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(re,{title:"Creating Reedem Code",open:F,onClose:L=>p(L),children:e.jsxs(e.Fragment,{children:[e.jsxs(o,{layout:"vertical",form:M,onFinish:L=>{z(L)},children:[e.jsx(o.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,type:"string",message:"Please input Phone Number"}],children:e.jsx($,{size:"large",placeholder:"Phone Number ...",prefix:e.jsx(is,{}),autoComplete:"off"})}),e.jsx(o.Item,{name:"email",label:"Email Address",children:e.jsx($,{size:"large",placeholder:"Email Address ...",prefix:e.jsx(ls,{}),autoComplete:"off",allowClear:!0})}),e.jsx(o.Item,{name:"registrationNumber",label:"Registration Number",children:e.jsx($,{size:"large",placeholder:"Registration Number ...",prefix:e.jsx(Er,{}),autoComplete:"off",allowClear:!0})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"end"},children:e.jsx(T,{size:"large",onClick:()=>M.submit(),children:"Reedem"})})]})})]})},zl=()=>(s.useEffect(()=>{document.title=xe.system_name+": Login Reedems"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(pe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Login Reedems"})]}),e.jsx(Tl,{height:80})]})),oo=t=>{const{page:n}=t;return n==="SchoolLoginReedemPage"?e.jsx(zl,{}):n==="SchoolSubjectsPage"?e.jsx(Pl,{}):n==="SchoolStudyCoursesPage"?e.jsx(Ll,{}):n==="SchoolSettingsPage"?e.jsx(jl,{}):n==="SchoolRolesPage"?e.jsx(gl,{}):n==="SchoolProgrammesPage"?e.jsx(hl,{}):n==="SchoolModulesPage"?e.jsx(ul,{}):n==="SchoolMembersPage"?e.jsx(Zi,{}):n==="SchoolFeeEducationLevelsPage"?e.jsx(Ni,{}):n==="SchoolFeesPage"?e.jsx(ki,{}):n==="SchoolFacultiesPage"?e.jsx(Si,{}):n==="SchoolExaminationsPage"?e.jsx(xi,{}):n==="SchoolDepartmentsPage"?e.jsx(mi,{}):n==="SchoolCoursesPage"?e.jsx(ai,{}):n==="SchoolEducationLevelsPage"?e.jsx(Za,{}):n==="SchoolManagerPage"?e.jsx(Aa,{}):e.jsx("div",{children:"Page not found ..."})};export{oo as SchoolManagerPages};
