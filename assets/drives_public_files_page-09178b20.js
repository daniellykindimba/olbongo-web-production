import{r as t,c as o,l as I,aE as b,j as e,a as C,R as P,d as k,I as D,e as E,y as B,D as H,g as N,e6 as q,_ as R,H as l,e8 as L,al as O}from"./index-c92f9f6b.js";import{F as T}from"./file_item_component-e91df2a0.js";import{F as _}from"./files_component-18e22fb5.js";import"./index-8dba23b7.js";import"./index-c439524c.js";import"./toConsumableArray-bbf3d55f.js";import"./index.esm-2a6d2955.js";import"./iconBase-1d410209.js";import"./index-fb8c891a.js";const z=G=>{const[n,c]=t.useState([]),[u,h]=t.useState(!0),[x,f]=t.useState(1),[M,g]=t.useState(0),[A,j]=t.useState(!0),[J,F]=t.useState(0),[S]=o.useForm();I();const[v,w]=t.useState(!1),[r,K]=t.useState(),m=!b.useBreakpoint().lg,p=async(a,i="",d=!1)=>{const{data:s}=await N.custom({url:"",method:"get",meta:{operation:"publicFiles",variables:{page:{value:a,type:"Int",required:!0},key:{value:i,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:q}]}}).catch(()=>(R.error("Error while fetching files"),{data:null})).then(y=>y);s&&(g(s.total),F(s.pages),j(s.hasNext),f(s.page),(i.length>0||i.length===0&&d)&&c(s.results),s.results.length>0&&!d&&c(n.concat(s.results))),h(!1)};return t.useEffect(()=>{p(x)},[]),u?e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(C,{})})}):e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx(k,{span:m?24:20,children:e.jsx(o,{layout:"vertical",form:S,onFinish:a=>p(0,a.key,!0),children:e.jsx(o.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(E,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(B,{children:e.jsx(_,{loading:u,data:n,min:!1})}),e.jsx(H,{title:"File Informations",anchor:"right",width:m?"100vw":"35vw",onClose:a=>w(a),open:v,children:e.jsx(T,{id:r==null?void 0:r.id})})]})},se=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsxs(l,{children:[e.jsxs(l.Item,{children:[e.jsx(L,{}),e.jsx(O,{to:"/odrive",children:"Home"})]}),e.jsx(l.Item,{children:"Public Files"})]})}),e.jsx(z,{})]});export{se as DrivesPublicFilesPage};
