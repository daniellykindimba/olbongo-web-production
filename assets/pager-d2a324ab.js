import{dq as ge,j as e,r as s,F as p,q as xe,y as R,z as D,I as Q,S as W,u as H,a5 as te,B as z,T as B,bc as re,ak as je,D as ye,a2 as ne,bP as fe,J as f,K as P,G as q,C as X,ax as A,cE as Se,au as le,L as ie,ap as oe,ck as ve,b6 as Pe,v as Ie,bE as be,s as we,ad as Ce,ae as qe,bN as ae,t as he,H as Te,aM as Le,a6 as ce,a9 as pe,cg as ze,cL as Ne}from"./index-96b6a8d9.js";import{S as ue}from"./index-b0ecca4f.js";import{B as Y}from"./Breadcrumb-249d9435.js";import{T as de}from"./Table-29a32fc4.js";import"./index-0ed15280.js";const Fe=ge(e.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"}),"CloudDownload"),ke=a=>{var K;const[n,m]=s.useState(!1),[o]=p.useForm(),[I,T]=s.useState([]),[x,L]=s.useState(null),[b,N]=s.useState(!1),[h,g]=s.useState(!1),[i,j]=s.useState(1),[u,d]=s.useState(0),[l,y]=s.useState(!1);xe();const v=c=>{L(c),y(!0)},U=async c=>{const{data:F}=await f.custom({url:"",method:"post",meta:{operation:"createPastPaperDownload",variables:{id:{value:c.id,type:"Int",required:!0}},fields:["success","message"]}}).catch(S=>(console.error(S),P.error("Error creating download"),{data:null})).then(S=>S);F?F.success?(T(I.map(S=>(S.id===c.id&&(S.downloads=S.downloads+1),S))),window.open(c.doc,"_blank")):P.error("Error creating download"):P.error("Error in downloading")},O=async(c,F=20,S="")=>{m(!0);const{data:M}=await f.custom({url:"",method:"get",meta:{operation:"pastPapersSearch",variables:{page:{value:c,type:"Int",required:!0},key:{value:S,type:"String",required:!1},pageSize:{value:F,type:"Int",required:!1},year:{value:a.year,type:"Int",required:!1},subjectId:{value:a.subject,type:"Int",required:!1},schoolId:{value:a.school,type:"Int",required:!1},examinationTypeId:{value:a.examinationType,type:"Int",required:!1},educationLevelId:{value:a.educationLevel,type:"Int",required:!1},national:{value:a.national,type:"Boolean",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","description","year","doc","downloads","created","updated","canEdit","canManage","canDelete",{school:["id","name"]},{subject:["id","name"]},{schoolType:["id","name"]},{educationLevel:["id","name"]},{examinationType:["id","name"]},{author:["id"]}]}]}}).catch(()=>(P.error("Error getting Books"),{data:null})).then(t=>t);m(!1),M&&(T(M.results),d(M.total),j(M.page),N(M.hasNext),g(M.hasPrev))};return s.useEffect(()=>{O(1)},[a.randKey,a.school,a.subject,a.year,a.educationLevel,a.examinationType,a.national]),e.jsxs(e.Fragment,{children:[e.jsx(R,{style:{display:"flex",justifyContent:"center"},children:e.jsx(D,{span:12,children:e.jsx(p,{layout:"vertical",form:o,onFinish:c=>{O(1,20,c.key)},children:e.jsx(p.Item,{name:"key",children:e.jsx(Q,{size:"large",placeholder:"Search Past Paper(s)...",prefix:e.jsx(W,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(H,{sx:{maxHeight:"70vh",minHeight:"70vh",overflow:"auto"},children:e.jsx(te,{loading:n,itemLayout:"horizontal",dataSource:I,renderItem:c=>{var F,S,M,t;return e.jsxs(e.Fragment,{children:[e.jsx(te.Item,{actions:[e.jsx(z,{danger:!0,onClick:()=>v(c),children:"View/Read"},"list-loadmore-more")],children:e.jsx(te.Item.Meta,{title:e.jsxs(e.Fragment,{children:[e.jsxs("a",{onClick:()=>v(c),children:[c.title,e.jsxs(B,{style:{marginLeft:"10px"},children:["Downloads: ",c.downloads]})]}),e.jsx(re,{title:"Download",placement:"top",children:e.jsx(z,{danger:!0,size:"small",icon:e.jsx(Fe,{}),onClick:()=>{U(c)}})})]}),description:e.jsxs(e.Fragment,{children:[c.school&&e.jsxs(B,{children:["School: ",(F=c.school)==null?void 0:F.name]}),c.subject&&e.jsxs(B,{children:["Subject: ",(S=c.subject)==null?void 0:S.name]}),c.year&&e.jsxs(B,{children:["Year: ",c.year]}),c.examinationType&&e.jsxs(B,{children:["Examination Type: ",(M=c.examinationType)==null?void 0:M.name]}),c.educationLevel&&e.jsxs(B,{children:["Education Level: ",(t=c.educationLevel)==null?void 0:t.name]})]})})}),e.jsx(je,{})]})}})}),(b||h)&&e.jsx(H,{sx:{marginTop:"20px",display:"flex",justifyContent:"center"},children:e.jsx(ye,{defaultCurrent:i,total:u,onChange:(c,F)=>{O(c,F)}})}),e.jsx(ne,{anchor:"right",open:l,onClose:c=>y(c),title:e.jsxs("b",{children:[x==null?void 0:x.title," - ",(K=x==null?void 0:x.educationLevel)==null?void 0:K.name," - ",x==null?void 0:x.year]}),width:"80vw",children:e.jsx(e.Fragment,{children:e.jsx(me,{url:x==null?void 0:x.doc})})})]})},me=({url:a})=>{const[n,m]=s.useState(!0),o=()=>{m(!0),setTimeout(()=>{m(!1)},3e3)};return e.jsxs(e.Fragment,{children:[n&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"89vh"},children:[e.jsx(fe,{color:"secondary"}),e.jsx("h4",{children:"Loading..."})]}),e.jsx("iframe",{src:a+"#toolbar=0",style:{width:"100%",height:"89vh",display:n?"none":"block"},onLoad:o})]})},{Option:J}=A;let Z=[];for(let a=1960;a<=new Date().getFullYear();a++)Z.push(a);Z=Z.reverse();const Ee=a=>{const[n,m]=s.useState(!1),[o,I]=s.useState([]),[T,x]=s.useState([]),[L,b]=s.useState([]),[N,h]=s.useState([]),[g,i]=s.useState(),[j,u]=s.useState(),[d,l]=s.useState(),[y,v]=s.useState(),[U,O]=s.useState(),[K,c]=s.useState(!1),[F]=p.useForm(),[S,M]=s.useState(!1),t=async(r,E="",$=25)=>{const{data:V}=await f.custom({url:"",method:"get",meta:{operation:"subjects",variables:{page:{value:r,type:"Int",required:!0},key:{value:E,type:"String",required:!1},pageSize:{value:$,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canDelete","canManage"]}]}}).catch(_=>({data:null})).then(_=>_);V&&h(V.results)},w=async(r,E="",$=25)=>{const{data:V}=await f.custom({url:"",method:"get",meta:{operation:"educationLevels",variables:{page:{value:r,type:"Int",required:!0},key:{value:E,type:"String",required:!1},pageSize:{value:$,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canDelete","canManage"]}]}}).catch(_=>({data:null})).then(_=>_);V&&b(V.results)},k=async(r,E="",$=25)=>{const{data:V}=await f.custom({url:"",method:"get",meta:{operation:"examinationsTypes",variables:{page:{value:r,type:"Int",required:!0},key:{value:E,type:"String",required:!1},pageSize:{value:$,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canDelete","canManage"]}]}}).catch(_=>({data:null})).then(_=>_);V&&I(V.results)},C=async(r,E="",$=25)=>{const{data:V}=await f.custom({url:"",method:"get",meta:{operation:"schools",variables:{page:{value:r,type:"Int",required:!0},key:{value:E,type:"String",required:!1},pageSize:{value:$,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","serialNumber","isActive","created","updated","canDelete","canManage"]}]}}).catch(_=>({data:null})).then(_=>_);V&&x(V.results)};return s.useEffect(()=>{C(1),k(1),w(1),t(1)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(q,{container:!0,spacing:2,children:e.jsx(q,{item:!0,xs:12,children:e.jsxs(H,{style:{fontSize:18,marginBottom:5,display:"flex",alignItems:"center",height:40},children:["Enable Advanced Past Papers Search Filter",e.jsx(H,{sx:{display:"inline",marginLeft:2},children:e.jsx(ue,{size:"default",onChange:r=>{M(r),r||(F.resetFields(),O(null),u(null),v(null),i(null),l(null),c(!1))},title:"Advanced Filter"})})]})})}),e.jsxs(q,{container:!0,spacing:2,children:[S&&e.jsx(q,{item:!0,xs:12,children:e.jsx(X,{title:e.jsx(e.Fragment,{children:S&&e.jsxs("span",{style:{float:"right"},children:[e.jsx("span",{style:{marginRight:3,fontSize:16,fontWeight:"bolder"},children:"National Examinations"}),e.jsx(ue,{size:"default",onChange:r=>{c(r)}})]})}),children:S&&e.jsx(p,{layout:"vertical",form:F,onFinish:r=>{O(r.educationLevelId),u(r.subjectId),v(r.examinationTypeId),i(r.schoolId),l(r.year),c(K),m(!1)},onValuesChange:(r,E)=>{m(!0)},children:e.jsxs(q,{container:!0,spacing:2,children:[e.jsx(q,{item:!0,xs:12,sm:3,children:!K&&e.jsx(p.Item,{name:"examinationTypeId",label:"Examination Type",children:e.jsx(A,{size:"large",onChange:r=>{},dropdownStyle:{zIndex:9999},children:o.map(r=>e.jsx(J,{value:parseInt(r.id.toString()),children:r.name},"examinationType_"+r.id))})})}),e.jsx(q,{item:!0,xs:12,sm:2,children:e.jsx(p.Item,{name:"educationLevelId",label:"Education Level",rules:[{required:!1,type:"number",message:"Please input an Education Level"}],children:e.jsx(A,{size:"large",showSearch:!0,placeholder:"Select an Education Level...",filterOption:!1,onSearch:r=>{w(1,r)},onChange:r=>{},dropdownStyle:{zIndex:9999},children:L.map(r=>e.jsx(J,{value:parseInt(r.id.toString()),children:r.name},"educationLevel_"+r.id.toString()))})})}),e.jsx(q,{item:!0,xs:12,sm:2,children:e.jsx(p.Item,{name:"subjectId",label:"Subject",rules:[{required:!1,type:"number",message:"Please input a Subject"}],children:e.jsx(A,{size:"large",placeholder:"Select a Subject...",showSearch:!0,filterOption:!1,onSearch:r=>{t(1,r)},onChange:r=>{},dropdownStyle:{zIndex:9999},children:N.map(r=>e.jsx(J,{value:parseInt(r.id.toString()),children:r.name},"subject_"+r.id.toString()))})})}),e.jsx(q,{item:!0,xs:12,sm:2,children:e.jsx(p.Item,{name:"year",label:"Year",rules:[{required:!1,type:"number",message:"Please input a valid year"}],children:e.jsx(A,{size:"large",filterOption:!0,showSearch:!0,onChange:r=>{},dropdownStyle:{zIndex:9999},children:Z.map(r=>e.jsx(J,{value:r,children:r},"year_"+r))})})}),e.jsx(q,{item:!0,xs:12,sm:3,children:!K&&e.jsx(p.Item,{name:"schoolId",label:"School",children:e.jsx(A,{size:"large",filterOption:!1,showSearch:!0,onSearch:r=>{C(1,r)},onChange:r=>{},dropdownStyle:{zIndex:9999},children:T.map(r=>e.jsxs(J,{value:parseInt(r.id.toString()),children:[r.name," ",e.jsx("span",{style:{marginLeft:5},children:e.jsx(B,{color:"red",children:r.serialNumber})})]},"school_"+r.id.toString()))})})}),e.jsx(q,{item:!0,xs:12,sm:12,children:e.jsxs(p.Item,{children:[e.jsx(z,{style:{float:"left"},size:"large",icon:e.jsx(Se,{}),danger:!0,onClick:()=>{F.resetFields(),O(null),u(null),v(null),i(null),l(null),c(!1)},children:"Clear"}),e.jsx(z,{style:{float:"right"},htmlType:"submit",size:"large",icon:e.jsx(W,{}),disabled:!n,danger:!0,children:"Search"})]})})]})})})}),e.jsx(q,{item:!0,xs:12,children:e.jsx(X,{title:"Search Results",style:{minHeight:"86svh"},children:e.jsx(ke,{school:g,educationLevel:U,subject:j,year:d,examinationType:y,national:K})})})]})]})},Me=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsx(Y,{children:e.jsx(Y.Item,{children:e.jsx(le,{to:"/pastpapers",children:"Home"})})})}),e.jsx(Ee,{})]}),Ae=a=>{const[n,m]=s.useState(!1),[o,I]=s.useState([]),[T,x]=s.useState(0),[L,b]=s.useState(1),[N,h]=s.useState(25),g=async(i,j="",u=25)=>{m(!0);const{data:d}=await f.custom({url:"",method:"get",meta:{operation:"pastPapersEducationLevels",variables:{page:{value:i,type:"Int",required:!0},key:{value:j,type:"String",required:!1},pageSize:{value:u,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","totalPastPapers",{educationLevel:ve}]}]}}).catch(()=>({data:null})).then(l=>l);d&&(x(d.total),b(d.page),h(d.pageSize),I(d.results)),m(!1)};return s.useEffect(()=>{g(1)},[]),e.jsx(e.Fragment,{children:e.jsx(H,{children:n?e.jsx(ie,{}):e.jsxs(e.Fragment,{children:[o.length===0&&e.jsx(oe,{severity:"info",children:"No Education Level found"}),o.length>0&&e.jsx(q,{container:!0,spacing:2,children:o.map(i=>e.jsx(q,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2,children:e.jsx(re,{title:"Click to View Paster Papers",placement:"top",children:e.jsx(X,{style:{width:"100%",cursor:"pointer"},children:e.jsxs("h3",{children:[i.educationLevel.name,e.jsx(B,{color:"green",style:{marginLeft:10},children:i.totalPastPapers})]})})})},i.id))})]})})})},De=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx(Ae,{})}),{Option:G}=A,Oe=a=>Array.isArray(a)?a:a==null?void 0:a.fileList;let ee=[];for(let a=1960;a<=new Date().getFullYear();a++)ee.push(a);ee=ee.reverse();const Ve=a=>{const[n]=p.useForm(),[m,o]=s.useState(!1),[I,T]=s.useState(!1);Pe();const[x,L]=s.useState([]),[b,N]=s.useState([]),[h,g]=s.useState([]),[i,j]=s.useState([]),[u,d]=s.useState([]),[l,y]=s.useState(null);s.useState(),s.useState(),s.useState(),s.useState(),s.useState();const[v,U]=s.useState(!1),O=async(t,w="",k=25)=>{const{data:C}=await f.custom({url:"",method:"get",meta:{operation:"schoolTypes",variables:{page:{value:t,type:"Int",required:!0},key:{value:w,type:"String",required:!1},pageSize:{value:k,type:"Int",required:!1},showAll:{value:!0,type:"Boolean",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canDelete","canManage"]}]}}).catch(r=>({data:null})).then(r=>r);C&&L(C.results)},K=async(t,w="",k=25)=>{const{data:C}=await f.custom({url:"",method:"get",meta:{operation:"subjects",variables:{page:{value:t,type:"Int",required:!0},key:{value:w,type:"String",required:!1},pageSize:{value:k,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canDelete","canManage"]}]}}).catch(r=>({data:null})).then(r=>r);C&&d(C.results)},c=async(t,w="",k=25,C=[])=>{const{data:r}=await f.custom({url:"",method:"get",meta:{operation:"educationLevels",variables:{page:{value:t,type:"Int",required:!0},key:{value:w,type:"String",required:!1},pageSize:{value:k,type:"Int",required:!1},schoolTypes:{value:C,type:"[Int]",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canDelete","canManage"]}]}}).catch(E=>({data:null})).then(E=>E);r&&j(r.results)},F=async(t,w="",k=25)=>{const{data:C}=await f.custom({url:"",method:"get",meta:{operation:"examinationsTypes",variables:{page:{value:t,type:"Int",required:!0},key:{value:w,type:"String",required:!1},pageSize:{value:k,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canDelete","canManage"]}]}}).catch(r=>({data:null})).then(r=>r);C&&N(C.results)},S=async(t,w="",k=25,C=[])=>{const{data:r}=await f.custom({url:"",method:"get",meta:{operation:"schools",variables:{page:{value:t,type:"Int",required:!0},key:{value:w,type:"String",required:!1},pageSize:{value:k,type:"Int",required:!1},schoolTypes:{value:C,type:"[Int]",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","serialNumber","isActive","created","updated","canDelete","canManage"]}]}}).catch(E=>({data:null})).then(E=>E);r&&g(r.results)},M=async t=>{var k;o(!0),T(!1);const{data:w}=await f.custom({url:"",method:"post",meta:{operation:"createPastPaper",variables:{title:{value:t.title,type:"String",required:!0},file:{value:t.file,type:"Upload",required:!0},schoolTypeId:{value:parseInt(t.schoolTypeId.toString()),type:"Int",required:!0},examinationTypeId:{value:parseInt(t.examinationTypeId.toString()),type:"Int",required:!1},subjectId:{value:t.subjectId,type:"Int",required:!0},educationLevelId:{value:parseInt(t.educationLevelId.toString()),type:"Int",required:!0},schoolId:{value:parseInt(((k=t==null?void 0:t.schoolId)==null?void 0:k.toString())??"0"),type:"Int",required:!1},year:{value:t.year,type:"Int",required:!0}},fields:["success","message",{pastPaper:["id","title","description","year","doc",{school:["id","name","serialNumber"]},{subject:["id","name"]},{examinationType:["id","name"]},{educationLevel:["id","name"]},{author:["id","fullName","firstName","middleName","lastName","email"]},"isActive","created","updated","canDelete","canManage"]}]}}).catch(C=>(P.error("Error creating past paper"),{data:null})).then(C=>C);w&&(w.success?(P.success(w.message),n.resetFields(),a.onFinish(w.pastPaper)):P.error(w.message)),o(!1)};return s.useEffect(()=>{O(1),S(1,"",25,[]),F(1),K(1)},[a.random]),I?e.jsx(e.Fragment,{children:e.jsx(Ie,{direction:"vertical",style:{display:"flex",justifyContent:"center"},children:e.jsx(be,{message:"Success",description:e.jsx(e.Fragment,{children:e.jsx("p",{children:"File uploaded successfully"})}),action:[e.jsx(z,{onClick:()=>T(!1),children:"Upload another file(s)"})],type:"success"})})}):e.jsx(e.Fragment,{children:e.jsx(we,{spinning:m,children:e.jsxs(p,{layout:"vertical",form:n,onFinish:t=>{M(t)},requiredMark:!0,autoComplete:"off",children:[e.jsxs(R,{children:[e.jsxs(D,{span:12,style:{padding:5},children:[e.jsx(p.Item,{name:"title",label:"Examination Title",rules:[{required:!0,message:"Please input an Examination Title"}],children:e.jsx(Q,{size:"large",placeholder:"Examination Title"})}),e.jsx(p.Item,{name:"schoolTypeId",label:"School Type",rules:[{required:!0,message:"Please select a school type"}],children:e.jsx(A,{size:"large",onChange:t=>{y(t),c(1,"",100,[parseInt(t.toString())]),S(1,"",100,[parseInt(t.toString())]),n.resetFields(["educationLevelId","schoolId","subjectId"])},dropdownStyle:{zIndex:9999},children:x.map(t=>e.jsx(G,{value:t.id,children:t.name},"schoolType_"+t.id))})}),!v&&e.jsx(p.Item,{name:"examinationTypeId",label:"Examination Type",children:e.jsx(A,{size:"large",onChange:t=>{},dropdownStyle:{zIndex:9999},children:b.map(t=>e.jsx(G,{value:t.id,children:t.name},"examinationType_"+t.id))})})]}),e.jsxs(D,{span:12,style:{padding:5},children:[e.jsx(p.Item,{name:"educationLevelId",label:"Education Level",rules:[{required:!0,type:"number",message:"Please input an Education Level"}],children:e.jsx(A,{disabled:l===null,size:"large",showSearch:!0,placeholder:"Select an Education Level...",filterOption:!1,onSearch:t=>{c(1,t)},onChange:t=>{},dropdownStyle:{zIndex:9999},children:i.map(t=>e.jsx(G,{value:parseInt(t.id.toString()),children:t.name},"educationLevel_"+t.id.toString()))})}),e.jsx(p.Item,{name:"subjectId",label:"Subject",rules:[{required:!0,type:"number",message:"Please input a Subject"}],children:e.jsx(A,{size:"large",placeholder:"Select a Subject...",showSearch:!0,filterOption:!1,onSearch:t=>{K(1,t)},onChange:t=>{},dropdownStyle:{zIndex:9999},children:u.map(t=>e.jsx(G,{value:parseInt(t.id.toString()),children:t.name},"subject_"+t.id.toString()))})}),e.jsx(p.Item,{name:"year",label:"Year",rules:[{required:!0,type:"number",message:"Please input a valid year"}],children:e.jsx(A,{size:"large",filterOption:!0,showSearch:!0,onChange:t=>{},dropdownStyle:{zIndex:9999},children:ee.map(t=>e.jsx(G,{value:t,children:t},"year_"+t))})}),!v&&e.jsx(p.Item,{name:"schoolId",label:"School",children:e.jsx(A,{disabled:l===null,size:"large",filterOption:!1,showSearch:!0,onSearch:t=>{S(1,t)},onChange:t=>{},dropdownStyle:{zIndex:9999},children:h.map(t=>e.jsxs(G,{value:parseInt(t.id.toString()),children:[t.name," ",e.jsx("span",{style:{marginLeft:5},children:e.jsx(B,{color:"red",children:t.serialNumber})})]},"school_"+t.id.toString()))})})]}),e.jsx(D,{span:24,children:e.jsx(p.Item,{label:"Pick Past Paper File (PDF)",children:e.jsx(p.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:Oe,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload students excel file"}],children:e.jsxs(Ce.Dragger,{name:"file",accept:".pdf",multiple:!0,beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(qe,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(z,{size:"large",loading:m,onClick:()=>{y(null),n.resetFields()},danger:!0,children:"Reset"}),e.jsx(z,{type:"primary",size:"large",htmlType:"submit",loading:m,children:"Upload"})]})]})})})},_e=async()=>{const{data:a}=await f.custom({url:"",method:"post",meta:{operation:"syncPastPapersSubjects",fields:["success","message"]}}).catch(()=>({data:null})).then(n=>n);return a?a.success?(P.success(a.message),a.success):(P.error(a.message),!1):!1},Be=async()=>{const{data:a}=await f.custom({url:"",method:"post",meta:{operation:"syncPastPapersEducationLevels",fields:["success","message"]}}).catch(()=>({data:null})).then(n=>n);return a?a.success?(P.success(a.message),a.success):(P.error(a.message),!1):!1},He=async()=>{const{data:a}=await f.custom({url:"",method:"post",meta:{operation:"syncPastPapersSchools",fields:["success","message"]}}).catch(()=>({data:null})).then(n=>n);return a?a.success?(P.success(a.message),a.success):(P.error(a.message),!1):!1},Ke=a=>{var d;const[n,m]=s.useState([]),[o,I]=s.useState(null),[T]=p.useForm(),[x,L]=s.useState(!1),[b,N]=s.useState(!1),h=l=>{I(l),N(!0)},g=async(l,y="",v=25)=>{const{data:U}=await f.custom({url:"",method:"get",meta:{operation:"pastPapers",variables:{page:{value:l,type:"Int",required:!0},key:{value:y,type:"String",required:!1},pageSize:{value:v,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","description","year","doc",{school:["id","name","serialNumber"]},{subject:["id","name"]},{examinationType:["id","name"]},{educationLevel:["id","name"]},{author:["id","fullName","firstName","middleName","lastName","email"]},"isActive","created","updated","canDelete","canManage"]}]}}).catch(()=>({data:null})).then(O=>O);U&&m(U.results)},i=l=>{m([l,...n])},j=async l=>{const{data:y}=await f.custom({url:"",method:"post",meta:{operation:"deletePastPaper",variables:{id:{value:l,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>({data:null})).then(v=>v);y&&(y.success?(P.success(y.message),m(n.filter(v=>parseInt(v.id.toString())!==l))):P.error(y.message))},u=[{title:"Title",dataIndex:"title",key:"title",render:(l,y,v)=>e.jsxs("span",{children:[e.jsx("a",{children:y.title}),e.jsx(B,{color:"red",style:{marginLeft:5},children:y.year})]})},{title:"Education Level",dataIndex:"educationLevel",key:"educationLEvel",render:(l,y,v)=>e.jsx("span",{children:y.educationLevel.name})},{title:"Examination Type",dataIndex:"examinationType",key:"examinationType",render:(l,y,v)=>e.jsx("span",{children:y.examinationType.name})},{title:"Document",dataIndex:"doc",key:"doc",render:(l,y,v)=>e.jsx("span",{children:e.jsx(z,{icon:e.jsx(Le,{}),style:{float:"left"},danger:!0,onClick:()=>h(y),children:"View"})})},{title:"",key:"action",render:(l,y,v)=>e.jsx("span",{children:e.jsx(ce,{title:"Are you sure delete this manager?",placement:"topLeft",onConfirm:()=>j(parseInt(y.id.toString())),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(z,{icon:e.jsx(pe,{}),style:{float:"right"},danger:!0})})})}];return s.useEffect(()=>{g(1)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(R,{style:{marginTop:10},children:[e.jsx(D,{span:10,children:e.jsx(p,{layout:"vertical",form:T,onFinish:l=>{n.length=0,g(1,l.key)},children:e.jsx(p.Item,{name:"key",children:e.jsx(Q,{size:"large",placeholder:"Search ...",prefix:e.jsx(W,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(D,{span:14,style:{display:"flex",justifyContent:"end"},children:[e.jsx(z,{size:"large",danger:!0,icon:e.jsx(ae,{}),onClick:()=>Be(),children:"Sync Education Levels"}),e.jsx(z,{size:"large",icon:e.jsx(ae,{}),onClick:()=>{_e().then(l=>{l&&g(1)})},danger:!0,children:"Sync Subjects"}),e.jsx(z,{size:"large",icon:e.jsx(ae,{}),onClick:()=>He(),danger:!0,children:"Sync Schools"}),e.jsx(z,{size:"large",icon:e.jsx(he,{}),onClick:()=>L(!0),danger:!0,children:"Create/Add Past Paper"})]})]}),e.jsx(R,{children:e.jsx(D,{span:24,children:e.jsx(de,{columns:u,dataSource:n})})}),e.jsx(Te,{title:"Adding/Creating Past Paper",width:"80vw",open:x,onClose:l=>L(l),children:e.jsx(Ve,{onFinish:i})}),e.jsx(ne,{anchor:"right",open:b,onClose:l=>N(l),title:e.jsxs("b",{children:[o==null?void 0:o.title," - ",(d=o==null?void 0:o.educationLevel)==null?void 0:d.name," - ",o==null?void 0:o.year]}),width:"80vw",children:e.jsx(e.Fragment,{children:e.jsx(me,{url:o==null?void 0:o.doc})})})]})},Ye=()=>e.jsxs(H,{sx:{marginTop:{xs:10,sm:8}},children:[e.jsx(H,{children:e.jsxs(Y,{children:[e.jsx(Y.Item,{children:e.jsx(le,{to:"/pastpapers",children:"Home"})}),e.jsx(Y.Item,{children:"Past Papers Management"})]})}),e.jsx(Ke,{})]}),Re=()=>e.jsx(Ye,{}),Ue=a=>{const[n,m]=s.useState(0),[o,I]=s.useState(50),[T,x]=s.useState(""),[L,b]=s.useState([]),[N]=p.useForm(),h=async(j,u="",d=50)=>{const{data:l}=await f.custom({url:"",method:"get",meta:{operation:"pastPapersManagersToAdd",variables:{page:{value:j,type:"Int",required:!0},key:{value:u,type:"String",required:!1},pageSize:{value:d,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","firstName","middleName","lastName","fullName","dp","email","isActive","created","updated","canDelete","canManage"]}]}}).catch(y=>({data:null})).then(y=>y);l&&b(l.results)},g=async j=>{const{data:u}=await f.custom({url:"",method:"post",meta:{operation:"addPastPaperManager",variables:{id:{value:j,type:"Int",required:!0}},fields:["success","message",{pastPaperManager:["id",{manager:["id","firstName","middleName","lastName","fullName","dp","email","isActive","created","updated","canDelete","canManage"]},"created","updated","canDelete","canManage","canEdit","isActive"]}]}}).catch(d=>({data:null})).then(d=>d);u&&(u.success?(P.success(u.message),b(L.filter(d=>parseInt(d.id.toString())!==j)),a.onAdd(u.pastPaperManager)):P.error(u.message))},i=[{title:"Full Name",dataIndex:"fullName",key:"fullName",render:(j,u,d)=>e.jsx("span",{children:e.jsx("a",{children:u.fullName})})},{title:"Email",dataIndex:"email",key:"email",render:(j,u,d)=>e.jsx("span",{children:e.jsx("a",{children:u.email})})},{title:"Action",key:"action",render:(j,u,d)=>e.jsx(ce,{title:"Add Manager?",placement:"topLeft",onConfirm:()=>g(parseInt(u.id.toString())),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(z,{danger:!0,children:"Add"})})}];return s.useEffect(()=>{h(1,"",50)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(R,{style:{marginTop:10},children:e.jsx(D,{span:10,children:e.jsx(p,{layout:"vertical",form:N,onFinish:j=>{L.length=0,h(1,j.key,o)},children:e.jsx(p.Item,{name:"key",children:e.jsx(Q,{size:"large",placeholder:"Search ...",prefix:e.jsx(W,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(R,{children:e.jsx(D,{span:24,children:e.jsx(de,{columns:i,dataSource:L,scroll:{x:!0,y:"calc(100vh - 280px)"},pagination:{onChange:(j,u)=>{I(u),h(j,T,u)},total:n,pageSize:o,position:["bottomCenter"],showQuickJumper:!0}})})})]})};let se=[];for(let a=1960;a<=new Date().getFullYear();a++)se.push(a);se=se.reverse();const $e=a=>{const[n,m]=s.useState([]),[o]=p.useForm(),[I,T]=s.useState(!1),x=async(h,g="",i=25)=>{const{data:j}=await f.custom({url:"",method:"get",meta:{operation:"pastPapersManagers",variables:{page:{value:h,type:"Int",required:!0},key:{value:g,type:"String",required:!1},pageSize:{value:i,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{manager:["id","firstName","middleName","lastName","fullName","dp","email"]},"isActive","created","updated","canDelete","canManage"]}]}}).catch(u=>({data:null})).then(u=>u);j&&m(j.results)},L=h=>{m([h,...n])},b=async h=>{const{data:g}=await f.custom({url:"",method:"post",meta:{operation:"deletePastPaperManager",variables:{id:{value:h,type:"Int",required:!0}},fields:["success","message"]}}).catch(i=>({data:null})).then(i=>i);g&&(g.success?(P.success(g.message),m(n.filter(i=>parseInt(i.id.toString())!==h))):P.error(g.message))},N=[{title:"Full Name",dataIndex:"fullName",key:"fullName",render:(h,g,i)=>e.jsx("span",{children:e.jsx("a",{children:g.manager.fullName})})},{title:"Email",dataIndex:"email",key:"email",render:(h,g,i)=>e.jsx("span",{children:e.jsx("a",{children:g.manager.email})})},{title:"",key:"action",render:(h,g,i)=>e.jsx("span",{children:e.jsx(ce,{title:"Are you sure delete this manager?",placement:"topLeft",onConfirm:()=>b(parseInt(g.id.toString())),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(z,{icon:e.jsx(pe,{}),style:{float:"right"},danger:!0})})})}];return s.useEffect(()=>{x(1)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(R,{style:{marginTop:10},children:[e.jsx(D,{span:10,children:e.jsx(p,{layout:"vertical",form:o,onFinish:h=>{n.length=0,x(1,h.key)},children:e.jsx(p.Item,{name:"key",children:e.jsx(Q,{size:"large",placeholder:"Search ...",prefix:e.jsx(W,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(D,{span:14,style:{display:"flex",justifyContent:"end"},children:e.jsx(z,{size:"large",icon:e.jsx(he,{}),onClick:()=>T(!0),danger:!0,children:"Create Manager"})})]}),e.jsx(R,{children:e.jsx(D,{span:24,children:e.jsx(de,{columns:N,dataSource:n})})}),e.jsx(ne,{title:"Adding Past Papers Managers",anchor:"right",width:"40vw",onClose:h=>T(h),open:I,children:e.jsx(Ue,{randKey:Math.random(),onAdd:L})})]})},Ge=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx($e,{})}),Je=()=>e.jsx(Ge,{}),Qe=a=>{const[n,m]=s.useState(!1),[o,I]=s.useState([]),[T,x]=s.useState(0),[L,b]=s.useState(1),[N,h]=s.useState(25),g=async(i,j="",u=25)=>{m(!0);const{data:d}=await f.custom({url:"",method:"get",meta:{operation:"pastPapersSchools",variables:{page:{value:i,type:"Int",required:!0},key:{value:j,type:"String",required:!1},pageSize:{value:u,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{school:ze}]}]}}).catch(l=>({data:null})).then(l=>l);d&&(x(d.total),b(d.page),h(d.pageSize),I(d.results)),m(!1)};return s.useEffect(()=>{g(1)},[a.randKey]),e.jsx(H,{children:n?e.jsx(ie,{}):e.jsxs(e.Fragment,{children:[o.length===0&&e.jsx(oe,{severity:"info",children:"No schools found"}),o.length>0&&e.jsx(q,{container:!0,spacing:2,children:o.map(i=>e.jsx(q,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2,children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:i.school.name}),e.jsx("p",{className:"card-text",children:i.school.serialNumber})]})})},i.id))})]})})},We=()=>e.jsxs(H,{sx:{marginTop:10},children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsxs(Y,{children:[e.jsx(Y.Item,{children:e.jsx(le,{to:"/pastpapers",children:"Home"})}),e.jsx(Y.Item,{children:"Schools"})]})}),e.jsx(Qe,{})]}),Xe=a=>{const[n,m]=s.useState(!1),[o,I]=s.useState([]),[T,x]=s.useState(0),[L,b]=s.useState(1),[N,h]=s.useState(25),g=async(i,j="",u=25)=>{m(!0);const{data:d}=await f.custom({url:"",method:"get",meta:{operation:"pastPapersSubjects",variables:{page:{value:i,type:"Int",required:!0},key:{value:j,type:"String",required:!1},pageSize:{value:u,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","totalPastPapers",{subject:Ne}]}]}}).catch(()=>({data:null})).then(l=>l);d&&(x(d.total),b(d.page),h(d.pageSize),I(d.results)),m(!1)};return s.useEffect(()=>{g(1)},[]),e.jsx(e.Fragment,{children:e.jsx(H,{children:n?e.jsx(ie,{}):e.jsxs(e.Fragment,{children:[o.length===0&&e.jsx(oe,{severity:"info",children:"No Subject found"}),o.length>0&&e.jsx(q,{container:!0,spacing:2,children:o.map(i=>e.jsx(q,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2,children:e.jsx(re,{title:"Click to View Paster Papers",placement:"top",children:e.jsx(X,{style:{width:"100%",cursor:"pointer"},children:e.jsxs("h3",{children:[i.subject.name,e.jsx(B,{color:"green",style:{marginLeft:10},children:i.totalPastPapers})]})})})},i.id))})]})})})},Ze=()=>e.jsx(H,{sx:{marginTop:10},children:e.jsx(Xe,{})}),nt=a=>{const{page:n}=a;return n==="PastPapersManagersPage"?e.jsx(Je,{}):n==="PastPapersManagementPage"?e.jsx(Re,{}):n==="PastPapersHomePage"?e.jsx(Me,{}):n==="PastPapersSchoolsPage"?e.jsx(We,{}):n==="PastPapersSubjectsPage"?e.jsx(Ze,{}):n==="PastPapersEducationLevelsPage"?e.jsx(De,{}):e.jsx("div",{children:"Page not found ..."})};export{nt as PastPapersPages};
