import{r as i,j as e,aT as l,a1 as V,cm as S,aW as C,aP as c,S as w,av as q,c as W,a8 as _,cl as D,g as h,_ as o}from"./index-c2aacc94.js";import{d as K,C as J}from"./ckeditor-6362088b.js";import{D as Q}from"./index-d5812015.js";import{I as X}from"./index-222eeb9e.js";import{E as Z}from"./edit_class_virtual_form-9b800a63.js";import{c as v}from"./data_objects-f560073f.js";import{V as $}from"./pager-af56ad6b.js";import{M as ee}from"./index-4f75291d.js";import{S as te}from"./SearchOutlined-0a7c7395.js";import{L as re}from"./LinkOutlined-3bbebe36.js";import{E as ae}from"./ExclamationCircleOutlined-5ebd3c48.js";import"./index-5c6fa810.js";import"./index-b72f7a69.js";import"./localeData-f54d63c2.js";import"./SwapRightOutlined-c4e52b1e.js";import"./SinglePicker-36921b7a.js";import"./UpOutlined-7082c42f.js";import"./InputNumber-e5a9ac80.js";import"./ckeditor-6c36760a.js";import"./data_objects-8117e4a9.js";import"./index-a30bfaab.js";import"./defineProperty-549f2390.js";import"./useNotification-eb255a2d.js";import"./DialogWrap-bd4b8c41.js";import"./index-0a439b65.js";import"./useMutateObserver-953a6ea5.js";import"./index-22b60e6b.js";import"./Image-0cfd8829.js";import"./Upload-5babab10.js";import"./Rate-8659abbe.js";import"./index-6df0ce0b.js";import"./index-ebc226c3.js";import"./index-792862f2.js";import"./Skeleton-7afb965a.js";import"./DotChartOutlined-f39c986e.js";import"./RollbackOutlined-0ce43440.js";import"./index-39dba383.js";import"./index-7cd118b8.js";import"./FolderOpenOutlined-7b750abb.js";import"./Alert-e42b8461.js";import"./MoreOutlined-012dadc2.js";import"./index-d1b8c76e.js";import"./EditOutlined-401a1613.js";import"./transButton-558586a5.js";import"./index-30af6731.js";import"./index-369d7591.js";import"./fade-83a387f8.js";import"./DeleteOutlined-25685737.js";import"./DownloadOutlined-6cd35f11.js";import"./UploadOutlined-be53cc88.js";import"./FileImageOutlined-4bfc05a8.js";import"./index-a4ef8b74.js";import"./ZoomOutOutlined-4d40b3b9.js";import"./index-c314d154.js";import"./darasa_card-ce35246c.js";import"./remove_html_tags-be9c976e.js";import"./ShareAltOutlined-c9c9c61e.js";import"./EditOutlined-012ce82f.js";import"./InfoCircleOutlined-90b30a3a.js";import"./DeleteOutlined-d1e219b7.js";import"./PlusCircleOutlined-a4fd1fff.js";import"./SmileOutlined-e0ec5bcf.js";import"./index-c8b7207b.js";import"./ActionButton-af3929dc.js";import"./SettingOutlined-af171881.js";import"./CloseOutlined-ea1cad65.js";import"./CheckOutlined-4adccebc.js";import"./index-0889c80c.js";import"./text_truncate-315d9efa.js";import"./index-1c6a345e.js";import"./book_payment_form-d6dec671.js";import"./index-e5a89580.js";import"./InfoCircleFilled-137bb87b.js";import"./InfoCircleFilled-baaa675e.js";import"./index-b8dd3924.js";import"./PrinterOutlined-de7bbae7.js";import"./index-5a878f72.js";import"./DownloadOutlined-5b7a48d4.js";const{Option:se}=w,b=[{value:"",label:"Select Duration Type"},{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"}],ie=n=>{const[u,m]=i.useState("");return e.jsx(e.Fragment,{children:e.jsxs(l,{layout:"vertical",form:n.form,onFinish:a=>{a.description=u,n.onFinish(a),m("")},requiredMark:!1,children:[e.jsx(l.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(V,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"startDate",label:"start Date",rules:[{required:!0,type:"date",message:"Please select date"}],children:e.jsx(Q,{showTime:{format:"HH:mm"},disabledDate:a=>{const d=S().format("YYYY-MM-DD");return a&&a<S(d,"YYYY-MM-DD")},style:{width:"100%"},popupStyle:{zIndex:9999}})}),e.jsxs(C,{children:[e.jsx(c,{span:12,children:e.jsx(l.Item,{name:"duration",label:"Duration",style:{width:"100%"},rules:[{required:!0,type:"integer",message:"Enter Duration"}],children:e.jsx(X,{min:1,defaultValue:1,style:{width:"100%"},size:"large"})})}),e.jsx(c,{span:12,children:e.jsx(l.Item,{name:"durationType",label:"Duration Type",style:{width:"100%"},rules:[{required:!0,type:"string",message:"Please select duration type"}],children:e.jsx(w,{defaultValue:b[0].value,size:"large",style:{width:"100%"},dropdownStyle:{zIndex:9999},children:b.map(a=>e.jsx(se,{children:a.label},a.value))})})})]}),e.jsx("h3",{children:"Description"}),e.jsx(K.CKEditor,{editor:J,data:u,onReady:a=>{a.editing.view.change(d=>{d.setStyle("min-height","100px",a.editing.view.document.getRoot())})},onChange:(a,d)=>{const f=d.getData();m(f)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(q,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Mt=n=>{const[u,m]=i.useState([]),[a,d]=i.useState(),[f,I]=i.useState(!0),[j,E]=i.useState(1),[F]=l.useForm(),[oe,T]=i.useState(0),[le,M]=i.useState(0),[k,P]=i.useState(!0);W();const[z,g]=i.useState(!1),[N]=l.useForm(),[L,y]=i.useState(!1),[Y]=l.useForm(),H=t=>{d(t),y(!0)},R=()=>{g(!0)},A=async t=>{const{data:r}=await h.custom({url:"",method:"post",meta:{operation:"editVirtualClass",variables:{id:{value:t.id,type:"Int",required:!0},name:{value:t.name,type:"String",required:!0},description:{value:t.description,type:"String",required:!0},duration:{value:t.duration,type:"Int",required:!0},durationType:{value:t.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:t.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:v}]}}).catch(()=>(o.error("Error editing class"),{data:null})).then(s=>s);r&&(r.success?(o.success(r.message),m(u.map(s=>s.id===r.virtual.id?r.virtual:s)),y(!1)):o.error(r.message))},G=async t=>{const{data:r}=await h.custom({url:"",method:"post",meta:{operation:"createVirtualClass",variables:{darasaId:{value:parseInt(n.id?n.id.toString():"0"),type:"Int",required:!1},name:{value:t.name,type:"String",required:!0},description:{value:t.description,type:"String",required:!0},duration:{value:t.duration,type:"Int",required:!0},durationType:{value:t.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:t.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:v}]}}).catch(()=>(o.error("Error creating virtual class"),{data:null})).then(s=>s);r&&(r.success?(o.success(r.message),g(!1),m([r.virtual,...u])):o.error(r.message))},x=async(t,r="",s=!1)=>{const{data:p}=await h.custom({url:"",method:"get",meta:{operation:"darasaVirtuals",variables:{page:{value:t,type:"Int",required:!0},key:{value:r,type:"String",required:!1},id:{value:parseInt(n.id===void 0?"0":n.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:v}]}}).catch(()=>(o.error("Error fetching virtual classes"),{data:null})).then(U=>U);p&&(M(p.total),T(p.pages),E(p.page),P(p.hasNext),m(s?p.results:[...u,...p.results])),I(!1)},O=async t=>{const{data:r}=await h.custom({url:"",method:"post",meta:{operation:"deleteVirtualClass",variables:{id:{value:t,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(o.error("Error deleting virtual class"),{data:null})).then(s=>s);r&&(r.success?(o.success(r.message),m(u.filter(s=>s.id!==t))):o.error(r.message))},B=t=>{ee.confirm({title:"Deleting Virtual Class Session",icon:e.jsx(ae,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>O(t)})};return i.useEffect(()=>{x(j)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(C,{children:[e.jsx(c,{span:12,children:e.jsx(l,{layout:"vertical",form:F,onFinish:t=>x(0,t.key,!0),children:e.jsx(l.Item,{name:"key",children:e.jsx(V,{size:"large",placeholder:"Search Virtual Sessions...",prefix:e.jsx(te,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(c,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(q,{icon:e.jsx(re,{}),onClick:R,disabled:!n.canManage,size:"large",children:"Create Virtual Session"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(_,{spinning:f,children:[e.jsx(C,{children:u.map(t=>e.jsx(c,{span:8,children:e.jsx($,{darasa:t,handleDarasaDelete:B,handleDarasaEdit:H})},t.id))}),k&&e.jsx("div",{style:{textAlign:"center",marginTop:12},children:e.jsx("button",{onClick:()=>{x(j+1)},children:"Load More"})})]})}),e.jsx(D,{title:"Creating Class Virtual Session",open:z,onClose:t=>g(t),width:"50vw",children:e.jsx(ie,{form:N,onFinish:G})}),e.jsx(D,{title:"Editting "+(a==null?void 0:a.name),width:"40vw",open:L,onClose:t=>y(t),children:e.jsx(Z,{form:Y,darasa:a,onFinish:A})})]})};export{Mt as ClassVirtualSessions};
