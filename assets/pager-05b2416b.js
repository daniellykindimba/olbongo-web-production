import{r as t,aC as b,aM as e,aG as q,ay as w,M as D,cF as W,aI as R,ae as F,co as z,bJ as k,bK as f,bI as K,bV as Q,aJ as A,ac as V,f8 as U,$ as Y,cq as $,bO as H,bT as B}from"./index-2a194481.js";import{P as O}from"./index-a9bb9b36.js";import{I as X}from"./index-9580d35b.js";import{D as Z}from"./index-8bb90fc7.js";import{G as _}from"./index-b2796850.js";import{A as ee}from"./index-8d1996cc.js";import{C as P,T as J}from"./index-98a9641c.js";import{C as G}from"./Collapse-79065e2f.js";import{S as te}from"./schoool_examinations_component-ed4fa178.js";import"./index-df246fd6.js";import"./ActionButton-d68b8b67.js";import"./InputNumber-0b7918dc.js";import"./InfoCircleFilled-f367ccf6.js";import"./Skeleton-49b5872f.js";import"./index-eb884c20.js";import"./ckeditor-eb8ac3e8.js";import"./index-38f0ba5f.js";import"./index-4bcb7f72.js";import"./PickerPanel-87326b23.js";import"./localeData-cd9ff663.js";import"./RangePicker-a3cd4730.js";const ae=s=>{const[r,h]=t.useState([]),[g,v]=t.useState(0),[E,u]=t.useState(20),[C,j]=t.useState(""),[y,l]=t.useState(!0),[I]=b.useForm(),[c]=b.useForm();t.useState(!1);const[m,d]=t.useState(0),o=[{title:"Full Name",dataIndex:"name",fixed:!0,render:(a,n)=>e.jsx("span",{children:e.jsx("a",{children:n.member.fullName})})},{title:"Registration Number",dataIndex:"registrationNumber",fixed:!0,render:(a,n)=>e.jsx("span",{children:n.member.registrationNumber})},{title:"",dataIndex:"action",render:(a,n)=>e.jsx(e.Fragment,{children:e.jsx(O,{placement:"topRight",overlayStyle:{zIndex:9999},title:e.jsxs("div",{style:{width:"300px"},children:[e.jsxs("p",{style:{fontSize:18},children:["Are you sure to add Examination Score for"," ",e.jsx("b",{children:n.member.fullName})]}),e.jsx("div",{style:{marginTop:10},children:e.jsx(b,{layout:"vertical",form:c,onFinish:i=>{},requiredMark:!0,children:e.jsx(b.Item,{name:"score_value",label:"Score",rules:[{required:!0,type:"number",message:"Please input score value!"},{validator:(i,p)=>p<0||p>100?Promise.reject("Score value must be between 0 and 100"):Promise.resolve()}],children:e.jsx(X,{size:"large",defaultValue:0,style:{width:"100%"},onChange:i=>{d(i??0)}})})})})]}),onConfirm:()=>S(n.id,m),onCancel:()=>{},okButtonProps:{disabled:m<0||m>100},okText:"Add",cancelText:"No",onVisibleChange:i=>{i&&(d(0),c.resetFields())},children:e.jsx(F,{icon:e.jsx(z,{}),style:{float:"right"},danger:!0})})})}],S=async(a,n)=>{var p;const{data:i}=await k.custom({url:"",method:"post",meta:{operation:"createSchoolExaminationEducationLevelSubjectStudentRecord",variables:{schoolExaminationEducationLevelSubjectId:{value:parseInt(((p=s.subject)==null?void 0:p.id.toString())??"0"),type:"Int",required:!0},schoolEducationLevelStudentId:{value:parseInt(a.toString()),type:"Int",required:!0},score:{value:parseFloat(n.toString()),type:"Float",required:!0}},fields:["success","message",{schoolExaminationEducationLevelSubjectStudent:["id",{schoolEducationLevelStudent:["id",{member:["id","fullName","registrationNumber"]}]},"score","grade","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(L=>(f.error("Something Went Wrong ...."),{data:null})).then(L=>L);i!=null&&i.success?(f.success("Score Added Successfully"),h(r.filter(L=>L.id!==a)),s.onAdd(i.schoolExaminationEducationLevelSubjectStudent)):f.error(i==null?void 0:i.message)},x=async(a,n="",i=20)=>{var L,N,T;const{data:p}=await k.custom({url:"",method:"get",meta:{operation:"schoolEducationLevelSubjectResultsStudentsTo",variables:{page:{value:a,type:"Int",required:!0},key:{value:n,type:"String",required:!1},pageSize:{value:i,type:"Int",required:!1},schoolExaminationEducationLevelSubjectId:{value:parseInt(((L=s.subject)==null?void 0:L.id.toString())??"0"),type:"Int",required:!0},schoolEducationLevelId:{value:parseInt(((T=(N=s.level)==null?void 0:N.schoolEducationLevel)==null?void 0:T.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{member:["id","firstName","middleName","lastName","fullName","registrationNumber"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(M=>(f.error("Something Went Wrong ...."),{data:null})).then(M=>M);p&&(v(p.total),h([...p.results])),l(!1)};return t.useEffect(()=>{x(1,"",20)},[s.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(q,{style:{marginTop:10},children:e.jsx(w,{span:16,children:e.jsx(b,{layout:"vertical",form:I,onFinish:a=>{j(a.key),r.length=0,x(1,a.key)},children:e.jsx(b.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(W,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(R,{loading:y,columns:o,dataSource:r,pagination:{onChange:(a,n)=>{u(n),x(a,C,n)},total:g,pageSize:E,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}})]})},ne=s=>{const[r,h]=t.useState([]),[g,v]=t.useState(0),[E,u]=t.useState(20),[C,j]=t.useState(""),[y,l]=t.useState(!0),[I]=b.useForm(),[c,m]=t.useState(!1),d=[{title:"Full Name",dataIndex:"name",fixed:!0,render:(a,n)=>e.jsx("span",{children:e.jsx("a",{children:n.schoolEducationLevelStudent.member.fullName})})},{title:"Registration Number",dataIndex:"registrationNumber",fixed:!0,render:(a,n)=>e.jsx("span",{children:e.jsx("a",{children:n.schoolEducationLevelStudent.registrationNumber})})},{title:"Score",dataIndex:"score",fixed:!0,render:(a,n)=>e.jsx("span",{children:e.jsx("a",{children:n.score})})},{title:"Grade",dataIndex:"grade",fixed:!0,render:(a,n)=>e.jsx("span",{children:e.jsx("a",{children:n.grade})})},{title:"",dataIndex:"action",render:(a,n)=>e.jsx(e.Fragment,{children:e.jsx(O,{title:"Are you sure to Delete",onConfirm:()=>o(n.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(Q,{}),style:{float:"right"},danger:!0})})})}],o=async a=>{const{data:n}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchoolExaminationEducationLevelSubjectStudent",variables:{id:{value:parseInt(a.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(i=>(f.error("Something Went Wrong ...."),{data:null})).then(i=>i);n&&(n.success?(f.success(n.message),h(r.filter(i=>i.id!==a))):f.error(n.message)),l(!1)},S=async(a,n="",i=20)=>{var L;const{data:p}=await k.custom({url:"",method:"get",meta:{operation:"schoolExaminationEducationLevelSubjectStudents",variables:{page:{value:a,type:"Int",required:!0},key:{value:n,type:"String",required:!1},pageSize:{value:i,type:"Int",required:!1},schoolExaminationEducationLevelSubjectId:{value:parseInt(((L=s.subject)==null?void 0:L.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{schoolEducationLevelStudent:["id",{member:["id","fullName","registrationNumber"]}]},"score","grade","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(N=>(f.error("Something Went Wrong ...."),{data:null})).then(N=>N);p&&(v(p.total),h(p.results)),l(!1)},x=async a=>{h([a,...r])};return t.useEffect(()=>{S(1,"",20)},[s.randKey,s.subject]),e.jsxs(e.Fragment,{children:[e.jsxs(q,{style:{marginTop:10},children:[e.jsx(w,{span:16,children:e.jsx(b,{layout:"vertical",form:I,onFinish:a=>{j(a.key),r.length=0,S(1,a.key)},children:e.jsx(b.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(W,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(w,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{size:"large",icon:e.jsx(z,{}),onClick:()=>m(!0),danger:!0,children:"Add"})})]}),e.jsx(R,{loading:y,columns:d,dataSource:r,pagination:{onChange:(a,n)=>{u(n),S(a,C,n)},total:g,pageSize:E,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"80vh"}}),e.jsx(K,{title:"Adding Students Scores",open:c,width:"40vw",onClose:a=>m(a),children:e.jsx(ae,{level:s.level,subject:s.subject,onAdd:x})})]})},se=s=>{const[r,h]=t.useState(),[g,v]=t.useState([]),[E,u]=t.useState(0);t.useState(20),t.useState("");const[C,j]=t.useState(!0),[y,l]=t.useState(!1);b.useForm(),_.useBreakpoint().lg;const c=async d=>{h(d),l(!0)},m=async(d,o="",S=20)=>{var a;const{data:x}=await k.custom({url:"",method:"get",meta:{operation:"schoolExaminationEducationLevelSubjects",variables:{page:{value:d,type:"Int",required:!0},key:{value:o,type:"String",required:!1},pageSize:{value:S,type:"Int",required:!1},schoolExaminationEducationLevelId:{value:parseInt(((a=s.level)==null?void 0:a.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{schoolEducationLevelSubject:["id",{schoolSubject:["id",{subject:["id","name"]}]}]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(n=>(f.error("Something Went Wrong ...."),{data:null})).then(n=>n);x&&(u(x.total),v([...x.results])),j(!1)};return t.useEffect(()=>{m(1,"",20)},[s.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[g.length===0&&e.jsx(ee,{description:"No Subject Found ..."}),g.map((d,o)=>e.jsx("a",{onClick:()=>c(d),children:e.jsx(A,{color:"red",style:{padding:5},children:e.jsx("span",{style:{fontSize:18},children:d.schoolEducationLevelSubject.schoolSubject.subject.name})})}))]}),e.jsx(Z,{title:"View "+(r==null?void 0:r.schoolEducationLevelSubject.schoolSubject.subject.name)+" Results",anchor:"right",width:"50vw",onClose:d=>l(d),open:y,children:e.jsx(ne,{level:s.level,subject:r})})]})},re=s=>{const[r,h]=t.useState([]),[g,v]=t.useState([]),[E,u]=t.useState(0);t.useState(20),t.useState("");const[C,j]=t.useState(!0);t.useState(!1),b.useForm(),_.useBreakpoint().lg;const l=async(c,m="",d=20)=>{var S;const{data:o}=await k.custom({url:"",method:"get",meta:{operation:"schoolExaminationEducationLevelResults",variables:{schoolExaminationEducationLevelId:{value:parseInt(((S=s.level)==null?void 0:S.id.toString())??"0"),type:"Int",required:!0}},fields:["subjects","results"]}}).catch(x=>(f.error("Something Went Wrong ...."),{data:null})).then(x=>x);if(o){u(o.total),h([...o.subjects]);const x=[];o.subjects.map(a=>x.push({name:a})),h([...x]),v([...o.results])}j(!1)},I=[{fixed:!0,title:"Full Name",dataIndex:"name",key:"name",render:(c,m)=>e.jsx("span",{style:{fontWeight:"bolder"},children:m.student})},{fixed:!0,title:"Reg #.",dataIndex:"regno",key:"regno",render:(c,m)=>e.jsx("span",{style:{fontWeight:"bolder"},children:m.registration_number})},{title:"SUBJECTS",dataIndex:"subjects",key:"subjects",children:r.map(c=>({title:c.name,dataIndex:c.name,key:c.name,render:(m,d)=>{const o=d.results.find(S=>S.subject===c.name);return e.jsx(q,{children:e.jsxs(w,{span:24,style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:o==null?void 0:o.score}),e.jsx(A,{color:"green",children:o==null?void 0:o.grade})]})})}}))}];return t.useEffect(()=>{l(1,"",20)},[s.randKey]),e.jsx(e.Fragment,{children:e.jsx(R,{size:"small",columns:I,dataSource:g,scroll:{y:"80vh",x:"100vw"}})})},{Panel:oe}=G,ie=s=>{const[r,h]=t.useState(!0),[g,v]=t.useState(),[E,u]=t.useState([]),[C,j]=t.useState(!1),y=async(l,I="",c=20)=>{var d;const{data:m}=await k.custom({url:"",method:"get",meta:{operation:"schoolExaminationEducationLevels",variables:{schoolExaminationId:{value:(d=s.examination)==null?void 0:d.id,type:"Int",required:!0},page:{value:l,type:"Int",required:!0},key:{value:I,type:"String",required:!1},pageSize:{value:c,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{schoolEducationLevel:["id",{educationLevel:["id","name"]}]},{schoolExamination:["id","name"]},"score","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(o=>(f.error("Something Went Wrong ..."),{data:null})).then(o=>o);m&&u([...m.results]),h(!1)};return t.useEffect(()=>{y(1,"",20)},[s.randKey,s.examination]),e.jsxs(e.Fragment,{children:[e.jsx(V,{spinning:r,children:e.jsx(q,{children:e.jsxs(w,{span:24,children:[E.length===0&&e.jsx(P,{children:e.jsxs("h3",{children:[e.jsx(U,{type:"info-circle"})," No Data"]})}),e.jsx(P,{children:e.jsx(G,{defaultActiveKey:[],onChange:()=>{},expandIconPosition:"left",children:E.map((l,I)=>e.jsx(oe,{header:e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:18},children:l.schoolEducationLevel.educationLevel.name})}),extra:e.jsxs(e.Fragment,{children:[e.jsx(Y,{title:"Click to View All "+l.schoolEducationLevel.educationLevel.name+" Subjects Students Results",color:"green",placement:"left",children:e.jsx(F,{danger:!0,type:"link",icon:e.jsx($,{}),onClick:c=>{c.stopPropagation(),v(l),j(!0)},style:{marginRight:5}})}),e.jsx(F,{type:"link",icon:e.jsx(H,{}),onClick:c=>{c.stopPropagation()}})]}),children:e.jsx(se,{level:l})},"level"+I))})})]})})}),e.jsx(K,{title:"View All Subjects Examination Results",open:C,width:"100vw",onClose:l=>j(l),children:e.jsx(re,{level:g})})]})},{TabPane:le}=J,ce=s=>{const[r,h]=t.useState(!0),[g,v]=t.useState([]),E=async(u,C="",j=20)=>{h(!0);const{data:y}=await k.custom({url:"",method:"get",meta:{operation:"schoolExaminations",variables:{page:{value:u,type:"Int",required:!0},key:{value:C,type:"String",required:!1},pageSize:{value:j,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","year","startDate","endDate",{school:["id","name"]},{examinationType:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(l=>(f.error("Error occured while fetching Examinations"),{data:null})).then(l=>l);y&&v([...y.results]),h(!1)};return t.useEffect(()=>{E(1,"",20)},[s.randKey]),e.jsx(e.Fragment,{children:e.jsx(V,{spinning:r,children:e.jsx(q,{children:e.jsxs(w,{span:24,children:[g.length===0&&e.jsx(P,{children:e.jsx("h3",{children:"No Examinations Found"})}),e.jsx(P,{children:e.jsx(J,{tabPosition:"left",children:g.map(u=>e.jsxs(le,{tab:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:u.name}),e.jsx(A,{color:"red",style:{marginLeft:5},children:u.year})]}),children:[e.jsxs("h3",{children:[u.name,e.jsx(A,{color:"red",style:{marginLeft:5},children:u.year})]}),e.jsx(ie,{examination:u})]},"examination-"+u.id))})})]})})})})},de=()=>(t.useEffect(()=>{document.title=B.system_name+": Examinations Results Dashboard"},[]),e.jsx("div",{style:{marginTop:10},children:e.jsx(ce,{})})),ue=()=>(t.useEffect(()=>{document.title=B.system_name+": Manage Examinations"},[]),e.jsx(te,{})),Pe=s=>{const{page:r}=s;return r==="ManageExaminationsPage"?e.jsx(ue,{}):r==="ExaminationsResultsDashBoardPage"?e.jsx(de,{}):e.jsx("div",{children:"Page not found ..."})};export{Pe as ExaminationsResultsPages};
