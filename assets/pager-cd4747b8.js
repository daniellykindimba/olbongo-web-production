import{r as t,bb as qe,j as e,q as n,I as z,R as ee,C as E,ba as tt,Y as N,P as A,Q as c,t as le,G as de,v as ce,bU as Ae,W as ie,ab as ye,bd as be,am as X,a2 as me,bC as Me,az as Rt,w as Ee,p as he,S as ae,x as te,b1 as rt,ak as re,bV as Ut,y as se,U as Ge,aq as pe,b3 as Oe,ai as Je,bW as Jt,V as fe,aR as Ce,D as ct,M as Te,A as dt,H as He,bX as Qt,N as st,O as $t,bY as Zt,b9 as Se,a8 as Pe,an as Kt,ag as Vt,bo as wt,ac as We,b5 as Be,bZ as Ye,a9 as Xt,b_ as es,ah as Bt,aU as at,bH as ts,bT as ss,ao as as,b$ as ns,c0 as is,c1 as rs,c2 as ls,av as nt,c3 as it,b4 as Ht}from"./index-d45767e9.js";import{T as ue}from"./Table-9c871b5d.js";import{B as w}from"./Breadcrumb-0fc22e6a.js";import{S as cs}from"./index-8d14a4a2.js";import{l as ds,G as os}from"./iconBase-548432e3.js";import{R as us,P as ms,S as hs}from"./school_settings_component-3f70b60b.js";import"./index-aed3008a.js";import"./index-a70e369c.js";import"./index-a541f1d2.js";const{TextArea:xs}=z,ps=a=>{const s=async m=>{var h;const{data:r}=await A.custom({url:"",method:"post",meta:{operation:"updateExaminationType",variables:{examinationTypeId:{value:(h=a.examinationType)==null?void 0:h.id,type:"Int",required:!0},name:{value:m.name,type:"String",required:!0},code:{value:m.code,type:"String",required:!0},description:{value:m.description,type:"String",required:!1},startDate:{value:m.start_date,type:"String",required:!1},endDate:{value:m.end_date,type:"String",required:!1}},fields:["success","message",{examinationType:["id","name","code","description","description","startDate","endDate","created","updated","isActive","canEdit","canDelete","canManage"]}]}}).catch(x=>(c.error("Error in updating Examination Type"),{data:null})).then(x=>x);r&&(r.success?(c.success("Examination Type updated successfully"),a.onFinish(r.examinationType)):c.error(r.message))};return t.useEffect(()=>{var m,r,h,x,p;a.form.setFieldsValue({name:(m=a.examinationType)==null?void 0:m.name,code:(r=a.examinationType)==null?void 0:r.code,start_date:qe(((h=a.examinationType)==null?void 0:h.startDate)??new Date),end_date:qe(((x=a.examinationType)==null?void 0:x.endDate)??new Date),description:(p=a.examinationType)==null?void 0:p.description})},[a.randKey]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:m=>{m.start_date=qe(m.start_date).format("YYYY-MM-DD"),m.end_date=qe(m.end_date).format("YYYY-MM-DD"),s(m)},requiredMark:!0,autoComplete:"off",initialValues:{remember:!1,email:"",password:""},children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input code"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs(ee,{children:[e.jsx(E,{span:12,children:e.jsx(n.Item,{name:"start_date",label:"Start Date",rules:[{required:!1,type:"date",message:"Please input Start Date"}],children:e.jsx(tt,{style:{width:"100%"},popupStyle:{zIndex:9999}})})}),e.jsx(E,{span:12,children:e.jsx(n.Item,{name:"end_date",label:"End Date",rules:[{required:!1,type:"date",message:"Please input End Date"}],children:e.jsx(tt,{style:{width:"100%"},popupStyle:{zIndex:9999}})})})]}),e.jsx(n.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(xs,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},gs=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(1),[F,k]=t.useState(0),[M,G]=t.useState(!1),[j,_]=t.useState(20),[O,q]=t.useState(""),[B,K]=t.useState(!0);le();const[W]=n.useForm(),[L]=n.useForm(),D=!de.useBreakpoint().lg,[b,C]=t.useState(!1),d=i=>{m(i),C(!0)},g=async i=>{h(r.map(l=>l.id===i.id?i:l)),L.resetFields(),C(!1)},v=async()=>{const{data:i}=await A.custom({url:"",method:"post",meta:{operation:"syncExaminationsTypes",variables:{},fields:["success","message"]}});i.success?(c.success(i.message),r.length=0,S(1,"")):c.error(i.message)},u=async i=>{const{data:l}=await A.custom({url:"",method:"post",meta:{operation:"deleteExaminationType",variables:{examinationTypeId:{value:parseInt(i.toString()),type:"Int",required:!0}},fields:["success","message"]}});l.success?(c.success(l.message),h(r.filter(R=>R.id!==i))):c.error(l.message)},f=()=>{c("Canceled")},I=[{title:"Name",dataIndex:"name",fixed:!0,render:(i,l,R)=>e.jsx("span",{children:e.jsx("a",{children:l.name})})},{title:"Code",dataIndex:"Code",fixed:!0,render:(i,l,R)=>e.jsx("span",{children:l.code})},{title:"Start Date",dataIndex:"startDate",fixed:!0,render:(i,l,R)=>e.jsx("span",{children:l.startDate&&qe(l.startDate).format("YYYY-MM-DD")})},{title:"End Date",dataIndex:"endDate",fixed:!0,render:(i,l,R)=>e.jsx("span",{children:l.endDate&&qe(l.endDate).format("YYYY-MM-DD")})},{title:"Created",dataIndex:"created",render:(i,l,R)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(l.created)})})})},{title:"Status",dataIndex:"isActive",render:(i,l,R)=>e.jsx("span",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(i,l,R)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(N,{icon:e.jsx(be,{}),disabled:!(l!=null&&l.canEdit),onClick:()=>d(l)}),e.jsx(X,{title:"Are you sure to delete this Examination Type?",onConfirm:()=>u(l==null?void 0:l.id),onCancel:()=>f,okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(l!=null&&l.canDelete)})})]})}],S=async(i,l="",R=20)=>{const{data:y}=await A.custom({url:"",method:"get",meta:{operation:"examinationsTypes",variables:{page:{value:i,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:R,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","startDate","endDate","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(o=>(c.error("Error occured while fetching examinations types"),{data:null})).then(o=>o);y&&(p(y.page),k(y.total),G(y.hasNext),h(y.results)),K(!1)};return t.useEffect(()=>{S(x,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:W,onFinish:i=>{p(1),r.length=0,q(i.key),S(1,i.key,j)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:D?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(Ae,{}),onClick:()=>v(),children:"Sync Mtaa"})})]}),e.jsx(ue,{loading:B,columns:I,dataSource:r,scroll:{x:!0},pagination:{onChange:(i,l)=>{_(l),S(i,O,l)},total:F,pageSize:j,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(ie,{title:"Editting "+(s==null?void 0:s.name),open:b,onCancel:i=>C(i),children:e.jsx(ps,{form:L,onFinish:g,randKey:Math.random(),examinationType:s})})]})},xe=({children:a})=>{const{data:s}=Me(),m=()=>{((s==null?void 0:s.isStaff)===!1||(s==null?void 0:s.isAdmin)===!1)&&(window.location.pathname="/home")},[r,h]=Rt.useState(!0),[x,p]=Rt.useState(!1),F=async()=>{h(!0);const{data:k}=await A.custom({url:"",method:"get",meta:{operation:"controlAuthorized",variables:{},fields:["analytics"]}}).catch(M=>({data:null})).then(M=>M);k&&p(k.analytics.authorized),h(!1)};return t.useEffect(()=>{m(),F()},[]),!x&&!r?e.jsx(e.Fragment,{children:e.jsx("h1",{children:"Unauthorized"})}):e.jsx(Ee,{spinning:r,children:a})},js=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Examinations Types"})]}),e.jsx(gs,{height:80})]}),ys=()=>e.jsx(xe,{children:e.jsx(js,{})}),fs=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,p]=t.useState(0),[F,k]=t.useState(20),[M,G]=t.useState(""),[j,_]=t.useState(!1),[O,q]=t.useState(!0);le();const[B]=n.useForm();n.useForm();const W=!de.useBreakpoint().lg,[L,V]=t.useState(!1),D=async()=>{const{data:v}=await A.custom({url:"",method:"post",meta:{operation:"syncSchoolVenuesTypes",variables:{},fields:["success","message"]}});v.success?(c.success(v.message),s.length=0,g(1,"")):c.error(v.message)},b=async v=>{const{data:u}=await A.custom({url:"",method:"post",meta:{operation:"deleteSchoolVenueType",variables:{schoolVenueTypeId:{value:parseInt(v.toString()),type:"Int",required:!0}},fields:["success","message"]}});u.success?(c.success(u.message),m(s.filter(f=>f.id!==v))):c.error(u.message)},C=()=>{c("Canceled")},d=[{title:"Name",dataIndex:"name",fixed:!0,render:(v,u,f)=>e.jsx("span",{children:e.jsx("a",{children:u.name})})},{title:"Created",dataIndex:"created",render:(v,u,f)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(u.created)})})})},{title:"Status",dataIndex:"isActive",render:(v,u,f)=>e.jsx("a",{children:u!=null&&u.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,u,f)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to delete this Venue Type?",onConfirm:()=>b(u==null?void 0:u.id),onCancel:()=>C,okText:"Yes",cancelText:"No",disabled:!(u!=null&&u.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(u!=null&&u.canDelete)})})})}],g=async(v,u="",f=20)=>{const{data:I}=await A.custom({url:"",method:"get",meta:{operation:"schoolVenueTypes",variables:{page:{value:v,type:"Int",required:!0},key:{value:u,type:"String",required:!1},pageSize:{value:f,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(I.page),p(I.total),_(I.hasNext),m(I.results),q(!1)};return t.useEffect(()=>{g(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:W?24:20,children:e.jsx(n,{layout:"vertical",form:B,onFinish:v=>{h(1),s.length=0,G(v.key),g(1,v.key,F)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:W?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(Ae,{}),onClick:()=>D(),children:"Sync Mtaa"})})]}),e.jsx(ue,{loading:O,columns:d,dataSource:s,scroll:{x:!0},pagination:{onChange:(v,u)=>{k(u),g(v,M,u)},total:x,pageSize:F,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(ie,{title:"Edit Region Informations",width:"20%",open:L,onClose:v=>V(v),children:e.jsx(e.Fragment,{})})]})},vs=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"School Venues Types"})]}),e.jsx(fs,{height:80})]}),Ss=()=>e.jsx(xe,{children:e.jsx(vs,{})}),Cs=async()=>{const{data:a}=await A.custom({url:"",method:"get",meta:{operation:"systemSettings",variables:{},fields:["smsSenderName","staffOtpAuthorize","adminOtpAuthorize","teachersOtpAuthorize","studentsOtpAuthorize","parentsOtpAuthorize","concatenateUsernameWithSchoolRegno","allowUserPublicRegistration","maximumLoginAttemp","smsCostPerUnit","otpExpiresTime","allowSessionTimeoutFeature","tokenExpires","passwordComplexityMinLength","passwordComplexityMaxLength","passwordComplexityMinUppercase","passwordComplexityMinLowercase","passwordComplexityMinNumeric","passwordComplexityMinSpecial","passwordComplexityAllowCharacterRepetition","allowedPasswordBackCompare","blockInteractionTillPasswordChanged","passwordMustChangeAfterDays","notifyPasswordChangeBeforeDays","resetAccountLockoutAfterMinutes","accountLockoutDurationInMinutes","allowedPasswordReusePeriondInMonths","userStorageLimit"]}}).catch(s=>({data:null})).then(s=>s);return a||null},et=a=>{switch(a){case"tokenExpires":return"in seconds";case"otpExpiresTime":return"in seconds";case"smsCostPerUnit":return"in Tsh";default:return""}},bs=a=>{const[s,m]=t.useState(!1),[r,h]=t.useState(!1),[x,p]=t.useState(),[F]=n.useForm(),k=async()=>{const{data:j}=await A.custom({url:"",method:"post",meta:{operation:"autoCreateSystemSettings",variables:{},fields:["success","message"]}}).catch(_=>(c.error("Error occured while Auto Creating System Settings"),{data:null})).then(_=>_);j&&(j.success?(c.success(j.message),M()):c.error(j.message))},M=async()=>{h(!0);const j=await Cs();if(j){m(!0);const _={teachersOtpAuthorize:j.teachersOtpAuthorize,studentsOtpAuthorize:j.studentsOtpAuthorize,parentsOtpAuthorize:j.parentsOtpAuthorize,concatenateUsernameWithSchoolRegno:j.concatenateUsernameWithSchoolRegno,allowUserPublicRegistration:j.allowUserPublicRegistration,maximumLoginAttemp:j.maximumLoginAttemp,smsCostPerUnit:j.smsCostPerUnit,otpExpiresTime:j.otpExpiresTime,tokenExpires:j.tokenExpires,staffOtpAuthorize:j.staffOtpAuthorize,adminOtpAuthorize:j.adminOtpAuthorize,passwordComplexityMinLength:j.passwordComplexityMinLength,passwordComplexityMaxLength:j.passwordComplexityMaxLength,passwordComplexityMinUppercase:j.passwordComplexityMinUppercase,passwordComplexityMinLowercase:j.passwordComplexityMinLowercase,passwordComplexityMinNumeric:j.passwordComplexityMinNumeric,passwordComplexityMinSpecial:j.passwordComplexityMinSpecial,allowedPasswordBackCompare:j.allowedPasswordBackCompare,allowSessionTimeoutFeature:j.allowSessionTimeoutFeature,blockInteractionTillPasswordChanged:j.blockInteractionTillPasswordChanged,passwordComplexityAllowCharacterRepetition:j.passwordComplexityAllowCharacterRepetition,passwordMustChangeAfterDays:j.passwordMustChangeAfterDays,notifyPasswordChangeBeforeDays:j.notifyPasswordChangeBeforeDays,resetAccountLockoutAfterMinutes:j.resetAccountLockoutAfterMinutes,accountLockoutDurationInMinutes:j.accountLockoutDurationInMinutes,allowedPasswordReusePeriondInMonths:j.allowedPasswordReusePeriondInMonths,smsSenderName:j.smsSenderName,userStorageLimit:j.userStorageLimit};p(_),F.setFieldsValue({teachersOtpAuthorize:j.teachersOtpAuthorize,studentsOtpAuthorize:j.studentsOtpAuthorize,parentsOtpAuthorize:j.parentsOtpAuthorize,concatenateUsernameWithSchoolRegno:j.concatenateUsernameWithSchoolRegno,allowUserPublicRegistration:j.allowUserPublicRegistration,maximumLoginAttemp:j.maximumLoginAttemp,smsCostPerUnit:j.smsCostPerUnit,otpExpiresTime:j.otpExpiresTime,tokenExpires:j.tokenExpires,staffOtpAuthorize:j.staffOtpAuthorize,adminOtpAuthorize:j.adminOtpAuthorize,passwordComplexityMinLength:j.passwordComplexityMinLength,passwordComplexityMaxLength:j.passwordComplexityMaxLength,passwordComplexityMinUppercase:j.passwordComplexityMinUppercase,passwordComplexityMinLowercase:j.passwordComplexityMinLowercase,passwordComplexityMinNumeric:j.passwordComplexityMinNumeric,passwordComplexityMinSpecial:j.passwordComplexityMinSpecial,allowedPasswordBackCompare:j.allowedPasswordBackCompare,allowSessionTimeoutFeature:j.allowSessionTimeoutFeature,blockInteractionTillPasswordChanged:j.blockInteractionTillPasswordChanged,passwordComplexityAllowCharacterRepetition:j.passwordComplexityAllowCharacterRepetition,passwordMustChangeAfterDays:j.passwordMustChangeAfterDays,notifyPasswordChangeBeforeDays:j.notifyPasswordChangeBeforeDays,resetAccountLockoutAfterMinutes:j.resetAccountLockoutAfterMinutes,accountLockoutDurationInMinutes:j.accountLockoutDurationInMinutes,allowedPasswordReusePeriondInMonths:j.allowedPasswordReusePeriondInMonths,userStorageLimit:j.userStorageLimit})}else m(!1);h(!1)},G=async j=>{const{data:_}=await A.custom({url:"",method:"post",meta:{operation:"updateSystemSettings",variables:{smsSenderName:{value:j.smsSenderName,type:"String",required:!1},teachersOtpAuthorize:{value:j.teachersOtpAuthorize,type:"Boolean",required:!1},studentsOtpAuthorize:{value:j.studentsOtpAuthorize,type:"Boolean",required:!1},parentsOtpAuthorize:{value:j.parentsOtpAuthorize,type:"Boolean",required:!1},concatenateUsernameWithSchoolRegno:{value:j.concatenateUsernameWithSchoolRegno,type:"Boolean",required:!1},allowUserPublicRegistration:{value:j.allowUserPublicRegistration,type:"Boolean",required:!1},maximumLoginAttemp:{value:j.maximumLoginAttemp?parseInt(j.maximumLoginAttemp.toString()):5,type:"Int",required:!1},smsCostPerUnit:{value:j.smsCostPerUnit?parseInt(j.smsCostPerUnit.toString()):0,type:"Float",required:!1},otpExpiresTime:{value:j.otpExpiresTime?parseInt(j.otpExpiresTime.toString()):120,type:"Float",required:!1},tokenExpires:{value:j.tokenExpires?parseInt(j.tokenExpires.toString()):60,type:"Int"},staffOtpAuthorize:{value:j.staffOtpAuthorize,type:"Boolean",required:!1},adminOtpAuthorize:{value:j.adminOtpAuthorize,type:"Boolean",required:!1},passwordComplexityMinLength:{value:parseInt(j.passwordComplexityMinLength.toString()),type:"Int",reqired:!1},passwordComplexityMaxLength:{value:parseInt(j.passwordComplexityMaxLength.toString()),type:"Int",reqired:!1},passwordComplexityMinUppercase:{value:parseInt(j.passwordComplexityMinUppercase.toString()),type:"Int",reqired:!1},passwordComplexityMinLowercase:{value:parseInt(j.passwordComplexityMinLowercase.toString()),type:"Int",reqired:!1},passwordComplexityMinNumeric:{value:parseInt(j.passwordComplexityMinNumeric.toString()),type:"Int",reqired:!1},passwordComplexityMinSpecial:{value:parseInt(j.passwordComplexityMinSpecial.toString()),type:"Int",reqired:!1},allowedPasswordBackCompare:{value:parseInt(j.allowedPasswordBackCompare.toString()),type:"Int",required:!1},allowSessionTimeoutFeature:{value:j.allowSessionTimeoutFeature,type:"Boolean",required:!1},blockInteractionTillPasswordChanged:{value:j.blockInteractionTillPasswordChanged,type:"Boolean",required:!1},passwordComplexityAllowCharacterRepetition:{value:j.passwordComplexityAllowCharacterRepetition,type:"Boolean",required:!1},passwordMustChangeAfterDays:{value:parseInt(j.passwordMustChangeAfterDays.toString()),type:"Int",required:!1},notifyPasswordChangeBeforeDays:{value:parseInt(j.notifyPasswordChangeBeforeDays.toString()),type:"Int",required:!1},resetAccountLockoutAfterMinutes:{value:parseInt(j.resetAccountLockoutAfterMinutes.toString()),type:"Int",required:!1},accountLockoutDurationInMinutes:{value:parseInt(j.accountLockoutDurationInMinutes.toString()),type:"Int",required:!1},allowedPasswordReusePeriondInMonths:{value:parseInt(j.allowedPasswordReusePeriondInMonths.toString()),type:"Int",required:!1},userStorageLimit:{value:parseInt(j.userStorageLimit.toString()),type:"Int",required:!1}},fields:["success","message"]}}).catch(O=>(c.error("Error occured while updating System Settings"),{data:null})).then(O=>O);_&&(_.success?c.success(_.message):c.error(_.message))};return t.useEffect(()=>{M()},[a.randKey]),e.jsx(e.Fragment,{children:e.jsx(ae,{loading:r,active:!0,children:s?e.jsx(e.Fragment,{children:e.jsxs(ee,{children:[e.jsx(E,{span:10,children:e.jsx(te,{children:e.jsx(rt,{column:1,title:"System Settings",children:Object.entries(x??{}).map(([j,_],O)=>typeof _=="boolean"?e.jsx(rt.Item,{labelStyle:{fontWeight:"bolder"},label:j.split(/(?=[A-Z])/).map(q=>q.charAt(0).toUpperCase()+q.slice(1)).join(" "),children:_?e.jsx(e.Fragment,{children:e.jsx("span",{style:{color:"green"},children:"Enabled"})}):e.jsx(e.Fragment,{children:e.jsx("span",{style:{color:"red"},children:"Disabled"})})}):e.jsx(rt.Item,{labelStyle:{fontWeight:"bolder"},label:j.split(/(?=[A-Z])/).map(q=>q.charAt(0).toUpperCase()+q.slice(1)).join(" "),children:_}))})})}),e.jsx(E,{span:14,children:e.jsx("div",{style:{marginLeft:20},children:e.jsx(n,{layout:"horizontal",form:F,onFinish:j=>{G(j)},children:e.jsx(ee,{style:{display:"flex"},children:e.jsx(E,{span:24,children:e.jsxs(te,{children:[Object.entries(x??{}).map(([j,_],O)=>typeof _=="boolean"?e.jsx(n.Item,{label:e.jsxs(e.Fragment,{children:[j.split(/(?=[A-Z])/).map(q=>q.charAt(0).toUpperCase()+q.slice(1)).join(" "),et(j)&&e.jsx(re,{children:et(j)})]}),name:j,initialValue:_,children:e.jsx(cs,{checked:F.getFieldValue(j),onChange:q=>{F.submit(),p(F.getFieldsValue())}})}):e.jsx(n.Item,{label:e.jsxs(e.Fragment,{children:[j.split(/(?=[A-Z])/).map(q=>q.charAt(0).toUpperCase()+q.slice(1)).join(" "),et(j)&&e.jsx(re,{style:{marginLeft:5},color:"green",children:et(j)})]}),name:j,initialValue:_,children:e.jsx(z,{size:"large",value:F.getFieldValue(j),placeholder:"Enter "+j.split(/(?=[A-Z])/).map(q=>q.charAt(0).toUpperCase()+q.slice(1)).join(" "),onChange:q=>{F.submit(),p(F.getFieldsValue())}})})),e.jsx(n.Item,{children:e.jsx(N,{htmlType:"submit",size:"large",style:{marginTop:20,float:"right"},icon:e.jsx(Ut,{}),danger:!0,children:"Save"})})]})})})})})})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(N,{onClick:()=>k(),children:"Auto Create Settings"})})})})})},Is=()=>e.jsxs(e.Fragment,{children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"System Settings"})]}),e.jsx(bs,{})]}),As=()=>e.jsx(xe,{children:e.jsx(Is,{})}),{Title:Ie,Text:ke}=Ge,ks=a=>{const[s,m]=t.useState(),[r,h]=t.useState(!0);le();const p=!de.useBreakpoint().lg,F=async()=>{const{data:k}=await A.custom({url:"",method:"get",meta:{operation:"darasaAnalytics",fields:["analytics"]}});m(k.analytics),h(!1)};return t.useEffect(()=>{F()},[]),e.jsx(e.Fragment,{children:e.jsxs(ee,{align:"top",children:[e.jsx(E,{span:24,children:e.jsx(Ie,{level:5,children:"Oclass Analytics"})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalClasses}),e.jsx(ke,{children:"Classes"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalActiveClasses}),e.jsx(ke,{children:"Active Classes"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalBlockedClasses}),e.jsx(ke,{children:"Blocked Classes"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalStudents}),e.jsx(ke,{children:"Students"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalActiveStudents}),e.jsx(ke,{children:"Active Students"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalBlockedStudents}),e.jsx(ke,{children:"Blocked Students"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalClassesDrives}),e.jsx(ke,{children:"Classes Drives"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalActiveClassesDrives}),e.jsx(ke,{children:"Active Classes Drives"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalBlockedClassesDrives}),e.jsx(ke,{children:"Blocked Classes Drives"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalClassesAnnouncements}),e.jsx(ke,{children:"Announcements"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalActiveClassesAnnouncements}),e.jsx(ke,{children:"Active Announcements"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalBlockedClassesAnnouncements}),e.jsx(ke,{children:"Blocked Announcements"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalClassesAssignments}),e.jsx(ke,{children:"Assignments"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalActiveClassesAnnouncements}),e.jsx(ke,{children:"Active Assignments"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalBlockedClassesAssignments}),e.jsx(ke,{children:"Blocked Assignments"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalClassesResourcesLinks}),e.jsx(ke,{children:"Resources Links"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalActiveClassesResourcesLinks}),e.jsx(ke,{children:"Active Resources Links"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ie,{level:2,children:s==null?void 0:s.totalBlockedClassesResourcesLinks}),e.jsx(ke,{children:"Blocked Resources Links"})]})})})})]})})},{Title:Ne,Text:Fe}=Ge,Ns=a=>{const[s,m]=t.useState(),[r,h]=t.useState(!0);le();const p=!de.useBreakpoint().lg,F=async()=>{const{data:k}=await A.custom({url:"",method:"get",meta:{operation:"odriveAnalytics",fields:["analytics"]}});m(k.analytics),h(!1)};return t.useEffect(()=>{F()},[]),e.jsx(e.Fragment,{children:e.jsxs(ee,{align:"top",children:[e.jsx(E,{span:24,children:e.jsx(Ne,{level:5,children:"Odrive Analytics"})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ne,{level:2,children:s==null?void 0:s.totalDrives}),e.jsx(Fe,{children:"Drives"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ne,{level:2,children:s==null?void 0:s.totalActiveDrives}),e.jsx(Fe,{children:"Active Drives"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ne,{level:2,children:s==null?void 0:s.totalBlockedDrives}),e.jsx(Fe,{children:"Blocked Drives"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ne,{level:2,children:s==null?void 0:s.totalFiles}),e.jsx(Fe,{children:"Files"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ne,{level:2,children:s==null?void 0:s.totalActiveFiles}),e.jsx(Fe,{children:"Active Files"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ne,{level:2,children:s==null?void 0:s.totalBlockedFiles}),e.jsx(Fe,{children:"Blocked Files"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ne,{level:2,children:s==null?void 0:s.totalPrivateDrives}),e.jsx(Fe,{children:"Private Drives"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ne,{level:2,children:s==null?void 0:s.totalActivePrivateDrives}),e.jsx(Fe,{children:"Active Private Drives"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ne,{level:2,children:s==null?void 0:s.totalPublicDrives}),e.jsx(Fe,{children:"Public Drives"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ne,{level:2,children:s==null?void 0:s.totalActivePublicDrives}),e.jsx(Fe,{children:"Active Public Drives"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ne,{level:2,children:s==null?void 0:s.totalBlockedPublicDrives}),e.jsx(Fe,{children:"Blocked Public Drives"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ne,{level:2,children:s==null?void 0:s.totalActiveOdriveSchools}),e.jsx(Fe,{children:"Active Schools"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ne,{level:2,children:s==null?void 0:s.totalBlockedOdriveSchools}),e.jsx(Fe,{children:"Blocked Schools"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ne,{level:2,children:s==null?void 0:s.totalDrivesMembers}),e.jsx(Fe,{children:"Drives Members"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ne,{level:2,children:s==null?void 0:s.totalActiveDrivesMembers}),e.jsx(Fe,{children:"Active Drives Members"})]})})})}),e.jsx(E,{span:p?12:4,children:e.jsx(ae,{loading:r,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ne,{level:2,children:s==null?void 0:s.totalBlockedDrivesMembers}),e.jsx(Fe,{children:"Blocked Drives Members"})]})})})})]})})},{Title:De,Text:Re}=Ge,Fs=a=>{const[s,m]=t.useState(),[r,h]=t.useState(0),[x,p]=t.useState(!0),{push:F}=le(),M=!de.useBreakpoint().lg,G=async()=>{const{data:_}=await A.custom({url:"",method:"get",meta:{operation:"userAnalytics",fields:["analytics"]}});m(_.analytics),p(!1)},j=async()=>{const{data:_}=await A.custom({url:"",method:"get",meta:{operation:"globalOpesSmsBalance",fields:["data"]}});console.log("opes"),console.log(_),_&&h(parseInt(_.data.balance))};return t.useEffect(()=>{G(),j()},[]),e.jsx(e.Fragment,{children:e.jsxs(ee,{align:"top",children:[e.jsx(E,{span:24,children:e.jsx(De,{level:5,children:"Users/Members/School Analytics"})}),e.jsx(E,{span:M?12:4,children:e.jsx(ae,{loading:x,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},onClick:()=>F("/control/schools"),children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(De,{level:2,children:s==null?void 0:s.total_schools}),e.jsx(Re,{children:"Scbools"})]})})})}),e.jsx(E,{span:M?12:4,children:e.jsx(ae,{loading:x,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},onClick:()=>F("/control/users?status=1"),children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(De,{level:2,children:s==null?void 0:s.total_active_users}),e.jsx(Re,{children:"Active Users"})]})})})}),e.jsx(E,{span:M?12:4,children:e.jsx(ae,{loading:x,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},onClick:()=>F("/control/users?status=0"),children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(De,{level:2,children:s==null?void 0:s.total_blocked_users}),e.jsx(Re,{children:"Blocked Users"})]})})})}),e.jsx(E,{span:M?12:2,children:e.jsx(ae,{loading:x,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},onClick:()=>F("/control/users?status=1&role=adminstrator"),children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(De,{level:2,children:s==null?void 0:s.total_adminstrators}),e.jsx(Re,{children:"Active Admins"})]})})})}),e.jsx(E,{span:M?12:2,children:e.jsx(ae,{loading:x,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},onClick:()=>F("/control/users?status=0&role=adminstrator"),children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(De,{level:2,children:s==null?void 0:s.total_blocked_adminstrators}),e.jsx(Re,{children:"Blocked Admins"})]})})})}),e.jsx(E,{span:M?12:2,children:e.jsx(ae,{loading:x,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},onClick:()=>F("/control/users?status=1&role=staff"),children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(De,{level:2,children:s==null?void 0:s.total_staffs}),e.jsx(Re,{children:"Active Staffs"})]})})})}),e.jsx(E,{span:M?12:2,children:e.jsx(ae,{loading:x,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},onClick:()=>F("/control/users?status=0&role=staff"),children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(De,{level:2,children:s==null?void 0:s.total_blocked_staffs}),e.jsx(Re,{children:"Blocked Staffs"})]})})})}),e.jsx(E,{span:M?12:2,children:e.jsx(ae,{loading:x,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(De,{level:2,children:r}),e.jsx(Re,{children:"Messages Balance"})]})})})})]})})},Ts=a=>e.jsxs(e.Fragment,{children:[e.jsx(Fs,{}),e.jsx(Ns,{}),e.jsx(ks,{})]}),qs=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Analytics"})]}),e.jsx(Ts,{})]}),Ps=()=>{const{data:a}=Me(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(xe,{children:e.jsx(qs,{})})},{TextArea:Es}=z,Ms=a=>{const[s,m]=t.useState(!1),[r,h]=t.useState(),[x,p]=t.useState(!1),[F,k]=t.useState(!1),[M,G]=t.useState(!1),[j,_]=t.useState(!0);return e.jsx(e.Fragment,{children:e.jsx(ds.Spin,{spinning:s,children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:O=>{O.is_public=F,O.is_custom=M,O.must_login=j,O.icon=r,m(!0),a.onFinish(O)},requiredMark:!1,initialValues:{remember:!1,email:"",password:""},children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"url",label:"Path",rules:[{required:!0,type:"string",message:"Please input url"}],children:e.jsx(z,{size:"large",placeholder:"Enter Path..."})}),e.jsx(n.Item,{name:"must_login",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{onChange:()=>{_(!j)},defaultChecked:j,children:"Must Login"})}),e.jsx(n.Item,{name:"is_public",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{onChange:()=>{k(!F)},children:"Public Available"})}),e.jsx(n.Item,{name:"is_custom",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{onChange:()=>{G(!M)},children:"Custom Application"})}),e.jsx(n.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(Es,{rows:4})}),e.jsx(n.Item,{name:"icon",label:"Icon",style:{marginBottom:"12px"},children:e.jsx(Oe,{beforeUpload:()=>!1,maxCount:1,onChange:O=>{const q=O.file;r?r.uid!==q.uid&&(h(q),p(!0)):(h(q),p(!0))},onRemove:()=>{h(void 0),p(!1)},accept:"image/*",children:e.jsx(N,{icon:e.jsx(Je,{}),children:"Click to Select"})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(N,{type:"primary",size:"large",htmlType:"submit",disabled:!x||s,loading:s,children:[s&&e.jsx(Jt,{color:"success"}),"Save"]})})]})})})},{TextArea:Ds}=z,zs=a=>{const[s,m]=t.useState(),[r,h]=t.useState(!0),[x,p]=t.useState(!1);return t.useEffect(()=>{a.form.setFieldsValue({name:a.app.name,url:a.app.url,description:a.app.description,must_login:a.app.mustLogin,is_public:a.app.isPublic,is_custom:a.app.isCustom,is_active:a.app.isActive,icon:a.app.icon}),m(null)},[a.randKey]),e.jsx(e.Fragment,{children:e.jsx(Ee,{spinning:x,children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:F=>{F.id=parseInt(a.app.id),F.icon=s,p(!0),a.onFinish(F)},requiredMark:!1,initialValues:{remember:!1,email:"",password:""},children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"url",label:"Path",rules:[{required:!0,type:"string",message:"Please input url"}],children:e.jsx(z,{size:"large",placeholder:"Enter Path..."})}),e.jsx(n.Item,{name:"must_login",valuePropName:"checked",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{children:"Must Login"})}),e.jsx(n.Item,{name:"is_public",valuePropName:"checked",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{children:"Public Available"})}),e.jsx(n.Item,{name:"is_custom",valuePropName:"checked",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{children:"Custom Application"})}),e.jsx(n.Item,{name:"is_active",valuePropName:"checked",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{children:"is Active"})}),e.jsx(n.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(Ds,{rows:4})}),e.jsxs(n.Item,{name:"icon",label:"Icon:",style:{marginBottom:"12px"},children:[e.jsx(fe,{title:a.app.icon,children:e.jsx("span",{style:{color:"green",display:"block"},children:a.app.icon})}),e.jsx(Oe,{beforeUpload:()=>!1,maxCount:1,onChange:F=>{const k=F.file;s?s.uid!==k.uid&&(m(k),h(!0)):(m(k),h(!0))},onRemove:()=>{m(void 0),h(!1)},accept:"image/*",children:e.jsx(N,{icon:e.jsx(Je,{}),children:"Click to Select"})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",loading:x,disabled:x,children:"Save"})})]})})})},Ls=a=>{const[s,m]=t.useState([]),[r,h]=t.useState(),[x,p]=t.useState(!0);le();const[F,k]=t.useState(!1),[M,G]=t.useState(!1),[j]=n.useForm(),[_]=n.useForm(),q=!de.useBreakpoint().lg,B=g=>{h(g),G(!0)},K=()=>{k(!0)},W=()=>{k(!1)},L=async g=>{const{data:v}=await A.custom({url:"",method:"post",meta:{operation:"createApp",variables:{name:{value:g.name,type:"String",required:!0},description:{value:g.description,type:"String",required:!1},url:{value:g.url,type:"String",required:!0},icon:{value:g.icon,type:"Upload",required:!0},isPublic:{value:g.is_public,type:"Boolean",required:!1},isCustom:{value:g.is_custom,type:"Boolean",required:!1},mustLogin:{value:g.must_login,type:"Boolean",required:!1}},fields:["success","message",{app:["id","name","url","icon","description","created","updated","isActive","canDelete","canEdit","canManage","canAccess"]}]}});v.success?(c.success(v.message),m([v.app,...s]),j.resetFields(),k(!1)):c.error(v.message)},V=async g=>{const{data:v}=await A.custom({url:"",method:"post",meta:{operation:"updateApp",variables:{id:{value:g.id,type:"Int",required:!0},name:{value:g.name,type:"String",required:!0},description:{value:g.description,type:"String",required:!1},url:{value:g.url,type:"String",required:!0},icon:{value:g.icon,type:"Upload",required:!1},isPublic:{value:g.is_public,type:"Boolean",required:!1},isCustom:{value:g.is_custom,type:"Boolean",required:!1},mustLogin:{value:g.must_login,type:"Boolean",required:!1},isActive:{value:g.is_active,type:"Boolean",required:!1}},fields:["success","message",{app:["id","name","url","icon","description","created","updated","isActive","canDelete","canEdit","canManage","canAccess"]}]}});v.success?(c.success(v.message),m(s.map(u=>u.id.toString()===g.id.toString()?v.app:u)),_.resetFields(),G(!1)):c.error(v.message)},D=async()=>{const{data:g}=await A.custom({url:"",method:"post",meta:{operation:"syncDefaultApps",variables:{},fields:["success","message"]}});g.success?(c.success(g.message),d()):c.error(g.message)},b=async g=>{const{data:v}=await A.custom({url:"",method:"post",meta:{operation:"deleteApp",variables:{id:{value:g,type:"Int",required:!0}},fields:["success","message"]}});v.success?(c.success(v.message),m(s.filter(u=>u.id.toString()!==g.toString()))):c.error(v.message)},C=g=>{st.confirm({title:"Deleting Application",icon:e.jsx($t,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>b(parseInt(g.toString()))})},d=async()=>{const{data:g}=await A.custom({url:"",method:"get",meta:{operation:"apps",variables:{control:{value:!0,type:"Boolean",required:!0}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","icon","url","isActive","mustLogin","isCustom","isPublic","created","updated","isActive","canEdit","canDelete","canManage","canAccess"]}]}});m(g.results),p(!1)};return t.useEffect(()=>{d()},[]),x?e.jsx(e.Fragment,{children:e.jsx(ae,{loading:x,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(E,{span:20}),e.jsxs(E,{span:4,style:{display:"flex",justifyContent:"flex-end",marginBottom:5,marginTop:5},children:[e.jsxs(N,{size:"large",onClick:()=>{j.resetFields(),K()},danger:!0,children:[e.jsx(Ce,{}),"Create App"]}),e.jsxs(N,{size:"large",onClick:()=>{D()},danger:!0,children:[e.jsx(Ce,{}),"Sync Default Apps"]})]})]}),e.jsxs(ee,{align:"top",children:[s.length===0&&e.jsx(E,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx("h3",{children:"No Apps Found ..."})}),s.map(g=>e.jsx(E,{span:q?12:4,children:e.jsxs(te,{hoverable:g.isActive,style:{marginRight:10,marginBottom:10},children:[e.jsx(se,{style:{right:0,position:"absolute"},children:e.jsx(ct,{trigger:["click"],overlay:e.jsxs(Te,{children:[e.jsx(Te.Item,{icon:e.jsx(be,{}),onClick:()=>{B(g)},disabled:!(g!=null&&g.canDelete),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(Te.Item,{icon:e.jsx(me,{}),onClick:()=>{C(g.id)},disabled:!(g!=null&&g.canDelete),children:e.jsxs("a",{target:"_blank",rel:"noopener noreferrer",children:["Delete ",g.canDelete]})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:v=>v.preventDefault(),children:e.jsx(dt,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},onClick:()=>{},children:[e.jsx(He,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(Qt,{}),src:g.icon}),g.name]})]})}))]}),e.jsx(ie,{title:"Creating An Application",open:F,onOk:W,width:"30vw",onClose:g=>k(g),children:e.jsx(Ms,{form:j,onFinish:L})}),e.jsx(ie,{title:"Edit Application",open:M,width:"30vw",onClose:g=>{G(g)},children:e.jsx(zs,{app:r,form:_,onFinish:V,randKey:Math.random()})})]})},Rs=()=>e.jsxs(e.Fragment,{children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Applications"})]}),e.jsx(Ls,{})]}),Bs=()=>{const{data:a}=Me(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(xe,{children:e.jsx(Rs,{})})},Os=a=>{const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,p]=t.useState(0),[F,k]=t.useState(20),[M,G]=t.useState(""),[j,_]=t.useState(!1),[O,q]=t.useState(!0);le();const[B]=n.useForm();n.useForm();const W=!de.useBreakpoint().lg,L=[{title:"Name",dataIndex:"name",fixed:!0,render:(b,C,d)=>e.jsx("span",{children:e.jsx("a",{children:C.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(b,C,d)=>e.jsx("span",{children:e.jsx("a",{children:b})})},{title:"Created",dataIndex:"created",render:(b,C,d)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(C.created)})})})},{title:"Status",dataIndex:"isActive",render:(b,C,d)=>e.jsx("a",{children:C!=null&&C.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(b,C,d)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"}})}],V=async(b,C="",d=20)=>{const{data:g}=await A.custom({url:"",method:"get",meta:{operation:"systemPermissions",variables:{page:{value:b,type:"Int",required:!0},key:{value:C,type:"String",required:!1},pageSize:{value:d,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(g.page),p(g.total),_(g.hasNext),m(g.results),q(!1)},D=async()=>{const{data:b}=await A.custom({url:"",method:"post",meta:{operation:"syncSystemPermissions",variables:{},fields:["success","message"]}});b.success?(c.success(b.message),s.length=0,m([]),V(1)):c.error(b.message)};return t.useEffect(()=>{V(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:W?24:20,children:e.jsx(n,{layout:"vertical",form:B,onFinish:b=>{h(1),s.length=0,G(b.key),V(1,b.key,F)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:W?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(fe,{title:"Synchronize Default School Ownerships",children:e.jsx(N,{size:"large",icon:e.jsx(Ae,{}),onClick:()=>D()})})})]}),e.jsx("div",{children:e.jsx(ue,{loading:O,columns:L,dataSource:s,scroll:{x:!0},pagination:{onChange:(b,C)=>{k(C),V(b,M,C)},total:x,pageSize:F,position:["bottomCenter"],showQuickJumper:!0}})})]})},_s=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Permissions"})]}),e.jsx(Os,{height:80})]}),Us=()=>{const{data:a}=Me(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(xe,{children:e.jsx(_s,{})})},Ks=a=>e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:s=>{a.onFinish(s)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})}),Vs=a=>{const[s,m]=t.useState(a.role.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.role.name,isActive:a.role.isActive})},[a.form,a.role]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.role.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},ws=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(1),[F,k]=t.useState(0),[M,G]=t.useState(20),[j,_]=t.useState(""),[O,q]=t.useState(!1),[B,K]=t.useState(!0);le();const[W]=n.useForm(),[L]=n.useForm();de.useBreakpoint().lg;const[D,b]=t.useState(!1),[C,d]=t.useState(!1),[g,v]=t.useState(!1),u=Y=>{m(Y),b(!0)},f=Y=>{m(Y),v(!0)},I=()=>{v(!1)},S=async Y=>{const{data:Q}=await A.custom({url:"",method:"post",meta:{operation:"updateSystemRole",variables:{id:{value:Y.id,type:"Int",required:!0},name:{value:Y.name,type:"String",required:!0},isActive:{value:Y.isActive,type:"Boolean",required:!0}},fields:["success","message",{schoolType:["id","name","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}});Q.success?(c.success(Q.message),L.resetFields(),v(!1),h(r.map(Z=>parseInt(Z.id.toString())===parseInt(Y.id)?Q.role:Z))):c.error(Q.message)},i=async Y=>{const{data:Q}=await A.custom({url:"",method:"post",meta:{operation:"createSystemRole",variables:{id:{value:Y.id,type:"Int",required:!0},name:{value:Y.name,type:"String",required:!0},isActive:{value:Y.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","code","description","custom","created","updated","isActive","canDelete","canEdit","canManage"]}]}});Q.success?(c.success(Q.message),L.resetFields(),v(!1),h(r.map(Z=>Z.id===Q.role.id?Q.role:Z))):c.error(Q.message)},l=async Y=>{const{data:Q}=await A.custom({url:"",method:"post",meta:{operation:"deleteSystemRole",variables:{id:{value:parseInt(Y.toString()),type:"Int",required:!0}},fields:["success","message"]}});Q.success?(c.success(Q.message),h(r.filter(Z=>Z.id!==Y))):c.error(Q.message)},R=()=>{c("Canceled")},y=[{title:"Name",dataIndex:"name",fixed:!0,render:(Y,Q,Z)=>e.jsx("span",{children:e.jsx("a",{children:Q.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(Y,Q,Z)=>e.jsx("span",{children:e.jsx("a",{children:Y})})},{title:"Custom Role",dataIndex:"custom",fixed:!0,render:(Y,Q,Z)=>e.jsx("span",{children:Q.custom?e.jsx(re,{color:"red",children:"Custom"}):e.jsx(re,{color:"green",children:"Not Custom"})})},{title:"Created",dataIndex:"created",render:(Y,Q,Z)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(Q.created)})})})},{title:"Status",dataIndex:"isActive",render:(Y,Q,Z)=>e.jsx("a",{children:Q!=null&&Q.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(Y,Q,Z)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(fe,{title:"Manage Role Permissions",placement:"left",children:e.jsx(N,{icon:e.jsx(Zt,{}),disabled:!(Q!=null&&Q.canManage),onClick:()=>u(Q)})}),e.jsx(X,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>l(Q==null?void 0:Q.id),onCancel:()=>R,okText:"Yes",cancelText:"No",disabled:!(Q!=null&&Q.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(Q!=null&&Q.canDelete)})}),e.jsx(fe,{title:"Edit "+(Q==null?void 0:Q.name)+" Ownership",color:"green",placement:"left",children:e.jsx(N,{icon:e.jsx(be,{}),disabled:!(Q!=null&&Q.canEdit),onClick:()=>f(Q)})})]})}],o=async(Y,Q="",Z=20)=>{const{data:T}=await A.custom({url:"",method:"get",meta:{operation:"systemRoles",variables:{page:{value:Y,type:"Int",required:!0},key:{value:Q,type:"String",required:!1},pageSize:{value:Z,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","custom","isActive","created","updated","canEdit","canDelete","canManage"]}]}});p(T.page),k(T.total),q(T.hasNext),h(T.results),K(!1)},U=async()=>{const{data:Y}=await A.custom({url:"",method:"post",meta:{operation:"syncSystemRoles",variables:{},fields:["success","message"]}});Y.success?(c.success(Y.message),r.length=0,h([]),o(1)):c.error(Y.message)};return t.useEffect(()=>{o(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:8,children:e.jsx(n,{layout:"vertical",form:W,onFinish:Y=>{p(1),r.length=0,_(Y.key),o(1,Y.key,M)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(fe,{title:"Synchronize Default Schools Roles",placement:"left",color:"green",children:e.jsx(N,{size:"large",icon:e.jsx(Ae,{}),style:{marginRight:10},onClick:()=>U()})})})]}),e.jsx("div",{children:e.jsx(ue,{loading:B,columns:y,dataSource:r,scroll:{x:!0},pagination:{onChange:(Y,Q)=>{G(Q),o(Y,j,Q)},total:F,pageSize:M,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(ie,{title:"Edit System Role",width:"30vw",open:g,onOk:I,onClose:Y=>v(Y),children:e.jsx(Vs,{form:L,role:s,onFinish:S})}),e.jsx(ie,{title:"Create System Role",width:"30vw",open:C,onCancel:Y=>d(Y),children:e.jsx(Ks,{form:L,onFinish:i})}),e.jsx(ie,{title:"Manage Role Permissions",width:"70vw",visible:D,onCancel:Y=>b(Y),children:e.jsx(us,{role:s,randKey:Math.random()})})]})},Hs=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Roles"})]}),e.jsx(ws,{height:80})]}),Ws=()=>{const{data:a}=Me(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(xe,{children:e.jsx(Hs,{})})},Ys=a=>{const[s,m]=t.useState(a.district.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.district.name,isActive:a.district.isActive})},[a.form,a.district]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.district.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Gs=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(1),[F,k]=t.useState(0),[M,G]=t.useState(20),[j,_]=t.useState(""),[O,q]=t.useState(!1),[B,K]=t.useState(!0);le();const[W]=n.useForm(),[L]=n.useForm(),D=!de.useBreakpoint().lg,[b,C]=t.useState(!1),d=S=>{m(S),C(!0)},g=async S=>{const{data:i}=await A.custom({url:"",method:"post",meta:{operation:"updateDistrict",variables:{id:{value:S.id,type:"Int",required:!0},name:{value:S.name,type:"String",required:!0},isActive:{value:S.isActive,type:"Boolean",required:!0}},fields:["success","message",{district:["id","name",{region:["id","name"]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}});i.success?(c.success(i.message),L.resetFields(),C(!1),h(r.map(l=>l.id===i.district.id?i.district:l))):c.error(i.message)},v=async S=>{const{data:i}=await A.custom({url:"",method:"post",meta:{operation:"deleteDistrict",variables:{id:{value:S,type:"Int",required:!0}},fields:["success","message"]}});i.success?(c.success(i.message),h(r.filter(l=>l.id!==S))):c.error(i.message)},u=()=>{c("Canceled")},f=[{title:"Name",dataIndex:"name",fixed:!0,render:(S,i,l)=>e.jsx("span",{children:e.jsx("a",{children:i.name})})},{title:"Region",dataIndex:"region",fixed:!0,render:(S,i,l)=>e.jsx("span",{children:e.jsx("a",{children:i.region.name})})},{title:"Created",dataIndex:"created",render:(S,i,l)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(i.created)})})})},{title:"Status",dataIndex:"isActive",render:(S,i,l)=>e.jsx("a",{children:i!=null&&i.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(S,i,l)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this member?",onConfirm:()=>v(i==null?void 0:i.id),onCancel:()=>u,okText:"Yes",cancelText:"No",disabled:!(i!=null&&i.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(i!=null&&i.canDelete)})}),e.jsx(N,{disabled:!(i!=null&&i.canEdit),icon:e.jsx(be,{}),onClick:()=>d(i)})]})}],I=async(S,i="",l=20)=>{const{data:R}=await A.custom({url:"",method:"get",meta:{operation:"districts",variables:{page:{value:S,type:"Int",required:!0},key:{value:i,type:"String",required:!1},pageSize:{value:l,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name",{region:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});p(R.page),k(R.total),q(R.hasNext),h(R.results),K(!1)};return t.useEffect(()=>{I(x)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(E,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:W,onFinish:S=>{p(1),r.length=0,I(1,S.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{children:e.jsx(ue,{loading:B,columns:f,dataSource:r,scroll:{x:!0},pagination:{onChange:(S,i)=>{G(i),I(S,j,i)},total:F,pageSize:M,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(ie,{title:"Edit District Informations",width:"30vw",open:b,onClose:S=>C(S),children:e.jsx(Ys,{form:L,district:s,onFinish:g})})]})},Js=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Districts"})]}),e.jsx(Gs,{height:80})]}),Qs=()=>{const{data:a}=Me(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(xe,{children:e.jsx(Js,{})})},$s=a=>{const[s]=n.useForm(),[m,r]=t.useState(a.level.isActive),h=async x=>{const{data:p}=await A.custom({url:"",method:"post",meta:{operation:"updateEducationLevel",variables:{id:{value:x.id,type:"Int",required:!0},name:{value:x.name,type:"String",required:!0},isActive:{value:x.isActive,type:"Boolean",required:!0}},fields:["success","message",{educationLevel:["id","name","code","index",{schoolType:["id","name","code"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});p.success?(c.success(p.message),s.resetFields(),a.onFinish(p.educationLevel)):c.error(p.message)};return t.useEffect(()=>{a.form.setFieldsValue({name:a.level.name,isActive:a.level.isActive})},[a.form,a.level]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:x=>{x.isActive=m,x.id=parseInt(a.level.id.toString()),h(x)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:m,onChange:()=>r(!m),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Zs=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(1),[F,k]=t.useState(0),[M,G]=t.useState(20),[j,_]=t.useState(""),[O,q]=t.useState(!1),[B,K]=t.useState(!0);le();const[W]=n.useForm(),[L]=n.useForm();de.useBreakpoint().lg,t.useState(!1);const[D,b]=t.useState(!1),C=S=>{m(S),b(!0)},d=async()=>{const{data:S}=await A.custom({url:"",method:"post",meta:{operation:"synchronizeEducationLevelsIndexes",variables:{},fields:["success","message"]}});S.success?c.success(S.message):c.error(S.message)},g=async S=>{h(r.map(i=>parseInt(i.id.toString())===parseInt(S.id.toString())?S:i)),b(!1)},v=async S=>{const{data:i}=await A.custom({url:"",method:"post",meta:{operation:"deleteEducationLevel",variables:{id:{value:parseInt(S.toString()),type:"Int",required:!0}},fields:["success","message"]}});i.success?(c.success(i.message),h(r.filter(l=>l.id!==S))):c.error(i.message)},u=()=>{c("Canceled")},f=[{title:"Name",dataIndex:"name",fixed:!0,render:(S,i,l)=>e.jsx("span",{children:e.jsx("a",{children:i.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(S,i,l)=>e.jsx("span",{children:e.jsx("a",{children:i.code})})},{title:"Index",dataIndex:"index",fixed:!0,render:(S,i,l)=>e.jsx("span",{children:e.jsx("a",{children:i.index})})},{title:"School Type",dataIndex:"schoolType",fixed:!0,render:(S,i,l)=>{var R;return e.jsx("span",{children:e.jsx("a",{children:(R=i.schoolType)==null?void 0:R.name})})}},{title:"Created",dataIndex:"created",render:(S,i,l)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(i.created)})})})},{title:"Status",dataIndex:"isActive",render:(S,i,l)=>e.jsx("a",{children:i!=null&&i.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(S,i,l)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>v(i==null?void 0:i.id),onCancel:()=>u,okText:"Yes",cancelText:"No",disabled:!(i!=null&&i.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(i!=null&&i.canDelete),danger:!0})}),e.jsx(fe,{title:"Edit "+(i==null?void 0:i.name)+" Ownership",color:"green",children:e.jsx(N,{icon:e.jsx(be,{}),disabled:!(i!=null&&i.canEdit),onClick:()=>C(i),danger:!0})})]})}],I=async(S,i="",l=20)=>{const{data:R}=await A.custom({url:"",method:"get",meta:{operation:"educationLevels",variables:{page:{value:S,type:"Int",required:!0},key:{value:i,type:"String",required:!1},pageSize:{value:l,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","index",{schoolType:["id","name","code"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});p(R.page),k(R.total),q(R.hasNext),h(R.results),K(!1)};return t.useEffect(()=>{I(x,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:8,children:e.jsx(n,{layout:"vertical",form:W,onFinish:S=>{p(1),r.length=0,_(S.key),I(1,S.key,M)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(fe,{title:"Auto Correct All Education Levels Indexes over all Schools",color:"green",placement:"left",children:e.jsx(X,{title:"Synchronizing All Indexes of Education Levels over all Schools",placement:"left",onConfirm:d,onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Ae,{}),size:"large",children:"Sync Indexes"})})})})]}),e.jsx("div",{children:e.jsx(ue,{loading:B,columns:f,dataSource:r,scroll:{x:!0},pagination:{onChange:(S,i)=>{G(i),I(S,j,i)},total:F,pageSize:M,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(ie,{title:"Edit "+(s==null?void 0:s.name)+" Information",width:"20%",open:D,onClose:S=>b(S),children:e.jsx($s,{form:L,level:s,onFinish:g})})]})},Xs=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"School Education Levels"})]}),e.jsx(Zs,{height:80})]}),ea=()=>{const{data:a}=Me(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(xe,{children:e.jsx(Xs,{})})},ta=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Programmes(High Level Education)"})]}),e.jsx(ms,{height:80,control:!0})]}),sa=()=>e.jsx(xe,{children:e.jsx(ta,{})}),aa=a=>{const[s,m]=t.useState(a.region.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.region.name,isActive:a.region.isActive})},[a.form,a.region]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.region.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},na=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(1),[F,k]=t.useState(0),[M,G]=t.useState(20),[j,_]=t.useState(""),[O,q]=t.useState(!1),[B,K]=t.useState(!0);le();const[W]=n.useForm(),[L]=n.useForm(),D=!de.useBreakpoint().lg,[b,C]=t.useState(!1),d=i=>{m(i),C(!0)},g=async i=>{const{data:l}=await A.custom({url:"",method:"post",meta:{operation:"updateRegion",variables:{id:{value:i.id,type:"Int",required:!0},name:{value:i.name,type:"String",required:!0},isActive:{value:i.isActive,type:"Boolean",required:!0}},fields:["success","message",{region:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});l.success?(c.success(l.message),L.resetFields(),C(!1),h(r.map(R=>R.id===l.region.id?l.region:R))):c.error(l.message)},v=async()=>{const{data:i}=await A.custom({url:"",method:"post",meta:{operation:"syncMtaa",variables:{},fields:["success","message"]}});i.success?c.success(i.message):c.error(i.message)},u=async i=>{const{data:l}=await A.custom({url:"",method:"post",meta:{operation:"deleteRegion",variables:{id:{value:i,type:"Int",required:!0}},fields:["success","message"]}});l.success?(c.success(l.message),h(r.filter(R=>R.id!==i))):c.error(l.message)},f=()=>{c("Canceled")},I=[{title:"Name",dataIndex:"name",fixed:!0,render:(i,l,R)=>e.jsx("span",{children:e.jsx("a",{children:l.name})})},{title:"Created",dataIndex:"created",render:(i,l,R)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(l.created)})})})},{title:"Status",dataIndex:"isActive",render:(i,l,R)=>e.jsx("a",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(i,l,R)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this member?",onConfirm:()=>u(l==null?void 0:l.id),onCancel:()=>f,okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(l!=null&&l.canDelete)})}),e.jsx(N,{disabled:!(l!=null&&l.canEdit),onClick:()=>d(l),icon:e.jsx(be,{})})]})}],S=async(i,l="",R=20)=>{const{data:y}=await A.custom({url:"",method:"get",meta:{operation:"regions",variables:{page:{value:i,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:R,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});p(y.page),k(y.total),q(y.hasNext),h(y.results),K(!1)};return t.useEffect(()=>{S(x,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:W,onFinish:i=>{p(1),r.length=0,S(1,i.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:D?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(Ae,{}),onClick:()=>v(),children:"Sync Mtaa"})})]}),e.jsx("div",{children:e.jsx(ue,{loading:B,columns:I,dataSource:r,scroll:{x:!0},pagination:{onChange:(i,l)=>{G(l),S(i,j,l)},total:F,pageSize:M,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(ie,{title:"Edit Region Informations",width:"30vw",open:b,onClose:i=>C(i),children:e.jsx(aa,{form:L,region:s,onFinish:g})})]})},ia=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Regions"})]}),e.jsx(na,{height:80})]}),ra=()=>e.jsx(xe,{children:e.jsx(ia,{})}),{Option:Ve}=Se,{TextArea:la}=z,ca=a=>{var y,o,U,Y,Q,Z,T,P,ne,ve,Qe,$e,Ue,_e,Ze,Xe,H,J,ge,je,ze,Ke;const[s,m]=t.useState([]),[r,h]=t.useState([]),[x,p]=t.useState([]),[F,k]=t.useState([]),[M,G]=t.useState([]),[j,_]=t.useState(0),[O,q]=t.useState(0),[B,K]=t.useState(),[W,L]=t.useState(!1),[V,D]=t.useState(!1),[b,C]=t.useState(!1),[d,g]=t.useState([]),v=async($=1,oe="")=>{const{data:Le}=await A.custom({url:"",method:"get",meta:{operation:"ownerships",variables:{page:{value:$,type:"Int",required:!0},key:{value:oe,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(Le.results)},u=async($,oe="")=>{C(!0);const{data:Le}=await A.custom({url:"",method:"get",meta:{operation:"wards",variables:{key:{value:oe,type:"String",required:!1},district:{value:$,type:"Int",requiqred:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});p(Le.results),C(!1)},f=async($,oe="")=>{D(!0);const{data:Le}=await A.custom({url:"",method:"get",meta:{operation:"districts",variables:{key:{value:oe,type:"String",required:!1},region:{value:$,type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});k(Le.results),D(!1)},I=async($="")=>{const{data:oe}=await A.custom({url:"",method:"get",meta:{operation:"regions",variables:{key:{value:$,type:"String",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});G(oe.results),a.form.setFieldsValue({district:void 0,ward:void 0})},S=async $=>{_($),f($)},i=async $=>{q($),u($)},l=async($="")=>{const{data:oe}=await A.custom({url:"",method:"get",meta:{operation:"schoolsTypes",variables:{key:{value:$,type:"String",required:!1},excludeAssigned:{value:!0,type:"Boolean",required:!1},schoolId:{value:parseInt(a.school.id),type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});m(oe.results)},R=$=>{g($)};return t.useEffect(()=>{var $,oe,Le,ot,ut,mt,ht,xt,pt,gt,jt,yt,ft,vt,St,Ct,bt,It,At,kt,Nt,Ft,Tt,qt,Pt,Et,Mt,Dt,zt,Lt;l(),v(),I(),I((ot=(Le=(oe=($=a.school)==null?void 0:$.ward)==null?void 0:oe.district)==null?void 0:Le.region)==null?void 0:ot.name),S(parseInt((ht=(mt=(ut=a.school)==null?void 0:ut.ward)==null?void 0:mt.district)==null?void 0:ht.region.id)),D(!1),i(parseInt((pt=(xt=a.school)==null?void 0:xt.ward)==null?void 0:pt.district.id)),C(!1),a.form.setFieldsValue({name:(gt=a.school)==null?void 0:gt.name,serial_number:(jt=a.school)==null?void 0:jt.serialNumber,ownership_id:(ft=(yt=a.school)==null?void 0:yt.ownership)==null?void 0:ft.id,school_type_id:(St=(vt=a.school)==null?void 0:vt.schoolType)==null?void 0:St.id,region_id:(At=(It=(bt=(Ct=a.school)==null?void 0:Ct.ward)==null?void 0:bt.district)==null?void 0:It.region)==null?void 0:At.id,district_id:(Ft=(Nt=(kt=a.school)==null?void 0:kt.ward)==null?void 0:Nt.district)==null?void 0:Ft.id,ward_id:(qt=(Tt=a.school)==null?void 0:Tt.ward)==null?void 0:qt.id,longitude:(Pt=a.school)==null?void 0:Pt.longitude,latitude:(Et=a.school)==null?void 0:Et.latitude,bio:(Mt=a.school)==null?void 0:Mt.bio,logo:(Dt=a.school)==null?void 0:Dt.logo,is_universal:(zt=a.school)==null?void 0:zt.isUniversal,njiwa_account:(Lt=a.school)==null?void 0:Lt.hasNjiwaAccount})},[a.randKey]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:$=>{$.schoolTypes=d,$.id=a.school.id,$.is_active=a.school.isActive,a.onFinish($)},requiredMark:!1,initialValues:{name:(y=a.school)==null?void 0:y.name,serial_number:(o=a.school)==null?void 0:o.serialNumber,ownership_id:(Y=(U=a.school)==null?void 0:U.ownership)==null?void 0:Y.id,school_type_id:(Z=(Q=a.school)==null?void 0:Q.schoolType)==null?void 0:Z.id,region_id:(ve=(ne=(P=(T=a.school)==null?void 0:T.ward)==null?void 0:P.district)==null?void 0:ne.region)==null?void 0:ve.id,district_id:(Ue=($e=(Qe=a.school)==null?void 0:Qe.ward)==null?void 0:$e.district)==null?void 0:Ue.id,ward_id:(Ze=(_e=a.school)==null?void 0:_e.ward)==null?void 0:Ze.id,longitude:(Xe=a.school)==null?void 0:Xe.longitude,latitude:(H=a.school)==null?void 0:H.latitude,bio:(J=a.school)==null?void 0:J.bio,logo:(ge=a.school)==null?void 0:ge.logo,is_universal:(je=a.school)==null?void 0:je.isUniversal,njiwa_account:(ze=a.school)==null?void 0:ze.hasNjiwaAccount},children:[e.jsxs(ee,{children:[e.jsxs(E,{span:11,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"serial_number",label:"Serial Number",rules:[{required:!0,type:"string",message:"Please input Serial Number ..."}],children:e.jsx(z,{size:"large",placeholder:"Enter Serial Number ..."})}),e.jsx(n.Item,{label:"School Type",rules:[{required:!0,type:"string",message:"Please choose School Type"}],children:e.jsx(Se,{mode:"multiple",showSearch:!0,size:"large",placeholder:"Select a School Type",optionFilterProp:"children",onChange:R,onSearch:$=>{},filterOption:($,oe)=>oe.children.toLowerCase().includes($.toLowerCase()),dropdownStyle:{zIndex:9999},children:s.map(($,oe)=>e.jsx(Ve,{value:$.id,children:$.name}))})}),e.jsx(n.Item,{name:"ownership_id",label:"School Ownership",rules:[{required:!0,type:"string",message:"Please choose Ownership"}],children:e.jsx(Se,{showSearch:!0,size:"large",placeholder:"Select a Ownership",optionFilterProp:"children",onChange:$=>{},onSearch:$=>{},filterOption:($,oe)=>oe.children.toLowerCase().includes($.toLowerCase()),dropdownStyle:{zIndex:9999},children:r.map(($,oe)=>e.jsx(Ve,{value:$.id,children:$.name}))})}),e.jsx(n.Item,{name:"bio",label:"Biography",style:{marginBottom:"12px"},children:e.jsx(la,{rows:4})}),e.jsx(n.Item,{name:"logo",label:"Logo",style:{marginBottom:"12px"},children:e.jsx(Oe,{beforeUpload:()=>!1,maxCount:1,onChange:$=>{const oe=$.file;B?B.uid!==oe.uid&&(K(oe),L(!0)):(K(oe),L(!0))},onRemove:()=>{K(void 0),L(!1)},accept:"image/*",children:e.jsx(N,{icon:e.jsx(Je,{}),size:"large",children:"Click to Select"})})})]}),e.jsxs(E,{span:11,offset:2,children:[e.jsx(n.Item,{name:"region_id",label:"Region",rules:[{required:!0,type:"string",message:"Please Choose Region ..."}],children:e.jsx(Se,{showSearch:!0,size:"large",placeholder:"Select a region",optionFilterProp:"children",onChange:$=>{S(parseInt($)),a.form.resetFields(["district_id","ward_id"]),a.form.setFieldsValue({district_id:void 0,ward_id:void 0}),k([]),p([])},onSearch:$=>{$.length>2&&I($)},filterOption:($,oe)=>oe.children.toLowerCase().includes($.toLowerCase()),dropdownStyle:{zIndex:9999},children:M.map(($,oe)=>e.jsx(Ve,{value:$.id,children:$.name}))})}),e.jsx(n.Item,{name:"district_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"District"}),e.jsx(Ee,{spinning:V})]}),rules:[{required:!0,type:"string",message:"Please Choose District ..."}],children:e.jsx(Se,{showSearch:!0,size:"large",disabled:V||F.length===0,placeholder:"Select a district",optionFilterProp:"children",onChange:$=>{i(parseInt($)),a.form.setFieldsValue({ward:void 0}),p([])},onSearch:$=>{$.length>2&&j!==0&&f(j,$)},filterOption:($,oe)=>oe.children.toLowerCase().includes($.toLowerCase()),dropdownStyle:{zIndex:9999},children:F.map(($,oe)=>e.jsx(Ve,{value:$.id,children:$.name}))})}),e.jsx(n.Item,{name:"ward_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Ward"}),e.jsx(Ee,{spinning:b})]}),children:e.jsx(Se,{showSearch:!0,size:"large",disabled:b||x.length===0,placeholder:"Select a ward",optionFilterProp:"children",onChange:$=>{},onSearch:$=>{$.length>2&&u(O,$)},filterOption:($,oe)=>oe.children.toLowerCase().includes($.toLowerCase()),dropdownStyle:{zIndex:9999},children:x.map(($,oe)=>e.jsx(Ve,{value:$.id,children:$.name}))})}),e.jsx(n.Item,{name:"website",label:"Website",rules:[{required:!1,type:"url",message:"Please input Website Address ..."}],children:e.jsx(z,{size:"large",placeholder:"Enter Website Address ..."})}),e.jsx(n.Item,{name:"latitude",label:"Latitude",rules:[{required:!1,type:"string",message:"Please input Latitude ..."}],children:e.jsx(z,{size:"large",placeholder:"Enter Latitude..."})}),e.jsx(n.Item,{name:"longitude",label:"Longitude",rules:[{required:!1,type:"string",message:"Please input Longitude ..."}],children:e.jsx(z,{size:"large",placeholder:"Enter Longitude..."})}),e.jsx(n.Item,{name:"is_universal",valuePropName:"checked",children:e.jsx(pe,{children:"Universal"})}),e.jsx(n.Item,{name:"njiwa_account",valuePropName:"checked",children:e.jsx(pe,{disabled:(Ke=a.school)==null?void 0:Ke.hasNjiwaAccount,children:"Auto Create Njiwa Account"})})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},da=a=>{const[s,m]=t.useState([]),[r,h]=t.useState(!0),[x,p]=t.useState(1);t.useState(25);const[F]=n.useForm(),[k,M]=t.useState(0),[G,j]=t.useState(0),[_,O]=t.useState(!0);le(),t.useState(!1),t.useState(!1),t.useState();const q=async K=>{const{data:W}=await A.custom({url:"",method:"post",meta:{operation:"addSchoolAdminstrator",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0},userId:{value:parseInt(K.toString()),type:"Int",required:!0}},fields:["success","message",{member:["id",{school:["id","name"]},{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}});W.success?(c.success(W.message),m(s.filter(L=>L.id.toString()!==K.toString())),a.onAdd(W.member)):c.error(W.message),st.destroyAll()},B=async(K,W="",L=!1)=>{const{data:V}=await A.custom({url:"",method:"get",meta:{operation:"notSchoolAdminstrators",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0},page:{value:K,type:"Int",required:!0},key:{value:W,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","firstName","middleName","lastName","fullName","email","pic","created","updated","isActive","canEdit","canDelete","canManage"]}]}});j(V.total),M(V.pages),p(V.page),O(V.hasNext),m([...s,...V.results]),h(!1)};return t.useEffect(()=>{s.length=0,m([]),B(1)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsx(E,{span:24,children:e.jsx(n,{layout:"vertical",form:F,onFinish:K=>{s.length=0,m([]),B(1,K.key,!0)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search Adminstrator(s)...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(Ee,{spinning:r,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(Pe,{itemLayout:"horizontal",dataSource:s,renderItem:K=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Pe.Item,{style:{margin:0,padding:0},actions:[e.jsx(X,{placement:"topLeft",title:"Adding "+K.fullName+" to "+a.school.name+"?",onConfirm:()=>q(K.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Kt,{})})})],children:e.jsx(Pe.Item.Meta,{avatar:e.jsx(He,{src:K.pic}),title:e.jsx("a",{children:K.fullName}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:K.email})})})},"file-"+K.id)})})}),_&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(N,{type:"primary",onClick:()=>{B(x+1)},children:"Load More"})})]})]})},{Option:oa}=Se,ua=["female","male","others"],ma=a=>{const[s,m]=t.useState(!1),[r,h]=t.useState(!1),[x,p]=t.useState(!1),[F,k]=t.useState(!1),[M,G]=t.useState(),[j]=n.useForm(),_=async O=>{k(!0);const{data:q}=await A.custom({url:"",method:"post",meta:{operation:"createSchoolAdminstratorPlain",variables:{schoolId:{value:parseInt(O.school_id),type:"Int",required:!0},firstName:{value:O.first_name,type:"String",required:!0},middleName:{value:O.middle_name,type:"String",required:!0},lastName:{value:O.last_name,type:"String",required:!0},phoneNumber:{value:O.phone_number,type:"String",required:!0},email:{value:O.email,type:"String",required:!1},gender:{value:O.gender,type:"String",required:!1}},fields:["success","message","memberExists","existSameSchool","existSameSchoolNotAuthenticated",{member:["id",{school:["id","name"]},{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}}).catch(B=>(c.error("Error in Creating School Adminstrator"),{data:null})).then(B=>B);q&&(q.success?(c.success(q.message),a.onFinish(q.member)):(c.error(q.message),G(q.message),m(q.memberExists),h(q.existSameSchool),p(q.existSameSchoolNotAuthenticated))),k(!1)};return t.useEffect(()=>{},[a.randKey]),e.jsxs(e.Fragment,{children:[M&&e.jsx(Vt,{description:e.jsx(e.Fragment,{children:M}),type:"error",closable:!0}),e.jsxs(n,{layout:"vertical",form:j,onFinish:O=>{O.school_id=a.school.id,_(O)},requiredMark:!0,autoComplete:"off",initialValues:{remember:!1,email:"",password:""},children:[e.jsx(n.Item,{name:"first_name",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter First Name ..."})}),e.jsx(n.Item,{name:"middle_name",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(n.Item,{name:"last_name",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(n.Item,{label:"Gender",name:"gender",rules:[{required:!0,type:"string",message:"Please choose Gender..."}],children:e.jsx(Se,{size:"large",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onSearch:O=>{},filterOption:(O,q)=>q.children.toLowerCase().includes(O.toLowerCase()),dropdownStyle:{zIndex:9999},children:ua.map((O,q)=>e.jsx(oa,{value:O,children:O.charAt(0).toUpperCase()+O.slice(1)}))})}),e.jsx(n.Item,{name:"phone_number",label:"Mobile Phone Number",rules:[{required:!0,type:"string",message:"Please input Mobile Phone Number"}],children:e.jsx(z,{size:"large",placeholder:"Enter Mobile Phone Number ..."})}),e.jsx(n.Item,{name:"email",label:"Email Address",rules:[{required:!0,type:"string",message:"Please input Email Address ..."}],children:e.jsx(z,{size:"large",placeholder:"Enter First Name ..."})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(N,{type:"primary",size:"large",color:"red",onClick:()=>{j.resetFields()},danger:!0,children:"Clear"}),e.jsx(N,{size:"large",htmlType:"submit",disabled:F,loading:F,danger:!0,children:"Save"})]})]})]})},ha=a=>{const[s,m]=t.useState([]),[r,h]=t.useState(!0),[x,p]=t.useState(1),[F,k]=t.useState(25),[M,G]=t.useState(""),[j]=n.useForm(),[_,O]=t.useState(0),[q,B]=t.useState(0),[K,W]=t.useState(!0);le();const[L,V]=t.useState(!1),[D,b]=t.useState(!1),C=()=>{V(!0)},d=I=>{m([I,...s])},g=async I=>{const{data:S}=await A.custom({url:"",method:"post",meta:{operation:"removeSchoolAdminstrator",variables:{id:{value:I,type:"Int",required:!0}},fields:["success","message"]}});S.success?(c.success(S.message),m(s.filter(i=>i.id.toString()!==I.toString()))):c.error(S.message),st.destroyAll()},v=async I=>{const{data:S}=await A.custom({url:"",method:"post",meta:{operation:"deleteSchoolMember",variables:{id:{value:I,type:"Int",required:!0}},fields:["success","message"]}});S.success?(c.success(S.message),m(s.filter(i=>i.id.toString()!==I.toString()))):c.error(S.message),st.destroyAll()},u=async(I,S="",i=20)=>{const{data:l}=await A.custom({url:"",method:"get",meta:{operation:"schoolMembers",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0},adminstrator:{value:!0,type:"Boolean",required:!0},page:{value:I,type:"Int",required:!0},key:{value:S,type:"String",required:!1},pageSize:{value:i,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{school:["id","name"]},{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}});B(l.total),O(l.pages),p(l.page),W(l.hasNext),m([...s,...l.results]),h(!1)},f=I=>{m([I,...s]),b(!1)};return t.useEffect(()=>{s.length=0,m([]),u(1,"",20)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(E,{span:16,children:e.jsx(n,{layout:"vertical",form:j,onFinish:I=>{G(I.key),u(0,I.key,F)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search Adminstrator(s)...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(E,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(N,{size:"large",icon:e.jsx(Ce,{}),onClick:C,children:"Enroll"}),e.jsx(N,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>b(!0),children:"Register New"})]})]}),e.jsxs(Ee,{spinning:r,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"65vh",overflowY:"auto"},children:e.jsx(Pe,{itemLayout:"horizontal",dataSource:s,renderItem:I=>{var S,i,l;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Pe.Item,{style:{margin:0,padding:0},actions:[e.jsx(ct,{trigger:["click"],placement:"bottomRight",overlay:e.jsxs(Te,{children:[e.jsx(Te.Item,{disabled:!I.canDelete,icon:e.jsx(me,{}),children:e.jsx(X,{placement:"topRight",title:"Are you sure you want to delete this adminstrator?",onConfirm:()=>v(parseInt(I.id.toString())),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(Te.Item,{icon:e.jsx(wt,{}),children:e.jsx(X,{placement:"topRight",title:"Are you sure you want to Remove Adminstrator Role?",onConfirm:()=>g(parseInt(I.id.toString())),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove Adminstrator Role"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:R=>R.preventDefault(),children:e.jsx(dt,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(Pe.Item.Meta,{avatar:e.jsx(He,{src:(S=I.user)==null?void 0:S.pic}),title:e.jsx("a",{children:(i=I.user)==null?void 0:i.fullName}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:(l=I.user)==null?void 0:l.email})})})},"file-"+I.id)})}})}),K&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(N,{type:"primary",onClick:()=>{u(x+1,M)},children:"Load More"})})]}),e.jsx(We,{title:"Adding School Adminstrators",width:"30vw",onClose:I=>V(I),open:L,anchor:"right",children:e.jsx(da,{randKey:Math.random(),school:a.school,onAdd:d})}),e.jsx(We,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Registering School Adminstrators"}),e.jsx(re,{color:"green",style:{marginLeft:10},children:a.school.name})]}),width:"40vw",onClose:I=>b(I),open:D,children:e.jsx(ma,{school:a.school,randKey:Math.random(),onFinish:f})})]})},{Option:we}=Se,{TextArea:xa}=z,pa=a=>{const[s,m]=t.useState([]),[r,h]=t.useState([]),[x,p]=t.useState([]),[F,k]=t.useState([]),[M,G]=t.useState([]),[j,_]=t.useState(0),[O,q]=t.useState(0),[B,K]=t.useState(),[W,L]=t.useState(!1),[V,D]=t.useState(!1),[b,C]=t.useState(!1),[d,g]=t.useState([]),v=async(y=1,o="")=>{const{data:U}=await A.custom({url:"",method:"get",meta:{operation:"ownerships",variables:{page:{value:y,type:"Int",required:!0},key:{value:o,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(U.results)},u=async(y,o="")=>{C(!0);const{data:U}=await A.custom({url:"",method:"get",meta:{operation:"wards",variables:{key:{value:o,type:"String",required:!1},district:{value:y,type:"Int",requiqred:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});p(U.results),C(!1)},f=async(y,o="")=>{D(!0);const{data:U}=await A.custom({url:"",method:"get",meta:{operation:"districts",variables:{key:{value:o,type:"String",required:!1},region:{value:y,type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});k(U.results),D(!1)},I=async(y="")=>{const{data:o}=await A.custom({url:"",method:"get",meta:{operation:"regions",variables:{key:{value:y,type:"String",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});G(o.results),a.form.setFieldsValue({district:void 0,ward:void 0})},S=async(y="")=>{const{data:o}=await A.custom({url:"",method:"get",meta:{operation:"schoolsTypes",variables:{key:{value:y,type:"String",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});m(o.results)},i=async y=>{_(y),f(y)},l=async y=>{q(y),u(y)},R=y=>{g(y)};return t.useEffect(()=>{S(),v(),I()},[]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:y=>{y.schoolTypes=d,a.onFinish(y)},requiredMark:!0,children:[e.jsxs(ee,{children:[e.jsxs(E,{span:11,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"serial_number",label:"Serial Number",rules:[{required:!0,type:"string",message:"Please input Serial Number ..."}],children:e.jsx(z,{size:"large",placeholder:"Enter Serial Number ..."})}),e.jsx(n.Item,{label:"School Type",name:"schoolTypes",rules:[{required:!0,type:"array",message:"Please choose School Type"}],children:e.jsx(Se,{size:"large",mode:"multiple",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onChange:R,onSearch:y=>{},filterOption:(y,o)=>o.children.toLowerCase().includes(y.toLowerCase()),dropdownStyle:{zIndex:9999},children:s.map((y,o)=>e.jsx(we,{value:y.id,children:y.name}))})}),e.jsx(n.Item,{name:"ownership_id",label:"School Ownership",rules:[{required:!0,type:"string",message:"Please choose Ownership"}],children:e.jsx(Se,{size:"large",showSearch:!0,placeholder:"Select a Ownership",optionFilterProp:"children",onChange:y=>{},onSearch:y=>{},filterOption:(y,o)=>o.children.toLowerCase().includes(y.toLowerCase()),dropdownStyle:{zIndex:9999},children:r.map((y,o)=>e.jsx(we,{value:y.id,children:y.name}))})}),e.jsx(n.Item,{name:"bio",label:"Biography",style:{marginBottom:"12px"},children:e.jsx(xa,{rows:4})}),e.jsx(n.Item,{name:"logo",label:"Logo",style:{marginBottom:"12px"},children:e.jsx(Oe,{beforeUpload:()=>!1,maxCount:1,onChange:y=>{const o=y.file;B?B.uid!==o.uid&&(K(o),L(!0)):(K(o),L(!0))},onRemove:()=>{K(void 0),L(!1)},accept:"image/*",children:e.jsx(N,{icon:e.jsx(Je,{}),children:"Click to Select"})})})]}),e.jsxs(E,{span:11,offset:2,children:[e.jsx(n.Item,{name:"region_id",label:"Region",rules:[{required:!0,type:"string",message:"Please Choose Region ..."}],children:e.jsx(Se,{size:"large",showSearch:!0,placeholder:"Select a region",optionFilterProp:"children",onChange:y=>{i(parseInt(y)),a.form.setFieldsValue({district:void 0,ward:void 0}),k([]),p([])},onSearch:y=>{y.length>2&&I(y)},filterOption:(y,o)=>o.children.toLowerCase().includes(y.toLowerCase()),dropdownStyle:{zIndex:9999},children:M.map((y,o)=>e.jsx(we,{value:y.id,children:y.name}))})}),e.jsx(n.Item,{name:"district_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"District"}),e.jsx(Ee,{spinning:V})]}),rules:[{required:!0,type:"string",message:"Please Choose District ..."}],children:e.jsx(Se,{size:"large",showSearch:!0,disabled:V||F.length===0,placeholder:"Select a district",optionFilterProp:"children",onChange:y=>{l(parseInt(y)),a.form.setFieldsValue({ward:void 0}),p([])},onSearch:y=>{y.length>2&&j!==0&&f(j,y)},filterOption:(y,o)=>o.children.toLowerCase().includes(y.toLowerCase()),dropdownStyle:{zIndex:9999},children:F.map((y,o)=>e.jsx(we,{value:y.id,children:y.name}))})}),e.jsx(n.Item,{name:"ward_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Ward"}),e.jsx(Ee,{spinning:b})]}),children:e.jsx(Se,{size:"large",showSearch:!0,disabled:b||x.length===0,placeholder:"Select a ward",optionFilterProp:"children",onChange:y=>{},onSearch:y=>{y.length>2&&u(O,y)},filterOption:(y,o)=>o.children.toLowerCase().includes(y.toLowerCase()),dropdownStyle:{zIndex:9999},children:x.map((y,o)=>e.jsx(we,{value:y.id,children:y.name}))})}),e.jsx(n.Item,{name:"website",label:"Website",rules:[{required:!1,type:"url",message:"Please input Website Address ..."}],children:e.jsx(z,{size:"large",placeholder:"Enter Website Address ..."})}),e.jsx(n.Item,{name:"latitude",label:"Latitude",rules:[{required:!1,type:"string",message:"Please input Latitude ..."}],children:e.jsx(z,{size:"large",placeholder:"Enter Latitude..."})}),e.jsx(n.Item,{name:"longitude",label:"Longitude",rules:[{required:!1,type:"string",message:"Please input Longitude ..."}],children:e.jsx(z,{size:"large",placeholder:"Enter Longitude..."})}),e.jsx(n.Item,{name:"is_universal",valuePropName:"checked",children:e.jsx(pe,{children:"Universal"})}),e.jsx(n.Item,{name:"njiwa_account",valuePropName:"checked",children:e.jsx(pe,{children:"Auto Create Njiwa Account"})})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},ga=a=>{const[s]=n.useForm(),[m,r]=t.useState(),[h,x]=t.useState(!1),p=async F=>{const{data:k}=await A.custom({url:"",method:"post",meta:{operation:"createSchoolContract",variables:{contractNumber:{value:F.contract_number,type:"String",required:!0},contractValue:{value:F.contract_value,type:"Float",required:!0},startDate:{value:F.start_date,type:"String",required:!0},endDate:{value:F.end_date,type:"String",required:!0},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0},contractDocument:{value:m,type:"Upload",required:!0}},fields:["success","message"]}});k.success?(c.success(k.message),a.onFinish(),s.resetFields()):c.error(k.message)};return t.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:s,onFinish:F=>{p(F)},requiredMark:!0,children:[e.jsx(n.Item,{name:"contract_number",label:"Contract Number",rules:[{required:!0,type:"string",message:"Please input Contract Number ..."}],children:e.jsx(z,{size:"large",placeholder:"Enter Contract Number ..."})}),e.jsx(n.Item,{name:"contract_value",label:"Contract Value",rules:[{required:!0,type:"number",message:"Please input Contract Value ..."}],children:e.jsx(Be,{min:0,defaultValue:0,onChange:()=>{},size:"large",style:{width:"100%"}})}),e.jsx(n.Item,{name:"start_date",label:"Contract Start Date",rules:[{required:!0,type:"object",message:"Please input Contract Start Date ..."}],children:e.jsx(tt,{onChange:()=>{},popupStyle:{zIndex:9999}})}),e.jsx(n.Item,{name:"end_date",label:"Contract End Date",rules:[{required:!0,type:"object",message:"Please input Contract End Date ..."}],children:e.jsx(tt,{onChange:()=>{},popupStyle:{zIndex:9999}})}),e.jsx(n.Item,{name:"contract_document",label:"Contract Document",style:{marginBottom:"12px"},rules:[{required:!h,type:"object",message:"Please Pick a Contract Document ..."}],children:e.jsx(Oe,{beforeUpload:()=>!1,maxCount:1,onChange:F=>{const k=F.file;m?m.uid!==k.uid&&(r(k),x(!0)):(r(k),x(!0))},onRemove:()=>{r(void 0),x(!1)},accept:".pdf",children:e.jsx(N,{icon:e.jsx(Je,{}),children:"Click to Select"})})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20},children:[e.jsx(N,{size:"large",icon:e.jsx(Ye,{}),onClick:()=>{r(void 0),x(!1),s.resetFields()},danger:!0,children:"Reset"}),e.jsx(N,{size:"large",htmlType:"submit",icon:e.jsx(Ye,{}),danger:!0,children:"Save"})]})]})})},ja=a=>{const[s]=n.useForm(),[m,r]=t.useState([]),[h,x]=t.useState(),[p,F]=t.useState(!1),[k,M]=t.useState(1),[G,j]=t.useState(0),[_,O]=t.useState(!1);t.useState(!1);const[q,B]=t.useState(""),[K,W]=t.useState(!1),L=[{title:"Contract Number",dataIndex:"contractNumber",key:"contractNumber",render:(b,C)=>e.jsxs(e.Fragment,{children:[e.jsx("a",{children:b}),C.contractDocument&&e.jsx(fe,{title:"Click to Download Contract Document",children:e.jsx(N,{size:"small",style:{marginLeft:5},danger:!0,onClick:()=>{window.open(C.contractDocument)},children:e.jsx(Xt,{})})})]})},{title:"Start Date",dataIndex:"startDate",key:"startDate",render:b=>e.jsx(e.Fragment,{children:qe(b).format("lll")})},{title:"End Date",dataIndex:"endDate",key:"endDate",render:b=>e.jsx(e.Fragment,{children:qe(b).format("lll")})},{title:"Contract Value",dataIndex:"contractValue",key:"contractValue"},{title:"Created",dataIndex:"created",key:"created",render:b=>e.jsx(e.Fragment,{children:qe(b).format("lll")})},{title:"Created",dataIndex:"created",key:"created",render:b=>e.jsx(e.Fragment,{children:qe(b).format("lll")})},{title:"",dataIndex:"actions",key:"actions",render:(b,C)=>e.jsxs(e.Fragment,{children:[e.jsx(N,{size:"small",onClick:()=>{x(C)},danger:!0,icon:e.jsx(be,{})}),e.jsx(X,{title:"Delete the contract?",placement:"topRight",onConfirm:()=>D(C.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{size:"small",danger:!0,icon:e.jsx(me,{})})})]})}],V=async(b,C="",d=20)=>{const{data:g}=await A.custom({url:"",method:"get",meta:{operation:"schoolContracts",variables:{page:{value:b,type:"Int",required:!0},pageSize:{value:d,type:"Int",required:!0},key:{value:C,type:"String",required:!1},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","contractNumber","contractValue","contractDocument","startDate","endDate","created","updated","isActive","canEdit","canDelete","canManage"]}]}});M(g.page),j(g.total),O(g.hasNext),r(g.results),F(!1)},D=async b=>{const{data:C}=await A.custom({url:"",method:"post",meta:{operation:"deleteSchoolContract",variables:{id:{value:b,type:"Int",required:!0}},fields:["success","message"]}});C.success?(c.success(C.message),V(k,q)):c.error(C.message)};return t.useEffect(()=>{V(k,q)},[a.randKey,a.school]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:10,children:e.jsx(n,{layout:"vertical",form:s,onFinish:b=>{},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:14,style:{textAlign:"right"},children:e.jsx(N,{icon:e.jsx(Ce,{}),size:"large",onClick:()=>{W(!0)},danger:!0,children:"Add Contract"})})]}),e.jsx(ue,{dataSource:m,columns:L}),e.jsx(We,{title:"Adding New Contract",anchor:"right",width:"35vw",onClose:b=>W(b),open:K,children:e.jsx(ga,{school:a.school,onFinish:()=>{W(!1),V(1,"")}})})]})},ya=a=>{const[s]=n.useForm(),m=async r=>{const{data:h}=await A.custom({url:"",method:"post",meta:{operation:"createSchoolNjiwaAccountBilling",variables:{amount:{value:r.amount,type:"Float",required:!1},units:{value:0,type:"Int",required:!1},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0}},fields:["success","message",{bill:["id",{account:["id"]},"billNumber","amount","units","source",{creator:["id","fullName","firstName","middleName","lastName","email","phone"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(x=>({data:null})).then(x=>x);h&&(h.success?(c.success(h.message),a.onFinish(h.bill)):c.error(h.message))};return t.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:s,onFinish:r=>{m(r)},requiredMark:!0,children:[e.jsx(n.Item,{name:"amount",label:"Amount",rules:[{required:!0,type:"number",message:"Please input Amount"}],children:e.jsx(Be,{min:1,style:{width:"50%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",htmlType:"submit",danger:!0,icon:e.jsx(Ye,{}),children:"Save"})})]})})},fa=a=>{const[s]=n.useForm(),m=async r=>{const{data:h}=await A.custom({url:"",method:"post",meta:{operation:"createSchoolNjiwaAccountBilling",variables:{amount:{value:0,type:"Float",required:!1},units:{value:r.units,type:"Int",required:!1},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0}},fields:["success","message",{bill:["id",{account:["id"]},"billNumber","amount","units","source",{creator:["id","fullName","firstName","middleName","lastName","email","phone"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(x=>({data:null})).then(x=>x);h&&(h.success?(c.success(h.message),a.onFinish(h.bill)):c.error(h.message))};return t.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:s,onFinish:r=>{m(r)},requiredMark:!0,children:[e.jsx(n.Item,{name:"units",label:"Unit",rules:[{required:!0,type:"number",message:"Please input Unit"}],children:e.jsx(Be,{min:1,style:{width:"50%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",htmlType:"submit",danger:!0,icon:e.jsx(Ye,{}),children:"Save"})})]})})},{Title:Ot,Text:_t}=Ge,va=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(!1),[F,k]=t.useState(!1),[M,G]=t.useState(!1),[j,_]=t.useState(!1),[O,q]=t.useState(!1),B=async(d,g="",v=20)=>{const{data:u}=await A.custom({url:"",method:"get",meta:{operation:"schoolNjiwaAccountBillings",variables:{page:{value:d,type:"Int",required:!0},key:{value:g,type:"String",required:!1},pageSize:{value:v,type:"Int",required:!1},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{account:["id"]},"billNumber","amount","units","source","synced",{creator:["id","fullName","firstName","middleName","lastName","email","phone"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(f=>(c.error("Error occured while fetching Bills"),{data:null})).then(f=>f);u&&h([...u.results]),p(!1)},K=async()=>{q(!0);const{data:d}=await A.custom({url:"",method:"post",meta:{operation:"ressetNjiwaAccount",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0}},fields:["success","message"]}}).catch(g=>({data:null})).then(g=>g);d&&(d.success?(c.success(d.message),b(),B(1)):c.error(d.message)),q(!1)},W=async d=>{const{data:g}=await A.custom({url:"",method:"post",meta:{operation:"deleteNjiwaAccountBilling",variables:{billId:{value:parseInt(d.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(v=>({data:null})).then(v=>v);g&&(g.success?(c.success(g.message),b(),B(1)):c.error(g.message))},L=async()=>{_(!0);const{data:d}=await A.custom({url:"",method:"post",meta:{operation:"syncNjiwaAccount",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0}},fields:["success","message"]}}).catch(g=>({data:null})).then(g=>g);d&&(d.success?(c.success(d.message),b()):c.error(d.message)),_(!1)},V=async d=>{h([d,...r]),k(!1),b()},D=async d=>{h([d,...r]),G(!1),b()},b=async()=>{const{data:d}=await A.custom({url:"",method:"get",meta:{operation:"njiwaAccount",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0}},fields:["id","balance","messageUnits"]}}).catch(g=>({data:null})).then(g=>g);d&&m(d)},C=[{title:"Bill Number",dataIndex:"bill_number",key:"billNumber",render:(d,g,v)=>e.jsxs("span",{children:[e.jsx("span",{style:{marginRight:3},children:g.billNumber}),g.synced&&e.jsx(re,{color:"green",children:"Synced"}),!g.synced&&e.jsx(re,{color:"red",children:"Not Synced"})]})},{title:"Amount",dataIndex:"amount",key:"amount",render:(d,g,v)=>e.jsx("span",{children:g.amount})},{title:"Units",dataIndex:"units",key:"units",render:(d,g,v)=>e.jsx("span",{children:g.units})},{title:"Paid",dataIndex:"isPaid",key:"isPaid",render:(d,g,v)=>e.jsx("span",{children:g.isPaid?"Yes":"No"})},{title:"Source",dataIndex:"source",key:"source",render:(d,g,v)=>e.jsx("span",{children:g.source})},{title:"",dataIndex:"actions",key:"actions",render:(d,g,v)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure delete this bill - > "+g.billNumber+"?",placement:"topRight",onConfirm:()=>W(g.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{danger:!0,icon:e.jsx(me,{})})}),!g.synced&&e.jsx(N,{danger:!0,icon:e.jsx(Ae,{}),style:{marginLeft:5}})]})}];return t.useEffect(()=>{b(),B(1,"",20)},[a.randKey,a.school]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsxs(E,{span:24,style:{display:"flex",justifyContent:"space-between",marginBottom:5},children:[e.jsx("span",{children:e.jsx(X,{title:"Are you sure you want to reset the account?",onConfirm:()=>K(),onCancel:()=>{},okText:"Reset",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(es,{}),danger:!0,loading:j,children:"Reset"})})}),e.jsxs("span",{children:[e.jsx(N,{icon:e.jsx(Ce,{}),danger:!0,onClick:()=>k(!0),children:"Balance"}),e.jsx(N,{icon:e.jsx(Ce,{}),danger:!0,onClick:()=>G(!0),children:"Units"}),e.jsx(N,{icon:e.jsx(Ae,{}),danger:!0,onClick:L,loading:j,children:"Sync"})]})]})}),e.jsxs(ee,{children:[e.jsx(E,{span:8,children:e.jsx(ae,{loading:x,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},onClick:()=>{},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ot,{level:2,children:s==null?void 0:s.balance}),e.jsx(_t,{children:"Balance"})]})})})}),e.jsx(E,{span:8,children:e.jsx(ae,{loading:x,active:!0,children:e.jsx(te,{hoverable:!0,style:{marginRight:10},onClick:()=>{},children:e.jsxs(se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ot,{level:2,children:s==null?void 0:s.messageUnits}),e.jsx(_t,{children:"Units"})]})})})})]}),e.jsx(ee,{style:{marginTop:10},children:e.jsxs(E,{span:24,children:[e.jsx(ue,{columns:C,dataSource:r}),","]})}),e.jsx(ie,{title:"Add Balance",width:"40vw",open:F,onClose:d=>k(d),children:e.jsx(ya,{school:a.school,onFinish:V})}),e.jsx(ie,{title:"Add Units",width:"40vw",open:M,onClose:d=>G(d),children:e.jsx(fa,{school:a.school,onFinish:D})})]})},Sa=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState([]),[F,k]=t.useState([]),[M,G]=t.useState(1),[j,_]=t.useState(0),[O,q]=t.useState(20),[B,K]=t.useState(""),[W,L]=t.useState(!1),[V,D]=t.useState(!0);le();const[b,C]=t.useState(!1),[d,g]=t.useState(!1),[v,u]=t.useState(!1),[f]=n.useForm(),[I]=n.useForm(),[S,i]=t.useState(!1),[l,R]=t.useState(!1),[y,o]=t.useState(!1),U=async H=>{m(H),o(!0)},Y=H=>{m(H),R(!0)},Q=H=>{m(H),i(!0)},Z=H=>{m(H),u(!0)},T=H=>{m(H),g(!0)},P=()=>{C(!0)},ne=async H=>{const{data:J}=await A.custom({url:"",method:"post",meta:{operation:"createSchool",variables:{name:{value:H.name,type:"String",required:!0},serialNumber:{value:H.serial_number,type:"String",required:!0},ownershipId:{value:parseInt(H.ownership_id),type:"Int",required:!0},schoolTypes:{value:H.schoolTypes,type:"[String]",required:!0},regionId:{value:parseInt(H.region_id),type:"Int",required:!1},districtId:{value:parseInt(H.district_id),type:"Int",required:!1},wardId:{value:parseInt(H.ward_id),type:"Int",required:!1},bio:{value:H.bio,type:"String",required:!1},website:{value:H.website,type:"String",required:!1},longitude:{value:H.longitude,type:"Float",required:!1},latitude:{value:H.latitude,type:"Float",required:!1},isUniversal:{value:H.is_universal,type:"Boolean",required:!1},njiwaAccount:{value:H.njiwa_account,type:"Boolean",required:!1}},fields:["success","message",{school:["id","name","serialNumber","hasNjiwaAccount",{region:["id","name"]},{district:["id","name"]},{ownership:["id","name"]},{schoolType:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},"latitude","longitude","bio","logo","created","updated","isActive","isUniversal","canEdit","canDelete","canManage"]}]}});J.success?(c.success(J.message),h([J.school,...r]),C(!1),f.resetFields()):c.error(J.message)},ve=async H=>{const{data:J}=await A.custom({url:"",method:"post",meta:{operation:"updateSchool",variables:{id:{value:parseInt(H.id),type:"Int",required:!0},name:{value:H.name,type:"String",required:!0},serialNumber:{value:H.serial_number,type:"String",required:!0},ownershipId:{value:parseInt(H.ownership_id),type:"Int",required:!0},schoolTypes:{value:H.schoolTypes,type:"[String]",required:!0},regionId:{value:parseInt(H.region_id),type:"Int",required:!1},districtId:{value:parseInt(H.district_id),type:"Int",required:!1},wardId:{value:parseInt(H.ward_id),type:"Int",required:!1},bio:{value:H.bio,type:"String",required:!1},website:{value:H.website,type:"String",required:!1},longitude:{value:H.longitude,type:"Float",required:!1},latitude:{value:H.latitude,type:"Float",required:!1},isActive:{value:H.is_active,type:"Boolean",required:!1},isUniversal:{value:H.is_universal,type:"Boolean",required:!1},njiwaAccount:{value:H.njiwa_account,type:"Boolean",required:!1}},fields:["success","message",{school:["id","name","serialNumber","hasNjiwaAccount",{region:["id","name"]},{district:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{ownership:["id","name"]},{schoolType:["id","name"]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},"latitude","longitude","bio","logo","created","updated","isActive","isUniversal","canEdit","canDelete","canManage"]}]}});J.success?(c.success(J.message),h(r.map(ge=>ge.id===H.id?J.school:ge)),f.resetFields(),g(!1)):c.error(J.message)},Qe=async H=>{const{data:J}=await A.custom({url:"",method:"post",meta:{operation:"deleteSchool",variables:{id:{value:H,type:"Int",required:!0}},fields:["success","message"]}});J.success?(c.success(J.message),h(r.filter(ge=>parseInt(ge.id.toString())!==parseInt(H.toString())))):c.error(J.message)},$e=async(H,J)=>{const{data:ge}=await A.custom({url:"",method:"post",meta:{operation:"deleteSchoolOperatingType",variables:{schoolOperatingTypeId:{value:parseInt(H.toString()),type:"Int",required:!0}},fields:["success","message",{school:["id","name","serialNumber",{region:["id","name"]},{district:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{ownership:["id","name"]},{schoolType:["id","name"]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},"latitude","longitude","bio","logo","created","updated","isActive","isUniversal","canEdit","canDelete","canManage"]}]}});ge.success?(c.success(ge.message),h(r.map(je=>je.id===J?ge.school:je))):c.error(ge.message)},Ue=async H=>{const{data:J}=await A.custom({url:"",method:"post",meta:{operation:"createNjiwaAccount",variables:{schoolId:{value:parseInt(H.toString()),type:"Int",required:!0}},fields:["success","message",{school:["id","name","serialNumber","hasNjiwaAccount",{region:["id","name"]},{district:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{ownership:["id","name"]},{schoolType:["id","name"]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},"latitude","longitude","bio","logo","created","updated","isActive","isUniversal","canEdit","canDelete","canManage"]}]}});J.success?(c.success(J.message),h(r.map(ge=>ge.id===H?J.school:ge))):c.error(J.message)},_e=async(H,J="",ge=20)=>{const{data:je}=await A.custom({url:"",method:"get",meta:{operation:"schools",variables:{page:{value:H,type:"Int",required:!0},pageSize:{value:ge,type:"Int",required:!0},key:{value:J,type:"String",required:!1},schoolTypes:{value:F,type:"[Int]",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","serialNumber","hasNjiwaAccount",{region:["id","name"]},{district:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{ownership:["id","name"]},{schoolType:["id","name"]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},"latitude","longitude","bio","logo","created","updated","isUniversal","contractEndDate","isActive","canEdit","canDelete","canManage"]}]}});G(je.page),_(je.total),L(je.hasNext),h(je.results),D(!1)},Ze=async(H,J="",ge=20)=>{const{data:je}=await A.custom({url:"",method:"get",meta:{operation:"schoolsTypes",variables:{page:{value:H,type:"Int",required:!0},pageSize:{value:ge,type:"Int",required:!0},key:{value:J,type:"String",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});p(je.results)};t.useEffect(()=>{Ze(1,"",20),_e(1,"",20)},[]);const Xe=[{title:"Name",dataIndex:"name",key:"name",render:(H,J,ge)=>e.jsxs(e.Fragment,{children:[e.jsx("a",{onClick:()=>{},children:J.name}),e.jsx("span",{style:{marginLeft:10},children:J.isUniversal?e.jsx(re,{color:"red",children:"Universal"}):e.jsx(re,{color:"green",children:"Not Universal"})})]})},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber"},{title:"Region",dataIndex:"region",key:"region",render:(H,J,ge)=>{var je,ze,Ke;return e.jsx("span",{children:(Ke=(ze=(je=J==null?void 0:J.ward)==null?void 0:je.district)==null?void 0:ze.region)==null?void 0:Ke.name})}},{title:"District",dataIndex:"district",key:"district",render:(H,J,ge)=>{var je,ze;return e.jsx("span",{children:(ze=(je=J==null?void 0:J.ward)==null?void 0:je.district)==null?void 0:ze.name})}},{title:"Ward",dataIndex:"ward",key:"ward",render:(H,J,ge)=>{var je;return e.jsx("span",{children:(je=J==null?void 0:J.ward)==null?void 0:je.name})}},{title:"School Type",dataIndex:"schoolType",key:"schoolType",render:(H,J,ge)=>J.schoolOperatingTypes.map(je=>e.jsx(fe,{title:"Click to Remove "+je.schoolType.name,placement:"bottom",children:e.jsx(X,{title:"Are you sure to delete this Operating Type?",onConfirm:()=>$e(je.id,J.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{children:e.jsx(re,{color:"green",children:je.schoolType.name})})})}))},{title:"Ownership",dataIndex:"Ownership",key:"ownership",render:(H,J,ge)=>e.jsx("span",{children:J.ownership.name})},{title:"Has Njiwa",dataIndex:"hasNjiwaAccount",key:"hasNjiwaAccount",render:(H,J,ge)=>e.jsx("span",{children:J.hasNjiwaAccount?e.jsxs(e.Fragment,{children:[e.jsx(re,{color:"green",children:"Yes"}),e.jsx(N,{size:"small",onClick:()=>Y(J),danger:!0,children:"Config"})]}):e.jsx(e.Fragment,{children:e.jsx(X,{title:"Are you sure to Activate Njiwa Account for this School? by default School Adminstrator will be granted access to Njiwa Module",onConfirm:()=>Ue(J.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{children:e.jsx(re,{color:"red",children:"No"})})})})})},{title:"Contract End Date",dataIndex:"contractEndDate",key:"contractEndDate",render:(H,J,ge)=>J.contractEndDate?e.jsx("span",{children:qe(J.contractEndDate).format("DD/MM/YYYY")}):e.jsx(N,{size:"small",onClick:()=>{U(J)},danger:!0,children:"Add a Contract"})},{title:"",dataIndex:"Action",key:"action",render:(H,J,ge)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ct,{trigger:["click"],overlay:e.jsxs(Te,{children:[e.jsx(Te.Item,{disabled:!J.canDelete,icon:e.jsx(me,{}),onClick:()=>{},children:e.jsx(X,{placement:"topLeft",title:"Deleting School: "+J.name,onConfirm:()=>Qe(parseInt(J.id)),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(Te.Item,{disabled:!J.canEdit,icon:e.jsx(be,{}),onClick:()=>T(J),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(Te.Item,{disabled:!J.canEdit,icon:e.jsx(Bt,{}),onClick:()=>Z(J),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Adminstrators"})}),e.jsx(Te.Item,{disabled:!J.canManage,icon:e.jsx(at,{}),onClick:()=>U(J),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Contracts"})}),e.jsx(Te.Item,{disabled:!J.canManage,icon:e.jsx(Bt,{}),onClick:()=>Q(J),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"School Settings"})}),!J.hasNjiwaAccount&&e.jsx(Te.Item,{disabled:!J.canManage,icon:e.jsx(ts,{}),children:e.jsx(X,{title:"Are you sure to Activate Njiwa Account for this School? by default School Adminstrator will be granted access to Njiwa Module",onConfirm:()=>Ue(J.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Register Njiwa Account"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:je=>je.preventDefault(),children:e.jsx(dt,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(E,{span:16,children:e.jsx(n,{layout:"vertical",form:I,onFinish:H=>{G(1),r.length=0,_e(1,H.key,O)},children:e.jsxs(ee,{style:{marginBottom:0},children:[e.jsx(E,{span:20,children:e.jsx(n.Item,{name:"key",style:{marginBottom:3},children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(E,{span:4,children:e.jsx(n.Item,{style:{marginBottom:3},children:e.jsxs(N,{size:"large",htmlType:"submit",onClick:()=>I.submit(),children:[e.jsx(ce,{}),"Search"]})})}),e.jsx(E,{span:24,children:e.jsx(n.Item,{children:e.jsxs("div",{children:[x.map(H=>F.includes(parseInt(H.id.toString()))?e.jsx("a",{onClick:()=>{F.includes(parseInt(H.id.toString()))&&k(F.filter(J=>J!==parseInt(H.id.toString())))},children:e.jsx(re.CheckableTag,{checked:!0,style:{padding:5},children:H.name})}):e.jsx("a",{onClick:()=>{F.includes(parseInt(H.id.toString()))||k([...F,parseInt(H.id.toString())])},children:e.jsx(re,{style:{padding:5},children:H.name})})),F.length>0&&e.jsx("a",{onClick:()=>{k([]),I.submit()},children:e.jsx(re,{style:{padding:5},icon:e.jsx(wt,{}),color:"red",children:"Clear All"})})]})})})]})})}),e.jsx(E,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(N,{size:"large",onClick:P,children:[e.jsx(Ce,{}),"Create School"]})})]}),e.jsx(ue,{dataSource:r,columns:Xe,pagination:{onChange:(H,J)=>{q(J),_e(H,B,J)},total:j,pageSize:O,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(ie,{title:"Registering School",width:"50%",destroyOnClose:!0,open:b,onClose:H=>C(H),children:e.jsx(pa,{form:f,onFinish:ne})}),e.jsx(ie,{title:"Edit School Informations",width:"50vw",open:d,onClose:H=>g(H),children:e.jsx(ca,{school:s,form:f,onFinish:ve,randKey:Math.random()})}),e.jsx(ie,{title:"School System Adminstrators",width:"50vw",open:v,onClose:H=>u(H),children:e.jsx(ha,{randKey:Math.random(),school:s})}),e.jsx(ie,{title:"School Settings",width:"50%",open:S,onClose:H=>i(H),children:e.jsx(hs,{school:s,full:!0,randKey:Math.random()})}),e.jsx(ie,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"red"},children:s==null?void 0:s.name}),e.jsx("span",{style:{marginLeft:5},children:"Contracts"})]}),width:"70vw",open:l,onClose:H=>R(H),children:e.jsx(va,{school:s,full:!0,randKey:Math.random()})}),e.jsx(ie,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"red"},children:s==null?void 0:s.name}),e.jsx("span",{style:{marginLeft:5},children:"Contracts"})]}),width:"90vw",open:y,onClose:H=>o(H),children:e.jsx(ja,{school:s,randKey:Math.random()})})]})},Ca=()=>e.jsxs(e.Fragment,{children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Schools"})]}),e.jsx(Sa,{})]}),ba=()=>e.jsx(xe,{children:e.jsx(Ca,{})}),Wt=a=>e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:s=>{a.onFinish(s)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})}),Yt=a=>{const[s,m]=t.useState(a.ward.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.ward.name,isActive:a.ward.isActive})},[a.form,a.ward]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.ward.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Ia=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,p]=t.useState(0),[F,k]=t.useState(20),[M,G]=t.useState(""),[j,_]=t.useState(!1),[O,q]=t.useState(!0);le();const[B]=n.useForm();de.useBreakpoint();const K=async V=>{const{data:D}=await A.custom({url:"",method:"post",meta:{operation:"addSchoolTypeCurriculum",variables:{schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0},curriculumId:{value:V,type:"Int",required:!0}},fields:["success","message",{schoolTypeCurriculum:["id",{schoolType:["id"]},{curriculum:["id","name","code","description"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});D.success?(c.success(D.message),a.onAdd(D.schoolTypeCurriculum),m(s.filter(b=>b.id!==V))):c.error(D.message)},W=[{title:"Name",dataIndex:"name",fixed:!0,render:(V,D)=>e.jsx("span",{children:e.jsx("a",{children:D.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(V,D)=>e.jsx("span",{children:e.jsx("a",{children:D.code})})},{title:"",dataIndex:"action",render:(V,D)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to Add this School Type Curriculum?",placement:"left",onConfirm:()=>K(D==null?void 0:D.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(D!=null&&D.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Ce,{}),disabled:!(D!=null&&D.canManage)})})})}],L=async(V,D="",b=20)=>{const{data:C}=await A.custom({url:"",method:"get",meta:{operation:"schoolTypeCurriculumsToAdd",variables:{page:{value:V,type:"Int",required:!0},key:{value:D,type:"String",required:!1},pageSize:{value:b,type:"Int",required:!1},schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(C.page),p(C.total),_(C.hasNext),m(C.results),q(!1)};return t.useEffect(()=>{L(r,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(E,{span:24,children:e.jsx(n,{layout:"vertical",form:B,onFinish:V=>{h(1),s.length=0,L(1,V.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{children:e.jsx(ue,{loading:O,columns:W,dataSource:s,scroll:{x:!0},pagination:{onChange:(V,D)=>{k(D),L(V,M,D)},total:x,pageSize:F,position:["bottomCenter"],showQuickJumper:!0}})})]})},Aa=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,p]=t.useState(0),[F,k]=t.useState(20),[M,G]=t.useState(""),[j,_]=t.useState(!1),[O,q]=t.useState(!0);le();const[B]=n.useForm();de.useBreakpoint().lg,t.useState(!1);const[W,L]=t.useState(!1),V=()=>{L(!0)},D=async v=>{const{data:u}=await A.custom({url:"",method:"post",meta:{operation:"removeSchoolTypeCurriculum",variables:{schoolTypeCurriculumId:{value:parseInt(v.toString()),type:"Int",required:!0}},fields:["success","message"]}});u.success?(c.success(u.message),m(s.filter(f=>f.id!==v))):c.error(u.message)},b=()=>{c("Canceled")},C=[{title:"Name",dataIndex:"name",fixed:!0,render:(v,u,f)=>e.jsx("span",{children:e.jsx("a",{children:u.curriculum.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(v,u,f)=>e.jsx("span",{children:e.jsx("a",{children:u.curriculum.code})})},{title:"Created",dataIndex:"created",render:(v,u,f)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(u.created)})})})},{title:"Status",dataIndex:"isActive",render:(v,u,f)=>e.jsx("a",{children:u!=null&&u.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,u,f)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to delete this School Type Curriculum?",onConfirm:()=>D(u==null?void 0:u.id),onCancel:()=>b,okText:"Yes",cancelText:"No",disabled:!(u!=null&&u.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(u!=null&&u.canDelete)})})})}],d=async(v,u="",f=20)=>{const{data:I}=await A.custom({url:"",method:"get",meta:{operation:"schoolTypeCurriculums",variables:{page:{value:v,type:"Int",required:!0},key:{value:u,type:"String",required:!1},pageSize:{value:f,type:"Int",required:!1},schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{schoolType:["id"]},{curriculum:["id","name","code","description"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(I.page),p(I.total),_(I.hasNext),m(I.results),q(!1)},g=async v=>{m([v,...s])};return t.useEffect(()=>{d(r,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:12,children:e.jsx(n,{layout:"vertical",form:B,onFinish:v=>{h(1),s.length=0,d(1,v.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>V(),children:"Add"})})]}),e.jsx("div",{children:e.jsx(ue,{loading:O,columns:C,dataSource:s,scroll:{x:!0,y:"50vh"},pagination:{onChange:(v,u)=>{k(u),d(v,M,u)},total:x,pageSize:F,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(We,{title:"Adding Curriculums",anchor:"right",width:"35vw",open:W,onClose:()=>{L(!1)},children:e.jsx(Ia,{schoolType:a.schoolType,onAdd:g})})]})},{Option:ka}=Se,Na=a=>{const[s,m]=t.useState(!1),[r,h]=t.useState([]),[x]=n.useForm(),p=async k=>{const{data:M}=await A.custom({url:"",method:"post",meta:{operation:"createSchoolTypeGrade",variables:{schoolTypeId:{value:k.school_type_id,type:"Int",required:!0},gradeId:{value:k.grade_id,type:"Int",required:!0},minScore:{value:k.min_score,type:"Int",required:!0},maxScore:{value:k.max_score,type:"Int",required:!0}},fields:["success","message",{schoolTypeGrade:["id",{grade:["id","name"]},"minScore","maxScore","isActive","created","updated","canEdit","canDelete","canManage"]}]}});M.success?(c.success(M.message),x.resetFields(),F(1,"",20),a.onFinish(M.schoolTypeGrade)):c.error(M.message)},F=async(k,M="",G=20)=>{m(!0);const{data:j}=await A.custom({url:"",method:"get",meta:{operation:"schoolTypeGradesToAdd",variables:{page:{value:k,type:"Int",required:!0},key:{value:M,type:"String",required:!1},pageSize:{value:G,type:"Int",required:!1},schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(j.results),m(!1)};return t.useEffect(()=>{F(1,"",20)},[a.schoolType]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:x,onFinish:k=>{k.school_type_id=parseInt(a.schoolType.id.toString()),p(k)},requiredMark:!1,initialValues:{remember:!1,email:"",password:""},children:[e.jsx(n.Item,{name:"grade_id",label:"Grade",rules:[{required:!0,type:"number",message:"Please select Grade"}],children:e.jsx(Se,{size:"large",dropdownStyle:{zIndex:9999},children:r.map(k=>e.jsx(ka,{value:k.id,children:k.name},k.id))})}),e.jsx(n.Item,{name:"min_score",label:"Min Score (%)",rules:[{required:!0,type:"number",message:"Please input Min Score"},{validator:(k,M)=>M&&M>x.getFieldValue("max_score")?Promise.reject("Min Score must be less than Max Score"):Promise.resolve()}],children:e.jsx(Be,{size:"large",min:0,max:100,style:{width:"50%"}})}),e.jsx(n.Item,{name:"max_score",label:"Max Score (%)",rules:[{required:!0,type:"number",message:"Please input Max Score"},{validator:(k,M)=>M&&M<x.getFieldValue("min_score")?Promise.reject("Max Score must be greater than Min Score"):Promise.resolve()}],children:e.jsx(Be,{size:"large",min:0,max:100,style:{width:"50%"}})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",htmlType:"submit",icon:e.jsx(Ye,{}),disabled:s,danger:!0,children:"Save"})})]})})},Fa=a=>{const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,p]=t.useState(0),[F,k]=t.useState(20),[M,G]=t.useState(""),[j,_]=t.useState(!1),[O,q]=t.useState(!0);le();const[B]=n.useForm();de.useBreakpoint().lg,t.useState(!1);const[W,L]=t.useState(!1),V=()=>{L(!0)},D=async v=>{const{data:u}=await A.custom({url:"",method:"post",meta:{operation:"deleteSchoolTypeGrade",variables:{id:{value:parseInt(v.toString()),type:"Int",required:!0}},fields:["success","message"]}});u.success?(c.success(u.message),m(s.filter(f=>f.id!==v))):c.error(u.message)},b=()=>{c("Canceled")},C=[{title:"Name",dataIndex:"name",fixed:!0,render:(v,u,f)=>e.jsx("span",{children:e.jsx("a",{children:u.grade.name})})},{title:"Min Score",dataIndex:"minScore",fixed:!0,render:(v,u,f)=>e.jsx("span",{children:e.jsx("a",{children:u.minScore})})},{title:"Max Score",dataIndex:"maxScore",fixed:!0,render:(v,u,f)=>e.jsx("span",{children:e.jsx("a",{children:u.maxScore})})},{title:"Created",dataIndex:"created",render:(v,u,f)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(u.created)})})})},{title:"Status",dataIndex:"isActive",render:(v,u,f)=>e.jsx("a",{children:u!=null&&u.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,u,f)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to delete this School Grade?",onConfirm:()=>D(u==null?void 0:u.id),onCancel:()=>b,okText:"Yes",cancelText:"No",disabled:!(u!=null&&u.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(u!=null&&u.canDelete),danger:!0})})})}],d=async(v,u="",f=20)=>{const{data:I}=await A.custom({url:"",method:"get",meta:{operation:"schoolTypeGrades",variables:{page:{value:v,type:"Int",required:!0},key:{value:u,type:"String",required:!1},pageSize:{value:f,type:"Int",required:!1},schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{grade:["id","name"]},"minScore","maxScore","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(I.page),p(I.total),_(I.hasNext),m(I.results),q(!1)},g=async v=>{m([v,...s])};return t.useEffect(()=>{d(r,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:12,children:e.jsx(n,{layout:"vertical",form:B,onFinish:v=>{h(1),s.length=0,d(1,v.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>V(),danger:!0,children:"Add"})})]}),e.jsx("div",{children:e.jsx(ue,{loading:O,columns:C,dataSource:s,scroll:{x:!0,y:"50vh"},pagination:{onChange:(v,u)=>{k(u),d(v,M,u)},total:x,pageSize:F,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(ie,{title:"Adding Grade",width:"30vw",open:W,onClose:v=>L(v),children:e.jsx(Na,{schoolType:a.schoolType,onFinish:g})})]})},Ta=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(25),[F,k]=t.useState(""),[M,G]=t.useState(1),[j,_]=t.useState(0),[O,q]=t.useState(!1),[B,K]=t.useState(!0);le();const[W]=n.useForm(),[L]=n.useForm();de.useBreakpoint().lg;const[D,b]=t.useState(!1),[C,d]=t.useState(!1),[g,v]=t.useState(!1),[u,f]=t.useState(!1),I=T=>{m(T),f(!0)},S=T=>{m(T),v(!0)},i=T=>{m(T),d(!0)},l=async T=>{const{data:P}=await A.custom({url:"",method:"post",meta:{operation:"updateSchoolsTypes",variables:{id:{value:T.id,type:"Int",required:!0},name:{value:T.name,type:"String",required:!0},isActive:{value:T.isActive,type:"Boolean",required:!0}},fields:["success","message",{schoolType:["id","name","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}});P.success?(c.success(P.message),L.resetFields(),d(!1),h(r.map(ne=>parseInt(ne.id.toString())===parseInt(T.id)?P.schoolType:ne))):c.error(P.message)},R=async T=>{const{data:P}=await A.custom({url:"",method:"post",meta:{operation:"updateSchoolOwnership",variables:{id:{value:T.id,type:"Int",required:!0},name:{value:T.name,type:"String",required:!0},isActive:{value:T.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});P.success?(c.success(P.message),L.resetFields(),d(!1),h(r.map(ne=>ne.id===P.schoolType.id?P.level:ne))):c.error(P.message)},y=async T=>{const{data:P}=await A.custom({url:"",method:"post",meta:{operation:"deleteSchoolsEducationLevel",variables:{id:{value:parseInt(T.toString()),type:"Int",required:!0}},fields:["success","message"]}});P.success?(c.success(P.message),h(r.filter(ne=>ne.id!==T))):c.error(P.message)},o=()=>{c("Canceled")},U=[{title:"Name",dataIndex:"name",fixed:!0,render:(T,P,ne)=>e.jsx("span",{children:e.jsx("a",{children:P.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(T,P,ne)=>e.jsx("span",{children:e.jsx("a",{children:T})})},{title:"Grading System",dataIndex:"code",fixed:!0,render:(T,P,ne)=>e.jsx("span",{children:e.jsxs(N,{onClick:()=>I(P),danger:!0,children:[e.jsx(at,{}),"Configure"]})})},{title:"Created",dataIndex:"created",render:(T,P,ne)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(P.created)})})})},{title:"Status",dataIndex:"isActive",render:(T,P,ne)=>e.jsx("a",{children:P!=null&&P.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(T,P,ne)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(fe,{title:"View/Manage Application Curriculums",placement:"left",color:"green",children:e.jsx(N,{style:{marginRight:3},onClick:()=>S(P),icon:e.jsx(at,{}),disabled:!(P!=null&&P.canManage),danger:!0})}),e.jsx(X,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>y(P==null?void 0:P.id),onCancel:()=>o,okText:"Yes",cancelText:"No",disabled:!(P!=null&&P.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(me,{}),disabled:!(P!=null&&P.canDelete),danger:!0})}),e.jsx(fe,{title:"Edit "+(P==null?void 0:P.name)+" Ownership",color:"green",placement:"left",children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(be,{}),disabled:!(P!=null&&P.canEdit),onClick:()=>i(P),danger:!0})})]})}],Y=async(T,P="",ne=25)=>{const{data:ve}=await A.custom({url:"",method:"get",meta:{operation:"schoolsTypes",variables:{page:{value:T,type:"Int",required:!0},key:{value:P,type:"String",required:!1},pageSize:{value:ne,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});G(ve.page),_(ve.total),q(ve.hasNext),h([...ve.results]),K(!1)},Q=async()=>{const{data:T}=await A.custom({url:"",method:"post",meta:{operation:"syncSchoolsTypes",variables:{},fields:["success","message"]}});T.success?(c.success(T.message),r.length=0,h([]),Y(1)):c.error(T.message)},Z=async()=>{const{data:T}=await A.custom({url:"",method:"post",meta:{operation:"syncDefaultGrading",variables:{},fields:["success","message"]}});T.success?c.success(T.message):c.error(T.message)};return t.useEffect(()=>{Y(M)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:8,children:e.jsx(n,{layout:"vertical",form:W,onFinish:T=>{G(1),r.length=0,Y(1,T.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(E,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(fe,{title:"Synchronize Defualt Grading",color:"green",children:e.jsx(N,{style:{marginRight:3},size:"large",icon:e.jsx(Ae,{}),onClick:()=>Z(),danger:!0,children:"Default Grading"})}),e.jsx(fe,{title:"Synchronize Default School Ownerships",color:"green",children:e.jsx(N,{size:"large",icon:e.jsx(Ae,{}),onClick:()=>Q(),danger:!0,children:"Types"})})]})]}),e.jsx(ue,{loading:B,columns:U,dataSource:r,scroll:{x:!0},pagination:{onChange:(T,P)=>{p(P),Y(T,F,P)},total:j,pageSize:x,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(ie,{title:"Edit School Type Informations",width:"60vw",open:C,onClose:T=>d(T),children:e.jsx(Yt,{form:L,ward:s,onFinish:l})}),e.jsx(ie,{title:"Create School Type Informations",width:"60vw",open:D,onClose:T=>b(T),children:e.jsx(Wt,{form:L,onFinish:R})}),e.jsx(ie,{title:"Applicable Curriculums for "+(s==null?void 0:s.name),width:"60vw",open:g,onClose:T=>{v(T)},children:e.jsx(Aa,{schoolType:s})}),e.jsx(ie,{title:(s==null?void 0:s.name)+" Grading System",width:"60vw",open:u,onClose:T=>{f(T)},children:e.jsx(Fa,{schoolType:s})})]})},qa=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Schools Types"})]}),e.jsx(Ta,{height:80})]}),Pa=()=>e.jsx(xe,{children:e.jsx(qa,{})}),Ea=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(25),[x,p]=t.useState(""),[F,k]=t.useState(1),[M,G]=t.useState(0),[j,_]=t.useState(!1),[O,q]=t.useState(!0);le();const[B]=n.useForm();n.useForm();const W=!de.useBreakpoint().lg,[L,V]=t.useState(!1),[D,b]=t.useState(!1),C=async()=>{const{data:f}=await A.custom({url:"",method:"post",meta:{operation:"synchronizeGrades",variables:{},fields:["success","message"]}});f.success&&(c.success(f.message),u(1))},d=async f=>{const{data:I}=await A.custom({url:"",method:"post",meta:{operation:"deleteGrade",variables:{id:{value:parseInt(f.toString()),type:"Int",required:!0}},fields:["success","message"]}});I.success?(c.success(I.message),m(s.filter(S=>S.id!==f))):c.error(I.message)},g=()=>{c("Canceled")},v=[{title:"Name",dataIndex:"name",fixed:!0,render:(f,I,S)=>e.jsx("span",{children:e.jsx("a",{children:I.name})})},{title:"Created",dataIndex:"created",render:(f,I,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(I.created)})})})},{title:"Status",dataIndex:"isActive",render:(f,I,S)=>e.jsx("a",{children:I!=null&&I.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,I,S)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>d(I==null?void 0:I.id),onCancel:()=>g,okText:"Yes",cancelText:"No",disabled:!(I!=null&&I.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(me,{}),disabled:!(I!=null&&I.canDelete),danger:!0})}),e.jsx(fe,{title:"Edit "+(I==null?void 0:I.name)+" Ownership",color:"green",placement:"left",children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(be,{}),disabled:!(I!=null&&I.canEdit),onClick:()=>{},danger:!0})})]})}],u=async(f,I="",S=25)=>{const{data:i}=await A.custom({url:"",method:"get",meta:{operation:"grades",variables:{page:{value:f,type:"Int",required:!0},key:{value:I,type:"String",required:!1},pageSize:{value:S,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});k(i.page),G(i.total),_(i.hasNext),m([...i.results]),q(!1)};return t.useEffect(()=>{u(F)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:W?24:20,children:e.jsx(n,{layout:"vertical",form:B,onFinish:f=>{k(1),s.length=0,u(1,f.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:W?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(fe,{title:"Synchronize Default Grades",children:e.jsx(N,{size:"large",icon:e.jsx(Ae,{}),onClick:()=>C(),danger:!0})})})]}),e.jsx(ue,{loading:O,columns:v,dataSource:s,scroll:{x:!0},pagination:{onChange:(f,I)=>{h(I),u(f,x,I)},total:M,pageSize:r,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(ie,{title:"Edit Grade",width:"60vw",open:D,onClose:f=>b(f),children:e.jsx(e.Fragment,{})}),e.jsx(ie,{title:"Create Grade",width:"60vw",open:L,onCancel:f=>V(f),children:e.jsx(e.Fragment,{})})]})},Ma=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Grades"})]}),e.jsx(Ea,{height:80})]}),Da=()=>e.jsx(xe,{children:e.jsx(Ma,{})}),za=a=>{const[s]=n.useForm(),[m,r]=t.useState(a.ownership.isActive),h=async x=>{const{data:p}=await A.custom({url:"",method:"post",meta:{operation:"updateSchoolsOwnerships",variables:{id:{value:x.id,type:"Int",required:!0},name:{value:x.name,type:"String",required:!0},isActive:{value:x.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});p.success?(c.success(p.message),s.resetFields(),a.onFinish(p.ownership)):c.error(p.message)};return t.useEffect(()=>{a.form.setFieldsValue({name:a.ownership.name,isActive:a.ownership.isActive})},[a.form,a.ownership]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:x=>{x.isActive=m,x.id=parseInt(a.ownership.id),h(x)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:m,onChange:()=>r(!m),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},La=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(1),[F,k]=t.useState(0),[M,G]=t.useState(!1),[j,_]=t.useState(20),[O,q]=t.useState(""),[B,K]=t.useState(!0);le();const[W]=n.useForm(),[L]=n.useForm(),D=!de.useBreakpoint().lg,[b,C]=t.useState(!1),[d,g]=t.useState(!1),v=y=>{m(y),g(!0)},u=async y=>{h(r.map(o=>parseInt(o.id.toString())===parseInt(y.id.toString())?y:o)),g(!1)},f=async y=>{const{data:o}=await A.custom({url:"",method:"post",meta:{operation:"updateSchoolOwnership",variables:{id:{value:y.id,type:"Int",required:!0},name:{value:y.name,type:"String",required:!0},isActive:{value:y.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});o.success?(c.success(o.message),L.resetFields(),g(!1),h(r.map(U=>U.id===o.ownership.id?o.ownership:U))):c.error(o.message)},I=async y=>{const{data:o}=await A.custom({url:"",method:"post",meta:{operation:"deleteSchoolOwnership",variables:{id:{value:parseInt(y.toString()),type:"Int",required:!0}},fields:["success","message"]}});o.success?(c.success(o.message),h(r.filter(U=>U.id!==y))):c.error(o.message)},S=()=>{c("Canceled")},i=[{title:"Name",dataIndex:"name",fixed:!0,render:(y,o,U)=>e.jsx("span",{children:e.jsx("a",{children:o.name})})},{title:"Created",dataIndex:"created",render:(y,o,U)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(o.created)})})})},{title:"Status",dataIndex:"isActive",render:(y,o,U)=>e.jsx("a",{children:o!=null&&o.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(y,o,U)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>I(o==null?void 0:o.id),onCancel:()=>S,okText:"Yes",cancelText:"No",disabled:!(o!=null&&o.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(o!=null&&o.canDelete),danger:!0})}),e.jsx(fe,{title:"Edit "+(o==null?void 0:o.name)+" Ownership",color:"green",children:e.jsx(N,{icon:e.jsx(be,{}),disabled:!(o!=null&&o.canEdit),onClick:()=>v(o),danger:!0})})]})}],l=async(y,o="",U=20)=>{const{data:Y}=await A.custom({url:"",method:"get",meta:{operation:"ownerships",variables:{page:{value:y,type:"Int",required:!0},key:{value:o,type:"String",required:!1},pageSize:{value:U,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});p(Y.page),k(Y.total),G(Y.hasNext),h(Y.results),K(!1)},R=async()=>{const{data:y}=await A.custom({url:"",method:"post",meta:{operation:"syncSchoolsOwnerships",variables:{},fields:["success","message"]}});y.success?(c.success(y.message),r.length=0,h([]),l(1)):c.error(y.message)};return t.useEffect(()=>{l(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:W,onFinish:y=>{p(1),r.length=0,q(y.key),l(1,y.key,j)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(E,{span:D?24:4,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(fe,{title:"Synchronize Default School Ownerships",children:e.jsx(N,{size:"large",icon:e.jsx(Ae,{}),onClick:()=>R()})}),e.jsx(fe,{title:"Create New School Ownership",children:e.jsx(N,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>C(!0)})})]})]}),e.jsx("div",{children:e.jsx(ue,{loading:B,columns:i,dataSource:r,scroll:{x:!0},pagination:{onChange:(y,o)=>{_(o),l(y,O,o)},total:F,pageSize:j,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(ie,{title:"Edit School Ownership Informations",width:"30vw",open:d,onClose:y=>g(y),children:e.jsx(za,{form:L,ownership:s,onFinish:u})}),e.jsx(ie,{title:"Create School Ownership Informations",width:"30vw",open:b,onClose:y=>C(y),children:e.jsx(Wt,{form:L,onFinish:f})})]})},Ra=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"School Ownerships"})]}),e.jsx(La,{height:80})]}),Ba=()=>e.jsx(xe,{children:e.jsx(Ra,{})});function Oa(a){return os({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"defs",attr:{},child:[]},{tag:"path",attr:{d:"M521.7 82c-152.5-.4-286.7 78.5-363.4 197.7-3.4 5.3.4 12.3 6.7 12.3h70.3c4.8 0 9.3-2.1 12.3-5.8 7-8.5 14.5-16.7 22.4-24.5 32.6-32.5 70.5-58.1 112.7-75.9 43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 32.6 32.5 58.1 70.4 76 112.5C865.7 417.8 875 464.1 875 512c0 47.9-9.4 94.2-27.8 137.8-17.8 42.1-43.4 80-76 112.5s-70.5 58.1-112.7 75.9A352.8 352.8 0 0 1 520.6 866c-47.9 0-94.3-9.4-137.9-27.8A353.84 353.84 0 0 1 270 762.3c-7.9-7.9-15.3-16.1-22.4-24.5-3-3.7-7.6-5.8-12.3-5.8H165c-6.3 0-10.2 7-6.7 12.3C234.9 863.2 368.5 942 520.6 942c236.2 0 428-190.1 430.4-425.6C953.4 277.1 761.3 82.6 521.7 82zM395.02 624v-76h-314c-4.4 0-8-3.6-8-8v-56c0-4.4 3.6-8 8-8h314v-76c0-6.7 7.8-10.5 13-6.3l141.9 112a8 8 0 0 1 0 12.6l-141.9 112c-5.2 4.1-13 .4-13-6.3z"}}]})(a)}const _a=a=>{const[s,m]=t.useState(a.member.isAdmin),[r,h]=t.useState(a.member.isStaff);return t.useEffect(()=>{a.form.setFieldsValue({firstName:a.member.firstName,middleName:a.member.middleName,lastName:a.member.lastName,email:a.member.email,phone:a.member.phone,isAdmin:a.member.isAdmin,isStaff:a.member.isStaff})},[a.form,a.member]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:x=>{x.id=parseInt(a.member.id),x.isAdmin=s,x.isStaff=r,a.onFinish(x)},requiredMark:!0,children:[e.jsx(n.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter First Name ..."})}),e.jsx(n.Item,{name:"middleName",label:"Middle Name",rules:[{required:!1,type:"string",message:"Please input Middle Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(n.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(n.Item,{name:"email",label:"Email",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(z,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(n.Item,{name:"phone",label:"Mobile Phone Number",rules:[{required:!0,type:"string",message:"Please input Mobile Phone Number ..."}],children:e.jsx(z,{size:"large",placeholder:"Enter Mobile Phone Number ..."})}),e.jsx(n.Item,{name:"isAdmin",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{defaultChecked:s,onChange:()=>{m(!s)},children:"Admin"})}),e.jsx(n.Item,{name:"isStaff",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{defaultChecked:r,checked:r,onChange:()=>{h(!r)},children:"Staff"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Ua=["id","firstName","lastName","email","middleName","fullName","phone","pic","username","isActive","isStaff","isAdmin","ldapAuth","created","updated","canEdit","canDelete","canManage"],Ka=a=>{const[s,m]=t.useState(!1),[r,h]=t.useState(!1),[x,p]=t.useState(!1),F=async k=>{const{data:M}=await A.custom({url:"",method:"post",meta:{operation:"createUserExtended",variables:{firstName:{value:k.firstName,type:"String",required:!0},middleName:{value:k.middleName,type:"String",required:!0},lastName:{value:k.lastName,type:"String",required:!0},username:{value:k.username,type:"String",required:!1},email:{value:k.email,type:"String",required:!x},phone:{value:k.phone,type:"String",required:!0},password:{value:k.password,type:"String",required:!x},passwordRepeat:{value:k.passwordRepeat,type:"String",required:!x},isAdmin:{value:k.isAdmin,type:"Boolean",required:!1},isStaff:{value:k.isStaff,type:"Boolean",required:!1},ldapAuth:{value:k.ldapAuth,type:"Boolean",required:!1}},fields:["success","message",{user:Ua}]}});M.success?(c.success(M.message),a.onFinish(M.user)):c.error(M.message)};return t.useEffect(()=>{},[a.form]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:k=>{k.isAdmin=s,k.isStaff=r,k.ldapAuth=x,x||(k.username=k.email),F(k)},requiredMark:!0,children:[e.jsxs("div",{style:{maxHeight:"70vh",overflowY:"auto",padding:20},children:[e.jsx(n.Item,{name:"ldapAuth",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{defaultChecked:x,onChange:()=>{p(!x)},children:"LDAP Authentication"})}),e.jsx(n.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter First Name ..."})}),e.jsx(n.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(n.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(n.Item,{name:"email",label:e.jsxs(e.Fragment,{children:["Email Address",!x&&e.jsx(re,{color:"green",children:"Username"})]}),rules:[{required:!x,type:"email",message:"Please input Email Address"}],children:e.jsx(z,{size:"large",placeholder:"Enter Email Address ..."})}),x&&e.jsx(n.Item,{name:"username",label:"Username",rules:[{required:x,type:"string",message:"Please input Username ..."}],children:e.jsx(z,{size:"large",placeholder:"Enter Username ..."})}),!x&&e.jsxs(e.Fragment,{children:[e.jsx(n.Item,{name:"password",label:"Password",rules:[{required:!x,type:"string",message:"Please input Password ..."}],children:e.jsx(z,{size:"large",type:"password",placeholder:"Enter Password ..."})}),e.jsx(n.Item,{name:"passwordRepeat",label:"Password Confirm",rules:[{required:!x,type:"string",message:"Please input Password Confirm ..."}],children:e.jsx(z,{size:"large",type:"password",placeholder:"Enter Password Confirm ..."})})]}),e.jsx(n.Item,{name:"phone",label:"Mobile Phone",rules:[{required:!0,type:"string",message:"Please input Mobile Phone"}],children:e.jsx(z,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(n.Item,{name:"isAdmin",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{defaultChecked:s,onChange:()=>{m(!s)},children:"Admin"})}),e.jsx(n.Item,{name:"isStaff",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{defaultChecked:r||x,checked:r||x,onChange:()=>{h(!r)},children:"Staff"})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",htmlType:"submit",danger:!0,children:"Save"})})]})})},{Paragraph:Va}=Ge,wa=a=>{var r,h,x,p,F;const[s]=n.useForm(),m=async k=>{const{data:M}=await A.custom({url:"",method:"post",meta:{operation:"createLdapCredentials",variables:{userId:{value:k.userId,type:"Int",required:!0},username:{value:k.username,type:"String",required:!1},password:{value:k.password,type:"String",required:!1},passwordConfirm:{value:k.passwordConfirm,type:"String",required:!1}},fields:["success","message"]}});M.success?(c.success(M.message),s.resetFields(),a.onFinish()):c.error(M.message)};return t.useEffect(()=>{},[a.member]),e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Copy the link below and send it to the user to create their LDAP credentials",e.jsx("span",{style:{color:"red"},children:"Link Expires in 24Hours"})]}),e.jsx(Vt,{type:"info",message:e.jsx(e.Fragment,{children:e.jsx(Va,{copyable:!0,style:{fontSize:"22px"},children:window.location.origin+"/auth/ldap/"+qe().add("h",24).valueOf()+"/"+((r=a.member)==null?void 0:r.id)+"/login?fname="+((h=a.member)==null?void 0:h.firstName)+"&lname="+((x=a.member)==null?void 0:x.lastName)+"&mname="+((p=a.member)==null?void 0:p.middleName)+"&email="+((F=a.member)==null?void 0:F.email)})})}),e.jsx("div",{style:{marginTop:50},children:e.jsxs(n,{layout:"vertical",form:s,onFinish:k=>{var M;k.userId=parseInt(((M=a.member)==null?void 0:M.id)??"0"),m(k)},requiredMark:!0,children:[e.jsx(n.Item,{name:"username",label:"Username",rules:[{required:!0,type:"string",message:"Please input Username"}],children:e.jsx(z,{size:"large",placeholder:"Enter Username ..."})}),e.jsx(n.Item,{name:"password",label:"Password",rules:[{required:!0,type:"string",message:"Please input Password"}],children:e.jsx(z,{size:"large",type:"password",placeholder:"Enter Password ..."})}),e.jsx(n.Item,{name:"passwordConfirm",label:"Confirm Password",rules:[{required:!0,type:"string",message:"Please input Confirm Password"},({getFieldValue:k})=>({validator(M,G){return!G||k("password")===G?Promise.resolve():Promise.reject(new Error("The two passwords that you entered do not match!"))}})],children:e.jsx(z,{size:"large",type:"password",placeholder:"Enter Confirm Password ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})]})},lt=["id","firstName","lastName","email","middleName","fullName","phone","pic","username","isActive","isStaff","isAdmin","ldapAuth","created","updated","canEdit","canDelete","canManage"],Ha=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(1),[F,k]=t.useState(0),[M,G]=t.useState(20),[j,_]=t.useState(""),[O,q]=t.useState(!1),[B,K]=t.useState(!0);le();const[W]=n.useForm(),[L]=n.useForm();de.useBreakpoint().lg;const[D,b]=t.useState(!1),[C,d]=t.useState(!1),[g,v]=t.useState(!1),u=new URLSearchParams(window.location.search),f=u.get("status")||"0",I=u.get("role")||"user",S=T=>{m(T),v(!0)},i=T=>{m(T),b(!0)},l=async()=>{v(!1)},R=async T=>{const{data:P}=await A.custom({url:"",method:"post",meta:{operation:"updateUser",variables:{id:{value:T.id,type:"Int",required:!0},firstName:{value:T.firstName,type:"String",required:!1},middleName:{value:T.middleName,type:"String",required:!1},lastName:{value:T.lastName,type:"String",required:!1},email:{value:T.email,type:"String",required:!1},phone:{value:T.phone,type:"String",required:!1},isAdmin:{value:T.isAdmin,type:"Boolean",required:!1},isStaff:{value:T.isStaff,type:"Boolean",required:!1},ldapAuth:{value:T.ldapAuth,type:"Boolean",required:!1}},fields:["success","message",{user:lt}]}});P.success?(c.success(P.message),L.resetFields(),b(!1)):c.error(P.message)},y=async T=>{h([T,...r]),L.resetFields(),d(!1)},o=async T=>{const{data:P}=await A.custom({url:"",method:"post",meta:{operation:"deleteUser",variables:{id:{value:parseInt(T.toString()),type:"Int",required:!0}},fields:["success","message"]}});P.success?(c.success(P.message),h(r.filter(ne=>ne.id!==T))):c.error(P.message)},U=async(T,P)=>{const{data:ne}=await A.custom({url:"",method:"post",meta:{operation:"blockUnblockUser",variables:{id:{value:parseInt(T.toString()),type:"Int",required:!0},block:{value:P,type:"Boolean",required:!0}},fields:["success","message",{user:lt}]}});ne.success?(c.success(ne.message),h(r.map(ve=>ve.id===T?ne.user:ve))):c.error(ne.message)},Y=()=>{c("Canceled")},Q=[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(T,P,ne)=>e.jsx("span",{children:e.jsx("a",{children:P.fullName})})},{title:"Username",dataIndex:"username",render:(T,P,ne)=>e.jsx("span",{children:e.jsx("a",{children:P.username})})},{title:"Email",dataIndex:"email",render:(T,P,ne)=>e.jsxs("span",{children:[P.email&&e.jsx(re,{color:"green",children:P.email}),P.phone&&e.jsx(re,{color:"green",children:P.phone})]})},{title:"LDAP Auth",dataIndex:"created",render:(T,P,ne)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:P.ldapAuth?e.jsx(re,{color:"green",children:"Yes"}):e.jsx(re,{color:"red",children:"No"})})})},{title:"Date Joined",dataIndex:"created",render:(T,P,ne)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(P.created)})})})},{title:"Status",dataIndex:"isActive",render:(T,P,ne)=>e.jsx("a",{children:P!=null&&P.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(T,P,ne)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[P.ldapAuth&&e.jsx(N,{icon:e.jsx(Oa,{}),disabled:!(P!=null&&P.canEdit),onClick:()=>S(P),danger:!0}),e.jsx(X,{title:"Are you sure to delete this member?",placement:"left",onConfirm:()=>o(P==null?void 0:P.id),onCancel:()=>Y,okText:"Yes",cancelText:"No",disabled:!(P!=null&&P.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(P!=null&&P.canDelete),danger:!0})}),e.jsx(N,{icon:e.jsx(be,{}),disabled:!(P!=null&&P.canEdit),onClick:()=>i(P),danger:!0}),P.isActive?e.jsx(X,{title:"Blocking User???",placement:"left",onConfirm:()=>U(P==null?void 0:P.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(ss,{}),disabled:!(P!=null&&P.canManage),danger:!0})}):e.jsx(X,{title:"Unblocking User???",placement:"left",onConfirm:()=>U(P==null?void 0:P.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(as,{}),disabled:!(P!=null&&P.canEdit),danger:!0})})]})}],Z=async(T,P="",ne=20)=>{const{data:ve}=await A.custom({url:"",method:"get",meta:{operation:"users",variables:{page:{value:T,type:"Int",required:!0},key:{value:P,type:"String",required:!1},pageSize:{value:ne,type:"Int",required:!1},where:{value:{is_staff:I==="staff",is_admin:I==="adminstrator",is_active:parseInt(f)===1},type:"JSON",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:lt}]}});p(ve.page),k(ve.total),q(ve.hasNext),h(ve.results),K(!1)};return t.useEffect(()=>{Z(x)},[u.get("status"),u.get("role")]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:10,children:e.jsx(n,{layout:"vertical",form:W,onFinish:T=>{p(1),r.length=0,Z(1,T.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:14,style:{display:"flex",justifyContent:"end"},children:e.jsx(N,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>d(!0),danger:!0,children:"Create User"})})]}),e.jsx(ue,{loading:B,columns:Q,dataSource:r,scroll:{x:!0},pagination:{onChange:(T,P)=>{G(P),Z(T,j,P)},total:F,pageSize:M,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(ie,{title:"Create User Form",width:"50%",open:C,onClose:T=>d(T),children:e.jsx(Ka,{form:L,onFinish:y})}),e.jsx(ie,{title:"Edit User Informations",width:"50%",visible:D,onClose:T=>b(T),children:e.jsx(_a,{form:L,member:s,onFinish:R})}),e.jsx(ie,{title:"Creating LDAP Credentials for User",width:"50vw",open:g,onClose:T=>v(T),children:e.jsx(wa,{member:s,onFinish:l})})]})},Wa=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Users/Members"})]}),e.jsx(Ha,{height:80})]}),Ya=()=>e.jsx(xe,{children:e.jsx(Wa,{})}),Ga=a=>{const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,p]=t.useState(0),[F,k]=t.useState(20),[M,G]=t.useState(""),[j,_]=t.useState(!1),[O,q]=t.useState(!0);le();const[B]=n.useForm(),[K]=n.useForm();de.useBreakpoint().lg;const[L,V]=t.useState(!1),D=async u=>{const{data:f}=await A.custom({url:"",method:"post",meta:{operation:"createLoginReedemCode",variables:{phone:{value:u.phone,type:"String",required:!0},registrationNumber:{value:u.registrationNumber,type:"String",required:!1},email:{value:u.email,type:"String",required:!1}},fields:["success","message",{loginReedemCode:["id","code","phone","registrationNumber",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","isUsed","canDelete","canEdit","canManage"]}]}}).catch(()=>(c.error("Failed, creating Login Reedem Code"),{data:null})).then(I=>I);f&&(f.success?(c.success(f.message),m([f.loginReedemCode,...s]),K.resetFields()):c.error(f.message))},b=async u=>{const{data:f}=await A.custom({url:"",method:"post",meta:{operation:"resendLoginReedemCode",variables:{id:{value:u,type:"Int",required:!0}},fields:["success","message"]}}).catch(I=>(c.error("Failed, deleting Login Reedem Code"),{data:null})).then(I=>I);f&&(f.success?c.success(f.message):c.error(f.message))},C=async u=>{const{data:f}=await A.custom({url:"",method:"post",meta:{operation:"deleteLoginReedemCode",variables:{id:{value:u,type:"Int",required:!0}},fields:["success","message"]}}).catch(I=>(c.error("Failed, deleting Login Reedem Code"),{data:null})).then(I=>I);f&&(f.success?(c.success(f.message),m(s.filter(I=>I.id!==u))):c.error(f.message))},d=()=>{c("Canceled")},g=[{title:"Reedem Code",dataIndex:"code",fixed:!0,render:(u,f,I)=>e.jsx("span",{children:e.jsx("a",{children:f.code})})},{title:"User",dataIndex:"user",render:(u,f,I)=>{var S,i,l;return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:(f==null?void 0:f.user)&&e.jsxs("span",{children:["Full Name: ",(S=f==null?void 0:f.user)==null?void 0:S.firstName," ",(i=f==null?void 0:f.user)==null?void 0:i.middleName," ",(l=f==null?void 0:f.user)==null?void 0:l.lastName]})}),e.jsx("span",{children:(f==null?void 0:f.email)&&e.jsxs(re,{children:["Email: ",f==null?void 0:f.email]})}),e.jsx("span",{children:(f==null?void 0:f.registrationNumber)&&e.jsxs(re,{children:["Reg#: ",f==null?void 0:f.registrationNumber]})})]})}},{title:"Phone Number",dataIndex:"phone",fixed:!0,render:(u,f,I)=>e.jsx("span",{children:e.jsx("a",{children:f.phone})})},{title:"Is Used",dataIndex:"isUsed",render:(u,f,I)=>e.jsx("a",{children:f!=null&&f.isUsed?e.jsx("span",{style:{color:"green"},children:"Used"}):e.jsx("span",{style:{color:"red"},children:"Not Used"})})},{title:"Status",dataIndex:"isActive",render:(u,f,I)=>e.jsx("a",{children:f!=null&&f.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(u,f,I)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Resend this Reedem Code?",onConfirm:()=>b(f==null?void 0:f.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(f!=null&&f.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{size:"large",icon:e.jsx(ls,{}),disabled:!(f!=null&&f.canDelete)})}),e.jsx(X,{title:"Are you sure to delete this Reedem Code?",onConfirm:()=>C(f==null?void 0:f.id),onCancel:()=>d,okText:"Yes",cancelText:"No",disabled:!(f!=null&&f.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{size:"large",icon:e.jsx(me,{}),disabled:!(f!=null&&f.canDelete)})})]})}],v=async(u,f="",I=20)=>{const{data:S}=await A.custom({url:"",method:"get",meta:{operation:"loginReedems",variables:{page:{value:u,type:"Int",required:!0},key:{value:f,type:"String",required:!1},pageSize:{value:I,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","code","phone",{user:["id","firstName","lastName","email","middleName","fullName","pic","isActive","isStaff","isAdmin"]},"created","updated","canEdit","canDelete","canManage","isActive","isUsed"]}]}});h(S.page),p(S.total),_(S.hasNext),m(S.results),q(!1)};return t.useEffect(()=>{v(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:10,children:e.jsx(n,{layout:"vertical",form:B,onFinish:u=>{h(1),s.length=0,v(1,u.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:14,style:{display:"flex",justifyContent:"end"},children:e.jsx(N,{icon:e.jsx(Kt,{}),size:"large",onClick:()=>V(!0),children:"Reedem"})})]}),e.jsx(ue,{loading:O,columns:g,dataSource:s,scroll:{x:!0},pagination:{onChange:(u,f)=>{k(f),v(u,M,f)},total:x,pageSize:F,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(ie,{title:"Creating Reedem Code",open:L,onClose:u=>V(u),width:"30vw",children:e.jsxs(e.Fragment,{children:[e.jsxs(n,{layout:"vertical",form:K,onFinish:u=>{D(u)},children:[e.jsx(n.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,type:"string",message:"Please input Phone Number"}],children:e.jsx(z,{size:"large",placeholder:"Phone Number ...",prefix:e.jsx(ns,{}),autoComplete:"off"})}),e.jsx(n.Item,{name:"email",label:"Email Address",children:e.jsx(z,{size:"large",placeholder:"Email Address ...",prefix:e.jsx(is,{}),autoComplete:"off",allowClear:!0})}),e.jsx(n.Item,{name:"registrationNumber",label:"Registration Number",children:e.jsx(z,{size:"large",placeholder:"Registration Number ...",prefix:e.jsx(rs,{}),autoComplete:"off",allowClear:!0})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"end"},children:e.jsx(N,{size:"large",onClick:()=>K.submit(),children:"Reedem"})})]})})]})},Ja=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Login Reedems"})]}),e.jsx(Ga,{height:80})]}),Qa=()=>e.jsx(xe,{children:e.jsx(Ja,{})}),$a=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(1),[F,k]=t.useState(0),[M,G]=t.useState(20),[j,_]=t.useState(""),[O,q]=t.useState(!1),[B,K]=t.useState(!0);le();const[W]=n.useForm(),[L]=n.useForm(),D=!de.useBreakpoint().lg,[b,C]=t.useState(!1),d=i=>{m(i),C(!0)},g=()=>{C(!1)},v=async i=>{const{data:l}=await A.custom({url:"",method:"post",meta:{operation:"updateWard",variables:{id:{value:i.id,type:"Int",required:!0},name:{value:i.name,type:"String",required:!0},isActive:{value:i.isActive,type:"Boolean",required:!0}},fields:["success","message",{ward:["id","name",{district:["id","name",{region:["id","name"]}]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}});l.success?(c.success(l.message),L.resetFields(),C(!1),h(r.map(R=>R.id===l.ward.id?l.ward:R))):c.error(l.message)},u=async i=>{const{data:l}=await A.custom({url:"",method:"post",meta:{operation:"deleteWard",variables:{id:{value:parseInt(i.toString()),type:"Int",required:!0}},fields:["success","message"]}});l.success?(c.success(l.message),h(r.filter(R=>R.id!==i))):c.error(l.message)},f=()=>{c("Canceled")},I=[{title:"Name",dataIndex:"name",fixed:!0,render:(i,l,R)=>e.jsx("span",{children:e.jsx("a",{children:l.name})})},{title:"District",dataIndex:"district",fixed:!0,render:(i,l,R)=>e.jsx("span",{children:e.jsx("a",{children:l.district.name})})},{title:"Region",dataIndex:"region",fixed:!0,render:(i,l,R)=>e.jsx("span",{children:e.jsx("a",{children:l.district.region.name})})},{title:"Created",dataIndex:"created",render:(i,l,R)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(l.created)})})})},{title:"Status",dataIndex:"isActive",render:(i,l,R)=>e.jsx("a",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(i,l,R)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this Ward?",onConfirm:()=>u(l==null?void 0:l.id),onCancel:()=>f,okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(l!=null&&l.canDelete)})}),e.jsx(fe,{title:"Edit "+(l==null?void 0:l.name)+" Ward",color:"green",children:e.jsx(N,{icon:e.jsx(be,{}),disabled:!(l!=null&&l.canEdit),onClick:()=>d(l)})})]})}],S=async(i,l="",R=20)=>{const{data:y}=await A.custom({url:"",method:"get",meta:{operation:"wards",variables:{page:{value:i,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:R,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name",{district:["id","name",{region:["id","name"]}]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});p(y.page),k(y.total),q(y.hasNext),h(y.results),K(!1)};return t.useEffect(()=>{S(x)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(E,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:W,onFinish:i=>{p(1),r.length=0,S(1,i.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{children:e.jsx(ue,{loading:B,columns:I,dataSource:r,scroll:{x:!0},pagination:{onChange:(i,l)=>{G(l),S(i,j,l)},total:F,pageSize:M,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(ie,{title:"Edit Ward Informations",width:"30vw",open:b,onCancel:g,children:e.jsx(Yt,{form:L,ward:s,onFinish:v})})]})},Za=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Wards"})]}),e.jsx($a,{height:80})]}),Xa=()=>e.jsx(xe,{children:e.jsx(Za,{})}),en=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,p]=t.useState(0),[F,k]=t.useState(20),[M,G]=t.useState(""),[j,_]=t.useState(!1),[O,q]=t.useState(!0);le();const[B]=n.useForm();n.useForm();const W=!de.useBreakpoint().lg,L=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(b,C,d)=>e.jsxs(se,{direction:"vertical",children:[e.jsx("span",{children:C.fullName}),e.jsx("span",{children:C.email})]})},{title:"",dataIndex:"action",render:(b,C,d)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Add"}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:5},children:C.fullName}),e.jsx("span",{style:{marginLeft:5},children:"As Private Tutor?"})]}),onConfirm:()=>V(C.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(C!=null&&C.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Ce,{}),disabled:!(C!=null&&C.canDelete)})})})}],V=async b=>{const{data:C}=await A.custom({url:"",method:"post",meta:{operation:"addPrivateTutor",variables:{userId:{value:parseInt(b.toString()),type:"Int",required:!0}},fields:["success","message",{privateTutor:["id",{user:["id","firstName","middleName","lastName","fullName","email","isActive","created","updated","canEdit","canDelete","canManage"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(d=>(c.error("Error occured while Adding Private Tutor"),{data:null})).then(d=>d);C&&(C.success?(c.success(C.message),a.onAdd(C.privateTutor)):c.error(C.message))},D=async(b,C="",d=20)=>{q(!0);const{data:g}=await A.custom({url:"",method:"get",meta:{operation:"notPrivateTutors",variables:{page:{value:b,type:"Int",required:!0},key:{value:C,type:"String",required:!1},pageSize:{value:d,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","firstName","middleName","lastName","fullName","email","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(v=>(c.error("Error occured while fetching examinations types"),{data:null})).then(v=>v);g&&(h(g.page),p(g.total),_(g.hasNext),m([...g.results])),q(!1)};return t.useEffect(()=>{D(r)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(E,{span:24,children:e.jsx(n,{layout:"vertical",form:B,onFinish:b=>{h(1),s.length=0,D(1,b.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ue,{loading:O,columns:L,dataSource:s,pagination:{onChange:(b,C)=>{k(C),D(b,M,C)},total:x,pageSize:F,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0,y:"68vh"}})]})},tn=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,p]=t.useState(0),[F,k]=t.useState(20),[M,G]=t.useState(""),[j,_]=t.useState(!1),[O,q]=t.useState(!0);le();const[B]=n.useForm();n.useForm(),de.useBreakpoint().lg;const[W,L]=t.useState(!1),V=async v=>{m([v,...s])},D=async v=>{const{data:u}=await A.custom({url:"",method:"post",meta:{operation:"deletePrivateTutor",variables:{privateTutorId:{value:parseInt(v.toString()),type:"Int",required:!0}},fields:["success","message"]}});u.success?(c.success(u.message),m(s.filter(f=>f.id!==v))):c.error(u.message)},b=()=>{c("Canceled")},C=async(v,u)=>{const{data:f}=await A.custom({url:"",method:"post",meta:{operation:"blockUnblockPrivateTutor",variables:{privateTutorId:{value:parseInt(v.toString()),type:"Int",required:!0},blocked:{value:u,type:"Boolean",required:!0}},fields:["success","message",{privateTutor:["id",{user:["id","firstName","middleName","lastName","fullName","email","isActive","created","updated","canEdit","canDelete","canManage"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(u?c.error("Error occured while Unblocking Private Tutor"):c.error("Error occured while Blocking Private Tutor"),{data:null})).then(I=>I);f&&(f.success?(c.success(f.message),m(s.map(I=>I.id===v?f.privateTutor:I))):c.error(f.message))},d=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(v,u,f)=>e.jsx("span",{children:e.jsx("a",{children:u.user.fullName})})},{title:"Email",dataIndex:"email",fixed:!0,render:(v,u,f)=>e.jsx("span",{children:u.user.email})},{title:"Created",dataIndex:"created",render:(v,u,f)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(u.created)})})})},{title:"Status",dataIndex:"isActive",render:(v,u,f)=>e.jsx("span",{children:u!=null&&u.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,u,f)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[u.isActive?e.jsx(X,{title:"Are you sure to Block this Private Tutor?",onConfirm:()=>C(u==null?void 0:u.id,!1),onCancel:()=>b,okText:"Block",cancelText:"No",disabled:!(u!=null&&u.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(nt,{}),disabled:!(u!=null&&u.canDelete),danger:!0})}):e.jsx(X,{title:"Are you sure to Unblock this Private Tutor?",onConfirm:()=>C(u==null?void 0:u.id,!0),onCancel:()=>b,okText:"Unblock",cancelText:"No",disabled:!(u!=null&&u.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(it,{}),disabled:!(u!=null&&u.canDelete),danger:!0})}),e.jsx(X,{title:"Are you sure to delete this Private Tutor?",onConfirm:()=>D(u==null?void 0:u.id),onCancel:()=>b,okText:"Yes",cancelText:"No",disabled:!(u!=null&&u.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(me,{}),disabled:!(u!=null&&u.canDelete),danger:!0})})]})}],g=async(v,u="",f=20)=>{const{data:I}=await A.custom({url:"",method:"get",meta:{operation:"privateTutors",variables:{page:{value:v,type:"Int",required:!0},key:{value:u,type:"String",required:!1},pageSize:{value:f,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{user:["id","firstName","middleName","lastName","fullName","email"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(S=>(c.error("Error occured while fetching examinations types"),{data:null})).then(S=>S);I&&(h(I.page),p(I.total),_(I.hasNext),m([...I.results])),q(!1)};return t.useEffect(()=>{g(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:8,children:e.jsx(n,{layout:"vertical",form:B,onFinish:v=>{h(1),s.length=0,g(1,v.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>L(!0),danger:!0,children:"Add Tutor"})})]}),e.jsx(ue,{loading:O,columns:d,dataSource:s,pagination:{onChange:(v,u)=>{k(u),g(v,M,u)},total:x,pageSize:F,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(We,{title:"Adding Private Tutors",anchor:"right",width:"40vw",onClose:v=>L(v),open:W,children:e.jsx(en,{onAdd:V,randKey:Math.random()})})]})},sn=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Private Tutors"})]}),e.jsx(tn,{height:80})]}),an=()=>e.jsx(xe,{children:e.jsx(sn,{})}),nn=a=>{const s=async m=>{const{data:r}=await A.custom({url:"",method:"post",meta:{operation:"createPaymentPackage",variables:{name:{value:m.name,type:"String",required:!0},code:{value:m.code,type:"String",required:!0},amount:{value:m.amount,type:"Float",required:!0},description:{value:m.description,type:"String",required:!1},vatIncluded:{value:m.vat_included,type:"Boolean",required:!0}},fields:["success","message",{paymentPackage:["id","name","code","description","amount","isActive","vatIncluded","created","updated","canEdit","canDelete","canManage"]}]}}).catch(h=>(c.error("Error in Creating Payment Package"),{data:null})).then(h=>h);r&&(r.success?(c.success("Payment Package Created Successfully"),a.onFinish(r.paymentPackage)):c.error(r.message))};return t.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:m=>{s(m)},requiredMark:!0,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code ..."}],children:e.jsx(z,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(n.Item,{name:"amount",label:"Amount",initialValue:0,rules:[{required:!0,type:"number",min:0}],children:e.jsx(Be,{value:0,style:{width:"100%"},size:"large"})}),e.jsx(n.Item,{name:"vat_included",valuePropName:"checked",initialValue:!0,rules:[{required:!0,type:"boolean",message:"Please Check ..."}],children:e.jsx(pe,{children:"VAT Included"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",htmlType:"submit",icon:e.jsx(Ut,{}),danger:!0,children:"Save"})})]})})},rn=a=>{const s=async m=>{const{data:r}=await A.custom({url:"",method:"post",meta:{operation:"updatePaymentPackage",variables:{paymentPackageId:{value:m.payment_package_id,type:"Int",required:!0},name:{value:m.name,type:"String",required:!0},code:{value:m.code,type:"String",required:!0},amount:{value:m.amount,type:"Float",required:!0},description:{value:m.description,type:"String",required:!1},vatIncluded:{value:m.vat_included,type:"Boolean",required:!0}},fields:["success","message",{paymentPackage:["id","name","code","description","vatIncluded","amount","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(h=>(c.error("Error in Updating Payment Package"),{data:null})).then(h=>h);r&&(r.success?(c.success("Payment Package Created Successfully"),a.onFinish(r.paymentPackage)):c.error(r.message))};return t.useEffect(()=>{a.paymentPackage&&a.form.setFieldsValue({name:a.paymentPackage.name,code:a.paymentPackage.code,amount:a.paymentPackage.amount,description:a.paymentPackage.description,vat_included:a.paymentPackage.vatIncluded})},[a.randKey]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:m=>{m.payment_package_id=a.paymentPackage.id,s(m)},requiredMark:!0,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code ..."}],children:e.jsx(z,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(n.Item,{name:"amount",label:"Amount",initialValue:0,rules:[{required:!0,type:"number",min:0}],children:e.jsx(Be,{value:0,style:{width:"100%"},size:"large"})}),e.jsx(n.Item,{name:"vat_included",valuePropName:"checked",initialValue:!0,rules:[{required:!0,type:"boolean",message:"Please Check ..."}],children:e.jsx(pe,{children:"VAT Included"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Update"})})]})})},Gt=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(1),[F,k]=t.useState(0),[M,G]=t.useState(20),[j,_]=t.useState(""),[O,q]=t.useState(!1),[B,K]=t.useState(!0);le();const[W]=n.useForm(),[L]=n.useForm(),[V]=n.useForm();de.useBreakpoint().lg;const[b,C]=t.useState(!1),[d,g]=t.useState(!1),v=y=>{m(y),g(!0)},u=async y=>{h(r.map(o=>o.id===y.id?y:o)),L.resetFields(),g(!1)},f=async y=>{h([y,...r]),V.resetFields(),C(!1)},I=async y=>{const{data:o}=await A.custom({url:"",method:"post",meta:{operation:"deletePaymentPackage",variables:{paymentPackageId:{value:parseInt(y.toString()),type:"Int",required:!0}},fields:["success","message"]}});o.success?(c.success(o.message),h(r.filter(U=>U.id!==y))):c.error(o.message)},S=()=>{c("Canceled")},i=async(y,o)=>{const{data:U}=await A.custom({url:"",method:"post",meta:{operation:"blockUnblockPaymentPackage",variables:{paymentPackageId:{value:parseInt(y.toString()),type:"Int",required:!0},blocked:{value:o,type:"Boolean",required:!0}},fields:["success","message",{paymentPackage:["id","name","code","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(o?c.error("Error occured while Unblocking Payment Package"):c.error("Error occured while Blocking Payment Package"),{data:null})).then(Y=>Y);U&&(U.success?(c.success(U.message),h(r.map(Y=>Y.id===y?U.paymentPackage:Y))):c.error(U.message))},l=[{title:"Name",dataIndex:"name",fixed:!0,render:(y,o,U)=>e.jsx("span",{children:e.jsx("a",{children:o.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(y,o,U)=>e.jsx("span",{children:o.code})},{title:"Amount",dataIndex:"amount",fixed:!0,render:(y,o,U)=>e.jsxs("span",{children:[o.amount,e.jsx("span",{style:{marginLeft:10},children:o.vatIncluded?e.jsx(re,{color:"green",children:"+VAT"}):e.jsx(re,{color:"red",children:"1VAT"})})]})},{title:"Created",dataIndex:"created",render:(y,o,U)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(o.created)})})})},{title:"Status",dataIndex:"isActive",render:(y,o,U)=>e.jsx("span",{children:o!=null&&o.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(y,o,U)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[o.isActive?e.jsx(X,{title:"Are you sure to Block this Payment Package?",onConfirm:()=>i(o==null?void 0:o.id,!1),onCancel:()=>S,okText:"Block",cancelText:"No",disabled:!(o!=null&&o.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(nt,{}),disabled:!(o!=null&&o.canManage),danger:!0})}):e.jsx(X,{title:"Are you sure to Unblock this Payment Package?",onConfirm:()=>i(o==null?void 0:o.id,!0),onCancel:()=>S,okText:"Unblock",cancelText:"No",disabled:!(o!=null&&o.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(it,{}),disabled:!(o!=null&&o.canManage),danger:!0})}),e.jsx(X,{title:"Are you sure to delete this Payment Package?",onConfirm:()=>I(o==null?void 0:o.id),onCancel:()=>S,okText:"Yes",cancelText:"No",disabled:!(o!=null&&o.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(me,{}),disabled:!(o!=null&&o.canDelete),danger:!0})}),e.jsx(N,{style:{marginRight:3},icon:e.jsx(be,{}),disabled:!(o!=null&&o.canEdit),onClick:()=>v(o),danger:!0})]})}],R=async(y,o="",U=20)=>{const{data:Y}=await A.custom({url:"",method:"get",meta:{operation:"paymentPackages",variables:{page:{value:y,type:"Int",required:!0},key:{value:o,type:"String",required:!1},pageSize:{value:U,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","code","amount","vatIncluded","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(Q=>(c.error("Error occured while fetching Payment Packages"),{data:null})).then(Q=>Q);Y&&(p(Y.page),k(Y.total),q(Y.hasNext),h([...Y.results])),K(!1)};return t.useEffect(()=>{R(x)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:8,children:e.jsx(n,{layout:"vertical",form:W,onFinish:y=>{p(1),r.length=0,R(1,y.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>C(!0),danger:!0,children:"Add Payment Package"})})]}),e.jsx(ue,{loading:B,columns:l,dataSource:r,pagination:{onChange:(y,o)=>{G(o),R(y,j,o)},total:F,pageSize:M,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(ie,{title:"Adding Payment Package",width:"40vw",onClose:()=>C(!1),onOk:()=>C(!1),open:b,destroyOnClose:!0,children:e.jsx(nn,{form:V,onFinish:f})}),e.jsx(ie,{title:"Edit Payment Package",width:"40vw",onClose:y=>g(y),open:d,children:e.jsx(rn,{form:L,onFinish:u,paymentPackage:s,randKey:Math.random()})})]})},ln=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Payment Packages"})]}),e.jsx(Gt,{height:80})]}),cn=()=>e.jsx(xe,{children:e.jsx(ln,{})}),dn=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,p]=t.useState(0),[F,k]=t.useState(20),[M,G]=t.useState(""),[j,_]=t.useState(!1),[O,q]=t.useState(!0);le();const[B]=n.useForm(),W=!de.useBreakpoint().lg,L=async C=>{const{data:d}=await A.custom({url:"",method:"post",meta:{operation:"deleteOrder",variables:{orderId:{value:parseInt(C.toString()),type:"Int",required:!0}},fields:["success","message"]}});d.success?(c.success(d.message),m(s.filter(g=>g.id!==C))):c.error(d.message)},V=async(C,d)=>{const{data:g}=await A.custom({url:"",method:"post",meta:{operation:"blockUnblockOrder",variables:{orderId:{value:parseInt(C.toString()),type:"Int",required:!0},blocked:{value:d,type:"Boolean",required:!0}},fields:["success","message",{order:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(v=>(d?c.error("Error occured while Unblocking Payment Package"):c.error("Error occured while Blocking Payment Package"),{data:null})).then(v=>v);g&&(g.success?(c.success(g.message),m(s.map(v=>v.id===C?g.order:v))):c.error(g.message))},D=[{title:"Order#",dataIndex:"order_number",fixed:!0,render:(C,d,g)=>e.jsx("span",{children:e.jsx("a",{children:d.orderNumber})})},{title:"Client",dataIndex:"client",fixed:!0,render:(C,d,g)=>e.jsx("span",{children:d.user.fullName})},{title:"Amount",dataIndex:"amount",fixed:!0,render:(C,d,g)=>e.jsxs("span",{children:[d.amount,e.jsx("span",{style:{marginLeft:10},children:d.vatIncluded?e.jsx(re,{color:"green",children:"+VAT"}):e.jsx(re,{color:"red",children:"1VAT"})})]})},{title:"Created",dataIndex:"created",render:(C,d,g)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(d.created)})})})},{title:"Status",dataIndex:"isActive",render:(C,d,g)=>e.jsx("span",{children:d!=null&&d.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(C,d,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[d.isActive?e.jsx(X,{title:"Are you sure to Block this Order?",onConfirm:()=>V(d==null?void 0:d.id,!1),onCancel:()=>{},okText:"Block",cancelText:"No",disabled:!(d!=null&&d.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(nt,{}),disabled:!(d!=null&&d.canManage)})}):e.jsx(X,{title:"Are you sure to Unblock this Order?",onConfirm:()=>V(d==null?void 0:d.id,!0),onCancel:()=>{},okText:"Unblock",cancelText:"No",disabled:!(d!=null&&d.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(it,{}),disabled:!(d!=null&&d.canManage)})}),e.jsx(X,{title:"Are you sure to delete this Order?",onConfirm:()=>L(d==null?void 0:d.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(d!=null&&d.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(d!=null&&d.canDelete)})})]})}],b=async(C,d="",g=20)=>{const{data:v}=await A.custom({url:"",method:"get",meta:{operation:"orders",variables:{page:{value:C,type:"Int",required:!0},key:{value:d,type:"String",required:!1},pageSize:{value:g,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(u=>(c.error("Error occured while fetching Orders"),{data:null})).then(u=>u);v&&(h(v.page),p(v.total),_(v.hasNext),m([...v.results])),q(!1)};return t.useEffect(()=>{b(r)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(E,{span:W?24:20,children:e.jsx(n,{layout:"vertical",form:B,onFinish:C=>{h(1),s.length=0,b(1,C.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ue,{loading:O,columns:D,dataSource:s,pagination:{onChange:(C,d)=>{k(d),b(C,M,d)},total:x,pageSize:F,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})]})},on=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Orders"})]}),e.jsx(dn,{height:80})]}),un=()=>e.jsx(xe,{children:e.jsx(on,{})}),mn=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,p]=t.useState(0),[F,k]=t.useState(20),[M,G]=t.useState(""),[j,_]=t.useState(!1),[O,q]=t.useState(!0);le();const[B]=n.useForm(),W=!de.useBreakpoint().lg,L=async C=>{const{data:d}=await A.custom({url:"",method:"post",meta:{operation:"deleteOrderPayment",variables:{orderPaymentId:{value:parseInt(C.toString()),type:"Int",required:!0}},fields:["success","message"]}});d.success?(c.success(d.message),m(s.filter(g=>g.id!==C))):c.error(d.message)},V=async(C,d)=>{const{data:g}=await A.custom({url:"",method:"post",meta:{operation:"blockUnblockOrderPayment",variables:{orderPaymentId:{value:parseInt(C.toString()),type:"Int",required:!0},blocked:{value:d,type:"Boolean",required:!0}},fields:["success","message",{orderPayment:["id","amount","paymentStatus","paymentDate","isActive","created","updated","canEdit","canDelete","canManage",{order:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}]}}).catch(v=>(d?c.error("Error occured while Unblocking Order Payment"):c.error("Error occured while Blocking Order Payment"),{data:null})).then(v=>v);g&&(g.success?(c.success(g.message),m(s.map(v=>v.id===C?g.order:v))):c.error(g.message))},D=[{title:"Order#",dataIndex:"order_number",fixed:!0,render:(C,d,g)=>e.jsx("span",{children:e.jsx("a",{children:d.orderNumber})})},{title:"Client",dataIndex:"client",fixed:!0,render:(C,d,g)=>e.jsx("span",{children:d.user.fullName})},{title:"Order Amount",dataIndex:"amount",fixed:!0,render:(C,d,g)=>e.jsxs("span",{children:[d.order.amount,e.jsx("span",{style:{marginLeft:10},children:d.vatIncluded?e.jsx(re,{color:"green",children:"+VAT"}):e.jsx(re,{color:"red",children:"1VAT"})})]})},{title:"Paid Amount",dataIndex:"paidAmount",fixed:!0,render:(C,d,g)=>e.jsx("span",{children:d.amount})},{title:"Receipt#",dataIndex:"receipt",fixed:!0,render:(C,d,g)=>e.jsx("span",{children:d.receiptNumber})},{title:"Payment Date",dataIndex:"paymentDate",render:(C,d,g)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(d.paymentDate)})})})},{title:"Status",dataIndex:"isActive",render:(C,d,g)=>e.jsx("span",{children:d!=null&&d.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(C,d,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[d.isActive?e.jsx(X,{title:"Are you sure to Block this Order?",onConfirm:()=>V(d==null?void 0:d.id,!1),onCancel:()=>{},okText:"Block",cancelText:"No",disabled:!(d!=null&&d.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(nt,{}),disabled:!(d!=null&&d.canManage)})}):e.jsx(X,{title:"Are you sure to Unblock this Order?",onConfirm:()=>V(d==null?void 0:d.id,!0),onCancel:()=>{},okText:"Unblock",cancelText:"No",disabled:!(d!=null&&d.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(it,{}),disabled:!(d!=null&&d.canManage)})}),e.jsx(X,{title:"Are you sure to delete this Order?",onConfirm:()=>L(d==null?void 0:d.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(d!=null&&d.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(d!=null&&d.canDelete)})})]})}],b=async(C,d="",g=20)=>{const{data:v}=await A.custom({url:"",method:"get",meta:{operation:"ordersPayments",variables:{page:{value:C,type:"Int",required:!0},key:{value:d,type:"String",required:!1},pageSize:{value:g,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","amount","paymentStatus","paymentDate","isActive","created","updated","canEdit","canDelete","canManage",{order:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}]}}).catch(u=>(c.error("Error occured while fetching Orders Payments"),{data:null})).then(u=>u);v&&(h(v.page),p(v.total),_(v.hasNext),m([...v.results])),q(!1)};return t.useEffect(()=>{b(r)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(E,{span:W?24:20,children:e.jsx(n,{layout:"vertical",form:B,onFinish:C=>{h(1),s.length=0,b(1,C.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ue,{loading:O,columns:D,dataSource:s,pagination:{onChange:(C,d)=>{k(d),b(C,M,d)},total:x,pageSize:F,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})]})},hn=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Orders Payments"})]}),e.jsx(mn,{height:80})]}),xn=()=>e.jsx(xe,{children:e.jsx(hn,{})}),pn=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Order Payments"})]}),e.jsx(Gt,{height:80})]}),gn=()=>e.jsx(xe,{children:e.jsx(pn,{})}),jn=a=>{const[s,m]=t.useState(a.carrier.allowPayment),[r,h]=t.useState(a.carrier.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.carrier.name,allowPayment:a.carrier.allowPayment,isActive:a.carrier.isActive})},[a.form,a.carrier]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:x=>{x.isActive=r,x.allowPayment=s,x.id=parseInt(a.carrier.id),a.onFinish(x)},requiredMark:!1,autoComplete:"off",children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ...",autoComplete:"off"})}),e.jsx(n.Item,{name:"allowPayment",children:e.jsx(pe,{checked:s,onChange:()=>m(!s),children:"Allow Payment"})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:r,onChange:()=>h(!r),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},yn=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(1),[F,k]=t.useState(0),[M,G]=t.useState(20),[j,_]=t.useState(""),[O,q]=t.useState(!1),[B,K]=t.useState(!0);le();const[W]=n.useForm(),[L]=n.useForm(),D=!de.useBreakpoint().lg,[b,C]=t.useState(!1),d=i=>{m(i),C(!0)},g=async i=>{const{data:l}=await A.custom({url:"",method:"post",meta:{operation:"updateTelecomCarrier",variables:{id:{value:i.id,type:"Int",required:!0},name:{value:i.name,type:"String",required:!0},allowPayment:{value:i.allowPayment,type:"Boolean",required:!0},isActive:{value:i.isActive,type:"Boolean",required:!0}},fields:["success","message",{telecomCarrier:["id","name","allowPayment","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(R=>({data:null})).then(R=>R);l&&(l.success?(c.success(l.message),L.resetFields(),C(!1),h(r.map(R=>parseInt(R.id.toString())===parseInt(l.telecomCarrier.id.toString())?l.telecomCarrier:R))):c.error(l.message))},v=async()=>{const{data:i}=await A.custom({url:"",method:"post",meta:{operation:"syncTelecomCarriers",variables:{},fields:["success","message"]}});i.success?(c.success(i.message),S(1,"",20)):c.error(i.message)},u=async i=>{const{data:l}=await A.custom({url:"",method:"post",meta:{operation:"deleteTelecomCarrier",variables:{id:{value:i,type:"Int",required:!0}},fields:["success","message"]}});l.success?(c.success(l.message),h(r.filter(R=>R.id!==i))):l.message},f=()=>{c("Canceled")},I=[{title:"Name",dataIndex:"name",fixed:!0,render:(i,l,R)=>e.jsx("span",{children:e.jsx("a",{children:l.name})})},{title:"Allow Payment",dataIndex:"allowPayment",fixed:!0,render:(i,l,R)=>e.jsx("span",{children:l.allowPayment?e.jsx(re,{color:"green",children:"Yes"}):e.jsx(re,{color:"red",children:"NO"})})},{title:"Created",dataIndex:"created",render:(i,l,R)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(l.created)})})})},{title:"Status",dataIndex:"isActive",render:(i,l,R)=>e.jsx("a",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(i,l,R)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this Telecom Carrier?",onConfirm:()=>u(l==null?void 0:l.id),onCancel:()=>f,okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(l!=null&&l.canDelete)})}),e.jsx(N,{disabled:!(l!=null&&l.canEdit),onClick:()=>d(l),icon:e.jsx(be,{})})]})}],S=async(i,l="",R=20)=>{const{data:y}=await A.custom({url:"",method:"get",meta:{operation:"telecomCarriers",variables:{page:{value:i,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:R,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","allowPayment","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(o=>(c.error(o.message),{data:null})).then(o=>o);y&&(p(y.page),k(y.total),q(y.hasNext),h(y.results)),K(!1)};return t.useEffect(()=>{S(x,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:W,onFinish:i=>{p(1),r.length=0,S(1,i.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:D?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(Ae,{}),onClick:()=>v(),children:"Sync Mtaa"})})]}),e.jsx("div",{children:e.jsx(ue,{loading:B,columns:I,dataSource:r,scroll:{x:!0},pagination:{onChange:(i,l)=>{G(l),S(i,j,l)},total:F,pageSize:M,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(ie,{title:"Edit Telecom Carrier Informations",width:"20%",open:b,onClose:i=>C(i),children:e.jsx(jn,{form:L,carrier:s,onFinish:g})})]})},fn=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Telecom Carriers"})]}),e.jsx(yn,{height:80})]}),vn=()=>e.jsx(xe,{children:e.jsx(fn,{})}),Sn=a=>{const[s,m]=t.useState([]),[r,h]=t.useState(!0),[x,p]=t.useState(1);t.useState(25);const[F,k]=t.useState(""),[M]=n.useForm();t.useState(0),t.useState(0);const[G,j]=t.useState(!0);le();const _=async q=>{var K,W;const{data:B}=await A.custom({url:"",method:"post",meta:{operation:"addCombinationSubject",variables:{combinationId:{value:parseInt((K=a.combination)!=null&&K.id?(W=a.combination)==null?void 0:W.id.toString():"0"),type:"Int",required:!0},subjectId:{value:parseInt(q?q.toString():"0"),type:"Int",required:!0}},fields:["success","message",{combination:["id","name","code","description",{subjects:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});B.success?(c.success(B.message),s.length=0,m([]),O(1,F),a.onAdd(B.combination)):c.error(B.message)},O=async(q,B="")=>{var W,L;const{data:K}=await A.custom({url:"",method:"get",meta:{operation:"combinationSubjectsToAdd",variables:{combinationId:{value:parseInt((W=a.combination)!=null&&W.id?(L=a.combination)==null?void 0:L.id.toString():"0"),type:"Int",required:!0},page:{value:q,type:"Int",required:!0},key:{value:B,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description",{schoolType:["id","name"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}});K.hasNext&&(j(K.hasNext),p(K.page+1),m([...s,...K.results])),h(!1)};return t.useEffect(()=>{s.length=0,m([]),O(1)},[a.randKey,a.combination]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsx(E,{span:24,children:e.jsx(n,{layout:"vertical",form:M,onFinish:q=>{k(q.key),s.length=0,m([]),O(1,q.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search Adminstrator(s)...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(Ee,{spinning:r,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"70vh",overflowY:"auto"},children:e.jsx(Pe,{itemLayout:"horizontal",dataSource:s,renderItem:q=>{var B;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Pe.Item,{style:{margin:0,padding:0},actions:[e.jsx(X,{placement:"topLeft",title:"Adding "+q.name+" to "+((B=a.combination)==null?void 0:B.name)+"?",onConfirm:()=>_(q.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Ce,{})})})],children:e.jsx(Pe.Item.Meta,{title:e.jsxs("a",{children:[q.name,e.jsx(re,{color:"green",style:{marginLeft:10},children:q.schoolType.name})]})})},"file-"+q.id)})}})}),G&&e.jsx("div",{style:{position:"absolute",bottom:0,width:"100%",textAlign:"center"},children:e.jsx(N,{type:"primary",onClick:()=>{O(x,F)},children:"Load More"})})]})]})},Cn=a=>{const[s,m]=t.useState([]),[r,h]=t.useState(!0),[x,p]=t.useState(1);t.useState(25);const[F,k]=t.useState(""),[M]=n.useForm();t.useState(0),t.useState(0);const[G,j]=t.useState(!0);le();const _=async q=>{const{data:B}=await A.custom({url:"",method:"post",meta:{operation:"removeCombinationSubject",variables:{combinationSubjectId:{value:q,type:"Int",required:!0}},fields:["success","message",{combination:["id","name","code","description",{subjects:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});B.success?(c.success(B.message),s.length=0,m([]),O(1,F),a.onAdd(B.combination)):c.error(B.message)},O=async(q,B="")=>{var W,L;const{data:K}=await A.custom({url:"",method:"get",meta:{operation:"combinationSubjects",variables:{combinationId:{value:parseInt((W=a.combination)!=null&&W.id?(L=a.combination)==null?void 0:L.id.toString():"0"),type:"Int",required:!0},page:{value:q,type:"Int",required:!0},key:{value:B,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{combination:["id","name","code"]},{subject:["id","name",{schoolType:["id","name"]}]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}});j(K.hasNext),p(K.page+1),m([...s,...K.results]),h(!1)};return t.useEffect(()=>{s.length=0,m([]),O(1)},[a.randKey,a.combination]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsx(E,{span:24,children:e.jsx(n,{layout:"vertical",form:M,onFinish:q=>{k(q.key),s.length=0,m([]),O(1,q.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search Adminstrator(s)...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(Ee,{spinning:r,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"60vh",overflowY:"auto"},children:e.jsx(Pe,{itemLayout:"horizontal",dataSource:s,renderItem:q=>{var B;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Pe.Item,{style:{margin:0,padding:0},actions:[e.jsx(X,{placement:"topLeft",title:"Removing "+q.subject.name+" to "+((B=a.combination)==null?void 0:B.name)+"?",onConfirm:()=>_(q.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{})})})],children:e.jsx(Pe.Item.Meta,{title:e.jsxs("a",{children:[q.subject.name,e.jsx(re,{color:"green",style:{marginLeft:10},children:q.subject.schoolType.name})]})})},"file-"+q.id)})}})}),G&&e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:10},children:e.jsx(N,{type:"primary",onClick:()=>{O(x,F)},children:"Load More"})})]})]})},bn=a=>{const[s,m]=t.useState(a.combination.isActive),[r]=n.useForm(),h=async x=>{const{data:p}=await A.custom({url:"",method:"post",meta:{operation:"updateCombination",variables:{combinationId:{value:x.combination_id,type:"Int",required:!0},name:{value:x.name,type:"String",required:!0},code:{value:x.code,type:"String",required:!0},description:{value:x.description,type:"String",required:!1},isActive:{value:s,type:"Boolean",required:!1}},fields:["success","message",{combination:["id","name","code","description",{subjects:["id","name"]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}});p.success?(c.success(p.message),r.resetFields(),a.onFinish(p.combination)):c.error(p.message)};return t.useEffect(()=>{r.setFieldsValue({name:a.combination.name,code:a.combination.code,is_active:a.combination.isActive})},[a.combination]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:r,onFinish:x=>{x.is_active=s,x.combination_id=parseInt(a.combination.id.toString()),h(x)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx(z,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(n.Item,{name:"is_active",children:e.jsx(pe,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},In=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(1),[F,k]=t.useState(0),[M,G]=t.useState(20),[j,_]=t.useState(""),[O,q]=t.useState(!1),[B,K]=t.useState(!0);le();const[W]=n.useForm();n.useForm();const V=!de.useBreakpoint().lg,[D,b]=t.useState(!1),[C,d]=t.useState(!1),[g,v]=t.useState(!1),u=Z=>{m(Z),d(!0)},f=Z=>{m(Z),v(!0)},I=Z=>{m(Z),b(!0)},S=async Z=>{h(r.map(T=>T.id.toString()===Z.id.toString()?Z:T)),b(!1)},i=async()=>{const{data:Z}=await A.custom({url:"",method:"post",meta:{operation:"syncCombinations",variables:{},fields:["success","message"]}});Z.success?(c.success(Z.message),o(x,"",20)):c.error(Z.message)},l=async Z=>{const{data:T}=await A.custom({url:"",method:"post",meta:{operation:"deleteRegion",variables:{id:{value:Z,type:"Int",required:!0}},fields:["success","message"]}});T.success?(c.success(T.message),h(r.filter(P=>P.id!==Z))):c.error(T.message)},R=()=>{c("Canceled")},y=[{title:"Name",dataIndex:"name",fixed:!0,render:(Z,T,P)=>e.jsx("span",{children:e.jsx("a",{children:T.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(Z,T,P)=>e.jsx("span",{children:e.jsx("a",{children:T.code})})},{title:"Subjects",dataIndex:"subjects",fixed:!0,render:(Z,T,P)=>{var ne;return e.jsxs("span",{children:[T.subjects.length===0&&e.jsx(re,{color:"red",children:"No Subjects Added"}),T.subjects.length>0&&((ne=T==null?void 0:T.subjects)==null?void 0:ne.map(ve=>e.jsx(re,{color:"green",children:ve.name},ve.id))),e.jsx(fe,{title:"Click to add more subjects",color:"green",children:e.jsx(N,{icon:e.jsx(Ce,{}),onClick:()=>u(T)})}),e.jsx(fe,{title:"Click to View Subjects",color:"green",children:e.jsx(N,{icon:e.jsx(at,{}),onClick:()=>f(T)})})]})}},{title:"Created",dataIndex:"created",render:(Z,T,P)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(T.created)})})})},{title:"Status",dataIndex:"isActive",render:(Z,T,P)=>e.jsx("a",{children:T!=null&&T.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(Z,T,P)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this member?",onConfirm:()=>l(T==null?void 0:T.id),onCancel:()=>R,okText:"Yes",cancelText:"No",disabled:!(T!=null&&T.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(T!=null&&T.canDelete),danger:!0})}),e.jsx(N,{disabled:!(T!=null&&T.canEdit),onClick:()=>I(T),icon:e.jsx(be,{}),danger:!0})]})}],o=async(Z,T="",P=20)=>{const{data:ne}=await A.custom({url:"",method:"get",meta:{operation:"combinations",variables:{page:{value:Z,type:"Int",required:!0},key:{value:T,type:"String",required:!1},pageSize:{value:P,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description",{subjects:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});p(ne.page),k(ne.total),q(ne.hasNext),h(ne.results),K(!1)},U=async Z=>{h(r.map(T=>parseInt(T.id.toString())===parseInt(Z.id.toString())?Z:T))},Y=()=>e.jsx(e.Fragment,{children:e.jsx(n,{layout:"vertical",form:W,onFinish:Z=>{p(1),r.length=0,o(1,Z.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),Q=()=>e.jsx(e.Fragment,{children:e.jsx(N,{size:"large",icon:e.jsx(Ae,{}),onClick:()=>i(),children:"Sync Combinations"})});return t.useEffect(()=>{o(x,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[V&&e.jsxs(e.Fragment,{children:[e.jsx(E,{span:24,style:{display:"flex",justifyContent:"flex-end"},children:Q()}),e.jsx(E,{span:24,children:Y()})]}),!V&&e.jsxs(e.Fragment,{children:[e.jsx(E,{span:12,children:Y()}),e.jsx(E,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:Q()})]})]}),e.jsx("div",{children:e.jsx(ue,{loading:B,columns:y,dataSource:r,scroll:{x:!0},pagination:{onChange:(Z,T)=>{G(T),o(Z,j,T)},total:F,pageSize:M,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(ie,{title:"Editting "+(s==null?void 0:s.name)+" Informations",width:V?"100vw":"40vw",open:D,onClose:Z=>b(Z),children:e.jsx(bn,{combination:s,onFinish:S})}),e.jsx(ie,{title:"Adding Subjects to "+(s==null?void 0:s.name),width:V?"100vw":"40vw",destroyOnClose:!0,open:C,onClose:Z=>d(Z),children:e.jsx(Sn,{combination:s,onAdd:U})}),e.jsx(ie,{title:(s==null?void 0:s.name)+" Subjects",width:V?"100vw":"40vw",open:g,onClose:Z=>v(Z),children:e.jsx(Cn,{combination:s,onAdd:U})})]})},An=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/combinations",children:"Home"})}),e.jsx(w.Item,{children:"Combinations"})]}),e.jsx(In,{height:80})]}),kn=()=>{const{data:a}=Me(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(xe,{children:e.jsx(An,{})})},{Option:Nn}=Se,{TextArea:Fn}=z,Tn=a=>Array.isArray(a)?a:a==null?void 0:a.fileList,qn=a=>{const[s,m]=t.useState([]),[r]=n.useForm(),h=async()=>{const{data:p}=await A.custom({url:"",method:"get",meta:{operation:"schoolTypes",variables:{showAll:{value:!0,type:"Boolean",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});m(p.results)},x=async p=>{const{data:F}=await A.custom({url:"",method:"post",meta:{operation:"createSubject",variables:{schoolTypeId:{value:p.school_type_id,type:"Int",required:!0},name:{value:p.name,type:"String",required:!0},description:{value:p.description,type:"String",required:!1},icon:{value:p.icon,type:"Upload",required:!1}},fields:["success","message",{subject:["id","name","description",{schoolType:["id","name","code"]},"icon","isActive","created","updated","canEdit","canDelete","canManage"]}]}});F.success?(c.success(F.message),a.onFinish(F.subject),r.resetFields()):c.error(F.message)};return t.useEffect(()=>{h()},[a.randKey]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:r,onFinish:p=>{x(p)},children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{label:"School Type",name:"school_type_id",rules:[{required:!0,type:"number",message:"Please choose School Type"}],children:e.jsx(Se,{size:"large",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onSearch:p=>{},filterOption:(p,F)=>F.children.toLowerCase().includes(p.toLowerCase()),dropdownStyle:{zIndex:9999},children:s.map((p,F)=>e.jsx(Nn,{value:parseInt(p.id.toString()),children:p.name}))})}),e.jsx(n.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description ..."}],children:e.jsx(Fn,{rows:4,placeholder:"Enter Description ..."})}),e.jsx(n.Item,{label:"Subject Icon",name:"icon",valuePropName:"fileList",getValueFromEvent:Tn,rules:[{required:!1,type:"array",message:"Please pick a Subject Icon"}],children:e.jsxs(Oe.Dragger,{name:"icon",accept:".jpg,.jpeg,.png,.gif,.svg",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(Ht,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},{Option:Pn}=Se,{TextArea:En}=z,Mn=a=>Array.isArray(a)?a:a==null?void 0:a.fileList,Dn=a=>{const[s,m]=t.useState([]);n.useForm();const r=async()=>{const{data:x}=await A.custom({url:"",method:"get",meta:{operation:"schoolTypes",variables:{showAll:{value:!0,type:"Boolean",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});m(x.results)},h=async x=>{const{data:p}=await A.custom({url:"",method:"post",meta:{operation:"updateSubject",variables:{subjectId:{value:parseInt(a.subject.id),type:"Int",required:!0},schoolTypeId:{value:x.school_type_id,type:"Int",required:!0},name:{value:x.name,type:"String",required:!0},description:{value:x.description,type:"String",required:!1},icon:{value:x.icon,type:"Upload",required:!1}},fields:["success","message",{subject:["id","name","description",{schoolType:["id","name","code"]},"icon","isActive","created","updated","canEdit","canDelete","canManage"]}]}});p.success?(c(p.message),a.onFinish(p.subject)):c.error(p.message)};return t.useEffect(()=>{r(),a.form.setFieldsValue({name:a.subject.name,school_type_id:parseInt(a.subject.schoolType.id),description:a.subject.description})},[a.form,a.subject]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:x=>{h(x)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{label:"School Type",name:"school_type_id",rules:[{required:!0,type:"number",message:"Please choose School Type"}],children:e.jsx(Se,{size:"large",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onSearch:x=>{},filterOption:(x,p)=>p.children.toLowerCase().includes(x.toLowerCase()),dropdownStyle:{zIndex:9999},children:s.map((x,p)=>e.jsx(Pn,{value:parseInt(x.id.toString()),children:x.name}))})}),e.jsx(n.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description ..."}],children:e.jsx(En,{rows:4,placeholder:"Enter Description ..."})}),e.jsx(n.Item,{label:"Subject Icon",name:"icon",valuePropName:"fileList",getValueFromEvent:Mn,rules:[{required:!1,type:"array",message:"Please pick a Subject Icon"}],children:e.jsxs(Oe.Dragger,{name:"icon",accept:".jpg,.jpeg,.png,.gif,.svg",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(Ht,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},zn=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(1),[F,k]=t.useState(0),[M,G]=t.useState(20),[j,_]=t.useState(""),[O,q]=t.useState(!1),[B,K]=t.useState(!0);le();const[W]=n.useForm(),[L]=n.useForm();de.useBreakpoint().lg;const[D,b]=t.useState(!1),[C,d]=t.useState(!1),g=y=>{m(y),b(!0)},v=async y=>{h(r.map(o=>o.id===y.id?y:o)),m(void 0),b(!1)},u=async y=>{h([y,...r])},f=async()=>{const{data:y}=await A.custom({url:"",method:"post",meta:{operation:"syncSchoolsTypes",variables:{},fields:["success","message"]}});y.success?(c.success(y.message),R(x,"",20)):c.error(y.message)},I=async y=>{const{data:o}=await A.custom({url:"",method:"post",meta:{operation:"deleteSubject",variables:{subjectId:{value:parseInt(y.toString()),type:"Int",required:!0}},fields:["success","message"]}});o.success?(c.success(o.message),h(r.filter(U=>U.id!==y))):c.error(o.message)},S=()=>{c("Canceled")},i=y=>y.split(" ").map(Q=>Q.charAt(0)).join("").toUpperCase(),l=[{title:"Name",dataIndex:"name",fixed:!0,render:(y,o,U)=>e.jsxs("span",{children:[o.icon&&e.jsxs(e.Fragment,{children:[e.jsx(He,{size:"large",src:o.icon})," "]}),!o.icon&&e.jsx(He,{size:"large",style:{backgroundColor:"#f56a00"},children:e.jsx(e.Fragment,{children:i(o.name)}),src:o.icon}),e.jsx("a",{style:{marginLeft:10},children:o.name})]})},{title:"School Type",dataIndex:"schooltype",fixed:!0,render:(y,o,U)=>e.jsx("span",{children:e.jsxs("a",{children:[o.schoolType.name,e.jsx(re,{color:"red",style:{marginLeft:5},children:o.schoolType.code})]})})},{title:"Created",dataIndex:"created",render:(y,o,U)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(o.created)})})})},{title:"Status",dataIndex:"isActive",render:(y,o,U)=>e.jsx("a",{children:o!=null&&o.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(y,o,U)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this member?",onConfirm:()=>I(o==null?void 0:o.id),onCancel:()=>S,okText:"Yes",cancelText:"No",disabled:!(o!=null&&o.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(o!=null&&o.canDelete)})}),e.jsx(N,{disabled:!(o!=null&&o.canEdit),onClick:()=>g(o),icon:e.jsx(be,{})})]})}],R=async(y,o="",U=20)=>{const{data:Y}=await A.custom({url:"",method:"get",meta:{operation:"subjects",variables:{page:{value:y,type:"Int",required:!0},key:{value:o,type:"String",required:!1},pageSize:{value:U,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description",{schoolType:["id","name","code"]},"icon","isActive","created","updated","canEdit","canDelete","canManage"]}]}});p(Y.page),k(Y.total),q(Y.hasNext),h(Y.results),K(!1)};return t.useEffect(()=>{R(x,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:12,children:e.jsx(n,{layout:"vertical",form:W,onFinish:y=>{p(1),r.length=0,R(1,y.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(E,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(N,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>d(!0),children:"Add Subject"}),e.jsx(N,{size:"large",icon:e.jsx(Ae,{}),onClick:()=>f(),children:"Sync Subjects"})]})]}),e.jsx("div",{children:e.jsx(ue,{loading:B,columns:l,dataSource:r,scroll:{x:!0},pagination:{onChange:(y,o)=>{G(o),R(y,j,o)},total:F,pageSize:M,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(ie,{title:"Edit Subject Informations",width:"30vw",open:D,onClose:y=>b(y),children:e.jsx(Dn,{form:L,subject:s,onFinish:v})}),e.jsx(ie,{title:"Creating a new Subject",width:"30vw",open:C,onClose:y=>d(y),children:e.jsx(qn,{onFinish:u,randKey:Math.random()})})]})},Ln=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/subjects",children:"Home"})}),e.jsx(w.Item,{children:"Subjects"})]}),e.jsx(zn,{height:80})]}),Rn=()=>e.jsx(xe,{children:e.jsx(Ln,{})}),Bn=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,p]=t.useState(0),[F,k]=t.useState(20),[M,G]=t.useState(""),[j,_]=t.useState(!1),[O,q]=t.useState(!0);le();const[B]=n.useForm();de.useBreakpoint().lg;const W=async()=>{await A.custom({url:"",method:"post",meta:{operation:"syncCombinations",variables:{},fields:["success","message"]}})},L=[{title:"Receipient Phone",dataIndex:"receipientPhone",fixed:!0,render:(D,b,C)=>e.jsxs("span",{children:[e.jsx("a",{children:b.receipientPhoneNumber}),e.jsx(re,{style:{marginLeft:5},children:b.carrier})]})},{title:"Channel",dataIndex:"channel",fixed:!0,render:(D,b,C)=>{var d,g;return e.jsx("span",{children:(g=(d=b==null?void 0:b.channelMessage)==null?void 0:d.channel)==null?void 0:g.name})}},{title:"Content",dataIndex:"content",fixed:!0,render:(D,b,C)=>e.jsx("span",{children:e.jsx("a",{children:b.messageContent})})},{title:"Status",dataIndex:"status",fixed:!0,render:(D,b,C)=>e.jsx("span",{children:e.jsx(re,{color:b.statusColor,children:b.status})})},{title:"Created",dataIndex:"created",render:(D,b,C)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(b.created)})})})},{title:"Status",dataIndex:"isActive",render:(D,b,C)=>e.jsx("a",{children:b!=null&&b.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(D,b,C)=>e.jsx("span",{})}],V=async(D,b="",C=20)=>{const{data:d}=await A.custom({url:"",method:"get",meta:{operation:"messagesDispatches",variables:{page:{value:D,type:"Int",required:!0},key:{value:b,type:"String",required:!1},pageSize:{value:C,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{channelMessage:["id","message","messageCount",{creator:["id","fullName","email","phone","firstName","middleName","lastName"]},{channel:["id","name","code"]}]},"receipientPhoneNumber","carrier","statusColor","sentAt","deliveredAt","failedAt","messageCount","messageContent","status","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(d.page),p(d.total),_(d.hasNext),m(d.results),q(!1)};return t.useEffect(()=>{V(r,"",50)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:12,children:e.jsx(n,{layout:"vertical",form:B,onFinish:D=>{h(1),s.length=0,V(1,D.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(Ae,{}),onClick:()=>W(),children:"Sync CDR"})})]}),e.jsx("div",{children:e.jsx(ue,{loading:O,columns:L,dataSource:s,scroll:{x:!0},pagination:{onChange:(D,b)=>{k(b),V(D,M,b)},total:x,pageSize:F,position:["bottomCenter"],showQuickJumper:!0}})})]})},On=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control",children:"Home"})}),e.jsx(w.Item,{children:"Sms Sent"})]}),e.jsx(Bn,{height:80})]}),_n=()=>e.jsx(xe,{children:e.jsx(On,{})}),{TextArea:Un}=z,Kn=a=>{const[s,m]=t.useState(a.syllabusType.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.syllabusType.name,description:a.syllabusType.description,isActive:a.syllabusType.isActive})},[a.form,a.syllabusType]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.syllabusType.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"description",label:"Description",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(Un,{rows:4,placeholder:"Please write Description ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Vn=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(1),[F,k]=t.useState(0),[M,G]=t.useState(20),[j,_]=t.useState(""),[O,q]=t.useState(!1),[B,K]=t.useState(!0);le();const[W]=n.useForm(),[L]=n.useForm();de.useBreakpoint().lg;const[D,b]=t.useState(!1),C=S=>{m(S),b(!0)},d=async S=>{const{data:i}=await A.custom({url:"",method:"post",meta:{operation:"updateSyllabusType",variables:{id:{value:S.id,type:"Int",required:!0},name:{value:S.name,type:"String",required:!0},description:{value:S.description,type:"String",required:!1},isActive:{value:S.isActive,type:"Boolean",required:!1}},fields:["success","message",{syllabusType:["id","name","description","created","updated","isActive","canDelete","canEdit","canManage"]}]}});i.success?(c.success(i.message),L.resetFields(),b(!1),h(r.map(l=>l.id===i.syllabusType.id?i.syllabusType:l))):c.error(i.message)},g=async S=>{const{data:i}=await A.custom({url:"",method:"post",meta:{operation:"deleteSyllabusType",variables:{id:{value:S,type:"Int",required:!0}},fields:["success","message"]}});i.success?(c.success(i.message),h(r.filter(l=>l.id!==S))):c.error(i.message)},v=async()=>{const{data:S}=await A.custom({url:"",method:"post",meta:{operation:"synchronizeDefaultSyllabusTypes",variables:{},fields:["success","message"]}});S.success?(c.success(S.message),I(1)):c.error(S.message)},u=()=>{c("Canceled")},f=[{title:"Name",dataIndex:"name",fixed:!0,render:(S,i,l)=>e.jsx("span",{children:e.jsx("a",{children:i.name})})},{title:"Description",dataIndex:"description",fixed:!0,render:(S,i,l)=>e.jsx("span",{children:e.jsx("a",{children:i.description})})},{title:"Created",dataIndex:"created",render:(S,i,l)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(i.created)})})})},{title:"Status",dataIndex:"isActive",render:(S,i,l)=>e.jsx("a",{children:i!=null&&i.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(S,i,l)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this Syllabus Type?",onConfirm:()=>g(i==null?void 0:i.id),onCancel:()=>u,okText:"Yes",cancelText:"No",disabled:!(i!=null&&i.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(i!=null&&i.canDelete)})}),e.jsx(N,{disabled:!(i!=null&&i.canEdit),icon:e.jsx(be,{}),onClick:()=>C(i)})]})}],I=async(S,i="",l=20)=>{const{data:R}=await A.custom({url:"",method:"get",meta:{operation:"syllabusTypes",variables:{page:{value:S,type:"Int",required:!0},key:{value:i,type:"String",required:!1},pageSize:{value:l,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}});p(R.page),k(R.total),q(R.hasNext),h(R.results),K(!1)};return t.useEffect(()=>{I(x)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:12,children:e.jsx(n,{layout:"vertical",form:W,onFinish:S=>{p(1),r.length=0,I(1,S.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to sync default syllabus types?",placement:"left",onConfirm:()=>{v()},onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Ae,{}),size:"large",children:"Sync Default Syllabus Types"})})})]}),e.jsx("div",{children:e.jsx(ue,{loading:B,columns:f,dataSource:r,scroll:{x:!0},pagination:{onChange:(S,i)=>{G(i),I(S,j,i)},total:F,pageSize:M,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(ie,{title:"Edit Syllabus Type Informations",width:"45vw",open:D,onClose:S=>b(S),children:e.jsx(Kn,{form:L,syllabusType:s,onFinish:d})})]})},wn=()=>(window.location.href.split("/").slice(3).join("/").split("?")[0],localStorage.getItem("sessionKey")||Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),""),Hn=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Syllabus Types"})]})}),e.jsx(Vn,{height:80})]}),Wn=()=>(t.useEffect(()=>{window.history.pushState({},"",wn())},[]),e.jsx(xe,{children:e.jsx(Hn,{})})),{TextArea:Yn}=z,Gn=a=>{const[s,m]=t.useState(a.curriculum.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.curriculum.name,description:a.curriculum.description,code:a.curriculum.code,isActive:a.curriculum.isActive})},[a.form,a.curriculum]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.curriculum.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(z,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx(z,{size:"large",disabled:!0,placeholder:"Enter Code ..."})}),e.jsx(n.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please write Description ..."}],children:e.jsx(Yn,{rows:4,placeholder:"Please write Description ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Jn=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(1),[F,k]=t.useState(0),[M,G]=t.useState(20),[j,_]=t.useState(""),[O,q]=t.useState(!1),[B,K]=t.useState(!0);le();const[W]=n.useForm(),[L]=n.useForm();de.useBreakpoint().lg;const[D,b]=t.useState(!1),C=S=>{m(S),b(!0)},d=async S=>{const{data:i}=await A.custom({url:"",method:"post",meta:{operation:"updateCurriculum",variables:{id:{value:S.id,type:"Int",required:!0},name:{value:S.name,type:"String",required:!0},code:{value:S.code,type:"String",required:!0},description:{value:S.description,type:"String",required:!1},isActive:{value:S.isActive,type:"Boolean",required:!1}},fields:["success","message",{curriculum:["id","name","description","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}});i.success?(c.success(i.message),L.resetFields(),b(!1),h(r.map(l=>l.id===i.curriculum.id?i.curriculum:l))):c.error(i.message)},g=async S=>{const{data:i}=await A.custom({url:"",method:"post",meta:{operation:"deleteCurriculum",variables:{id:{value:S,type:"Int",required:!0}},fields:["success","message"]}});i.success?(c.success(i.message),h(r.filter(l=>l.id!==S))):c.error(i.message)},v=async()=>{const{data:S}=await A.custom({url:"",method:"post",meta:{operation:"syncCurriculums",variables:{},fields:["success","message"]}});S.success?(c.success(S.message),I(1)):c.error(S.message)},u=()=>{c("Canceled")},f=[{title:"Name",dataIndex:"name",fixed:!0,render:(S,i,l)=>e.jsx("span",{children:e.jsx("a",{children:i.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(S,i,l)=>e.jsx("span",{children:e.jsx("a",{children:i.code})})},{title:"Description",dataIndex:"description",fixed:!0,render:(S,i,l)=>e.jsx("span",{children:e.jsx("a",{children:i.description})})},{title:"Created",dataIndex:"created",render:(S,i,l)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(i.created)})})})},{title:"Status",dataIndex:"isActive",render:(S,i,l)=>e.jsx("a",{children:i!=null&&i.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(S,i,l)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this Curriculum?",onConfirm:()=>g(i==null?void 0:i.id),onCancel:()=>u,okText:"Yes",cancelText:"No",disabled:!(i!=null&&i.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(i!=null&&i.canDelete)})}),e.jsx(N,{disabled:!(i!=null&&i.canEdit),icon:e.jsx(be,{}),onClick:()=>C(i)})]})}],I=async(S,i="",l=20)=>{const{data:R}=await A.custom({url:"",method:"get",meta:{operation:"curriculums",variables:{page:{value:S,type:"Int",required:!0},key:{value:i,type:"String",required:!1},pageSize:{value:l,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}});p(R.page),k(R.total),q(R.hasNext),h(R.results),K(!1)};return t.useEffect(()=>{I(x)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(E,{span:12,children:e.jsx(n,{layout:"vertical",form:W,onFinish:S=>{p(1),r.length=0,I(1,S.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(E,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to sync default Curriculums?",placement:"left",onConfirm:()=>{v()},onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Ae,{}),size:"large",children:"Sync Default Curriculums"})})})]}),e.jsx("div",{children:e.jsx(ue,{loading:B,columns:f,dataSource:r,scroll:{x:!0},pagination:{onChange:(S,i)=>{G(i),I(S,j,i)},total:F,pageSize:M,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(ie,{title:"Edit Curriculum Informations",width:"45vw",open:D,onClose:S=>b(S),children:e.jsx(Gn,{form:L,curriculum:s,onFinish:d})})]})},Qn=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Curriculums"})]})}),e.jsx(Jn,{height:80})]}),$n=()=>{const{data:a}=Me(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(xe,{children:e.jsx(Qn,{})})},Zn=a=>{const[s]=n.useForm(),m=async r=>{const{data:h}=await A.custom({url:"",method:"post",meta:{operation:"createBannedWord",variables:{word:{value:r.word,type:"String",required:!0}},fields:["success","message",{bannedWord:["id","word","created","updated","isActive","canDelete","canEdit","canManage"]}]}});h.success?(c.success(h.message),s.resetFields(),a.onFinish(h.bannedWord)):c.error(h.message)};return e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:s,onFinish:r=>{m(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"word",label:"Banned Word",rules:[{required:!0,type:"string",message:"Please input Word"}],children:e.jsx(z,{size:"large",placeholder:"Enter Banned Word ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Xn=a=>{var r;const[s]=n.useForm();t.useEffect(()=>{a.word&&s.setFieldsValue({word:a.word.word})},[a.word]);const m=async h=>{var p;const{data:x}=await A.custom({url:"",method:"post",meta:{operation:"updateBannedWord",variables:{id:{value:(p=a.word)==null?void 0:p.id,type:"Int",required:!0},word:{value:h.word,type:"String",required:!0}},fields:["success","message",{bannedWord:["id","word","created","updated","isActive","canDelete","canEdit","canManage"]}]}});x.success?(c.success(x.message),s.resetFields(),a.onFinish(x.bannedWord)):c.error(x.message)};return e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:s,onFinish:h=>{m(h)},requiredMark:!0,initialValues:{word:(r=a.word)==null?void 0:r.word},children:[e.jsx(n.Item,{name:"word",label:"Banned Word",rules:[{required:!0,type:"string",message:"Please input Word"}],children:e.jsx(z,{size:"large",placeholder:"Enter Banned Word ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},ei=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,p]=t.useState(1),[F,k]=t.useState(0),[M,G]=t.useState(20),[j,_]=t.useState(""),[O,q]=t.useState(!1),[B,K]=t.useState(!0);le();const[W]=n.useForm();n.useForm();const V=!de.useBreakpoint().lg,[D,b]=t.useState(!1),[C,d]=t.useState(!1),g=o=>{m(o),b(!0)},v=async o=>{h([o,...r])},u=async o=>{h(r.map(U=>U.id===o.id?o:U)),b(!1)},f=async o=>{const{data:U}=await A.custom({url:"",method:"post",meta:{operation:"deleteBannedWord",variables:{id:{value:o,type:"Int",required:!0}},fields:["success","message"]}});U.success?(c.success(U.message),h(r.filter(Y=>Y.id!==o))):c.error(U.message)},I=async()=>{const{data:o}=await A.custom({url:"",method:"post",meta:{operation:"syncBannedWords",variables:{},fields:["success","message"]}});o.success?(c.success(o.message),l(1)):c.error(o.message)},S=()=>{c("Canceled")},i=[{title:"Word",dataIndex:"word",fixed:!0,render:(o,U,Y)=>e.jsx("span",{children:e.jsx("a",{children:U.word})})},{title:"Created",dataIndex:"created",render:(o,U,Y)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ye,{date:new Date(U.created)})})})},{title:"Status",dataIndex:"isActive",render:(o,U,Y)=>e.jsx("a",{children:U!=null&&U.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(o,U,Y)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this Curriculum?",onConfirm:()=>f(U==null?void 0:U.id),onCancel:()=>S,okText:"Yes",cancelText:"No",disabled:!(U!=null&&U.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(me,{}),disabled:!(U!=null&&U.canDelete)})}),e.jsx(N,{disabled:!(U!=null&&U.canEdit),icon:e.jsx(be,{}),onClick:()=>g(U)})]})}],l=async(o,U="",Y=20)=>{const{data:Q}=await A.custom({url:"",method:"get",meta:{operation:"bannedWords",variables:{page:{value:o,type:"Int",required:!0},key:{value:U,type:"String",required:!1},pageSize:{value:Y,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","word","isActive","created","updated","canEdit","canDelete","canManage"]}]}});p(Q.page),k(Q.total),q(Q.hasNext),h(Q.results),K(!1)},R=()=>e.jsx(e.Fragment,{children:e.jsx(n,{layout:"vertical",form:W,onFinish:o=>{p(1),r.length=0,l(1,o.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),y=()=>e.jsxs(e.Fragment,{children:[e.jsx(N,{icon:e.jsx(Ce,{}),size:"large",onClick:()=>d(!0),children:"Add Word"}),e.jsx(X,{title:"Are you sure to sync default Banned Words?",placement:"left",onConfirm:()=>{I()},onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Ae,{}),size:"large",children:"Sync Default Banned Words"})})]});return t.useEffect(()=>{l(x)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[V&&e.jsxs(e.Fragment,{children:[e.jsx(E,{span:24,style:{display:"flex",justifyContent:"flex-end"},children:y()}),e.jsx(E,{span:24,children:R()})]}),!V&&e.jsxs(e.Fragment,{children:[e.jsx(E,{span:12,children:R()}),e.jsx(E,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:y()})]})]}),e.jsx("div",{children:e.jsx(ue,{loading:B,columns:i,dataSource:r,scroll:{x:!0},pagination:{onChange:(o,U)=>{G(U),l(o,j,U)},total:F,pageSize:M,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(ie,{title:"Edit Banned Word",width:"45vw",open:D,onClose:o=>b(o),children:e.jsx(Xn,{word:s,onFinish:u})}),e.jsx(ie,{title:"Create Banned Word",width:"35vw",open:C,onCancel:o=>d(o),children:e.jsx(Zn,{onFinish:v})})]})},ti=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(he,{to:"/control/analytics",children:"Home"})}),e.jsx(w.Item,{children:"Curriculums"})]})}),e.jsx(ei,{height:80})]}),si=()=>{const{data:a}=Me(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(xe,{children:e.jsx(ti,{})})},mi=a=>{const{page:s}=a;return s==="BannedWordsPage"?e.jsx(si,{}):s==="CurriculumsPage"?e.jsx($n,{}):s==="SyllabusTypesPage"?e.jsx(Wn,{}):s==="SmsSentPage"?e.jsx(_n,{}):s==="SubjectsPage"?e.jsx(Rn,{}):s==="CombinationsPage"?e.jsx(kn,{}):s==="TelecomCarriersPage"?e.jsx(vn,{}):s==="OrderPaymentsPage"?e.jsx(gn,{}):s==="OrdersPaymentsPage"?e.jsx(xn,{}):s==="ExaminationsTypesPage"?e.jsx(ys,{}):s==="ControlSchoolVenuesTypesPage"?e.jsx(Ss,{}):s==="SystemSettingsPage"?e.jsx(As,{}):s==="ControlAnalyticsPage"?e.jsx(Ps,{}):s==="ControlApplicationsPage"?e.jsx(Bs,{}):s==="ControlPermissionsPage"?e.jsx(Us,{}):s==="ControlRolesPage"?e.jsx(Ws,{}):s==="ControlDistrictsPage"?e.jsx(Qs,{}):s==="SchoolEducationLevelsPage"?e.jsx(ea,{}):s==="ProgrammesPage"?e.jsx(sa,{}):s==="ControlRegionsPage"?e.jsx(ra,{}):s==="SchoolsPage"?e.jsx(ba,{}):s==="SchoolsTypesPage"?e.jsx(Pa,{}):s==="GradesPage"?e.jsx(Da,{}):s==="SchoolOwnershipsPage"?e.jsx(Ba,{}):s==="ControlUsersPage"?e.jsx(Ya,{}):s==="ControlLoginReedemPage"?e.jsx(Qa,{}):s==="WardsPage"?e.jsx(Xa,{}):s==="PrivateTutorsPage"?e.jsx(an,{}):s==="PaymentPackagesPage"?e.jsx(cn,{}):s==="OrdersPage"?e.jsx(un,{}):e.jsx("div",{children:"Page not found ..."})};export{mi as ControlPages};
