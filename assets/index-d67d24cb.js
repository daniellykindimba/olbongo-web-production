import{r as t,g as re,m as se,a as ne,u as oe,aj as ae,C as F,E as ie,aw as le,fM as ce,b as H,c as I,fH as de,i as ge,n as ue}from"./index-60f2319e.js";import{P as me}from"./index-5d31df90.js";const fe=t.createContext({}),M=fe,pe=e=>{const{antCls:s,componentCls:n,iconCls:r,avatarBg:i,avatarColor:z,containerSize:p,containerSizeLG:l,containerSizeSM:v,textFontSize:c,textFontSizeLG:C,textFontSizeSM:R,borderRadius:g,borderRadiusLG:u,borderRadiusSM:y,lineWidth:O,lineType:$}=e,x=(b,S,E)=>({width:b,height:b,borderRadius:"50%",[`&${n}-square`]:{borderRadius:E},[`&${n}-icon`]:{fontSize:S,[`> ${r}`]:{margin:0}}});return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},ne(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:z,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:i,border:`${oe(O)} ${$} transparent`,"&-image":{background:"transparent"},[`${s}-image-img`]:{display:"block"}}),x(p,c,g)),{"&-lg":Object.assign({},x(l,C,u)),"&-sm":Object.assign({},x(v,R,y)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},ve=e=>{const{componentCls:s,groupBorderColor:n,groupOverlapping:r,groupSpace:i}=e;return{[`${s}-group`]:{display:"inline-flex",[`${s}`]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:r}},[`${s}-group-popover`]:{[`${s} + ${s}`]:{marginInlineStart:i}}}},Se=e=>{const{controlHeight:s,controlHeightLG:n,controlHeightSM:r,fontSize:i,fontSizeLG:z,fontSizeXL:p,fontSizeHeading3:l,marginXS:v,marginXXS:c,colorBorderBg:C}=e;return{containerSize:s,containerSizeLG:n,containerSizeSM:r,textFontSize:Math.round((z+p)/2),textFontSizeLG:l,textFontSizeSM:i,groupSpace:c,groupOverlapping:-v,groupBorderColor:C}},V=re("Avatar",e=>{const{colorTextLightSolid:s,colorTextPlaceholder:n}=e,r=se(e,{avatarBg:n,avatarColor:s});return[pe(r),ve(r)]},Se);var he=globalThis&&globalThis.__rest||function(e,s){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&s.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)s.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Ce=(e,s)=>{const[n,r]=t.useState(1),[i,z]=t.useState(!1),[p,l]=t.useState(!0),v=t.useRef(null),c=t.useRef(null),C=ae(s,v),{getPrefixCls:R,avatar:g}=t.useContext(F),u=t.useContext(M),y=()=>{if(!c.current||!v.current)return;const o=c.current.offsetWidth,a=v.current.offsetWidth;if(o!==0&&a!==0){const{gap:h=4}=e;h*2<a&&r(a-h*2<o?(a-h*2)/o:1)}};t.useEffect(()=>{z(!0)},[]),t.useEffect(()=>{l(!0),r(1)},[e.src]),t.useEffect(y,[e.gap]);const O=()=>{const{onError:o}=e;(o==null?void 0:o())!==!1&&l(!1)},{prefixCls:$,shape:x,size:b,src:S,srcSet:E,icon:m,className:N,rootClassName:j,alt:w,draggable:X,children:k,crossOrigin:q}=e,A=he(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),d=ie(o=>{var a,h;return(h=(a=b??(u==null?void 0:u.size))!==null&&a!==void 0?a:o)!==null&&h!==void 0?h:"default"}),D=Object.keys(typeof d=="object"?d||{}:{}).some(o=>["xs","sm","md","lg","xl","xxl"].includes(o)),T=le(D),J=t.useMemo(()=>{if(typeof d!="object")return{};const o=ce.find(h=>T[h]),a=d[o];return a?{width:a,height:a,fontSize:a&&(m||k)?a/2:18}:{}},[T,d]),f=R("avatar",$),G=H(f),[K,Q,U]=V(f,G),Y=I({[`${f}-lg`]:d==="large",[`${f}-sm`]:d==="small"}),L=t.isValidElement(S),Z=x||(u==null?void 0:u.shape)||"circle",ee=I(f,Y,g==null?void 0:g.className,`${f}-${Z}`,{[`${f}-image`]:L||S&&p,[`${f}-icon`]:!!m},U,G,N,j,Q),te=typeof d=="number"?{width:d,height:d,fontSize:m?d/2:18}:{};let P;if(typeof S=="string"&&p)P=t.createElement("img",{src:S,draggable:X,srcSet:E,onError:O,alt:w,crossOrigin:q});else if(L)P=S;else if(m)P=m;else if(i||n!==1){const o=`scale(${n})`,a={msTransform:o,WebkitTransform:o,transform:o};P=t.createElement(de,{onResize:y},t.createElement("span",{className:`${f}-string`,ref:c,style:Object.assign({},a)},k))}else P=t.createElement("span",{className:`${f}-string`,style:{opacity:0},ref:c},k);return delete A.onError,delete A.gap,K(t.createElement("span",Object.assign({},A,{style:Object.assign(Object.assign(Object.assign(Object.assign({},te),J),g==null?void 0:g.style),A.style),className:ee,ref:C}),P))},ye=t.forwardRef(Ce),W=ye,B=e=>{const{size:s,shape:n}=t.useContext(M),r=t.useMemo(()=>({size:e.size||s,shape:e.shape||n}),[e.size,e.shape,s,n]);return t.createElement(M.Provider,{value:r},e.children)},xe=e=>{const{getPrefixCls:s,direction:n}=t.useContext(F),{prefixCls:r,className:i,rootClassName:z,style:p,maxCount:l,maxStyle:v,size:c,shape:C,maxPopoverPlacement:R="top",maxPopoverTrigger:g="hover",children:u}=e,y=s("avatar",r),O=`${y}-group`,$=H(y),[x,b,S]=V(y,$),E=I(O,{[`${O}-rtl`]:n==="rtl"},S,$,i,z,b),m=ge(u).map((j,w)=>ue(j,{key:`avatar-key-${w}`})),N=m.length;if(l&&l<N){const j=m.slice(0,l),w=m.slice(l,N);return j.push(t.createElement(me,{key:"avatar-popover-key",content:w,trigger:g,placement:R,overlayClassName:`${O}-popover`,destroyTooltipOnHide:!0},t.createElement(W,{style:v},`+${N-l}`))),x(t.createElement(B,{shape:C,size:c},t.createElement("div",{className:E,style:p},j)))}return x(t.createElement(B,{shape:C,size:c},t.createElement("div",{className:E,style:p},m)))},be=xe,_=W;_.Group=be;const $e=_;export{$e as A};
