import{br as ys,bq as ps,bo as fs,ca as Ss,r as s,bn as bs,aR as Cs,aM as e,h as vs,bA as Is,bB as Fs,bE as ks,ck as xt,bT as xe,aH as ye,ay as B,aG as ne,di as Ms,aC as l,M as O,cF as ae,ae as N,ac as ie,c$ as Ge,aJ as le,cD as Ls,dj as As,bK as g,dk as Es,dl as Ns,dm as Ps,co as de,aI as he,aA as Fe,aD as H,bV as ce,$ as X,cy as Me,dn as Ds,dp as Ts,dq as zs,dr as qs,ds as Rs,S as V,dt as Ys,bJ as Q,du as Gs,dv as Ks,bP as Re,dw as _s,dx as Os,bQ as we,cw as gt,dy as Bs,dz as Qe,cY as dt,cJ as qt,aB as Ws,bI as re,dA as Us,ax as ke,cq as Ye,dB as Vs,cX as Rt,bU as Ee,b$ as Yt,dC as $s,dD as Hs,dE as Js,bL as et,dF as Qs,dG as Xs,dH as Gt,dI as Zs,dJ as ws,d8 as Kt,d9 as _t,dK as en,dL as tn,dM as sn,dN as nn,dO as rn,dP as ln,dQ as an,dR as on,dS as $e,dT as dn,dU as cn,dV as un,aw as w,c8 as fe,dW as Ot,dX as Bt,dY as hn,dZ as mn,d_ as xn,d$ as gn,e0 as jn,e1 as Wt,e2 as yn,e3 as pn,e4 as fn,e5 as Sn,e6 as bn,e7 as Cn,e8 as vn,e9 as Ut,ea as In,eb as Fn,ec as kn,ed as Mn,ee as Ln,cP as Be,ef as An,eg as En,eh as Nn,c4 as Xe,ei as Pn,ej as Dn,ek as Tn,d4 as Vt,d5 as $t,cL as Ht,bN as zn,d0 as qn,el as We,aE as Rn,em as Mt,R as Yn,d2 as Oe,en as Gn,eo as Kn,ep as _n,eq as Jt,er as Qt,es as On,et as Bn,eu as Wn,ev as Un,ew as Vn,ex as $n,ey as Hn,ez as Jn,eA as Qn,eB as Xn,eC as Zn,de as Lt,eD as At,eE as wn,eF as er,eG as tr,eH as sr,eI as nr,eJ as jt,eK as He,eL as yt,bS as rr,eM as lr,eN as ar,eO as ir,d6 as or,eP as dr,d7 as cr,eQ as ur,eR as hr,eS as mr}from"./index-2fc17c3b.js";import{S as xr}from"./school_switcher_component-1aec7ba8.js";import{I as tt}from"./index.es-014b7c98.js";import{P as te}from"./index-9c7bc008.js";import{L as oe}from"./index-ca65b019.js";import{D as Se}from"./index-ce61678e.js";import{G as pe}from"./index-7067581d.js";import{D as st}from"./index-72c63eba.js";import{S as gr}from"./index-5b522715.js";import{U as pt}from"./index-eae8dd11.js";import{C as Ze}from"./index-f023b25a.js";import{A as ft}from"./index-389401b2.js";import{I as _e}from"./index-8aa917b6.js";import{l as qe}from"./index-c57ac89c.js";import{S as jr}from"./schoool_examinations_component-c5c44e6e.js";import{A as Xt}from"./index-20752ece.js";import{a as Zt,P as yr,R as pr,S as fr}from"./school_settings_component-f7a8faa8.js";import{T as Sr}from"./index-df7607b8.js";import{I as br}from"./index-6af274c2.js";import{D as Ie}from"./index-d62905de.js";import{n as Cr}from"./index-034ceaaf.js";import{A as vr}from"./index-9b2d1d25.js";import{A as Ir}from"./Alert-26f02f9c.js";import"./index-651f824b.js";import"./ActionButton-e92b0465.js";import"./index-e8e9ceb4.js";import"./PickerPanel-be3ca01f.js";import"./localeData-6904e615.js";import"./RangePicker-7a53e9ae.js";import"./index-79fec706.js";import"./Upload-7e9943b4.js";import"./fade-7be4fa1b.js";import"./Skeleton-94302138.js";import"./InfoCircleFilled-c05f8e68.js";import"./InputNumber-5bec0d4b.js";import"./extends-538408d9.js";import"./useNotification-c6a88f9b.js";import"./DialogWrap-b6ee72d4.js";import"./MutateObserver-517aa91f.js";import"./index-812618d0.js";import"./Image-e05734f9.js";import"./index-9abc7cc3.js";import"./ckeditor-bbf99639.js";import"./transButton-b0336faf.js";import"./index-93153875.js";function Fr(t){return ys("MuiAlertTitle",t)}ps("MuiAlertTitle",["root"]);const kr=["className"],Mr=t=>{const{classes:n}=t;return Fs({root:["root"]},Fr,n)},Lr=fs(Ss,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(t,n)=>n.root})(({theme:t})=>({fontWeight:t.typography.fontWeightMedium,marginTop:-2})),Ar=s.forwardRef(function(n,c){const r=bs({props:n,name:"MuiAlertTitle"}),{className:a}=r,m=Cs(r,kr),d=r,u=Mr(d);return e.jsx(Lr,vs({gutterBottom:!0,component:"div",ownerState:d,ref:c,className:Is(u.root,a)},m))}),Er=Ar,Nr=ks(e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOutlined"),Pr=s.lazy(()=>xt(()=>import("./school_analytics-11c9a673.js"),["assets/school_analytics-11c9a673.js","assets/index-2fc17c3b.js","assets/index-5e5904d3.css","assets/analytic_card_component-90936126.js","assets/Skeleton-94302138.js","assets/index-0b5f66ee.js","assets/index-9abc7cc3.js","assets/transButton-b0336faf.js"]).then(t=>({default:t.SchoolAnalytics}))),Dr=s.lazy(()=>xt(()=>import("./students_registration_bar_chart-daa15b91.js"),["assets/students_registration_bar_chart-daa15b91.js","assets/index-2fc17c3b.js","assets/index-5e5904d3.css","assets/index-6c1fe69f.js","assets/index-f023b25a.js","assets/Skeleton-94302138.js"]).then(t=>({default:t.StudentsRegistrationLineChart}))),Tr=s.lazy(()=>xt(()=>import("./students_teachers_bar_chart-f900d35a.js"),["assets/students_teachers_bar_chart-f900d35a.js","assets/index-2fc17c3b.js","assets/index-5e5904d3.css","assets/index-6c1fe69f.js","assets/index-f023b25a.js","assets/Skeleton-94302138.js"]).then(t=>({default:t.StudentsTeachersBarChart}))),zr=()=>{const[t,n]=s.useState(!0),[c,r]=s.useState(),[a,m]=s.useState([]),[d,u]=s.useState([]),i=async()=>{n(!0),Ms().then(h=>{n(!1),h&&(u(h.operatingTypes.map(v=>v.schoolType.code)),m(h.operatingTypes),r(h.data))})};return s.useEffect(()=>{document.title=xe.system_name+": School Manager",i()},[]),!t&&!c?e.jsx(ye,{direction:"horizontal",style:{width:"100%",height:"88vh",justifyContent:"center"},children:e.jsxs(B,{children:[e.jsx(ne,{children:e.jsx("h2",{children:"Your are not Connected to any Operation School"})}),e.jsx(ne,{style:{display:"flex",justifyContent:"center"},children:e.jsx(xr,{randKey:Math.random()})})]})}):e.jsxs("div",{style:{marginTop:10},children:[e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Pr,{operatingTypes:a,operationalSchool:c,operatingTypesCodes:d})}),e.jsxs(ne,{children:[e.jsx(B,{span:12,children:e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Dr,{})})}),e.jsx(B,{span:12,children:e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Tr,{})})})]})]})},qr=t=>{const[n,c]=s.useState([]),[r,a]=s.useState(!0),[m,d]=s.useState(1),[u]=l.useForm(),[i,h]=s.useState(0),[v,F]=s.useState(0),[z,E]=s.useState(!0),I=async M=>{As(parseInt(M.toString())).then(L=>{L&&(L.success?(g.success(L.message),c(n.filter(f=>f.id.toString()!==M.toString())),t.onAdd(L.schoolEducationLevel)):g.error(L.message))})},A=async(M,L="")=>{Es(M,L).then(f=>{f&&(F(f.total),h(f.pages),d(f.page),E(f.hasNext),c([...n,...f.results]))}),a(!1)};return s.useEffect(()=>{A(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(l,{layout:"vertical",form:u,onFinish:M=>{n.length=0,c([]),A(1,M.key)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search Level(s)...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ne,{children:e.jsx(B,{span:24,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(te,{title:"Adding all education levels",description:"Are you sure to add all education levels?",overlayStyle:{zIndex:9999},onConfirm:()=>{n.forEach(M=>{I(M.id)})},disabled:n.length===0,children:e.jsx(N,{disabled:n.length===0,children:"Add All"})})})}),e.jsx(ie,{spinning:r,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(tt,{dataLength:v,next:()=>A(m),hasMore:z,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(ie,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(oe,{itemLayout:"horizontal",dataSource:n,renderItem:M=>e.jsxs("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:[e.jsx(oe.Item,{style:{marginBottom:1,padding:0},actions:[e.jsx(te,{title:"Are you sure to add this Education Level?",onConfirm:()=>I(M.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Ge,{}),onClick:()=>{}})})],children:e.jsx(oe.Item.Meta,{title:e.jsxs("a",{children:[M.name,e.jsx(le,{color:"green",children:M.schoolType.name})]}),description:e.jsx(e.Fragment,{})})},"file-"+M.id),e.jsx(Ls,{})]})})})})})]})},Rr=t=>{const[n,c]=s.useState([]),[r,a]=s.useState(1),[m,d]=s.useState(!1),[u,i]=s.useState(0),[h,v]=s.useState(!0),[F]=l.useForm(),z=async(I,A="",M=25)=>{v(!0),Ns(I,A,M,parseInt(t.educationLevel.id.toString())).then(L=>{L&&(i(L.total),a(L.page),d(L.hasNext),c([...n,...L.results]))}),v(!1)},E=async I=>{Ps(I,parseInt(t.educationLevel.id.toString())).then(A=>{A&&(A.success?(g.success(A.message),c(n.filter(M=>M.id!==I)),t.onAdd(A.schoolEducationLevelCombination)):g.error(A.message))})};return s.useEffect(()=>{z(1,"",25)},[t.randKey,t.educationLevel]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(l,{layout:"vertical",form:F,onFinish:I=>{z(1,I.key,25)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search Subject(s)...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ie,{spinning:h,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(tt,{dataLength:u,next:()=>z(r),hasMore:m,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(ie,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(oe,{itemLayout:"horizontal",dataSource:n,renderItem:I=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(oe.Item,{style:{margin:0,padding:0},actions:[e.jsx(te,{title:"Are you sure to add this Combination?",onConfirm:()=>E(I.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Ge,{}),onClick:()=>{}})})],children:e.jsx(oe.Item.Meta,{title:e.jsxs("a",{children:[I.name,e.jsx("span",{style:{marginLeft:10},children:I.subjects.map(A=>e.jsx(le,{color:"green",children:A.name}))})]}),description:e.jsx(e.Fragment,{})})},"combination-"+I.id)})})})})})]})},Yr=t=>{const[n,c]=s.useState([]),[r,a]=s.useState(!1),[m,d]=s.useState(0),[u,i]=s.useState(20),[h,v]=s.useState(""),[F,z]=s.useState(!0),[E]=l.useForm(),A=!pe.useBreakpoint().lg,M=async b=>{c([b,...n])},L=[{title:"Name",dataIndex:"name",fixed:!0,render:(b,j)=>e.jsx("span",{children:e.jsx("a",{children:j.combination.name})})},{title:"Subjects",dataIndex:"subjects",fixed:!0,render:(b,j)=>{var T,k;return e.jsx("span",{children:(k=(T=j==null?void 0:j.combination)==null?void 0:T.subjects)==null?void 0:k.map(Y=>e.jsx(le,{color:"green",children:Y.name}))})}},{title:"Date Created",dataIndex:"created",render:(b,j)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(j.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(b,j)=>e.jsx("a",{children:j!=null&&j.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(b,j)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Fe,{trigger:["click"],overlay:e.jsx(H,{children:e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(X,{title:"Delete Combination",children:e.jsx(te,{title:"Are you sure to delete this ",onConfirm:()=>f(j==null?void 0:j.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(j!=null&&j.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",href:"",rel:"noopener noreferrer",download:!0,children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:T=>T.preventDefault(),children:e.jsx(Me,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],f=async b=>{Ds(b).then(j=>{j&&(j.success?(g.success(j.message),c(n.filter(T=>T.id!==b))):g.error(j.message))})},q=async(b,j="",T=20)=>{var k;z(!0),Ts(b,j,T,parseInt(((k=t.schoolEducationLevel)==null?void 0:k.id.toString())??"0")).then(Y=>{Y&&(d(Y.total),c([...Y.results]))}),z(!1)};return s.useEffect(()=>{q(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:16,children:e.jsx(l,{layout:"vertical",form:E,onFinish:b=>{v(b.key),n.length=0,q(1,b.key)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:A?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(de,{}),onClick:()=>a(!0),children:"Add Combination"})})]}),e.jsx(he,{loading:F,columns:L,dataSource:n,pagination:{onChange:(b,j)=>{i(j),q(b,h,j)},total:m,pageSize:u,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:"Adding School Education Level Combinations",anchor:"right",width:"35vw",onClose:b=>a(b),visible:r,children:e.jsx(Rr,{randKey:Math.random(),onAdd:M,educationLevel:t.schoolEducationLevel})})]})},{TextArea:Gr}=O,Kr=t=>{const[n]=l.useForm(),c=async r=>{zs(r,t.educationLevel.id).then(a=>{a&&(a.success?(g.success(a.message),t.onAdd(a.schoolEducationLevelGroup),n.resetFields()):g.error(a.message))})};return e.jsx(e.Fragment,{children:e.jsxs(l,{layout:"vertical",form:n,onFinish:r=>{c(r)},requiredMark:!1,children:[e.jsx("span",{children:t.educationLevel.educationLevel.name}),e.jsx(l.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(Gr,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},_r=t=>{const[n,c]=s.useState([]),[r,a]=s.useState(!1),[m,d]=s.useState(0),[u,i]=s.useState(20),[h,v]=s.useState(""),[F,z]=s.useState(!0),[E]=l.useForm(),A=!pe.useBreakpoint().lg,M=async b=>{c([b,...n])},L=async b=>{Rs(b).then(j=>{j&&(j.success?(g.success(j.message),c(n.filter(T=>T.id!==b))):g.error(j.message))})},f=[{title:"Name",dataIndex:"name",fixed:!0,render:(b,j)=>e.jsx("span",{children:e.jsx("a",{children:j.name})})},{title:"Date Created",dataIndex:"created",render:(b,j)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(j.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(b,j)=>e.jsx("a",{children:j!=null&&j.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(b,j)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Fe,{trigger:["click"],overlayStyle:{zIndex:9999},overlay:e.jsx(H,{children:e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(X,{title:"Delete Group",children:e.jsx(te,{title:"Are you sure to delete this ",onConfirm:()=>L(j==null?void 0:j.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(j!=null&&j.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})})})}),children:e.jsx("a",{className:"ant-dropdown-link",onClick:T=>T.preventDefault(),children:e.jsx(Me,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],q=async(b,j="",T=20)=>{var k;z(!0),qs(b,j,T,parseInt(((k=t.schoolEducationLevel)==null?void 0:k.id.toString())??"0")).then(Y=>{Y&&(d(Y.total),c([...Y.results]))}),z(!1)};return s.useEffect(()=>{q(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:16,children:e.jsx(l,{layout:"vertical",form:E,onFinish:b=>{v(b.key),n.length=0,q(1,b.key)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:A?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(de,{}),onClick:()=>a(!0),children:"Add Group"})})]}),e.jsx(he,{loading:F,columns:f,dataSource:n,pagination:{onChange:(b,j)=>{i(j),q(b,h,j)},total:m,pageSize:u,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:"Adding School Education Level Group",anchor:"right",onClose:b=>a(b),open:r,width:"35vw",children:e.jsx(Kr,{randKey:Math.random(),onAdd:M,educationLevel:t.schoolEducationLevel})})]})},{Option:Or}=V,nt=t=>{const[n,c]=s.useState([]),[r,a]=s.useState(!1),[m,d]=s.useState(null),u=async i=>{a(!0),Ys(i,t.regionId??0).then(h=>{h&&c(h.results)}),a(!1)};return s.useEffect(()=>{t.regionId&&(d(null),u(""))},[t.regionId]),e.jsx(e.Fragment,{children:e.jsx(l.Item,{name:t.name??"districtId",label:t.label??"District",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"District")+"!"}],children:e.jsx(V,{loading:r,size:t.size??"large",value:m||t.districtId,disabled:!t.regionId,placeholder:"Please Choose "+(t.label??"District ...")+"!",style:{width:220},showSearch:!1,optionFilterProp:"children",filterOption:(i,h)=>h.children.toLowerCase().includes(i.toLowerCase()),onSearch:i=>{i.length>3?u(i):u("")},onChange:i=>{i&&(d(i),t.onChange(parseInt(i)))},dropdownStyle:{zIndex:9999},children:n.map(i=>e.jsx(Or,{value:parseInt(i.id.toString()),children:i.name}))})})})},{Option:Br}=V,wt=t=>{const[n,c]=s.useState([]),[r,a]=s.useState(!1),[m,d]=s.useState(null),u=async i=>{a(!0);const{data:h}=await Q.custom({url:"",method:"get",meta:{operation:"schoolEducationLevelGroups",variables:{key:{value:i,type:"String",required:!1},schoolEducationLevelId:{value:t.educationLevelId,type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});c(h.results),a(!1)};return s.useEffect(()=>{t.educationLevelId&&u("")},[t.educationLevelId]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:r,children:e.jsx(l.Item,{name:t.name??"groupId",label:t.label??"Education Level Group",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"Ward")+"!"}],children:e.jsx(V,{size:"large",value:m||t.groupId,disabled:!t.educationLevelId,placeholder:"Please Choose School Education Level Group ...",style:{width:450},showSearch:!1,optionFilterProp:"children",filterOption:(i,h)=>h.children.toLowerCase().includes(i.toLowerCase()),onSearch:i=>{i.length>3?u(i):u("")},onChange:i=>{i&&(d(i),t.onChange(parseInt(i)))},dropdownStyle:{zIndex:9999},children:n.map(i=>e.jsx(Br,{value:parseInt(i.id.toString()),children:i.name}))})})})})},{Option:Wr}=V,rt=t=>{const[n,c]=s.useState([]),[r,a]=s.useState(null),[m,d]=s.useState(!0),u=async i=>{d(!0),Gs(i).then(h=>{h&&c(h.results),d(!1)})};return s.useEffect(()=>{u("")},[]),e.jsx(e.Fragment,{children:e.jsx(l.Item,{name:t.name??"regionId",label:t.label??"Region",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"Region")+"!"}],children:e.jsx(V,{loading:m,placeholder:"Please Choose "+(t.label??"Region ...")+"!",style:{width:220},size:t.size??"large",showSearch:!0,value:r||t.regionId,onChange:i=>{a(i),t.onChange(parseInt(i))},optionFilterProp:"children",filterOption:(i,h)=>h.children.toLowerCase().includes(i.toLowerCase()),onSearch:i=>{i.length>3?u(i):u("")},dropdownStyle:{zIndex:9999},children:n.map(i=>e.jsx(Wr,{value:parseInt(i.id.toString()),children:i.name}))})})})},{Option:Ur}=V,lt=t=>{const[n,c]=s.useState([]),[r,a]=s.useState(!1),[m,d]=s.useState(null),u=async i=>{a(!0),Ks(i,t.districtId).then(h=>{h&&c(h.results)}),a(!1)};return s.useEffect(()=>{t.districtId&&(d(null),u(""))},[t.districtId]),e.jsx(e.Fragment,{children:e.jsx(l.Item,{name:t.name??"wardId",label:t.label??"Ward",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"Ward")+"!"}],children:e.jsx(V,{loading:r,size:t.size??"large",value:m||t.wardId,disabled:!t.districtId,placeholder:"Please Choose "+(t.label??"Ward ...")+"!",style:{width:220},showSearch:!1,optionFilterProp:"children",filterOption:(i,h)=>h.children.toLowerCase().includes(i.toLowerCase()),onSearch:i=>{i.length>3?u(i):u("")},onChange:i=>{d(i),t.onChange(parseInt(i))},dropdownStyle:{zIndex:9999},children:n.map(i=>e.jsx(Ur,{value:parseInt(i.id.toString()),children:i.name}))})})})},{Option:ct}=V,es=[];for(let t=2022;t<new Date().getFullYear()+5;t++)es.push(e.jsx(ct,{children:t.toString()},t));const Et=t=>{var Y,S;const[n,c]=s.useState(null),[r,a]=s.useState(null),[m,d]=s.useState(null),[u,i]=s.useState(null),[h,v]=s.useState(null),[F,z]=s.useState(null),[E,I]=s.useState(null),[A]=l.useForm(),M=async x=>{I(x.format("YYYY-MM-DD"))},L=async x=>{z(x)},f=async x=>{A.setFieldsValue({year:parseInt(x.toString())}),v(parseInt(x.toString()))},q=async x=>{i(x)},b=async x=>{d(x)},j=async x=>{c(x)},T=async x=>{a(x)},k=async x=>{var o;const{data:C}=await Q.custom({url:"",method:"post",meta:{operation:"createSchoolEducationLevelStudent",variables:{schoolEducationLevelStudentId:{value:parseInt(((o=x.schoolEducationLevelStudentId)==null?void 0:o.toString())??"0"),type:"Int",required:!1},schoolEducationLevelId:{value:parseInt(t.educationLevel.id.toString()),type:"Int",required:!0},firstName:{value:x.firstName,type:"String",required:!0},middleName:{value:x.middleName,type:"String",required:!0},lastName:{value:x.lastName,type:"String",required:!0},email:{value:x.email,type:"String",required:!1},phones:{value:x.phones,type:"[String]",required:!1},registrationNumber:{value:x.registrationNumber,type:"String",required:!0},year:{value:parseInt(x.year.toString()),type:"Int",required:!0},gender:{value:x.gender,type:"String",required:!0},groupId:{value:x.groupId,type:"Int",required:!1},regionId:{value:x.regionId,type:"Int",required:!1},districtId:{value:x.districtId,type:"Int",required:!1},wardId:{value:x.wardId,type:"Int",required:!1},dob:{value:x.dob,type:"String",required:!1}},fields:["success","message",{schoolEducationLevelStudent:_s}]}}).catch(()=>(g.error("Error occured while creating student"),{data:null})).then(p=>p);C&&(C.success?(g.success(C.message),t.onAdd(C.schoolEducationLevelStudent,t.editting),A.resetFields()):g.error(C.message))};return s.useEffect(()=>{var x,C,o,p,U,$,R,G,Z,me,ge,be,K,P,se,ee,ue,ze,Ne,Pe,Ae,De,D,y,J,je,Te,ve;i((C=(x=t.student)==null?void 0:x.group)==null?void 0:C.id),v((o=t.student)==null?void 0:o.year),z((p=t.student)==null?void 0:p.member.gender),c(($=(U=t.student)==null?void 0:U.region)==null?void 0:$.id),a((G=(R=t.student)==null?void 0:R.district)==null?void 0:G.id),d((me=(Z=t.student)==null?void 0:Z.ward)==null?void 0:me.id),A.setFieldsValue({firstName:(ge=t.student)==null?void 0:ge.member.firstName,middleName:(be=t.student)==null?void 0:be.member.middleName,lastName:(K=t.student)==null?void 0:K.member.lastName,email:(P=t.student)==null?void 0:P.member.email,registrationNumber:(se=t.student)==null?void 0:se.member.registrationNumber,year:(ee=t.student)==null?void 0:ee.year,gender:(ue=t.student)==null?void 0:ue.member.gender,groupId:(Ne=(ze=t.student)==null?void 0:ze.group)==null?void 0:Ne.id,regionId:(Ae=(Pe=t.student)==null?void 0:Pe.region)==null?void 0:Ae.id,districtId:(D=(De=t.student)==null?void 0:De.district)==null?void 0:D.id,wardId:(J=(y=t.student)==null?void 0:y.ward)==null?void 0:J.id}),(je=t.student)!=null&&je.member.dob&&(I(Re((Te=t.student)==null?void 0:Te.member.dob)),A.setFieldsValue({dob:Re((ve=t.student)==null?void 0:ve.member.dob)}))},[t.editting,t.student,t.educationLevel]),e.jsx(e.Fragment,{children:e.jsxs(l,{layout:"vertical",form:A,onFinish:x=>{var C;t.editting&&(x.schoolEducationLevelStudentId=(C=t.student)==null?void 0:C.id),x.groupId=parseInt(u),x.year=h,x.dob=E,x.regionId=parseInt(n),x.districtId=parseInt(r),x.wardId=parseInt(m),k(x)},requiredMark:!0,children:[e.jsx(l.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(l.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(l.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10},children:e.jsx(X,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(N,{type:"dashed",onClick:()=>g("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(O,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(l.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(O,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(l.Item,{name:"phones",label:"Phones Number",rules:[{required:!1,type:"string",message:"Please input Phones Number"}],children:e.jsx(O,{size:"large",placeholder:"Enter Phones Numbers ..."})}),e.jsxs(ye,{direction:"horizontal",children:[e.jsx(l.Item,{name:"dob",label:"Date of Birth",rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(st,{onChange:M,disabledDate:x=>x&&x>Re().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(l.Item,{name:"gender",label:"Gender",rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:F,children:e.jsxs(V,{placeholder:"Please Choose Gender ...",style:{width:220},onChange:L,dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(ct,{value:"female",children:"Female"}),e.jsx(ct,{value:"male",children:"Male"})]})}),e.jsx(l.Item,{name:"year",label:"Study Year",rules:[{required:!0,type:"integer",message:"Please choose Year"}],initialValue:h?parseInt(h.toString()):new Date().getFullYear(),children:e.jsx(V,{value:h?parseInt(h.toString()):new Date().getFullYear(),placeholder:"Please Choose Year ...",style:{width:220},onChange:f,dropdownStyle:{zIndex:9999},children:es})})]}),e.jsxs(ye,{direction:"horizontal",children:[e.jsx(rt,{onChange:j,regionId:n,name:"region",label:"Region",size:"middle",required:!0}),e.jsx(nt,{regionId:parseInt(n),districtId:r,onChange:T,name:"district",label:"District",size:"middle",required:!0}),e.jsx(lt,{districtId:parseInt(r),wardId:m,onChange:b,name:"ward",label:"Ward",size:"middle",required:!1})]}),e.jsx(wt,{educationLevelId:parseInt(t.educationLevel.id),groupId:(S=(Y=t.student)==null?void 0:Y.group)==null?void 0:S.id,onChange:q,name:"group",label:"School Education Level Group",size:"middle",required:!1}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},{Option:it}=V,ut=[];for(let t=2022;t<new Date().getFullYear()+5;t++)ut.push(t);const Vr=t=>{const[n,c]=s.useState(!1),[r,a]=s.useState(new Date().getFullYear()),[m,d]=s.useState(!0),[u]=l.useForm(),[i,h]=s.useState([]),v=E=>{d(E)},F=async(E,I="",A=20)=>{var L;const{data:M}=await Q.custom({url:"",method:"get",meta:{operation:"schoolEducationLevelsToMigrate",variables:{schoolEducationLevelId:{value:parseInt(((L=t.schoolEducationLevel)==null?void 0:L.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Os}]}}).catch(()=>(g.error("Something Went Wrong ..."),{data:null})).then(f=>f);M&&h(M.results)},z=async E=>{var A;c(!0);const{data:I}=await Q.custom({url:"",method:"post",meta:{operation:"studentsMigration",variables:{schoolEducationLevelId:{value:parseInt(((A=t.schoolEducationLevel)==null?void 0:A.id.toString())??"0"),type:"Int",required:!0},schoolEducationLevelToId:{value:E.school_education_level_to_id,type:"Int",required:!0},yearFrom:{value:E.yearFrom,type:"Int",required:!0},yearTo:{value:E.yearTo,type:"Int",required:!0},honor:{value:E.honor,type:"Boolean",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Something Went Wrong ..."),{data:null})).then(M=>M);I&&(I.success?(g.success(I.message),u.resetFields(),t.onFinish(E.yearTo)):g.error(I.message)),c(!1)};return s.useEffect(()=>{u.resetFields(),F(1,"",20)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(l,{layout:"vertical",form:u,onFinish:E=>{z(E)},requiredMark:!0,children:[e.jsx(l.Item,{name:"school_education_level_to_id",label:"School Education Level to Migrate From",rules:[{required:!0,type:"integer",message:"Please choose ..."}],children:e.jsx(V,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:"",onChange:E=>{},dropdownStyle:{zIndex:9999},children:i.map(E=>e.jsx(it,{value:parseInt(E.id.toString()),children:E.educationLevel.name},E.id.toString()))})}),e.jsx(l.Item,{name:"yearFrom",label:"Year to Migrate From",initialValue:r,rules:[{required:!0,type:"integer",message:"Please choose ..."}],children:e.jsx(V,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:new Date().getFullYear(),onChange:E=>a(E),dropdownStyle:{zIndex:9999},children:ut.map(E=>e.jsx(it,{value:E,children:E.toString()},E.toString()))})}),e.jsx(l.Item,{name:"yearTo",label:"Year to Migrate To",rules:[{required:!0,type:"integer",message:"Please choose ..."}],children:e.jsx(V,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:"",onChange:E=>{},dropdownStyle:{zIndex:9999},children:ut.filter(E=>E>r).map(E=>e.jsx(it,{value:E,children:E.toString()},E.toString()))})}),e.jsx(l.Item,{name:"honor",label:"Honor Education Examinations Results",initialValue:m,rules:[{required:!0,type:"boolean",message:"Please choose ..."}],children:e.jsx(gr,{defaultChecked:!0,onChange:v})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Option:ts}=V,ss=[e.jsx(ts,{value:"",children:"Please choose Academic Year"})];for(let t=2022;t<new Date().getFullYear()+5;t++)ss.push(e.jsx(ts,{value:t,children:t.toString()},t.toString()));const $r=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,Hr=t=>{const[n,c]=s.useState(!1),r=m=>{t.form.setFieldsValue({groupId:m})},a=async m=>{c(!0),Bs(m).then(d=>{d&&(d.success?(g(d.message),t.onFinish()):g.error(d.message))}),c(!1)};return s.useEffect(()=>{},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(l,{layout:"vertical",form:t.form,onFinish:m=>{m.school_education_level_id=t.educationLevel.id,a(m)},requiredMark:!0,children:[e.jsx(wt,{educationLevelId:parseInt(t.educationLevel.id),onChange:r,name:"groupId",label:"Education Level Group"}),e.jsx(l.Item,{name:"year",label:"Academic Year",rules:[{required:!0,type:"integer",message:"Please select academic year"}],children:e.jsx(V,{size:"large",style:{width:"100%"},placeholder:"Please Select Academic Year",onChange:m=>{},dropdownStyle:{zIndex:9999},children:ss})}),e.jsx(l.Item,{label:"Students Excel File",children:e.jsx(l.Item,{name:"files",valuePropName:"fileList",getValueFromEvent:$r,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload students excel file"}],children:e.jsxs(pt.Dragger,{name:"files",accept:".xls, .xlsx",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(we,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsxs("span",{children:["Download Uploading Excel Format Template",e.jsx("span",{style:{marginLeft:10},children:e.jsxs("a",{href:xe.student_registration_template_file,target:"_blank",children:[e.jsx(gt,{}),"Download"]})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Register"})})]})})})},{Option:ns}=V,ht=[e.jsx(ns,{value:null,children:"Please Select Year"},"default")];for(let t=2022;t<new Date().getFullYear()+5;t++)ht.push(e.jsx(ns,{value:t,children:t.toString()},t));const Jr=t=>{const[n,c]=s.useState(null),[r,a]=s.useState(null),m=async i=>{c(i)},d=async i=>{a(i)},u=async(i,h)=>{const{data:v}=await Q.custom({url:"",method:"post",meta:{operation:"studentsLoginAuthorize",variables:{authorizationType:{value:i,type:"Int",required:!0},schoolEducationLevelId:{value:parseInt(t.schoolEducationLevel.id),type:"Int",required:!0},year:{value:h,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Something Went Wrong ..."),{data:null})).then(F=>F);v&&(v.success?(g.success(v.message),t.onFinish()):g.error(v.message))};return s.useEffect(()=>{},[]),e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{fontSize:20},children:"Platform supports Two mode of Default Login Authorizations to Students"}),e.jsxs(Ze,{actions:[e.jsx(te,{title:e.jsx(e.Fragment,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Authorize Login?"}),e.jsx("span",{style:{height:10}}),e.jsx("span",{children:e.jsx(V,{value:n||null,placeholder:"Please Choose Year ...",style:{width:220},onChange:m,allowClear:!0,onClear:()=>c(null),dropdownStyle:{zIndex:9999},children:ht})})]})}),onConfirm:()=>u(1,n),onCancel:()=>{},okButtonProps:{disabled:n===null},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Qe,{}),children:"Authorize"})})],children:[e.jsxs("span",{style:{fontSize:18},children:["By Using Registration Number of Students as Default ",e.jsx("b",{children:"Username"})," ","and",e.jsx("b",{children:"Password"})]}),e.jsx("span",{style:{display:"block",color:"red"},children:"This action will be applicable only to those students with no Login Access to the Platform"})]}),e.jsxs(Ze,{actions:[e.jsx(te,{title:e.jsx(e.Fragment,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Authorize Login?"}),e.jsx("span",{style:{height:10}}),e.jsx("span",{children:e.jsx(V,{value:r||null,placeholder:"Please Choose Year ...",style:{width:220},onChange:d,allowClear:!0,onClear:()=>a(null),dropdownStyle:{zIndex:9999},children:ht})})]})}),onConfirm:()=>u(2,r),onCancel:()=>{},okButtonProps:{disabled:r===null},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Qe,{}),children:"Authorize"})})],style:{marginTop:50},children:[e.jsxs("span",{style:{fontSize:18},children:["By Using Email/Phone of Students as Default ",e.jsx("b",{children:"Username"}),", While Default",e.jsx("b",{children:"Password"})," will be Randomly Generated"]}),e.jsx("span",{style:{display:"block",color:"red"},children:"This action will be applicable only to those students with no Login Access to the Platform"})]})]})},{Option:Qr}=V,rs=[];for(let t=2022;t<new Date().getFullYear()+5;t++)rs.push(e.jsx(Qr,{children:t.toString()},t.toString()));const Xr=t=>{var Pe,Ae,De;const[n,c]=s.useState(),[r,a]=s.useState([]),[m,d]=s.useState(!1),[u,i]=s.useState(!1),[h,v]=s.useState(0),[F,z]=s.useState(20),[E,I]=s.useState(""),[A,M]=s.useState(!0),[L]=l.useForm(),[f]=l.useForm(),[q]=l.useForm(),[b,j]=s.useState(!1),[T,k]=s.useState(new Date().getFullYear()),[Y,S]=s.useState(!1),[x,C]=s.useState(!1),[o,p]=s.useState([]),[U,$]=s.useState(!1),R=async D=>{c(D),$(!0)},G=async()=>{C(!0)},Z=D=>{c(D),j(!0)},me=async(D,y=!1)=>{y?(a(r.map(J=>J.id===D.id?D:J)),j(!1)):a([D,...r])},ge=async(D,y)=>{Hs(D,y).then(J=>{J&&(J.success?(g.success(J.message),a(r.filter(je=>je.id!==D))):g.error(J.message))})},be=async D=>{Js(D).then(y=>{y&&(y.success?(g.success(y.message),a(r.filter(J=>J.id!==D))):g.error(y.message))})},K=async()=>{ue(1,"",20,T)},P=D=>{D.target.checked&&p(o.concat(parseInt(D.target.value))),D.target.checked||p(o.filter(y=>y!==parseInt(D.target.value)))},se=e.jsx(H,{items:[{key:"1",label:e.jsx(te,{title:"Are you sure to delete All Students?",onConfirm:()=>g("Deleting"),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsxs("a",{children:[e.jsx(ce,{color:"red",style:{color:"red"}}),e.jsx("span",{style:{marginLeft:3},children:"Delete All"})]})})},{key:"2",label:e.jsx(te,{title:"Are you sure to delete All Selected Students?",onConfirm:()=>g("Deleting Selected"),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsxs("a",{children:[e.jsx(ce,{color:"red",style:{color:"red"}}),e.jsx("span",{style:{marginLeft:3},children:"Delete Selected"})]})})}]}),ee=[{title:e.jsx(e.Fragment,{children:e.jsx(Fe,{overlay:se,overlayStyle:{zIndex:9999},children:e.jsx("a",{onClick:D=>D.preventDefault(),children:e.jsxs(ye,{children:["Action(s)",e.jsx(Us,{})]})})})}),dataIndex:"year",fixed:!0,render:(D,y,J)=>e.jsx("span",{children:e.jsx(ke,{onChange:P,value:y.id,defaultChecked:o.filter(je=>je===y.id).length>0})})},{title:"Year",dataIndex:"year",fixed:!0,render:(D,y,J)=>e.jsx("span",{children:y.year})},{title:"Reg#",dataIndex:"registrationNumber",fixed:!0,render:(D,y,J)=>e.jsx("span",{children:e.jsx("a",{children:y.member.registrationNumber})})},{title:"First Name",dataIndex:"firstName",fixed:!0,render:(D,y,J)=>e.jsx("span",{children:y.member.firstName})},{title:"Middle Name",dataIndex:"middleName",fixed:!0,render:(D,y,J)=>e.jsx("span",{children:y.member.middleName})},{title:"Last Name",dataIndex:"lastName",fixed:!0,render:(D,y,J)=>e.jsx("span",{children:y.member.lastName})},{title:"Group",dataIndex:"group",fixed:!0,render:(D,y,J)=>{var je;return e.jsx("span",{children:y.group?(je=y.group)==null?void 0:je.name:"No Group"})}},{title:"Gender",dataIndex:"gender",fixed:!0,render:(D,y,J)=>e.jsx("span",{children:y.member.gender})},{title:"Phone",dataIndex:"phone",fixed:!0,render:(D,y,J)=>e.jsxs(e.Fragment,{children:[y.member.phone&&e.jsx("span",{children:y.member.phone}),!y.member.phone&&e.jsxs(e.Fragment,{children:[e.jsx(le,{color:"red",children:"No Phone Number"}),e.jsx(X,{title:"View/Add Phone Number",color:"green",children:e.jsx(N,{icon:e.jsx(Ye,{}),onClick:()=>R(y)})})]})]})},{title:"Email",dataIndex:"email",fixed:!0,render:(D,y,J)=>e.jsxs(e.Fragment,{children:[y.member.email&&e.jsx("span",{children:y.member.email}),!y.member.email&&e.jsxs(e.Fragment,{children:[e.jsx(le,{color:"red",children:"No Email Address"}),e.jsx(X,{title:"View/Add Email Address",color:"green",children:e.jsx(N,{icon:e.jsx(Ye,{}),onClick:()=>R(y)})})]})]})},{title:"Authed",dataIndex:"isAuthed",render:(D,y,J)=>e.jsx("a",{children:y.member.user?e.jsx(e.Fragment,{children:y!=null&&y.member.isAuthed?e.jsx(le,{color:"green",children:"Authed"}):e.jsx(le,{color:"red",children:"Not Authed"})}):e.jsx(le,{color:"red",children:"Not Authed"})})},{title:"Status",dataIndex:"isActive",render:(D,y,J)=>e.jsx("a",{children:y!=null&&y.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(D,y,J)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Fe,{trigger:["click"],overlayStyle:{zIndex:9999},overlay:e.jsxs(H,{children:[y!=null&&y.isActive?e.jsx(H.Item,{icon:e.jsx(Vs,{}),children:e.jsx(X,{title:"Blocking Student",placement:"left",color:"red",children:e.jsx(te,{title:"Are you sure to Block Student ",onConfirm:()=>ge(y==null?void 0:y.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(y!=null&&y.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{type:"text",disabled:!(y!=null&&y.canManage),children:"Block"})})})}):e.jsx(H.Item,{icon:e.jsx(Rt,{}),children:e.jsx(X,{title:"Unblocking Student",placement:"left",color:"green",children:e.jsx(te,{title:"Are you sure to Unblock Student ",onConfirm:()=>ge(y==null?void 0:y.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(y!=null&&y.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{type:"text",disabled:!(y!=null&&y.canManage),children:"Unblock"})})})}),e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(X,{title:"Delete Student",placement:"left",children:e.jsx(te,{title:"Are you sure to delete Student ",onConfirm:()=>be(y==null?void 0:y.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(y!=null&&y.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})})}),e.jsx(H.Item,{icon:e.jsx(Ee,{}),disabled:!(y!=null&&y.canEdit),onClick:()=>Z(y),children:e.jsx(X,{title:"Edit Student Informations",placement:"left",children:e.jsx("a",{rel:"noopener noreferrer",children:"Edit"})})}),e.jsx(H.Item,{icon:e.jsx(Yt,{}),disabled:!(y!=null&&y.canManage),onClick:()=>g("Credentials"),children:e.jsx(X,{title:"Recreate Credentials",placement:"left",children:e.jsx("a",{rel:"noopener noreferrer",children:"Reset Credentials"})})})]}),children:e.jsx("a",{className:"ant-dropdown-link",onClick:je=>je.preventDefault(),children:e.jsx(Me,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],ue=async(D,y="",J=20,je=new Date().getFullYear())=>{var Te;$s(D,y,J,je,((Te=t.schoolEducationLevel)==null?void 0:Te.id)??0).then(ve=>{ve&&(v(ve.total),a([...ve.results]))}),M(!1)},ze=async()=>{ue(1,"",20,T),f.resetFields()},Ne=async D=>{k(D),q.setFieldsValue({year:D}),ue(1,"",20,D)};return s.useEffect(()=>{q.resetFields(),k(new Date().getFullYear()),ue(1,"",20,T)},[t.randKey,t.schoolEducationLevel]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsxs(B,{span:24,style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:[e.jsx(N,{size:"large",disabled:r.length===0,icon:e.jsx(Qe,{}),onClick:()=>i(!0),children:"Auth"}),e.jsx(N,{size:"large",icon:e.jsx(de,{}),onClick:()=>d(!0),children:"Add Student"}),e.jsx(N,{size:"large",icon:e.jsx(dt,{}),onClick:G,children:"From Another School"}),e.jsx(N,{size:"large",icon:e.jsx(dt,{}),onClick:G,children:"Students Migration From"}),e.jsx(N,{size:"large",icon:e.jsx(qt,{}),onClick:()=>S(!0),children:"Upload Student"})]}),e.jsx(B,{span:2,children:e.jsx(l,{layout:"vertical",form:q,onFinish:D=>{},children:e.jsx(l.Item,{name:"year",children:e.jsx(V,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:T,value:T,onChange:D=>{k(parseInt(D.toString())),ue(1,"",20,parseInt(D.toString()))},dropdownStyle:{zIndex:9999},children:rs})})})}),e.jsx(B,{span:12,children:e.jsx(l,{layout:"vertical",form:L,onFinish:D=>{I(D.key),r.length=0,ue(1,D.key,F,T)},children:e.jsxs(ne,{children:[e.jsx(B,{span:22,children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(B,{span:2,children:e.jsx(N,{icon:e.jsx(ae,{}),size:"large",onClick:()=>L.submit()})})]})})})]}),r.length===0&&e.jsx(Ws,{image:"/images/nodata.png",imageStyle:{height:180},description:e.jsx("span",{style:{fontSize:20},children:"There are not Students Registered, please you can use the registration menues above to Register Students"})}),r.length>0&&e.jsx(he,{loading:A,columns:ee,dataSource:r,pagination:{onChange:(D,y)=>{z(y),ue(D,E,y,T)},total:h,pageSize:F,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0,y:"calc(100vh - 298px)"}}),e.jsx(Se,{title:"Registering a Student for "+((Pe=t.schoolEducationLevel)==null?void 0:Pe.educationLevel.name),anchor:"right",onClose:D=>d(D),open:m,width:"80vw",children:e.jsx(Et,{editting:!1,randKey:Math.random(),onAdd:me,educationLevel:t.schoolEducationLevel})}),e.jsx(Se,{title:"Edit Student Informations",anchor:"right",onClose:D=>j(D),open:b,width:"70vw",children:e.jsx(Et,{editting:!0,student:n,randKey:Math.random(),onAdd:me,educationLevel:t.schoolEducationLevel})}),e.jsx(re,{title:`Upload Student for ${(Ae=t.schoolEducationLevel)==null?void 0:Ae.educationLevel.name}`,open:Y,onClose:D=>S(D),children:e.jsx(Hr,{educationLevel:t.schoolEducationLevel,randKey:Math.random(),onFinish:ze,form:f}),width:"50vw"}),e.jsx(re,{title:"Students Login Authorization",open:u,onClose:D=>i(D),children:e.jsx(Jr,{schoolEducationLevel:t.schoolEducationLevel,onFinish:K}),width:"50vw"}),e.jsx(re,{title:((De=t.schoolEducationLevel)==null?void 0:De.educationLevel.name)+" Students Migrations",open:x,onClose:D=>C(D),children:e.jsx(Vr,{randKey:Math.random(),schoolEducationLevel:t.schoolEducationLevel,onFinish:Ne}),width:"50vw"}),e.jsx(re,{title:(n==null?void 0:n.member.firstName)+" "+(n==null?void 0:n.member.middleName)+" "+(n==null?void 0:n.member.lastName)+" Contacts",open:U,onClose:D=>$(D),children:e.jsx(ft,{type:"info",description:"Contacts"}),width:"50vw"})]})},Zr=t=>{const[n,c]=s.useState([]),[r,a]=s.useState(!0),[m,d]=s.useState(1),[u]=l.useForm(),[i,h]=s.useState(0),[v,F]=s.useState(0),[z,E]=s.useState(!0),[I,A]=s.useState(2);et();const M=async(f,q)=>{Qs(f,q,I).then(b=>{b.success?(g.success(b.message),c(n.filter(j=>j.id.toString()!==f.toString())),t.onAdd(b.schoolEducationLevelSubject)):g.error(b.message)})},L=async(f,q="")=>{a(!0),Xs(f,q,t.schoolEducationLevel.id).then(b=>{b&&(F(b.total),h(b.pages),d(b.page),E(b.hasNext),c([...n,...b.results]))}),a(!1)};return s.useEffect(()=>{n.length=0,c([]),L(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(l,{layout:"vertical",form:u,onFinish:f=>{n.length=0,c([]),L(1,f.key)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search Subject(s)...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ie,{spinning:r,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(tt,{dataLength:v,next:()=>L(m),hasMore:z,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(ie,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(oe,{itemLayout:"horizontal",dataSource:n,renderItem:f=>{var q;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(oe.Item,{style:{margin:0,padding:0},actions:[e.jsx(te,{title:e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Are you sure you want to add"," ",e.jsx("b",{children:f.subject.name})," to"," ",e.jsx("b",{children:(q=t.schoolEducationLevel)==null?void 0:q.educationLevel.name}),"?"]}),e.jsx("div",{style:{marginTop:5},children:e.jsx(l,{layout:"vertical",children:e.jsx(l.Item,{label:"Max Number of Periods Per Week",children:e.jsx(_e,{size:"large",min:1,max:7,defaultValue:2,style:{width:"100%"},onChange:b=>{A(b)}})})})})]}),onConfirm:()=>M(f.id,t.schoolEducationLevel.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Ge,{}),onClick:()=>{}})})],children:e.jsx(oe.Item.Meta,{title:e.jsxs("a",{children:[f.subject.name,e.jsx("span",{style:{marginLeft:10},children:e.jsx(le,{color:"green",children:f.subject.schoolType.name})})]}),description:e.jsx(e.Fragment,{})})},"subject-"+f.id)})}})})})})]})},wr=t=>{const[n,c]=s.useState(!1),[r,a]=s.useState([]),[m,d]=s.useState([]),u=async()=>{const{data:h}=await Q.custom({url:"",method:"post",meta:{operation:"createAlternateSubjects",variables:{educationLevelSubjectId:{value:parseInt(t.subject.id),type:"Int",required:!0},choices:{value:m,type:"[Int]",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error occured while Creating Alternate subjects"),{data:null})).then(v=>v);h&&(h.success?(g.success(h.message),i(),d([]),t.onFinish()):g.error(h.message))},i=async()=>{const{data:h}=await Q.custom({url:"",method:"get",meta:{operation:"alternateSubjectsChoices",variables:{subjectId:{value:parseInt(t.subject.id),type:"Int",required:!0}},fields:["choices"]}}).catch(()=>(g.error("Error occured while Examinations Types"),{data:null})).then(v=>v);h&&a(h.choices)};return s.useEffect(()=>{i()},[t.randKey]),e.jsx(e.Fragment,{children:e.jsxs(ie,{spinning:n,children:[e.jsx(oe,{dataSource:r,renderItem:h=>e.jsx(oe.Item,{children:e.jsx(ne,{children:e.jsxs(B,{span:24,children:[h.disabled&&e.jsx(ke,{disabled:h.disabled,checked:h.disabled,children:e.jsx("span",{style:{marginLeft:5},children:h.name})}),!h.disabled&&e.jsx(ke,{onChange:v=>{v.target.checked?d([...m,h.value]):d(m.filter(F=>F!==h.value))},children:e.jsx("span",{style:{marginLeft:5},children:h.name})})]})})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",disabled:m.length===0,onClick:()=>u(),children:"Save"})})]})})},el=t=>{const[n,c]=s.useState([]),[r,a]=s.useState(0),[m,d]=s.useState(20),[u,i]=s.useState(""),[h,v]=s.useState(!0),[F]=l.useForm(),E=!pe.useBreakpoint().lg,I=async L=>{var f;ws(L,parseInt(((f=t.schoolEducationLevelSubject)==null?void 0:f.id.toString())??"0")).then(q=>{q&&(q.success?(g.success(q.message),c(n.filter(b=>b.id!==L)),t.onAdd(q.schoolEducationLevelSubjectTeacher)):g.error(q.message))})},A=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(L,f,q)=>e.jsx("span",{children:e.jsx("a",{children:f.user.fullName})})},{title:"",dataIndex:"action",render:(L,f,q)=>{var b;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Adding "+((b=t.schoolEducationLevelSubject)==null?void 0:b.schoolSubject.subject.name)+" Teacher",placement:"bottom",children:e.jsx(N,{icon:e.jsx(Gt,{}),onClick:()=>I(f==null?void 0:f.id),children:"Add"})})})}}],M=async(L,f="",q=20)=>{var b;v(!0),Zs(L,parseInt(((b=t.schoolEducationLevelSubject)==null?void 0:b.id.toString())??"0"),f,q).then(j=>{j&&(a(j.total),c([...j.results])),v(!1)})};return s.useEffect(()=>{M(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{style:{marginTop:10},children:e.jsx(B,{span:16,children:e.jsx(l,{layout:"vertical",form:F,onFinish:L=>{i(L.key),n.length=0,M(1,L.key)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(he,{loading:h,columns:A,dataSource:n,pagination:{onChange:(L,f)=>{d(f),M(L,u,f)},total:r,pageSize:m,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}})]})},tl=t=>{var j;const[n,c]=s.useState([]),[r,a]=s.useState(!1),[m,d]=s.useState(0),[u,i]=s.useState(20),[h,v]=s.useState(""),[F,z]=s.useState(!0),[E]=l.useForm(),A=!pe.useBreakpoint().lg,M=async T=>{c([T,...n])},L=async T=>{tn(T).then(k=>{k&&(k.success?(g.success(k.message),c(n.filter(Y=>Y.id!==T))):g.error(k.message))})},f=async(T,k)=>{sn(T,k).then(Y=>{Y&&(Y.success?(g.success(Y.message),c(n.map(S=>S.id===T?Y.schoolEducationLevelSubjectTeacher:S))):g.error(Y.message))})},q=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(T,k,Y)=>e.jsx("span",{children:e.jsx("a",{children:k.schoolMember.user.fullName})})},{title:"Date Created",dataIndex:"created",render:(T,k,Y)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(k.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(T,k,Y)=>e.jsx("a",{children:k!=null&&k.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(T,k,Y)=>{var S,x,C,o,p;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Fe,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(te,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Remove "}),e.jsx("span",{style:{fontWeight:"bolder"},children:k.schoolMember.user.fullName}),e.jsx("span",{children:" as "}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:3},children:(S=t.schoolEducationLevelSubject)==null?void 0:S.schoolSubject.subject.name}),e.jsx("span",{style:{marginLeft:3},children:"Teacher"})]}),onConfirm:()=>L(k==null?void 0:k.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(k!=null&&k.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Remove"})})}),k!=null&&k.isActive?e.jsx(H.Item,{icon:e.jsx(Kt,{}),children:e.jsx(te,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Lock "}),e.jsx("span",{style:{fontWeight:"bolder"},children:k.schoolMember.user.fullName}),e.jsx("span",{children:" as "}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:3},children:(x=t.schoolEducationLevelSubject)==null?void 0:x.schoolSubject.subject.name}),e.jsx("span",{style:{marginLeft:3},children:"Teacher"})]}),onConfirm:()=>f(k==null?void 0:k.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(k!=null&&k.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Block"})})}):e.jsx(H.Item,{icon:e.jsx(_t,{}),children:e.jsx(te,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Unblock "}),e.jsx("span",{style:{fontWeight:"bolder"},children:k.schoolMember.user.fullName}),e.jsx("span",{children:" as "}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:3},children:(p=(o=(C=t.schoolEducationLevelSubject)==null?void 0:C.schoolSubject)==null?void 0:o.subject)==null?void 0:p.name}),e.jsx("span",{style:{marginLeft:3},children:"Teacher"})]}),onConfirm:()=>f(k==null?void 0:k.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(k!=null&&k.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Unblock"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Me,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}}],b=async(T,k="",Y=20)=>{var S;z(!0),en(T,k,Y,((S=t.schoolEducationLevelSubject)==null?void 0:S.id)??0).then(x=>{x&&(d(x.total),c([...x.results]))}),z(!1)};return s.useEffect(()=>{b(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:16,children:e.jsx(l,{layout:"vertical",form:E,onFinish:T=>{v(T.key),n.length=0,b(1,T.key)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:A?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(de,{}),onClick:()=>a(!0),children:"Add Teacher"})})]}),e.jsx(he,{loading:F,columns:q,dataSource:n,pagination:{onChange:(T,k)=>{i(k),b(T,h,k)},total:m,pageSize:u,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}}),e.jsx(re,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{marginRight:3},children:"Adding"}),e.jsx("span",{style:{fontWeight:"bolder"},children:(j=t.schoolEducationLevelSubject)==null?void 0:j.schoolSubject.subject.name}),e.jsx("span",{style:{marginLeft:3},children:"Teachers"})]}),width:"40vw",open:r,onClose:T=>a(T),children:e.jsx(el,{schoolEducationLevelSubject:t.schoolEducationLevelSubject,randKey:Math.random(),onAdd:M})})]})},sl=t=>{var R,G,Z,me,ge,be;const[n,c]=s.useState(),[r,a]=s.useState([]),[m,d]=s.useState(!1),[u,i]=s.useState(!1),[h,v]=s.useState(0),[F,z]=s.useState(20),[E,I]=s.useState(""),[A,M]=s.useState(!0),[L]=l.useForm(),[f,q]=s.useState(!1),[b,j]=s.useState(0),k=!pe.useBreakpoint().lg,Y=async K=>{c(K),q(!0)},S=async K=>{c(K),i(!0)},x=async K=>{a([K,...r])},C=async K=>{an(K).then(P=>{P.success?(g.success(P.message),a(r.filter(se=>se.id!==K))):g.error(P.message)})},o=async(K,P)=>{on(K,P).then(se=>{se.success?(g.success(se.message),a(r.map(ee=>ee.id===K?se.schoolEducationLevelSubject:ee))):g.error(se.message)})},p=[{title:"Name",dataIndex:"name",fixed:!0,render:(K,P,se)=>{var ee;return e.jsxs("span",{children:[P.schoolSubject.subject.name,(P==null?void 0:P.combination)&&e.jsx(le,{style:{marginLeft:10},color:"red",children:(ee=P==null?void 0:P.combination)==null?void 0:ee.name})]})}},{title:"Subject Type",dataIndex:"subjecttype",fixed:!0,render:(K,P,se)=>e.jsx("span",{children:P.subjectTypeDisplay})},{title:"Teachers",dataIndex:"teachers",fixed:!0,render:(K,P,se)=>{var ee;return e.jsx("span",{children:e.jsx(X,{title:((ee=t.schoolEducationLevel)==null?void 0:ee.educationLevel.name)+"  "+P.schoolSubject.subject.name+" Teachers",children:e.jsx("a",{onClick:()=>S(P),children:P.totalTeachers})})})}},{title:"Max Periods/Week",dataIndex:"maxPeriodsPerWeek",render:(K,P,se)=>e.jsx(e.Fragment,{children:e.jsx(qe.Popconfirm,{title:"Ajust Max Periods",description:e.jsx(e.Fragment,{children:e.jsx(l,{layout:"vertical",children:e.jsx(l.Item,{label:"Max Number of Periods Per Week "+b,children:e.jsx(_e,{defaultValue:b,onChange:ee=>j(ee),style:{width:"100%"}})})})}),onConfirm:()=>{nn(P.id,b===0||b===null?P.maxPeriodsPerWeek:b).then(ee=>{ee&&ee.success&&a(r.map(ue=>ue.id===ee.schoolEducationLevelSubject.id?ee.schoolEducationLevelSubject:ue))})},onCancel:()=>{},okButtonProps:{disabled:b===0||b===null},onOpenChange:ee=>{j(ee?P.maxPeriodsPerWeek:0)},okText:"Update",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(le,{style:{cursor:"pointer"},children:P.maxPeriodsPerWeek})})})},{title:"Date Created",dataIndex:"created",render:(K,P,se)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(P.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(K,P,se)=>e.jsx(e.Fragment,{children:P!=null&&P.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(K,P,se)=>{var ee;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Fe,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(X,{title:"Delete Subject",children:e.jsx(qe.Popconfirm,{title:"Are you sure to delete this ",onConfirm:()=>C(P==null?void 0:P.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(P!=null&&P.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})})}),e.jsx(H.Item,{icon:e.jsx(Gt,{}),onClick:()=>S(P),children:e.jsx(X,{title:((ee=t.schoolEducationLevel)==null?void 0:ee.educationLevel.name)+"  "+P.schoolSubject.subject.name+" Teachers",children:e.jsx("a",{children:"Teachers"})})}),P!=null&&P.isActive?e.jsx(H.Item,{icon:e.jsx(Kt,{}),children:e.jsx(qe.Popconfirm,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Block "}),e.jsx("span",{style:{fontWeight:"bolder"},children:P.schoolSubject.subject.name})]}),onConfirm:()=>o(P==null?void 0:P.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(P!=null&&P.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Block"})})}):e.jsx(H.Item,{icon:e.jsx(_t,{}),children:e.jsx(qe.Popconfirm,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Unblock "}),e.jsx("span",{style:{fontWeight:"bolder"},children:P.schoolSubject.subject.name})]}),onConfirm:()=>o(P==null?void 0:P.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(P!=null&&P.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Block"})})}),e.jsx(H.Item,{icon:e.jsx(rn,{}),onClick:()=>Y(P),children:e.jsx(X,{title:"Create Alternate Subjects",children:e.jsx("a",{children:"Create Alternate Subjects"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:ue=>ue.preventDefault(),children:e.jsx(Me,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}}],U=async(K,P="",se=20)=>{var ee;ln(K,P,se,parseInt(((ee=t.schoolEducationLevel)==null?void 0:ee.id.toString())??"0")).then(ue=>{v(ue.total),a([...ue.results])}),M(!1)},$=async()=>{U(1,"",20)};return s.useEffect(()=>{U(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:16,children:e.jsx(l,{layout:"vertical",form:L,onFinish:K=>{I(K.key),r.length=0,U(1,K.key)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),["osc","pr"].some(K=>{var P,se;return K===((se=(P=t.schoolEducationLevel)==null?void 0:P.educationLevel)==null?void 0:se.schoolType.code.toLowerCase())})&&e.jsx(B,{span:k?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(de,{}),onClick:()=>d(!0),children:"Add Subject"})})]}),e.jsx(he,{loading:A,columns:p,dataSource:r,pagination:{onChange:(K,P)=>{z(P),U(K,E,P)},total:h,pageSize:F,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}}),e.jsx(Se,{title:"Adding "+((R=t.schoolEducationLevel)==null?void 0:R.educationLevel.name)+" Subjects",anchor:"right",open:m,onClose:K=>d(K),width:"35vw",children:e.jsx(Zr,{randKey:Math.random(),onAdd:x,schoolEducationLevel:t.schoolEducationLevel})}),e.jsx(Se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{marginRight:5},children:(Z=(G=n==null?void 0:n.schoolSubject)==null?void 0:G.subject)==null?void 0:Z.name}),((me=n==null?void 0:n.combination)==null?void 0:me.name)&&e.jsx(le,{style:{marginLeft:5},color:"red",children:(ge=n==null?void 0:n.combination)==null?void 0:ge.name}),"Teachers"]}),ancho:"right",width:"45vw",onClose:K=>i(K),open:u,children:e.jsx(tl,{schoolEducationLevelSubject:n,randKey:Math.random()})}),e.jsx(re,{title:"Alternate "+((be=n==null?void 0:n.schoolSubject)==null?void 0:be.subject.name)+" Subject Creator",width:"35vw",open:f,onclose:K=>q(K),children:e.jsx(wr,{subject:n,onFinish:$})})]})},nl=t=>{const[n,c]=s.useState(),[r,a]=s.useState([]),[m,d]=s.useState(!1),[u,i]=s.useState(0),[h,v]=s.useState(20),[F,z]=s.useState(""),[E,I]=s.useState(!0),[A]=l.useForm(),L=!pe.useBreakpoint().lg,[f,q]=s.useState(!1),[b,j]=s.useState(!1),[T,k]=s.useState(!1),[Y,S]=s.useState(!1),[x,C]=s.useState(1),o=K=>{C(K)},p=K=>{c(K),k(!0)},U=K=>{c(K),S(!0)},$=K=>{c(K),j(!0)},R=K=>{c(K),q(!0)},G=async K=>{a([K,...r])},Z=async K=>{cn(K).then(P=>{P&&(P.success?(g.success(P.message),a(r.filter(se=>se.id!==K))):g.error(P.message))})},me=async K=>{un(K,x).then(P=>{P&&(P.success?(g.success(P.message),a(r.map(se=>se.id===K?P.schoolEducationLevel:se))):g.error(P.message))})},ge=[{title:"Name",dataIndex:"name",fixed:!0,render:(K,P,se)=>e.jsx("span",{children:e.jsx("a",{children:P.educationLevel.name})})},{title:"School Type",dataIndex:"schoolType",fixed:!0,render:(K,P,se)=>e.jsx("span",{children:e.jsx(le,{color:"green",children:P.educationLevel.schoolType.name})})},{title:"Level Index",dataIndex:"levelIndex",fixed:!0,render:(K,P,se)=>e.jsx("span",{children:e.jsx(te,{disabled:!0,title:e.jsx(e.Fragment,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Update Education Level Index?"}),e.jsx("div",{style:{height:"10px"}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Education Level Index"}),e.jsx("span",{children:e.jsx(_e,{min:1,max:10,defaultValue:P.levelIndex,onChange:o,style:{width:"100%"}})})]})}),onVisibleChange:ee=>{ee||C(P.levelIndex)},onConfirm:()=>me(P.id),onCancel:()=>{},okText:"Update",cancelText:"No",okButtonProps:{disabled:x<1||x>10},overlayStyle:{zIndex:9999},children:e.jsx("a",{children:e.jsx(le,{color:"green",children:P.levelIndex})})})})},{title:"Date Created",dataIndex:"created",render:(K,P,se)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(P.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(K,P,se)=>e.jsx("a",{children:P!=null&&P.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(K,P,se)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Fe,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(te,{title:"Are you sure to delete this task?",onConfirm:()=>Z(P.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!P.canDelete,overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})}),["osc","pr"].some(ee=>ee===P.educationLevel.schoolType.code.toLowerCase())&&e.jsx(H.Item,{icon:e.jsx($e,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>R(P),children:"Groups"})}),["asc"].some(ee=>ee===P.educationLevel.schoolType.code)&&e.jsx(H.Item,{icon:e.jsx($e,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>$(P),children:"Combinations"})}),e.jsx(H.Item,{icon:e.jsx($e,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>U(P),children:"Students"})}),["osc","pr"].some(ee=>ee===P.educationLevel.schoolType.code.toLowerCase())&&e.jsx(H.Item,{icon:e.jsx(ce,{}),onClick:()=>p(P),children:e.jsx("a",{children:"Subjects"})}),["asc"].some(ee=>ee===P.educationLevel.schoolType.code.toLowerCase())&&e.jsx(H.Item,{icon:e.jsx(ce,{}),onClick:()=>p(P),children:e.jsx("a",{children:"Subjects"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:ee=>ee.preventDefault(),children:e.jsx(Me,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],be=async(K,P="",se=20)=>{I(!0),dn(K,P,se).then(ee=>{ee&&(i(ee.total),a([...ee.results]))}),I(!1)};return s.useEffect(()=>{be(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:L?24:20,children:e.jsx(l,{layout:"vertical",form:A,onFinish:K=>{z(K.key),r.length=0,be(1,K.key,h)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:L?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{icon:e.jsx(de,{}),size:"large",onClick:()=>d(!0),children:"Add Education Level"})})]}),e.jsx(he,{loading:E,columns:ge,dataSource:r,pagination:{onChange:(K,P)=>{v(P),be(K,F,P)},total:u,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:"Adding Education levels",onClose:K=>d(K),open:m,anchor:"right",width:"30vw",children:e.jsx(qr,{randKey:Math.random(),onAdd:G})}),e.jsx(re,{title:"Education Level Groups",open:f,onClose:K=>q(K),width:"50vw",children:e.jsx(_r,{schoolEducationLevel:n,height:55})}),e.jsx(re,{title:"Education Combinations",open:b,onClose:K=>j(K),width:"50vw",children:e.jsx(Yr,{schoolEducationLevel:n,height:55})}),e.jsx(Se,{title:`${n==null?void 0:n.educationLevel.name} Students`,open:Y,anchor:"right",width:"90vw",onClose:K=>S(K),children:e.jsx(Xr,{schoolEducationLevel:n,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.educationLevel.name)+" Subjects",open:T,width:"70vw",onClose:K=>k(K),children:e.jsx(sl,{schoolEducationLevel:n,height:55,randKey:Math.random()})})]})},rl=()=>(s.useEffect(()=>{document.title=xe.system_name+": Education Levels"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(w.Item,{children:"Education Levels"})]}),e.jsx(nl,{})]})),{TextArea:ll}=O,{Option:Nt}=V,al=t=>{const[n,c]=s.useState(!0),[r,a]=s.useState(!0),[m,d]=s.useState([]),[u,i]=s.useState([]),h=async(F,z="")=>{c(!0);const{data:E}=await Q.custom({url:"",method:"get",meta:{operation:"schoolDepartments",variables:{page:{value:F,type:"Int",required:!0},key:{value:z,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Ot}]}}).catch(()=>(g.error("Error occured while fetching departments"),{data:null})).then(I=>I);E&&d([...E.results]),c(!1)},v=async(F,z="")=>{a(!0);const{data:E}=await Q.custom({url:"",method:"get",meta:{operation:"systemProgrammes",variables:{page:{value:F,type:"Int",required:!0},key:{value:z,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Bt}]}}).catch(()=>(g.error("Error occured while fetching programmes"),{data:null})).then(I=>I);E&&i([...E.results]),a(!1)};return s.useEffect(()=>{h(1),v(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(l,{layout:"vertical",form:t.form,onFinish:F=>{t.onFinish(F)},requiredMark:!0,children:[e.jsx(l.Item,{name:"department_id",label:"Department",rules:[{required:!0,type:"string",message:"Please choose Department..."}],children:e.jsx(V,{showSearch:!0,placeholder:"Select a Department",optionFilterProp:"children",onChange:F=>{},onSearch:F=>{},filterOption:(F,z)=>z.children.toLowerCase().includes(F.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((F,z)=>e.jsx(Nt,{value:F.id,children:F.name}))})}),e.jsx(l.Item,{name:"programme_id",label:"Programme",rules:[{required:!0,type:"string",message:"Please choose Programme..."}],children:e.jsx(V,{showSearch:!0,placeholder:"Select a Programme",optionFilterProp:"children",onChange:F=>{},onSearch:F=>{},filterOption:(F,z)=>z.children.toLowerCase().includes(F.toLowerCase()),dropdownStyle:{zIndex:9999},children:u.map((F,z)=>e.jsx(Nt,{value:F.id,children:F.name}))})}),e.jsx(l.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(ll,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:il}=O,{Option:Pt}=V,ol=t=>{const[n,c]=s.useState(t.course.isActive),[r,a]=s.useState(!0),[m,d]=s.useState([]),[u,i]=s.useState([]),h=async(F,z="")=>{a(!0);const{data:E}=await Q.custom({url:"",method:"get",meta:{operation:"schoolDepartments",variables:{page:{value:F,type:"Int",required:!0},key:{value:z,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Ot}]}}).catch(()=>(g.error("Error occured while fetching departments"),{data:null})).then(I=>I);E&&d([...E.results]),a(!1)},v=async(F,z="")=>{const{data:E}=await Q.custom({url:"",method:"get",meta:{operation:"systemProgrammes",variables:{page:{value:F,type:"Int",required:!0},key:{value:z,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Bt}]}}).catch(()=>(g.error("Error occured while fetching programmes"),{data:null})).then(I=>I);E&&i([...E.results])};return s.useEffect(()=>{h(1),v(1),t.form.setFieldsValue({department_id:t.course.department.id,programme_id:t.course.programme.id,name:t.course.name,description:t.course.description,is_active:t.course.isActive})},[t.form,t.course,t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:r,children:e.jsxs(l,{layout:"vertical",form:t.form,onFinish:F=>{F.is_active=n,F.id=parseInt(t.course.id),t.onFinish(F)},requiredMark:!0,children:[e.jsx(l.Item,{name:"department_id",label:"Department",rules:[{required:!0,type:"string",message:"Please choose Department..."}],children:e.jsx(V,{showSearch:!0,placeholder:"Select a Department",optionFilterProp:"children",onChange:F=>{},onSearch:F=>{},filterOption:(F,z)=>z.children.toLowerCase().includes(F.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((F,z)=>e.jsx(Pt,{value:F.id,children:F.name}))})}),e.jsx(l.Item,{name:"programme_id",label:"Programme",rules:[{required:!0,type:"string",message:"Please choose Programme..."}],children:e.jsx(V,{showSearch:!0,placeholder:"Select a Programme",optionFilterProp:"children",onChange:F=>{},onSearch:F=>{},filterOption:(F,z)=>z.children.toLowerCase().includes(F.toLowerCase()),dropdownStyle:{zIndex:9999},children:u.map((F,z)=>e.jsx(Pt,{value:F.id,children:F.name}))})}),e.jsx(l.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(il,{rows:4,maxLength:6})}),e.jsx(l.Item,{name:"is_active",children:e.jsx(ke,{checked:n,onChange:()=>c(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},dl=t=>{const[n,c]=s.useState(),[r,a]=s.useState([]),[m,d]=s.useState(20),[u,i]=s.useState(""),[h,v]=s.useState(0),[F,z]=s.useState(!0),[E]=l.useForm(),[I]=l.useForm(),[A]=l.useForm(),L=!pe.useBreakpoint().lg,[f,q]=s.useState(!1),[b,j]=s.useState(!1),T=o=>{c(o),j(!0)},k=async o=>{hn(o).then(p=>{p&&(p.success?(g.success(p.message),I.resetFields(),q(!1),a([p.course,...r])):g.error(p.message))})},Y=async o=>{mn(o).then(p=>{p&&(p.success?(g.success(p.message),A.resetFields(),j(!1),a(r.map(U=>parseInt(U.id.toString())===parseInt(o.id.toString())?p.course:U))):g.error(p.message))})},S=async o=>{gn(o).then(p=>{p&&(p.success?(g.success(p.message),a(r.filter(U=>U.id!==o))):g.error(p.message))})},x=async(o,p="",U=20)=>{z(!0),xn(o,p,U).then($=>{$&&(v($.total),a([...$.results]))}),z(!1)};s.useEffect(()=>{x(1,"",20)},[]);const C=[{title:"Name",dataIndex:"name",fixed:!0,render:(o,p,U)=>e.jsx("span",{children:e.jsx("a",{children:p.name})})},{title:"Programme",dataIndex:"programme",fixed:!0,render:(o,p,U)=>e.jsx("span",{children:p.programme.name})},{title:"Department",dataIndex:"department",fixed:!0,render:(o,p,U)=>e.jsx("span",{children:p.department.name})},{title:"Created",dataIndex:"created",render:(o,p,U)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(p.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(o,p,U)=>e.jsx("a",{children:p!=null&&p.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(o,p,U)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(te,{title:"Are you sure to delete this Faculty?",onConfirm:()=>S(p==null?void 0:p.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(p!=null&&p.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(ce,{}),disabled:!(p!=null&&p.canDelete)})}),e.jsx(X,{title:"Edit "+(p==null?void 0:p.name)+" Faculty",color:"green",children:e.jsx(N,{icon:e.jsx(Ee,{}),disabled:!(p!=null&&p.canEdit),onClick:()=>T(p)})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:L?24:20,children:e.jsx(l,{layout:"vertical",form:E,onFinish:o=>{i(o.key),r.length=0,x(1,o.key)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:L?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Add New Course",children:e.jsx(N,{icon:e.jsx(de,{}),size:"large",onClick:()=>q(!0),children:"Add Course"})})})]}),e.jsx(he,{loading:F,columns:C,dataSource:r,pagination:{onChange:(o,p)=>{d(p),x(o,u,p)},total:h,pageSize:m,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{open:f,onClose:o=>q(o),width:"30vw",title:"Adding Course",children:e.jsx(al,{form:I,onFinish:k,randKey:Math.random()})}),e.jsx(re,{open:b,onClose:o=>j(o),width:"30vw",title:"Edit Course",children:e.jsx(ol,{course:n,onFinish:Y,form:A,randKey:Math.random()})})]})},cl=()=>(s.useEffect(()=>{document.title=xe.system_name+": Courses"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(w.Item,{children:"Courses"})]}),e.jsx(dl,{height:80,control:!1})]})),{TextArea:ul}=O,{Option:hl}=V,ml=t=>{const[n,c]=s.useState(!1),[r,a]=s.useState(!0),[m,d]=s.useState([]),u=async h=>{c(!0),jn(h).then(v=>{c(!1),v&&(v.success?(g.success(v.message),t.form.resetFields(),t.onFinish(v.department)):g.error(v.message))})},i=async(h,v="")=>{a(!0);const{data:F}=await Q.custom({url:"",method:"get",meta:{operation:"schoolFaculties",variables:{page:{value:h,type:"Int",required:!0},key:{value:v,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Wt}]}}).catch(()=>(g.error("Error occured while fetching faculties"),{data:null})).then(z=>z);F&&d([...F.results]),a(!1)};return s.useEffect(()=>{i(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:r,children:e.jsxs(l,{layout:"vertical",form:t.form,onFinish:h=>{u(h)},requiredMark:!0,children:[e.jsx(l.Item,{name:"faculty_id",label:"Faculty",rules:[{required:!0,type:"string",message:"Please choose Faculty..."}],children:e.jsx(V,{showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,v)=>v.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((h,v)=>e.jsx(hl,{value:h.id,children:h.name}))})}),e.jsx(l.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(ul,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Save"})})]})})})},{TextArea:xl}=O,{Option:gl}=V,jl=t=>{const[n,c]=s.useState(t.department.isActive),[r,a]=s.useState(!0),[m,d]=s.useState([]),u=async(i,h="")=>{a(!0);const{data:v}=await Q.custom({url:"",method:"get",meta:{operation:"schoolFaculties",variables:{page:{value:i,type:"Int",required:!0},key:{value:h,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Wt}]}}).catch(()=>(g.error("Error occured while fetching faculties"),{data:null})).then(F=>F);v&&d([...v.results]),a(!1)};return s.useEffect(()=>{u(1),t.form.setFieldsValue({faculty_id:t.department.faculty.id,name:t.department.name,description:t.department.description,is_active:t.department.isActive})},[t.form,t.department,t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:r,children:e.jsxs(l,{layout:"vertical",form:t.form,onFinish:i=>{i.is_active=n,i.id=parseInt(t.department.id),t.onFinish(i)},requiredMark:!0,children:[e.jsx(l.Item,{name:"faculty_id",label:"Faculty",rules:[{required:!0,type:"string",message:"Please choose Faculty..."}],children:e.jsx(V,{showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onChange:i=>{},onSearch:i=>{},filterOption:(i,h)=>h.children.toLowerCase().includes(i.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((i,h)=>e.jsx(gl,{value:i.id,children:i.name}))})}),e.jsx(l.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(xl,{rows:4,maxLength:6})}),e.jsx(l.Item,{name:"is_active",children:e.jsx(ke,{checked:n,onChange:()=>c(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},yl=t=>{const[n,c]=s.useState(),[r,a]=s.useState([]),[m,d]=s.useState(0),[u,i]=s.useState(20),[h,v]=s.useState(""),[F,z]=s.useState(!0),[E]=l.useForm(),[I]=l.useForm(),[A]=l.useForm();pe.useBreakpoint().lg;const[L,f]=s.useState(!1),[q,b]=s.useState(!1),j=C=>{c(C),b(!0)},T=async C=>{yn(C).then(o=>{o&&(o.success?(g.success(o.message),A.resetFields(),b(!1),a(r.map(p=>parseInt(p.id.toString())===parseInt(C.id.toString())?o.department:p))):g.error(o.message))})},k=async C=>{fn(C).then(o=>{o&&(o.success?(g.success(o.message),a(r.filter(p=>p.id!==C))):g.error(o.message))})},Y=()=>{g("Canceled")},S=async(C,o="",p=20)=>{z(!0),pn(C,o,p).then(U=>{U&&(d(U.total),a([...U.results]))}),z(!1)};s.useEffect(()=>{S(1,"",20)},[]);const x=[{title:"Name",dataIndex:"name",fixed:!0,render:(C,o,p)=>e.jsx("span",{children:e.jsx("a",{children:o.name})})},{title:"Faculty",dataIndex:"faculty",fixed:!0,render:(C,o,p)=>e.jsx("span",{children:o.faculty.name})},{title:"Created",dataIndex:"created",render:(C,o,p)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(o.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(C,o,p)=>e.jsx("a",{children:o!=null&&o.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(C,o,p)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(te,{title:"Are you sure to delete this Faculty?",onConfirm:()=>k(o==null?void 0:o.id),onCancel:()=>Y,okText:"Yes",cancelText:"No",disabled:!(o!=null&&o.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(ce,{}),disabled:!(o!=null&&o.canDelete)})}),e.jsx(X,{title:"Edit "+(o==null?void 0:o.name)+" Faculty",color:"green",children:e.jsx(N,{icon:e.jsx(Ee,{}),disabled:!(o!=null&&o.canEdit),onClick:()=>j(o)})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:12,children:e.jsx(l,{layout:"vertical",form:E,onFinish:C=>{v(C.key),r.length=0,S(1,C.key)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Add New Department",children:e.jsx(N,{icon:e.jsx(de,{}),size:"large",onClick:()=>f(!0),children:"Add Department"})})})]}),e.jsx(he,{loading:F,columns:x,dataSource:r,pagination:{onChange:(C,o)=>{i(o),S(C,h,o)},total:m,pageSize:u,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{open:L,onClose:C=>f(C),title:"Adding Department",width:"30vw",children:e.jsx(ml,{form:I,onFinish:C=>{a([C,...r]),f(!1)},randKey:Math.random()})}),e.jsx(re,{open:q,onClose:C=>b(C),title:"Edit Department",width:"30vw",children:e.jsx(jl,{department:n,form:A,onFinish:T,randKey:Math.random()})})]})},pl=()=>(s.useEffect(()=>{document.title=xe.system_name+": Departments"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(w.Item,{children:"Departments"})]}),e.jsx(yl,{height:77})]})),fl=()=>(s.useEffect(()=>{document.title=xe.system_name+": Examinations"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(w.Item,{children:"Examinations"})]}),e.jsx(jr,{})]})),{TextArea:Sl}=O,bl=t=>{const[n,c]=s.useState(!1),r=async a=>{c(!0),Sn(a).then(m=>{m&&(m.success?(g.success(m.message),t==null||t.form.resetFields(),t==null||t.onFinish(m.faculty)):g.error(m.message))}),c(!1)};return e.jsx(e.Fragment,{children:e.jsxs(l,{layout:"vertical",form:t.form,onFinish:a=>{r(a)},requiredMark:!0,children:[e.jsx(l.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Sl,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Save"})})]})})},{TextArea:Cl}=O,vl=t=>{const[n,c]=s.useState(!1),[r,a]=s.useState(t.faculty.isActive),m=async d=>{c(!0),bn(d).then(u=>{u&&(c(!1),u.success?(g.success(u.message),t.form.resetFields(),t.onFinish(u.faculty)):g.error(u.message))})};return s.useEffect(()=>{t.form.setFieldsValue({name:t.faculty.name,description:t.faculty.description,is_active:t.faculty.isActive})},[t.form,t.faculty]),e.jsx(e.Fragment,{children:e.jsxs(l,{layout:"vertical",form:t.form,onFinish:d=>{d.is_active=r,d.id=parseInt(t.faculty.id),m(d)},requiredMark:!0,children:[e.jsx(l.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Cl,{rows:4,maxLength:6})}),e.jsx(l.Item,{name:"is_active",children:e.jsx(ke,{checked:r,onChange:()=>a(!r),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Save"})})]})})},Il=t=>{const[n,c]=s.useState(),[r,a]=s.useState([]),[m,d]=s.useState(20),[u,i]=s.useState(""),[h,v]=s.useState(0),[F,z]=s.useState(!0),[E]=l.useForm(),[I]=l.useForm(),[A]=l.useForm(),L=!pe.useBreakpoint().lg,[f,q]=s.useState(!1),[b,j]=s.useState(!1),T=C=>{c(C),j(!0)},k=async C=>{vn(C).then(o=>{o&&(o.success?(g.success(o.message),a(r.filter(p=>p.id!==C))):g.error(o.message))})},Y=()=>{g("Canceled")},S=async(C,o="",p=20)=>{z(!0),Cn(C,o,p).then(U=>{U&&(v(U.total),a([...U.results]))}),z(!1)};s.useEffect(()=>{S(1,"",20)},[]);const x=[{title:"Name",dataIndex:"name",fixed:!0,render:(C,o,p)=>e.jsx("span",{children:e.jsx("a",{children:o.name})})},{title:"Created",dataIndex:"created",render:(C,o,p)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(o.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(C,o,p)=>e.jsx("a",{children:o!=null&&o.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(C,o,p)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(te,{title:"Are you sure to delete this Faculty?",onConfirm:()=>k(o==null?void 0:o.id),onCancel:()=>Y,okText:"Yes",cancelText:"No",disabled:!(o!=null&&o.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(ce,{}),disabled:!(o!=null&&o.canDelete)})}),e.jsx(X,{title:"Edit "+(o==null?void 0:o.name)+" Faculty",color:"green",children:e.jsx(N,{icon:e.jsx(Ee,{}),disabled:!(o!=null&&o.canEdit),onClick:()=>T(o)})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:L?24:20,children:e.jsx(l,{layout:"vertical",form:E,onFinish:C=>{i(C.key),r.length=0,S(1,C.key)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:L?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Add New Faculty",children:e.jsx(N,{icon:e.jsx(de,{}),size:"large",onClick:()=>q(!0),children:"Add Faculty"})})})]}),e.jsx(he,{loading:F,columns:x,dataSource:r,pagination:{onChange:(C,o)=>{d(o),S(C,u,o)},total:h,pageSize:m,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{open:f,onClose:C=>q(C),width:"30vw",title:"Adding Faculty",children:e.jsx(bl,{form:I,onFinish:C=>{a([C,...r]),q(!1)}})}),e.jsx(re,{open:b,onClose:C=>j(C),width:"30vw",title:"Edit Faculty",children:e.jsx(vl,{faculty:n,form:A,onFinish:C=>{a(r.map(o=>parseInt(o.id.toString())===parseInt(C.id.toString())?C:o)),j(!1)}})})]})},Fl=()=>(s.useEffect(()=>{document.title=xe.system_name+": Faculties"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(w.Item,{children:"Faculties"})]}),e.jsx(Il,{height:77})]})),{TextArea:kl}=O,Ml=t=>{const[n,c]=s.useState(!1),r=async a=>{const{data:m}=await Q.custom({url:"",method:"post",meta:{operation:"createSchoolFee",variables:{name:{value:a.name,type:"String",required:!0},description:{value:a.description,type:"String",required:!1}},fields:["success","message",{schoolFee:Ut}]}}).catch(()=>(g.error("Something Went Wrong ..."),{data:null})).then(d=>d);m&&(m.success?(g.success(m.message),t.onFinish(m.schoolFee)):g.error(m.message))};return s.useEffect(()=>{},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(l,{layout:"vertical",form:t.form,onFinish:a=>{r(a)},requiredMark:!0,children:[e.jsx(l.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(kl,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:Ll}=O,Al=t=>{var a,m;const[n,c]=s.useState(!1),r=async d=>{var i;const{data:u}=await Q.custom({url:"",method:"post",meta:{operation:"updateSchoolFee",variables:{schoolFeeId:{value:(i=t.schoolFee)==null?void 0:i.id,type:"Int",required:!0},name:{value:d.name,type:"String",required:!0},description:{value:d.description,type:"String",required:!1}},fields:["success","message",{schoolFee:Ut}]}}).catch(()=>(g.error("Something Went Wrong ..."),{data:null})).then(h=>h);u&&(u.success?(g.success(u.message),t.onFinish(u.schoolFee)):g.error(u.message)),c(!1)};return s.useEffect(()=>{var d,u;t.form.setFieldsValue({name:(d=t.schoolFee)==null?void 0:d.name,description:(u=t.schoolFee)==null?void 0:u.description})},[t.form,t.randKey,(a=t.schoolFee)==null?void 0:a.description,(m=t.schoolFee)==null?void 0:m.name]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(l,{layout:"vertical",form:t.form,onFinish:d=>{r(d)},requiredMark:!0,children:[e.jsx(l.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Ll,{rows:4,maxLength:6})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},El=()=>{const[t,n]=s.useState(),[c,r]=s.useState([]),[a,m]=s.useState(!1),[d,u]=s.useState(0),[i,h]=s.useState(20),[v,F]=s.useState(""),[z,E]=s.useState(!0),[I]=l.useForm(),[A]=l.useForm(),[M]=l.useForm(),f=!pe.useBreakpoint().lg,{push:q}=et(),[b,j]=s.useState(!1),T=o=>{j(!0),n(o)},k=[{title:"Name",dataIndex:"name",fixed:!0,render:(o,p)=>e.jsx("span",{children:e.jsx("a",{onClick:()=>q("/schoolmanager/school/fees/"+p.id+"/education/levels/"),children:p.name})})},{title:"Date Created",dataIndex:"created",render:(o,p)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(p.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(o,p)=>e.jsx("a",{children:p!=null&&p.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(o,p)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Fe,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx($e,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>q("/schoolmanager/school/fees/"+p.id+"/education/levels/"),children:"Education Levels Fees"})}),e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(te,{title:"Are you sure to delete this School Fee?",disabled:!(p!=null&&p.canDelete),onConfirm:()=>Y(p.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(H.Item,{icon:e.jsx(Ee,{}),disabled:!p.canEdit,onClick:()=>T(p),children:e.jsx("a",{rel:"noopener noreferrer",children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Me,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],Y=async o=>{In(o).then(p=>{p&&(p.success?(g.success(p.message),r(c.filter(U=>U.id!==o))):g.error(p.message))})},S=async(o,p="",U=20)=>{E(!0),Fn(o,p,U).then($=>{$&&(u($.total),r([...$.results]))}),E(!1)},x=async o=>{r(c.map(p=>p.id===(t==null?void 0:t.id)?o:p)),M.resetFields(),j(!1)},C=async o=>{r([o,...c]),A.resetFields(),m(!1)};return s.useEffect(()=>{S(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:f?24:20,children:e.jsx(l,{layout:"vertical",form:I,onFinish:o=>{F(o.key),c.length=0,S(1,o.key,i)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:f?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{icon:e.jsx(de,{}),size:"large",onClick:()=>m(!0),children:"Create Fee"})})]}),e.jsx(he,{loading:z,columns:k,dataSource:c,pagination:{onChange:(o,p)=>{h(p),S(o,v,p)},total:d,pageSize:i,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Creating School Fee",open:a,width:"40vw",onClose:o=>m(o),children:e.jsx(Ml,{form:A,onFinish:C})}),e.jsx(re,{title:"Editting "+(t==null?void 0:t.name),width:"40vw",open:b,onClose:o=>j(o),children:e.jsx(Al,{form:M,schoolFee:t,randKey:Math.random(),onFinish:x})})]})},Nl=()=>(s.useEffect(()=>{document.title=xe.system_name+": School Fees"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(w.Item,{children:"School Fees"})]}),e.jsx(El,{})]})),{Option:Pl}=V,ls=[];for(let t=2022;t<new Date().getFullYear()+5;t++)ls.push(e.jsx(Pl,{children:t.toString()},t));const Dl=t=>{const[n,c]=s.useState([]),[r,a]=s.useState(0),[m,d]=s.useState(20),[u,i]=s.useState(""),[h,v]=s.useState(!0),[F]=l.useForm(),E=!pe.useBreakpoint().lg,[I,A]=s.useState(new Date().getFullYear()),[M,L]=s.useState(0),f=k=>{A(k)},q=k=>{L(k)},b=[{title:"Name",dataIndex:"name",fixed:!0,render:(k,Y,S)=>e.jsx("span",{children:e.jsx("a",{children:Y.educationLevel.name})})},{title:"",dataIndex:"action",render:(k,Y,S)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(te,{arrowPointAtCenter:!1,title:e.jsx(e.Fragment,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsxs("span",{children:["Are you sure to Add ",Y.educationLevel.name,' ?"']}),e.jsx("div",{style:{height:15}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Fee Amount"}),e.jsx("span",{children:e.jsx(_e,{size:"large",min:0,defaultValue:0,value:M,onChange:q,style:{width:"100%"}})}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Academic Year"}),e.jsx("span",{children:e.jsx(V,{size:"large",value:I?parseInt(I.toString()):new Date().getFullYear(),placeholder:"Please Choose Year ...",style:{width:"100%"},onChange:f,dropdownStyle:{zIndex:9999},children:ls})})]})}),onConfirm:()=>j(Y.id),onCancel:()=>{},onVisibleChange:x=>{x&&(A(new Date().getFullYear()),L(0))},okText:"Yes",cancelText:"No",okButtonProps:{disabled:M<=0},overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),children:"Add"})})})}],j=async k=>{var Y;kn(k,I,M,((Y=t.fee)==null?void 0:Y.id)??0).then(S=>{S&&(S.success?(g.success(S.message),c(n.filter(x=>x.id!==k)),t.onFinish(S.schoolEducationLevelFee)):g.error(S.message))})},T=async(k,Y="",S=20)=>{var x;v(!0),Mn(k,Y,S,((x=t.fee)==null?void 0:x.id)??0).then(C=>{C&&(a(C.total),c([...C.results]))}),v(!1)};return s.useEffect(()=>{T(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{style:{marginTop:10},children:e.jsx(B,{span:E?24:20,children:e.jsx(l,{layout:"vertical",form:F,onFinish:k=>{i(k.key),n.length=0,T(1,k.key,m)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(he,{loading:h,columns:b,dataSource:n,pagination:{onChange:(k,Y)=>{d(Y),T(k,u,Y)},total:r,pageSize:m,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})]})},Tl=t=>{var a,m;const[n,c]=s.useState(!1),r=async d=>{var i;const{data:u}=await Q.custom({url:"",method:"post",meta:{operation:"updateSchoolEducationLevelFee",variables:{schoolEducationLevelFeeId:{value:(i=t.schoolEducationLevelFee)==null?void 0:i.id,type:"Int",required:!0},amount:{value:d.amount,type:"Float",required:!0},vatIncluded:{value:d.vatIncluded,type:"Boolean",required:!0}},fields:["success","message",{schoolEducationLevelFee:Ln}]}}).catch(()=>(g.error("Something Went Wrong ..."),{data:null})).then(h=>h);u&&(u.success?(g.success(u.message),t.onFinish(u.schoolEducationLevelFee)):g.error(u.message)),c(!1)};return s.useEffect(()=>{var d,u;t.form.setFieldsValue({amount:(d=t.schoolEducationLevelFee)==null?void 0:d.amount,vatIncluded:(u=t.schoolEducationLevelFee)==null?void 0:u.vatIncluded})},[t.form,t.randKey,(a=t.schoolEducationLevelFee)==null?void 0:a.amount,(m=t.schoolEducationLevelFee)==null?void 0:m.vatIncluded]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(l,{layout:"vertical",form:t.form,onFinish:d=>{r(d)},requiredMark:!0,children:[e.jsx(l.Item,{name:"amount",label:"Amount",rules:[{required:!0,type:"number",min:0,message:"Please input Fee Amount"}],children:e.jsx(_e,{min:0,defaultValue:0,style:{width:"100%"}})}),e.jsx(l.Item,{name:"vatIncluded",valuePropName:"checked",initialValue:!0,rules:[{required:!0,type:"boolean",message:"Please check"}],children:e.jsx(ke,{children:"VAT Included"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},zl=t=>{var p,U;const[n,c]=s.useState(),[r,a]=s.useState([]),[m,d]=s.useState(!1),[u,i]=s.useState(0),[h,v]=s.useState(20),[F,z]=s.useState(""),[E,I]=s.useState(!0),[A]=l.useForm(),[M]=l.useForm(),[L]=l.useForm(),[f,q]=s.useState(!1),j=!pe.useBreakpoint().lg,T=Be(),k=async $=>{c($),q(!0)},Y=[{title:"Education Level",dataIndex:"educationLevel",fixed:!0,render:($,R)=>{var G,Z;return e.jsx("span",{children:e.jsx("a",{children:(Z=(G=R.schoolEducationLevel)==null?void 0:G.educationLevel)==null?void 0:Z.name})})}},{title:"Year",dataIndex:"year",fixed:!0,render:($,R)=>e.jsx("span",{children:R.year})},{title:"Amount",dataIndex:"amount",fixed:!0,render:($,R)=>e.jsx("span",{children:parseFloat(R.amount).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")})},{title:"VAT Included",dataIndex:"vatIncluded",fixed:!0,render:($,R)=>e.jsx("span",{children:R.vatIncluded?"Yes":"No"})},{title:"Date Created",dataIndex:"created",render:($,R)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(R.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:($,R)=>e.jsx("a",{children:R!=null&&R.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:($,R)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Fe,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(te,{title:"Are you sure to delete this School Fee?",disabled:!(R!=null&&R.canDelete),onConfirm:()=>S(R.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(H.Item,{icon:e.jsx(Ee,{}),disabled:!R.canEdit,onClick:()=>k(R),children:e.jsx("a",{rel:"noopener noreferrer",children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:G=>G.preventDefault(),children:e.jsx(Me,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],S=async $=>{An($).then(R=>{R&&(R.success?(g.success(R.message),a(r.filter(G=>G.id!==$))):g.error(R.message))})},x=async($,R="",G=20)=>{I(!0),En($,R,G,T.schoolFeeId).then(Z=>{Z&&(i(Z.total),a([...Z.results]))}),I(!1)},C=async $=>{a(r.map(R=>R.id===(n==null?void 0:n.id)?$:R)),M.resetFields(),q(!1)},o=async $=>{a([$,...r]),L.resetFields(),d(!1)};return s.useEffect(()=>{x(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:j?24:12,children:e.jsx(l,{layout:"vertical",form:A,onFinish:$=>{z($.key),r.length=0,x(1,$.key,h)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:j?24:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{icon:e.jsx(de,{}),size:"large",disabled:!t.canAdd,onClick:()=>d(!0),children:"Add Education Level Fee"})})]}),e.jsx(he,{loading:E,columns:Y,dataSource:r,pagination:{onChange:($,R)=>{v(R),x($,F,R)},total:u,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Adding"}),e.jsx("span",{style:{marginLeft:5,color:"green"},children:(p=t.fee)==null?void 0:p.name}),e.jsx("span",{style:{marginLeft:5},children:"Education Levels Fees"})]}),width:"30vw",anchor:"right",onClose:()=>d(!1),open:m,children:e.jsx(Dl,{fee:t.fee,randKey:Math.random(),onFinish:o})}),e.jsx(re,{title:((U=t.fee)==null?void 0:U.name)+" "+(n==null?void 0:n.schoolEducationLevel.educationLevel.name)+" Fee Editting",width:"40vw",open:f,onClose:$=>q($),children:e.jsx(Tl,{form:M,schoolEducationLevelFee:n,randKey:Math.random(),onFinish:C})})]})},ql=()=>{const[t,n]=s.useState(!1),[c,r]=s.useState(),a=Be(),m=async()=>{n(!0);const{data:d}=await Q.custom({url:"",method:"get",meta:{operation:"schoolFee",variables:{id:{value:parseInt(a.schoolFeeId),type:"Int",required:!0}},fields:["id",{school:["id","name"]},"name","description","isActive","created","updated","canEdit","canDelete","canManage"]}}).catch(u=>(g.error("Something Went Wrong ..."),{data:null})).then(u=>u);d&&r(d),n(!1)};return s.useEffect(()=>{document.title=xe.system_name+": Education Levels",m()},[a.schoolFeeId]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(w.Item,{children:e.jsxs(fe,{to:"/schoolmanager/school/fees",children:["School Fees",c&&e.jsx("span",{style:{marginLeft:10},children:e.jsx(le,{color:"green",children:c?c.name:"School Fee"})}),e.jsx(ie,{spinning:t})]})}),e.jsx(w.Item,{children:"Education Levels Fees"})]}),e.jsx(zl,{fee:c,canAdd:(c==null?void 0:c.canManage)&&!t})]})},Rl=t=>{const[n,c]=s.useState([]),[r,a]=s.useState([]),[m,d]=s.useState(!1),u=async(i,h="")=>{const{data:v}=await Q.custom({url:"",method:"get",meta:{operation:"schoolRolesMemberNotAssigned",variables:{page:{value:i,type:"Int",required:!0},key:{value:h,type:"String",required:!1},memberId:{value:parseInt(t.member.id),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Nn}]}}).catch(()=>(g.error("Error occured while fetching roles"),{data:null})).then(F=>F);v&&c([...v.results])};return s.useEffect(()=>{u(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("h3",{children:[e.jsx("b",{children:"Full Name"}),": ",t.member.firstName," ",t.member.middleName," ",t.member.lastName]}),e.jsxs("h3",{children:[e.jsx("b",{children:"Email Address"}),": ",t.member.email]})]}),e.jsxs(l,{layout:"vertical",form:t.form,onFinish:i=>{i.roles=r.map(h=>parseInt(h.role.id.toString())),i.is_adminstrator=m,t.onFinish(i,t.member)},requiredMark:!0,children:[e.jsx(l.Item,{name:"registration_number",label:"Registration Number",rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(O,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(l.Item,{name:"is_adminstrator",rules:[{required:!1,type:"boolean"}],children:e.jsx(ke,{onChange:()=>{d(!m)},defaultChecked:m,children:"Is Adminstrator"})}),e.jsx(oe,{bordered:!0,dataSource:n,renderItem:i=>e.jsx(oe.Item,{children:e.jsx(ke,{onChange:h=>{h.target.checked?a([...r,i]):a(r.filter(v=>v.role.id!==i.role.id))},defaultChecked:r.includes(i),children:i.role.name})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:45},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},Yl=t=>{const[n,c]=s.useState(),[r,a]=s.useState([]),[m,d]=s.useState(!0),[u,i]=s.useState(1),[h,v]=s.useState(""),[F]=l.useForm(),[z]=l.useForm(),[E,I]=s.useState(0),[A,M]=s.useState(!1),L=b=>{M(!0),c(b)},f=async(b,j)=>{Pn(b,j).then(T=>{T&&(T.success?(g.success(T.message),a(r.filter(k=>k.id.toString()!==j.id.toString())),t.onAdd(T.member),M(!1),c(void 0),F.resetFields()):g.error(T.message))})},q=async(b,j="")=>{d(!0),Dn(b,j).then(T=>{T&&(I(T.pages),i(T.page),a([...T.results]))}),d(!1)};return s.useEffect(()=>{q(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(l,{layout:"vertical",form:z,onFinish:b=>{v(b.key),q(1,b.key)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search Member(s)...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(ie,{spinning:m,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"79vh",minHeight:"79vh",overflowY:"auto"},children:e.jsx(oe,{itemLayout:"horizontal",dataSource:r,renderItem:b=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(oe.Item,{style:{margin:0,padding:0},actions:[e.jsx(N,{icon:e.jsx(Ge,{}),onClick:()=>L(b)})],children:e.jsx(oe.Item.Meta,{avatar:e.jsx(Xt,{src:b.pic}),title:e.jsx("a",{children:b.fullName}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:b.email})})})},"file-"+b.id)})})}),e.jsx(Xe,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:2},children:e.jsx(Zt,{count:E,color:"secondary",onChange:(b,j)=>{q(j,h)}})})]}),e.jsx(re,{title:"Member Informations",open:A,onClose:b=>M(b),width:"60vw",children:e.jsx(Rl,{member:n,form:F,onFinish:f,randKey:Math.random()})})]})},{Option:as}=V,is=[e.jsx(as,{value:null,children:"Please Select Year"},"default")];for(let t=2022;t<new Date().getFullYear()+5;t++)is.push(e.jsx(as,{value:t,children:t.toString()},t));const Gl=t=>{const[n,c]=s.useState(null),[r,a]=s.useState(!1),[m,d]=s.useState(!1),[u,i]=s.useState(""),[h,v]=s.useState(!1),F=async E=>{c(E)},z=async E=>{a(!0),Tn(E).then(I=>{I&&(i(I.message),I.success?(v(!0),g.success(I.message)):(v(!1),g.error(I.message)))}),a(!1),d(!0)};return s.useEffect(()=>{},[]),!r&&m?e.jsx(e.Fragment,{children:e.jsx(ft,{message:u,type:h?"success":"error",style:{fontSize:24},onClose:()=>{i(""),a(!1),v(!1),d(!1)},closable:!0})}):e.jsx(e.Fragment,{children:e.jsxs(ie,{spinning:r,children:[e.jsx("p",{style:{fontSize:20},children:"Platform supports Login Authorizations to School Members"}),e.jsxs(Ze,{actions:[e.jsx(te,{title:e.jsx(e.Fragment,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Authorize Login?"}),e.jsx("span",{style:{height:10}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Members Registration Year"}),e.jsx("span",{children:e.jsx(V,{size:"large",value:n||null,placeholder:"Please Choose Year ...",style:{width:220},onChange:F,allowClear:!0,onClear:()=>c(null),dropdownStyle:{zIndex:9999},children:is})})]})}),onConfirm:()=>z(n),onCancel:()=>{},okButtonProps:{disabled:n===null},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{size:"large",icon:e.jsx(Qe,{}),children:"Authorize"})})],style:{marginTop:50},children:[e.jsxs("span",{style:{fontSize:18},children:["By Using Email/Phone/Registration Number of Member as Default"," ",e.jsx("b",{children:"Username"}),", While Default",e.jsx("b",{children:"Password"})," will be ",e.jsx("b",{children:"Randomly Generated"})," or same"," ",e.jsx("b",{children:"Registration Number"})]}),e.jsx("span",{style:{display:"block",color:"red",fontSize:20,marginTop:10},children:"This action will be applicable only to those Members with no Login Access/Authorization to the Platform"})]})]})})},Kl=t=>{const[n]=l.useForm(),[c,r]=s.useState(!1),a=async(m,d)=>{r(!0);const{data:u}=await Q.custom({url:"",method:"post",meta:{operation:"resetMemberCredential",variables:{memberId:{value:parseInt(t.member.id.toString()),type:"Int",required:!0},phone:{value:m,type:"String",required:!0},email:{value:d,type:"String",required:!1}},fields:["success","message"]}}).catch(()=>(g.error("Error occured while resetting member credential ..."),{data:null})).then(i=>i);r(!1),u&&(u.success&&t.resetting(!1),t.resettingFeedback(u.success,u.message))};return s.useEffect(()=>{},[c]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:c,children:e.jsxs(l,{layout:"vertical",form:t.form?t.form:n,onFinish:m=>{a(m.phone,m.email)},requiredMark:!0,children:[e.jsx(l.Item,{name:"phone",label:"Mobile Phone",rules:[{required:!0,type:"string",message:"Please Mobile Phone number"}],children:e.jsx(O,{prefix:e.jsx(Vt,{}),size:"large",placeholder:"Mobile Phone Number ...",onChange:m=>{t.resetPhoneChange(m.target.value)}})}),e.jsx(l.Item,{name:"email",label:"Email Addres",rules:[{required:!1,type:"string",message:"Please Email Address ..."}],children:e.jsx(O,{prefix:e.jsx($t,{}),size:"large",placeholder:"Email Address ..."})})]})})})},{Option:Dt}=V,_l=t=>{s.useState(!0);const[n,c]=s.useState(null),[r,a]=s.useState(null),[m,d]=s.useState(null);s.useState(null),s.useState(null);const[u,i]=s.useState(null),[h,v]=s.useState(null),[F]=l.useForm();et();const z=async f=>{v(f.format("YYYY-MM-DD"))},E=async f=>{i(f)},I=async f=>{d(f)},A=async f=>{c(f)},M=async f=>{a(f)},L=async f=>{const{data:q}=await Q.custom({url:"",method:"post",meta:{operation:"registerSchoolMember",variables:{firstName:{value:f.firstName,type:"String",required:!0},middleName:{value:f.middleName,type:"String",required:!0},lastName:{value:f.lastName,type:"String",required:!0},email:{value:f.email,type:"String",required:!1},phone:{value:f.phone,type:"String",required:!0},registrationNumber:{value:f.registrationNumber,type:"String",required:!0},gender:{value:f.gender,type:"String",required:!0},regionId:{value:f.regionId,type:"Int",required:!1},districtId:{value:f.districtId,type:"Int",required:!1},wardId:{value:f.wardId,type:"Int",required:!1},dob:{value:f.dob,type:"String",required:!1}},fields:["success","message",{schoolMember:We}]}}).catch(()=>(g.error("Error occured while creating School Member"),{data:null})).then(b=>b);q&&(q.success?(g.success(q.message),t.onAdd(q.schoolMember),F.resetFields()):g.error(q.message))};return s.useEffect(()=>{},[t.randKey]),e.jsx(e.Fragment,{children:e.jsxs(l,{layout:"vertical",form:F,onFinish:f=>{f.regionId=n,f.districtId=r,f.wardId=m,L(f)},requiredMark:!0,children:[e.jsx(l.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(l.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(l.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10},children:e.jsx(X,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(N,{type:"dashed",onClick:()=>g("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(O,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(l.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(O,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(l.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,type:"string",message:"Please input Phones Number"}],children:e.jsx(O,{size:"large",placeholder:"Enter Phone Number ..."})}),e.jsxs(ye,{direction:"horizontal",children:[e.jsx(l.Item,{name:"dob",label:"Date of Birth",rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(st,{size:"large",onChange:z,disabledDate:f=>f&&f>Re().subtract(3,"years"),defaultValue:Ht(new Date).subtract(3,"years"),popupStyle:{zIndex:9999}})}),e.jsx(l.Item,{name:"gender",label:"Gender",rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:u,children:e.jsxs(V,{placeholder:"Please Choose Gender ...",style:{width:220},onChange:E,size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(Dt,{value:"female",children:"Female"}),e.jsx(Dt,{value:"male",children:"Male"})]})})]}),e.jsxs(ye,{direction:"horizontal",children:[e.jsxs(ye,{direction:"vertical",children:[e.jsx("h4",{children:"Region"}),e.jsx(rt,{onChange:A,regionId:n,size:"large"})]}),e.jsxs(ye,{direction:"vertical",children:[e.jsx("h4",{children:"District"}),e.jsx(nt,{regionId:parseInt(n),districtId:r,onChange:M,size:"large"})]}),e.jsxs(ye,{direction:"vertical",children:[e.jsx("h4",{children:"Ward"}),e.jsx(lt,{districtId:parseInt(r),wardId:m,onChange:I,size:"large"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:30},children:[e.jsx(N,{size:"large",onClick:()=>{F.resetFields()},danger:!0,style:{float:"left"},icon:e.jsx(zn,{}),children:"Clear"}),e.jsx(N,{size:"large",htmlType:"submit",danger:!0,style:{float:"right"},icon:e.jsx(qn,{}),children:"Save"})]})]})})},{Option:mt}=V,Ol=[];for(let t=2022;t<new Date().getFullYear()+5;t++)Ol.push(e.jsx(mt,{children:t.toString()},t));const Bl=t=>{const[n,c]=s.useState(null),[r,a]=s.useState(null),[m,d]=s.useState(null),[u,i]=s.useState(null),[h,v]=s.useState(null),[F]=l.useForm(),z=async f=>{v(f.format("YYYY-MM-DD"))},E=async f=>{i(f)},I=async f=>{d(f)},A=async f=>{c(f),a(null),d(null),F.resetFields(["districtId","wardId"])},M=async f=>{a(f),d(null),F.resetFields(["wardId"])},L=async f=>{var b;const{data:q}=await Q.custom({url:"",method:"post",meta:{operation:"updateSchoolMemberInformation",variables:{id:{value:parseInt(((b=t==null?void 0:t.member)==null?void 0:b.id.toString())??"0"),type:"Int",required:!0},firstName:{value:f.firstName,type:"String",required:!0},middleName:{value:f.middleName,type:"String",required:!0},lastName:{value:f.lastName,type:"String",required:!0},email:{value:f.email,type:"String",required:!1},phone:{value:f.phone,type:"String",required:!1},registrationNumber:{value:f.registrationNumber,type:"String",required:!0},gender:{value:f.gender,type:"String",required:!0},regionId:{value:f.regionId,type:"Int",required:!1},districtId:{value:f.districtId,type:"Int",required:!1},wardId:{value:f.wardId,type:"Int",required:!1},dob:{value:f.dob,type:"String",required:!1}},fields:["success","message",{schoolMember:We}]}}).catch(()=>(g.error("Error occured while updating member Informations"),{data:null})).then(j=>j);q&&(q.success?(g.success(q.message),t.onFinish(q.schoolMember,t.editting),F.resetFields()):g.error(q.message))};return s.useEffect(()=>{var f,q,b,j,T,k,Y,S,x,C,o,p,U,$,R,G,Z,me,ge,be,K,P,se;i((f=t.member)==null?void 0:f.gender),c((b=(q=t.member)==null?void 0:q.region)==null?void 0:b.id),a((T=(j=t.member)==null?void 0:j.district)==null?void 0:T.id),d((Y=(k=t.member)==null?void 0:k.ward)==null?void 0:Y.id),F.setFieldsValue({firstName:(S=t.member)==null?void 0:S.firstName,middleName:(x=t.member)==null?void 0:x.middleName,lastName:(C=t.member)==null?void 0:C.lastName,email:(o=t.member)==null?void 0:o.email,phone:(p=t.member)==null?void 0:p.phone,registrationNumber:(U=t.member)==null?void 0:U.registrationNumber,gender:($=t.member)==null?void 0:$.gender,regionId:parseInt(((G=(R=t.member)==null?void 0:R.region)==null?void 0:G.id.toString())??"0"),districtId:parseInt(((me=(Z=t.member)==null?void 0:Z.district)==null?void 0:me.id.toString())??"0"),wardId:parseInt(((be=(ge=t.member)==null?void 0:ge.ward)==null?void 0:be.id.toString())??"0")}),(K=t.member)!=null&&K.dob&&(v(Re((P=t.member)==null?void 0:P.dob)),F.setFieldsValue({dob:Ht((se=t.member)==null?void 0:se.dob)}))},[t.member]),e.jsx(e.Fragment,{children:e.jsxs(l,{layout:"vertical",form:F,onFinish:f=>{f.dob=h,L(f)},requiredMark:!0,children:[e.jsx(l.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(l.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(l.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10},children:e.jsx(X,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(N,{type:"dashed",onClick:()=>g("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(O,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(l.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(O,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(l.Item,{name:"phone",label:"Phones Number",rules:[{required:!1,type:"string",message:"Please input Phones Number"}],children:e.jsx(O,{size:"large",placeholder:"Enter Phones Numbers ..."})}),e.jsxs(ne,{children:[e.jsx(B,{span:24,children:e.jsxs(ye,{direction:"horizontal",children:[e.jsx(l.Item,{name:"dob",label:"Date of Birth",rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(st,{onChange:z,disabledDate:f=>f&&f>Re().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(l.Item,{name:"gender",label:"Gender",rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:u,children:e.jsxs(V,{size:"large",placeholder:"Please Choose Gender ...",style:{width:220},onChange:E,dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(mt,{value:"female",children:"Female"}),e.jsx(mt,{value:"male",children:"Male"})]})})]})}),e.jsxs(B,{span:24,children:[e.jsx(rt,{onChange:A,regionId:parseInt(n),name:"regionId",label:"Region",size:"middle",required:!1}),e.jsx(nt,{regionId:parseInt(n),districtId:parseInt(r),onChange:M,name:"districtId",label:"District",size:"middle",required:!1}),e.jsx(lt,{districtId:parseInt(r),wardId:parseInt(m),onChange:I,name:"wardId",label:"Ward",size:"middle",required:!1})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Wl=t=>{const[n,c]=s.useState([]),[r,a]=s.useState([]),[m,d]=s.useState([]),[u,i]=s.useState([]),h=async(I,A="")=>{const{data:M}=await Q.custom({url:"",method:"get",meta:{operation:"systemRoleRecords",variables:{page:{value:I,type:"Int",required:!0},key:{value:A,type:"String",required:!1},userId:{value:parseInt(t.user.id),type:"Int",required:!0},schoolId:{value:parseInt(t.school.id),type:"Int",required:!0},custom:{value:!1,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["key","title","description","chosen"]}]}}),L=[];M.results.forEach(f=>{f.chosen&&L.push(f.key)}),c([...M.results]),a(L)},v=async I=>{const{data:A}=await Q.custom({url:"",method:"post",meta:{operation:"addUserRoles",variables:{userId:{value:parseInt(t.user.id),type:"Int",required:!0},roles:{value:I,type:"[Int]",required:!0}},fields:["success","message"]}});A.success?g.success(A.message):g.error(A.message)},F=async I=>{const{data:A}=await Q.custom({url:"",method:"post",meta:{operation:"removeUserRoles",variables:{userId:{value:parseInt(t.user.id),type:"Int",required:!0},roles:{value:I,type:"[Int]",required:!0}},fields:["success","message"]}});A.success?g.success(A.message):g.error(A.message)},z=I=>{a(I),u.length>0&&v(u),m.length>0&&F(m)},E=(I,A)=>{i(I),d(A)};return s.useEffect(()=>{h(1)},[t.randKey,t.user]),e.jsx(e.Fragment,{children:e.jsx(Sr,{titles:["Not Assigned Roles","Assigned Roles"],dataSource:n,showSearch:!0,listStyle:{width:"100vw",height:"65vh"},operations:["Add","Remove"],targetKeys:r,onChange:z,onSelectChange:E,onSearch:(I,A)=>{},render:I=>I.title})})},Ul=t=>{const[n,c]=s.useState([]),r=async(m,d="")=>{const{data:u}=await Q.custom({url:"",method:"get",meta:{operation:"userRoles",variables:{page:{value:m,type:"Int",required:!0},key:{value:d,type:"String",required:!1},userId:{value:parseInt(t.user.id),type:"Int",required:!0},schoolId:{value:parseInt(t.school.id),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","created","updated","isActive","canEdit","canDelete","canManage",{role:["id","name","code","description","created","updated","isActive","canEdit","canDelete","canManage"]}]}]}});c([...u.results])},a=async m=>{const{data:d}=await Q.custom({url:"",method:"post",meta:{operation:"removeUserRole",variables:{roleId:{value:m.role.id,type:"Int",required:!0},userId:{value:parseInt(t.user.id),type:"Int",required:!0}},fields:["success","message"]}});d.success?(g.success(d.message),c(n.filter(u=>u.id!==m.id))):g.error(d.message)};return s.useEffect(()=>{r(1)},[t.randKey,t.user]),e.jsx(e.Fragment,{children:e.jsx(oe,{dataSource:n,renderItem:m=>e.jsx(oe.Item,{actions:[e.jsx(te,{placement:"topLeft",title:"Remove "+m.role.name,onConfirm:()=>a(m),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(ce,{}),children:"Remove"})})],children:m.role.name})})})},Vl=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,$l=t=>{const[n,c]=s.useState(!1),[r,a]=s.useState(!1),[m]=l.useForm(),d=async u=>{const{data:i}=await Q.custom({url:"",method:"post",meta:{operation:"uploadSchoolMemberProfilePhoto",variables:{id:{value:parseInt(t.member.id),type:"Int",required:!0},photo:{value:u.file,type:"Upload",required:!0}},fields:["success","message",{schoolMember:We}]}}).catch(h=>(console.error(h),g.error("Error occured while uploading profile picture"),{data:null})).then(h=>h);i&&(i.success?(g.success(i.message),t.onChange(i.schoolMember),c(!1)):g.error(i.message))};return s.useEffect(()=>{},[]),e.jsxs(e.Fragment,{children:[e.jsx(N,{block:!0,type:"primary",onClick:()=>c(!0),children:"Update Profile Picture"}),e.jsx(re,{title:"Change Profile Picture",open:n,width:"40vw",onClose:u=>c(u),children:e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:r,children:e.jsxs(l,{layout:"vertical",form:m,onFinish:u=>{d(u)},requiredMark:!0,autoComplete:"off",children:[e.jsx(l.Item,{label:"Pick Files ("+xe.supported_image_extensions.join()+")",children:e.jsx(l.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:Vl,noStyle:!0,rules:[{required:!0,type:"array",message:"Please Upload Profile Picture"}],children:e.jsxs(pt.Dragger,{name:"file",accept:xe.supported_file_extensions.join(),multiple:!0,beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(we,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",loading:r,children:"Change"})})]})})})})]})},Hl=t=>{var d,u,i,h,v,F,z;const[n,c]=s.useState(!1),[r,a]=s.useState(null),m=async()=>{c(!0);const{data:E}=await Q.custom({url:"",method:"get",meta:{operation:"schoolMember",variables:{id:{value:parseInt(t.member.id),type:"Int",required:!0}},fields:We}}).catch(I=>(console.error(I),g.error("Error occured while getting school member"),{data:null})).then(I=>I);E&&a(E),c(!1)};return s.useEffect(()=>{a(t.member),m()},[]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(ne,{children:[e.jsxs(B,{span:4,children:[e.jsx(br,{width:"100%",height:"280px",src:r==null?void 0:r.dp}),e.jsx("div",{style:{marginTop:10},children:e.jsx($l,{member:t.member,onChange:E=>{a(E)}})})]}),e.jsx(B,{span:20,children:e.jsxs("div",{style:{padding:10,marginLeft:10,border:"1px solid #e8e8e8",borderRadius:5},children:[e.jsxs(Ie,{title:"Member Basic Informations",children:[e.jsx(Ie.Item,{label:"Title",children:t.member.title}),e.jsx(Ie.Item,{label:"First Name",children:t.member.firstName}),e.jsx(Ie.Item,{label:"Middle Name",children:t.member.middleName}),e.jsx(Ie.Item,{label:"Last Name",children:t.member.lastName}),e.jsx(Ie.Item,{label:"Gender",children:t.member.gender}),e.jsx(Ie.Item,{label:"DOB",children:t.member.dob}),e.jsx(Ie.Item,{label:"Age",children:((d=t==null?void 0:t.member)==null?void 0:d.age)&&e.jsxs(e.Fragment,{children:[t.member.age," years"]})})]}),e.jsxs(Ie,{title:"Member Contact Informations",children:[e.jsx(Ie.Item,{label:"Mobile Phone Number",children:t.member.phone}),e.jsx(Ie.Item,{label:"Email Address",children:t.member.email}),e.jsx(Ie.Item,{label:"Region",children:(i=(u=t.member)==null?void 0:u.region)==null?void 0:i.name}),e.jsx(Ie.Item,{label:"District",children:(v=(h=t.member)==null?void 0:h.district)==null?void 0:v.name}),e.jsx(Ie.Item,{label:"Ward",children:(z=(F=t.member)==null?void 0:F.ward)==null?void 0:z.name}),e.jsx(Ie.Item,{label:"Address",children:t.member.address})]})]})})]})})})},{TextArea:Jl}=O,{Option:Ql}=V,Xl=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,Zl=t=>{const[n,c]=s.useState(!1),[r,a]=s.useState([]),[m]=l.useForm(),d=async i=>{c(!0);const{data:h}=await Q.custom({url:"",method:"post",meta:{operation:"createSchoolMemberContract",variables:{schoolMemberId:{value:parseInt(t.member.id),type:"Int",required:!0},contractNumber:{value:i.contractNumber,type:"String",required:!0},startDate:{value:i.contractStartDate,type:"String",required:!0},endDate:{value:i.contractEndDate,type:"String",required:!0},contractType:{value:i.contractType,type:"String",required:!0},description:{value:i.contractDescription,type:"String",required:!1},contractDocument:{value:i.file,type:"Upload",required:!0}},fields:["success","message"]}}).catch(v=>(console.error(v),g.error("Error occured while adding contract"),{data:null})).then(v=>v);console.log(h),c(!1)},u=async()=>{const{data:i}=await Q.custom({url:"",method:"get",meta:{operation:"schoolMemberContractTypes",variables:{},fields:["data"]}}).catch(()=>(g.error("Error occured while fetching contract types"),{data:null})).then(h=>h);i&&a(i.data)};return s.useEffect(()=>{u()},[]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(l,{layout:"vertical",form:m,onFinish:i=>{d(i)},requiredMark:!0,children:[e.jsx(l.Item,{name:"contractNumber",label:"Contract Number",rules:[{required:!0,type:"string",message:"Please input Contract Number"}],children:e.jsx(O,{})}),e.jsx(l.Item,{name:"contractStartDate",label:"Contract Start Date",rules:[{required:!0,type:"date",message:"Please input Contract Start Date"}],children:e.jsx(qe.DatePicker,{style:{width:"50%"},popupStyle:{zIndex:9999},onChange:()=>{}})}),e.jsx(l.Item,{name:"contractEndDate",label:"Contract End Date",rules:[{required:!0,type:"date",message:"Please input Contract End Date"}],children:e.jsx(qe.DatePicker,{style:{width:"50%"},popupStyle:{zIndex:9999},onChange:()=>{},disabledDate:i=>i&&i<m.getFieldValue("contractStartDate")})}),e.jsx(l.Item,{name:"contractType",label:"Contract Type",rules:[{required:!0,type:"string",message:"Please choose Contract Type..."}],children:e.jsx(V,{showSearch:!0,placeholder:"Select a Contract Type",optionFilterProp:"children",onChange:i=>{},onSearch:i=>{},filterOption:(i,h)=>h.children.toLowerCase().includes(i.toLowerCase()),dropdownStyle:{zIndex:9999},children:r.map((i,h)=>e.jsx(Ql,{value:i,children:i}))})}),e.jsx(l.Item,{name:"contractDescription",label:"Contract Description",rules:[{required:!1,type:"string",message:"Please input Contract Description"}],children:e.jsx(Jl,{rows:4})}),e.jsx(l.Item,{label:"Pick Files (pdf)",children:e.jsx(l.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:Xl,noStyle:!0,rules:[{required:!0,type:"array",message:"Please Upload Contract File"}],children:e.jsxs(qe.Upload.Dragger,{name:"file",accept:"application/pdf",multiple:!1,beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(we,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Search:wl}=O,ea=t=>{const[n,c]=s.useState(!1),[r,a]=s.useState(0),[m,d]=s.useState(0),[u,i]=s.useState(""),[h,v]=s.useState(null),[F,z]=s.useState(!1),E=async M=>{const{data:L}=await Q.custom({url:"",method:"post",meta:{operation:"deleteSchoolMemberContract",variables:{id:{value:M,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error occured while deleting school member contract"),{data:null})).then(f=>f);L&&(g.success(L.message),v(h.filter(f=>f.id!==M)))},I=async(M,L)=>{const{data:f}=await Q.custom({url:"",method:"post",meta:{operation:"blockUnblockSchoolMemberContract",variables:{id:{value:parseInt(M.toString()),type:"Int",required:!0},blocked:{value:L,type:"Boolean",required:!0}},fields:["success","message",{schoolMemberContract:Mt}]}}).catch(()=>(g.error("Error occured while blocking/unblocking school member contract"),{data:null})).then(q=>q);f?(g.success(f.message,{position:"top-left"}),v(h.map(q=>q.id.toString()===M.toString()?f.schoolMemberContract:q))):g.error("Error occured while blocking/unblocking school member contract",{position:"bottom-right"})},A=async(M=1,L=25,f="")=>{c(!0);const{data:q}=await Q.custom({url:"",method:"get",meta:{operation:"schoolMemberContracts",variables:{schoolMemberId:{value:parseInt(t.member.id),type:"Int",required:!0},page:{value:M,type:"Int",required:!0},pageSize:{value:L,type:"Int",required:!0},key:{value:f,type:"String",required:!1}},fields:["total","pages","page","hasNext","hasPrev",{results:Mt}]}}).catch(()=>(g.error("Error occured while getting school member contracts"),{data:null})).then(b=>b);q&&(a(q.total),d(q.pages),v(q.results)),c(!1)};return s.useEffect(()=>{A(1,25,"")},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(B,{span:8,children:e.jsx(wl,{placeholder:"input search text",onSearch:M=>{i(M),A(1,25,M)},style:{width:"100%"}})}),e.jsx(B,{span:16,children:e.jsx(N,{type:"primary",style:{float:"right"},icon:e.jsx(de,{}),onClick:()=>z(!0),disabled:n||!t.member.canManage,children:"Add Contract"})})]}),e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(he,{dataSource:h,columns:[{title:"Contract #",dataIndex:"contractNumber",key:"contractNumber"},{title:"Contract Type",dataIndex:"contractType",key:"contractType"},{title:"Start Date",dataIndex:"contractStartDate",key:"contractStartDate"},{title:"End Date",dataIndex:"contractEndDate",key:"contractEndDate"},{title:"Status",dataIndex:"status",key:"status",render:(M,L)=>e.jsx(e.Fragment,{children:L.isActive?e.jsx(X,{title:"Active",placement:"top",children:e.jsx(le,{color:"green",children:"Active"})}):e.jsx(X,{title:"Blocked",placement:"top",children:e.jsx(le,{color:"red",children:"Blocked"})})})},{title:"",dataIndex:"actions",key:"actions",render:(M,L)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(te,{title:"Delete Contract?",description:"Are you sure to delete this Contract?",onConfirm:()=>E(L.id),okText:"Yes",cancelText:"No",children:e.jsx(N,{type:"primary",icon:e.jsx(ce,{}),disabled:!L.canDelete})}),L.isActive?e.jsx(X,{title:"Block Contract",placement:"top",children:e.jsx(N,{type:"primary",style:{marginLeft:10},icon:e.jsx(Rt,{}),onClick:()=>{I(L.id,!1)}})}):e.jsx(X,{title:"Unblock Contract",placement:"top",children:e.jsx(N,{type:"primary",style:{marginLeft:10},icon:e.jsx(Nr,{}),onClick:()=>{I(L.id,!0)}})}),e.jsx(X,{title:"Download Contract Document",placement:"top",children:e.jsx(N,{type:"primary",style:{marginLeft:10},icon:e.jsx(gt,{}),onClick:()=>{window.open(L.contractDocument,"_blank")}})})]})}]})})}),e.jsx(ne,{children:e.jsx(B,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(Rn,{defaultCurrent:1,total:r,onChange:(M,L)=>{A(M,L,u)}})})}),e.jsx(re,{title:"Add Contract",open:F,width:"40vw",onClose:M=>z(M),children:e.jsx(Zl,{member:t.member})})]})},ta=t=>{const[n,c]=s.useState(null),r=a=>a.charAt(0).toUpperCase()+a.slice(1);return s.useEffect(()=>{c(JSON.parse(t.member.availability))},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(B,{span:4,children:e.jsx("b",{children:"Day"})}),e.jsx(B,{span:2,children:e.jsx("b",{children:"Morning"})}),e.jsx(B,{span:2,children:e.jsx("b",{children:"After Noon"})}),e.jsx(B,{span:2,children:e.jsx("b",{children:"Evening"})}),e.jsx(B,{span:4,style:{textAlign:"right"},children:e.jsx("b",{children:"Time Range"})})]}),n&&Object.keys(n).map(a=>e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:4,children:a.charAt(0).toUpperCase()+a.slice(1)}),e.jsx(B,{span:2,children:e.jsx(te,{title:n[a].morning?"Available on "+r(a):"Not Available on "+r(a),description:e.jsx("div",{style:{width:"245px"},children:n[a].morning?"Are you sure you want to make this member unavailable in the morning?":"Are you sure you want to make this member available in the morning?"}),onConfirm:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(le,{color:n[a].morning?"green":"red",style:{cursor:"pointer"},children:n[a].morning?"Yes":"No"})})}),e.jsx(B,{span:2,children:e.jsx(te,{title:n[a].afternoon?"Available on "+r(a):"Not Available on "+r(a),description:e.jsx("div",{style:{width:"245px"},children:n[a].afternoon?"Are you sure you want to make this member unavailable in the morning?":"Are you sure you want to make this member available in the morning?"}),onConfirm:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(le,{color:n[a].afternoon?"green":"red",style:{cursor:"pointer"},children:n[a].afternoon?"Yes":"No"})})}),e.jsx(B,{span:2,children:e.jsx(te,{title:n[a].evening?"Available on "+r(a):"Not Available on "+r(a),description:e.jsx("div",{style:{width:"245px"},children:n[a].evening?"Are you sure you want to make this member unavailable in the morning?":"Are you sure you want to make this member available in the morning?"}),onConfirm:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(le,{color:n[a].evening?"green":"red",style:{cursor:"pointer"},children:n[a].evening?"Yes":"No"})})}),e.jsxs(B,{span:4,children:[n[a].time.map(m=>e.jsx("span",{children:m})),e.jsx(N,{size:"small",type:"primary",icon:e.jsx(Ee,{}),style:{float:"right"}})]})]}))]})},sa=Yn.createContext({name:"Default"}),na=t=>{var St,bt,Ct,vt,It;const[n,c]=Cr.useNotification(),[r,a]=s.useState(),[m,d]=s.useState([]),[u,i]=s.useState([]),[h,v]=s.useState(!1),[F,z]=s.useState(0),[E,I]=s.useState(20),[A,M]=s.useState(""),[L,f]=s.useState(!0),[q]=l.useForm(),[b]=l.useForm(),T=!pe.useBreakpoint().lg,[k,Y]=s.useState(!1),[S,x]=s.useState(!1),[C,o]=s.useState(!1),[p,U]=s.useState(!1),[$,R]=s.useState(!1),[G,Z]=s.useState(!1),[me,ge]=s.useState(!1),[be,K]=s.useState(),[P,se]=s.useState(!1),[ee,ue]=s.useState(!1),[ze,Ne]=s.useState(!1),[Pe,Ae]=s.useState(!1),De=W=>{a(W),Ae(!0)},D=W=>{a(W),Ne(!0)},y=W=>{a(W),Y(!0)},J=W=>{a(W),ge(!0)},je=(W,_)=>{W?n.success({message:"Member Credential Reset",description:_,placement:"bottomRight"}):n.error({message:"Member Credential Reset",description:_,placement:"bottomRight"})},Te=W=>{ue(W),se(!1),K(void 0),b.resetFields()},ve=W=>{a(W)},os=W=>{K(W)},ds=W=>{a(W),o(!0)},cs=W=>{a(W),x(!0)},us=async W=>{d([W,...m])},hs=W=>{d([W,...m]),Z(!1)},ms=async W=>{Kn(W).then(_=>{_&&(_.success?(g.success(_.message),d(m.filter(Ce=>Ce.id!==W))):g.error(_.message))})},at=async(W,_="",Ce=20,Le=[])=>{f(!0),_n(W,_,Ce,Le,t.status??"").then(Ke=>{Ke&&(z(Ke.total),d(Ke.results)),f(!1)})},xs=async(W,_="",Ce=20)=>{Jt(W,_,Ce).then(Le=>{Le&&(z(Le.total),i([...Le.results]))})},gs=s.useMemo(()=>({name:"School Members"}),[]),js=async W=>{d(m.map(_=>_.id===W.id?W:_)),Y(!1)};return s.useEffect(()=>(at(1,"",20),xs(1,"",20),document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[t.status]),e.jsx(e.Fragment,{children:e.jsxs(sa.Provider,{value:gs,children:[c,e.jsx(vr,{offsetTop:68,children:e.jsx(Ze,{size:"small",style:{marginBottom:"10px"},children:e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:T?24:10,children:e.jsx(l,{layout:"horizontal",form:q,onFinish:W=>{M(W.key),m.length=0,at(1,W.key,E,W.roles)},children:e.jsxs(ne,{children:[e.jsx(B,{span:T?24:16,children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(B,{span:6,children:e.jsx(l.Item,{name:"roles",children:e.jsx(V,{size:"large",mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"Please select Member Role(s)",onChange:()=>{},dropdownStyle:{zIndex:9999},children:u.map(W=>e.jsx(V.Option,{value:W.id,children:W.role.name},W.id))})})}),e.jsx(B,{children:e.jsx(N,{htmlType:"submit",size:"large",icon:e.jsx(ae,{}),onClick:()=>q.submit()})})]})})}),e.jsxs(B,{span:T?24:14,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(N,{size:"large",icon:e.jsx(de,{}),onClick:()=>R(!0),children:"Authorize Member"}),e.jsx(N,{size:"large",icon:e.jsx(de,{}),onClick:()=>Z(!0),children:"Register Member"}),e.jsx(N,{size:"large",icon:e.jsx(de,{}),onClick:()=>v(!0),children:"Enroll Member(s)"})]})]})})}),e.jsx(he,{loading:L,columns:[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(W,_)=>e.jsx("span",{children:e.jsx("a",{children:_.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(W,_)=>e.jsx("span",{children:_.registrationNumber})},{title:"Email",dataIndex:"email",render:(W,_)=>e.jsx("span",{children:_.email?_.email:_.user.email})},{title:"Username",dataIndex:"username",render:(W,_)=>{var Ce;return e.jsx("span",{children:(Ce=_==null?void 0:_.user)==null?void 0:Ce.username})}},{title:"Phone",dataIndex:"phone",render:(W,_)=>e.jsx("span",{children:_.phone?_.phone:_.user.phone})},{title:"Gender",dataIndex:"gender",render:(W,_)=>e.jsx("span",{children:_.gender?_.gender:_.user.gender})},{title:"Region/District/Ward",dataIndex:"region_district_ward",render:(W,_)=>{var Ce,Le,Ke,Ft,kt;return e.jsxs("span",{children:[(Ce=_==null?void 0:_.region)==null?void 0:Ce.name,((Le=_==null?void 0:_.district)==null?void 0:Le.name)&&e.jsxs(e.Fragment,{children:["/",(Ke=_==null?void 0:_.district)==null?void 0:Ke.name]}),((Ft=_==null?void 0:_.ward)==null?void 0:Ft.name)&&e.jsxs(e.Fragment,{children:["/",(kt=_==null?void 0:_.ward)==null?void 0:kt.name]})]})}},{title:"Date Joined",dataIndex:"created",render:(W,_)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(_.created).toLocaleString()})})},{title:"Authed",dataIndex:"isAuthed",render:(W,_)=>{var Ce;return e.jsx("a",{children:(Ce=_==null?void 0:_.user)!=null&&Ce.isAuthed?e.jsx(le,{color:"green",children:"Yes"}):e.jsx(le,{color:"red",children:"Not"})})}},{title:"Status",dataIndex:"isActive",render:(W,_)=>e.jsx("a",{children:_!=null&&_.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"Action(s)",dataIndex:"action",fixed:"right",render:(W,_)=>{var Ce;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Fe,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(Oe,{style:{color:"red"}}),disabled:!_.canEdit,children:e.jsx(X,{title:"Click to view Member Profile",placement:"left",color:"green",children:e.jsx(N,{type:"link",rel:"noopener noreferrer",onClick:()=>J(_),children:"Profile"})})}),_.contractApplicable&&e.jsx(H.Item,{icon:e.jsx(Ye,{style:{color:"red"}}),disabled:!_.canManage,children:e.jsx(X,{title:"Click to view Member Contracts",placement:"left",color:"green",children:e.jsx(N,{type:"link",rel:"noopener noreferrer",onClick:()=>D(_),children:"Contracts"})})}),e.jsx(H.Item,{icon:e.jsx(Ee,{style:{color:"red"}}),disabled:!_.canEdit,children:e.jsx(X,{title:"Click to Edit Member Informations",placement:"left",color:"green",children:e.jsx(N,{type:"link",rel:"noopener noreferrer",onClick:()=>y(_),children:"Edit"})})}),e.jsx(H.Item,{icon:e.jsx(ce,{style:{color:"red"}}),children:e.jsx(X,{title:"Delete Member",placement:"left",color:"red",children:e.jsx(te,{title:"Are you sure to delete this ",placement:"topRight",onConfirm:()=>ms(_==null?void 0:_.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(_!=null&&_.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{type:"link",disabled:!(_!=null&&_.canDelete),children:"Delete"})})})}),_.canConfigureAvailability&&e.jsx(H.Item,{icon:e.jsx(Gn,{style:{color:"red"}}),children:e.jsx(N,{type:"link",onClick:()=>De(_),children:"Manage Availability"})}),_.user&&e.jsxs(e.Fragment,{children:[e.jsx(H.Item,{icon:e.jsx(Oe,{style:{color:"red"}}),children:e.jsx(N,{type:"link",onClick:()=>cs(_),children:"Roles"})}),e.jsx(H.Item,{icon:e.jsx(Oe,{style:{color:"red"}}),children:e.jsx(N,{type:"link",onClick:()=>ds(_),children:"Manage Roles"})}),((Ce=_==null?void 0:_.user)==null?void 0:Ce.isAuthed)&&e.jsx(te,{title:e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Resetting Credentials for  ",e.jsx("b",{children:r==null?void 0:r.fullName})]}),e.jsx("p",{children:"Are you sure to reset this user's credentials?"}),e.jsx(Kl,{member:r==null?void 0:r.user,form:b,resetPhoneChange:os,randKey:Math.random(),resetting:Te,resettingFeedback:je})]}),visible:P,onConfirm:()=>{b.submit()},onCancel:()=>{K(void 0),se(!1),b.resetFields()},onVisibleChange:Le=>{Le?(K(r==null?void 0:r.phone),se(!0)):K(void 0)},okButtonProps:{disabled:b.getFieldValue("phone")?b.getFieldValue("phone").length<10||ee:!0},okText:"Reset",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(H.Item,{icon:e.jsx(Yt,{style:{color:"red"}}),children:e.jsx(X,{title:"Click to Reset Member Credentials",placement:"left",color:"green",children:e.jsx(N,{type:"link",onClick:()=>ve(_),children:"Reset Credentials"})})})})]})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:Le=>Le.preventDefault(),children:e.jsx(Me,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}}],dataSource:m,pagination:{onChange:(W,_)=>{I(_),at(W,A,_)},total:F,pageSize:E,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"calc(100vh - 350px)"}}),e.jsx(Se,{title:"Adding School Members",anchor:"right",open:h,onClose:W=>v(W),width:"35vw",children:e.jsx(Yl,{randKey:Math.random(),onAdd:us})}),e.jsx(re,{title:((St=r==null?void 0:r.user)==null?void 0:St.fullName)+" Roles",open:S,onClose:W=>x(W),width:"60vw",children:e.jsx(Ul,{user:r==null?void 0:r.user,school:r==null?void 0:r.school,randKey:Math.random()})}),e.jsx(re,{title:"Manage "+((bt=r==null?void 0:r.user)==null?void 0:bt.fullName)+" Roles",open:C,width:"40vw",onClose:W=>o(W),children:e.jsx(Wl,{user:r==null?void 0:r.user,school:r==null?void 0:r.school,randKey:Math.random()})}),e.jsx(re,{title:"Member Registration By Excel Uploading",open:p,width:"40vw",onClose:W=>U(W),children:e.jsx("span",{children:"member registration by excel uploading"})}),e.jsx(re,{title:"Members Authorization",open:$,width:"40vw",onClose:W=>R(W),children:e.jsx(Gl,{})}),e.jsx(re,{title:"Edit Member",open:k,width:"40vw",onClose:W=>Y(W),children:e.jsx(Bl,{member:r,onFinish:js})}),e.jsx(re,{title:"Managing "+((Ct=r==null?void 0:r.user)==null?void 0:Ct.fullName)+" Availability",open:Pe,width:"70vw",onClose:W=>Ae(W),children:e.jsx(ta,{member:r})}),e.jsx(Se,{title:"Registering School Members",anchor:"right",open:G,onClose:W=>Z(W),width:"35vw",children:e.jsx(_l,{onAdd:hs})}),e.jsx(Se,{title:e.jsx(e.Fragment,{children:e.jsxs("span",{children:[e.jsx("b",{children:(vt=r==null?void 0:r.user)==null?void 0:vt.fullName})," Profile"]})}),anchor:"right",open:me,onClose:W=>ge(W),width:"85vw",children:e.jsx(Hl,{member:r})}),e.jsx(Se,{title:e.jsx(e.Fragment,{children:e.jsxs("span",{children:[e.jsx("b",{children:(It=r==null?void 0:r.user)==null?void 0:It.fullName})," Contracts"]})}),anchor:"right",open:ze,onClose:W=>Ne(W),width:"60vw",children:e.jsx(ea,{member:r})})]})})},ra=()=>{const{status:t}=Be();return s.useEffect(()=>{document.title=t==="active"?xe.system_name+": Active Members":t==="blocked"?xe.system_name+": Blocked Members":xe.system_name+": All Members"},[t]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(w.Item,{children:"Members"}),e.jsx(w.Item,{children:t==="active"?"Active Members":t==="blocked"?"Blocked Members":"All Members"})]}),e.jsx(na,{status:t})]})},{TextArea:la}=O,aa=t=>{const[n,c]=s.useState(!0),[r,a]=s.useState(!0);return s.useEffect(()=>{},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("h3",{children:["Course: ",t.studyCourse.course.name]}),e.jsxs("h3",{children:["Year: ",t.studyCourse.year]}),e.jsxs("h3",{children:["Level: ",t.studyCourse.levelDisplay]}),e.jsxs("h3",{children:["Semester: ",t.studyCourse.semesterDisplay]}),e.jsxs(l,{layout:"vertical",form:t.form,onFinish:m=>{m.study_course_id=t.studyCourse.id,m.create_class=n,m.create_drive=r,t.onFinish(m)},initialValues:{periods_per_week:2},requiredMark:!0,children:[e.jsx(l.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx(O,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(l.Item,{name:"periods_per_week",label:"Periods Per Week",rules:[{required:!0,type:"number",message:"Please input Periods Per Week"},{min:1,type:"number",message:"Periods Per Week must be greater than 0"}],children:e.jsx(qe.InputNumber,{size:"large",placeholder:"Enter Periods Per Week ..."})}),e.jsx(l.Item,{name:"is_active",children:e.jsx(ke,{checked:n,onChange:()=>c(!n),children:"Auto Create Class"})}),e.jsx(l.Item,{name:"is_active",children:e.jsx(ke,{checked:r,onChange:()=>a(!r),children:"Auto Create Drive"})}),e.jsx(l.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(la,{rows:2,placeholder:"Please input Description ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},{TextArea:ia}=O,oa=t=>{var r,a,m,d,u,i,h,v,F;const[n,c]=s.useState(t.module.isActive);return s.useEffect(()=>{t.form.setFieldsValue({name:t.module.name,code:t.module.code,description:t.module.description,periods_per_week:t.module.periodsPerWeek,is_active:t.module.isActive})},[t.randKey,t.module,t.form]),e.jsxs(e.Fragment,{children:[e.jsxs("h3",{children:["Course: ",(m=(a=(r=t.module)==null?void 0:r.studyCourse)==null?void 0:a.course)==null?void 0:m.name]}),e.jsxs("h3",{children:["Year: ",(u=(d=t.module)==null?void 0:d.studyCourse)==null?void 0:u.year]}),e.jsxs("h3",{children:["Level: ",(h=(i=t.module)==null?void 0:i.studyCourse)==null?void 0:h.levelDisplay]}),e.jsxs("h3",{children:["Semester: ",(F=(v=t.module)==null?void 0:v.studyCourse)==null?void 0:F.semesterDisplay]}),e.jsxs(l,{layout:"vertical",form:t.form,onFinish:z=>{z.id=parseInt(t.module.id),z.study_course_id=t.module.studyCourse.id,z.is_active=n,t.onFinish(z)},requiredMark:!0,children:[e.jsx(l.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx(O,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(l.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(ia,{rows:2,placeholder:"Please input Description ..."})}),e.jsx(l.Item,{name:"periods_per_week",label:"Periods Per Week",rules:[{required:!0,type:"number",message:"Please input Periods Per Week"},{min:1,type:"number",message:"Periods Per Week must be greater than 0"}],children:e.jsx(_e,{size:"large",placeholder:"Enter Periods Per Week ..."})}),e.jsx(l.Item,{name:"is_active",children:e.jsx(ke,{checked:n,onChange:()=>c(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},{Option:Je}=V,da=[];for(let t=2022;t<new Date().getFullYear()+5;t++)da.push(e.jsx(Je,{children:t.toString()},t));const ca=t=>{s.useState(!0);const[n,c]=s.useState(null),[r,a]=s.useState(null),[m,d]=s.useState(null),[u,i]=s.useState(null),[h,v]=s.useState(null),[F,z]=s.useState([]),[E]=l.useForm();et();const I=async j=>{v(j.format("YYYY-MM-DD"))},A=async j=>{i(j)},M=async j=>{d(j)},L=async j=>{c(j),a(null)},f=async j=>{a(j),d(null)},q=async()=>{var j;Qt(1,"",100,(j=t.studyCourse)==null?void 0:j.id).then(T=>{z(T.results)})},b=async j=>{var k;const{data:T}=await Q.custom({url:"",method:"post",meta:{operation:"createStudyCourseStudent",variables:{studyCourseId:{value:j.studyCourseId,type:"Int",required:!1},firstName:{value:j.firstName,type:"String",required:!0},middleName:{value:j.middleName,type:"String",required:!0},lastName:{value:j.lastName,type:"String",required:!0},email:{value:j.email,type:"String",required:!1},phones:{value:j.phones,type:"[String]",required:!1},registrationNumber:{value:j.registrationNumber,type:"String",required:!0},gender:{value:j.gender,type:"String",required:!0},regionId:{value:j.regionId,type:"Int",required:!1},districtId:{value:j.districtId,type:"Int",required:!1},wardId:{value:j.wardId,type:"Int",required:!1},dob:{value:j.dob,type:"String",required:!1},groupId:{value:parseInt(((k=j.groupId)==null?void 0:k.toString())??"0"),type:"Int",required:!1}},fields:["success","message"]}}).catch(Y=>(console.error(Y),g.error("Error occured while creating student"),{data:null})).then(Y=>Y);T&&(T.success?(g.success(T.message),E.resetFields()):g.error(T.message))};return s.useEffect(()=>{q()},[t.editting,t.studyCourse]),e.jsx(e.Fragment,{children:e.jsxs(l,{layout:"horizontal",form:E,onFinish:j=>{var T;j.studyCourseId=parseInt((T=t.studyCourse)==null?void 0:T.id),j.dob=h,j.regionId=parseInt(n),j.districtId=parseInt(r),j.wardId=parseInt(m),b(j)},requiredMark:!0,children:[e.jsx(l.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(l.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(l.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10,marginTop:5},children:e.jsx(X,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(N,{size:"small",onClick:()=>g("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(O,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(l.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(O,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(l.Item,{name:"phones",label:"Phones Number",rules:[{required:!1,type:"string",message:"Please input Phones Number"}],children:e.jsx(O,{size:"large",placeholder:"Enter Phones Numbers ..."})}),e.jsx(l.Item,{name:"groupId",label:"Group/Stream",style:{marginTop:20},rules:[{required:F.length>0,type:"string",message:"Please choose Group/Stream"}],children:e.jsx(V,{placeholder:"Please Choose Group/Stream ...",style:{width:220},onChange:A,size:"large",dropdownStyle:{zIndex:9999},children:F.map(j=>e.jsx(Je,{value:j.id,children:j.name}))})}),e.jsxs(ye,{direction:"horizontal",size:"small",children:[e.jsx(l.Item,{name:"dob",label:"Date of Birth",style:{marginTop:20},rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(st,{onChange:I,size:"large",disabledDate:j=>j&&j>Re().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(l.Item,{name:"gender",label:"Gender",style:{marginTop:20},rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:u,children:e.jsxs(V,{placeholder:"Please Choose Gender ...",style:{width:220},onChange:A,size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(Je,{value:"female",children:"Female"}),e.jsx(Je,{value:"male",children:"Male"})]})})]}),e.jsxs(ye,{direction:"horizontal",size:"small",children:[e.jsx(rt,{onChange:L,regionId:n,label:"Region",name:"regionId",size:"middle"}),e.jsx(nt,{size:"middle",regionId:parseInt(n),districtId:r,onChange:f,label:"District",name:"districtId"})]}),e.jsx(ye,{direction:"horizontal",size:"small",children:e.jsx(lt,{size:"middle",districtId:parseInt(r),wardId:m,onChange:M,label:"Ward",name:"wardId"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},ua=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,ha=t=>{const[n,c]=s.useState(!1),[r,a]=s.useState(!1),[m,d]=s.useState(""),u=async i=>{c(!0),a(!0);const{data:h}=await Q.custom({url:"",method:"post",meta:{operation:"createStudyCourseStudentsByUploading",variables:{studyCourseId:{value:parseInt(t.studyCourse.id),type:"Int",required:!0},files:{value:i.files,type:"[Upload]",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Something Went Wrong ..."),{data:null})).then(v=>v);h&&(h.success?g(h.message):g.error(h.message),d(h.message)),c(!1),a(!0)};return s.useEffect(()=>{},[t.randKey]),r&&!n?e.jsx(e.Fragment,{children:e.jsx(ft,{type:"info",message:e.jsx(e.Fragment,{children:e.jsxs("p",{children:[m,e.jsx(N,{style:{marginLeft:20},onClick:()=>{t.form.resetFields(),a(!1),c(!1)},children:"Upload Another File"})]})})})}):e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n&&!r,children:e.jsxs(l,{layout:"vertical",form:t.form,onFinish:i=>{u(i)},requiredMark:!0,children:[e.jsx(l.Item,{label:"Students Excel File",children:e.jsx(l.Item,{name:"files",valuePropName:"fileList",getValueFromEvent:ua,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload students excel file"}],children:e.jsxs(pt.Dragger,{name:"files",accept:".xls, .xlsx",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(we,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsxs("span",{children:["Download Uploading Excel Format Template",e.jsx("span",{style:{marginLeft:10},children:e.jsxs("a",{href:xe.course_student_registration_template_file,target:"_blank",children:[e.jsx(gt,{}),"Download"]})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Register"})})]})})})},Tt=t=>{const[n,c]=s.useState([]),[r,a]=s.useState(!0),[m,d]=s.useState(1),[u]=l.useForm(),[i,h]=s.useState(0),[v,F]=s.useState(0),[z,E]=s.useState(!0),I=async M=>{On(M,t.module.id,t.memberType).then(L=>{L&&(L.success?(g.success(L.message),c(n.filter(f=>f.id.toString()!==M.id.toString())),t.onAdd(L.schoolModuleMember)):g.error(L.message))})},A=async(M,L="")=>{a(!0),Bn(M,L,t.module.id,t.memberType).then(f=>{f&&(F(f.total),h(f.pages),d(f.page),E(f.hasNext),c([...n,...f.results]))}),a(!1)};return s.useEffect(()=>{A(1)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(B,{span:10,children:e.jsx(l,{layout:"vertical",form:u,onFinish:M=>{n.length=0,c([]),A(1,M.key)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search Member(s)...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:14,children:e.jsx(N,{icon:e.jsx(ae,{}),size:"large",onClick:()=>u.submit()})})]}),e.jsx(ie,{spinning:r,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(tt,{dataLength:v,next:()=>A(m),hasMore:z,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(ie,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(oe,{itemLayout:"horizontal",dataSource:n,renderItem:M=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(oe.Item,{style:{margin:0,padding:0},actions:[e.jsx(te,{title:"Are you sure to add this member?",onConfirm:()=>I(M),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{size:"large",icon:e.jsx(Ge,{})})})],children:e.jsx(oe.Item.Meta,{avatar:e.jsx(Xt,{src:M.user.pic}),title:e.jsxs("a",{children:[e.jsx("span",{children:M.user.fullName}),M.registrationNumber&&e.jsx("span",{style:{marginLeft:5},children:e.jsx(le,{color:"green",children:M.registrationNumber})})]}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:M.email})})})},"adding-module-member-"+M.id)})})})})})]})},zt=t=>{var x,C;const[n,c]=s.useState([]),[r,a]=s.useState(!1),[m,d]=s.useState(!1),[u,i]=s.useState(1),[h,v]=s.useState(0),[F,z]=s.useState(20),[E,I]=s.useState(""),[A,M]=s.useState(!1),[L,f]=s.useState(!0),[q]=l.useForm(),j=!pe.useBreakpoint().lg,T=async()=>{S(1,"",F)},k=async o=>{Un(o).then(p=>{p&&(p.success?(g.success(p.message),c(n.filter(U=>U.id!==o))):g.error(p.message))})},Y=[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(o,p)=>e.jsx("span",{children:e.jsx("a",{children:p.schoolMember.fullName??p.schoolMember.user.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(o,p)=>e.jsx("span",{children:p.schoolMember.registrationNumber})},{title:"Date Joined",dataIndex:"created",render:(o,p)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(p.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(o,p)=>e.jsx("a",{children:p!=null&&p.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(o,p)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Fe,{trigger:["click"],overlay:e.jsx(H,{children:e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(X,{title:"Delete a Module Member",children:e.jsx(te,{title:"Are you sure to delete this ",onConfirm:()=>k(p==null?void 0:p.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(p!=null&&p.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Me,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],S=async(o,p="",U=20)=>{var $;Wn(o,p,U,(($=t.module)==null?void 0:$.id)??0,t.memberType??"").then(R=>{R&&(i(R.page),v(R.total),M(R.hasNext),c(R.results))}),f(!1)};return s.useEffect(()=>{S(u)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:j?24:16,children:e.jsx(l,{layout:"vertical",form:q,onFinish:o=>{i(1),n.length=0,S(1,o.key)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(B,{span:j?24:8,style:{display:"flex",justifyContent:"flex-end"},children:[t.memberType==="Student"&&e.jsx(N,{size:"large",icon:e.jsx(de,{}),onClick:()=>d(!0),children:"Enroll Student(s)"}),t.memberType==="Teacher"&&e.jsx(N,{size:"large",icon:e.jsx(de,{}),onClick:()=>d(!0),children:"Enroll Teacher(s)/Lecturer(s)"})]})]}),e.jsx(he,{loading:L,columns:Y,dataSource:n,scroll:{x:!0,y:"calc(100vh - 350px)"},pagination:{onChange:(o,p)=>{z(p),S(o,E,p)},total:h,pageSize:F,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(Se,{anchor:"left",open:r,onClose:o=>a(o),width:"80vw",title:"Adding "+((x=t.module)==null?void 0:x.name)+" Module Members",children:e.jsx(Tt,{module:t.module,randKey:Math.random(),onAdd:T,memberType:t.memberType})}),e.jsx(Se,{anchor:"left",open:m,onClose:o=>d(o),width:"80vw",title:"Enrolling "+((C=t.module)==null?void 0:C.name)+" Module Members",children:e.jsx(Tt,{module:t.module,randKey:Math.random(),onAdd:T,memberType:t.memberType})})]})},ma=t=>{const[n,c]=s.useState([]),[r,a]=s.useState([]),[m,d]=s.useState(!1),[u,i]=s.useState(!1),[h,v]=s.useState(0),[F,z]=s.useState(20),[E,I]=s.useState(""),[A,M]=s.useState(!0),[L]=l.useForm(),q=!pe.useBreakpoint().lg,b=async Y=>{const{data:S}=await Q.custom({url:"",method:"post",meta:{operation:"studyCourseStudentEnroll",variables:{studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0},studentId:{value:Y,type:"Int",required:!0}},fields:["success","message",{studyCourseStudent:Vn}]}}).catch(()=>(g.error("Error in Bulk Enrolling of Students"),{data:null})).then(x=>x);S&&(S.success?(g.success(S.message),d(!1),i(!1),a([]),k(1,"",20),t.onAdd(S.studyCourseStudent)):g.error(S.message))},j=async()=>{const{data:Y}=await Q.custom({url:"",method:"post",meta:{operation:"createStudyCourseStudentsBulk",variables:{studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0},students:{value:r,type:"[Int]",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error in Bulk Enrolling of Students"),{data:null})).then(S=>S);Y&&(Y.success?(g.success(Y.message),d(!1),i(!1),a([]),k(1,"",20),t.onAddAll()):g.error(Y.message))},T=[{title:e.jsx(e.Fragment,{children:e.jsx(ke,{checked:u,onChange:Y=>{Y.target.checked?(d(!0),i(!0),a(n.map(S=>parseInt(S.id.toString())))):(d(!1),r.length=0,a([]),i(!1))}})}),dataIndex:"checkConfirm",fixed:!0,render:(Y,S,x)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{defaultChecked:m,checked:m||r.includes(parseInt(S.id)),onChange:C=>{const o=parseInt(S.id);C.target.checked?a([o,...r]):a(r.filter(p=>p!==o))}})})},{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(Y,S,x)=>e.jsx("span",{children:e.jsx("a",{children:S.fullName?S.fullName:S.user.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(Y,S,x)=>e.jsx("span",{children:S.registrationNumber})},{title:"Email",dataIndex:"email",fixed:!0,render:(Y,S,x)=>e.jsx(e.Fragment,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsx(le,{color:"green",children:S.email?S.email:S.user.email?S.user.email:""}),e.jsx(le,{color:"green",children:S.phone?S.phone:S.user.phone})]})})},{title:"Gender",dataIndex:"gender",fixed:!0,render:(Y,S,x)=>e.jsx("span",{children:S.gender?S.gender:S.user.gender})},{title:"Status",dataIndex:"isActive",render:(Y,S,x)=>e.jsx("a",{children:S!=null&&S.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(Y,S,x)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(te,{title:"Adding Student "+(S.fullName?S.fullName:S.user.fullName),onConfirm:()=>b(parseInt(S.id)),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(S!=null&&S.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{size:"large",icon:e.jsx(de,{})})})})}],k=async(Y,S="",x=20,C=[])=>{const{data:o}=await Q.custom({url:"",method:"get",meta:{operation:"studyCourseStudentsToEnroll",variables:{page:{value:Y,type:"Int",required:!0},key:{value:S,type:"String",required:!1},pageSize:{value:x,type:"Int",required:!1},studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:We}]}}).catch(()=>(g.error("Error fetching students"),{data:null})).then(p=>p);o&&(v(o.total),c([...o.results])),M(!1)};return s.useEffect(()=>{k(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:18,children:e.jsx(l,{layout:"horizontal",form:L,onFinish:Y=>{I(Y.key),n.length=0,k(1,Y.key,F,Y.roles)},children:e.jsxs(ne,{children:[e.jsx(B,{span:q?24:16,children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(B,{children:e.jsx(N,{size:"large",icon:e.jsx(ae,{}),onClick:()=>L.submit()})})]})})}),r.length>0&&e.jsx(e.Fragment,{children:e.jsx(B,{span:6,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(de,{}),onClick:j,children:"Add Selected"})})})]}),e.jsx(he,{loading:A,columns:T,dataSource:n,pagination:{onChange:(Y,S)=>{z(S),k(Y,E,S)},total:h,pageSize:F,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0,y:"calc(100vh - 280px)"}})]})},xa=t=>{var x;const[n,c]=s.useState([]),[r,a]=s.useState([]),[m,d]=s.useState(null),[u,i]=s.useState(!1),[h,v]=s.useState(0),[F,z]=s.useState(20),[E,I]=s.useState(""),[A,M]=s.useState(!0),[L]=l.useForm(),q=!pe.useBreakpoint().lg,b=[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(C,o,p)=>e.jsx("span",{children:e.jsx("a",{children:o.schoolMember.fullName?o.schoolMember.fullName:o.schoolMember.user.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(C,o,p)=>e.jsx("span",{children:o.schoolMember.registrationNumber})},{title:"Group/Stream",dataIndex:"group",fixed:!0,render:(C,o,p)=>{var U;return e.jsx("span",{children:(U=o==null?void 0:o.group)==null?void 0:U.name})}},{title:"Email",dataIndex:"email",fixed:!0,render:(C,o,p)=>e.jsx(e.Fragment,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsx(le,{children:o.schoolMember.email?o.schoolMember.email:o.schoolMember.user.email?o.schoolMember.user.email:""}),e.jsx(le,{children:o.schoolMember.phone?o.schoolMember.phone:o.schoolMember.user.phone})]})})},{title:"Gender",dataIndex:"gender",fixed:!0,render:(C,o,p)=>e.jsx("span",{children:o.schoolMember.gender?o.schoolMember.gender:o.schoolMember.user.gender})},{title:"Date Joined",dataIndex:"created",render:(C,o,p)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(o.created).toLocaleString()})})},{title:"Authed",dataIndex:"isAuthed",render:(C,o,p)=>{var U,$;return e.jsx("a",{children:($=(U=o.schoolMember)==null?void 0:U.user)!=null&&$.isAuthed?e.jsx(le,{color:"green",children:"Yes"}):e.jsx(le,{color:"red",children:"Not"})})}},{title:"Status",dataIndex:"isActive",render:(C,o,p)=>e.jsx("a",{children:o!=null&&o.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(C,o,p)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Fe,{trigger:["click"],overlay:e.jsx(H,{children:e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(X,{title:"Delete Student",color:"red",children:e.jsx(te,{title:"Are you sure to delete ",onConfirm:()=>T(o==null?void 0:o.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(o!=null&&o.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Me,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],j=async()=>{Qt(1,"",20,parseInt(t.studyCourse.id.toString())).then(C=>{C&&a(C.results)})},T=async C=>{$n(C).then(o=>{o&&(o.success?(g.success(o.message),c(n.filter(p=>p.id!==C))):g.error(o.message))})},k=async(C,o="",p=20,U=[],$=0)=>{M(!0),Hn(C,o,p,U,parseInt(t.studyCourse.id.toString()),$).then(R=>{R&&(v(R.total),c([...R.results])),M(!1)})},Y=async C=>{c([C,...n])},S=async()=>{k(1,"",20)};return s.useEffect(()=>{j(),k(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:12,children:e.jsx(l,{layout:"horizontal",form:L,onFinish:C=>{I(C.key),n.length=0,k(1,C.key,F,C.roles)},children:e.jsxs(ne,{children:[e.jsx(B,{span:q?24:16,children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(B,{children:e.jsx(N,{size:"large",icon:e.jsx(ae,{}),onClick:()=>L.submit()})})]})})}),e.jsx(B,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(de,{}),onClick:()=>i(!0),children:"Add Student(s)"})})]}),r.length>0&&e.jsxs("div",{children:[e.jsxs(N,{type:m===null?"primary":"default",onClick:()=>{d(null),k(1,"",20)},children:[m===null&&e.jsx(e.Fragment,{children:"All"}),m!==null&&e.jsx(e.Fragment,{children:e.jsx(le,{children:"All"})})]}),r.map(C=>e.jsxs(N,{type:(m==null?void 0:m.id)===C.id?"primary":"default",onClick:()=>{d(C),k(1,"",20,[],C.id)},children:[(m==null?void 0:m.id)===C.id&&e.jsxs(e.Fragment,{children:[C.name," - ",C.totalStudents," Students"]}),(m==null?void 0:m.id)!==C.id&&e.jsxs(e.Fragment,{children:[e.jsx(le,{children:C.name}),e.jsxs(le,{color:"green",children:[C.totalStudents," Students"]})]})]},C.id))]}),e.jsx(he,{loading:A,columns:b,dataSource:n,pagination:{onChange:(C,o)=>{z(o),k(C,E,o)},total:h,pageSize:F,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"calc(100vh - 290px)"}}),e.jsx(Se,{title:"Enrolling "+((x=t.studyCourse)==null?void 0:x.course.name)+" Students",anchor:"left",open:u,onClose:C=>i(C),width:"70vw",children:e.jsx(ma,{studyCourse:t.studyCourse,randKey:Math.random(),onAdd:Y,onAddAll:S})})]})},ga=t=>{var Ne,Pe,Ae,De;const[n,c]=s.useState(),[r,a]=s.useState([]),[m,d]=s.useState(0),[u,i]=s.useState(20),[h,v]=s.useState(""),[F,z]=s.useState(!0),[E]=l.useForm(),[I]=l.useForm(),[A]=l.useForm(),[M]=l.useForm(),f=!pe.useBreakpoint().lg,q=Be(),[b,j]=s.useState(!1),[T,k]=s.useState(!1),[Y,S]=s.useState(!1),[x,C]=s.useState(!1),[o,p]=s.useState(!1),[U,$]=s.useState(!1),[R,G]=s.useState(!1),Z=D=>{c(D),S(!0)},me=D=>{c(D),C(!0)},ge=D=>{c(D),k(!0)},be=async D=>{Jn(D).then(y=>{y&&(y.success?(g.success(y.message),I.resetFields(),j(!1),a([y.module,...r])):g.error(y.message))})},K=async D=>{Qn(D).then(y=>{y&&(y.success?(g.success(y.message),A.resetFields(),k(!1),a(r.map(J=>J.id.toString()===D.id.toString()?y.module:J))):g.error(y.message))})},P=async D=>{wn(D).then(y=>{y&&(y.success?(g.success(y.message),a(r.filter(J=>J.id!==D))):g.error(y.message))})},se=async D=>{er(D).then(y=>{y&&(y.success?(g.success(y.message),a(r.map(J=>J.id===y.module.id?y.module:J))):g.error(y.message))})},ee=async D=>{tr(D).then(y=>{y&&(y.success?(g.success(y.message),a(r.map(J=>J.id===y.module.id?y.module:J))):g.error(y.message))})},ue=async(D,y="",J=20)=>{var je,Te;z(!0),((je=t==null?void 0:t.studyCourse)==null?void 0:je.id)??parseInt(q.studyCourseId)?Xn(((Te=t==null?void 0:t.studyCourse)==null?void 0:Te.id)??parseInt(q.studyCourseId),D,y,J).then(ve=>{ve&&(d(ve.total),a([...ve.results]))}):Zn(D,y,J).then(ve=>{ve&&(d(ve.total),a([...ve.results]))}),z(!1)};s.useEffect(()=>{ue(1,"",20)},[]);const ze=[{title:"Name",dataIndex:"name",fixed:!0,render:(D,y,J)=>e.jsx("span",{children:e.jsx("a",{children:y.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(D,y,J)=>e.jsx("span",{children:e.jsx("a",{children:y.code})})},{title:"Course",dataIndex:"course",fixed:!0,render:(D,y,J)=>e.jsx("span",{children:e.jsx("a",{children:y.studyCourse.course.name})})},{title:"Year",dataIndex:"year",fixed:!0,render:(D,y,J)=>e.jsx("span",{children:y.studyCourse.year})},{title:"Level",dataIndex:"level",fixed:!0,render:(D,y,J)=>e.jsx("span",{children:y.studyCourse.levelDisplay})},{title:"Semester",dataIndex:"semester",fixed:!0,render:(D,y,J)=>e.jsx("span",{children:y.studyCourse.semesterDisplay})},{title:"Periods/Week",dataIndex:"periodsPerWeek",fixed:!0,render:(D,y,J)=>e.jsx("span",{children:y.periodsPerWeek})},{title:"Students",dataIndex:"totalStudents",fixed:!0,render:(D,y,J)=>e.jsx("a",{onClick:()=>me(y),children:e.jsx("span",{children:y.totalStudents})})},{title:"Lecturers",dataIndex:"totalTeachers",fixed:!0,render:(D,y,J)=>e.jsx("a",{onClick:()=>Z(y),children:e.jsx("span",{children:y.totalTeachers})})},{title:"Assistants",dataIndex:"totalAssistants",fixed:!0,render:(D,y,J)=>e.jsx("span",{children:y.totalAssistants})},{title:"Has Drive",dataIndex:"hasDrive",render:(D,y,J)=>y.hasDrive?e.jsx(X,{title:"Click to View Drive",children:e.jsx(Lt,{style:{color:"green"}})}):e.jsx(X,{title:"Click to Auto Create Drive For "+y.name,placement:"left",children:e.jsx(te,{placement:"topLeft",title:"Click to Auto Create Drive For "+y.name,onConfirm:()=>se(y),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(At,{style:{color:"red"}})})})},{title:"Has Class",dataIndex:"hasClass",render:(D,y,J)=>y.hasClass?e.jsx(X,{title:"Click to View Class",children:e.jsx(Lt,{style:{color:"green"}})}):e.jsx(X,{title:"Click to Auto Create Class For "+y.name,placement:"left",children:e.jsx(te,{placement:"topLeft",title:"Click to Auto Create Drive For "+y.name,onConfirm:()=>ee(y),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(At,{style:{color:"red"}})})})},{title:"Created",dataIndex:"created",render:(D,y,J)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(y.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(D,y,J)=>e.jsx("a",{children:y!=null&&y.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(D,y,J)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Fe,{trigger:["click"],overlay:e.jsxs(H,{children:[y.canDelete?e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(te,{placement:"top",title:"Deleting "+y.name+", Are you sure?",onConfirm:()=>P(y==null?void 0:y.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})})}):e.jsx(e.Fragment,{}),e.jsx(H.Item,{icon:e.jsx(Ee,{}),onClick:()=>ge(y),children:e.jsx("a",{children:"Edit"})},"module-edit-"+y.id),e.jsx(H.Item,{icon:e.jsx(Oe,{}),onClick:()=>Z(y),children:e.jsx("a",{children:"Lecture(s)"})},"module-lectures-"+y.id),e.jsx(H.Item,{icon:e.jsx(Oe,{}),onClick:()=>me(y),children:e.jsx("a",{children:"Student(s)"})},"module-students-"+y.id)]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:je=>je.preventDefault(),children:e.jsx(Me,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:f?24:12,children:e.jsx(l,{layout:"vertical",form:E,onFinish:D=>{v(D.key),r.length=0,ue(1,D.key,u)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),((Ne=t.studyCourse)==null?void 0:Ne.canManage)&&e.jsxs(B,{span:f?24:12,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Click to View "+t.studyCourse.course.name+" Students",children:e.jsx(N,{icon:e.jsx(Ye,{}),size:"large",onClick:()=>G(!0),children:"View Students"})}),e.jsx(X,{title:"Register Students by Uploading Excel File",children:e.jsx(N,{icon:e.jsx(de,{}),size:"large",onClick:()=>$(!0),children:"Add Student"})}),e.jsx(X,{title:"Register Students by Uploading Excel File",children:e.jsx(N,{icon:e.jsx(qt,{}),size:"large",onClick:()=>p(!0),children:"Upload Students"})}),e.jsx(X,{title:"Add New Study Course Module",children:e.jsx(N,{icon:e.jsx(de,{}),size:"large",onClick:()=>j(!0),children:"Add Module"})})]})]}),e.jsx(he,{loading:F,columns:ze,dataSource:r,pagination:{onChange:(D,y)=>{i(y),ue(D,h,y)},total:m,pageSize:u,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Adding Study Course Module",open:b,onClose:D=>j(D),width:"30vw",children:e.jsx(aa,{form:I,onFinish:be,randKey:Math.random(),studyCourse:t.studyCourse})}),e.jsx(re,{title:"Edit "+(n==null?void 0:n.name)+" Informations",open:T,onClose:D=>k(D),width:"40vw",children:e.jsx(oa,{studyCourse:t.studyCourse,module:n,onFinish:K,form:A,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.name)+" Lecture(s)",open:Y,width:"80vw",onClose:D=>S(D),children:e.jsx(zt,{memberType:"Teacher",module:n})}),e.jsx(re,{title:(n==null?void 0:n.name)+" Student(s)",open:x,onClose:D=>C(D),width:"80vw",children:e.jsx(zt,{memberType:"Student",module:n,height:75})}),e.jsx(re,{title:"Uploading "+((Pe=t.studyCourse)==null?void 0:Pe.course.name)+" Student(s) by Excel",open:o,onClose:D=>p(D),width:"40vw",children:e.jsx(ha,{form:M,studyCourse:t.studyCourse,randKey:Math.random()})}),e.jsx(re,{title:"Registering "+((Ae=t.studyCourse)==null?void 0:Ae.course.name)+" Student(s)",open:U,onClose:D=>$(D),width:"40vw",children:e.jsx(ca,{studyCourse:t.studyCourse})}),e.jsx(Se,{title:((De=t.studyCourse)==null?void 0:De.course.name)+" Students",anchor:"left",open:R,onClose:D=>G(D),width:"80vw",children:e.jsx(xa,{studyCourse:t.studyCourse,randKey:Math.random()})})]})},ja=()=>{const[t,n]=s.useState(!1),[c,r]=s.useState(),a=Be(),m=async d=>{n(!0);const{data:u}=await Q.custom({url:"",method:"get",meta:{operation:"studyCourse",variables:{id:{value:d,type:"Int",required:!0}},fields:["id","year","level","semester","levelDisplay","semesterDisplay","isActive","canDelete","canEdit","canManage",{course:["id","name"]}]}});r(u),n(!1)};return s.useEffect(()=>{document.title=xe.system_name+": Modules",a.studyCourseId!==void 0&&m(parseInt(a.studyCourseId))},[a.studyCourseId]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),c&&e.jsx(w.Item,{children:e.jsx(fe,{to:"/schoolmanager/study/courses",children:"Study Courses"})}),e.jsx(w.Item,{children:c?e.jsx(e.Fragment,{children:e.jsx(fe,{to:"/schoolmanager/modules",children:"Modules"})}):e.jsx(e.Fragment,{children:"Modules"})}),c&&e.jsx(e.Fragment,{children:e.jsxs(w.Item,{children:[c.course.name,", ",c.levelDisplay," ,",c.semesterDisplay,", ",c.year]})})]}),e.jsx(ga,{height:77,control:!1,studyCourse:c})]})},ya=()=>(s.useEffect(()=>{document.title=xe.system_name+": Programmes"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(w.Item,{children:"Programmes (High Education Level)"})]}),e.jsx(yr,{height:80,control:!1})]})),pa=t=>{const[n,c]=s.useState([]),r=async(a,m="")=>{const{data:d}=await Q.custom({url:"",method:"get",meta:{operation:"systemRolePermissions",variables:{page:{value:a,type:"Int",required:!0},key:{value:m,type:"String",required:!1},roleId:{value:t.role.id,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","created","updated","isActive","canEdit","canDelete","canManage",{permission:["id","name","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}]}});c([...d.results])};return s.useEffect(()=>{r(1)},[t.randKey,t.role]),e.jsx(e.Fragment,{children:e.jsx(oe,{dataSource:n,renderItem:a=>e.jsx(oe.Item,{children:a.permission.name})})})},fa=t=>{const[n,c]=s.useState(),[r,a]=s.useState([]),[m,d]=s.useState(!1),[u,i]=s.useState(0),[h,v]=s.useState(!0),[F,z]=s.useState(20),[E,I]=s.useState(""),[A]=l.useForm();pe.useBreakpoint().lg;const[L,f]=s.useState(!1),q=S=>{c(S),f(!0)},b=S=>{c(S),d(!0)},j=[{title:"Name",dataIndex:"name",fixed:!0,render:(S,x,C)=>e.jsx("span",{children:e.jsx("a",{onClick:()=>b(x),children:x.role.name})})},{title:"Date Created",dataIndex:"created",render:(S,x,C)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(x.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(S,x,C)=>e.jsx("a",{children:x!=null&&x.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(S,x,C)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Fe,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(Ye,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>q(x),children:"Manage Permissions"})}),e.jsx(H.Item,{icon:e.jsx(Ye,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>b(x),children:"View Permissions"})}),e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(te,{placement:"topLeft",title:`Are you sure you want to delete ${x.role.name} Role?`,onConfirm:()=>T(parseInt(x.id)),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Remove"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:o=>o.preventDefault(),children:e.jsx(Me,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],T=async S=>{sr(S).then(x=>{x&&(x.success?(g.success(x.message),a(r.filter(C=>C.id.toString()!==S.toString()))):g.error(x.message))})},k=async(S,x="",C=20)=>{v(!0),Jt(S,x,C).then(o=>{o&&(i(o.total),a([...o.results]))}),v(!1)},Y=async()=>{nr().then(S=>{S&&(S.success?(g.success(S.message),k(1)):g.error(S.message))})};return s.useEffect(()=>{k(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:12,children:e.jsx(l,{layout:"vertical",form:A,onFinish:S=>{I(S.key),r.length=0,k(1,S.key)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:12,children:e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Sync Default School Roles",children:e.jsx(N,{icon:e.jsx(dt,{}),size:"large",onClick:Y,children:"Sync Default Roles"})})})})]}),e.jsx(he,{loading:h,columns:j,dataSource:r,pagination:{onChange:(S,x)=>{z(x),k(S,E,x)},total:u,pageSize:F,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Manage Role Permissions For "+(n==null?void 0:n.role.name),width:"50vw",open:L,onClose:S=>f(S),children:e.jsx(pr,{role:n==null?void 0:n.role,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.role.name)+" Permissions",width:"50vw",open:m,onClose:S=>d(S),children:e.jsx(pa,{role:n==null?void 0:n.role,randKey:Math.random()})})]})},Sa=()=>(s.useEffect(()=>{document.title=xe.system_name+": Roles"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(w.Item,{children:"Roles"})]}),e.jsx(fa,{})]})),ba=()=>(s.useEffect(()=>{document.title=xe.system_name+": Settings"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(w.Item,{children:"Settings"})]}),e.jsx(fr,{})]})),{Option:Ue}=V;function*Ca(t,n){let c=t;for(;c<n;)yield c++}const va=t=>{const[n,c]=s.useState(!0),[r,a]=s.useState([]),m=async(d,u="")=>{c(!0);const{data:i}=await Q.custom({url:"",method:"get",meta:{operation:"schoolCourses",variables:{page:{value:d,type:"Int",required:!0},key:{value:u,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:jt}]}}).catch(()=>(g.error("Error occured while fetching courses"),{data:null})).then(h=>h);i&&a([...i.results]),c(!1)};return s.useEffect(()=>{m(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(l,{layout:"vertical",form:t.form,onFinish:d=>{t.onFinish(d)},requiredMark:!0,children:[e.jsx(l.Item,{name:"course_id",label:"Course",rules:[{required:!0,type:"string",message:"Please choose Course..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Course",optionFilterProp:"children",onChange:d=>{},onSearch:d=>{},filterOption:(d,u)=>u.children.toLowerCase().includes(d.toLowerCase()),dropdownStyle:{zIndex:9999},children:r.map((d,u)=>e.jsx(Ue,{value:d.id,children:d.name}))})}),e.jsx(l.Item,{name:"year",label:"Year",rules:[{required:!0,type:"number",message:"Please choose Year..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Year",optionFilterProp:"children",onChange:d=>{},onSearch:d=>{},filterOption:(d,u)=>u.children.toLowerCase().includes(d.toLowerCase()),dropdownStyle:{zIndex:9999},children:Array.from(Ca(new Date().getFullYear(),new Date().getFullYear()+10)).map((d,u)=>e.jsx(Ue,{value:d,children:d}))})}),e.jsx(l.Item,{name:"level",label:"Level",rules:[{required:!0,type:"number",message:"Please choose Level..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Level",optionFilterProp:"children",onChange:d=>{},onSearch:d=>{},filterOption:(d,u)=>u.children.toLowerCase().includes(d.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First Year"},{value:2,name:"Second Year"},{value:3,name:"Third year"},{value:4,name:"Fourth year"},{value:5,name:"Fifth year"}].map((d,u)=>e.jsx(Ue,{value:d.value,children:d.name}))})}),e.jsx(l.Item,{name:"semester",label:"Semester",rules:[{required:!0,type:"number",message:"Please choose Semester..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Semester",optionFilterProp:"children",onChange:d=>{},onSearch:d=>{},filterOption:(d,u)=>u.children.toLowerCase().includes(d.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First"},{value:2,name:"Second"},{value:3,name:"Third"}].map((d,u)=>e.jsx(Ue,{value:d.value,children:d.name}))})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Option:Ve}=V;function*Ia(t,n){let c=t;for(;c<n;)yield c++}const Fa=t=>{const[n,c]=s.useState(t.studyCourse.isActive),[r,a]=s.useState(!0),[m,d]=s.useState([]),u=[{value:1,name:"First Year"},{value:2,name:"Second Year"},{value:3,name:"Third year"},{value:4,name:"Fourth year"},{value:5,name:"Fifth year"}],i=async(h,v="")=>{a(!0);const{data:F}=await Q.custom({url:"",method:"get",meta:{operation:"schoolCourses",variables:{page:{value:h,type:"Int",required:!0},key:{value:v,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:jt}]}}).catch(()=>(g.error("Error occured while fetching courses"),{data:null})).then(z=>z);F&&d([...F.results]),a(!1)};return s.useEffect(()=>{i(1),t.form.setFieldsValue({course_id:t.studyCourse.course.id,year:t.studyCourse.year,level:parseInt(t.studyCourse.level),semester:t.studyCourse.semester,is_active:t.studyCourse.isActive})},[t.form,t.studyCourse,t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:r,children:e.jsxs(l,{layout:"vertical",form:t.form,onFinish:h=>{h.id=parseInt(t.studyCourse.id),h.is_active=n,t.onFinish(h)},requiredMark:!0,children:[e.jsx(l.Item,{name:"course_id",label:"Course",rules:[{required:!0,type:"string",message:"Please choose Course..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Course",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,v)=>v.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((h,v)=>e.jsx(Ve,{value:h.id,children:h.name}))})}),e.jsx(l.Item,{name:"year",label:"Year",rules:[{required:!0,type:"number",message:"Please choose Year..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Year",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,v)=>v.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:Array.from(Ia(new Date().getFullYear(),new Date().getFullYear()+10)).map((h,v)=>e.jsx(Ve,{value:h,children:h}))})}),e.jsx(l.Item,{name:"level",label:"Level",rules:[{required:!0,type:"number",message:"Please choose Level..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Level",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,v)=>v.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:u.map((h,v)=>e.jsx(Ve,{value:h.value,children:h.name}))})}),e.jsx(l.Item,{name:"semester",label:"Semester",rules:[{required:!0,type:"number",message:"Please choose Semester..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Semester",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,v)=>v.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First"},{value:2,name:"Second"},{value:3,name:"Third"}].map((h,v)=>e.jsx(Ve,{value:h.value,children:h.name}))})}),e.jsx(l.Item,{name:"is_active",children:e.jsx(ke,{checked:n,onChange:()=>c(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Option:ot}=V;function*ka(t,n){let c=t;for(;c<n;)yield c++}const Ma=t=>{const[n,c]=s.useState(!0),[r,a]=s.useState([]),m=async u=>{const{data:i}=await Q.custom({url:"",method:"post",meta:{operation:"createSchoolStudyCourseBulk",variables:{year:{value:parseInt(u.year),type:"Int",required:!0},level:{value:u.level,type:"Int",required:!0},semester:{value:u.semester,type:"Int",required:!0}},fields:["success","message",{studyCourses:He}]}}).catch(()=>(g.error("Error occured while creating study course"),{data:null})).then(h=>h);i&&(i.success?(g.success(i.message),t.form.resetFields(),t.onFinish(i.studyCourses)):g.error(i.message))},d=async(u,i="")=>{c(!0);const{data:h}=await Q.custom({url:"",method:"get",meta:{operation:"schoolCourses",variables:{page:{value:u,type:"Int",required:!0},key:{value:i,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:jt}]}}).catch(()=>(g.error("Error occured while fetching courses"),{data:null})).then(v=>v);h&&a([...h.results]),c(!1)};return s.useEffect(()=>{d(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(l,{layout:"vertical",form:t.form,onFinish:u=>{m(u)},requiredMark:!0,children:[e.jsxs(Xe,{sx:{marginBottom:2},children:[e.jsxs(Ir,{severity:"info",sx:{marginBottom:2},children:[e.jsx(Er,{children:"Info"}),e.jsx("strong",{children:"Important Note:"})," All listed courses will be added to the study course as per the selected year, level and semester."]}),e.jsx(Xe,{sx:{maxHeight:"200px",overflowY:"scroll"},children:e.jsx(oe,{bordered:!0,children:r.map((u,i)=>e.jsx(oe.Item,{children:u.name},i))})})]}),e.jsx(l.Item,{name:"year",label:"Year",rules:[{required:!0,type:"number",message:"Please choose Year..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Year",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,i)=>i.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:Array.from(ka(new Date().getFullYear(),new Date().getFullYear()+10)).map((u,i)=>e.jsx(ot,{value:u,children:u}))})}),e.jsx(l.Item,{name:"level",label:"Level",rules:[{required:!0,type:"number",message:"Please choose Level..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Level",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,i)=>i.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First Year"},{value:2,name:"Second Year"},{value:3,name:"Third year"},{value:4,name:"Fourth year"},{value:5,name:"Fifth year"}].map((u,i)=>e.jsx(ot,{value:u.value,children:u.name}))})}),e.jsx(l.Item,{name:"semester",label:"Semester",rules:[{required:!0,type:"number",message:"Please choose Semester..."}],children:e.jsx(V,{showSearch:!0,size:"large",placeholder:"Select a Semester",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,i)=>i.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First"},{value:2,name:"Second"},{value:3,name:"Third"}].map((u,i)=>e.jsx(ot,{value:u.value,children:u.name}))})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:La}=O,Aa=t=>{const[n,c]=s.useState(!1),[r]=l.useForm(),a=async m=>{var u;c(!0);const{data:d}=await Q.custom({url:"",method:"post",meta:{operation:"createStudyCourseGroup",variables:{studyCourseId:{value:parseInt(((u=t==null?void 0:t.studyCourse)==null?void 0:u.id.toString())??"0"),type:"Int",required:!0},name:{value:m.name,type:"String",required:!0},description:{value:m.description,type:"String",required:!1}},fields:["success","message",{studyCourseGroup:yt}]}}).catch(()=>(g.error("Error occured while fetching departments"),{data:null})).then(i=>i);d&&(d.success?(g.success(d.message),t.onFinish(d.studyCourseGroup),r.resetFields()):g.error(d.message)),c(!1)};return s.useEffect(()=>{},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(l,{layout:"vertical",form:r,onFinish:m=>{a(m)},requiredMark:!0,children:[e.jsx(l.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(La,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:Ea}=O,Na=t=>{var m,d;const[n,c]=s.useState(!1),[r]=l.useForm(),a=async u=>{var h;c(!0);const{data:i}=await Q.custom({url:"",method:"post",meta:{operation:"updateStudyCourseGroup",variables:{id:{value:parseInt(((h=t==null?void 0:t.studyCourseGroup)==null?void 0:h.id.toString())??"0"),type:"Int",required:!0},name:{value:u.name,type:"String",required:!0},description:{value:u.description,type:"String",required:!1}},fields:["success","message",{studyCourseGroup:yt}]}}).catch(()=>(g.error("Error occured while updating study course group"),{data:null})).then(v=>v);i&&(i.success?(g.success(i.message),t.onFinish(i.studyCourseGroup),r.resetFields()):g.error(i.message)),c(!1)};return s.useEffect(()=>{t.studyCourseGroup&&r.setFieldsValue({name:t.studyCourseGroup.name,description:t.studyCourseGroup.description})},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(l,{layout:"vertical",form:r,onFinish:u=>{a(u)},requiredMark:!0,initialValues:{name:(m=t.studyCourseGroup)==null?void 0:m.name,description:(d=t.studyCourseGroup)==null?void 0:d.description},children:[e.jsx(l.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(l.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Ea,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},Pa=t=>{var E;const[n,c]=s.useState(!0),[r,a]=s.useState([]),[m,d]=s.useState(!1),[u,i]=s.useState(null),[h,v]=s.useState(!1),F=async(I,A="")=>{c(!0);const{data:M}=await Q.custom({url:"",method:"get",meta:{operation:"studyCourseGroups",variables:{page:{value:I,type:"Int",required:!0},key:{value:A,type:"String",required:!1},studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:yt}]}}).catch(L=>(console.error(L),g.error("Error occured while fetching study course groups"),{data:null})).then(L=>L);M&&a([...M.results]),c(!1)},z=async I=>{const{data:A}=await Q.custom({url:"",method:"post",meta:{operation:"deleteStudyCourseGroup",variables:{id:{value:parseInt(I.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error occured while deleting study course group"),{data:null})).then(M=>M);A&&A.success&&(g.success(A.message),a(r.filter(M=>M.id!==I)))};return s.useEffect(()=>{F(1)},[t.form,t.studyCourse,t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:e.jsx(N,{icon:e.jsx(de,{}),onClick:()=>d(!0),children:"Add Group/Stream"})}),e.jsx("div",{children:e.jsx(oe,{bordered:!0,dataSource:r,renderItem:I=>e.jsx(oe.Item,{actions:[e.jsx(N,{icon:e.jsx(Ee,{}),disabled:!I.canEdit,onClick:()=>{i(I),v(!0)},children:"Edit"}),e.jsx(te,{title:"Are you sure you want to delete this group/stream?",overlayStyle:{zIndex:999999},onConfirm:()=>z(I.id),okText:"Yes",cancelText:"No",children:e.jsx(N,{icon:e.jsx(ce,{}),disabled:!I.canDelete,children:"Delete"})})],children:e.jsx(oe.Item.Meta,{title:I.name,description:I.description})})})}),e.jsx(re,{title:"Add Group/Stream to "+((E=t.studyCourse)==null?void 0:E.name),open:m,width:"30vw",onClose:I=>d(I),children:e.jsx(Aa,{studyCourse:t.studyCourse,onFinish:I=>{a([I,...r])}})}),e.jsx(re,{title:"Updating Group/Stream to "+(u==null?void 0:u.name),open:h,width:"30vw",onClose:I=>v(I),children:e.jsx(Na,{studyCourseGroup:u,onFinish:I=>{a(r.map(A=>A.id===I.id?I:A)),v(!1)}})})]})},Da=t=>{const[n,c]=s.useState(),[r,a]=s.useState([]),[m,d]=s.useState(0),[u,i]=s.useState(!0),[h,v]=s.useState(20),[F,z]=s.useState(""),[E]=l.useForm(),[I]=l.useForm(),[A]=l.useForm(),[M,L]=s.useState(!1);pe.useBreakpoint().lg;const[q,b]=s.useState(!1),[j,T]=s.useState(!1),[k,Y]=s.useState(!1),S=R=>{c(R),L(!0)},x=R=>{c(R),Y(!0)},C=async R=>{const{data:G}=await Q.custom({url:"",method:"post",meta:{operation:"createSchoolStudyCourse",variables:{courseId:{value:parseInt(R.course_id),type:"Int",required:!0},year:{value:parseInt(R.year),type:"Int",required:!0},level:{value:R.level,type:"Int",required:!0},semester:{value:R.semester,type:"Int",required:!0}},fields:["success","message",{studyCourse:He}]}}).catch(()=>(g.error("Error occured while creating study course"),{data:null})).then(Z=>Z);G&&(G.success?(g.success(G.message),I.resetFields(),b(!1),a([G.studyCourse,...r])):g.error(G.message))},o=async R=>{const{data:G}=await Q.custom({url:"",method:"post",meta:{operation:"updateSchoolStudyCourse",variables:{id:{value:R.id,type:"Int",required:!0},courseId:{value:parseInt(R.course_id),type:"Int",required:!0},year:{value:parseInt(R.year),type:"Int",required:!0},level:{value:R.level,type:"Int",required:!0},semester:{value:R.semester,type:"Int",required:!0},isActive:{value:R.is_active,type:"Boolean",required:!0}},fields:["success","message",{studyCourse:He}]}}).catch(()=>(g.error("Error occured while updating study course"),{data:null})).then(Z=>Z);G&&(G.success?(g.success(G.message),A.resetFields(),Y(!1),a(r.map(Z=>parseInt(Z.id.toString())===parseInt(R.id.toString())?G.studyCourse:Z))):g.error(G.message))},p=async R=>{const{data:G}=await Q.custom({url:"",method:"post",meta:{operation:"deleteSchoolStudyCourse",variables:{id:{value:parseInt(R.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error occured while deleting study course"),{data:null})).then(Z=>Z);G&&(G.success?(g.success(G.message),a(r.filter(Z=>Z.id!==R))):g.error(G.message))},U=async(R,G="",Z=20)=>{const{data:me}=await Q.custom({url:"",method:"get",meta:{operation:"schoolStudyCourses",variables:{page:{value:R,type:"Int",required:!0},key:{value:G,type:"String",required:!1},pageSize:{value:Z,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:He}]}}).catch(()=>(g.error("Error occured while fetching study courses"),{data:null})).then(ge=>ge);me&&(d(me.total),a([...me.results])),i(!1)};s.useEffect(()=>{U(1,"",20)},[]);const $=[{title:"Course",dataIndex:"course",fixed:!0,render:(R,G,Z)=>e.jsx("span",{children:e.jsx("a",{children:G.course.name})})},{title:"Year",dataIndex:"year",fixed:!0,render:(R,G,Z)=>e.jsx("span",{children:G.year})},{title:"Groups/Streams",dataIndex:"totalGroups",fixed:!0,render:(R,G,Z)=>e.jsx("span",{children:G.totalGroups>0?G.totalGroups:"One Main Group/Stream"})},{title:"Max Students",dataIndex:"maxStudents",fixed:!0,render:(R,G,Z)=>e.jsx("span",{children:G.maxStudents})},{title:"Available Students",dataIndex:"availableStudents",fixed:!0,render:(R,G,Z)=>e.jsx("span",{children:G.availableStudents})},{title:"Level",dataIndex:"level",fixed:!0,render:(R,G,Z)=>e.jsx("span",{children:G.levelDisplay})},{title:"Semester",dataIndex:"semester",fixed:!0,render:(R,G,Z)=>e.jsx("span",{children:G.semesterDisplay})},{title:"Created",dataIndex:"created",render:(R,G,Z)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(G.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(R,G,Z)=>e.jsx("a",{children:G!=null&&G.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(R,G,Z)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Deleting Study Course",color:"red",placement:"left",children:e.jsx(te,{title:"Are you sure to delete this Study Course?",onConfirm:()=>p(G==null?void 0:G.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(G!=null&&G.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(ce,{}),disabled:!(G!=null&&G.canDelete)})})}),e.jsx(X,{title:"Edit "+(G==null?void 0:G.name)+" Faculty",placement:"left",color:"green",children:e.jsx(N,{icon:e.jsx(Ee,{}),disabled:!(G!=null&&G.canEdit),onClick:()=>x(G)})}),e.jsx(X,{title:"View Study Course Groups/Streams",placement:"right",color:"green",children:e.jsx(N,{icon:e.jsx(rr,{}),disabled:!(G!=null&&G.canManage),onClick:()=>S(G)})}),e.jsx(X,{title:"View Study Course Modules",placement:"right",color:"green",children:e.jsx(fe,{to:"/schoolmanager/modules/"+G.id,children:e.jsx(N,{icon:e.jsx(Ye,{}),disabled:!(G!=null&&G.canManage)})})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:10,children:e.jsx(l,{layout:"vertical",form:E,onFinish:R=>{z(R.key),r.length=0,U(1,R.key,h)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(B,{span:14,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Bulk Add New Study Course",children:e.jsx(N,{icon:e.jsx(de,{}),size:"large",onClick:()=>T(!0),children:"Bulk Add Study Course"})}),e.jsx(X,{title:"Add New Study Course",children:e.jsx(N,{icon:e.jsx(de,{}),size:"large",onClick:()=>b(!0),children:"Add Study Course"})})]})]}),e.jsx(he,{loading:u,columns:$,dataSource:r,pagination:{onChange:(R,G)=>{v(G),U(R,F,G)},total:m,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Bulk Adding Study Course",open:j,onClose:R=>T(R),width:"30vw",children:e.jsx(Ma,{form:I,onFinish:R=>{a([...R,...r]),T(!1)},randKey:Math.random()})}),e.jsx(re,{title:"Adding Study Course",open:q,onClose:R=>b(R),width:"30vw",children:e.jsx(va,{form:I,onFinish:C,randKey:Math.random()})}),e.jsx(re,{title:"Edit "+(n==null?void 0:n.course.name)+" Informations",open:k,onClose:R=>Y(R),width:"40vw",children:e.jsx(Fa,{studyCourse:n,onFinish:o,form:A,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.course.name)+" Groups/Streams",open:M,onClose:R=>L(R),width:"40vw",children:e.jsx(Pa,{studyCourse:n})})]})},Ta=()=>(s.useEffect(()=>{document.title=xe.system_name+": Study Courses"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(w.Item,{children:"Study Courses"})]}),e.jsx(Da,{height:77})]})),za=t=>{const[n,c]=s.useState(),[r,a]=s.useState([]),[m,d]=s.useState(!0),[u,i]=s.useState(1),[h]=l.useForm(),[v,F]=s.useState(0),z=async I=>{lr(I).then(A=>{A.success?(g.success(A.message),a(r.filter(M=>M.id.toString()!==I.toString())),t.onAdd(A.schoolSubject),c(void 0)):g.error(A.message)})},E=async(I=u,A="",M=25)=>{d(!0),ar(I,A,M).then(L=>{L&&(F(L.pages),i(L.page),a([...L.results]))}),d(!1)};return s.useEffect(()=>{E(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(l,{layout:"vertical",form:h,onFinish:I=>{r.length=0,a([]),E(1,I.key)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search Subject(s)...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(ie,{spinning:m,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(oe,{itemLayout:"horizontal",dataSource:r,renderItem:I=>e.jsx(oe.Item,{actions:[e.jsx(te,{placement:"topLeft",title:"Are you sure to add this subject?",onConfirm:()=>z(I.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Ge,{})})})],children:e.jsx(oe.Item.Meta,{title:e.jsx(e.Fragment,{children:e.jsxs("a",{children:[I.name,e.jsx(le,{color:"green",style:{marginLeft:10},children:I.schoolType.name})]})}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:I.description})})})},"file-"+I.id)})}),e.jsx(Xe,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:1},children:e.jsx(Zt,{count:v,color:"secondary",onChange:(I,A)=>{E(A)}})})]})]})},qa=t=>{const[n,c]=s.useState([]),[r,a]=s.useState(!1),[m,d]=s.useState(0),[u,i]=s.useState(20),[h,v]=s.useState(""),[F,z]=s.useState(!0),[E]=l.useForm(),A=!pe.useBreakpoint().lg,M=async b=>{c([b,...n])},L=async b=>{const{data:j}=await Q.custom({url:"",method:"post",meta:{operation:"deleteSchoolSubject",variables:{id:{value:parseInt(b.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error deleting subject"),{data:null})).then(T=>T);j&&(j.success?(g.success(j.message),c(n.filter(T=>T.id!==b))):g.error(j.message))},f=[{title:"Name",dataIndex:"name",fixed:!0,render:(b,j,T)=>e.jsx("span",{children:e.jsx("a",{children:j.subject.name})})},{title:"School Type",dataIndex:"schoolType",fixed:!0,render:(b,j,T)=>e.jsx("span",{children:e.jsx(le,{color:"green",children:j.subject.schoolType.name})})},{title:"Date Created",dataIndex:"created",render:(b,j,T)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(j.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(b,j,T)=>e.jsx("a",{children:j!=null&&j.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(b,j,T)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Fe,{trigger:["click"],overlay:e.jsx(H,{children:e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(X,{title:"Delete/Remove Subject",placement:"left",color:j!=null&&j.canDelete?"green":"red",children:e.jsx(te,{title:"Are you sure to delete this ",onConfirm:()=>L(j==null?void 0:j.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(j!=null&&j.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{type:"text",disabled:!(j!=null&&j.canDelete),children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:k=>k.preventDefault(),children:e.jsx(Me,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],q=async(b,j="",T=20)=>{const{data:k}=await Q.custom({url:"",method:"get",meta:{operation:"schoolSubjects",variables:{page:{value:b,type:"Int",required:!0},key:{value:j,type:"String",required:!1},pageSize:{value:T,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:ir}]}}).catch(()=>(g.error("Error getting subjects"),{data:null})).then(Y=>Y);k&&(d(k.total),c([...k.results])),z(!1)};return s.useEffect(()=>{q(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:A?24:20,children:e.jsx(l,{layout:"vertical",form:E,onFinish:b=>{v(b.key),n.length=0,q(1,b.key,u)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:A?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(de,{}),onClick:()=>a(!0),children:"Add Subject"})})]}),e.jsx(he,{loading:F,columns:f,dataSource:n,pagination:{onChange:(b,j)=>{i(j),q(b,h,j)},total:m,pageSize:u,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:"Adding School Subjects",anchor:"right",width:"35vw",onClose:()=>a(!1),open:r,children:e.jsx(za,{randKey:Math.random(),onAdd:M})})]})},Ra=()=>(s.useEffect(()=>{document.title=xe.system_name+": Subjects"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(w.Item,{children:"Subjects"})]}),e.jsx(qa,{})]})),Ya=t=>{const[n,c]=s.useState([]),[r,a]=s.useState(1),[m,d]=s.useState(0),[u,i]=s.useState(20),[h,v]=s.useState(""),[F,z]=s.useState(!1),[E,I]=s.useState(!0),[A]=l.useForm(),[M]=l.useForm(),[L,f]=s.useState(!1),q=async S=>{dr(S).then(x=>{x&&(x.success?(g.success(x.message),c([x.loginReedemCode,...n]),M.resetFields()):g.error(x.message))})},b=async S=>{hr(S).then(x=>{x&&(x.success?g.success(x.message):g.error(x.message))})},j=async S=>{mr(S).then(x=>{x&&(x.success?(g.success(x.message),c(n.filter(C=>C.id!==S))):g.error(x.message))})},T=()=>{g("Canceled")},k=[{title:"Reedem Code",dataIndex:"code",fixed:!0,render:(S,x,C)=>e.jsx("span",{children:e.jsx("a",{children:x.code})})},{title:"User",dataIndex:"user",render:(S,x,C)=>{var o,p,U;return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:(x==null?void 0:x.user)&&e.jsxs("span",{children:["Full Name: ",(o=x==null?void 0:x.user)==null?void 0:o.firstName," ",(p=x==null?void 0:x.user)==null?void 0:p.middleName," ",(U=x==null?void 0:x.user)==null?void 0:U.lastName]})}),e.jsx("span",{children:(x==null?void 0:x.email)&&e.jsxs(le,{children:["Email: ",x==null?void 0:x.email]})}),e.jsx("span",{children:(x==null?void 0:x.registrationNumber)&&e.jsxs(le,{children:["Reg#: ",x==null?void 0:x.registrationNumber]})})]})}},{title:"Phone Number",dataIndex:"phone",fixed:!0,render:(S,x,C)=>e.jsx("span",{children:e.jsx("a",{children:x.phone})})},{title:"Is Used",dataIndex:"isUsed",render:(S,x,C)=>e.jsx("a",{children:x!=null&&x.isUsed?e.jsx("span",{style:{color:"green"},children:"Used"}):e.jsx("span",{style:{color:"red"},children:"Not Used"})})},{title:"Status",dataIndex:"isActive",render:(S,x,C)=>e.jsx("a",{children:x!=null&&x.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(S,x,C)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(te,{title:"Resend this Reedem Code?",onConfirm:()=>b(x==null?void 0:x.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(x!=null&&x.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{size:"large",icon:e.jsx(cr,{}),disabled:!(x!=null&&x.canDelete)})}),e.jsx(te,{title:"Are you sure to delete this Reedem Code?",onConfirm:()=>j(x==null?void 0:x.id),onCancel:()=>T,okText:"Yes",cancelText:"No",disabled:!(x!=null&&x.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{size:"large",icon:e.jsx(ce,{}),disabled:!(x!=null&&x.canDelete)})})]})}],Y=async(S,x="",C=20)=>{ur(S,x,C).then(o=>{a(o.page),d(o.total),z(o.hasNext),c(o.results)}),I(!1)};return s.useEffect(()=>{Y(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:10,children:e.jsx(l,{layout:"vertical",form:A,onFinish:S=>{a(1),n.length=0,Y(1,S.key)},children:e.jsx(l.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:14,style:{display:"flex",justifyContent:"end"},children:e.jsx(N,{icon:e.jsx(Ge,{}),size:"large",onClick:()=>f(!0),children:"Reedem"})})]}),e.jsx(he,{loading:E,columns:k,dataSource:n,scroll:{x:!0},pagination:{onChange:(S,x)=>{i(x),Y(S,h,x)},total:m,pageSize:u,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(re,{title:"Creating Reedem Code",open:L,onClose:S=>f(S),children:e.jsxs(e.Fragment,{children:[e.jsxs(l,{layout:"vertical",form:M,onFinish:S=>{q(S)},children:[e.jsx(l.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,type:"string",message:"Please input Phone Number"}],children:e.jsx(O,{size:"large",placeholder:"Phone Number ...",prefix:e.jsx(Vt,{}),autoComplete:"off"})}),e.jsx(l.Item,{name:"email",label:"Email Address",children:e.jsx(O,{size:"large",placeholder:"Email Address ...",prefix:e.jsx($t,{}),autoComplete:"off",allowClear:!0})}),e.jsx(l.Item,{name:"registrationNumber",label:"Registration Number",children:e.jsx(O,{size:"large",placeholder:"Registration Number ...",prefix:e.jsx(or,{}),autoComplete:"off",allowClear:!0})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"end"},children:e.jsx(N,{size:"large",onClick:()=>M.submit(),children:"Reedem"})})]})})]})},Ga=()=>(s.useEffect(()=>{document.title=xe.system_name+": Login Reedems"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(w,{children:[e.jsx(w.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(w.Item,{children:"Login Reedems"})]}),e.jsx(Ya,{height:80})]})),Ni=t=>{const{page:n}=t;return n==="SchoolLoginReedemPage"?e.jsx(Ga,{}):n==="SchoolSubjectsPage"?e.jsx(Ra,{}):n==="SchoolStudyCoursesPage"?e.jsx(Ta,{}):n==="SchoolSettingsPage"?e.jsx(ba,{}):n==="SchoolRolesPage"?e.jsx(Sa,{}):n==="SchoolProgrammesPage"?e.jsx(ya,{}):n==="SchoolModulesPage"?e.jsx(ja,{}):n==="SchoolMembersPage"?e.jsx(ra,{}):n==="SchoolFeeEducationLevelsPage"?e.jsx(ql,{}):n==="SchoolFeesPage"?e.jsx(Nl,{}):n==="SchoolFacultiesPage"?e.jsx(Fl,{}):n==="SchoolExaminationsPage"?e.jsx(fl,{}):n==="SchoolDepartmentsPage"?e.jsx(pl,{}):n==="SchoolCoursesPage"?e.jsx(cl,{}):n==="SchoolEducationLevelsPage"?e.jsx(rl,{}):n==="SchoolManagerPage"?e.jsx(zr,{}):e.jsx("div",{children:"Page not found ..."})};export{Ni as SchoolManagerPages};
