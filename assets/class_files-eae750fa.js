import{r as i,aV as d,c as V,j as e,aZ as k,aR as N,a0 as L,cT as q,a7 as E,aw as M,g as P,_ as R}from"./index-ccfcd4da.js";import{a as T,F as z}from"./file_item_component-d475cd2c.js";import{D as H}from"./index-36291a54.js";import{f as O}from"./data_objects-ce8f5e44.js";import{L as _}from"./index-885f566c.js";import"./index-3cbde207.js";import"./defineProperty-396cb65c.js";import"./pdf_document_viewer-45e7c6a7.js";import"./index-b84643af.js";import"./index-efb9c68a.js";import"./index-e733c2fd.js";import"./Skeleton-a2d4f426.js";import"./index-5c2e1e93.js";import"./index-27f5ca3f.js";import"./index-afc6ce50.js";import"./ActionButton-3b8e0c74.js";import"./index-b8a04bf2.js";import"./transButton-719ccb9d.js";import"./index-a75cd6c4.js";import"./index.esm-a9bf82b4.js";import"./iconBase-fee9e477.js";import"./index-3bfb9ed3.js";import"./index-08a49527.js";import"./Image-eeb38737.js";import"./DialogWrap-1d0538d4.js";import"./index-7da8bd4f.js";import"./fade-dd39912a.js";const xe=l=>{const[o,n]=i.useState([]),[g,f]=i.useState(!0),[u,x]=i.useState(1),[F]=d.useForm(),[A,S]=i.useState(0),[B,I]=i.useState(0),[m,j]=i.useState(!0);V();const[w,h]=i.useState(!1),[p,v]=i.useState(),y=t=>{v(t),h(!0)},c=async(t,r="",s=!1)=>{if(m){const{data:a}=await P.custom({url:"",method:"get",meta:{operation:"darasaFiles",variables:{page:{value:parseInt(t.toString()),type:"Int",required:!0},key:{value:r,type:"String",required:!1},id:{value:parseInt(l.id===void 0?"0":l.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:O}]}}).catch(()=>(R.error("Error loading files"),{data:null})).then(D=>D);a&&(I(a.total),S(a.pages),x(a.page),j(a.hasNext),(r.length>0||r.length===0&&s)&&n(a.results),a.results.length>0&&!s&&n(o.concat(a.results))),f(!1)}},b=t=>{const r=o.map(s=>(s.id===t.id&&(s.imageVisible=!1),s));n(r)},C=t=>{const r=o.map(s=>(s.id===t.id&&(s.imageVisible=!0),s));n(r)};return i.useEffect(()=>{c(u)},[]),e.jsxs(e.Fragment,{children:[e.jsx(k,{children:e.jsx(N,{span:20,children:e.jsx(d,{layout:"vertical",form:F,onFinish:t=>c(0,t.key,!0),children:e.jsx(d.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(q,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(E,{spinning:g,children:[e.jsx(_,{itemLayout:"horizontal",dataSource:o,renderItem:t=>e.jsx(T,{item:t,min:l.min??!1,handleMakeImageNotVisible:b,handleMakeImageVisible:C,handleShowFileInfoDrawer:y})}),m&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(M,{type:"primary",onClick:()=>c(u+1),disabled:!m,children:"Load More"})})]})}),e.jsx(H,{title:"File Informations",anchor:"right",width:"35vw",onClose:t=>h(t),open:w,noOverFlow:!0,children:e.jsx(z,{id:p==null?void 0:p.id})})]})};export{xe as ClassFiles};
