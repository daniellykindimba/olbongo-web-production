import{r as o,aT as P,j as e,G as ie,a1 as le,a8 as oe,B as R,aX as xe,aR as ct,aU as ge,av as L,ae as It,_ as d,g as E,co as Q,cM as ne,aN as D,cA as U,aO as $e,aW as H,aP as Y,S as ae,cn as we,cQ as Ze,c as Se,P as Ot,cm as re,cK as K,u as Be,cL as ee,F as Et,aZ as ue,af as Ue,aY as _t,ce as Ft,cR as dt,cS as qt,cT as Lt,cl as Nt}from"./index-3ee95507.js";import{l as te}from"./index-08c9ec60.js";import{a as At,d as he,b as zt,c as We}from"./data_objects-6cb90192.js";import{S as Ie}from"./SearchOutlined-57b520e5.js";import{C as ye}from"./index-94377945.js";import{R as Vt}from"./RollbackOutlined-6c42ed91.js";import{A as Yt}from"./index-8d1d76b6.js";import{F as Wt}from"./FolderOpenOutlined-cdef4725.js";import{A as Ne}from"./Alert-fb8eba0d.js";import{M as pe}from"./index-6690d794.js";import{E as ke}from"./ExclamationCircleOutlined-bc3ad03d.js";import{M as ut}from"./MoreOutlined-d4a00d34.js";import{T as ht}from"./index-be2a73ad.js";import{d as He,C as Ge}from"./ckeditor-69442fe0.js";import{D as Je}from"./index-ade8483e.js";import{I as Te}from"./index-8a5c8c79.js";import{D as Qe}from"./index-413f080f.js";import{U as Rt}from"./index-c926c066.js";import{U as mt}from"./UploadOutlined-f314e04e.js";import{F as ft,A as Ut}from"./FileImageOutlined-7a66d70c.js";import{I as $t}from"./index-dfc68cd1.js";import{C as Bt}from"./darasa_card-94685381.js";import{P as gt}from"./PlusCircleOutlined-da52a8db.js";import{a as Ht,S as Gt}from"./SmileOutlined-4f44ad99.js";import{T as pt}from"./index-422314c8.js";import{P as Xe}from"./index-83878f15.js";import{S as Jt}from"./SettingOutlined-3bde0850.js";import{C as Qt}from"./CloseOutlined-eb2ea69b.js";import{C as Xt}from"./CheckOutlined-c17fca87.js";import{D as V}from"./index-43db387b.js";import{t as et}from"./text_truncate-315d9efa.js";import{G as Kt}from"./index-f53a7735.js";import{S as Ke}from"./Skeleton-188a3216.js";import{B as Zt}from"./book_payment_form-d5e98bcf.js";import{A as ea}from"./index-76461af0.js";import{D as xt}from"./DeleteOutlined-1abe9ead.js";import{P as ta}from"./PrinterOutlined-27572716.js";import{E as aa}from"./edit_class_virtual_form-8b75d3cd.js";import{L as tt}from"./index-d5e9db55.js";import{D as ra}from"./DownloadOutlined-e311890a.js";import{E as na}from"./EditOutlined-49201e5d.js";const sa=a=>{const[t,r]=o.useState([]),[n,s]=o.useState(!0),[i,l]=o.useState(1),[u,f]=o.useState(0),[x,v]=o.useState(0),[p,y]=o.useState(24),[b,C]=o.useState(""),[I,N]=o.useState(!0),[A,F]=o.useState(!1),[c]=P.useForm(),M=async h=>{const{data:m}=await E.custom({url:"",method:"post",meta:{operation:"removeDarasaArchive",variables:{id:{value:h,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error removing from archive"),{data:null})).then(j=>j);m&&(m.success?(d.success(m.message),r(t.filter(j=>j.id!==h))):d.error(m.message)),pe.destroyAll()},S=h=>{pe.confirm({title:"Confirm",icon:e.jsx(ke,{}),content:"Removing Class From Archive ....",okText:"Restore",cancelText:"Cancel",onOk:()=>M(h)})},w=async(h,m=24,j="")=>{const{data:O}=await E.custom({url:"",method:"get",meta:{operation:"madarasaArchives",variables:{page:{value:h,type:"Int",required:!0},key:{value:j,type:"String",required:!1},pageSize:{value:m,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:At}]}}).catch(W=>(console.error(W),d.error("Error fetching archives"),{data:null})).then(W=>W);O&&(f(O.total),l(O.page),v(O.pages),N(O.hasNext),F(O.hasPrev),r(O.results)),s(!1)};return o.useEffect(()=>{w(1)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ie,{container:!0,children:e.jsx(ie,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6,children:e.jsx(P,{layout:"vertical",form:c,onFinish:h=>{l(0),w(0,p,h.key)},children:e.jsx(P.Item,{name:"key",children:e.jsx(le,{size:"large",placeholder:"Search Classes Archives...",prefix:e.jsx(Ie,{}),autoComplete:"off",allowClear:!0,disabled:n})})})})}),e.jsx(oe,{spinning:n,children:e.jsx(R,{children:t.length>0?e.jsx(ie,{container:!0,children:t.map(h=>e.jsx(ie,{item:!0,xs:12,sm:6,md:4,lg:4,children:e.jsxs(ye,{hoverable:h.isActive,style:{marginRight:10},children:[e.jsx(xe,{style:{right:0,position:"absolute"},children:e.jsx(ct,{trigger:["click"],overlay:e.jsx(ge,{children:e.jsx(ge.Item,{icon:e.jsx(Vt,{}),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>S(h.id),children:"Restore"})},"class-archive-"+h.id)}),overlayStyle:{zIndex:9999},children:e.jsx(L,{type:"link",size:"large",className:"ant-dropdown-link",onClick:m=>m.preventDefault(),style:{zIndex:1},children:e.jsx(ut,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx(It.Ribbon,{text:h.darasa.code,placement:"start",color:"orange",children:e.jsx("a",{onClick:()=>{d("Drive To Connect")},children:e.jsxs(xe,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Yt,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(Wt,{}),src:h.darasa.icon}),e.jsx("span",{style:{fontSize:20},children:h.darasa.name})]})})})]})}))}):e.jsx(Ne,{severity:"info",sx:{fontSize:18},children:n?e.jsx(e.Fragment,{children:"Loading ..."}):e.jsx(e.Fragment,{children:"No Class Found in Archives"})})})}),(I||A)&&!n&&e.jsx(R,{children:e.jsx(te.Pagination,{showSizeChanger:!0,onShowSizeChange:(h,m)=>{l(h),y(m),w(h,m||p,b)},defaultCurrent:i,total:u,onChange:(h,m)=>{l(h),y(m||p),w(h,m||p,b)}})})]})},ia=()=>(o.useEffect(()=>{document.title=Q.system_name+": Classes Archives"},[]),e.jsxs(R,{children:[e.jsx(ne,{children:e.jsxs(D,{children:[e.jsx(D.Item,{children:e.jsx(U,{to:"/",children:"Home"})}),e.jsx(D.Item,{children:e.jsx(U,{to:"/oclass",children:"Oclass"})}),e.jsx(D.Item,{children:"Classes Archives"})]})}),e.jsx(R,{sx:{mt:2},children:e.jsx(sa,{})})]})),{Title:Ee,Text:_e}=ht,vt=a=>{const[t,r]=o.useState(),[n,s]=o.useState(!0),i=async l=>{const{data:u}=await E.custom({url:"",method:"get",meta:{operation:"darasa",variables:{id:{value:l,type:"Int",required:!0}},fields:he}}).catch(()=>(d.error("Error fetching darasa"),{data:null}));u&&r(u),s(!1)};return o.useEffect(()=>{i(a.id)},[a.id]),e.jsxs(oe,{spinning:n,children:[e.jsx(Ee,{level:5,children:"Class Name"}),e.jsx(_e,{children:t==null?void 0:t.name}),e.jsx(Ee,{level:5,children:"Class Code"}),e.jsx(_e,{children:t==null?void 0:t.code}),e.jsx(Ee,{level:5,children:"Class Description"}),e.jsx(_e,{children:t==null?void 0:t.description}),e.jsx(Ee,{level:5,children:"Class Author"}),e.jsx(_e,{children:t==null?void 0:t.user.profile.fullName})]})},oa=a=>{const[t,r]=o.useState(!1),[n,s]=o.useState(""),[i,l]=o.useState(""),[u,f]=o.useState(!1),[x,v]=o.useState(!1),[p,y]=o.useState([]),[b,C]=o.useState(null),[I,N]=o.useState(!1),A={name:"file",action:Q.base_url+"/api/upload/file/class/cover",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},onChange(c){d.dismiss(),c.file.status==="uploading"&&(d.loading("Uploading file...",{duration:0}),f(!0)),c.file.status==="done"?(d.dismiss(),c.file.response.status?(d.success(c.file.response.message),l(c.file.response.cover)):d.error(c.file.response.message),f(!1)):c.file.status==="error"&&d.error(`${c.file.name} file upload failed.`)}},F=async(c,M=25,S="")=>{var h;N(!0);const{data:w}=await E.custom({url:"",method:"get",meta:{operation:"darasaGalleriesPool",variables:{page:{value:c,type:"Int",required:!0},pageSize:{value:M,type:"Int",required:!0}},fields:["data"]}}).catch(()=>(d.error("Error getting galleries"),{data:null})).then(m=>m);w&&y((h=w==null?void 0:w.data)==null?void 0:h.results),N(!1)};return o.useEffect(()=>{F(1)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{padding:20,backgroundColor:"white",borderRadius:5,boxShadow:"0 0 10px rgba(0,0,0,0.1)",maxHeight:"85vh",overflowY:"auto",overflowX:"hidden"},children:e.jsxs(P,{layout:"vertical",form:a.form,onFinish:c=>{c.payable=t,c.description=n,c.cover=i,a.onFinish(c)},requiredMark:!0,autoComplete:"off",children:[e.jsx(P.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Name is required"}],children:e.jsx(le,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(He.CKEditor,{editor:Ge,data:n,onReady:c=>{c.editing.view.change(M=>{M.setStyle("min-height","150px",c.editing.view.document.getRoot())})},onChange:(c,M)=>{const S=M.getData();s(S)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(P.Item,{name:"payable",children:e.jsx($e,{onChange:c=>r(c.target.checked),children:"Payable"})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(P.Item,{name:"price",label:"Cost",initialValue:0,rules:[{required:t,type:"number",validator:(c,M)=>M<=0?Promise.reject("Price cannot be less than 0"):Promise.resolve()}],children:e.jsx(Te,{size:"large",style:{width:"100%"},precision:2})}),e.jsxs(H,{children:[e.jsx(Y,{span:8,children:e.jsx(P.Item,{name:"duration",label:"Duration",initialValue:1,wrapperCol:{span:24},rules:[{required:t,type:"number",message:"Please enter duration"}],children:e.jsx(Te,{size:"large",style:{width:"100%"}})})}),e.jsx(Y,{span:12,children:e.jsx(P.Item,{label:"Duration Type",name:"duration_type",wrapperCol:{span:12},initialValue:"months",rules:[{required:t,type:"string",message:"Please select duration type"}],children:e.jsxs(ae,{size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx(ae.Option,{value:"days",children:"Days"}),e.jsx(ae.Option,{value:"months",children:"Months"}),e.jsx(ae.Option,{value:"years",children:"Years"})]})})})]}),e.jsx(P.Item,{label:"Start Date",name:"start_date",rules:[{required:!0,type:"object",message:"Please select Start Date"}],children:e.jsx(Qe,{size:"large",style:{width:"50%"},disabledDate:c=>c.add(1,"day")<we().endOf("day"),popupStyle:{zIndex:9999}})})]}),e.jsx(P.Item,{name:"cover",label:e.jsxs(e.Fragment,{children:["Cover Image",e.jsx(L,{onClick:()=>{l(""),C(null)},style:{display:i.length>0?"block":"none"},type:"link",danger:!0,children:"Clear"})]}),children:e.jsxs(xe,{direction:"horizontal",children:[e.jsx(Rt,{...A,listType:"picture",className:"upload-list-inline",accept:"image/*",multiple:!1,onRemove:()=>{l("")},showUploadList:{showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!1},children:e.jsx(L,{icon:e.jsx(mt,{}),onClick:()=>{l(""),C(null)},children:"Click to Upload"})}),e.jsx(L,{icon:e.jsx(ft,{}),onClick:()=>{l(""),v(!0)},style:{display:i.length>0||u?"none":"block"},children:"Pick from Gallery"})]})}),b&&e.jsx(xe,{direction:"vertical",style:{marginTop:10},children:e.jsx($t,{width:200,src:b.url})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(L,{type:"primary",size:"large",htmlType:"submit",disabled:i.length===0,children:"Save"})})]})}),e.jsx(Je,{anchor:"right",title:"Gallery",open:x,noOverFlow:!0,onClose:()=>v(!1),width:"30vw",children:e.jsx("span",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",maxHeight:"85vh",overflowY:"auto"},children:e.jsx(te.Spin,{spinning:I,children:e.jsx(H,{children:p.map((c,M)=>e.jsx(Y,{span:12,style:{marginBottom:10,padding:2},children:e.jsx(te.Card,{style:{padding:10,borderRadius:5,cursor:"pointer",backgroundImage:`url(${c.url})`,backgroundSize:"cover",backgroundPosition:"center",width:"100%",height:150},onClick:()=>{l(c.path),C(c),v(!1)}})},M))})})})})]})},la=a=>{const[t,r]=o.useState(a.darasa.payable),[n,s]=o.useState(a.darasa.description),[i,l]=o.useState(""),[u,f]=o.useState(!1),[x,v]=o.useState(!1),[p,y]=o.useState([]),[b,C]=o.useState(null),[I,N]=o.useState(!1),A={name:"file",action:Q.base_url+"/api/upload/file/class/cover",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},onChange(c){d.dismiss(),c.file.status==="uploading"&&(d.loading("Uploading file...",{duration:0}),f(!0)),c.file.status==="done"?(d.dismiss(),c.file.response.status?(d.success(c.file.response.message),l(c.file.response.cover)):d.error(c.file.response.message),f(!1)):c.file.status==="error"&&d.error(`${c.file.name} file upload failed.`)}},F=async(c,M=25,S="")=>{var h;N(!0);const{data:w}=await E.custom({url:"",method:"get",meta:{operation:"darasaGalleriesPool",variables:{page:{value:c,type:"Int",required:!0},pageSize:{value:M,type:"Int",required:!0}},fields:["data"]}}).catch(()=>(d.error("Error getting galleries"),{data:null})).then(m=>m);w&&y((h=w==null?void 0:w.data)==null?void 0:h.results),N(!1)};return o.useEffect(()=>{F(1)},[]),o.useEffect(()=>{a.form.setFieldsValue({name:a.darasa.name,description:a.darasa.description,payable:a.darasa.payable,price:a.darasa.price,duration:a.darasa.duration,duration_type:a.darasa.durationType,start_date:Ze(a.darasa.startDate),end_date:Ze(a.darasa.endDate),cover:a.darasa.cover})},[a.darasa,a.form]),e.jsxs("div",{style:{padding:20,backgroundColor:"white",borderRadius:5,boxShadow:"0 0 10px rgba(0,0,0,0.1)",maxHeight:"85vh",overflowY:"auto",overflowX:"hidden"},children:[e.jsxs(P,{layout:"vertical",form:a.form,onFinish:c=>{c.id=parseInt(a.darasa.id),c.payable=t,c.description=n,c.cover=i,a.onFinish(c)},requiredMark:!1,children:[e.jsx(P.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Name is required"}],children:e.jsx(le,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(He.CKEditor,{editor:Ge,data:n,onReady:c=>{c.editing.view.change(M=>{M.setStyle("min-height","150px",c.editing.view.document.getRoot())})},onChange:(c,M)=>{const S=M.getData();s(S)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(P.Item,{name:"payable",children:e.jsx($e,{defaultChecked:t,onChange:c=>r(c.target.checked),children:"Payable"})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(P.Item,{name:"price",label:"Cost",initialValue:0,rules:[{required:t,type:"number",validator:(c,M)=>M<=0?Promise.reject("Price cannot be less than 0"):Promise.resolve()}],children:e.jsx(Te,{size:"large",style:{width:"100%"},precision:2})}),e.jsxs(H,{children:[e.jsx(Y,{span:8,children:e.jsx(P.Item,{name:"duration",label:"Duration",initialValue:1,wrapperCol:{span:24},rules:[{required:t,type:"number",message:"Please enter duration"}],children:e.jsx(Te,{size:"large",style:{width:"100%"}})})}),e.jsx(Y,{span:12,children:e.jsx(P.Item,{label:"Duration Type",name:"duration_type",wrapperCol:{span:12},initialValue:"months",rules:[{required:t,type:"string",message:"Please select duration type"}],children:e.jsxs(ae,{size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx(ae.Option,{value:"days",children:"Days"}),e.jsx(ae.Option,{value:"months",children:"Months"}),e.jsx(ae.Option,{value:"years",children:"Years"})]})})})]}),e.jsx(P.Item,{label:"Start Date",name:"start_date",rules:[{required:!0,type:"object",message:"Please select Start Date"}],children:e.jsx(Qe,{size:"large",style:{width:"50%"},disabledDate:c=>c.add(1,"day")<we().endOf("day"),popupStyle:{zIndex:9999}})})]}),e.jsx(P.Item,{name:"cover",label:e.jsxs(e.Fragment,{children:["Cover Image",e.jsx(L,{onClick:()=>{l(""),C(null)},style:{display:i.length>0?"block":"none"},type:"link",danger:!0,children:"Clear"})]}),children:e.jsxs(te.Space,{direction:"horizontal",children:[e.jsx(te.Upload,{...A,listType:"picture",className:"upload-list-inline",accept:"image/*",multiple:!1,onRemove:()=>{l("")},showUploadList:{showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!1},children:e.jsx(L,{icon:e.jsx(mt,{}),onClick:()=>{l(""),C(null)},children:"Click to Upload"})}),e.jsx(L,{icon:e.jsx(ft,{}),onClick:()=>{l(""),v(!0)},style:{display:i.length>0||u?"none":"block"},children:"Pick from Gallery"})]})}),b&&e.jsx(te.Space,{direction:"vertical",style:{marginTop:10},children:e.jsx(te.Image,{width:200,src:b.url})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(L,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]}),e.jsx(Je,{anchor:"right",title:"Gallery",open:x,noOverFlow:!0,onClose:()=>v(!1),width:"30vw",children:e.jsx("span",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",maxHeight:"85vh",overflowY:"auto"},children:e.jsx(oe,{spinning:I,children:e.jsx(H,{children:p.map((c,M)=>e.jsx(Y,{span:12,style:{marginBottom:10,padding:2},children:e.jsx(te.Card,{style:{padding:10,borderRadius:5,cursor:"pointer",backgroundImage:`url(${c.url})`,backgroundSize:"cover",backgroundPosition:"center",width:"100%",height:150},onClick:()=>{l(c.path),C(c),v(!1)}})},M))})})})})]})},{Paragraph:ca}=ht,Ae=a=>{const[t,r]=o.useState(!1),[n,s]=o.useState([]),[i,l]=o.useState(),[u,f]=o.useState(),[x,v]=o.useState(!0),[p,y]=o.useState(1),[b,C]=o.useState(0),[I,N]=o.useState(24),[A,F]=o.useState(!0),[c,M]=o.useState(!1),[S]=P.useForm(),[w,h]=o.useState(!1),[m,j]=o.useState(!1);Se();const[O]=P.useForm(),[W,Z]=o.useState(!1),[De,je]=o.useState(!1),$=g=>{l(g),je(!0)},J=g=>{l(g),j(!0)},ce=g=>{f(g),Z(!0)},Ve=async g=>{const{data:k}=await E.custom({url:"",method:"post",meta:{operation:"connectClass",variables:{id:{value:g,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error connecting darasa"),{data:null})).then(z=>z);k&&(k.success?(Z(!1),f(null),d(k.message),s(n.filter(z=>z.id!==g))):d.error(k.message))},T=async g=>{const{data:k}=await E.custom({url:"",method:"post",meta:{operation:"addDarasaArchive",variables:{id:{value:g,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error adding darasa to archive"),{data:null})).then(z=>z);k&&(k.success?(d.success(k.message),s(n.filter(z=>z.id!==g))):d.error(k.message)),pe.destroyAll()},_=g=>{pe.confirm({title:"Confirm",icon:e.jsx(ke,{}),content:"Adding Class To Archive ....",okText:"Add",cancelText:"Cancel",onOk:()=>T(g)})},B=async g=>{const{data:k}=await E.custom({url:"",method:"post",meta:{operation:"createDarasa",variables:{name:{value:g.name,type:"String",required:!0},description:{value:g.description,type:"String",required:!0},payable:{value:g.payable,type:"Boolean",required:!1},price:{value:g.price,type:"Float",required:!1},duration:{value:g.duration,type:"Int",required:!1},durationType:{value:g.duration_type,type:"String",required:!1},startDate:{value:g.start_date,type:"String",required:!1},cover:{value:g.cover,type:"String",required:!1}},fields:["success","message",{darasa:he}]}}).catch(()=>(d.error("Error creating darasa"),{data:null})).then(z=>z);k&&(k.success?(d.success(k.message),h(!1),s([k.darasa,...n])):d.error(k.message))},me=async g=>{const{data:k}=await E.custom({url:"",method:"post",meta:{operation:"updateDarasa",variables:{id:{value:g.id,type:"Int",required:!0},name:{value:g.name,type:"String",required:!0},description:{value:g.description,type:"String",required:!0},payable:{value:g.payable,type:"Boolean",required:!1},price:{value:g.price,type:"Float",required:!1},duration:{value:g.duration,type:"Int",required:!1},durationType:{value:g.duration_type,type:"String",required:!1},startDate:{value:g.start_date,type:"String",required:!1},cover:{value:g.cover,type:"String",required:!1}},fields:["success","message",{darasa:he}]}}).catch(()=>(d.error("Error updating darasa"),{data:null})).then(z=>z);k&&(k.success?(d.success(k.message),j(!1),s(n.map(z=>z.id.toString()===g.id.toString()?k.darasa:z))):d.error(k.message))},Ye=()=>{O.resetFields(),h(!0)},St=async g=>{const{data:k}=await E.custom({url:"",method:"post",meta:{operation:"disconnectClass",variables:{classId:{value:g,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error disconnecting darasa"),{data:null})).then(z=>z);k&&(k.success?(d.success(k.message),s(n.filter(z=>z.id!==g))):d.error(k.message))},Dt=g=>{pe.confirm({title:"Disconnecting Class",icon:e.jsx(ke,{}),content:"Are you sure ...",okText:"Disconnect",cancelText:"Cancel",onOk:()=>St(g)})},Mt=async g=>{const{data:k}=await E.custom({url:"",method:"post",meta:{operation:"deleteDarasa",variables:{id:{value:g,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error deleting darasa"),{data:null})).then(z=>z);k&&(k.success?(d.success(k.message),s(n.filter(z=>z.id!==g))):d.error(k.message))},Pt=g=>{pe.confirm({title:"Deleting Class",icon:e.jsx(ke,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>Mt(g)})},Oe=async(g,k=24,z="")=>{v(!0);const{data:be}=await E.custom({url:"",method:"get",meta:{operation:"myMadarasa",variables:{page:{value:g,type:"Int",required:!0},key:{value:z,type:"String",required:!1},pageSize:{value:k,type:"Int",required:!0},where:{value:{mode:a.mode},type:"JSON",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:he}]}}).catch(()=>(d.error("Error getting darasas"),{data:null})).then(Tt=>Tt);be&&(C(be.total),y(be.page),F(be.hasNext),M(be.hasPrev),s(be.results)),v(!1)},kt=async()=>{const{data:g}=await E.custom({url:"",method:"get",meta:{operation:"darasaAuth",variables:{},fields:["auth"]}}).catch(()=>(d.error("Error getting darasa auth"),{data:null})).then(k=>k);g&&r(g.auth.create_classes)};return o.useEffect(()=>(kt(),Oe(1),document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),e.jsxs(e.Fragment,{children:[e.jsxs(ie,{container:!0,children:[e.jsx(ie,{item:!0,xs:12,sm:6,md:4,lg:4,children:e.jsx(P,{layout:"vertical",form:S,onFinish:g=>{y(1),Oe(1,I,g.key)},children:e.jsx(P.Item,{name:"key",children:e.jsx(le,{size:"large",placeholder:"Search Classes...",prefix:e.jsx(Ie,{}),autoComplete:"off",allowClear:!0,disabled:x})})})}),e.jsx(ie,{item:!0,xs:12,sm:6,md:8,lg:8,sx:{display:"flex",justifyContent:"flex-end",paddingBottom:{xs:2,sm:0,md:0,lg:0}},children:a.mode!=="connect"&&e.jsx(L,{size:"large",icon:e.jsx(gt,{}),onClick:()=>Ye(),disabled:!t||x,children:"Create Class"})})]}),e.jsx("div",{style:{maxHeight:"78vh",minHeight:"78vh",overflow:"auto"},children:e.jsx(oe,{spinning:x,children:n.length>0?e.jsx(ie,{container:!0,children:n.map(g=>e.jsx(ie,{item:!0,xs:12,sm:6,md:4,lg:4,children:e.jsx(Bt,{darasa:g,size:"large",showEditModal:J,showModalDarasaConnect:ce,handleDarasaDisconnect:Dt,handleDarasaDelete:Pt,handleAddingToArchive:_,handleShareModal:$},g.id)},g.id))}):e.jsx(Ne,{severity:"info",sx:{fontSize:18},children:x?e.jsx(e.Fragment,{children:"Loading ..."}):e.jsx(e.Fragment,{children:"No Classes Found"})})})}),!x&&e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(Ot,{showSizeChanger:!0,onShowSizeChange:(g,k)=>{y(g),N(k),Oe(g,k)},defaultCurrent:p,total:b,onChange:(g,k)=>{y(g),N(k||I),Oe(g,k||I)}})}),e.jsx(re,{title:"Creating Class",open:w,destroyOnClose:!0,width:"40vw",onClose:g=>h(g),children:e.jsx(oa,{form:O,onFinish:B})}),e.jsx(re,{title:"Editting Class",width:"40vw",open:m,onClose:g=>j(g),children:e.jsx(la,{darasa:i,form:O,onFinish:me})}),e.jsx(re,{title:"Connecting "+(u==null?void 0:u.name),open:W,onClose:g=>Z(g),children:e.jsxs(e.Fragment,{children:[e.jsx(vt,{id:u==null?void 0:u.id}),e.jsx(L,{onClick:()=>Ve(u==null?void 0:u.id),style:{position:"absolute",bottom:0,right:0,margin:10},children:"Connect"})]})}),e.jsx(re,{title:"Share Class",open:De,width:"40vw",onClose:g=>je(g),children:e.jsx(ye,{title:"Click Copy icon to copy share link",children:e.jsx(ca,{copyable:{icon:[e.jsx(Ht,{},"copy-icon"),e.jsx(Gt,{},"copied-icon")],tooltips:["click here","you clicked!!"],onCopy:()=>{d.success("Link Successfully Copied")}},style:{textAlign:"center",fontSize:20},children:Q.site_url+"/oclass/class/session/"+(i==null?void 0:i.id)+"/"+(i==null?void 0:i.code)})})})]})},da=()=>(o.useEffect(()=>{document.title=Q.system_name+": Classes"},[]),e.jsxs(R,{children:[e.jsx(ne,{children:e.jsxs(D,{children:[e.jsx(D.Item,{children:e.jsx(U,{to:"/",children:"Home"})}),e.jsx(D.Item,{children:e.jsx(U,{to:"/oclass",children:"OClass"})}),e.jsx(D.Item,{children:"Connect Classes"})]})}),e.jsx(R,{sx:{mt:2},children:e.jsx(Ae,{mode:"connect"})})]})),ua=()=>(o.useEffect(()=>{document.title=Q.system_name+": Classes"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(ne,{children:e.jsxs(D,{children:[e.jsx(D.Item,{children:e.jsx(U,{to:"/",children:"Home"})}),e.jsx(D.Item,{children:e.jsx(U,{to:"/oclass",children:"OClass"})}),e.jsx(D.Item,{children:"Classes"})]})}),e.jsx(R,{sx:{mt:2},children:e.jsx(Ae,{mode:"all"})})]})),{TabPane:X}=pt,ha=o.lazy(()=>K(()=>import("./class_announcements-99ef0d1c.js"),["assets/class_announcements-99ef0d1c.js","assets/index-3ee95507.js","assets/index-5e5904d3.css","assets/ckeditor-69442fe0.js","assets/ckeditor-fa0ad5ca.js","assets/text_truncate-315d9efa.js","assets/data_objects-6cb90192.js","assets/data_objects-d21e859c.js","assets/LinkOutlined-ac1355a3.js","assets/index-d5e9db55.js","assets/index-6690d794.js","assets/InfoCircleFilled-acf8006b.js","assets/InfoCircleFilled-baaa675e.js","assets/ActionButton-ec6aa8b6.js","assets/DialogWrap-0869358d.js","assets/index-3d3985e8.js","assets/fade-250784e4.js","assets/SearchOutlined-57b520e5.js","assets/ReadOutlined-61382329.js","assets/DeleteOutlined-1abe9ead.js","assets/DeleteOutlined-25685737.js","assets/EditOutlined-49201e5d.js","assets/EditOutlined-401a1613.js","assets/InfoCircleOutlined-638c82a1.js","assets/MoreOutlined-d4a00d34.js","assets/NotificationOutlined-1565c89c.js","assets/ExclamationCircleOutlined-bc3ad03d.js"]).then(a=>({default:a.ClassAnnouncements}))),ma=o.lazy(()=>K(()=>import("./class_drives-b00bcbbb.js"),["assets/class_drives-b00bcbbb.js","assets/index-3ee95507.js","assets/index-5e5904d3.css","assets/data_objects-d21e859c.js","assets/data_objects-6cb90192.js","assets/Skeleton-188a3216.js","assets/DotChartOutlined-f39c986e.js","assets/index-d5e9db55.js","assets/index-83878f15.js","assets/index-95dcb07d.js","assets/ActionButton-ec6aa8b6.js","assets/index-be2a73ad.js","assets/EditOutlined-401a1613.js","assets/transButton-e7e285d6.js","assets/index-21be64ab.js","assets/SearchOutlined-57b520e5.js","assets/PlusCircleOutlined-da52a8db.js","assets/FileImageOutlined-7a66d70c.js","assets/FolderAddOutlined-9cde3711.js","assets/index-94377945.js","assets/index-422314c8.js","assets/index-8d1d76b6.js","assets/Alert-fb8eba0d.js","assets/index-6690d794.js","assets/InfoCircleFilled-acf8006b.js","assets/InfoCircleFilled-baaa675e.js","assets/DialogWrap-0869358d.js","assets/index-3d3985e8.js","assets/fade-250784e4.js","assets/FolderOpenOutlined-cdef4725.js","assets/InfoCircleOutlined-638c82a1.js","assets/CloseOutlined-eb2ea69b.js","assets/MoreOutlined-d4a00d34.js","assets/ExclamationCircleOutlined-bc3ad03d.js"]).then(a=>({default:a.ClassDrives}))),fa=o.lazy(()=>K(()=>import("./class_assignments-ff30ec3f.js"),["assets/class_assignments-ff30ec3f.js","assets/index-3ee95507.js","assets/index-5e5904d3.css","assets/edit_assignment-5b8e5fc9.js","assets/data_objects-6cb90192.js","assets/data_objects-d21e859c.js","assets/PlusSquareFilled-85f432fb.js","assets/index-d5e9db55.js","assets/index-8d1d76b6.js","assets/index-95dcb07d.js","assets/index-2e67f569.js","assets/InfoCircleFilled-acf8006b.js","assets/InfoCircleFilled-baaa675e.js","assets/index-c926c066.js","assets/Upload-4662cb06.js","assets/fade-250784e4.js","assets/DeleteOutlined-25685737.js","assets/DownloadOutlined-6cd35f11.js","assets/index-6690d794.js","assets/ActionButton-ec6aa8b6.js","assets/DialogWrap-0869358d.js","assets/index-3d3985e8.js","assets/SearchOutlined-57b520e5.js","assets/DownloadOutlined-e311890a.js","assets/InboxOutlined-ac333ba7.js","assets/DeleteOutlined-1abe9ead.js","assets/MoreOutlined-d4a00d34.js","assets/ExclamationCircleOutlined-bc3ad03d.js","assets/ckeditor-fa0ad5ca.js","assets/ckeditor-69442fe0.js","assets/index-413f080f.js","assets/index-ea22eaf3.js","assets/index-ccce498a.js","assets/localeData-61e9bfbc.js","assets/SwapRightOutlined-c4e52b1e.js","assets/SinglePicker-4f8d7753.js","assets/LinkOutlined-ac1355a3.js","assets/FolderViewOutlined-ba37e629.js","assets/EditOutlined-49201e5d.js","assets/EditOutlined-401a1613.js","assets/InfoCircleOutlined-638c82a1.js","assets/BookOutlined-3427b0e9.js","assets/UploadOutlined-f314e04e.js"]).then(a=>({default:a.ClassAssignments}))),ga=o.lazy(()=>K(()=>import("./class_files-f0627fc3.js"),["assets/class_files-f0627fc3.js","assets/index-3ee95507.js","assets/index-5e5904d3.css","assets/file_item_component-7d34923e.js","assets/index-e840324c.js","assets/defineProperty-eb4a8fb2.js","assets/index-ade8483e.js","assets/data_objects-d21e859c.js","assets/pdf_document_viewer-c63e7f7d.js","assets/index-f53a7735.js","assets/SecurityScanOutlined-4da01689.js","assets/index-94377945.js","assets/Skeleton-188a3216.js","assets/DotChartOutlined-f39c986e.js","assets/index-422314c8.js","assets/index-83878f15.js","assets/index-95dcb07d.js","assets/ActionButton-ec6aa8b6.js","assets/index-be2a73ad.js","assets/EditOutlined-401a1613.js","assets/transButton-e7e285d6.js","assets/index-21be64ab.js","assets/index.esm-4bdeb277.js","assets/index-d5e9db55.js","assets/index-8d1d76b6.js","assets/index-dfc68cd1.js","assets/Image-73433711.js","assets/DialogWrap-0869358d.js","assets/ZoomOutOutlined-4d40b3b9.js","assets/index-3d3985e8.js","assets/fade-250784e4.js","assets/DeleteOutlined-1abe9ead.js","assets/DeleteOutlined-25685737.js","assets/DownloadOutlined-e311890a.js","assets/DownloadOutlined-6cd35f11.js","assets/InfoCircleOutlined-638c82a1.js","assets/MoreOutlined-d4a00d34.js","assets/SaveOutlined-44e0f9d2.js","assets/file_item_component-3ade1005.css","assets/SearchOutlined-57b520e5.js"]).then(a=>({default:a.ClassFiles}))),pa=o.lazy(()=>K(()=>import("./class_resources_links-cc6eff83.js"),["assets/class_resources_links-cc6eff83.js","assets/index-3ee95507.js","assets/index-5e5904d3.css","assets/data_objects-6cb90192.js","assets/data_objects-d21e859c.js","assets/index-d5e9db55.js","assets/index-6690d794.js","assets/InfoCircleFilled-acf8006b.js","assets/InfoCircleFilled-baaa675e.js","assets/ActionButton-ec6aa8b6.js","assets/DialogWrap-0869358d.js","assets/index-3d3985e8.js","assets/fade-250784e4.js","assets/SearchOutlined-57b520e5.js","assets/LinkOutlined-ac1355a3.js","assets/DownloadOutlined-e311890a.js","assets/DownloadOutlined-6cd35f11.js","assets/DeleteOutlined-1abe9ead.js","assets/DeleteOutlined-25685737.js","assets/InfoCircleOutlined-638c82a1.js","assets/MoreOutlined-d4a00d34.js","assets/ExclamationCircleOutlined-bc3ad03d.js"]).then(a=>({default:a.ClassResurcesLinks}))),xa=o.lazy(()=>K(()=>import("./class_students-3fc470a4.js"),["assets/class_students-3fc470a4.js","assets/index-3ee95507.js","assets/index-5e5904d3.css","assets/data_objects-6cb90192.js","assets/data_objects-d21e859c.js","assets/Skeleton-188a3216.js","assets/DotChartOutlined-f39c986e.js","assets/index-d5e9db55.js","assets/index-83878f15.js","assets/index-95dcb07d.js","assets/ActionButton-ec6aa8b6.js","assets/index-8d1d76b6.js","assets/index-be2a73ad.js","assets/EditOutlined-401a1613.js","assets/transButton-e7e285d6.js","assets/index-21be64ab.js","assets/SearchOutlined-57b520e5.js","assets/PlusCircleOutlined-da52a8db.js","assets/FileImageOutlined-7a66d70c.js","assets/UnlockFilled-8e1fcbe2.js","assets/index-94377945.js","assets/index-422314c8.js","assets/Alert-fb8eba0d.js","assets/index-6690d794.js","assets/InfoCircleFilled-acf8006b.js","assets/InfoCircleFilled-baaa675e.js","assets/DialogWrap-0869358d.js","assets/index-3d3985e8.js","assets/fade-250784e4.js","assets/FolderAddOutlined-9cde3711.js","assets/CloseOutlined-eb2ea69b.js","assets/FolderOpenOutlined-cdef4725.js","assets/InfoCircleOutlined-638c82a1.js","assets/LockOutlined-b71b9ce3.js","assets/MoreOutlined-d4a00d34.js","assets/ExclamationCircleOutlined-bc3ad03d.js"]).then(a=>({default:a.ClassStudents}))),va=o.lazy(()=>K(()=>import("./class_videos-d62c4efc.js"),["assets/class_videos-d62c4efc.js","assets/index-3ee95507.js","assets/index-5e5904d3.css","assets/data_objects-6cb90192.js","assets/data_objects-d21e859c.js","assets/ckeditor-69442fe0.js","assets/index-c926c066.js","assets/Upload-4662cb06.js","assets/fade-250784e4.js","assets/DeleteOutlined-25685737.js","assets/DownloadOutlined-6cd35f11.js","assets/InboxOutlined-ac333ba7.js","assets/index-e840324c.js","assets/defineProperty-eb4a8fb2.js","assets/index-ade8483e.js","assets/index-08c9ec60.js","assets/useNotification-cd522466.js","assets/DialogWrap-0869358d.js","assets/index-ccce498a.js","assets/localeData-61e9bfbc.js","assets/SinglePicker-4f8d7753.js","assets/index-422314c8.js","assets/useMutateObserver-8321179d.js","assets/index-58d13a13.js","assets/InputNumber-488995c2.js","assets/Image-73433711.js","assets/Rate-e5442d98.js","assets/index-4fbe1a0e.js","assets/index-21be64ab.js","assets/Skeleton-188a3216.js","assets/DotChartOutlined-f39c986e.js","assets/index-94377945.js","assets/Alert-fb8eba0d.js","assets/index-6690d794.js","assets/InfoCircleFilled-acf8006b.js","assets/InfoCircleFilled-baaa675e.js","assets/ActionButton-ec6aa8b6.js","assets/index-3d3985e8.js","assets/SearchOutlined-57b520e5.js","assets/UploadOutlined-f314e04e.js","assets/LinkOutlined-ac1355a3.js","assets/FolderAddOutlined-9cde3711.js","assets/FolderOpenOutlined-cdef4725.js","assets/InfoCircleOutlined-638c82a1.js","assets/CloseOutlined-eb2ea69b.js","assets/MoreOutlined-d4a00d34.js","assets/ExclamationCircleOutlined-bc3ad03d.js"]).then(a=>({default:a.ClassVideos}))),ya=o.lazy(()=>K(()=>import("./class_virtual_session-1b38d7f0.js"),["assets/class_virtual_session-1b38d7f0.js","assets/index-3ee95507.js","assets/index-5e5904d3.css","assets/ckeditor-69442fe0.js","assets/index-413f080f.js","assets/index-ea22eaf3.js","assets/index-ccce498a.js","assets/localeData-61e9bfbc.js","assets/SwapRightOutlined-c4e52b1e.js","assets/SinglePicker-4f8d7753.js","assets/index-8a5c8c79.js","assets/UpOutlined-7082c42f.js","assets/InputNumber-488995c2.js","assets/edit_class_virtual_form-8b75d3cd.js","assets/ckeditor-fa0ad5ca.js","assets/data_objects-6cb90192.js","assets/data_objects-d21e859c.js","assets/index-6690d794.js","assets/InfoCircleFilled-acf8006b.js","assets/InfoCircleFilled-baaa675e.js","assets/ActionButton-ec6aa8b6.js","assets/DialogWrap-0869358d.js","assets/index-3d3985e8.js","assets/fade-250784e4.js","assets/SearchOutlined-57b520e5.js","assets/LinkOutlined-ac1355a3.js","assets/ExclamationCircleOutlined-bc3ad03d.js","assets/index-08c9ec60.js","assets/defineProperty-eb4a8fb2.js","assets/useNotification-cd522466.js","assets/index-422314c8.js","assets/useMutateObserver-8321179d.js","assets/index-58d13a13.js","assets/Image-73433711.js","assets/Upload-4662cb06.js","assets/Rate-e5442d98.js","assets/index-4fbe1a0e.js","assets/index-21be64ab.js","assets/index-94377945.js","assets/Skeleton-188a3216.js","assets/DotChartOutlined-f39c986e.js","assets/RollbackOutlined-6c42ed91.js","assets/index-8d1d76b6.js","assets/index-95dcb07d.js","assets/FolderOpenOutlined-cdef4725.js","assets/Alert-fb8eba0d.js","assets/MoreOutlined-d4a00d34.js","assets/index-be2a73ad.js","assets/EditOutlined-401a1613.js","assets/transButton-e7e285d6.js","assets/index-ade8483e.js","assets/index-c926c066.js","assets/DeleteOutlined-25685737.js","assets/DownloadOutlined-6cd35f11.js","assets/UploadOutlined-f314e04e.js","assets/FileImageOutlined-7a66d70c.js","assets/index-dfc68cd1.js","assets/ZoomOutOutlined-4d40b3b9.js","assets/darasa_card-94685381.js","assets/remove_html_tags-be9c976e.js","assets/ShareAltOutlined-c46e4c85.js","assets/EditOutlined-49201e5d.js","assets/InfoCircleOutlined-638c82a1.js","assets/DeleteOutlined-1abe9ead.js","assets/PlusCircleOutlined-da52a8db.js","assets/SmileOutlined-4f44ad99.js","assets/index-83878f15.js","assets/SettingOutlined-3bde0850.js","assets/CloseOutlined-eb2ea69b.js","assets/CheckOutlined-c17fca87.js","assets/index-43db387b.js","assets/text_truncate-315d9efa.js","assets/index-f53a7735.js","assets/book_payment_form-d5e98bcf.js","assets/index-2e67f569.js","assets/index-76461af0.js","assets/PrinterOutlined-27572716.js","assets/index-d5e9db55.js","assets/DownloadOutlined-e311890a.js"]).then(a=>({default:a.ClassVirtualSessions}))),ja=o.lazy(()=>K(()=>import("./feeds-f62b42c0.js"),["assets/feeds-f62b42c0.js","assets/index-3ee95507.js","assets/index-5e5904d3.css","assets/index.es-a6fe8a1a.js","assets/ckeditor-69442fe0.js","assets/index-d5e9db55.js","assets/index-83878f15.js","assets/index-95dcb07d.js","assets/ActionButton-ec6aa8b6.js","assets/index-8d1d76b6.js","assets/index-dfc68cd1.js","assets/Image-73433711.js","assets/DialogWrap-0869358d.js","assets/ZoomOutOutlined-4d40b3b9.js","assets/index-3d3985e8.js","assets/fade-250784e4.js","assets/index-70b91bba.js","assets/index-c926c066.js","assets/Upload-4662cb06.js","assets/DeleteOutlined-25685737.js","assets/DownloadOutlined-6cd35f11.js","assets/DeleteOutlined-1abe9ead.js","assets/InfoCircleOutlined-638c82a1.js","assets/MoreOutlined-d4a00d34.js","assets/FileImageOutlined-7a66d70c.js","assets/index-ade8483e.js","assets/data_objects-6cb90192.js","assets/data_objects-d21e859c.js","assets/HeartOutlined-68c50cd8.js","assets/index-be2a73ad.js","assets/EditOutlined-401a1613.js","assets/transButton-e7e285d6.js","assets/index-21be64ab.js","assets/index-6690d794.js","assets/InfoCircleFilled-acf8006b.js","assets/InfoCircleFilled-baaa675e.js","assets/MessageOutlined-84fb512e.js","assets/ExclamationCircleOutlined-bc3ad03d.js","assets/feeds-eb3240d6.css"]).then(a=>({default:a.PostsComponent}))),ba=o.lazy(()=>K(()=>import("./class_topics-c35c7a0c.js"),["assets/class_topics-c35c7a0c.js","assets/index-3ee95507.js","assets/index-5e5904d3.css","assets/ckeditor-69442fe0.js","assets/data_objects-6cb90192.js","assets/data_objects-d21e859c.js","assets/index-413f080f.js","assets/index-ea22eaf3.js","assets/index-ccce498a.js","assets/localeData-61e9bfbc.js","assets/SwapRightOutlined-c4e52b1e.js","assets/SinglePicker-4f8d7753.js","assets/index-8a5c8c79.js","assets/UpOutlined-7082c42f.js","assets/InputNumber-488995c2.js","assets/index.esm-4bdeb277.js","assets/files_component-683c523e.js","assets/file_item_component-7d34923e.js","assets/index-e840324c.js","assets/defineProperty-eb4a8fb2.js","assets/index-ade8483e.js","assets/pdf_document_viewer-c63e7f7d.js","assets/index-f53a7735.js","assets/SecurityScanOutlined-4da01689.js","assets/index-94377945.js","assets/Skeleton-188a3216.js","assets/DotChartOutlined-f39c986e.js","assets/index-422314c8.js","assets/index-83878f15.js","assets/index-95dcb07d.js","assets/ActionButton-ec6aa8b6.js","assets/index-be2a73ad.js","assets/EditOutlined-401a1613.js","assets/transButton-e7e285d6.js","assets/index-21be64ab.js","assets/index-d5e9db55.js","assets/index-8d1d76b6.js","assets/index-dfc68cd1.js","assets/Image-73433711.js","assets/DialogWrap-0869358d.js","assets/ZoomOutOutlined-4d40b3b9.js","assets/index-3d3985e8.js","assets/fade-250784e4.js","assets/DeleteOutlined-1abe9ead.js","assets/DeleteOutlined-25685737.js","assets/DownloadOutlined-e311890a.js","assets/DownloadOutlined-6cd35f11.js","assets/InfoCircleOutlined-638c82a1.js","assets/MoreOutlined-d4a00d34.js","assets/SaveOutlined-44e0f9d2.js","assets/file_item_component-3ade1005.css","assets/index-6690d794.js","assets/InfoCircleFilled-acf8006b.js","assets/InfoCircleFilled-baaa675e.js","assets/SmileOutlined-4f44ad99.js","assets/ExclamationCircleOutlined-bc3ad03d.js","assets/SearchOutlined-8bbe513e.js","assets/index-c926c066.js","assets/Upload-4662cb06.js","assets/VideoCameraOutlined-10ace64b.js","assets/Collapse-05422331.js","assets/index-58d13a13.js","assets/SearchOutlined-57b520e5.js","assets/FolderAddOutlined-9cde3711.js","assets/BookOutlined-3427b0e9.js","assets/CloseOutlined-eb2ea69b.js","assets/PlusCircleFilled-970ea878.js"]).then(a=>({default:a.ClassTopics}))),Ca=o.lazy(()=>K(()=>import("./class_payments-8281765b.js"),["assets/class_payments-8281765b.js","assets/index-3ee95507.js","assets/index-5e5904d3.css","assets/data_objects-6cb90192.js","assets/data_objects-d21e859c.js","assets/Skeleton-188a3216.js","assets/DotChartOutlined-f39c986e.js","assets/index-d5e9db55.js","assets/index-8d1d76b6.js","assets/index-95dcb07d.js","assets/SearchOutlined-57b520e5.js","assets/ExclamationCircleOutlined-bc3ad03d.js"]).then(a=>({default:a.ClassPayments}))),wa=o.lazy(()=>K(()=>import("./class_disbursements-42b46ccb.js"),["assets/class_disbursements-42b46ccb.js","assets/index-3ee95507.js","assets/index-5e5904d3.css","assets/data_objects-6cb90192.js","assets/data_objects-d21e859c.js","assets/index-ade8483e.js","assets/index-69874f42.js","assets/Skeleton-188a3216.js","assets/DotChartOutlined-f39c986e.js","assets/index-d5e9db55.js","assets/index-8d1d76b6.js","assets/index-95dcb07d.js","assets/SearchOutlined-57b520e5.js","assets/ExclamationCircleOutlined-bc3ad03d.js"]).then(a=>({default:a.ClassDisbursement}))),Sa=a=>{const[t,r]=o.useState(),[n,s]=o.useState(!0),[i,l]=o.useState("1"),{push:u}=Se(),f=Be(),x=async(p,y)=>{const{data:b}=await E.custom({url:"",method:"post",meta:{operation:"publishDarasa",variables:{id:{value:parseInt(p.toString()),type:"Int",required:!0},publish:{value:y,type:"Boolean",required:!0}},fields:["success","message",{darasa:he}]}}).catch(()=>(d.remove(),d.error("Error publishing class"),{data:null})).then(C=>C);d.remove(),b&&b.success?(r(b.darasa),d.success(b.message)):d.error(b.message)},v=async p=>{const{data:y}=await E.custom({url:"",method:"get",meta:{operation:"darasa",variables:{id:{value:parseInt(p.toString()),type:"Int",required:!0}},fields:he}}).catch(()=>(d.error("Error fetching darasa"),{data:null})).then(b=>b);y&&(r(y),s(!1))};return o.useEffect(()=>{v(f.id),localStorage.getItem("currentClass")===f.id.toString()?l(localStorage.getItem("classCurrentTabIndex")??"1"):(localStorage.setItem("currentClass",f.id.toString()),l("1"))},[f.id]),e.jsx(e.Fragment,{children:e.jsxs(oe,{spinning:n,children:[e.jsx("div",{style:{marginTop:5,marginBottom:5},children:e.jsx(ne,{children:e.jsxs(D,{children:[e.jsx(D.Item,{children:e.jsx("a",{onClick:()=>u("/"),children:"Home"})}),e.jsx(D.Item,{children:e.jsx("a",{onClick:()=>u("/oclass"),children:"OClass"})}),e.jsx(D.Item,{children:e.jsx("a",{onClick:()=>u("/oclass"),children:"Classes"})}),e.jsxs(D.Item,{children:["Class Session",e.jsx(Ut,{}),t!=null&&t.name?e.jsxs("span",{style:{color:"orange"},children:[t==null?void 0:t.name," - ","{"+(t==null?void 0:t.code)+"}"]}):e.jsx(e.Fragment,{})]})]})})}),(t==null?void 0:t.isBlocked)&&e.jsx(Ne,{severity:"warning",sx:{fontSize:18},children:"You have been blocked from this class, please contact the class owner for more information."}),!(t!=null&&t.isBlocked)&&e.jsx("div",{style:{marginTop:10,background:"white",padding:10},children:e.jsxs(pt,{type:"card",tabBarExtraContent:e.jsxs(e.Fragment,{children:[(t==null?void 0:t.canManage)&&e.jsx(Xe,{title:e.jsx(R,{sx:{fontSize:20},children:t!=null&&t.published?"Are you sure you want to unpublish this class?":"Are you sure you want to publish this class?"}),description:e.jsx(R,{sx:{fontSize:18,width:"20vw"},children:t!=null&&t.published?"This class will be unpublished and students will not be able to see it. and it will be unlisted from Market Place":"This class will be published and students will be able to see it. And it will be listed in Market Place"}),onConfirm:()=>{console.log("publishing class"),x(t==null?void 0:t.id,!(t!=null&&t.published))},okText:t!=null&&t.published?"Yes, Unpublish":"Yes, Publish",cancelText:"No",children:e.jsx(L,{icon:t!=null&&t.published?e.jsx(Qt,{}):e.jsx(Xt,{}),disabled:!(t!=null&&t.canManage),children:t!=null&&t.published?"Unpublish":"Publish"})}),e.jsx(L,{icon:e.jsx(Jt,{}),disabled:!(t!=null&&t.canManage),children:"Configs"})]}),activeKey:i,onTabClick:p=>{l(p.toString()),localStorage.setItem("classCurrentTabIndex",p)},children:[e.jsx(X,{tab:"Class Feeds",children:e.jsx(o.Suspense,{fallback:e.jsx(ee,{}),children:e.jsx(ja,{id:f.id,canManage:t==null?void 0:t.canManage})})},"1"),e.jsx(X,{tab:"Files",children:e.jsx(o.Suspense,{fallback:e.jsx(ee,{}),children:e.jsx(ga,{id:f.id,canManage:t==null?void 0:t.canManage})})},"2"),e.jsx(X,{tab:"Connected Drives",children:e.jsx(o.Suspense,{fallback:e.jsx(ee,{}),children:e.jsx(ma,{id:f.id,canManage:t==null?void 0:t.canManage})})},"3"),e.jsx(X,{tab:"Topics",children:e.jsx(o.Suspense,{fallback:e.jsx(ee,{}),children:e.jsx(ba,{id:f.id,canManage:t==null?void 0:t.canManage})})},"12"),e.jsx(X,{tab:"Resources Links",children:e.jsx(o.Suspense,{fallback:e.jsx(ee,{}),children:e.jsx(pa,{id:f.id,canManage:t==null?void 0:t.canManage})})},"4"),e.jsx(X,{tab:"Videos",children:e.jsx(o.Suspense,{fallback:e.jsx(ee,{}),children:e.jsx(va,{id:f.id,canManage:t==null?void 0:t.canManage})})},"5"),e.jsx(X,{tab:"Virtual Sessions",disabled:!1,children:e.jsx(o.Suspense,{fallback:e.jsx(ee,{}),children:e.jsx(ya,{id:f.id,canManage:t==null?void 0:t.canManage})})},"6"),e.jsx(X,{tab:"Assignments",disabled:!1,children:e.jsx(o.Suspense,{fallback:e.jsx(ee,{}),children:e.jsx(fa,{id:f.id,canManage:t==null?void 0:t.canManage})})},"7"),e.jsx(X,{tab:"Announcements",children:e.jsx(o.Suspense,{fallback:e.jsx(ee,{}),children:e.jsx(ha,{id:f.id,canManage:t==null?void 0:t.canManage})})},"8"),e.jsx(X,{tab:"Students",children:e.jsx(xa,{id:f.id,canManage:t==null?void 0:t.canManage})},"9"),(t==null?void 0:t.payable)&&(t==null?void 0:t.canManage)&&e.jsxs(e.Fragment,{children:[e.jsx(X,{tab:"Payments",children:e.jsx(o.Suspense,{fallback:e.jsx(ee,{}),children:e.jsx(Ca,{id:f.id,canManage:t==null?void 0:t.canManage})})},"10"),e.jsx(X,{tab:"Disbursements",children:e.jsx(o.Suspense,{fallback:e.jsx(ee,{}),children:e.jsx(wa,{id:f.id,canManage:t==null?void 0:t.canManage})})},"11")]})]})})]})})},yt=a=>{const[t,r]=o.useState(),[n,s]=o.useState(!1),[i,l]=o.useState(!1),[u,f]=o.useState(""),[x,v]=o.useState([]),[p,y]=o.useState(""),[b]=P.useForm(),[C,I]=o.useState(!1),{push:N}=Se(),A=async w=>{const{data:h}=await E.custom({url:"",method:"post",meta:{operation:"createDarasaOrder",variables:{darasaId:{value:parseInt(w.darasa_id.toString()),type:"Int",required:!0},phone:{value:w.phone,type:"String",required:!0}},fields:["success","message",{darasaOrder:["id","phone","isPaid","paymentDate","amount","receiptNumber"]}]}}).catch(()=>(d.remove(),d.error("Error Creating Darasa Order"),{data:null})).then(m=>m);h&&(h.success?(I(!0),r(h.darasaOrder),d.success(h.message)):(I(!1),d.error(h.message)))},F=async()=>{const{data:w}=await E.custom({url:"",method:"get",meta:{operation:"paymentSupportedTelecomCarriers",variables:{},fields:[{results:["id","name"]}]}}).catch(()=>(d.remove(),d.error("Error getting supported carriers"),{data:null})).then(h=>h);if(w){const h=w.results,m=[];h.forEach(j=>{m.push(j.name)}),v(m)}},c=async w=>{const{data:h}=await E.custom({url:"",method:"get",meta:{operation:"darasaOrder",variables:{id:{value:w,type:"Int",required:!0}},fields:["id","phone","isPaid","paymentDate","amount","receiptNumber"]}}).catch(()=>(d.remove(),d.error("Error fetching order details"),{data:null})).then(m=>m);h&&r(h)},M=async w=>{s(!0);const{data:h}=await E.custom({url:"",method:"post",meta:{operation:"validateMobilePhoneNumber",variables:{phone:{value:w,type:"String",required:!0}},fields:["success","message","carrier","formattedPhone"]}}).catch(()=>(d.remove(),d.error("Error Validating Mobile Phone Number"),{data:null})).then(m=>m);return h&&(l(h.success),h.success||(f(h.message),y(h.carrier))),s(!1),h},S=()=>e.jsxs("div",{children:[e.jsxs(V,{title:"",column:1,children:[e.jsx(V.Item,{label:"Class Name",children:a.darasa.name}),e.jsx(V.Item,{label:"Class Code",children:a.darasa.code}),e.jsx(V.Item,{label:"Cost",children:e.jsxs("span",{style:{fontSize:22},children:[a.darasa.price.toLocaleString(),"/= Tsh"]})})]}),e.jsxs(P,{layout:"vertical",form:b,requiredMark:!0,autoComplete:"off",onFinish:async w=>{console.log(w),w.darasa_id=a.darasa.id,A(w)},children:[e.jsx(P.Item,{name:"phone",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Mobile Phone Number"}),p.length>0&&e.jsx(ue,{color:"green",style:{marginLeft:10},children:p}),n&&e.jsx(oe,{spinning:n})]}),rules:[{required:!0,type:"string",message:"Required"},{validator:async(w,h)=>{if(h.length>=10){if(!n){const m=await M(h).then(j=>j);if(m!=null&&m.success)y(m.carrier),l(!0);else return y(""),Promise.reject(m==null?void 0:m.message)}}else l(!1)}}],children:e.jsx(le,{size:"large",placeholder:"Mobile Phone Number ..."})}),x.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{children:"Supported Payment Merchants"}),e.jsx("span",{children:x.map(w=>e.jsx(ue,{color:"red",children:w}))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(L,{type:"primary",size:"large",htmlType:"submit",disabled:!i,children:"Pay"})})]})]});return o.useEffect(()=>{F();const w=setInterval(()=>{C&&t&&!t.isPaid&&c(t.id)},5e3);return()=>clearInterval(w)},[a.randKey]),t&&t.isPaid?e.jsxs("div",{children:[e.jsx(te.Alert,{message:"Congratulations, Payment Received Successfully and you have been enrolled to the "+a.darasa.name+" class",type:"success",showIcon:!0}),t&&e.jsxs(V,{title:"Payment Receipt",column:1,children:[e.jsx(V.Item,{label:"Receipt Number",children:t.receiptNumber}),e.jsx(V.Item,{label:"Phone Number",children:t.phone}),e.jsxs(V.Item,{label:"Amount Paid",children:[t.amount.toLocaleString(),"/= Tsh"]}),e.jsx(V.Item,{label:"Payment Date",children:t.paymentDate})]}),e.jsx("span",{style:{marginTop:10},children:e.jsxs(Et,{justify:"space-between",style:{marginTop:20},children:[e.jsx(L,{type:"primary",size:"large",onClick:()=>{N("/oclass")},children:"View Your Enrolled Classes"}),e.jsx(L,{type:"primary",size:"large",onClick:()=>{a.onFinish()},children:"Continue Shopping"})]})})]}):C?e.jsx(e.Fragment,{children:e.jsx("h2",{children:"Payment Request Sent, Please check your phone and confirm the payment to proceed"})}):S()},Da=()=>{const[a,t]=o.useState(!0),[r,n]=o.useState(!1),[s,i]=o.useState(),[l,u]=o.useState(!1),f=Be(),x=async p=>{t(!0);const{data:y}=await E.custom({url:"",method:"post",meta:{operation:"checkDarasaConnected",variables:{id:{value:parseInt(p.toString()),type:"Int",required:!0}},fields:["success","message",{darasa:he}]}}).catch(()=>({data:null})).then(b=>b);t(!1),y&&(n(y.success),i(y.darasa))},v=async p=>{const{data:y}=await E.custom({url:"",method:"post",meta:{operation:"connectDarasa",variables:{id:{value:parseInt(p.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>({data:null})).then(b=>b);y?(n(y.success),i(y.darasa),d.success(y.message),y.success&&x(f.id)):d.error(y.message)};return o.useEffect(()=>{document.title=Q.system_name+": Class Session",x(f.id)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginTop:0},children:[a&&e.jsx(e.Fragment,{children:e.jsx(H,{children:e.jsx(Y,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(oe,{tip:"Checking Connection",size:"large",style:{color:"red"},children:e.jsx("div",{className:"content",style:{height:"50vh",width:"100vh"}})})})})}),r&&e.jsx(Sa,{}),!r&&!a&&e.jsxs(e.Fragment,{children:[e.jsx(ye,{children:e.jsxs(V,{title:"Class Info's",children:[e.jsx(V.Item,{label:"Class Name/Title",children:s==null?void 0:s.name}),e.jsx(V.Item,{label:"Class Code",children:s==null?void 0:s.code}),e.jsx(V.Item,{label:"Created By",children:e.jsx("a",{children:s==null?void 0:s.user.fullName})}),(s==null?void 0:s.startDate)&&e.jsx(V.Item,{label:"Start Date",children:we(s==null?void 0:s.startDate).format("YYYY-MM-DD")}),(s==null?void 0:s.endDate)&&e.jsx(V.Item,{label:"End Date",children:we(s==null?void 0:s.endDate).format("YYYY-MM-DD")}),(s==null?void 0:s.payable)&&e.jsxs(V.Item,{label:"Price",children:[s==null?void 0:s.price.toLocaleString(),"/= Tsh"]})]})}),e.jsx(H,{children:e.jsxs(Y,{span:24,style:{display:"flex",justifyContent:"center"},children:[(s==null?void 0:s.payable)&&e.jsx(L,{size:"large",onClick:()=>u(!0),children:"Pay for This Class"}),!(s!=null&&s.payable)&&e.jsx(Xe,{title:"Are you sure to Connect/Join to this Class",onConfirm:()=>v(f.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(L,{size:"large",children:"Connect/Join"})})]})})]})]}),e.jsx(re,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Purchasing"}),e.jsx("span",{style:{marginLeft:10,fontWeight:"bolder"},children:s==null?void 0:s.name})]}),width:"35vw",open:l,onClose:p=>u(p),children:e.jsx(yt,{darasa:s,randKey:Math.random()})})]})},Ma=()=>(o.useEffect(()=>{document.title=Q.system_name+": Connected Classes"},[]),e.jsxs(R,{children:[e.jsx(ne,{children:e.jsxs(D,{children:[e.jsx(D.Item,{children:e.jsx(U,{to:"/",children:"Home"})}),e.jsx(D.Item,{children:e.jsx(U,{to:"/oclass",children:"OClass"})}),e.jsx(D.Item,{children:"Connected Classes"})]})}),e.jsx(R,{sx:{mt:2},children:e.jsx(Ae,{mode:"connected"})})]})),{Meta:Pa}=ye,ka=a=>{const[t,r]=o.useState([]),[n,s]=o.useState(),[i,l]=o.useState(!1),[u,f]=o.useState(!1),[x,v]=o.useState(!0),[p,y]=o.useState(1),[b,C]=o.useState(0),[I]=P.useForm(),A=!Kt.useBreakpoint().lg,F=S=>{s(S),f(!0)},c=S=>{s(S),l(!0)},M=async(S,w="",h=!1)=>{const{data:m}=await E.custom({url:"",method:"get",meta:{operation:"madarasaToBuy",variables:{page:{value:S,type:"Int",required:!0},key:{value:w,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:he}]}}).catch(()=>(d.remove(),d.error("Error getting darasas"),{data:null})).then(j=>j);m&&(C(m.total),y(m.page),r([...m.results])),v(!1)};return o.useEffect(()=>{M(1)},[]),x?e.jsx(e.Fragment,{children:e.jsx(Ke,{loading:x,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(H,{style:{display:"flex",justifyContent:"start"},children:e.jsx(Y,{span:A?24:10,children:e.jsx(P,{layout:"vertical",form:I,onFinish:S=>{y(0),M(0,S.key,!0)},children:e.jsx(P.Item,{name:"key",children:e.jsx(le,{size:"large",placeholder:"Search Classes...",prefix:e.jsx(Ie,{}),autoComplete:"off",allowClear:!0})})})})}),t.length>0?e.jsx(H,{align:"top",children:t.map(S=>e.jsx(Y,{span:A?24:8,children:e.jsxs(ye,{hoverable:S.isActive,style:{marginRight:10,marginBottom:10},actions:[e.jsx(L,{size:"large",onClick:()=>c(S),children:"Read More"}),e.jsx(L,{size:"large",onClick:()=>F(S),disabled:!S.canPurchase,children:"Buy Now"})],children:[e.jsx("div",{style:{height:window.innerHeight/3,background:"url("+S.cover+")",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",marginBottom:10,borderRadius:5}}),e.jsx(Pa,{title:e.jsx(e.Fragment,{children:e.jsxs(xe,{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("h2",{children:[e.jsx(Ue,{title:S.name,children:et(S.name,10)}),e.jsx(ue,{color:"red",style:{marginLeft:10},children:S.code})]}),e.jsxs("span",{style:{fontSize:24},children:[S.price.toLocaleString(),"/="]})]})}),description:e.jsx(e.Fragment,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:et(S.description,100)}})})})]})}))}):e.jsx(Ne,{severity:"info",sx:{fontSize:18},children:"No Classes Found"}),e.jsx(te.Pagination,{current:p,total:b,onChange:S=>{M(S)},showSizeChanger:!1,style:{marginTop:10}}),e.jsx(Je,{title:n==null?void 0:n.name,width:"50vw",anchor:"right",onClose:S=>l(S),open:i,noOverFlow:!0,children:e.jsxs(V,{title:"",column:1,children:[e.jsx(V.Item,{label:"Class Name",children:n==null?void 0:n.name}),e.jsx(V.Item,{label:"Class Code#",children:n==null?void 0:n.code}),e.jsxs(V.Item,{label:"Cost",children:[n==null?void 0:n.price," Tsh"]}),e.jsx(V.Item,{label:"Description",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:n==null?void 0:n.description}})}),e.jsx(V.Item,{label:"",children:e.jsx(L,{size:"large",onClick:()=>F(n),disabled:!(n!=null&&n.canPurchase),children:"Buy Now"})})]})}),e.jsx(re,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Purchasing"}),e.jsx("span",{style:{marginLeft:10,fontWeight:"bolder"},children:n==null?void 0:n.name})]}),width:"35vw",open:u,onClose:S=>f(S),children:e.jsx(yt,{darasa:n,randKey:Math.random(),onFinish:()=>{f(!1),M(1,"",!1)}})})]})},Ta=()=>(o.useEffect(()=>{document.title=Q.system_name+": Classes Marketplace"},[]),e.jsxs(R,{children:[e.jsx(ne,{children:e.jsxs(D,{children:[e.jsx(D.Item,{children:e.jsx(U,{to:"/",children:"Home"})}),e.jsx(D.Item,{children:e.jsx(U,{to:"/oclass",children:"OClass"})}),e.jsx(D.Item,{children:"Classes Marketplace"})]})}),e.jsx(R,{sx:{mt:2},children:e.jsx(ka,{randKey:Math.random()})})]})),Ia=()=>(o.useEffect(()=>{document.title=Q.system_name+": My Classes"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(ne,{children:e.jsxs(D,{children:[e.jsx(D.Item,{children:e.jsx(U,{to:"/",children:"Home"})}),e.jsx(D.Item,{children:e.jsx(U,{to:"/oclass",children:"OClass"})}),e.jsx(D.Item,{children:"My Classes"})]})}),e.jsx(R,{sx:{mt:2},children:e.jsx(Ae,{mode:"my"})})]})),Oa=a=>{const[t,r]=o.useState(!1),[n,s]=o.useState(0),[i,l]=o.useState(0),[u,f]=o.useState(1),[x,v]=o.useState(25),[p,y]=o.useState(""),[b,C]=o.useState([]),[I,N]=o.useState(),[A]=P.useForm(),[F,c]=o.useState(!1);Se();const M=async m=>{N(m),c(!0)},S=async(m,j="",O=25)=>{r(!0);const{data:W}=await E.custom({url:"",method:"get",meta:{operation:"myDarasaPurchases",variables:{page:{value:m,type:"Int",required:!0},key:{value:j,type:"String",required:!1},pageSize:{value:O,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:zt}]}}).catch(Z=>(console.log(Z),d.error("Error getting Bills"),{data:null})).then(Z=>Z);W&&(s(W.total),l(W.pages),f(W.page),C(W.results)),r(!1)},w=async m=>{const{data:j}=await E.custom({url:"",method:"post",meta:{operation:"deleteDarasaOrder",variables:{id:{value:m,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error deleting Order"),{data:null})).then(O=>O);j&&C(b.filter(O=>O.id!==m))},h=[{title:"Bill#",dataIndex:"billNumber",fixed:!0,render:(m,j,O)=>{var W;return e.jsx("span",{children:e.jsx("a",{children:(W=j==null?void 0:j.bill)==null?void 0:W.billNumber})})}},{title:"Class Name",dataIndex:"bookTitle",fixed:!0,render:(m,j,O)=>{var W;return e.jsx("span",{children:e.jsx("a",{children:(W=j==null?void 0:j.darasa)==null?void 0:W.name})})}},{title:"Bill Amount",dataIndex:"billAmount",fixed:!0,render:(m,j,O)=>e.jsxs("span",{children:[j.price," Tsh"]})},{title:"Paid",dataIndex:"isPaid",fixed:!0,render:(m,j,O)=>e.jsx("span",{children:j.isPaid?e.jsx(ue,{color:"green",children:"Yes"}):e.jsx(ue,{color:"red",children:"No"})})},{title:"Created",dataIndex:"created",render:(m,j,O)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(j.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(m,j,O)=>e.jsx("a",{children:j!=null&&j.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(m,j,O)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[!j.isPaid&&e.jsx(Xe,{title:"Are you sure to delete this Order?",onConfirm:()=>w(j.id),okText:"Yes",cancelText:"No",disabled:!(j!=null&&j.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(L,{icon:e.jsx(xt,{}),disabled:!(j!=null&&j.canDelete),size:"large"})}),j.isPaid&&e.jsx(Ue,{title:"Print Receipt",children:e.jsx(L,{icon:e.jsx(ta,{}),size:"large"})}),!j.isPaid&&e.jsx(Ue,{title:"View Order Details",children:e.jsx(L,{icon:e.jsx(Ft,{}),size:"large",onClick:()=>M(j)})})]})}];return o.useEffect(()=>{S(u,"",25)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ea,{offsetTop:75,children:e.jsx(H,{style:{display:"flex",justifyContent:"center",marginTop:20},children:e.jsx(Y,{span:10,children:e.jsx(P,{layout:"vertical",form:A,onFinish:m=>{S(1,m.key,25)},children:e.jsx(P.Item,{name:"key",children:e.jsx(le,{size:"large",placeholder:"Search Bill(s)...",prefix:e.jsx(Ie,{}),autoComplete:"off",allowClear:!0})})})})})}),e.jsx(H,{children:e.jsx(Y,{span:24,children:e.jsx(_t,{loading:t,columns:h,dataSource:b,pagination:{onChange:(m,j)=>{v(j),S(m,p,j)},total:n,pageSize:x,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})})}),e.jsx(re,{title:"Order Details & Payment",open:F,width:"50vw",onClose:m=>c(m),children:e.jsx(Zt,{book:I==null?void 0:I.darasa})})]})},Ea=()=>(o.useEffect(()=>{document.title=Q.system_name+": Classes Orders"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(ne,{children:e.jsxs(D,{children:[e.jsx(D.Item,{children:e.jsx(U,{to:"/",children:"Home"})}),e.jsx(D.Item,{children:e.jsx(U,{to:"/oclass",children:"OClass"})}),e.jsx(D.Item,{children:"Classes Orders"})]})}),e.jsx(Oa,{randKey:Math.random()})]})),{Option:_a}=ae,at=[{value:"",label:"Select Duration Type"},{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"}],Fa=a=>{const[t,r]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(P,{layout:"vertical",form:a.form,onFinish:n=>{n.description=t,a.onFinish(n),r("")},requiredMark:!1,children:[e.jsx(P.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(le,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(P.Item,{name:"startDate",label:"start Date",rules:[{required:!0,type:"date",message:"Please select date"}],children:e.jsx(Qe,{showTime:{format:"HH:mm"},disabledDate:n=>{const s=we().format("YYYY-MM-DD");return n&&n<we(s,"YYYY-MM-DD")},style:{width:"100%"},popupStyle:{zIndex:9999}})}),e.jsxs(H,{children:[e.jsx(Y,{span:12,children:e.jsx(P.Item,{name:"duration",label:"Duration",style:{width:"100%"},rules:[{required:!0,type:"integer",message:"Enter Duration"}],children:e.jsx(Te,{min:1,defaultValue:1,style:{width:"100%"},size:"large"})})}),e.jsx(Y,{span:12,children:e.jsx(P.Item,{name:"durationType",label:"Duration Type",style:{width:"100%"},rules:[{required:!0,type:"string",message:"Please select duration type"}],children:e.jsx(ae,{defaultValue:at[0].value,size:"large",style:{width:"100%"},dropdownStyle:{zIndex:9999},children:at.map(n=>e.jsx(_a,{children:n.label},n.value))})})})]}),e.jsx(P.Item,{name:"isPublic",label:"Availability",rules:[{required:!1,type:"boolean"}],children:e.jsx($e,{defaultChecked:!0,disabled:!0,checked:!0,value:!0,children:"Public Available"})}),e.jsx("h3",{children:"Description"}),e.jsx(He.CKEditor,{editor:Ge,data:t,onReady:n=>{n.editing.view.change(s=>{s.setStyle("min-height","100px",n.editing.view.document.getRoot())})},onChange:(n,s)=>{const i=s.getData();r(i)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(L,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})};function ve(a){if(a===null||a===!0||a===!1)return NaN;var t=Number(a);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function G(a,t){if(t.length<a)throw new TypeError(a+" argument"+(a>1?"s":"")+" required, but only "+t.length+" present")}function se(a){G(1,arguments);var t=Object.prototype.toString.call(a);return a instanceof Date||dt(a)==="object"&&t==="[object Date]"?new Date(a.getTime()):typeof a=="number"||t==="[object Number]"?new Date(a):((typeof a=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function qa(a,t){G(2,arguments);var r=se(a).getTime(),n=ve(t);return new Date(r+n)}var La={};function ze(){return La}function Na(a){var t=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return t.setUTCFullYear(a.getFullYear()),a.getTime()-t.getTime()}function Aa(a){return G(1,arguments),a instanceof Date||dt(a)==="object"&&Object.prototype.toString.call(a)==="[object Date]"}function za(a){if(G(1,arguments),!Aa(a)&&typeof a!="number")return!1;var t=se(a);return!isNaN(Number(t))}function Va(a,t){G(2,arguments);var r=ve(t);return qa(a,-r)}var Ya=864e5;function Wa(a){G(1,arguments);var t=se(a),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),s=r-n;return Math.floor(s/Ya)+1}function qe(a){G(1,arguments);var t=1,r=se(a),n=r.getUTCDay(),s=(n<t?7:0)+n-t;return r.setUTCDate(r.getUTCDate()-s),r.setUTCHours(0,0,0,0),r}function jt(a){G(1,arguments);var t=se(a),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var s=qe(n),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var l=qe(i);return t.getTime()>=s.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function Ra(a){G(1,arguments);var t=jt(a),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var n=qe(r);return n}var Ua=6048e5;function $a(a){G(1,arguments);var t=se(a),r=qe(t).getTime()-Ra(t).getTime();return Math.round(r/Ua)+1}function Le(a,t){var r,n,s,i,l,u,f,x;G(1,arguments);var v=ze(),p=ve((r=(n=(s=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:v.weekStartsOn)!==null&&n!==void 0?n:(f=v.locale)===null||f===void 0||(x=f.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&r!==void 0?r:0);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var y=se(a),b=y.getUTCDay(),C=(b<p?7:0)+b-p;return y.setUTCDate(y.getUTCDate()-C),y.setUTCHours(0,0,0,0),y}function bt(a,t){var r,n,s,i,l,u,f,x;G(1,arguments);var v=se(a),p=v.getUTCFullYear(),y=ze(),b=ve((r=(n=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:y.firstWeekContainsDate)!==null&&n!==void 0?n:(f=y.locale)===null||f===void 0||(x=f.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(b>=1&&b<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=new Date(0);C.setUTCFullYear(p+1,0,b),C.setUTCHours(0,0,0,0);var I=Le(C,t),N=new Date(0);N.setUTCFullYear(p,0,b),N.setUTCHours(0,0,0,0);var A=Le(N,t);return v.getTime()>=I.getTime()?p+1:v.getTime()>=A.getTime()?p:p-1}function Ba(a,t){var r,n,s,i,l,u,f,x;G(1,arguments);var v=ze(),p=ve((r=(n=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:v.firstWeekContainsDate)!==null&&n!==void 0?n:(f=v.locale)===null||f===void 0||(x=f.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&r!==void 0?r:1),y=bt(a,t),b=new Date(0);b.setUTCFullYear(y,0,p),b.setUTCHours(0,0,0,0);var C=Le(b,t);return C}var Ha=6048e5;function Ga(a,t){G(1,arguments);var r=se(a),n=Le(r,t).getTime()-Ba(r,t).getTime();return Math.round(n/Ha)+1}function q(a,t){for(var r=a<0?"-":"",n=Math.abs(a).toString();n.length<t;)n="0"+n;return r+n}var Ja={y:function(t,r){var n=t.getUTCFullYear(),s=n>0?n:1-n;return q(r==="yy"?s%100:s,r.length)},M:function(t,r){var n=t.getUTCMonth();return r==="M"?String(n+1):q(n+1,2)},d:function(t,r){return q(t.getUTCDate(),r.length)},a:function(t,r){var n=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,r){return q(t.getUTCHours()%12||12,r.length)},H:function(t,r){return q(t.getUTCHours(),r.length)},m:function(t,r){return q(t.getUTCMinutes(),r.length)},s:function(t,r){return q(t.getUTCSeconds(),r.length)},S:function(t,r){var n=r.length,s=t.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,n-3));return q(i,r.length)}};const de=Ja;var Ce={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Qa={G:function(t,r,n){var s=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){var s=t.getUTCFullYear(),i=s>0?s:1-s;return n.ordinalNumber(i,{unit:"year"})}return de.y(t,r)},Y:function(t,r,n,s){var i=bt(t,s),l=i>0?i:1-i;if(r==="YY"){var u=l%100;return q(u,2)}return r==="Yo"?n.ordinalNumber(l,{unit:"year"}):q(l,r.length)},R:function(t,r){var n=jt(t);return q(n,r.length)},u:function(t,r){var n=t.getUTCFullYear();return q(n,r.length)},Q:function(t,r,n){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(s);case"QQ":return q(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,r,n){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(s);case"qq":return q(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,r,n){var s=t.getUTCMonth();switch(r){case"M":case"MM":return de.M(t,r);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,r,n){var s=t.getUTCMonth();switch(r){case"L":return String(s+1);case"LL":return q(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,r,n,s){var i=Ga(t,s);return r==="wo"?n.ordinalNumber(i,{unit:"week"}):q(i,r.length)},I:function(t,r,n){var s=$a(t);return r==="Io"?n.ordinalNumber(s,{unit:"week"}):q(s,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):de.d(t,r)},D:function(t,r,n){var s=Wa(t);return r==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):q(s,r.length)},E:function(t,r,n){var s=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,r,n,s){var i=t.getUTCDay(),l=(i-s.weekStartsOn+8)%7||7;switch(r){case"e":return String(l);case"ee":return q(l,2);case"eo":return n.ordinalNumber(l,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,r,n,s){var i=t.getUTCDay(),l=(i-s.weekStartsOn+8)%7||7;switch(r){case"c":return String(l);case"cc":return q(l,r.length);case"co":return n.ordinalNumber(l,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,r,n){var s=t.getUTCDay(),i=s===0?7:s;switch(r){case"i":return String(i);case"ii":return q(i,r.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,r,n){var s=t.getUTCHours(),i=s/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,r,n){var s=t.getUTCHours(),i;switch(s===12?i=Ce.noon:s===0?i=Ce.midnight:i=s/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,r,n){var s=t.getUTCHours(),i;switch(s>=17?i=Ce.evening:s>=12?i=Ce.afternoon:s>=4?i=Ce.morning:i=Ce.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return de.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):de.H(t,r)},K:function(t,r,n){var s=t.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(s,{unit:"hour"}):q(s,r.length)},k:function(t,r,n){var s=t.getUTCHours();return s===0&&(s=24),r==="ko"?n.ordinalNumber(s,{unit:"hour"}):q(s,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):de.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):de.s(t,r)},S:function(t,r){return de.S(t,r)},X:function(t,r,n,s){var i=s._originalDate||t,l=i.getTimezoneOffset();if(l===0)return"Z";switch(r){case"X":return nt(l);case"XXXX":case"XX":return fe(l);case"XXXXX":case"XXX":default:return fe(l,":")}},x:function(t,r,n,s){var i=s._originalDate||t,l=i.getTimezoneOffset();switch(r){case"x":return nt(l);case"xxxx":case"xx":return fe(l);case"xxxxx":case"xxx":default:return fe(l,":")}},O:function(t,r,n,s){var i=s._originalDate||t,l=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+rt(l,":");case"OOOO":default:return"GMT"+fe(l,":")}},z:function(t,r,n,s){var i=s._originalDate||t,l=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+rt(l,":");case"zzzz":default:return"GMT"+fe(l,":")}},t:function(t,r,n,s){var i=s._originalDate||t,l=Math.floor(i.getTime()/1e3);return q(l,r.length)},T:function(t,r,n,s){var i=s._originalDate||t,l=i.getTime();return q(l,r.length)}};function rt(a,t){var r=a>0?"-":"+",n=Math.abs(a),s=Math.floor(n/60),i=n%60;if(i===0)return r+String(s);var l=t||"";return r+String(s)+l+q(i,2)}function nt(a,t){if(a%60===0){var r=a>0?"-":"+";return r+q(Math.abs(a)/60,2)}return fe(a,t)}function fe(a,t){var r=t||"",n=a>0?"-":"+",s=Math.abs(a),i=q(Math.floor(s/60),2),l=q(s%60,2);return n+i+r+l}const Xa=Qa;var st=function(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},Ct=function(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},Ka=function(t,r){var n=t.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return st(t,r);var l;switch(s){case"P":l=r.dateTime({width:"short"});break;case"PP":l=r.dateTime({width:"medium"});break;case"PPP":l=r.dateTime({width:"long"});break;case"PPPP":default:l=r.dateTime({width:"full"});break}return l.replace("{{date}}",st(s,r)).replace("{{time}}",Ct(i,r))},Za={p:Ct,P:Ka};const er=Za;var tr=["D","DD"],ar=["YY","YYYY"];function rr(a){return tr.indexOf(a)!==-1}function nr(a){return ar.indexOf(a)!==-1}function it(a,t,r){if(a==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(a==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(a==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(a==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var sr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ir=function(t,r,n){var s,i=sr[t];return typeof i=="string"?s=i:r===1?s=i.one:s=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};const or=ir;function Re(a){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):a.defaultWidth,n=a.formats[r]||a.formats[a.defaultWidth];return n}}var lr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ur={date:Re({formats:lr,defaultWidth:"full"}),time:Re({formats:cr,defaultWidth:"full"}),dateTime:Re({formats:dr,defaultWidth:"full"})};const hr=ur;var mr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fr=function(t,r,n,s){return mr[t]};const gr=fr;function Me(a){return function(t,r){var n=r!=null&&r.context?String(r.context):"standalone",s;if(n==="formatting"&&a.formattingValues){var i=a.defaultFormattingWidth||a.defaultWidth,l=r!=null&&r.width?String(r.width):i;s=a.formattingValues[l]||a.formattingValues[i]}else{var u=a.defaultWidth,f=r!=null&&r.width?String(r.width):a.defaultWidth;s=a.values[f]||a.values[u]}var x=a.argumentCallback?a.argumentCallback(t):t;return s[x]}}var pr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},xr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},vr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},yr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},jr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},br={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Cr=function(t,r){var n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},wr={ordinalNumber:Cr,era:Me({values:pr,defaultWidth:"wide"}),quarter:Me({values:xr,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Me({values:vr,defaultWidth:"wide"}),day:Me({values:yr,defaultWidth:"wide"}),dayPeriod:Me({values:jr,defaultWidth:"wide",formattingValues:br,defaultFormattingWidth:"wide"})};const Sr=wr;function Pe(a){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,s=n&&a.matchPatterns[n]||a.matchPatterns[a.defaultMatchWidth],i=t.match(s);if(!i)return null;var l=i[0],u=n&&a.parsePatterns[n]||a.parsePatterns[a.defaultParseWidth],f=Array.isArray(u)?Mr(u,function(p){return p.test(l)}):Dr(u,function(p){return p.test(l)}),x;x=a.valueCallback?a.valueCallback(f):f,x=r.valueCallback?r.valueCallback(x):x;var v=t.slice(l.length);return{value:x,rest:v}}}function Dr(a,t){for(var r in a)if(a.hasOwnProperty(r)&&t(a[r]))return r}function Mr(a,t){for(var r=0;r<a.length;r++)if(t(a[r]))return r}function Pr(a){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(a.matchPattern);if(!n)return null;var s=n[0],i=t.match(a.parsePattern);if(!i)return null;var l=a.valueCallback?a.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;var u=t.slice(s.length);return{value:l,rest:u}}}var kr=/^(\d+)(th|st|nd|rd)?/i,Tr=/\d+/i,Ir={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Or={any:[/^b/i,/^(a|c)/i]},Er={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},_r={any:[/1/i,/2/i,/3/i,/4/i]},Fr={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},qr={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Lr={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Nr={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ar={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Vr={ordinalNumber:Pr({matchPattern:kr,parsePattern:Tr,valueCallback:function(t){return parseInt(t,10)}}),era:Pe({matchPatterns:Ir,defaultMatchWidth:"wide",parsePatterns:Or,defaultParseWidth:"any"}),quarter:Pe({matchPatterns:Er,defaultMatchWidth:"wide",parsePatterns:_r,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Pe({matchPatterns:Fr,defaultMatchWidth:"wide",parsePatterns:qr,defaultParseWidth:"any"}),day:Pe({matchPatterns:Lr,defaultMatchWidth:"wide",parsePatterns:Nr,defaultParseWidth:"any"}),dayPeriod:Pe({matchPatterns:Ar,defaultMatchWidth:"any",parsePatterns:zr,defaultParseWidth:"any"})};const Yr=Vr;var Wr={code:"en-US",formatDistance:or,formatLong:hr,formatRelative:gr,localize:Sr,match:Yr,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Rr=Wr;var Ur=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$r=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Br=/^'([^]*?)'?$/,Hr=/''/g,Gr=/[a-zA-Z]/;function ot(a,t,r){var n,s,i,l,u,f,x,v,p,y,b,C,I,N,A,F,c,M;G(2,arguments);var S=String(t),w=ze(),h=(n=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:w.locale)!==null&&n!==void 0?n:Rr,m=ve((i=(l=(u=(f=r==null?void 0:r.firstWeekContainsDate)!==null&&f!==void 0?f:r==null||(x=r.locale)===null||x===void 0||(v=x.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&u!==void 0?u:w.firstWeekContainsDate)!==null&&l!==void 0?l:(p=w.locale)===null||p===void 0||(y=p.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=ve((b=(C=(I=(N=r==null?void 0:r.weekStartsOn)!==null&&N!==void 0?N:r==null||(A=r.locale)===null||A===void 0||(F=A.options)===null||F===void 0?void 0:F.weekStartsOn)!==null&&I!==void 0?I:w.weekStartsOn)!==null&&C!==void 0?C:(c=w.locale)===null||c===void 0||(M=c.options)===null||M===void 0?void 0:M.weekStartsOn)!==null&&b!==void 0?b:0);if(!(j>=0&&j<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!h.localize)throw new RangeError("locale must contain localize property");if(!h.formatLong)throw new RangeError("locale must contain formatLong property");var O=se(a);if(!za(O))throw new RangeError("Invalid time value");var W=Na(O),Z=Va(O,W),De={firstWeekContainsDate:m,weekStartsOn:j,locale:h,_originalDate:O},je=S.match($r).map(function($){var J=$[0];if(J==="p"||J==="P"){var ce=er[J];return ce($,h.formatLong)}return $}).join("").match(Ur).map(function($){if($==="''")return"'";var J=$[0];if(J==="'")return Jr($);var ce=Xa[J];if(ce)return!(r!=null&&r.useAdditionalWeekYearTokens)&&nr($)&&it($,t,String(a)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&rr($)&&it($,t,String(a)),ce(Z,$,h.localize,De);if(J.match(Gr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+J+"`");return $}).join("");return je}function Jr(a){var t=a.match(Br);return t?t[1].replace(Hr,"'"):a}const Qr=a=>{const{push:t}=Se(),r=()=>`linear-gradient(45deg, rgba(${Math.floor(Math.random()*255)},${Math.floor(Math.random()*255)},${Math.floor(Math.random()*255)},0.5), rgba(${Math.floor(Math.random()*255)},${Math.floor(Math.random()*255)},${Math.floor(Math.random()*255)},0.5))`;return e.jsxs(e.Fragment,{children:[e.jsx(ye,{size:"small",hoverable:!0,cover:e.jsx("div",{style:{position:"relative",width:"100%",height:"100%",background:r()},children:e.jsx("img",{alt:"example",src:"https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png",style:{mixBlendMode:"multiply",opacity:.1,objectFit:"cover",width:"100%",height:"100%"}})}),style:{marginLeft:3},children:e.jsx(tt.Item,{children:e.jsx(Ke,{avatar:!0,title:!1,loading:!1,active:!0,children:e.jsx(tt.Item.Meta,{title:e.jsx("a",{onClick:()=>a.darasa.canJoin?t("/oclass/virtual/class/session/"+a.darasa.id+"/"+a.darasa.token):d("You can't join this class"),children:a.darasa.name}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:a.darasa.description}),e.jsxs("p",{children:[e.jsxs(ue,{color:"green",children:["Start At:"," ",e.jsx("span",{style:{marginLeft:10},children:ot(new Date(a.darasa.startDate),"MMMM do, yyyy H:mma")})]}),e.jsxs(ue,{color:"green",children:["End In:",e.jsx("span",{style:{marginLeft:10},children:ot(new Date(a.darasa.endDate),"MMMM do, yyyy H:mma")})]}),a.darasa.canJoin?e.jsx(e.Fragment,{children:e.jsx(L,{onClick:()=>{t("/oclass/virtual/class/session/"+a.darasa.id+"/"+a.darasa.token)},children:"Join"})}):e.jsx(e.Fragment,{children:e.jsx(ue,{color:"red",children:"Not Joinable"})})]})]})})})})}),e.jsx("div",{style:{position:"absolute",top:10,right:0,display:"flex"},children:e.jsx(ct,{trigger:["click"],overlay:e.jsxs(ge,{children:[e.jsx(ge.Item,{icon:e.jsx(ra,{}),disabled:!a.darasa.canJoin,onClick:()=>t("/oclass/virtual/class/session/"+a.darasa.id+"/"+a.darasa.token),children:e.jsx("a",{children:"Join"})}),a.darasa.canDelete?e.jsx(ge.Item,{disabled:!a.darasa.canDelete,icon:e.jsx(xt,{}),onClick:()=>a.handleDarasaDelete(a.darasa.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}):e.jsx(e.Fragment,{}),e.jsx(ge.Item,{icon:e.jsx(na,{}),disabled:!a.darasa.canEdit,onClick:()=>a.handleDarasaEdit(a.darasa),children:e.jsx("a",{children:"Edit"})}),e.jsx(ge.Item,{icon:e.jsx(qt,{}),disabled:!a.darasa.canManage,onClick:()=>a.handleDarasaEdit(a.darasa),children:e.jsx("a",{children:"Manage Agenda's"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:n=>n.preventDefault(),children:e.jsx(ut,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})]})},Xr=a=>{const[t,r]=o.useState(!1),[n,s]=o.useState([]),[i,l]=o.useState(),[u,f]=o.useState(),[x,v]=o.useState(!0),[p,y]=o.useState(1),[b,C]=o.useState(0),[I,N]=o.useState(!0),[A]=P.useForm(),[F,c]=o.useState(!1);Se();const[M]=P.useForm(),[S,w]=o.useState(!1),[h,m]=o.useState(!1),j=T=>{l(T),m(!0)},O=async T=>{const{data:_}=await E.custom({url:"",method:"post",meta:{operation:"connectClass",variables:{id:{value:T,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error connecting to class"),{data:null})).then(B=>B);_&&(_.success?(w(!1),f(null),d(_.message),s(n.filter(B=>B.id!==T))):d.error(_.message))},W=async T=>{const{data:_}=await E.custom({url:"",method:"post",meta:{operation:"createVirtualClass",variables:{name:{value:T.name,type:"String",required:!0},description:{value:T.description,type:"String",required:!0},duration:{value:T.duration,type:"Int",required:!0},durationType:{value:T.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:T.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:We}]}}).catch(()=>(d.error("Error creating class"),{data:null})).then(B=>B);_&&(_.success?(d.success(_.message),c(!1),s([_.virtual,...n])):d.error(_.message))},Z=async T=>{const{data:_}=await E.custom({url:"",method:"post",meta:{operation:"editVirtualClass",variables:{id:{value:T.id,type:"Int",required:!0},name:{value:T.name,type:"String",required:!0},description:{value:T.description,type:"String",required:!0},duration:{value:T.duration,type:"Int",required:!0},durationType:{value:T.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:T.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:We}]}}).catch(()=>(d.error("Error editing class"),{data:null})).then(B=>B);_&&(_.success?(d.success(_.message),s(n.map(B=>B.id===_.virtual.id?_.virtual:B)),m(!1)):d.error(_.message))},De=()=>{M.resetFields(),c(!0)},je=async T=>{const{data:_}=await E.custom({url:"",method:"post",meta:{operation:"deleteVirtualClass",variables:{id:{value:T,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error deleting class"),{data:null})).then(B=>B);_&&(_.success?(d.success(_.message),s(n.filter(B=>B.id!==T))):d.error(_.message))},$=T=>{pe.confirm({title:"Deleting Virtual Class",icon:e.jsx(ke,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>je(T)})},J=async(T,_="",B=!1)=>{const{data:me}=await E.custom({url:"",method:"get",meta:{operation:"publicVirtualClasses",variables:{page:{value:T,type:"Int",required:!0},key:{value:_,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:We}]}}).catch(()=>(d.error("Error fetching classes"),{data:null})).then(Ye=>Ye);me&&(C(me.total),y(me.page),N(me.hasNext),s(me.results)),v(!1)},ce=async()=>{const{data:T}=await E.custom({url:"",method:"get",meta:{operation:"darasaAuth",variables:{},fields:["auth"]}}).catch(()=>(d.error("Error getting darasa auth"),{data:null})).then(_=>_);T&&r(T.auth.create_virtual_classes)},Ve=()=>`linear-gradient(45deg, rgba(${Math.floor(Math.random()*255)},${Math.floor(Math.random()*255)},${Math.floor(Math.random()*255)},0.5), rgba(${Math.floor(Math.random()*255)},${Math.floor(Math.random()*255)},${Math.floor(Math.random()*255)},0.5))`;return o.useEffect(()=>{ce(),J(p)},[]),x?e.jsx(e.Fragment,{children:e.jsx(Ke,{loading:x,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(H,{children:[e.jsx(Y,{span:12,children:e.jsx(P,{layout:"vertical",form:A,onFinish:T=>{y(0),J(0,T.key,!0)},children:e.jsx(P.Item,{name:"key",children:e.jsx(le,{size:"large",placeholder:"Search Public Virtual Classes...",prefix:e.jsx(Ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(Y,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(L,{icon:e.jsx(gt,{}),size:"large",onClick:()=>De(),disabled:!t,children:"Create Virtual Class"})})]}),e.jsxs(H,{children:[n.length===0?e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("h1",{children:"No Virtual Classes"})}):e.jsx(e.Fragment,{}),n.map(T=>{const _=Ve();return console.log(_),e.jsx(Y,{span:8,children:e.jsx(Qr,{darasa:T,handleDarasaConnect:O,handleDarasaDelete:$,handleDarasaEdit:j})},T.id)})]}),e.jsx(re,{title:"Creating Public Virtual Class",width:"40vw",open:F,onClose:T=>c(T),children:e.jsx(Fa,{form:M,onFinish:W})}),e.jsx(re,{title:"Connecting "+(u==null?void 0:u.name),open:S,width:"40vw",onClose:T=>w(T),children:e.jsxs(e.Fragment,{children:[e.jsx(vt,{id:u==null?void 0:u.id}),e.jsx(L,{onClick:()=>O(u==null?void 0:u.id),style:{position:"absolute",bottom:0,right:0,marginBottom:10},children:"Connect"})]})}),e.jsx(re,{title:"Editting "+(i==null?void 0:i.name),width:"40vw",open:h,onClose:T=>m(T),children:e.jsx(aa,{form:M,darasa:i,onFinish:Z})})]})},Kr=()=>(o.useEffect(()=>{document.title=Q.system_name+": Online Public Virtual Classes"},[]),e.jsxs(R,{children:[e.jsx(ne,{children:e.jsxs(D,{children:[e.jsx(D.Item,{children:e.jsx(U,{to:"/",children:"Home"})}),e.jsx(D.Item,{children:e.jsx(U,{to:"/oclass",children:"OClass"})}),e.jsx(D.Item,{children:"Online Public Virtual Classes Sessions"})]})}),e.jsx(R,{sx:{mt:2},children:e.jsx(Xr,{mode:"connected"})})]})),wt="meet.jit.si";var Zr=globalThis&&globalThis.__awaiter||function(a,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(v){try{x(n.next(v))}catch(p){l(p)}}function f(v){try{x(n.throw(v))}catch(p){l(p)}}function x(v){v.done?i(v.value):s(v.value).then(u,f)}x((n=n.apply(a,t||[])).next())})};const en=(a,t,r)=>Zr(void 0,void 0,void 0,function*(){return new Promise((n,s)=>{if(window.JitsiMeetExternalAPI)return n(window.JitsiMeetExternalAPI);const i=document.createElement("script"),l=t?`?release=${t}`:"",u=r?`${r}/`:"";i.async=!0,i.src=`https://${a}/${u}external_api.js${l}`,i.onload=()=>n(window.JitsiMeetExternalAPI),i.onerror=()=>s(new Error(`Script load error: ${i.src}`)),document.head.appendChild(i)})});let Fe;const tn=(a=wt,t,r)=>Fe||(Fe=en(a,t,r),Fe),an=a=>{const t=a.split("/");if(!(t.length<=1))return t[0]};let rn=0;const lt=a=>`${a}-${rn++}`,nn=({domain:a=wt,roomName:t,configOverwrite:r,interfaceConfigOverwrite:n,jwt:s,invitees:i,devices:l,userInfo:u,release:f,spinner:x,onApiReady:v,onReadyToClose:p,getIFrameRef:y})=>{const[b,C]=o.useState(!0),[I,N]=o.useState(!1),A=o.useRef(),F=o.useRef(),c=o.useRef(null),M=o.useMemo(()=>lt("jitsiMeeting"),[lt]);o.useEffect(()=>{tn(a,f,an(t)).then(h=>{A.current=h,N(!0)}).catch(h=>console.error(h.message))},[]);const S=o.useCallback(h=>{F.current=new h(a,{roomName:t,configOverwrite:r,interfaceConfigOverwrite:n,jwt:s,invitees:i,devices:l,userInfo:u,release:f,parentNode:c.current}),C(!1),F.current&&(typeof v=="function"&&v(F.current),F.current.on("readyToClose",()=>{typeof p=="function"&&p()}),c.current&&typeof y=="function"&&y(c.current))},[F,c,v,p,y,a,t,r,n,s,i,l,u]);o.useEffect(()=>{I&&!F.current&&A.current&&S(A.current)},[I,S]);const w=o.useCallback(()=>!x||!b||F.current?null:e.jsx(x,{},void 0),[x,F.current]);return e.jsxs(e.Fragment,{children:[w(),e.jsx("div",{id:M,ref:c},M)]},void 0)};globalThis&&globalThis.__rest;const sn={app_name:"Oclass",api_url:"https://olbongo.co.tz",conference_url:"video.olbongo.co.tz"},on=a=>{const[t,r]=o.useState(),[n,s]=o.useState(!1),[i,l]=o.useState(!0),[u,f]=o.useState(!0),{push:x}=Lt(),{data:v}=Nt(),p=Be(),y=async()=>{const{data:C}=await E.custom({url:"",method:"get",meta:{operation:"virtual",variables:{id:{value:parseInt(p.id),type:"Int",required:!0}},fields:["id","name","description","startDate","duration","durationType","token",{darasa:["id","name","code","description"]},{author:["id","firstName","middleName","lastName","fullName","pic","email"]},"created","canEdit","canDelete","canManage","updated","isActive"]}}).catch(I=>(d.error("Error fetching virtual class"),{data:null})).then(I=>I);C&&r(C),l(!1)},b=e.jsxs(D,{children:[e.jsx(D.Item,{children:e.jsx("a",{onClick:()=>x("/oclass"),children:"Home"})}),e.jsx(D.Item,{children:e.jsx("a",{onClick:()=>x("/oclass/public/virtual/classes"),children:"Virtual Sessions/Classes"})}),e.jsx(D.Item,{children:t==null?void 0:t.name})]});return o.useEffect(()=>{y()},[]),i?e.jsxs(e.Fragment,{children:[b,e.jsx(H,{align:"middle",children:e.jsx(Y,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(oe,{size:"large"})})})]}):n?e.jsxs(e.Fragment,{children:[b,e.jsx("div",{children:e.jsxs(H,{align:"middle",children:[e.jsx(Y,{span:8}),e.jsx(Y,{span:8,children:e.jsx(ye,{title:t==null?void 0:t.name,bordered:!1,actions:[e.jsx(L,{onClick:()=>window.location.reload(),children:"Re-join"})],children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(t==null?void 0:t.description)??""}})})})]})})]}):e.jsxs(e.Fragment,{children:[b,u&&e.jsxs(H,{align:"middle",children:[e.jsx(Y,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(xe,{direction:"vertical",children:e.jsx(oe,{size:"large"})})}),e.jsx(Y,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(xe,{direction:"vertical",children:"Preparing Virtual Conference Connection"})})]}),t&&e.jsx(nn,{domain:sn.conference_url,roomName:t.id.toString()+t.token,configOverwrite:{speakerStats:{disabled:!0,disableSearch:!1,order:["role","name","hasLeft"]},breakoutRooms:{hideAddRoomButton:!0,hideAutoAssignButton:!0,hideJoinRoomButton:!0},disableInviteFunctions:!0,hideConferenceSubject:!0,disablePolls:!0,autoKnockLobby:!0,enableLobbyChat:!0,disableModeratorIndicator:!1,disableReactionsModeration:!1,openSharedDocumentOnJoin:!1,startWithAudioMuted:!0,startScreenSharing:!1,enableEmailInStats:!1,enableWelcomePage:!1,readOnlyName:!0,notifications:[],screenshotCapture:{enabled:!0,mode:"recording"},prejoinConfig:{enabled:!0,hideDisplayName:!0,hideExtraJoinButtons:["no-audio","by-phone"]},p2p:{enabled:!0},e2ee:{labels:{labelTooltip:"Tooltip",description:"Description",label:"E2EE",warning:"Warning"},externallyManagedKey:!1}},interfaceConfigOverwrite:{DISABLE_JOIN_LEAVE_NOTIFICATIONS:!1},userInfo:{displayName:v==null?void 0:v.fullName,email:v==null?void 0:v.email},onApiReady:C=>{f(!1),C.addListener("videoConferenceJoined",()=>{}),C.addListener("videoConferenceLeft",()=>{}),C.addListener("participantJoined",I=>{}),C.addListener("participantLeft",I=>{}),C.addListener("onMessageReceived",I=>{}),C.addListener("onMessageSent",I=>{}),C.addListener("onChatMessage",I=>{}),C.addListener("onChatMessageReceived",I=>{}),C.addListener("onChatMessageSent",I=>{})},onReadyToClose:()=>{s(!0)},getIFrameRef:C=>{C.style.height="88vh"}})]})},ln=()=>(o.useEffect(()=>{document.title=Q.system_name+": Virtual Class Session"},[]),e.jsxs(R,{children:[e.jsx(ne,{children:e.jsxs(D,{children:[e.jsx(D.Item,{children:e.jsx(U,{to:"/",children:"Home"})}),e.jsx(D.Item,{children:e.jsx(U,{to:"/oclass",children:"OClass"})}),e.jsx(D.Item,{children:"Online Virtual Classes"})]})}),e.jsx(R,{sx:{mt:2},children:e.jsx(on,{mode:"connected"})})]})),cn=a=>{const{page:t}=a;return t==="VirtualClassSessionPage"?e.jsx(ln,{}):t==="PublicVirtualClassesPage"?e.jsx(Kr,{}):t==="OclassOrdersPage"?e.jsx(Ea,{}):t==="MyClassesPage"?e.jsx(Ia,{}):t==="OclassMarketplacePage"?e.jsx(Ta,{}):t==="ConnectedClassesPage"?e.jsx(Ma,{}):t==="ClassSessionPage"?e.jsx(Da,{}):t==="ClassesPage"?e.jsx(ua,{}):t==="ClassesConnectPage"?e.jsx(da,{}):t==="DarasaArchivesPage"?e.jsx(ia,{}):e.jsx("div",{children:"Page not found ..."})},Xn=Object.freeze(Object.defineProperty({__proto__:null,DarasaPages:cn},Symbol.toStringTag,{value:"Module"}));export{Qr as V,Xn as p};
