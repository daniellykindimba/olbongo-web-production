import{r as c,c as j,j as a,cl as I,_ as n,cn as M,g as F}from"./index-3f04361d.js";import{a as D,F as P}from"./file_item_component-df3ee82e.js";import{D as E}from"./index-175890ae.js";import{G as V}from"./index-5989b58d.js";import{L as q}from"./index-a638a95e.js";import{C as L}from"./index-2ac5d61b.js";import{T as O}from"./index-9f7d3fdf.js";import{M as d}from"./index-0f874ea4.js";import{a as T,S as _}from"./SmileOutlined-ba261cab.js";import{E as A}from"./ExclamationCircleOutlined-dc1ce38f.js";const{Paragraph:z}=O,Y=o=>{const[m,l]=c.useState([]);j();const[f,u]=c.useState(!1),[s,h]=c.useState(),[w,p]=c.useState(!1),g=!V.useBreakpoint().lg,k=e=>{h(e),p(!0)},x=e=>{const i=o.data.map(t=>(t.id===e.id&&(t.imageVisible=!0),t));l(i)},y=e=>{const i=o.data.map(t=>(t.id===e.id&&(t.imageVisible=!1),t));l(i)},C=e=>{h(e),u(!0)},S=async(e,i)=>{const{data:t}=await F.custom({url:"",method:"post",meta:{operation:"makeFilePublicPrivate",variables:{id:{value:e,type:"Int",required:!0},public:{value:i,type:"Boolean",required:!0}},fields:["success","message"]}}).catch(r=>(n.error("Error changing file privacy"),{data:null})).then(r=>r);t&&(t.success?(n.success(t.message),l(m.map(r=>(r.id===e&&(r.isPublic=i),r)))):t.message),d.destroyAll()},b=(e,i)=>{d.confirm({title:"Confirm",icon:a.jsx(A,{}),content:i?"Making File Public ...":"Making File  Private  ....",okText:i?"Make Public":"Make Private",cancelText:"Cancel",onOk:()=>S(e,i)})},v=async e=>{const{data:i}=await F.custom({url:"",method:"post",meta:{operation:"deleteFile",variables:{id:{value:e,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(n.error("Error deleting file"),{data:null})).then(t=>t);i&&(i.success?(n.success(i.message),l(m.filter(t=>t.id.toString()!==e.toString()))):n.error(i.message)),d.destroyAll()};return c.useEffect(()=>{l(o.data)},[o.data]),a.jsxs(a.Fragment,{children:[a.jsx(q,{loading:o.loading,itemLayout:"horizontal",dataSource:m,renderItem:e=>a.jsx(D,{item:e,showDrive:o.showDrive,min:o.min??!1,handleChangePrivate:b,handleDelete:v,handleMakeImageNotVisible:y,handleMakeImageVisible:x,handleShowFileInfoDrawer:C,handleShareFile:k})}),a.jsx(E,{title:"File Informations",anchor:"right",width:g?"100vw":"35vw",onClose:e=>u(e),open:f,noOverFlow:!0,children:a.jsx(P,{id:s==null?void 0:s.id})}),a.jsx(I,{title:"Share File",open:w,onClose:e=>p(e),width:g?"100vw":"50vw",children:a.jsx(L,{title:"Click Copy icon to copy share link",children:a.jsx(z,{copyable:{icon:[a.jsx(T,{},"copy-icon"),a.jsx(_,{},"copied-icon")],tooltips:["click here","you clicked!!"],onCopy:()=>{n.success("Link Successfully Copied")}},style:{textAlign:"center",fontSize:20},children:M.site_url+"/odrive/file/"+(s==null?void 0:s.id)+"/"+encodeURIComponent((s==null?void 0:s.slug)??"")+"/share"})})})]})};export{Y as F};
