import{r as t,aT as b,j as e,aW as R,aP as N,a1 as z,aY as D,av as q,ce as K,g as w,_ as u,cl as V,aZ as A,a8 as B,af as U,cd as Z,cn as _,cL as O,aN as k,cz as P}from"./index-3f04361d.js";import{P as G}from"./index-f2761152.js";import{I as X}from"./index-5c7d8a8d.js";import{S as J}from"./SearchOutlined-ca526dda.js";import{D as $}from"./DeleteOutlined-dd5d4858.js";import{D as ee}from"./index-175890ae.js";import{G as H}from"./index-5989b58d.js";import{A as te}from"./index-367510e2.js";import{C as T}from"./index-2ac5d61b.js";import{A as ne}from"./Icon-bd762329.js";import{C as Q}from"./Collapse-62fa6c0a.js";import{S as ae}from"./SettingOutlined-e08e652c.js";import{T as Y}from"./index-983365c0.js";import{S as se}from"./schoool_examinations_component-dc77f5bd.js";import"./index-926c2b48.js";import"./ActionButton-1fdd8a6f.js";import"./UpOutlined-7082c42f.js";import"./InputNumber-baf1c013.js";import"./DeleteOutlined-25685737.js";import"./InfoCircleFilled-cf97344e.js";import"./InfoCircleFilled-baaa675e.js";import"./Skeleton-4286ac29.js";import"./DotChartOutlined-f39c986e.js";import"./index-ee5ddf71.js";import"./ckeditor-21ed7852.js";import"./index-70413df2.js";import"./index-c576a427.js";import"./index-a52eff82.js";import"./localeData-ee81be6c.js";import"./SwapRightOutlined-c4e52b1e.js";import"./SinglePicker-8226d477.js";import"./UserAddOutlined-9e2c71ab.js";import"./EditOutlined-036bd618.js";import"./EditOutlined-401a1613.js";import"./MoreOutlined-d3af1bd1.js";const re=s=>{const[r,x]=t.useState([]),[p,v]=t.useState(0),[E,m]=t.useState(20),[C,S]=t.useState(""),[y,l]=t.useState(!0),[I]=b.useForm(),[c]=b.useForm();t.useState(!1);const[h,d]=t.useState(0),i=[{title:"Full Name",dataIndex:"name",fixed:!0,render:(n,a)=>e.jsx("span",{children:e.jsx("a",{children:a.member.fullName})})},{title:"Registration Number",dataIndex:"registrationNumber",fixed:!0,render:(n,a)=>e.jsx("span",{children:a.member.registrationNumber})},{title:"",dataIndex:"action",render:(n,a)=>e.jsx(e.Fragment,{children:e.jsx(G,{placement:"topRight",overlayStyle:{zIndex:9999},title:e.jsxs("div",{style:{width:"300px"},children:[e.jsxs("p",{style:{fontSize:18},children:["Are you sure to add Examination Score for"," ",e.jsx("b",{children:a.member.fullName})]}),e.jsx("div",{style:{marginTop:10},children:e.jsx(b,{layout:"vertical",form:c,onFinish:o=>{},requiredMark:!0,children:e.jsx(b.Item,{name:"score_value",label:"Score",rules:[{required:!0,type:"number",message:"Please input score value!"},{validator:(o,j)=>j<0||j>100?Promise.reject("Score value must be between 0 and 100"):Promise.resolve()}],children:e.jsx(X,{size:"large",defaultValue:0,style:{width:"100%"},onChange:o=>{d(o??0)}})})})})]}),onConfirm:()=>f(a.id,h),onCancel:()=>{},okButtonProps:{disabled:h<0||h>100},okText:"Add",cancelText:"No",onVisibleChange:o=>{o&&(d(0),c.resetFields())},children:e.jsx(q,{icon:e.jsx(K,{}),style:{float:"right"},danger:!0})})})}],f=async(n,a)=>{var j;const{data:o}=await w.custom({url:"",method:"post",meta:{operation:"createSchoolExaminationEducationLevelSubjectStudentRecord",variables:{schoolExaminationEducationLevelSubjectId:{value:parseInt(((j=s.subject)==null?void 0:j.id.toString())??"0"),type:"Int",required:!0},schoolEducationLevelStudentId:{value:parseInt(n.toString()),type:"Int",required:!0},score:{value:parseFloat(a.toString()),type:"Float",required:!0}},fields:["success","message",{schoolExaminationEducationLevelSubjectStudent:["id",{schoolEducationLevelStudent:["id",{member:["id","fullName","registrationNumber"]}]},"score","grade","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(L=>(u.remove(),u.error("Something Went Wrong ...."),{data:null})).then(L=>L);o!=null&&o.success?(u.success("Score Added Successfully"),x(r.filter(L=>L.id!==n)),s.onAdd(o.schoolExaminationEducationLevelSubjectStudent)):u.error(o==null?void 0:o.message)},g=async(n,a="",o=20)=>{var L,F,M;const{data:j}=await w.custom({url:"",method:"get",meta:{operation:"schoolEducationLevelSubjectResultsStudentsTo",variables:{page:{value:n,type:"Int",required:!0},key:{value:a,type:"String",required:!1},pageSize:{value:o,type:"Int",required:!1},schoolExaminationEducationLevelSubjectId:{value:parseInt(((L=s.subject)==null?void 0:L.id.toString())??"0"),type:"Int",required:!0},schoolEducationLevelId:{value:parseInt(((M=(F=s.level)==null?void 0:F.schoolEducationLevel)==null?void 0:M.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{member:["id","firstName","middleName","lastName","fullName","registrationNumber"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(W=>(u.remove(),u.error("Something Went Wrong ...."),{data:null})).then(W=>W);j&&(v(j.total),x([...j.results])),l(!1)};return t.useEffect(()=>{g(1,"",20)},[s.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(R,{style:{marginTop:10},children:e.jsx(N,{span:16,children:e.jsx(b,{layout:"vertical",form:I,onFinish:n=>{S(n.key),r.length=0,g(1,n.key)},children:e.jsx(b.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(J,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(D,{loading:y,columns:i,dataSource:r,pagination:{onChange:(n,a)=>{m(a),g(n,C,a)},total:p,pageSize:E,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}})]})},oe=s=>{const[r,x]=t.useState([]),[p,v]=t.useState(0),[E,m]=t.useState(20),[C,S]=t.useState(""),[y,l]=t.useState(!0),[I]=b.useForm(),[c,h]=t.useState(!1),d=[{title:"Full Name",dataIndex:"name",fixed:!0,render:(n,a)=>e.jsx("span",{children:e.jsx("a",{children:a.schoolEducationLevelStudent.member.fullName})})},{title:"Registration Number",dataIndex:"registrationNumber",fixed:!0,render:(n,a)=>e.jsx("span",{children:e.jsx("a",{children:a.schoolEducationLevelStudent.registrationNumber})})},{title:"Score",dataIndex:"score",fixed:!0,render:(n,a)=>e.jsx("span",{children:e.jsx("a",{children:a.score})})},{title:"Grade",dataIndex:"grade",fixed:!0,render:(n,a)=>e.jsx("span",{children:e.jsx("a",{children:a.grade})})},{title:"",dataIndex:"action",render:(n,a)=>e.jsx(e.Fragment,{children:e.jsx(G,{title:"Are you sure to Delete",onConfirm:()=>i(a.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(q,{icon:e.jsx($,{}),style:{float:"right"},danger:!0})})})}],i=async n=>{const{data:a}=await w.custom({url:"",method:"post",meta:{operation:"deleteSchoolExaminationEducationLevelSubjectStudent",variables:{id:{value:parseInt(n.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(o=>(u.remove(),u.error("Something Went Wrong ...."),{data:null})).then(o=>o);a&&(a.success?(u.success(a.message),x(r.filter(o=>o.id!==n))):u.error(a.message)),l(!1)},f=async(n,a="",o=20)=>{var L;const{data:j}=await w.custom({url:"",method:"get",meta:{operation:"schoolExaminationEducationLevelSubjectStudents",variables:{page:{value:n,type:"Int",required:!0},key:{value:a,type:"String",required:!1},pageSize:{value:o,type:"Int",required:!1},schoolExaminationEducationLevelSubjectId:{value:parseInt(((L=s.subject)==null?void 0:L.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{schoolEducationLevelStudent:["id",{member:["id","fullName","registrationNumber"]}]},"score","grade","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(F=>(u.remove(),u.error("Something Went Wrong ...."),{data:null})).then(F=>F);j&&(v(j.total),x(j.results)),l(!1)},g=async n=>{x([n,...r])};return t.useEffect(()=>{f(1,"",20)},[s.randKey,s.subject]),e.jsxs(e.Fragment,{children:[e.jsxs(R,{style:{marginTop:10},children:[e.jsx(N,{span:16,children:e.jsx(b,{layout:"vertical",form:I,onFinish:n=>{S(n.key),r.length=0,f(1,n.key)},children:e.jsx(b.Item,{name:"key",children:e.jsx(z,{size:"large",placeholder:"Search ...",prefix:e.jsx(J,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(N,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(q,{size:"large",icon:e.jsx(K,{}),onClick:()=>h(!0),danger:!0,children:"Add"})})]}),e.jsx(D,{loading:y,columns:d,dataSource:r,pagination:{onChange:(n,a)=>{m(a),f(n,C,a)},total:p,pageSize:E,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"80vh"}}),e.jsx(V,{title:"Adding Students Scores",open:c,width:"40vw",onClose:n=>h(n),children:e.jsx(re,{level:s.level,subject:s.subject,onAdd:g})})]})},ie=s=>{const[r,x]=t.useState(),[p,v]=t.useState([]),[E,m]=t.useState(0);t.useState(20),t.useState("");const[C,S]=t.useState(!0),[y,l]=t.useState(!1);b.useForm(),H.useBreakpoint().lg;const c=async d=>{x(d),l(!0)},h=async(d,i="",f=20)=>{var n;const{data:g}=await w.custom({url:"",method:"get",meta:{operation:"schoolExaminationEducationLevelSubjects",variables:{page:{value:d,type:"Int",required:!0},key:{value:i,type:"String",required:!1},pageSize:{value:f,type:"Int",required:!1},schoolExaminationEducationLevelId:{value:parseInt(((n=s.level)==null?void 0:n.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{schoolEducationLevelSubject:["id",{schoolSubject:["id",{subject:["id","name"]}]}]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(a=>(u.remove(),u.error("Something Went Wrong ...."),{data:null})).then(a=>a);g&&(m(g.total),v([...g.results])),S(!1)};return t.useEffect(()=>{h(1,"",20)},[s.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[p.length===0&&e.jsx(te,{description:"No Subject Found ..."}),p.map((d,i)=>e.jsx("a",{onClick:()=>c(d),children:e.jsx(A,{color:"red",style:{padding:5},children:e.jsx("span",{style:{fontSize:18},children:d.schoolEducationLevelSubject.schoolSubject.subject.name})})}))]}),e.jsx(ee,{title:"View "+(r==null?void 0:r.schoolEducationLevelSubject.schoolSubject.subject.name)+" Results",anchor:"right",width:"50vw",onClose:d=>l(d),open:y,noOverFlow:!0,children:e.jsx(oe,{level:s.level,subject:r})})]})},le=s=>{const[r,x]=t.useState([]),[p,v]=t.useState([]),[E,m]=t.useState(0);t.useState(20),t.useState("");const[C,S]=t.useState(!0);t.useState(!1),b.useForm(),H.useBreakpoint().lg;const l=async(c,h="",d=20)=>{var f;const{data:i}=await w.custom({url:"",method:"get",meta:{operation:"schoolExaminationEducationLevelResults",variables:{schoolExaminationEducationLevelId:{value:parseInt(((f=s.level)==null?void 0:f.id.toString())??"0"),type:"Int",required:!0}},fields:["subjects","results"]}}).catch(()=>(u.remove(),u.error("Something Went Wrong ...."),{data:null})).then(g=>g);if(i){m(i.total),x([...i.subjects]);const g=[];i.subjects.map(n=>g.push({name:n})),x([...g]),v([...i.results])}S(!1)},I=[{fixed:!0,title:"Full Name",dataIndex:"name",key:"name",render:(c,h)=>e.jsx("span",{style:{fontWeight:"bolder"},children:h.student})},{fixed:!0,title:"Reg #.",dataIndex:"regno",key:"regno",render:(c,h)=>e.jsx("span",{style:{fontWeight:"bolder"},children:h.registration_number})},{title:"SUBJECTS",dataIndex:"subjects",key:"subjects",children:r.map(c=>({title:c.name,dataIndex:c.name,key:c.name,render:(h,d)=>{const i=d.results.find(f=>f.subject===c.name);return e.jsx(R,{children:e.jsxs(N,{span:24,style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:i==null?void 0:i.score}),e.jsx(A,{color:"green",children:i==null?void 0:i.grade})]})})}}))}];return t.useEffect(()=>{l(1,"",20)},[s.randKey]),e.jsx(e.Fragment,{children:e.jsx(D,{size:"small",columns:I,dataSource:p,scroll:{y:"80vh"}})})},{Panel:ce}=Q,de=s=>{const[r,x]=t.useState(!0),[p,v]=t.useState(),[E,m]=t.useState([]),[C,S]=t.useState(!1),y=async(l,I="",c=20)=>{var d;const{data:h}=await w.custom({url:"",method:"get",meta:{operation:"schoolExaminationEducationLevels",variables:{schoolExaminationId:{value:parseInt((d=s.examination)==null?void 0:d.id.toString()),type:"Int",required:!0},page:{value:l,type:"Int",required:!0},key:{value:I,type:"String",required:!1},pageSize:{value:c,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{schoolEducationLevel:["id",{educationLevel:["id","name"]}]},{schoolExamination:["id","name"]},"score","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(u.remove(),u.error("Something Went Wrong ..."),{data:null})).then(i=>i);h&&m([...h.results]),x(!1)};return t.useEffect(()=>{y(1,"",20)},[s.randKey,s.examination]),e.jsxs(e.Fragment,{children:[e.jsx(B,{spinning:r,children:e.jsx(R,{children:e.jsxs(N,{span:24,children:[E.length===0&&e.jsx(T,{children:e.jsxs("h3",{children:[e.jsx(ne,{type:"info-circle"})," No Data"]})}),e.jsx(T,{children:e.jsx(Q,{defaultActiveKey:[],onChange:()=>{},expandIconPosition:"left",children:E.map((l,I)=>e.jsx(ce,{header:e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:18},children:l.schoolEducationLevel.educationLevel.name})}),extra:e.jsxs(e.Fragment,{children:[e.jsx(U,{title:"Click to View All "+l.schoolEducationLevel.educationLevel.name+" Subjects Students Results",color:"green",placement:"left",children:e.jsx(q,{danger:!0,type:"link",icon:e.jsx(Z,{}),onClick:c=>{c.stopPropagation(),v(l),S(!0)},style:{marginRight:5}})}),e.jsx(q,{type:"link",icon:e.jsx(ae,{}),onClick:c=>{c.stopPropagation()}})]}),children:e.jsx(ie,{level:l})},"level"+I))})})]})})}),e.jsx(V,{title:"View All Subjects Examination Results",open:C,width:"94vw",onClose:l=>S(l),children:e.jsx(le,{level:p})})]})},{TabPane:ue}=Y,me=s=>{const[r,x]=t.useState(!0),[p,v]=t.useState([]),E=async(m,C="",S=20)=>{x(!0);const{data:y}=await w.custom({url:"",method:"get",meta:{operation:"schoolExaminations",variables:{page:{value:m,type:"Int",required:!0},key:{value:C,type:"String",required:!1},pageSize:{value:S,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","year","startDate","endDate",{school:["id","name"]},{examinationType:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(u.error("Error occured while fetching Examinations"),{data:null})).then(l=>l);y&&v([...y.results]),x(!1)};return t.useEffect(()=>{E(1,"",20)},[s.randKey]),e.jsx(e.Fragment,{children:e.jsx(B,{spinning:r,children:e.jsx(R,{children:e.jsxs(N,{span:24,children:[p.length===0&&e.jsx(T,{children:e.jsx("h3",{children:"No Examinations Found"})}),e.jsx(T,{children:e.jsx(Y,{tabPosition:"left",children:p.map(m=>e.jsxs(ue,{tab:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:m.name}),e.jsx(A,{color:"red",style:{marginLeft:5},children:m.year})]}),children:[e.jsxs("h3",{children:[m.name,e.jsx(A,{color:"red",style:{marginLeft:5},children:m.year})]}),e.jsx(de,{examination:m})]},"examination-"+m.id))})})]})})})})},he=()=>(t.useEffect(()=>{document.title=_.system_name+": Examinations Results Dashboard"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(O,{children:e.jsxs(k,{children:[e.jsx(k.Item,{children:e.jsx(P,{to:"/",children:"Home"})}),e.jsx(k.Item,{children:e.jsx(P,{to:"/examinations_results",children:"Examinations Results"})}),e.jsx(k.Item,{children:"Dashboard"})]})}),e.jsx(me,{})]})),xe=()=>(t.useEffect(()=>{document.title=_.system_name+": Manage Examinations"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(O,{children:e.jsxs(k,{children:[e.jsx(k.Item,{children:e.jsx(P,{to:"/",children:"Home"})}),e.jsx(k.Item,{children:e.jsx(P,{to:"/examinations_results",children:"Examinations Results"})}),e.jsx(k.Item,{children:"Manage Examinations"})]})}),e.jsx(se,{})]})),Ue=s=>{const{page:r}=s;return r==="ManageExaminationsPage"?e.jsx(xe,{}):r==="ExaminationsResultsDashBoardPage"?e.jsx(he,{}):e.jsx("div",{children:"Page not found ..."})};export{Ue as ExaminationsResultsPages};
