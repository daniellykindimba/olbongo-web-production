import{r as o,aU as k,j as e,G as ie,$ as oe,c$ as Te,ar as ne,B as R,aZ as ge,aS as lt,aV as be,d0 as It,av as L,cS as ct,ac as Ot,_ as d,d1 as Et,d2 as Pe,g as E,ca as G,aO as I,ct as ue,aP as He,aY as H,aQ as W,S as ae,c6 as Ce,d3 as dt,d4 as ut,d5 as Ze,c as Me,d6 as ht,aW as _t,c2 as re,d7 as Ft,d8 as qt,cF as X,d9 as $e,da as Lt,db as Nt,dc as At,c5 as zt,cG as Z,a$ as ce,ad as Ue,a_ as Vt,cc as mt,cW as Yt,cJ as Wt,dd as ft,cQ as Rt,cb as Ut,de as Bt,c1 as Ht}from"./index-351477c3.js";import{l as te}from"./index-6b812589.js";import{a as $t,d as de,b as Gt,c as Ye}from"./data_objects-84b5f664.js";import{C as xe}from"./index-e245930b.js";import{A as gt}from"./index-6af680ed.js";import{A as Le}from"./Alert-a3483804.js";import{M as fe}from"./index-8b72edfc.js";import{T as pt}from"./index-fe5f5443.js";import{d as Ge,C as Je}from"./ckeditor-84fadb55.js";import{D as Qe}from"./index-1cc45ed0.js";import{I as ke}from"./index-7b6ba676.js";import{D as Xe}from"./index-5cad5ca6.js";import{U as Jt}from"./index-a5d8814c.js";import{I as Qt}from"./index-70dcd1db.js";import{C as Xt}from"./darasa_card-418a58bf.js";import{T as xt}from"./index-d9a31a18.js";import{P as Ke}from"./index-81b1f6d5.js";import{D as V}from"./index-4e600c89.js";import{F as Kt}from"./index-45b375c6.js";import{t as et}from"./text_truncate-315d9efa.js";import{G as Zt}from"./index-ba2e3766.js";import{S as Be}from"./Skeleton-8f0e80db.js";import{B as ea}from"./book_payment_form-1ebdca27.js";import{A as ta}from"./index-3779f7bb.js";import{I as aa}from"./index.es-cd6a888d.js";import{E as ra}from"./edit_class_virtual_form-930c2574.js";import{L as We}from"./index-a79ac33a.js";const na=n=>{const[t,a]=o.useState([]),[r,s]=o.useState(!0),[i,l]=o.useState(1),[u,m]=o.useState(0),[x,y]=o.useState(0),[p,j]=o.useState(24),[b,w]=o.useState(""),[M,q]=o.useState(!0),[z,N]=o.useState(!1),[c]=k.useForm(),P=async f=>{const{data:h}=await E.custom({url:"",method:"post",meta:{operation:"removeDarasaArchive",variables:{id:{value:f,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error removing from archive"),{data:null})).then(v=>v);h&&(h.success?(d.success(h.message),a(t.filter(v=>v.id!==f))):d.error(h.message)),fe.destroyAll()},D=f=>{fe.confirm({title:"Confirm",icon:e.jsx(Pe,{}),content:"Removing Class From Archive ....",okText:"Restore",cancelText:"Cancel",onOk:()=>P(f)})},S=async(f,h=24,v="")=>{const{data:O}=await E.custom({url:"",method:"get",meta:{operation:"madarasaArchives",variables:{page:{value:f,type:"Int",required:!0},key:{value:v,type:"String",required:!1},pageSize:{value:h,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:$t}]}}).catch(Y=>(console.error(Y),d.error("Error fetching archives"),{data:null})).then(Y=>Y);O&&(m(O.total),l(O.page),y(O.pages),q(O.hasNext),N(O.hasPrev),a(O.results)),s(!1)};return o.useEffect(()=>{S(1)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ie,{container:!0,children:e.jsx(ie,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6,children:e.jsx(k,{layout:"vertical",form:c,onFinish:f=>{l(0),S(0,p,f.key)},children:e.jsx(k.Item,{name:"key",children:e.jsx(oe,{size:"large",placeholder:"Search Classes Archives...",prefix:e.jsx(Te,{}),autoComplete:"off",allowClear:!0,disabled:r})})})})}),e.jsx(ne,{spinning:r,children:e.jsx(R,{children:t.length>0?e.jsx(ie,{container:!0,children:t.map(f=>e.jsx(ie,{item:!0,xs:12,sm:6,md:4,lg:4,children:e.jsxs(xe,{hoverable:f.isActive,style:{marginRight:10},children:[e.jsx(ge,{style:{right:0,position:"absolute"},children:e.jsx(lt,{trigger:["click"],overlay:e.jsx(be,{children:e.jsx(be.Item,{icon:e.jsx(It,{}),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>D(f.id),children:"Restore"})},"class-archive-"+f.id)}),overlayStyle:{zIndex:9999},children:e.jsx(L,{type:"link",size:"large",className:"ant-dropdown-link",onClick:h=>h.preventDefault(),style:{zIndex:1},children:e.jsx(ct,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx(Ot.Ribbon,{text:f.darasa.code,placement:"start",color:"orange",children:e.jsx("a",{onClick:()=>{d("Drive To Connect")},children:e.jsxs(ge,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(gt,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(Et,{}),src:f.darasa.icon}),e.jsx("span",{style:{fontSize:20},children:f.darasa.name})]})})})]})}))}):e.jsx(Le,{severity:"info",sx:{fontSize:18},children:r?e.jsx(e.Fragment,{children:"Loading ..."}):e.jsx(e.Fragment,{children:"No Class Found in Archives"})})})}),(M||z)&&!r&&e.jsx(R,{children:e.jsx(te.Pagination,{showSizeChanger:!0,onShowSizeChange:(f,h)=>{l(f),j(h),S(f,h||p,b)},defaultCurrent:i,total:u,onChange:(f,h)=>{l(f),j(h||p),S(f,h||p,b)}})})]})},sa=()=>(o.useEffect(()=>{document.title=G.system_name+": Classes Archives"},[]),e.jsxs(R,{children:[e.jsxs(I,{children:[e.jsx(I.Item,{children:e.jsx(ue,{to:"/oclass",children:"Home"})}),e.jsx(I.Item,{children:"Classes Archives"})]}),e.jsx(R,{sx:{mt:2},children:e.jsx(na,{})})]})),{Title:Oe,Text:Ee}=pt,vt=n=>{const[t,a]=o.useState(),[r,s]=o.useState(!0),i=async l=>{const{data:u}=await E.custom({url:"",method:"get",meta:{operation:"darasa",variables:{id:{value:l,type:"Int",required:!0}},fields:de}}).catch(()=>(d.error("Error fetching darasa"),{data:null}));u&&a(u),s(!1)};return o.useEffect(()=>{i(n.id)},[n.id]),e.jsxs(ne,{spinning:r,children:[e.jsx(Oe,{level:5,children:"Class Name"}),e.jsx(Ee,{children:t==null?void 0:t.name}),e.jsx(Oe,{level:5,children:"Class Code"}),e.jsx(Ee,{children:t==null?void 0:t.code}),e.jsx(Oe,{level:5,children:"Class Description"}),e.jsx(Ee,{children:t==null?void 0:t.description}),e.jsx(Oe,{level:5,children:"Class Author"}),e.jsx(Ee,{children:t==null?void 0:t.user.profile.fullName})]})},ia=n=>{const[t,a]=o.useState(!1),[r,s]=o.useState(""),[i,l]=o.useState(""),[u,m]=o.useState(!1),[x,y]=o.useState(!1),[p,j]=o.useState([]),[b,w]=o.useState(null),[M,q]=o.useState(!1),z={name:"file",action:G.base_url+"/api/upload/file/class/cover",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},onChange(c){d.dismiss(),c.file.status==="uploading"&&(d.loading("Uploading file...",{duration:0}),m(!0)),c.file.status==="done"?(d.dismiss(),c.file.response.status?(d.success(c.file.response.message),l(c.file.response.cover)):d.error(c.file.response.message),m(!1)):c.file.status==="error"&&d.error(`${c.file.name} file upload failed.`)}},N=async(c,P=25,D="")=>{var f;q(!0);const{data:S}=await E.custom({url:"",method:"get",meta:{operation:"darasaGalleriesPool",variables:{page:{value:c,type:"Int",required:!0},pageSize:{value:P,type:"Int",required:!0}},fields:["data"]}}).catch(()=>(d.error("Error getting galleries"),{data:null})).then(h=>h);S&&j((f=S==null?void 0:S.data)==null?void 0:f.results),q(!1)};return o.useEffect(()=>{N(1)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{padding:20,backgroundColor:"white",borderRadius:5,boxShadow:"0 0 10px rgba(0,0,0,0.1)",maxHeight:"85vh",overflowY:"auto",overflowX:"hidden"},children:e.jsxs(k,{layout:"vertical",form:n.form,onFinish:c=>{c.payable=t,c.description=r,c.cover=i,n.onFinish(c)},requiredMark:!0,autoComplete:"off",children:[e.jsx(k.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Name is required"}],children:e.jsx(oe,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(Ge.CKEditor,{editor:Je,data:r,onReady:c=>{c.editing.view.change(P=>{P.setStyle("min-height","150px",c.editing.view.document.getRoot())})},onChange:(c,P)=>{const D=P.getData();s(D)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(k.Item,{name:"payable",children:e.jsx(He,{onChange:c=>a(c.target.checked),children:"Payable"})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(k.Item,{name:"price",label:"Cost",initialValue:0,rules:[{required:t,type:"number",validator:(c,P)=>P<=0?Promise.reject("Price cannot be less than 0"):Promise.resolve()}],children:e.jsx(ke,{size:"large",style:{width:"100%"},precision:2})}),e.jsxs(H,{children:[e.jsx(W,{span:8,children:e.jsx(k.Item,{name:"duration",label:"Duration",initialValue:1,wrapperCol:{span:24},rules:[{required:t,type:"number",message:"Please enter duration"}],children:e.jsx(ke,{size:"large",style:{width:"100%"}})})}),e.jsx(W,{span:12,children:e.jsx(k.Item,{label:"Duration Type",name:"duration_type",wrapperCol:{span:12},initialValue:"months",rules:[{required:t,type:"string",message:"Please select duration type"}],children:e.jsxs(ae,{size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx(ae.Option,{value:"days",children:"Days"}),e.jsx(ae.Option,{value:"months",children:"Months"}),e.jsx(ae.Option,{value:"years",children:"Years"})]})})})]}),e.jsx(k.Item,{label:"Start Date",name:"start_date",rules:[{required:!0,type:"object",message:"Please select Start Date"}],children:e.jsx(Xe,{size:"large",style:{width:"50%"},disabledDate:c=>c.add(1,"day")<Ce().endOf("day"),popupStyle:{zIndex:9999}})})]}),e.jsx(k.Item,{name:"cover",label:e.jsxs(e.Fragment,{children:["Cover Image",e.jsx(L,{onClick:()=>{l(""),w(null)},style:{display:i.length>0?"block":"none"},type:"link",danger:!0,children:"Clear"})]}),children:e.jsxs(ge,{direction:"horizontal",children:[e.jsx(Jt,{...z,listType:"picture",className:"upload-list-inline",accept:"image/*",multiple:!1,onRemove:()=>{l("")},showUploadList:{showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!1},children:e.jsx(L,{icon:e.jsx(dt,{}),onClick:()=>{l(""),w(null)},children:"Click to Upload"})}),e.jsx(L,{icon:e.jsx(ut,{}),onClick:()=>{l(""),y(!0)},style:{display:i.length>0||u?"none":"block"},children:"Pick from Gallery"})]})}),b&&e.jsx(ge,{direction:"vertical",style:{marginTop:10},children:e.jsx(Qt,{width:200,src:b.url})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(L,{type:"primary",size:"large",htmlType:"submit",disabled:i.length===0,children:"Save"})})]})}),e.jsx(Qe,{anchor:"right",title:"Gallery",open:x,onClose:()=>y(!1),width:"30vw",children:e.jsx("span",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",maxHeight:"85vh",overflowY:"auto"},children:e.jsx(te.Spin,{spinning:M,children:e.jsx(H,{children:p.map((c,P)=>e.jsx(W,{span:12,style:{marginBottom:10,padding:2},children:e.jsx(te.Card,{style:{padding:10,borderRadius:5,cursor:"pointer",backgroundImage:`url(${c.url})`,backgroundSize:"cover",backgroundPosition:"center",width:"100%",height:150},onClick:()=>{l(c.path),w(c),y(!1)}})},P))})})})})]})},oa=n=>{const[t,a]=o.useState(n.darasa.payable),[r,s]=o.useState(n.darasa.description),[i,l]=o.useState(""),[u,m]=o.useState(!1),[x,y]=o.useState(!1),[p,j]=o.useState([]),[b,w]=o.useState(null),[M,q]=o.useState(!1),z={name:"file",action:G.base_url+"/api/upload/file/class/cover",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},onChange(c){d.dismiss(),c.file.status==="uploading"&&(d.loading("Uploading file...",{duration:0}),m(!0)),c.file.status==="done"?(d.dismiss(),c.file.response.status?(d.success(c.file.response.message),l(c.file.response.cover)):d.error(c.file.response.message),m(!1)):c.file.status==="error"&&d.error(`${c.file.name} file upload failed.`)}},N=async(c,P=25,D="")=>{var f;q(!0);const{data:S}=await E.custom({url:"",method:"get",meta:{operation:"darasaGalleriesPool",variables:{page:{value:c,type:"Int",required:!0},pageSize:{value:P,type:"Int",required:!0}},fields:["data"]}}).catch(()=>(d.error("Error getting galleries"),{data:null})).then(h=>h);S&&j((f=S==null?void 0:S.data)==null?void 0:f.results),q(!1)};return o.useEffect(()=>{N(1)},[]),o.useEffect(()=>{n.form.setFieldsValue({name:n.darasa.name,description:n.darasa.description,payable:n.darasa.payable,price:n.darasa.price,duration:n.darasa.duration,duration_type:n.darasa.durationType,start_date:Ze(n.darasa.startDate),end_date:Ze(n.darasa.endDate),cover:n.darasa.cover})},[n.darasa,n.form]),e.jsxs("div",{style:{padding:20,backgroundColor:"white",borderRadius:5,boxShadow:"0 0 10px rgba(0,0,0,0.1)",maxHeight:"85vh",overflowY:"auto",overflowX:"hidden"},children:[e.jsxs(k,{layout:"vertical",form:n.form,onFinish:c=>{c.id=parseInt(n.darasa.id),c.payable=t,c.description=r,c.cover=i,n.onFinish(c)},requiredMark:!1,children:[e.jsx(k.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Name is required"}],children:e.jsx(oe,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(Ge.CKEditor,{editor:Je,data:r,onReady:c=>{c.editing.view.change(P=>{P.setStyle("min-height","150px",c.editing.view.document.getRoot())})},onChange:(c,P)=>{const D=P.getData();s(D)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(k.Item,{name:"payable",children:e.jsx(He,{defaultChecked:t,onChange:c=>a(c.target.checked),children:"Payable"})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(k.Item,{name:"price",label:"Cost",initialValue:0,rules:[{required:t,type:"number",validator:(c,P)=>P<=0?Promise.reject("Price cannot be less than 0"):Promise.resolve()}],children:e.jsx(ke,{size:"large",style:{width:"100%"},precision:2})}),e.jsxs(H,{children:[e.jsx(W,{span:8,children:e.jsx(k.Item,{name:"duration",label:"Duration",initialValue:1,wrapperCol:{span:24},rules:[{required:t,type:"number",message:"Please enter duration"}],children:e.jsx(ke,{size:"large",style:{width:"100%"}})})}),e.jsx(W,{span:12,children:e.jsx(k.Item,{label:"Duration Type",name:"duration_type",wrapperCol:{span:12},initialValue:"months",rules:[{required:t,type:"string",message:"Please select duration type"}],children:e.jsxs(ae,{size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx(ae.Option,{value:"days",children:"Days"}),e.jsx(ae.Option,{value:"months",children:"Months"}),e.jsx(ae.Option,{value:"years",children:"Years"})]})})})]}),e.jsx(k.Item,{label:"Start Date",name:"start_date",rules:[{required:!0,type:"object",message:"Please select Start Date"}],children:e.jsx(Xe,{size:"large",style:{width:"50%"},disabledDate:c=>c.add(1,"day")<Ce().endOf("day"),popupStyle:{zIndex:9999}})})]}),e.jsx(k.Item,{name:"cover",label:e.jsxs(e.Fragment,{children:["Cover Image",e.jsx(L,{onClick:()=>{l(""),w(null)},style:{display:i.length>0?"block":"none"},type:"link",danger:!0,children:"Clear"})]}),children:e.jsxs(te.Space,{direction:"horizontal",children:[e.jsx(te.Upload,{...z,listType:"picture",className:"upload-list-inline",accept:"image/*",multiple:!1,onRemove:()=>{l("")},showUploadList:{showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!1},children:e.jsx(L,{icon:e.jsx(dt,{}),onClick:()=>{l(""),w(null)},children:"Click to Upload"})}),e.jsx(L,{icon:e.jsx(ut,{}),onClick:()=>{l(""),y(!0)},style:{display:i.length>0||u?"none":"block"},children:"Pick from Gallery"})]})}),b&&e.jsx(te.Space,{direction:"vertical",style:{marginTop:10},children:e.jsx(te.Image,{width:200,src:b.url})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(L,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]}),e.jsx(Qe,{anchor:"right",title:"Gallery",open:x,onClose:()=>y(!1),width:"30vw",children:e.jsx("span",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",maxHeight:"85vh",overflowY:"auto"},children:e.jsx(ne,{spinning:M,children:e.jsx(H,{children:p.map((c,P)=>e.jsx(W,{span:12,style:{marginBottom:10,padding:2},children:e.jsx(te.Card,{style:{padding:10,borderRadius:5,cursor:"pointer",backgroundImage:`url(${c.url})`,backgroundSize:"cover",backgroundPosition:"center",width:"100%",height:150},onClick:()=>{l(c.path),w(c),y(!1)}})},P))})})})})]})},{Paragraph:la}=pt,Ne=n=>{const[t,a]=o.useState(!1),[r,s]=o.useState([]),[i,l]=o.useState(),[u,m]=o.useState(),[x,y]=o.useState(!0),[p,j]=o.useState(1),[b,w]=o.useState(0),[M,q]=o.useState(24),[z,N]=o.useState(!0),[c,P]=o.useState(!1),[D]=k.useForm(),[S,f]=o.useState(!1),[h,v]=o.useState(!1);Me();const[O]=k.useForm(),[Y,K]=o.useState(!1),[we,ve]=o.useState(!1),U=g=>{l(g),ve(!0)},J=g=>{l(g),v(!0)},ee=g=>{m(g),K(!0)},ze=async g=>{const{data:T}=await E.custom({url:"",method:"post",meta:{operation:"connectClass",variables:{id:{value:g,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error connecting darasa"),{data:null})).then(A=>A);T&&(T.success?(K(!1),m(null),d(T.message),s(r.filter(A=>A.id!==g))):d.error(T.message))},C=async g=>{const{data:T}=await E.custom({url:"",method:"post",meta:{operation:"addDarasaArchive",variables:{id:{value:g,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error adding darasa to archive"),{data:null})).then(A=>A);T&&(T.success?(d.success(T.message),s(r.filter(A=>A.id!==g))):d.error(T.message)),fe.destroyAll()},_=g=>{fe.confirm({title:"Confirm",icon:e.jsx(Pe,{}),content:"Adding Class To Archive ....",okText:"Add",cancelText:"Cancel",onOk:()=>C(g)})},B=async g=>{const{data:T}=await E.custom({url:"",method:"post",meta:{operation:"createDarasa",variables:{name:{value:g.name,type:"String",required:!0},description:{value:g.description,type:"String",required:!0},payable:{value:g.payable,type:"Boolean",required:!1},price:{value:g.price,type:"Float",required:!1},duration:{value:g.duration,type:"Int",required:!1},durationType:{value:g.duration_type,type:"String",required:!1},startDate:{value:g.start_date,type:"String",required:!1},cover:{value:g.cover,type:"String",required:!1}},fields:["success","message",{darasa:de}]}}).catch(()=>(d.error("Error creating darasa"),{data:null})).then(A=>A);T&&(T.success?(d.success(T.message),f(!1),s([T.darasa,...r])):d.error(T.message))},he=async g=>{const{data:T}=await E.custom({url:"",method:"post",meta:{operation:"updateDarasa",variables:{id:{value:g.id,type:"Int",required:!0},name:{value:g.name,type:"String",required:!0},description:{value:g.description,type:"String",required:!0},payable:{value:g.payable,type:"Boolean",required:!1},price:{value:g.price,type:"Float",required:!1},duration:{value:g.duration,type:"Int",required:!1},durationType:{value:g.duration_type,type:"String",required:!1},startDate:{value:g.start_date,type:"String",required:!1},cover:{value:g.cover,type:"String",required:!1}},fields:["success","message",{darasa:de}]}}).catch(()=>(d.error("Error updating darasa"),{data:null})).then(A=>A);T&&(T.success?(d.success(T.message),v(!1),s(r.map(A=>A.id.toString()===g.id.toString()?T.darasa:A))):d.error(T.message))},Ve=()=>{O.resetFields(),f(!0)},St=async g=>{const{data:T}=await E.custom({url:"",method:"post",meta:{operation:"disconnectClass",variables:{classId:{value:g,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error disconnecting darasa"),{data:null})).then(A=>A);T&&(T.success?(d.success(T.message),s(r.filter(A=>A.id!==g))):d.error(T.message))},Dt=g=>{fe.confirm({title:"Disconnecting Class",icon:e.jsx(Pe,{}),content:"Are you sure ...",okText:"Disconnect",cancelText:"Cancel",onOk:()=>St(g)})},Pt=async g=>{const{data:T}=await E.custom({url:"",method:"post",meta:{operation:"deleteDarasa",variables:{id:{value:g,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error deleting darasa"),{data:null})).then(A=>A);T&&(T.success?(d.success(T.message),s(r.filter(A=>A.id!==g))):d.error(T.message))},kt=g=>{fe.confirm({title:"Deleting Class",icon:e.jsx(Pe,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>Pt(g)})},Ie=async(g,T=24,A="")=>{y(!0);const{data:ye}=await E.custom({url:"",method:"get",meta:{operation:"myMadarasa",variables:{page:{value:g,type:"Int",required:!0},key:{value:A,type:"String",required:!1},pageSize:{value:T,type:"Int",required:!0},where:{value:{mode:n.mode},type:"JSON",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:de}]}}).catch(()=>(d.error("Error getting darasas"),{data:null})).then(Mt=>Mt);ye&&(w(ye.total),j(ye.page),N(ye.hasNext),P(ye.hasPrev),s(ye.results)),y(!1)},Tt=async()=>{const{data:g}=await E.custom({url:"",method:"get",meta:{operation:"darasaAuth",variables:{},fields:["auth"]}}).catch(()=>(d.error("Error getting darasa auth"),{data:null})).then(T=>T);g&&a(g.auth.create_classes)};return o.useEffect(()=>(Tt(),Ie(1),document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),e.jsxs(e.Fragment,{children:[e.jsxs(ie,{container:!0,children:[e.jsx(ie,{item:!0,xs:12,sm:6,md:4,lg:4,children:e.jsx(k,{layout:"vertical",form:D,onFinish:g=>{j(1),Ie(1,M,g.key)},children:e.jsx(k.Item,{name:"key",children:e.jsx(oe,{size:"large",placeholder:"Search Classes...",prefix:e.jsx(Te,{}),autoComplete:"off",allowClear:!0,disabled:x})})})}),e.jsx(ie,{item:!0,xs:12,sm:6,md:8,lg:8,sx:{display:"flex",justifyContent:"flex-end",paddingBottom:{xs:2,sm:0,md:0,lg:0}},children:n.mode!=="connect"&&e.jsx(L,{size:"large",icon:e.jsx(ht,{}),onClick:()=>Ve(),disabled:!t||x,children:"Create Class"})})]}),e.jsx("div",{style:{maxHeight:"78vh",minHeight:"78vh",overflow:"auto"},children:e.jsx(ne,{spinning:x,children:r.length>0?e.jsx(ie,{container:!0,children:r.map(g=>e.jsx(ie,{item:!0,xs:12,sm:6,md:4,lg:4,children:e.jsx(Xt,{darasa:g,size:"large",showEditModal:J,showModalDarasaConnect:ee,handleDarasaDisconnect:Dt,handleDarasaDelete:kt,handleAddingToArchive:_,handleShareModal:U},g.id)},g.id))}):e.jsx(Le,{severity:"info",sx:{fontSize:18},children:x?e.jsx(e.Fragment,{children:"Loading ..."}):e.jsx(e.Fragment,{children:"No Classes Found"})})})}),!x&&e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(_t,{showSizeChanger:!0,onShowSizeChange:(g,T)=>{j(g),q(T),Ie(g,T)},defaultCurrent:p,total:b,onChange:(g,T)=>{j(g),q(T||M),Ie(g,T||M)}})}),e.jsx(re,{title:"Creating Class",open:S,destroyOnClose:!0,width:"40vw",onClose:g=>f(g),children:e.jsx(ia,{form:O,onFinish:B})}),e.jsx(re,{title:"Editting Class",width:"40vw",open:h,onClose:g=>v(g),children:e.jsx(oa,{darasa:i,form:O,onFinish:he})}),e.jsx(re,{title:"Connecting "+(u==null?void 0:u.name),open:Y,onClose:g=>K(g),children:e.jsxs(e.Fragment,{children:[e.jsx(vt,{id:u==null?void 0:u.id}),e.jsx(L,{onClick:()=>ze(u==null?void 0:u.id),style:{position:"absolute",bottom:0,right:0,margin:10},children:"Connect"})]})}),e.jsx(re,{title:"Share Class",open:we,width:"40vw",onClose:g=>ve(g),children:e.jsx(xe,{title:"Click Copy icon to copy share link",children:e.jsx(la,{copyable:{icon:[e.jsx(Ft,{},"copy-icon"),e.jsx(qt,{},"copied-icon")],tooltips:["click here","you clicked!!"],onCopy:()=>{d.success("Link Successfully Copied")}},style:{textAlign:"center",fontSize:20},children:G.site_url+"/oclass/class/session/"+(i==null?void 0:i.id)+"/"+(i==null?void 0:i.code)})})})]})},ca=()=>(o.useEffect(()=>{document.title=G.system_name+": Classes"},[]),e.jsxs(R,{children:[e.jsxs(I,{children:[e.jsx(I.Item,{children:e.jsx(ue,{to:"/oclass",children:"Home"})}),e.jsx(I.Item,{children:"Connect Classes"})]}),e.jsx(R,{sx:{mt:2},children:e.jsx(Ne,{mode:"connect"})})]})),da=()=>(o.useEffect(()=>{document.title=G.system_name+": Classes"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(I,{children:[e.jsx(I.Item,{children:e.jsx(ue,{to:"/oclass",children:"Home"})}),e.jsx(I.Item,{children:"Classes"})]}),e.jsx(R,{sx:{mt:2},children:e.jsx(Ne,{mode:"all"})})]})),{TabPane:Q}=xt,ua=o.lazy(()=>X(()=>import("./class_announcements-00f77b18.js"),["assets/class_announcements-00f77b18.js","assets/index-351477c3.js","assets/index-5e5904d3.css","assets/ckeditor-84fadb55.js","assets/ckeditor-3f4550d1.js","assets/text_truncate-315d9efa.js","assets/data_objects-84b5f664.js","assets/data_objects-f008dc0a.js","assets/index-a79ac33a.js","assets/index-8b72edfc.js","assets/InfoCircleFilled-9eecc8d9.js","assets/ActionButton-40b0160f.js","assets/DialogWrap-e5db41da.js","assets/index-20e3f79b.js","assets/fade-8ee215b5.js"]).then(n=>({default:n.ClassAnnouncements}))),ha=o.lazy(()=>X(()=>import("./class_drives-aac10df1.js"),["assets/class_drives-aac10df1.js","assets/index-351477c3.js","assets/index-5e5904d3.css","assets/data_objects-f008dc0a.js","assets/data_objects-84b5f664.js","assets/Skeleton-8f0e80db.js","assets/index-a79ac33a.js","assets/index-81b1f6d5.js","assets/index-cbd0288c.js","assets/ActionButton-40b0160f.js","assets/index-fe5f5443.js","assets/transButton-b6535c48.js","assets/index-f080e680.js","assets/index-e245930b.js","assets/index-d9a31a18.js","assets/index-6af680ed.js","assets/Alert-a3483804.js","assets/index-8b72edfc.js","assets/InfoCircleFilled-9eecc8d9.js","assets/DialogWrap-e5db41da.js","assets/index-20e3f79b.js","assets/fade-8ee215b5.js"]).then(n=>({default:n.ClassDrives}))),ma=o.lazy(()=>X(()=>import("./class_assignments-52d56b3a.js"),["assets/class_assignments-52d56b3a.js","assets/index-351477c3.js","assets/index-5e5904d3.css","assets/edit_assignment-bf6da4d3.js","assets/data_objects-84b5f664.js","assets/data_objects-f008dc0a.js","assets/index-a79ac33a.js","assets/index-6af680ed.js","assets/index-cbd0288c.js","assets/index-204a1fd3.js","assets/InfoCircleFilled-9eecc8d9.js","assets/index-a5d8814c.js","assets/Upload-9b869cab.js","assets/fade-8ee215b5.js","assets/index-8b72edfc.js","assets/ActionButton-40b0160f.js","assets/DialogWrap-e5db41da.js","assets/index-20e3f79b.js","assets/ckeditor-3f4550d1.js","assets/ckeditor-84fadb55.js","assets/index-5cad5ca6.js","assets/index-b71cc5cf.js","assets/index-7b9f9af3.js","assets/localeData-365ad521.js","assets/SinglePicker-279a4acc.js"]).then(n=>({default:n.ClassAssignments}))),fa=o.lazy(()=>X(()=>import("./class_files-d475a306.js"),["assets/class_files-d475a306.js","assets/index-351477c3.js","assets/index-5e5904d3.css","assets/file_item_component-56bb906d.js","assets/index-60a18e86.js","assets/defineProperty-cad3b133.js","assets/index-1cc45ed0.js","assets/data_objects-f008dc0a.js","assets/index-ba2e3766.js","assets/index-e245930b.js","assets/Skeleton-8f0e80db.js","assets/index-d9a31a18.js","assets/index-81b1f6d5.js","assets/index-cbd0288c.js","assets/ActionButton-40b0160f.js","assets/index-fe5f5443.js","assets/transButton-b6535c48.js","assets/index-f080e680.js","assets/index.esm-3f09f527.js","assets/iconBase-55a64fc6.js","assets/index-a79ac33a.js","assets/index-6af680ed.js","assets/index-70dcd1db.js","assets/Image-0a920d6e.js","assets/DialogWrap-e5db41da.js","assets/index-20e3f79b.js","assets/fade-8ee215b5.js","assets/file_item_component-3ade1005.css"]).then(n=>({default:n.ClassFiles}))),ga=o.lazy(()=>X(()=>import("./class_resources_links-1ff15130.js"),["assets/class_resources_links-1ff15130.js","assets/index-351477c3.js","assets/index-5e5904d3.css","assets/data_objects-84b5f664.js","assets/data_objects-f008dc0a.js","assets/index-a79ac33a.js","assets/index-8b72edfc.js","assets/InfoCircleFilled-9eecc8d9.js","assets/ActionButton-40b0160f.js","assets/DialogWrap-e5db41da.js","assets/index-20e3f79b.js","assets/fade-8ee215b5.js"]).then(n=>({default:n.ClassResurcesLinks}))),pa=o.lazy(()=>X(()=>import("./class_students-382728e6.js"),["assets/class_students-382728e6.js","assets/index-351477c3.js","assets/index-5e5904d3.css","assets/data_objects-84b5f664.js","assets/data_objects-f008dc0a.js","assets/Skeleton-8f0e80db.js","assets/index-a79ac33a.js","assets/index-81b1f6d5.js","assets/index-cbd0288c.js","assets/ActionButton-40b0160f.js","assets/index-6af680ed.js","assets/index-fe5f5443.js","assets/transButton-b6535c48.js","assets/index-f080e680.js","assets/index-e245930b.js","assets/index-d9a31a18.js","assets/Alert-a3483804.js","assets/index-8b72edfc.js","assets/InfoCircleFilled-9eecc8d9.js","assets/DialogWrap-e5db41da.js","assets/index-20e3f79b.js","assets/fade-8ee215b5.js"]).then(n=>({default:n.ClassStudents}))),xa=o.lazy(()=>X(()=>import("./class_videos-0908d104.js"),["assets/class_videos-0908d104.js","assets/index-351477c3.js","assets/index-5e5904d3.css","assets/data_objects-84b5f664.js","assets/data_objects-f008dc0a.js","assets/ckeditor-84fadb55.js","assets/index-a5d8814c.js","assets/Upload-9b869cab.js","assets/fade-8ee215b5.js","assets/index-60a18e86.js","assets/defineProperty-cad3b133.js","assets/index-1cc45ed0.js","assets/index-6b812589.js","assets/useNotification-c56c34f9.js","assets/DialogWrap-e5db41da.js","assets/index-7b9f9af3.js","assets/localeData-365ad521.js","assets/SinglePicker-279a4acc.js","assets/index-d9a31a18.js","assets/useMutateObserver-a2c9d48f.js","assets/index-9b61db8d.js","assets/InputNumber-e7f57cfa.js","assets/Image-0a920d6e.js","assets/Rate-6e1c6086.js","assets/index-88abecb7.js","assets/index-f080e680.js","assets/Skeleton-8f0e80db.js","assets/index-e245930b.js","assets/Alert-a3483804.js","assets/index-8b72edfc.js","assets/InfoCircleFilled-9eecc8d9.js","assets/ActionButton-40b0160f.js","assets/index-20e3f79b.js"]).then(n=>({default:n.ClassVideos}))),va=o.lazy(()=>X(()=>import("./class_virtual_session-d776b064.js"),["assets/class_virtual_session-d776b064.js","assets/index-351477c3.js","assets/index-5e5904d3.css","assets/ckeditor-84fadb55.js","assets/index-5cad5ca6.js","assets/index-b71cc5cf.js","assets/index-7b9f9af3.js","assets/localeData-365ad521.js","assets/SinglePicker-279a4acc.js","assets/index-7b6ba676.js","assets/InputNumber-e7f57cfa.js","assets/edit_class_virtual_form-930c2574.js","assets/ckeditor-3f4550d1.js","assets/data_objects-84b5f664.js","assets/data_objects-f008dc0a.js","assets/index-a79ac33a.js","assets/index-e245930b.js","assets/Skeleton-8f0e80db.js","assets/index-d9a31a18.js","assets/index-6af680ed.js","assets/index-cbd0288c.js","assets/index-8b72edfc.js","assets/InfoCircleFilled-9eecc8d9.js","assets/ActionButton-40b0160f.js","assets/DialogWrap-e5db41da.js","assets/index-20e3f79b.js","assets/fade-8ee215b5.js","assets/index-6b812589.js","assets/defineProperty-cad3b133.js","assets/useNotification-c56c34f9.js","assets/useMutateObserver-a2c9d48f.js","assets/index-9b61db8d.js","assets/Image-0a920d6e.js","assets/Upload-9b869cab.js","assets/Rate-6e1c6086.js","assets/index-88abecb7.js","assets/index-f080e680.js","assets/Alert-a3483804.js","assets/index-fe5f5443.js","assets/transButton-b6535c48.js","assets/index-1cc45ed0.js","assets/index-a5d8814c.js","assets/index-70dcd1db.js","assets/darasa_card-418a58bf.js","assets/remove_html_tags-be9c976e.js","assets/index-81b1f6d5.js","assets/index-4e600c89.js","assets/index-45b375c6.js","assets/text_truncate-315d9efa.js","assets/index-ba2e3766.js","assets/book_payment_form-1ebdca27.js","assets/index-204a1fd3.js","assets/index-3779f7bb.js","assets/index.es-cd6a888d.js"]).then(n=>({default:n.ClassVirtualSessions}))),ya=o.lazy(()=>X(()=>import("./feeds-f18625da.js"),["assets/feeds-f18625da.js","assets/index-351477c3.js","assets/index-5e5904d3.css","assets/index.es-cd6a888d.js","assets/ckeditor-84fadb55.js","assets/data_objects-84b5f664.js","assets/data_objects-f008dc0a.js","assets/index-a79ac33a.js","assets/index-81b1f6d5.js","assets/index-cbd0288c.js","assets/ActionButton-40b0160f.js","assets/index-6af680ed.js","assets/index-70dcd1db.js","assets/Image-0a920d6e.js","assets/DialogWrap-e5db41da.js","assets/index-20e3f79b.js","assets/fade-8ee215b5.js","assets/index-dfba75c1.js","assets/index-a5d8814c.js","assets/Upload-9b869cab.js","assets/index-1cc45ed0.js","assets/index-fe5f5443.js","assets/transButton-b6535c48.js","assets/index-f080e680.js","assets/index-8b72edfc.js","assets/InfoCircleFilled-9eecc8d9.js","assets/feeds-eb3240d6.css"]).then(n=>({default:n.PostsComponent}))),ja=o.lazy(()=>X(()=>import("./class_topics-1bc8e5ab.js"),["assets/class_topics-1bc8e5ab.js","assets/index-351477c3.js","assets/index-5e5904d3.css","assets/ckeditor-84fadb55.js","assets/data_objects-84b5f664.js","assets/data_objects-f008dc0a.js","assets/index-5cad5ca6.js","assets/index-b71cc5cf.js","assets/index-7b9f9af3.js","assets/localeData-365ad521.js","assets/SinglePicker-279a4acc.js","assets/index-7b6ba676.js","assets/InputNumber-e7f57cfa.js","assets/iconBase-55a64fc6.js","assets/index-ba2e3766.js","assets/index-e245930b.js","assets/Skeleton-8f0e80db.js","assets/index-d9a31a18.js","assets/Collapse-5fe46228.js","assets/index-9b61db8d.js","assets/index-8b72edfc.js","assets/InfoCircleFilled-9eecc8d9.js","assets/ActionButton-40b0160f.js","assets/DialogWrap-e5db41da.js","assets/index-20e3f79b.js","assets/fade-8ee215b5.js"]).then(n=>({default:n.ClassTopics}))),ba=o.lazy(()=>X(()=>import("./class_payments-6bc730d1.js"),["assets/class_payments-6bc730d1.js","assets/index-351477c3.js","assets/index-5e5904d3.css","assets/data_objects-84b5f664.js","assets/data_objects-f008dc0a.js","assets/Skeleton-8f0e80db.js","assets/index-a79ac33a.js","assets/index-6af680ed.js","assets/index-cbd0288c.js"]).then(n=>({default:n.ClassPayments}))),Ca=o.lazy(()=>X(()=>import("./class_disbursements-29f83cc8.js"),["assets/class_disbursements-29f83cc8.js","assets/index-351477c3.js","assets/index-5e5904d3.css","assets/data_objects-84b5f664.js","assets/data_objects-f008dc0a.js","assets/index-1cc45ed0.js","assets/index-e9f79efd.js","assets/Skeleton-8f0e80db.js","assets/index-a79ac33a.js","assets/index-6af680ed.js","assets/index-cbd0288c.js"]).then(n=>({default:n.ClassDisbursement}))),wa=n=>{const[t,a]=o.useState(),[r,s]=o.useState(!0),[i,l]=o.useState("1"),{push:u}=Me(),m=$e(),x=async(p,j)=>{const{data:b}=await E.custom({url:"",method:"post",meta:{operation:"publishDarasa",variables:{id:{value:parseInt(p.toString()),type:"Int",required:!0},publish:{value:j,type:"Boolean",required:!0}},fields:["success","message",{darasa:de}]}}).catch(()=>(d.remove(),d.error("Error publishing class"),{data:null})).then(w=>w);d.remove(),b&&b.success?(a(b.darasa),d.success(b.message)):d.error(b.message)},y=async p=>{const{data:j}=await E.custom({url:"",method:"get",meta:{operation:"darasa",variables:{id:{value:parseInt(p.toString()),type:"Int",required:!0}},fields:de}}).catch(()=>(d.error("Error fetching darasa"),{data:null})).then(b=>b);j&&(a(j),s(!1))};return o.useEffect(()=>{y(m.id),localStorage.getItem("currentClass")===m.id.toString()?l(localStorage.getItem("classCurrentTabIndex")??"1"):(localStorage.setItem("currentClass",m.id.toString()),l("1"))},[m.id]),e.jsx(e.Fragment,{children:e.jsxs(ne,{spinning:r,children:[e.jsx("div",{style:{marginTop:5,marginBottom:5},children:e.jsxs(I,{children:[e.jsx(I.Item,{children:e.jsx("a",{onClick:()=>u("/oclass"),children:"Home"})}),e.jsx(I.Item,{children:e.jsx("a",{onClick:()=>u("/oclass"),children:"Classes"})}),e.jsxs(I.Item,{children:["Class Session",e.jsx(Lt,{}),t!=null&&t.name?e.jsxs("span",{style:{color:"orange"},children:[t==null?void 0:t.name," - ","{"+(t==null?void 0:t.code)+"}"]}):e.jsx(e.Fragment,{})]})]})}),(t==null?void 0:t.isBlocked)&&e.jsx(Le,{severity:"warning",sx:{fontSize:18},children:"You have been blocked from this class, please contact the class owner for more information."}),!(t!=null&&t.isBlocked)&&e.jsx("div",{style:{marginTop:10,background:"white",padding:10},children:e.jsxs(xt,{type:"card",tabBarExtraContent:e.jsxs(e.Fragment,{children:[(t==null?void 0:t.canManage)&&e.jsx(Ke,{title:e.jsx(R,{sx:{fontSize:20},children:t!=null&&t.published?"Are you sure you want to unpublish this class?":"Are you sure you want to publish this class?"}),description:e.jsx(R,{sx:{fontSize:18,width:"20vw"},children:t!=null&&t.published?"This class will be unpublished and students will not be able to see it. and it will be unlisted from Market Place":"This class will be published and students will be able to see it. And it will be listed in Market Place"}),onConfirm:()=>{console.log("publishing class"),x(t==null?void 0:t.id,!(t!=null&&t.published))},okText:t!=null&&t.published?"Yes, Unpublish":"Yes, Publish",cancelText:"No",children:e.jsx(L,{icon:t!=null&&t.published?e.jsx(Nt,{}):e.jsx(At,{}),disabled:!(t!=null&&t.canManage),children:t!=null&&t.published?"Unpublish":"Publish"})}),e.jsx(L,{icon:e.jsx(zt,{}),disabled:!(t!=null&&t.canManage),children:"Configs"})]}),activeKey:i,onTabClick:p=>{l(p.toString()),localStorage.setItem("classCurrentTabIndex",p)},children:[e.jsx(Q,{tab:"Class Feeds",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(ya,{id:m.id,canManage:t==null?void 0:t.canManage})})},"1"),e.jsx(Q,{tab:"Files",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(fa,{id:m.id,canManage:t==null?void 0:t.canManage})})},"2"),e.jsx(Q,{tab:"Connected Drives",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(ha,{id:m.id,canManage:t==null?void 0:t.canManage})})},"3"),e.jsx(Q,{tab:"Topics",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(ja,{id:m.id,canManage:t==null?void 0:t.canManage})})},"12"),e.jsx(Q,{tab:"Resources Links",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(ga,{id:m.id,canManage:t==null?void 0:t.canManage})})},"4"),e.jsx(Q,{tab:"Videos",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(xa,{id:m.id,canManage:t==null?void 0:t.canManage})})},"5"),e.jsx(Q,{tab:"Virtual Sessions",disabled:!1,children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(va,{id:m.id,canManage:t==null?void 0:t.canManage})})},"6"),e.jsx(Q,{tab:"Assignments",disabled:!1,children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(ma,{id:m.id,canManage:t==null?void 0:t.canManage})})},"7"),e.jsx(Q,{tab:"Announcements",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(ua,{id:m.id,canManage:t==null?void 0:t.canManage})})},"8"),e.jsx(Q,{tab:"Students",children:e.jsx(pa,{id:m.id,canManage:t==null?void 0:t.canManage})},"9"),(t==null?void 0:t.payable)&&(t==null?void 0:t.canManage)&&e.jsxs(e.Fragment,{children:[e.jsx(Q,{tab:"Payments",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(ba,{id:m.id,canManage:t==null?void 0:t.canManage})})},"10"),e.jsx(Q,{tab:"Disbursements",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(Ca,{id:m.id,canManage:t==null?void 0:t.canManage})})},"11")]})]})})]})})},yt=n=>{const[t,a]=o.useState(),[r,s]=o.useState(!1),[i,l]=o.useState(!1),[u,m]=o.useState(""),[x,y]=o.useState([]),[p,j]=o.useState(""),[b]=k.useForm(),[w,M]=o.useState(!1),{push:q}=Me(),z=async S=>{const{data:f}=await E.custom({url:"",method:"post",meta:{operation:"createDarasaOrder",variables:{darasaId:{value:parseInt(S.darasa_id.toString()),type:"Int",required:!0},phone:{value:S.phone,type:"String",required:!0}},fields:["success","message",{darasaOrder:["id","phone","isPaid","paymentDate","amount","receiptNumber"]}]}}).catch(()=>(d.remove(),d.error("Error Creating Darasa Order"),{data:null})).then(h=>h);f&&(f.success?(M(!0),a(f.darasaOrder),d.success(f.message)):(M(!1),d.error(f.message)))},N=async()=>{const{data:S}=await E.custom({url:"",method:"get",meta:{operation:"paymentSupportedTelecomCarriers",variables:{},fields:[{results:["id","name"]}]}}).catch(()=>(d.remove(),d.error("Error getting supported carriers"),{data:null})).then(f=>f);if(S){const f=S.results,h=[];f.forEach(v=>{h.push(v.name)}),y(h)}},c=async S=>{const{data:f}=await E.custom({url:"",method:"get",meta:{operation:"darasaOrder",variables:{id:{value:S,type:"Int",required:!0}},fields:["id","phone","isPaid","paymentDate","amount","receiptNumber"]}}).catch(()=>(d.remove(),d.error("Error fetching order details"),{data:null})).then(h=>h);f&&a(f)},P=async S=>{s(!0);const{data:f}=await E.custom({url:"",method:"post",meta:{operation:"validateMobilePhoneNumber",variables:{phone:{value:S,type:"String",required:!0}},fields:["success","message","carrier","formattedPhone"]}}).catch(()=>(d.remove(),d.error("Error Validating Mobile Phone Number"),{data:null})).then(h=>h);return f&&(l(f.success),f.success||(m(f.message),j(f.carrier))),s(!1),f},D=()=>e.jsxs("div",{children:[e.jsxs(V,{title:"",column:1,children:[e.jsx(V.Item,{label:"Class Name",children:n.darasa.name}),e.jsx(V.Item,{label:"Class Code",children:n.darasa.code}),e.jsx(V.Item,{label:"Cost",children:e.jsxs("span",{style:{fontSize:22},children:[n.darasa.price.toLocaleString(),"/= Tsh"]})})]}),e.jsxs(k,{layout:"vertical",form:b,requiredMark:!0,autoComplete:"off",onFinish:async S=>{console.log(S),S.darasa_id=n.darasa.id,z(S)},children:[e.jsx(k.Item,{name:"phone",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Mobile Phone Number"}),p.length>0&&e.jsx(ce,{color:"green",style:{marginLeft:10},children:p}),r&&e.jsx(ne,{spinning:r})]}),rules:[{required:!0,type:"string",message:"Required"},{validator:async(S,f)=>{if(f.length>=10){if(!r){const h=await P(f).then(v=>v);if(h!=null&&h.success)j(h.carrier),l(!0);else return j(""),Promise.reject(h==null?void 0:h.message)}}else l(!1)}}],children:e.jsx(oe,{size:"large",placeholder:"Mobile Phone Number ..."})}),x.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{children:"Supported Payment Merchants"}),e.jsx("span",{children:x.map(S=>e.jsx(ce,{color:"red",children:S}))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(L,{type:"primary",size:"large",htmlType:"submit",disabled:!i,children:"Pay"})})]})]});return o.useEffect(()=>{N();const S=setInterval(()=>{w&&t&&!t.isPaid&&c(t.id)},5e3);return()=>clearInterval(S)},[n.randKey]),t&&t.isPaid?e.jsxs("div",{children:[e.jsx(te.Alert,{message:"Congratulations, Payment Received Successfully and you have been enrolled to the "+n.darasa.name+" class",type:"success",showIcon:!0}),t&&e.jsxs(V,{title:"Payment Receipt",column:1,children:[e.jsx(V.Item,{label:"Receipt Number",children:t.receiptNumber}),e.jsx(V.Item,{label:"Phone Number",children:t.phone}),e.jsxs(V.Item,{label:"Amount Paid",children:[t.amount.toLocaleString(),"/= Tsh"]}),e.jsx(V.Item,{label:"Payment Date",children:t.paymentDate})]}),e.jsx("span",{style:{marginTop:10},children:e.jsxs(Kt,{justify:"space-between",style:{marginTop:20},children:[e.jsx(L,{type:"primary",size:"large",onClick:()=>{q("/oclass")},children:"View Your Enrolled Classes"}),e.jsx(L,{type:"primary",size:"large",onClick:()=>{n.onFinish()},children:"Continue Shopping"})]})})]}):w?e.jsx(e.Fragment,{children:e.jsx("h2",{children:"Payment Request Sent, Please check your phone and confirm the payment to proceed"})}):D()},Sa=()=>{const[n,t]=o.useState(!0),[a,r]=o.useState(!1),[s,i]=o.useState(),[l,u]=o.useState(!1),m=$e(),x=async p=>{t(!0);const{data:j}=await E.custom({url:"",method:"post",meta:{operation:"checkDarasaConnected",variables:{id:{value:parseInt(p.toString()),type:"Int",required:!0}},fields:["success","message",{darasa:de}]}}).catch(()=>({data:null})).then(b=>b);t(!1),j&&(r(j.success),i(j.darasa))},y=async p=>{const{data:j}=await E.custom({url:"",method:"post",meta:{operation:"connectDarasa",variables:{id:{value:parseInt(p.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>({data:null})).then(b=>b);j?(r(j.success),i(j.darasa),d.success(j.message),j.success&&x(m.id)):d.error(j.message)};return o.useEffect(()=>{document.title=G.system_name+": Class Session",x(m.id)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginTop:0},children:[n&&e.jsx(e.Fragment,{children:e.jsx(H,{children:e.jsx(W,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(ne,{tip:"Checking Connection",size:"large",style:{color:"red"},children:e.jsx("div",{className:"content",style:{height:"50vh",width:"100vh"}})})})})}),a&&e.jsx(wa,{}),!a&&!n&&e.jsxs(e.Fragment,{children:[e.jsx(xe,{children:e.jsxs(V,{title:"Class Info's",children:[e.jsx(V.Item,{label:"Class Name/Title",children:s==null?void 0:s.name}),e.jsx(V.Item,{label:"Class Code",children:s==null?void 0:s.code}),e.jsx(V.Item,{label:"Created By",children:e.jsx("a",{children:s==null?void 0:s.user.fullName})}),(s==null?void 0:s.startDate)&&e.jsx(V.Item,{label:"Start Date",children:Ce(s==null?void 0:s.startDate).format("YYYY-MM-DD")}),(s==null?void 0:s.endDate)&&e.jsx(V.Item,{label:"End Date",children:Ce(s==null?void 0:s.endDate).format("YYYY-MM-DD")}),(s==null?void 0:s.payable)&&e.jsxs(V.Item,{label:"Price",children:[s==null?void 0:s.price.toLocaleString(),"/= Tsh"]})]})}),e.jsx(H,{children:e.jsxs(W,{span:24,style:{display:"flex",justifyContent:"center"},children:[(s==null?void 0:s.payable)&&e.jsx(L,{size:"large",onClick:()=>u(!0),children:"Pay for This Class"}),!(s!=null&&s.payable)&&e.jsx(Ke,{title:"Are you sure to Connect/Join to this Class",onConfirm:()=>y(m.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(L,{size:"large",children:"Connect/Join"})})]})})]})]}),e.jsx(re,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Purchasing"}),e.jsx("span",{style:{marginLeft:10,fontWeight:"bolder"},children:s==null?void 0:s.name})]}),width:"35vw",open:l,onClose:p=>u(p),children:e.jsx(yt,{darasa:s,randKey:Math.random()})})]})},Da=()=>(o.useEffect(()=>{document.title=G.system_name+": Connected Classes"},[]),e.jsxs(R,{children:[e.jsxs(I,{children:[e.jsx(I.Item,{children:e.jsx(ue,{to:"/oclass",children:"Home"})}),e.jsx(I.Item,{children:"Connected Classes"})]}),e.jsx(R,{sx:{mt:2},children:e.jsx(Ne,{mode:"connected"})})]})),{Meta:Pa}=xe,ka=n=>{const[t,a]=o.useState([]),[r,s]=o.useState(),[i,l]=o.useState(!1),[u,m]=o.useState(!1),[x,y]=o.useState(!0),[p,j]=o.useState(1),[b,w]=o.useState(0),[M]=k.useForm(),z=!Zt.useBreakpoint().lg,N=D=>{s(D),m(!0)},c=D=>{s(D),l(!0)},P=async(D,S="",f=!1)=>{const{data:h}=await E.custom({url:"",method:"get",meta:{operation:"madarasaToBuy",variables:{page:{value:D,type:"Int",required:!0},key:{value:S,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:de}]}}).catch(()=>(d.remove(),d.error("Error getting darasas"),{data:null})).then(v=>v);h&&(w(h.total),j(h.page),a([...h.results])),y(!1)};return o.useEffect(()=>{P(1)},[]),x?e.jsx(e.Fragment,{children:e.jsx(Be,{loading:x,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(H,{style:{display:"flex",justifyContent:"start"},children:e.jsx(W,{span:z?24:10,children:e.jsx(k,{layout:"vertical",form:M,onFinish:D=>{j(0),P(0,D.key,!0)},children:e.jsx(k.Item,{name:"key",children:e.jsx(oe,{size:"large",placeholder:"Search Classes...",prefix:e.jsx(Te,{}),autoComplete:"off",allowClear:!0})})})})}),t.length>0?e.jsx(H,{align:"top",children:t.map(D=>e.jsx(W,{span:z?24:8,children:e.jsxs(xe,{hoverable:D.isActive,style:{marginRight:10,marginBottom:10},actions:[e.jsx(L,{size:"large",onClick:()=>c(D),children:"Read More"}),e.jsx(L,{size:"large",onClick:()=>N(D),disabled:!D.canPurchase,children:"Buy Now"})],children:[e.jsx("div",{style:{height:window.innerHeight/3,background:"url("+D.cover+")",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",marginBottom:10,borderRadius:5}}),e.jsx(Pa,{title:e.jsx(e.Fragment,{children:e.jsxs(ge,{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("h2",{children:[e.jsx(Ue,{title:D.name,children:et(D.name,20)}),e.jsx(ce,{color:"red",style:{marginLeft:10},children:D.code})]}),e.jsxs("span",{style:{fontSize:24},children:[D.price,"/="]})]})}),description:e.jsx(e.Fragment,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:et(D.description,100)}})})})]})}))}):e.jsx(Le,{severity:"info",sx:{fontSize:18},children:"No Classes Found"}),e.jsx(te.Pagination,{current:p,total:b,onChange:D=>{P(D)},showSizeChanger:!1,style:{marginTop:10}}),e.jsx(Qe,{title:r==null?void 0:r.name,width:"50vw",anchor:"right",onClose:D=>l(D),open:i,children:e.jsxs(V,{title:"",column:1,children:[e.jsx(V.Item,{label:"Class Name",children:r==null?void 0:r.name}),e.jsx(V.Item,{label:"Class Code#",children:r==null?void 0:r.code}),e.jsxs(V.Item,{label:"Cost",children:[r==null?void 0:r.price," Tsh"]}),e.jsx(V.Item,{label:"Description",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:r==null?void 0:r.description}})}),e.jsx(V.Item,{label:"",children:e.jsx(L,{size:"large",onClick:()=>N(r),disabled:!(r!=null&&r.canPurchase),children:"Buy Now"})})]})}),e.jsx(re,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Purchasing"}),e.jsx("span",{style:{marginLeft:10,fontWeight:"bolder"},children:r==null?void 0:r.name})]}),width:"35vw",open:u,onClose:D=>m(D),children:e.jsx(yt,{darasa:r,randKey:Math.random(),onFinish:()=>{m(!1),P(1,"",!1)}})})]})},Ta=()=>(o.useEffect(()=>{document.title=G.system_name+": Classes Marketplace"},[]),e.jsxs(R,{children:[e.jsxs(I,{children:[e.jsx(I.Item,{children:e.jsx(ue,{to:"/oclass",children:"Home"})}),e.jsx(I.Item,{children:"Classes Marketplace"})]}),e.jsx(R,{sx:{mt:2},children:e.jsx(ka,{randKey:Math.random()})})]})),Ma=()=>(o.useEffect(()=>{document.title=G.system_name+": My Classes"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(I,{children:[e.jsx(I.Item,{children:e.jsx(ue,{to:"/oclass",children:"Home"})}),e.jsx(I.Item,{children:"My Classes"})]}),e.jsx(R,{sx:{mt:2},children:e.jsx(Ne,{mode:"my"})})]})),Ia=n=>{const[t,a]=o.useState(!1),[r,s]=o.useState(0),[i,l]=o.useState(0),[u,m]=o.useState(1),[x,y]=o.useState(25),[p,j]=o.useState(""),[b,w]=o.useState([]),[M,q]=o.useState(),[z]=k.useForm(),[N,c]=o.useState(!1);Me();const P=async h=>{q(h),c(!0)},D=async(h,v="",O=25)=>{a(!0);const{data:Y}=await E.custom({url:"",method:"get",meta:{operation:"myDarasaPurchases",variables:{page:{value:h,type:"Int",required:!0},key:{value:v,type:"String",required:!1},pageSize:{value:O,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Gt}]}}).catch(K=>(console.log(K),d.error("Error getting Bills"),{data:null})).then(K=>K);Y&&(s(Y.total),l(Y.pages),m(Y.page),w(Y.results)),a(!1)},S=async h=>{const{data:v}=await E.custom({url:"",method:"post",meta:{operation:"deleteDarasaOrder",variables:{id:{value:h,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error deleting Order"),{data:null})).then(O=>O);v&&w(b.filter(O=>O.id!==h))},f=[{title:"Bill#",dataIndex:"billNumber",fixed:!0,render:(h,v,O)=>{var Y;return e.jsx("span",{children:e.jsx("a",{children:(Y=v==null?void 0:v.bill)==null?void 0:Y.billNumber})})}},{title:"Class Name",dataIndex:"bookTitle",fixed:!0,render:(h,v,O)=>{var Y;return e.jsx("span",{children:e.jsx("a",{children:(Y=v==null?void 0:v.darasa)==null?void 0:Y.name})})}},{title:"Bill Amount",dataIndex:"billAmount",fixed:!0,render:(h,v,O)=>e.jsxs("span",{children:[v.price," Tsh"]})},{title:"Paid",dataIndex:"isPaid",fixed:!0,render:(h,v,O)=>e.jsx("span",{children:v.isPaid?e.jsx(ce,{color:"green",children:"Yes"}):e.jsx(ce,{color:"red",children:"No"})})},{title:"Created",dataIndex:"created",render:(h,v,O)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(v.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(h,v,O)=>e.jsx("a",{children:v!=null&&v.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(h,v,O)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[!v.isPaid&&e.jsx(Ke,{title:"Are you sure to delete this Order?",onConfirm:()=>S(v.id),okText:"Yes",cancelText:"No",disabled:!(v!=null&&v.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(L,{icon:e.jsx(mt,{}),disabled:!(v!=null&&v.canDelete),size:"large"})}),v.isPaid&&e.jsx(Ue,{title:"Print Receipt",children:e.jsx(L,{icon:e.jsx(Yt,{}),size:"large"})}),!v.isPaid&&e.jsx(Ue,{title:"View Order Details",children:e.jsx(L,{icon:e.jsx(Wt,{}),size:"large",onClick:()=>P(v)})})]})}];return o.useEffect(()=>{D(u,"",25)},[n.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ta,{offsetTop:75,children:e.jsx(H,{style:{display:"flex",justifyContent:"center",marginTop:20},children:e.jsx(W,{span:10,children:e.jsx(k,{layout:"vertical",form:z,onFinish:h=>{D(1,h.key,25)},children:e.jsx(k.Item,{name:"key",children:e.jsx(oe,{size:"large",placeholder:"Search Bill(s)...",prefix:e.jsx(Te,{}),autoComplete:"off",allowClear:!0})})})})})}),e.jsx(H,{children:e.jsx(W,{span:24,children:e.jsx(Vt,{loading:t,columns:f,dataSource:b,pagination:{onChange:(h,v)=>{y(v),D(h,p,v)},total:r,pageSize:x,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})})}),e.jsx(re,{title:"Order Details & Payment",open:N,width:"50vw",onClose:h=>c(h),children:e.jsx(ea,{book:M==null?void 0:M.darasa})})]})},Oa=()=>(o.useEffect(()=>{document.title=G.system_name+": Classes Orders"},[]),e.jsx("div",{style:{marginTop:10},children:e.jsx(Ia,{randKey:Math.random()})}));function pe(n){if(n===null||n===!0||n===!1)return NaN;var t=Number(n);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function $(n,t){if(t.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+t.length+" present")}function se(n){$(1,arguments);var t=Object.prototype.toString.call(n);return n instanceof Date||ft(n)==="object"&&t==="[object Date]"?new Date(n.getTime()):typeof n=="number"||t==="[object Number]"?new Date(n):((typeof n=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Ea(n,t){$(2,arguments);var a=se(n).getTime(),r=pe(t);return new Date(a+r)}var _a={};function Ae(){return _a}function Fa(n){var t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),n.getTime()-t.getTime()}function qa(n){return $(1,arguments),n instanceof Date||ft(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function La(n){if($(1,arguments),!qa(n)&&typeof n!="number")return!1;var t=se(n);return!isNaN(Number(t))}function Na(n,t){$(2,arguments);var a=pe(t);return Ea(n,-a)}var Aa=864e5;function za(n){$(1,arguments);var t=se(n),a=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),s=a-r;return Math.floor(s/Aa)+1}function Fe(n){$(1,arguments);var t=1,a=se(n),r=a.getUTCDay(),s=(r<t?7:0)+r-t;return a.setUTCDate(a.getUTCDate()-s),a.setUTCHours(0,0,0,0),a}function jt(n){$(1,arguments);var t=se(n),a=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(a+1,0,4),r.setUTCHours(0,0,0,0);var s=Fe(r),i=new Date(0);i.setUTCFullYear(a,0,4),i.setUTCHours(0,0,0,0);var l=Fe(i);return t.getTime()>=s.getTime()?a+1:t.getTime()>=l.getTime()?a:a-1}function Va(n){$(1,arguments);var t=jt(n),a=new Date(0);a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0);var r=Fe(a);return r}var Ya=6048e5;function Wa(n){$(1,arguments);var t=se(n),a=Fe(t).getTime()-Va(t).getTime();return Math.round(a/Ya)+1}function qe(n,t){var a,r,s,i,l,u,m,x;$(1,arguments);var y=Ae(),p=pe((a=(r=(s=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:y.weekStartsOn)!==null&&r!==void 0?r:(m=y.locale)===null||m===void 0||(x=m.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&a!==void 0?a:0);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var j=se(n),b=j.getUTCDay(),w=(b<p?7:0)+b-p;return j.setUTCDate(j.getUTCDate()-w),j.setUTCHours(0,0,0,0),j}function bt(n,t){var a,r,s,i,l,u,m,x;$(1,arguments);var y=se(n),p=y.getUTCFullYear(),j=Ae(),b=pe((a=(r=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:j.firstWeekContainsDate)!==null&&r!==void 0?r:(m=j.locale)===null||m===void 0||(x=m.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(b>=1&&b<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var w=new Date(0);w.setUTCFullYear(p+1,0,b),w.setUTCHours(0,0,0,0);var M=qe(w,t),q=new Date(0);q.setUTCFullYear(p,0,b),q.setUTCHours(0,0,0,0);var z=qe(q,t);return y.getTime()>=M.getTime()?p+1:y.getTime()>=z.getTime()?p:p-1}function Ra(n,t){var a,r,s,i,l,u,m,x;$(1,arguments);var y=Ae(),p=pe((a=(r=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:y.firstWeekContainsDate)!==null&&r!==void 0?r:(m=y.locale)===null||m===void 0||(x=m.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&a!==void 0?a:1),j=bt(n,t),b=new Date(0);b.setUTCFullYear(j,0,p),b.setUTCHours(0,0,0,0);var w=qe(b,t);return w}var Ua=6048e5;function Ba(n,t){$(1,arguments);var a=se(n),r=qe(a,t).getTime()-Ra(a,t).getTime();return Math.round(r/Ua)+1}function F(n,t){for(var a=n<0?"-":"",r=Math.abs(n).toString();r.length<t;)r="0"+r;return a+r}var Ha={y:function(t,a){var r=t.getUTCFullYear(),s=r>0?r:1-r;return F(a==="yy"?s%100:s,a.length)},M:function(t,a){var r=t.getUTCMonth();return a==="M"?String(r+1):F(r+1,2)},d:function(t,a){return F(t.getUTCDate(),a.length)},a:function(t,a){var r=t.getUTCHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,a){return F(t.getUTCHours()%12||12,a.length)},H:function(t,a){return F(t.getUTCHours(),a.length)},m:function(t,a){return F(t.getUTCMinutes(),a.length)},s:function(t,a){return F(t.getUTCSeconds(),a.length)},S:function(t,a){var r=a.length,s=t.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return F(i,a.length)}};const le=Ha;var je={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$a={G:function(t,a,r){var s=t.getUTCFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(t,a,r){if(a==="yo"){var s=t.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return le.y(t,a)},Y:function(t,a,r,s){var i=bt(t,s),l=i>0?i:1-i;if(a==="YY"){var u=l%100;return F(u,2)}return a==="Yo"?r.ordinalNumber(l,{unit:"year"}):F(l,a.length)},R:function(t,a){var r=jt(t);return F(r,a.length)},u:function(t,a){var r=t.getUTCFullYear();return F(r,a.length)},Q:function(t,a,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(a){case"Q":return String(s);case"QQ":return F(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,a,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(a){case"q":return String(s);case"qq":return F(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,a,r){var s=t.getUTCMonth();switch(a){case"M":case"MM":return le.M(t,a);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(t,a,r){var s=t.getUTCMonth();switch(a){case"L":return String(s+1);case"LL":return F(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(t,a,r,s){var i=Ba(t,s);return a==="wo"?r.ordinalNumber(i,{unit:"week"}):F(i,a.length)},I:function(t,a,r){var s=Wa(t);return a==="Io"?r.ordinalNumber(s,{unit:"week"}):F(s,a.length)},d:function(t,a,r){return a==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):le.d(t,a)},D:function(t,a,r){var s=za(t);return a==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):F(s,a.length)},E:function(t,a,r){var s=t.getUTCDay();switch(a){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(t,a,r,s){var i=t.getUTCDay(),l=(i-s.weekStartsOn+8)%7||7;switch(a){case"e":return String(l);case"ee":return F(l,2);case"eo":return r.ordinalNumber(l,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,a,r,s){var i=t.getUTCDay(),l=(i-s.weekStartsOn+8)%7||7;switch(a){case"c":return String(l);case"cc":return F(l,a.length);case"co":return r.ordinalNumber(l,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,a,r){var s=t.getUTCDay(),i=s===0?7:s;switch(a){case"i":return String(i);case"ii":return F(i,a.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(t,a,r){var s=t.getUTCHours(),i=s/12>=1?"pm":"am";switch(a){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,a,r){var s=t.getUTCHours(),i;switch(s===12?i=je.noon:s===0?i=je.midnight:i=s/12>=1?"pm":"am",a){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,a,r){var s=t.getUTCHours(),i;switch(s>=17?i=je.evening:s>=12?i=je.afternoon:s>=4?i=je.morning:i=je.night,a){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,a,r){if(a==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return le.h(t,a)},H:function(t,a,r){return a==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):le.H(t,a)},K:function(t,a,r){var s=t.getUTCHours()%12;return a==="Ko"?r.ordinalNumber(s,{unit:"hour"}):F(s,a.length)},k:function(t,a,r){var s=t.getUTCHours();return s===0&&(s=24),a==="ko"?r.ordinalNumber(s,{unit:"hour"}):F(s,a.length)},m:function(t,a,r){return a==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):le.m(t,a)},s:function(t,a,r){return a==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):le.s(t,a)},S:function(t,a){return le.S(t,a)},X:function(t,a,r,s){var i=s._originalDate||t,l=i.getTimezoneOffset();if(l===0)return"Z";switch(a){case"X":return at(l);case"XXXX":case"XX":return me(l);case"XXXXX":case"XXX":default:return me(l,":")}},x:function(t,a,r,s){var i=s._originalDate||t,l=i.getTimezoneOffset();switch(a){case"x":return at(l);case"xxxx":case"xx":return me(l);case"xxxxx":case"xxx":default:return me(l,":")}},O:function(t,a,r,s){var i=s._originalDate||t,l=i.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+tt(l,":");case"OOOO":default:return"GMT"+me(l,":")}},z:function(t,a,r,s){var i=s._originalDate||t,l=i.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+tt(l,":");case"zzzz":default:return"GMT"+me(l,":")}},t:function(t,a,r,s){var i=s._originalDate||t,l=Math.floor(i.getTime()/1e3);return F(l,a.length)},T:function(t,a,r,s){var i=s._originalDate||t,l=i.getTime();return F(l,a.length)}};function tt(n,t){var a=n>0?"-":"+",r=Math.abs(n),s=Math.floor(r/60),i=r%60;if(i===0)return a+String(s);var l=t||"";return a+String(s)+l+F(i,2)}function at(n,t){if(n%60===0){var a=n>0?"-":"+";return a+F(Math.abs(n)/60,2)}return me(n,t)}function me(n,t){var a=t||"",r=n>0?"-":"+",s=Math.abs(n),i=F(Math.floor(s/60),2),l=F(s%60,2);return r+i+a+l}const Ga=$a;var rt=function(t,a){switch(t){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});case"PPPP":default:return a.date({width:"full"})}},Ct=function(t,a){switch(t){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});case"pppp":default:return a.time({width:"full"})}},Ja=function(t,a){var r=t.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return rt(t,a);var l;switch(s){case"P":l=a.dateTime({width:"short"});break;case"PP":l=a.dateTime({width:"medium"});break;case"PPP":l=a.dateTime({width:"long"});break;case"PPPP":default:l=a.dateTime({width:"full"});break}return l.replace("{{date}}",rt(s,a)).replace("{{time}}",Ct(i,a))},Qa={p:Ct,P:Ja};const Xa=Qa;var Ka=["D","DD"],Za=["YY","YYYY"];function er(n){return Ka.indexOf(n)!==-1}function tr(n){return Za.indexOf(n)!==-1}function nt(n,t,a){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var ar={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},rr=function(t,a,r){var s,i=ar[t];return typeof i=="string"?s=i:a===1?s=i.one:s=i.other.replace("{{count}}",a.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};const nr=rr;function Re(n){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=t.width?String(t.width):n.defaultWidth,r=n.formats[a]||n.formats[n.defaultWidth];return r}}var sr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ir={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},or={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},lr={date:Re({formats:sr,defaultWidth:"full"}),time:Re({formats:ir,defaultWidth:"full"}),dateTime:Re({formats:or,defaultWidth:"full"})};const cr=lr;var dr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ur=function(t,a,r,s){return dr[t]};const hr=ur;function Se(n){return function(t,a){var r=a!=null&&a.context?String(a.context):"standalone",s;if(r==="formatting"&&n.formattingValues){var i=n.defaultFormattingWidth||n.defaultWidth,l=a!=null&&a.width?String(a.width):i;s=n.formattingValues[l]||n.formattingValues[i]}else{var u=n.defaultWidth,m=a!=null&&a.width?String(a.width):n.defaultWidth;s=n.values[m]||n.values[u]}var x=n.argumentCallback?n.argumentCallback(t):t;return s[x]}}var mr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},fr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},gr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},vr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},yr=function(t,a){var r=Number(t),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},jr={ordinalNumber:yr,era:Se({values:mr,defaultWidth:"wide"}),quarter:Se({values:fr,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Se({values:gr,defaultWidth:"wide"}),day:Se({values:pr,defaultWidth:"wide"}),dayPeriod:Se({values:xr,defaultWidth:"wide",formattingValues:vr,defaultFormattingWidth:"wide"})};const br=jr;function De(n){return function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=a.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],i=t.match(s);if(!i)return null;var l=i[0],u=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],m=Array.isArray(u)?wr(u,function(p){return p.test(l)}):Cr(u,function(p){return p.test(l)}),x;x=n.valueCallback?n.valueCallback(m):m,x=a.valueCallback?a.valueCallback(x):x;var y=t.slice(l.length);return{value:x,rest:y}}}function Cr(n,t){for(var a in n)if(n.hasOwnProperty(a)&&t(n[a]))return a}function wr(n,t){for(var a=0;a<n.length;a++)if(t(n[a]))return a}function Sr(n){return function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(n.matchPattern);if(!r)return null;var s=r[0],i=t.match(n.parsePattern);if(!i)return null;var l=n.valueCallback?n.valueCallback(i[0]):i[0];l=a.valueCallback?a.valueCallback(l):l;var u=t.slice(s.length);return{value:l,rest:u}}}var Dr=/^(\d+)(th|st|nd|rd)?/i,Pr=/\d+/i,kr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Tr={any:[/^b/i,/^(a|c)/i]},Mr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ir={any:[/1/i,/2/i,/3/i,/4/i]},Or={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Er={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_r={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Fr={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},qr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Lr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Nr={ordinalNumber:Sr({matchPattern:Dr,parsePattern:Pr,valueCallback:function(t){return parseInt(t,10)}}),era:De({matchPatterns:kr,defaultMatchWidth:"wide",parsePatterns:Tr,defaultParseWidth:"any"}),quarter:De({matchPatterns:Mr,defaultMatchWidth:"wide",parsePatterns:Ir,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:De({matchPatterns:Or,defaultMatchWidth:"wide",parsePatterns:Er,defaultParseWidth:"any"}),day:De({matchPatterns:_r,defaultMatchWidth:"wide",parsePatterns:Fr,defaultParseWidth:"any"}),dayPeriod:De({matchPatterns:qr,defaultMatchWidth:"any",parsePatterns:Lr,defaultParseWidth:"any"})};const Ar=Nr;var zr={code:"en-US",formatDistance:nr,formatLong:cr,formatRelative:hr,localize:br,match:Ar,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Vr=zr;var Yr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Wr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Rr=/^'([^]*?)'?$/,Ur=/''/g,Br=/[a-zA-Z]/;function st(n,t,a){var r,s,i,l,u,m,x,y,p,j,b,w,M,q,z,N,c,P;$(2,arguments);var D=String(t),S=Ae(),f=(r=(s=a==null?void 0:a.locale)!==null&&s!==void 0?s:S.locale)!==null&&r!==void 0?r:Vr,h=pe((i=(l=(u=(m=a==null?void 0:a.firstWeekContainsDate)!==null&&m!==void 0?m:a==null||(x=a.locale)===null||x===void 0||(y=x.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&u!==void 0?u:S.firstWeekContainsDate)!==null&&l!==void 0?l:(p=S.locale)===null||p===void 0||(j=p.options)===null||j===void 0?void 0:j.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=pe((b=(w=(M=(q=a==null?void 0:a.weekStartsOn)!==null&&q!==void 0?q:a==null||(z=a.locale)===null||z===void 0||(N=z.options)===null||N===void 0?void 0:N.weekStartsOn)!==null&&M!==void 0?M:S.weekStartsOn)!==null&&w!==void 0?w:(c=S.locale)===null||c===void 0||(P=c.options)===null||P===void 0?void 0:P.weekStartsOn)!==null&&b!==void 0?b:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!f.localize)throw new RangeError("locale must contain localize property");if(!f.formatLong)throw new RangeError("locale must contain formatLong property");var O=se(n);if(!La(O))throw new RangeError("Invalid time value");var Y=Fa(O),K=Na(O,Y),we={firstWeekContainsDate:h,weekStartsOn:v,locale:f,_originalDate:O},ve=D.match(Wr).map(function(U){var J=U[0];if(J==="p"||J==="P"){var ee=Xa[J];return ee(U,f.formatLong)}return U}).join("").match(Yr).map(function(U){if(U==="''")return"'";var J=U[0];if(J==="'")return Hr(U);var ee=Ga[J];if(ee)return!(a!=null&&a.useAdditionalWeekYearTokens)&&tr(U)&&nt(U,t,String(n)),!(a!=null&&a.useAdditionalDayOfYearTokens)&&er(U)&&nt(U,t,String(n)),ee(K,U,f.localize,we);if(J.match(Br))throw new RangeError("Format string contains an unescaped latin alphabet character `"+J+"`");return U}).join("");return ve}function Hr(n){var t=n.match(Rr);return t?t[1].replace(Ur,"'"):n}const{Option:$r}=ae,it=[{value:"",label:"Select Duration Type"},{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"}],Gr=n=>{const[t,a]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(k,{layout:"vertical",form:n.form,onFinish:r=>{r.description=t,n.onFinish(r),a("")},requiredMark:!1,children:[e.jsx(k.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(oe,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(k.Item,{name:"startDate",label:"start Date",rules:[{required:!0,type:"date",message:"Please select date"}],children:e.jsx(Xe,{showTime:{format:"HH:mm"},disabledDate:r=>{const s=Ce().format("YYYY-MM-DD");return r&&r<Ce(s,"YYYY-MM-DD")},style:{width:"100%"},popupStyle:{zIndex:9999}})}),e.jsxs(H,{children:[e.jsx(W,{span:12,children:e.jsx(k.Item,{name:"duration",label:"Duration",style:{width:"100%"},rules:[{required:!0,type:"integer",message:"Enter Duration"}],children:e.jsx(ke,{min:1,defaultValue:1,style:{width:"100%"},size:"large"})})}),e.jsx(W,{span:12,children:e.jsx(k.Item,{name:"durationType",label:"Duration Type",style:{width:"100%"},rules:[{required:!0,type:"string",message:"Please select duration type"}],children:e.jsx(ae,{defaultValue:it[0].value,size:"large",style:{width:"100%"},dropdownStyle:{zIndex:9999},children:it.map(r=>e.jsx($r,{children:r.label},r.value))})})})]}),e.jsx(k.Item,{name:"isPublic",label:"Availability",rules:[{required:!1,type:"boolean"}],children:e.jsx(He,{defaultChecked:!0,disabled:!0,checked:!0,value:!0,children:"Public Available"})}),e.jsx("h3",{children:"Description"}),e.jsx(Ge.CKEditor,{editor:Je,data:t,onReady:r=>{r.editing.view.change(s=>{s.setStyle("min-height","100px",r.editing.view.document.getRoot())})},onChange:(r,s)=>{const i=s.getData();a(i)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(L,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Jr=n=>{const[t,a]=o.useState(!1),[r,s]=o.useState([]),[i,l]=o.useState(),[u,m]=o.useState(),[x,y]=o.useState(!0),[p,j]=o.useState(1),[b,w]=o.useState(0),[M,q]=o.useState(!0),[z]=k.useForm(),[N,c]=o.useState(!1),{push:P}=Me(),[D]=k.useForm(),[S,f]=o.useState(!1),[h,v]=o.useState(!1),O=C=>{l(C),v(!0)},Y=async C=>{const{data:_}=await E.custom({url:"",method:"post",meta:{operation:"connectClass",variables:{id:{value:C,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error connecting to class"),{data:null})).then(B=>B);_&&(_.success?(f(!1),m(null),d(_.message),s(r.filter(B=>B.id!==C))):d.error(_.message))},K=async C=>{const{data:_}=await E.custom({url:"",method:"post",meta:{operation:"createVirtualClass",variables:{name:{value:C.name,type:"String",required:!0},description:{value:C.description,type:"String",required:!0},duration:{value:C.duration,type:"Int",required:!0},durationType:{value:C.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:C.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:Ye}]}}).catch(()=>(d.error("Error creating class"),{data:null})).then(B=>B);_&&(_.success?(d.success(_.message),c(!1),s([_.virtual,...r])):d.error(_.message))},we=async C=>{const{data:_}=await E.custom({url:"",method:"post",meta:{operation:"editVirtualClass",variables:{id:{value:C.id,type:"Int",required:!0},name:{value:C.name,type:"String",required:!0},description:{value:C.description,type:"String",required:!0},duration:{value:C.duration,type:"Int",required:!0},durationType:{value:C.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:C.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:Ye}]}}).catch(()=>(d.error("Error editing class"),{data:null})).then(B=>B);_&&(_.success?(d.success(_.message),s(r.map(B=>B.id===_.virtual.id?_.virtual:B)),v(!1)):d.error(_.message))},ve=()=>{D.resetFields(),c(!0)},U=async C=>{const{data:_}=await E.custom({url:"",method:"post",meta:{operation:"deleteVirtualClass",variables:{id:{value:C,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error deleting class"),{data:null})).then(B=>B);_&&(_.success?(d.success(_.message),s(r.filter(B=>B.id!==C))):d.error(_.message))},J=C=>{fe.confirm({title:"Deleting Virtual Class",icon:e.jsx(Pe,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>U(C)})},ee=async(C,_="",B=!1)=>{const{data:he}=await E.custom({url:"",method:"get",meta:{operation:"publicVirtualClasses",variables:{page:{value:C,type:"Int",required:!0},key:{value:_,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Ye}]}}).catch(()=>(d.error("Error fetching classes"),{data:null})).then(Ve=>Ve);he&&(w(he.total),j(he.page),q(he.hasNext),s(he.results)),y(!1)},ze=async()=>{const{data:C}=await E.custom({url:"",method:"get",meta:{operation:"darasaAuth",variables:{},fields:["auth"]}}).catch(()=>(d.error("Error getting darasa auth"),{data:null})).then(_=>_);C&&a(C.auth.create_virtual_classes)};return o.useEffect(()=>{ze(),ee(p)},[]),x?e.jsx(e.Fragment,{children:e.jsx(Be,{loading:x,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(H,{children:[e.jsx(W,{span:12,children:e.jsx(k,{layout:"vertical",form:z,onFinish:C=>{j(0),ee(0,C.key,!0)},children:e.jsx(k.Item,{name:"key",children:e.jsx(oe,{size:"large",placeholder:"Search Public Virtual Classes...",prefix:e.jsx(Te,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(L,{icon:e.jsx(ht,{}),size:"large",onClick:()=>ve(),disabled:!t,children:"Create Virtual Class"})})]}),e.jsx(aa,{dataLength:b,next:()=>ee(p),hasMore:M,loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(ne,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:r.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(We,{loading:!1,itemLayout:"horizontal",loadMore:!1,dataSource:r,renderItem:C=>e.jsx(xe,{children:e.jsx(We.Item,{actions:[e.jsx(lt,{trigger:["click"],overlay:e.jsxs(be,{children:[e.jsx(be.Item,{icon:e.jsx(Rt,{}),disabled:!C.canJoin,onClick:()=>P("/oclass/virtual/class/session/"+C.id+"/"+C.token),children:e.jsx("a",{children:"Join"})}),C.canDelete?e.jsx(be.Item,{disabled:!C.canDelete,icon:e.jsx(mt,{}),onClick:()=>J(C.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}):e.jsx(e.Fragment,{}),e.jsx(be.Item,{icon:e.jsx(Ut,{}),disabled:!C.canEdit,onClick:()=>O(C),children:e.jsx("a",{children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:_=>_.preventDefault(),children:e.jsx(ct,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(Be,{avatar:!0,title:!1,loading:!1,active:!0,children:e.jsx(We.Item.Meta,{avatar:e.jsx(gt,{}),title:e.jsx("a",{onClick:()=>C.canJoin?P("/oclass/virtual/class/session/"+C.id+"/"+C.token):d("You can't join this class"),children:C.name}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:C.description}),e.jsxs("p",{children:[e.jsxs(ce,{color:"green",children:["Start At:"," ",e.jsx("span",{style:{marginLeft:10},children:st(new Date(C.startDate),"MMMM do, yyyy H:mma")})]}),e.jsxs(ce,{color:"green",children:["End In:",e.jsx("span",{style:{marginLeft:10},children:st(new Date(C.endDate),"MMMM do, yyyy H:mma")})]}),C.canJoin?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx(ce,{color:"red",children:"Not Joinable"})})]})]})})})})})})}),e.jsx(re,{title:"Creating Public Virtual Class",width:"40vw",open:N,onClose:C=>c(C),children:e.jsx(Gr,{form:D,onFinish:K})}),e.jsx(re,{title:"Connecting "+(u==null?void 0:u.name),open:S,width:"40vw",onClose:C=>f(C),children:e.jsxs(e.Fragment,{children:[e.jsx(vt,{id:u==null?void 0:u.id}),e.jsx(L,{onClick:()=>Y(u==null?void 0:u.id),style:{position:"absolute",bottom:0,right:0,marginBottom:10},children:"Connect"})]})}),e.jsx(re,{title:"Editting "+(i==null?void 0:i.name),width:"40vw",open:h,onClose:C=>v(C),children:e.jsx(ra,{form:D,darasa:i,onFinish:we})})]})},Qr=()=>(o.useEffect(()=>{document.title=G.system_name+": Online Public Virtual Classes"},[]),e.jsxs(R,{children:[e.jsxs(I,{children:[e.jsx(I.Item,{children:e.jsx(ue,{to:"/oclass",children:"Home"})}),e.jsx(I.Item,{children:"Online Public Virtual Classes"})]}),e.jsx(R,{sx:{mt:2},children:e.jsx(Jr,{mode:"connected"})})]})),wt="meet.jit.si";var Xr=globalThis&&globalThis.__awaiter||function(n,t,a,r){function s(i){return i instanceof a?i:new a(function(l){l(i)})}return new(a||(a=Promise))(function(i,l){function u(y){try{x(r.next(y))}catch(p){l(p)}}function m(y){try{x(r.throw(y))}catch(p){l(p)}}function x(y){y.done?i(y.value):s(y.value).then(u,m)}x((r=r.apply(n,t||[])).next())})};const Kr=(n,t,a)=>Xr(void 0,void 0,void 0,function*(){return new Promise((r,s)=>{if(window.JitsiMeetExternalAPI)return r(window.JitsiMeetExternalAPI);const i=document.createElement("script"),l=t?`?release=${t}`:"",u=a?`${a}/`:"";i.async=!0,i.src=`https://${n}/${u}external_api.js${l}`,i.onload=()=>r(window.JitsiMeetExternalAPI),i.onerror=()=>s(new Error(`Script load error: ${i.src}`)),document.head.appendChild(i)})});let _e;const Zr=(n=wt,t,a)=>_e||(_e=Kr(n,t,a),_e),en=n=>{const t=n.split("/");if(!(t.length<=1))return t[0]};let tn=0;const ot=n=>`${n}-${tn++}`,an=({domain:n=wt,roomName:t,configOverwrite:a,interfaceConfigOverwrite:r,jwt:s,invitees:i,devices:l,userInfo:u,release:m,lang:x,spinner:y,onApiReady:p,onReadyToClose:j,getIFrameRef:b})=>{const[w,M]=o.useState(!0),[q,z]=o.useState(!1),N=o.useRef(),c=o.useRef(),P=o.useRef(null),D=o.useMemo(()=>ot("jitsiMeeting"),[ot]);o.useEffect(()=>{Zr(n,m,en(t)).then(h=>{N.current=h,z(!0)}).catch(h=>console.error(h.message))},[]);const S=o.useCallback(h=>{c.current=new h(n,{roomName:t,configOverwrite:a,interfaceConfigOverwrite:r,jwt:s,invitees:i,devices:l,userInfo:u,release:m,lang:x,parentNode:P.current}),M(!1),c.current&&(typeof p=="function"&&p(c.current),c.current.on("readyToClose",()=>{typeof j=="function"&&j()}),P.current&&typeof b=="function"&&b(P.current))},[c,P,p,j,b,n,t,a,r,s,i,l,u,m,x]);o.useEffect(()=>{q&&!c.current&&N.current&&S(N.current)},[q,S]);const f=o.useCallback(()=>!y||!w||c.current?null:e.jsx(y,{},void 0),[y,c.current]);return e.jsxs(e.Fragment,{children:[f(),e.jsx("div",{id:D,ref:P},D)]},void 0)};globalThis&&globalThis.__rest;const rn={app_name:"Oclass",api_url:"https://olbongo.co.tz",conference_url:"video.olbongo.co.tz"},nn=n=>{const[t,a]=o.useState(),[r,s]=o.useState(!1),[i,l]=o.useState(!0),[u,m]=o.useState(!0),{push:x}=Bt(),{data:y}=Ht(),p=$e(),j=async()=>{const{data:w}=await E.custom({url:"",method:"get",meta:{operation:"virtual",variables:{id:{value:parseInt(p.id),type:"Int",required:!0}},fields:["id","name","description","startDate","duration","durationType","token",{darasa:["id","name","code","description"]},{author:["id","firstName","middleName","lastName","fullName","pic","email"]},"created","canEdit","canDelete","canManage","updated","isActive"]}}).catch(M=>(d.error("Error fetching virtual class"),{data:null})).then(M=>M);w&&a(w),l(!1)},b=e.jsxs(I,{children:[e.jsx(I.Item,{children:e.jsx("a",{onClick:()=>x("/oclass"),children:"Home"})}),e.jsx(I.Item,{children:e.jsx("a",{onClick:()=>x("/oclass/public/virtual/classes"),children:"Virtual Sessions/Classes"})}),e.jsx(I.Item,{children:t==null?void 0:t.name})]});return o.useEffect(()=>{j()},[]),i?e.jsxs(e.Fragment,{children:[b,e.jsx(H,{align:"middle",children:e.jsx(W,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(ne,{size:"large"})})})]}):r?e.jsxs(e.Fragment,{children:[b,e.jsx("div",{children:e.jsxs(H,{align:"middle",children:[e.jsx(W,{span:8}),e.jsx(W,{span:8,children:e.jsx(xe,{title:t==null?void 0:t.name,bordered:!1,actions:[e.jsx(L,{onClick:()=>window.location.reload(),children:"Re-join"})],children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(t==null?void 0:t.description)??""}})})})]})})]}):e.jsxs(e.Fragment,{children:[b,u&&e.jsxs(H,{align:"middle",children:[e.jsx(W,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(ge,{direction:"vertical",children:e.jsx(ne,{size:"large"})})}),e.jsx(W,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(ge,{direction:"vertical",children:"Preparing Virtual Conference Connection"})})]}),t&&e.jsx(an,{domain:rn.conference_url,roomName:t.id.toString()+t.token,configOverwrite:{speakerStats:{disabled:!0,disableSearch:!1,order:["role","name","hasLeft"]},breakoutRooms:{hideAddRoomButton:!0,hideAutoAssignButton:!0,hideJoinRoomButton:!0},disableInviteFunctions:!0,hideConferenceSubject:!0,disablePolls:!0,autoKnockLobby:!0,enableLobbyChat:!0,disableModeratorIndicator:!1,disableReactionsModeration:!1,openSharedDocumentOnJoin:!1,startWithAudioMuted:!0,startScreenSharing:!1,enableEmailInStats:!1,enableWelcomePage:!1,readOnlyName:!0,notifications:[],screenshotCapture:{enabled:!0,mode:"recording"},prejoinConfig:{enabled:!0,hideDisplayName:!0,hideExtraJoinButtons:["no-audio","by-phone"]},p2p:{enabled:!0},e2ee:{labels:{labelTooltip:"Tooltip",description:"Description",label:"E2EE",warning:"Warning"},externallyManagedKey:!1}},interfaceConfigOverwrite:{DISABLE_JOIN_LEAVE_NOTIFICATIONS:!1},userInfo:{displayName:y==null?void 0:y.fullName,email:y==null?void 0:y.email},onApiReady:w=>{m(!1),w.addListener("videoConferenceJoined",()=>{}),w.addListener("videoConferenceLeft",()=>{}),w.addListener("participantJoined",M=>{}),w.addListener("participantLeft",M=>{}),w.addListener("onMessageReceived",M=>{}),w.addListener("onMessageSent",M=>{}),w.addListener("onChatMessage",M=>{}),w.addListener("onChatMessageReceived",M=>{}),w.addListener("onChatMessageSent",M=>{})},onReadyToClose:()=>{s(!0)},getIFrameRef:w=>{w.style.height="88vh"}})]})},sn=()=>(o.useEffect(()=>{document.title=G.system_name+": Virtual Class Session"},[]),e.jsxs(R,{children:[e.jsxs(I,{children:[e.jsx(I.Item,{children:e.jsx(ue,{to:"/oclass",children:"Home"})}),e.jsx(I.Item,{children:"Online Virtual Classes"})]}),e.jsx(R,{sx:{mt:2},children:e.jsx(nn,{mode:"connected"})})]})),on=n=>{const{page:t}=n;return t==="VirtualClassSessionPage"?e.jsx(sn,{}):t==="PublicVirtualClassesPage"?e.jsx(Qr,{}):t==="OclassOrdersPage"?e.jsx(Oa,{}):t==="MyClassesPage"?e.jsx(Ma,{}):t==="OclassMarketplacePage"?e.jsx(Ta,{}):t==="ConnectedClassesPage"?e.jsx(Da,{}):t==="ClassSessionPage"?e.jsx(Sa,{}):t==="ClassesPage"?e.jsx(da,{}):t==="ClassesConnectPage"?e.jsx(ca,{}):t==="DarasaArchivesPage"?e.jsx(sa,{}):e.jsx("div",{children:"Page not found ..."})},qn=Object.freeze(Object.defineProperty({__proto__:null,DarasaPages:on},Symbol.toStringTag,{value:"Module"}));export{st as f,qn as p};
