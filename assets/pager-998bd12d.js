var zn=Object.defineProperty;var Hn=(r,t,n)=>t in r?zn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var hr=(r,t,n)=>(Hn(r,typeof t!="symbol"?t+"":t,n),n);import{r as o,q as P,j as e,S as ke,R as J,C as $,I as ee,v as ce,w as le,x as Te,y as Se,D as ge,M as W,z as Yn,Y as G,A as Ce,E as or,Q as g,H as ye,J as Re,K as Je,N as me,O as he,P as Y,U as bt,b5 as Ne,b6 as _e,ap as _t,b4 as We,b8 as Oe,b9 as Qe,ba as se,bb as fr,t as de,$ as Ft,bc as St,a0 as Hr,a1 as Pe,a2 as Ve,a3 as Wn,W as te,Z as Bn,bd as nt,a7 as Z,aY as $n,be as Gn,aa as at,bf as Bt,bg as Yr,aj as ne,V as Ee,ah as Wr,bh as Kn,bi as Xn,bj as Jn,bk as Qn,al as ot,bl as Rt,bm as Lt,bn as it,a8 as qt,ai as yt,ab as Ct,ac as Zn,an as Br,au as ea,ae as Vt,b2 as lr,b3 as ta,bo as ra,bp as na,bq as aa,br as $t,bs as ia,bt as sa,bu as $r,bv as Gr,bw as oa,bx as Kr,by as la,bz as ca,bA as pr,bB as cr,bC as Xr,bD as Jr,bE as Qr,bF as da,bG as ua,bH as ma,G as Zr,bI as gr,aT as en,bJ as ha,am as fa,aP as pa,aW as ga,aQ as ya,bK as tn,bL as xa,b0 as ue,aS as va,b1 as ja}from"./index-1fe25657.js";import{I as Ut}from"./index.es-16953eae.js";import{t as er}from"./text_truncate-315d9efa.js";import{l as ba,G as Sa}from"./iconBase-0f3848d2.js";import{C as rn}from"./Collapse-af2b6015.js";import{a as Ca,T as nn}from"./Table-dcc1f9df.js";import{B as Ye}from"./Breadcrumb-4fadb65c.js";import{B as wa}from"./book_payment_form-a81a00e5.js";import"./index-4800a368.js";import"./index-c40f71dd.js";import"./index-e435ee25.js";const Da=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1),[f,u]=o.useState(0),[C,T]=o.useState(!0),[_]=P.useForm(),M=async w=>{const{data:F}=await Y.custom({url:"",method:"post",meta:{operation:"removeDarasaArchive",variables:{id:{value:w,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error removing from archive"),{data:null})).then(k=>k);F&&(F.success?(g.success(F.message),n(t.filter(k=>k.id!==w))):g.error(F.message)),me.destroyAll()},R=w=>{me.confirm({title:"Confirm",icon:e.jsx(he,{}),content:"Removing Class From Archive ....",okText:"Restore",cancelText:"Cancel",onOk:()=>M(w)})},x=async(w,F="",k=!1)=>{const{data:q}=await Y.custom({url:"",method:"get",meta:{operation:"madarasaArchives",variables:{page:{value:w,type:"Int",required:!0},key:{value:F,type:"String",required:!1}},fields:["total","page","pages","hasNext",{results:["id",{darasa:["id","name","code","created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(()=>(g.error("Error fetching archives"),{data:null})).then(U=>U);q&&(u(q.total),c(q.page+1),T(q.hasNext),n(q.results)),i(!1)};return o.useEffect(()=>{x(s)},[]),a?e.jsx(e.Fragment,{children:e.jsx(ke,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx($,{span:20,children:e.jsx(P,{layout:"vertical",form:_,onFinish:w=>{c(0),x(0,w.key,!0)},children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Classes Archives...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(Ut,{dataLength:f,next:()=>x(s),hasMore:C,loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(le,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:t.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:t.length>0?e.jsx(J,{align:"top",children:t.map(w=>e.jsx($,{span:4,children:e.jsxs(Te,{hoverable:w.isActive,style:{marginRight:10},children:[e.jsx(Se,{style:{right:0,position:"absolute"},children:e.jsx(ge,{trigger:["click"],overlay:e.jsx(W,{children:e.jsx(W.Item,{icon:e.jsx(Yn,{}),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>R(w.id),children:"Restore"})},"class-archive-"+w.id)}),overlayStyle:{zIndex:9999},children:e.jsx(G,{type:"link",size:"large",className:"ant-dropdown-link",onClick:F=>F.preventDefault(),style:{zIndex:1},children:e.jsx(Ce,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx(or.Ribbon,{text:w.darasa.code,placement:"start",color:"orange",children:e.jsx("a",{onClick:()=>{g("Drive To Connect")},children:e.jsxs(Se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(ye,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(Re,{}),src:w.darasa.icon}),e.jsx("span",{style:{fontSize:20},children:w.darasa.name})]})})})]})}))}):e.jsx(Je,{severity:"info",sx:{fontSize:18},children:"No Class Found in Archives"})})]})},Ta=()=>e.jsx(Da,{}),ka=()=>e.jsx(Ta,{}),{Title:Tt,Text:kt}=bt,an=r=>{const[t,n]=o.useState(),[a,i]=o.useState(!0),s=async c=>{const{data:f}=await Y.custom({url:"",method:"get",meta:{operation:"darasa",variables:{id:{value:c,type:"Int",required:!0}},fields:["id","name","description","code","created","updated","isActive","canEdit","canDelete","isAuthor","totalStudents","canManage",{user:["id","firstName","lastName","email","middleName","fullName","pic"]}]}}).catch(u=>(g.error("Error fetching darasa"),{data:null}));f&&n(f),i(!1)};return o.useEffect(()=>{s(r.id)},[r.id]),e.jsxs(le,{spinning:a,children:[e.jsx(Tt,{level:5,children:"Class Name"}),e.jsx(kt,{children:t==null?void 0:t.name}),e.jsx(Tt,{level:5,children:"Class Code"}),e.jsx(kt,{children:t==null?void 0:t.code}),e.jsx(Tt,{level:5,children:"Class Description"}),e.jsx(kt,{children:t==null?void 0:t.description}),e.jsx(Tt,{level:5,children:"Class Author"}),e.jsx(kt,{children:t==null?void 0:t.user.profile.fullName})]})},Pa=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(P,{layout:"vertical",form:r.form,onFinish:s=>{s.payable=t,s.description=a,r.onFinish(s)},requiredMark:!0,autoComplete:"off",children:[e.jsx(P.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Name is required"}],children:e.jsx(ee,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(Ne.CKEditor,{editor:_e,data:a,onReady:s=>{s.editing.view.change(c=>{c.setStyle("min-height","150px",s.editing.view.document.getRoot())})},onChange:(s,c)=>{const f=c.getData();i(f)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(P.Item,{name:"payable",children:e.jsx(_t,{onChange:s=>n(s.target.checked),children:"Payable"})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(P.Item,{name:"price",label:"Cost",initialValue:0,rules:[{required:t,type:"number",validator:(s,c)=>c<=0?Promise.reject("Price cannot be less than 0"):Promise.resolve()}],children:e.jsx(We,{size:"large",style:{width:"100%"},precision:2})}),e.jsxs(J,{children:[e.jsx($,{span:8,children:e.jsx(P.Item,{name:"duration",label:"Duration",initialValue:1,wrapperCol:{span:24},rules:[{required:t,type:"number",message:"Please enter duration"}],children:e.jsx(We,{size:"large",style:{width:"100%"}})})}),e.jsx($,{span:12,children:e.jsx(P.Item,{label:"Duration Type",name:"duration_type",wrapperCol:{span:12},initialValue:"months",rules:[{required:t,type:"string",message:"Please select duration type"}],children:e.jsxs(Oe,{size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx(Oe.Option,{value:"days",children:"Days"}),e.jsx(Oe.Option,{value:"months",children:"Months"}),e.jsx(Oe.Option,{value:"years",children:"Years"})]})})})]}),e.jsx(P.Item,{label:"Start Date",name:"start_date",rules:[{required:!0,type:"object",message:"Please select Start Date"}],children:e.jsx(Qe,{size:"large",style:{width:"50%"},disabledDate:s=>s.add(1,"day")<se().endOf("day"),popupStyle:{zIndex:9999}})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Ia=r=>{const[t,n]=o.useState(r.darasa.payable),[a,i]=o.useState(r.darasa.description);return o.useEffect(()=>{r.form.setFieldsValue({name:r.darasa.name,description:r.darasa.description,payable:r.darasa.payable,price:r.darasa.price,duration:r.darasa.duration,duration_type:r.darasa.durationType,start_date:fr(r.darasa.startDate),end_date:fr(r.darasa.endDate)})},[r.darasa,r.form]),e.jsx(e.Fragment,{children:e.jsxs(P,{layout:"vertical",form:r.form,onFinish:s=>{s.id=parseInt(r.darasa.id),s.payable=t,s.description=a,r.onFinish(s)},requiredMark:!1,children:[e.jsx(P.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Name is required"}],children:e.jsx(ee,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(Ne.CKEditor,{editor:_e,data:a,onReady:s=>{s.editing.view.change(c=>{c.setStyle("min-height","150px",s.editing.view.document.getRoot())})},onChange:(s,c)=>{const f=c.getData();i(f)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(P.Item,{name:"payable",children:e.jsx(_t,{defaultChecked:t,onChange:s=>n(s.target.checked),children:"Payable"})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(P.Item,{name:"price",label:"Cost",initialValue:0,rules:[{required:t,type:"number",validator:(s,c)=>c<=0?Promise.reject("Price cannot be less than 0"):Promise.resolve()}],children:e.jsx(We,{size:"large",style:{width:"100%"},precision:2})}),e.jsxs(J,{children:[e.jsx($,{span:8,children:e.jsx(P.Item,{name:"duration",label:"Duration",initialValue:1,wrapperCol:{span:24},rules:[{required:t,type:"number",message:"Please enter duration"}],children:e.jsx(We,{size:"large",style:{width:"100%"}})})}),e.jsx($,{span:12,children:e.jsx(P.Item,{label:"Duration Type",name:"duration_type",wrapperCol:{span:12},initialValue:"months",rules:[{required:t,type:"string",message:"Please select duration type"}],children:e.jsxs(Oe,{size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx(Oe.Option,{value:"days",children:"Days"}),e.jsx(Oe.Option,{value:"months",children:"Months"}),e.jsx(Oe.Option,{value:"years",children:"Years"})]})})})]}),e.jsx(P.Item,{label:"Start Date",name:"start_date",rules:[{required:!0,type:"object",message:"Please select Start Date"}],children:e.jsx(Qe,{size:"large",style:{width:"50%"},disabledDate:s=>s.add(1,"day")<se().endOf("day"),popupStyle:{zIndex:9999}})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},zt=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState([]),[s,c]=o.useState(),[f,u]=o.useState(),[C,T]=o.useState(!0),[_,M]=o.useState(1),[R,x]=o.useState(0),[w,F]=o.useState(!0),[k]=P.useForm(),[q,U]=o.useState(!1),[z,I]=o.useState(!1),{push:j}=de(),[l]=P.useForm(),[y,p]=o.useState(!1),d=h=>{c(h),I(!0)},E=h=>{u(h),p(!0)},B=async h=>{const{data:N}=await Y.custom({url:"",method:"post",meta:{operation:"connectClass",variables:{id:{value:h,type:"Int",required:!0}},fields:["success","message"]}}).catch(X=>(g.error("Error connecting darasa"),{data:null})).then(X=>X);N&&(N.success?(p(!1),u(null),g(N.message),i(a.filter(X=>X.id!==h))):g.error(N.message))},K=async h=>{const{data:N}=await Y.custom({url:"",method:"post",meta:{operation:"addDarasaArchive",variables:{id:{value:h,type:"Int",required:!0}},fields:["success","message"]}}).catch(X=>(g.error("Error adding darasa to archive"),{data:null})).then(X=>X);N&&(N.success?(g.success(N.message),i(a.filter(X=>X.id!==h))):g.error(N.message)),me.destroyAll()},A=h=>{me.confirm({title:"Confirm",icon:e.jsx(he,{}),content:"Adding Class To Archive ....",okText:"Add",cancelText:"Cancel",onOk:()=>K(h)})},V=async h=>{const{data:N}=await Y.custom({url:"",method:"post",meta:{operation:"createDarasa",variables:{name:{value:h.name,type:"String",required:!0},description:{value:h.description,type:"String",required:!0},payable:{value:h.payable,type:"Boolean",required:!1},price:{value:h.price,type:"Float",required:!1},duration:{value:h.duration,type:"Int",required:!1},durationType:{value:h.duration_type,type:"String",required:!1},startDate:{value:h.start_date,type:"String",required:!1}},fields:["success","message",{darasa:["id","name","code","description","created","canEdit","canDelete","updated","isActive","isAuthor","isConnected"]}]}}).catch(()=>(g.error("Error creating darasa"),{data:null})).then(X=>X);N&&(N.success?(g.success(N.message),U(!1),i([N.darasa,...a])):g.error(N.message))},L=async h=>{const{data:N}=await Y.custom({url:"",method:"post",meta:{operation:"updateDarasa",variables:{id:{value:h.id,type:"Int",required:!0},name:{value:h.name,type:"String",required:!0},description:{value:h.description,type:"String",required:!0},payable:{value:h.payable,type:"Boolean",required:!1},price:{value:h.price,type:"Float",required:!1},duration:{value:h.duration,type:"Int",required:!1},durationType:{value:h.duration_type,type:"String",required:!1},startDate:{value:h.start_date,type:"String",required:!1}},fields:["success","message",{darasa:["id","name","code","description","payable","price","duration","durationType","startDate","endDate","created","canEdit","canDelete","canManage","updated","isActive","isAuthor","isConnected"]}]}}).catch(()=>(g.error("Error updating darasa"),{data:null})).then(X=>X);N&&(N.success?(g.success(N.message),I(!1),i(a.map(X=>X.id===h.id?N.darasa:X))):g.error(N.message))},H=()=>{l.resetFields(),U(!0)},b=async h=>{const{data:N}=await Y.custom({url:"",method:"post",meta:{operation:"disconnectClass",variables:{classId:{value:h,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error disconnecting darasa"),{data:null})).then(X=>X);N&&(N.success?(g.success(N.message),i(a.filter(X=>X.id!==h))):g.error(N.message))},S=h=>{me.confirm({title:"Disconnecting Class",icon:e.jsx(he,{}),content:"Are you sure ...",okText:"Disconnect",cancelText:"Cancel",onOk:()=>b(h)})},O=async h=>{const{data:N}=await Y.custom({url:"",method:"post",meta:{operation:"deleteDarasa",variables:{id:{value:h,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error deleting darasa"),{data:null})).then(X=>X);N&&(N.success?(g.success(N.message),i(a.filter(X=>X.id!==h))):g.error(N.message))},D=h=>{me.confirm({title:"Deleting Class",icon:e.jsx(he,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>O(h)})},m=async(h,N="",X=!1)=>{const{data:ae}=await Y.custom({url:"",method:"get",meta:{operation:"myMadarasa",variables:{page:{value:h,type:"Int",required:!0},key:{value:N,type:"String",required:!1},where:{value:{mode:r.mode},type:"JSON",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","payable","price","duration","durationType","startDate","endDate","created","canEdit","canDelete","canManage","updated","isActive","isAuthor","isConnected"]}]}}).catch(()=>(g.error("Error getting darasas"),{data:null})).then(Fe=>Fe);ae&&(x(ae.total),M(ae.page),F(ae.hasNext),i(ae.results)),T(!1)},v=async()=>{const{data:h}=await Y.custom({url:"",method:"get",meta:{operation:"darasaAuth",variables:{},fields:["auth"]}}).catch(()=>(g.error("Error getting darasa auth"),{data:null})).then(N=>N);h&&n(h.auth.create_classes)};return o.useEffect(()=>{v(),m(_)},[]),C?e.jsx(e.Fragment,{children:e.jsx(ke,{loading:C,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx($,{span:10,children:e.jsx(P,{layout:"vertical",form:k,onFinish:h=>{M(0),m(0,h.key,!0)},children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Classes...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),r.mode!=="connect"&&e.jsx($,{span:14,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{size:"large",icon:e.jsx(Ft,{}),onClick:()=>H(),disabled:!t,children:"Create Class"})})]}),a.length>0?e.jsx(J,{align:"top",children:a.map(h=>e.jsx($,{span:6,children:e.jsxs(Te,{hoverable:h.isActive,style:{marginRight:10,marginBottom:5},children:[e.jsx(Se,{style:{right:0,position:"absolute"},children:e.jsx(ge,{trigger:["click"],overlay:e.jsxs(W,{children:[h.isConnected?e.jsxs(e.Fragment,{children:[e.jsx(W.Item,{icon:e.jsx(Re,{}),disabled:!h.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>{h.isActive&&h.isConnected?j("/oclass/class/session/"+h.id+"/"+h.code):h.isActive&&!h.isConnected?E(h):g("Class is Blocked")},children:"Open"})}),e.jsx(W.Item,{icon:e.jsx(St,{}),onClick:()=>d(h),disabled:!(h!=null&&h.canManage),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(W.Item,{icon:e.jsx(Hr,{}),onClick:()=>g("under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Share"})}),e.jsx(W.Item,{icon:e.jsx(Pe,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),h.isAuthor?e.jsx(e.Fragment,{}):e.jsx(W.Item,{icon:e.jsx(Pe,{}),onClick:()=>S(h.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Disconnect"})}),e.jsx(W.Item,{icon:e.jsx(Ve,{}),onClick:()=>D(h.id),disabled:!(h!=null&&h.canDelete),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}),e.jsx(W.Item,{icon:e.jsx(Wn,{}),onClick:()=>A(h.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Archive"})},"drive-archive-"+h.id)]}):e.jsx(e.Fragment,{}),h.isConnected?e.jsx(e.Fragment,{}):e.jsx(W.Item,{icon:e.jsx(Re,{}),disabled:!h.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>j("/oclass/class/session/"+h.id+"/"+h.code),children:"Connect"})})]}),overlayStyle:{zIndex:9999},children:e.jsx(G,{type:"link",size:"large",className:"ant-dropdown-link",style:{zIndex:1},onClick:N=>N.preventDefault(),children:e.jsx(Ce,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx(or.Ribbon,{text:h.code,placement:"start",color:"orange",children:e.jsx("a",{onClick:()=>j("/oclass/class/session/"+h.id+"/"+h.code),children:e.jsxs(Se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(ye,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(Re,{}),src:h.icon}),e.jsx("span",{style:{fontSize:20},children:h.name})]})})})]})}))}):e.jsx(Je,{severity:"info",sx:{fontSize:18},children:"No Classes Found"}),w&&e.jsx("div",{style:{position:"absolute",bottom:0,width:"100%",textAlign:"center"},children:e.jsx(G,{type:"primary",onClick:()=>{m(_+1)},children:"Load More"})}),e.jsx(te,{title:"Creating Class",open:q,destroyOnClose:!0,width:"40vw",onClose:h=>U(h),children:e.jsx(Pa,{form:l,onFinish:V})}),e.jsx(te,{title:"Editting Class",width:"40vw",open:z,onClose:h=>I(h),children:e.jsx(Ia,{darasa:s,form:l,onFinish:L})}),e.jsx(te,{title:"Connecting "+(f==null?void 0:f.name),open:y,onClose:h=>p(h),children:e.jsxs(e.Fragment,{children:[e.jsx(an,{id:f==null?void 0:f.id}),e.jsx(G,{onClick:()=>B(f==null?void 0:f.id),style:{position:"absolute",bottom:0,right:0,margin:10},children:"Connect"})]})})]})},Aa=()=>e.jsx(zt,{mode:"connect"}),Ma=()=>e.jsx(Aa,{}),Oa=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx(zt,{mode:"all"})}),Ea=()=>e.jsx(Oa,{}),Na=r=>{const[t,n]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(P,{layout:"vertical",form:r.form,onFinish:a=>{a.content=t,r.onFinish(a)},requiredMark:!1,children:[e.jsx(P.Item,{name:"title",label:"Title",rules:[{required:!0,type:"string",message:"Please enter title"}],children:e.jsx(ee,{size:"large",placeholder:"Write Content ..."})}),e.jsx("h3",{children:"Announcement Description"}),e.jsx(Ne.CKEditor,{editor:_e,data:t,onReady:a=>{a.editing.view.change(i=>{i.setStyle("min-height","300px",a.editing.view.document.getRoot())})},onChange:(a,i)=>{const s=i.getData();n(s)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},_a=r=>{const[t,n]=o.useState("");return o.useEffect(()=>{var a,i,s;(s=r.form)==null||s.setFieldsValue({title:(a=r.announcement)==null?void 0:a.title,content:(i=r.announcement)==null?void 0:i.content})},[r.form]),e.jsx(e.Fragment,{children:e.jsxs(P,{layout:"vertical",form:r.form,onFinish:a=>{a.content=t,r.onFinish(a)},requiredMark:!1,children:[e.jsx(P.Item,{name:"title",label:"Title",rules:[{required:!0,type:"string",message:"Please enter title"}],children:e.jsx(ee,{size:"large",placeholder:"Write Content ..."})}),e.jsx("h3",{children:"Announcement Description"}),e.jsx(Bn,{onChange:a=>n(a)}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Fa=r=>{const[t,n]=o.useState(),[a,i]=o.useState([]),[s,c]=o.useState(!0),[f,u]=o.useState(1);o.useState(25);const[C]=P.useForm(),[T,_]=o.useState(0),[M,R]=o.useState(0),[x,w]=o.useState(!0);de();const[F,k]=o.useState(!1),[q,U]=o.useState(!1),[z]=P.useForm(),[I]=P.useForm(),[j,l]=o.useState(!1),y=L=>{n(L),l(!0)},p=L=>{n(L),U(!0)},d=()=>{k(!0)},E=async L=>{const{data:H}=await Y.custom({url:"",method:"post",meta:{operation:"createDarasaAnnouncement",variables:{id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},title:{value:L.title,type:"String",required:!0},content:{value:L.content,type:"String",required:!0}},fields:["success","message",{announcement:["id","title","content",{user:["id"]},{darasa:["id"]},"created","updated","isActive","canDelete","canEdit"]}]}}).catch(b=>(g.error("Error creating announcement"),{data:null})).then(b=>b);H&&(H.success?(g(H.message),i([H.announcement,...a]),z.resetFields(),k(!1)):g.error(H.message))},B=async L=>{const{data:H}=await Y.custom({url:"",method:"post",meta:{operation:"updateDarasaAnnouncement",variables:{id:{value:t===void 0?"0":t.id,type:"Int",required:!0},title:{value:L.title,type:"String",required:!0},content:{value:L.content,type:"String",required:!0}},fields:["success","message",{announcement:["id","title","content",{user:["id"]},{darasa:["id"]},"created","updated","isActive","canDelete","canEdit"]}]}});H.success?(g(H.message),i(a.map(b=>b.id===H.announcement.id?H.announcement:b)),I.resetFields(),U(!1)):g.error(H.message)},K=async(L,H="",b=!1)=>{const{data:S}=await Y.custom({url:"",method:"get",meta:{operation:"darasaAnnouncements",variables:{page:{value:L,type:"Int",required:!0},key:{value:H,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","content","created","updated","isActive","canDelete","canEdit",{user:["id","firstName","middleName","lastName","fullName","pic"]},{darasa:["id"]}]}]}});R(S.total),_(S.pages),u(S.page),w(S.hasNext),(H.length>0||H.length===0&&b)&&i(S.results),S.results.length>0&&!b&&i(a.concat(S.results)),c(!1)},A=async L=>{const{data:H}=await Y.custom({url:"",method:"post",meta:{operation:"deleteDarasaAnnouncement",variables:{id:{value:L,type:"Int",required:!0}},fields:["success","message"]}});H.success?(g.success(H.message),i(a.filter(b=>b.id!==L))):g.error(H.message)},V=L=>{me.confirm({title:"Deleting Announcent",icon:e.jsx(he,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>A(L)})};return o.useEffect(()=>{K(f)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx($,{span:20,children:e.jsx(P,{layout:"vertical",form:C,onFinish:L=>K(0,L.key,!0),children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Resources Links...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx($,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{size:"large",icon:e.jsx(nt,{}),onClick:d,disabled:!r.canManage,children:"Add Announcement"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(le,{spinning:s,children:[e.jsx(Z,{itemLayout:"horizontal",dataSource:a,renderItem:L=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Z.Item,{style:{margin:0,padding:0},actions:[e.jsx(ge,{trigger:["click"],overlay:e.jsxs(W,{children:[e.jsx(W.Item,{icon:e.jsx($n,{}),onClick:()=>y(L),children:e.jsx("a",{children:"Read"})}),e.jsx(W.Item,{icon:e.jsx(Ve,{}),disabled:!L.canDelete,onClick:()=>V(L.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}),e.jsx(W.Item,{icon:e.jsx(St,{}),disabled:!L.canEdit,onClick:()=>p(L),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(W.Item,{icon:e.jsx(Pe,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:H=>H.preventDefault(),children:e.jsx(Ce,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(Z.Item.Meta,{style:{borderBottom:"1px solid #f0f0f0"},avatar:e.jsx(Gn,{}),title:e.jsx("a",{target:"_blank",rel:"noreferrer",children:L.title}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:er(L.content.replace(/<[^>]+>/g,""),225)}),e.jsx("p",{children:e.jsx(at,{date:new Date(L.created),locale:"en-US"})})]})})},"class-resource-link-"+L.id)},"class-resource-link-item-container-"+L.id)}),x&&e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:10},children:e.jsx(G,{type:"primary",onClick:()=>{K(f+1)},children:"Load More"})})]})}),e.jsx(te,{title:"Adding Announcement",open:F,onClose:L=>k(L),width:"50vw",children:e.jsx(Na,{form:z,onFinish:E})}),e.jsx(te,{title:"Editting Announcement",open:q,onClose:L=>U(L),width:"50vw",children:e.jsx(_a,{announcement:t,form:I,onFinish:B})}),e.jsx(te,{title:e.jsx("h3",{children:t==null?void 0:t.title}),open:j,onClose:L=>l(L),width:"75vw",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(t==null?void 0:t.content)??""},style:{marginTop:10}})})]})},Ra=r=>{const[t,n]=o.useState(!0),[a,i]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(P,{layout:"vertical",form:r.form,onFinish:s=>{s.online=t,s.description=a,r.onFinish(s)},requiredMark:!1,children:[e.jsx(P.Item,{name:"title",label:"Title",rules:[{required:!0,type:"string",message:"Please input Title"}],children:e.jsx(ee,{size:"large",placeholder:"Enter Title ..."})}),e.jsx(P.Item,{name:"online",children:e.jsx(_t,{checked:t,onChange:()=>n(!t),children:"Online Submit Assignment Work"})}),e.jsx(P.Item,{name:"deadline",label:"Deadline",rules:[{required:!0,type:"date",message:"Please select Deadline"}],children:e.jsx(Qe,{size:"large",showTime:{format:"HH:mm"},disabledDate:s=>{const c=se().format("YYYY-MM-DD");return s&&s<se(c,"YYYY-MM-DD")},style:{width:"100%"},popupStyle:{zIndex:9999}})}),e.jsx("h3",{children:"Description"}),e.jsx(Ne.CKEditor,{editor:_e,data:a,onReady:s=>{s.editing.view.change(c=>{c.setStyle("min-height","150px",s.editing.view.document.getRoot())})},onChange:(s,c)=>{const f=c.getData();i(f)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{height:45}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},La=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(),[s,c]=o.useState(!0),[f,u]=o.useState(1);o.useState(25);const[C]=P.useForm(),[T,_]=o.useState(0),[M,R]=o.useState(0),[x,w]=o.useState(!0);de();const[F,k]=o.useState(!1),[q,U]=o.useState(!1),[z,I]=o.useState(!1),[j,l]=o.useState(!1),[y,p]=o.useState(!1),[d]=P.useForm(),[E]=P.useForm(),B=v=>{i(v),p(!0)},K=v=>{n(t.map(h=>h.id===v.id?v:h))},A=v=>{i(v),l(!0)},V=v=>{i(v),U(!0)},L=v=>{i(v),I(!0)},H=()=>{k(!0)},b=async v=>{const{data:h}=await Y.custom({url:"",method:"post",meta:{operation:"createDarasaAssignment",variables:{id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},title:{value:v.title,type:"String",required:!0},description:{value:v.description,type:"String",required:!0},deadline:{value:v.deadline,type:"DateTime",required:!0},online:{value:v.online,type:"Boolean",required:!0}},fields:["success","message",{assignment:["id","title","description","deadline","onlineSubmission","submitted","canSubmit",{user:["id"]},{darasa:["id"]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}}).catch(N=>(g.error("Failed to create assignment"),{data:null})).then(N=>N);h&&(h.success?(g(h.message),n([h.assignment,...t]),d.resetFields(),k(!1)):g.error(h.message))},S=async v=>{const{data:h}=await Y.custom({url:"",method:"post",meta:{operation:"updateDarasaAssignment",variables:{id:{value:a===void 0?0:a.id,type:"Int",required:!0},title:{value:v.title,type:"String",required:!0},description:{value:v.description,type:"String",required:!0},deadline:{value:v.deadline,type:"DateTime",required:!0},online:{value:v.online,type:"Boolean",required:!0}},fields:["success","message",{assignment:["id","title","description","deadline","onlineSubmission","submitted","canSubmit",{user:["id"]},{darasa:["id"]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}}).catch(N=>(g.error("Failed to update assignment"),{data:null})).then(N=>N);h&&(h.success?(g(h.message),n(t.map(N=>N.id===h.assignment.id?h.assignment:N)),E.resetFields(),I(!1)):g.error(h.message))},O=async(v,h="",N=!1)=>{const{data:X}=await Y.custom({url:"",method:"get",meta:{operation:"darasaAssignments",variables:{page:{value:v,type:"Int",required:!0},key:{value:h,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","description","totalAttachments","deadline","onlineSubmission","submitted","canSubmit","created","updated","isActive","canDelete","canEdit","canManage","canUploadAttachment","attachmentZippedFolderPath",{user:["id","firstName","middleName","lastName","fullName","pic"]},{darasa:["id"]}]}]}}).catch(ae=>(g.error("Failed to fetch assignments"),{data:null})).then(ae=>ae);X&&(R(X.total),_(X.pages),u(X.page),w(X.hasNext),(h.length>0||h.length===0&&N)&&n(X.results),X.results.length>0&&!N&&n(t.concat(X.results))),c(!1)},D=async v=>{const{data:h}=await Y.custom({url:"",method:"post",meta:{operation:"deleteDarasaAssignment",variables:{id:{value:v,type:"Int",required:!0}},fields:["success","message"]}}).catch(N=>(g.error("Failed to delete assignment"),{data:null})).then(N=>N);h&&(h.success?(g.success(h.message),n(t.filter(N=>N.id!==v))):g.error(h.message))},m=v=>{me.confirm({title:"Deleting Assignment",icon:e.jsx(he,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>D(v)})};return o.useEffect(()=>{O(f)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx($,{span:20,children:e.jsx(P,{layout:"vertical",form:C,onFinish:v=>O(0,v.key,!0),children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Assignments...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx($,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{icon:e.jsx(nt,{}),onClick:H,disabled:!r.canManage,size:"large",children:"Add Assignment"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(le,{spinning:s,children:[e.jsx(Z,{itemLayout:"horizontal",dataSource:t,renderItem:v=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Z.Item,{style:{margin:0,padding:0},actions:[e.jsx(ge,{trigger:["click"],overlay:e.jsxs(W,{children:[e.jsx(W.Item,{icon:e.jsx(Bt,{}),children:e.jsx("a",{target:"_blank",onClick:()=>g("on construction"),children:"View"})}),e.jsx(W.Item,{icon:e.jsx(Bt,{}),children:e.jsx("a",{target:"_blank",onClick:()=>A(v),children:"Submissions"})}),e.jsx(W.Item,{icon:e.jsx(Bt,{}),children:e.jsx("a",{target:"_blank",onClick:()=>V(v),children:"Attachements"})}),e.jsx(W.Item,{icon:e.jsx(St,{}),disabled:!v.canDelete,onClick:()=>L(v),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(W.Item,{icon:e.jsx(Ve,{}),disabled:!v.canEdit,onClick:()=>m(v.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}),e.jsx(W.Item,{icon:e.jsx(Pe,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:h=>h.preventDefault(),children:e.jsx(Ce,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(Z.Item.Meta,{style:{borderBottom:"1px solid #e8e8e8",paddingBottom:10},avatar:e.jsx(Yr,{}),title:e.jsxs("a",{target:"_blank",rel:"noreferrer",children:[v.title,v.onlineSubmission&&e.jsx("span",{style:{marginLeft:20},children:e.jsx(ne,{color:"red",children:"Online Submission"})})]}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:v.description}}),e.jsxs("p",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{children:[e.jsxs(ne,{color:"cyan",children:[e.jsx("span",{style:{marginRight:5},children:"Created:"}),e.jsx(at,{date:new Date(v.created),locale:"en-US"})]}),e.jsxs(ne,{color:"green",children:[e.jsx("span",{style:{marginRight:5},children:"Deadline:"}),e.jsx(at,{date:new Date(v.deadline),locale:"en-US"})]}),e.jsx(Ee,{title:"Click to View Attachments",children:e.jsx("a",{onClick:()=>V(v),children:e.jsxs(ne,{color:"orange",children:[e.jsx("span",{style:{marginRight:5},children:"Attachments:"}),v.totalAttachments]})})})]}),e.jsxs("span",{children:[v.canSubmit&&!v.canManage&&e.jsx(Ee,{title:v.submitted?"Click to Re-submitt Your Assignment Work":"Click to Submitt Your Assignment Work",color:v.submitted?"green":"red",children:e.jsx("a",{onClick:()=>B(v),children:e.jsx(ne,{color:v.submitted?"green":"red",icon:e.jsx(Wr,{}),children:e.jsxs("span",{style:{marginRight:5},children:[v.submitted?"Re-submitt":"Submitt"," ","Assignment Work:"]})})})}),v.canManage&&e.jsx(Ee,{title:"Click to View Students Submissions",color:"green",children:e.jsx("a",{onClick:()=>A(v),children:e.jsx(ne,{color:"green",children:e.jsx("span",{style:{marginRight:5},children:"Submissions"})})})})]})]})]})})},"class-assignment-link-"+v.id)},"class-resource-link-item-container-"+v.id)}),x&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{type:"primary",onClick:()=>{O(f+1)},children:"Load More"})})]})}),e.jsx(te,{title:"Creating Assignment",open:F,onClose:v=>k(v),width:"50vw",children:e.jsx(Ra,{form:d,onFinish:b})}),e.jsx(te,{title:"Edit Assignment",open:z,onClose:v=>I(v),width:"50vw",children:e.jsx(Kn,{assignment:a,form:E,onFinish:S})}),e.jsx(te,{title:"Assignment Attachements",open:q,onClose:v=>U(v),width:"50vw",children:e.jsx(Xn,{assignment:a,canManage:r.canManage})}),e.jsx(te,{title:"Assignment Submissions",open:j,onClose:v=>l(v),width:"50vw",children:e.jsx(Jn,{assignment:a,canManage:r.canManage})}),e.jsx(te,{title:"Assignment Work Submission",open:y,onClose:v=>p(v),width:"50vw",children:e.jsx(Qn,{assignment:a,canManage:r.canManage,submitted:a==null?void 0:a.submitted,onFinish:K})})]})},qa=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1),[f,u]=o.useState(0),[C,T]=o.useState(!0),[_]=P.useForm();de();const M=async(x,w="",F=!1)=>{const{data:k}=await Y.custom({url:"",method:"get",meta:{operation:"darasaDrivesToConnect",variables:{page:{value:x,type:"Int",required:!0},key:{value:w,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","created","canEdit","canDelete","updated","isActive","isAuthor"]}]}}).catch(q=>(g.error("Error loading drives"),{data:null})).then(q=>q);k&&(u(k.total),c(k.page),T(k.hasNext),n(k.results)),i(!1)},R=async x=>{const{data:w}=await Y.custom({url:"",method:"post",meta:{operation:"addDarasaDrive",variables:{drive:{value:x,type:"Int",required:!0},darasa:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["success","message",{darasaDrive:["id",{darasa:["id"]},{drive:["id","name","code","created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(F=>(g.error("Error adding drive"),{data:null})).then(F=>F);w&&(w.success?(g.success(w.message),n(t.filter(F=>parseInt(F.id.toString())!==x)),r.handleAddingDrive(w.darasaDrive)):g.error(w.message))};return o.useEffect(()=>{M(s)},[r.random]),a?e.jsx(e.Fragment,{children:e.jsx(ke,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx($,{span:24,children:e.jsx(P,{layout:"vertical",form:_,onFinish:x=>{c(0),M(0,x.key,!0)},children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Drive(s)...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs("div",{id:"scrollableDrivesToAdd",style:{height:"65vh",overflow:"auto"},children:[e.jsx(Z,{bordered:!0,dataSource:t,renderItem:x=>e.jsxs(Z.Item,{actions:[e.jsx(ot,{title:"Are you sure to Add this Drive -"+x.name+" ?",onConfirm:()=>R(parseInt(x.id.toString())),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(G,{icon:e.jsx(Ft,{}),children:"Add"})})],children:[x.name,e.jsx(Rt,{}),e.jsx(bt.Text,{mark:!0,children:x.code})]})}),C&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{type:"primary",onClick:()=>{M(s+1)},children:"Load More"})})]})]})},Va=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1),[f,u]=o.useState(0),[C,T]=o.useState(0),[_,M]=o.useState(!0),[R]=P.useForm(),{push:x}=de(),[w,F]=o.useState(!1),k=()=>{F(!0)},q=async(j,l="",y=!1)=>{const{data:p}=await Y.custom({url:"",method:"get",meta:{operation:"darasaDrives",variables:{page:{value:j,type:"Int",required:!0},key:{value:l,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{darasa:["id"]},{drive:["id","name","code","created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(()=>(g.error("Error fetching drives"),{data:null})).then(d=>d);p&&(T(p.total),u(p.pages),c(p.page),M(p.hasNext),n(p.results)),i(!1)},U=async j=>{n([j,...t])},z=async j=>{const{data:l}=await Y.custom({url:"",method:"post",meta:{operation:"deleteDarasaDrive",variables:{id:{value:j,type:"Int",required:!0}},fields:["success","message"]}}).catch(y=>(g.error("Error removing drive"),{data:null})).then(y=>y);l&&(l.success?(g.success(l.message),n(t.filter(y=>y.id!==j))):g.error(l.message))},I=j=>{me.confirm({title:"Removing Drive",icon:e.jsx(he,{}),content:"Are you sure ...",okText:"Remove",cancelText:"Cancel",onOk:()=>z(j)})};return o.useEffect(()=>{q(s)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx($,{span:20,children:e.jsx(P,{layout:"vertical",form:R,onFinish:j=>{c(0),q(0,j.key,!0)},children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Drive(s)...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx($,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{icon:e.jsx(Lt,{}),onClick:k,disabled:!r.canManage,children:"Add Drive"})})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[t.length>0?e.jsx(J,{align:"top",children:t.map(j=>e.jsx($,{span:4,children:e.jsxs(Te,{hoverable:j.drive.isActive,style:{marginRight:10},children:[e.jsx(Se,{style:{right:0,position:"absolute"},children:e.jsx(ge,{trigger:["click"],overlay:e.jsxs(W,{children:[e.jsx(W.Item,{icon:e.jsx(Re,{}),disabled:!j.drive.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>{j.drive.isActive?x("/odrive/drive/"+j.drive.id+"/"+j.drive.code+"/files"):g("Drive is Blocked")},children:"View"})}),e.jsx(W.Item,{icon:e.jsx(Pe,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(W.Item,{icon:e.jsx(it,{}),onClick:()=>I(j.id),disabled:!r.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:l=>l.preventDefault(),children:e.jsx(Ce,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx(or.Ribbon,{text:j.drive.code,placement:"start",color:"orange",children:e.jsx("a",{onClick:()=>{j.drive.isActive?x("/odrive/drive/"+j.drive.id+"/"+j.drive.code+"/files"):g("Drive is Blocked")},children:e.jsxs(Se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(ye,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(Re,{}),src:j.drive.icon}),e.jsx(Ee,{title:j.drive.name,children:e.jsx("span",{style:{fontSize:20},children:j.drive.name.length>15?j.drive.name.substring(0,15)+"...":j.drive.name})})]})})})]})}))}):e.jsxs(Je,{severity:"info",children:["No drives found. Click on the ",e.jsx("b",{children:"Add Drive"})," button to add a drive"]}),_&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{type:"primary",onClick:()=>{q(s+1)},children:a?e.jsx(le,{}):e.jsxs("span",{children:["Load More",e.jsxs("span",{style:{marginLeft:8},children:[s,"/",f]})]})})})]}),e.jsx(te,{title:"Adding Drives",open:w,onClose:j=>F(j),width:"50vw",children:e.jsx(qa,{id:r.id,random:Math.random(),handleAddingDrive:U})})]})},Ua=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1);o.useState(25);const[f]=P.useForm(),[u,C]=o.useState(0),[T,_]=o.useState(0),[M,R]=o.useState(!0),{push:x}=de();o.useState(!1);const[w,F]=o.useState(!1),[k,q]=o.useState(),U=l=>{q(l),F(!0)},z=async(l,y="",p=!1)=>{if(M){const{data:d}=await Y.custom({url:"",method:"get",meta:{operation:"darasaFiles",variables:{page:{value:parseInt(l.toString()),type:"Int",required:!0},key:{value:y,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","file","icon","size","description","created","updated","isActive","isPublic","canEdit","canDelete","canManage","isAuthor","canRead","isVideo","isAudio","isImage","imageVisible",{tags:["id",{tag:["id","name"]}]},{drive:["id","name","code",{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]}]}}).catch(E=>(g.error("Error loading files"),{data:null})).then(E=>E);d&&(_(d.total),C(d.pages),c(d.page),R(d.hasNext),(y.length>0||y.length===0&&p)&&n(d.results),d.results.length>0&&!p&&n(t.concat(d.results))),i(!1)}},I=l=>{const y=t.map(p=>(p.id===l.id&&(p.imageVisible=!1),p));n(y)},j=l=>{const y=t.map(p=>(p.id===l.id&&(p.imageVisible=!0),p));n(y)};return o.useEffect(()=>{z(s)},[]),e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx($,{span:20,children:e.jsx(P,{layout:"vertical",form:f,onFinish:l=>z(0,l.key,!0),children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(le,{spinning:a,children:[e.jsx(Z,{itemLayout:"horizontal",dataSource:t,renderItem:l=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Z.Item,{style:{margin:0,padding:0},actions:[e.jsx(ge,{trigger:["click"],overlay:e.jsxs(W,{children:[e.jsx(W.Item,{icon:e.jsx(qt,{}),children:e.jsx("a",{target:"_blank",href:l.file,rel:"noopener noreferrer",download:!0,children:"Download"})}),e.jsx(W.Item,{icon:e.jsx(Hr,{}),onClick:()=>g("under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Share"})}),e.jsx(W.Item,{icon:e.jsx(Pe,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:y=>y.preventDefault(),children:e.jsx(Ce,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(Z.Item.Meta,{avatar:e.jsx(ye,{src:l.icon}),title:l.isImage?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{title:"Click to View Image",color:"red",placement:"top",children:e.jsx("a",{onClick:()=>j(l),children:l.title})}),e.jsx(G,{onClick:()=>U(l),style:{marginLeft:10},danger:!0,children:"Details Dialog"}),e.jsx(yt,{style:{display:"none"},wrapperStyle:{zIndex:9999},src:l.file,preview:{visible:l.imageVisible,src:l.file,onVisibleChange:y=>{I(l)},style:{zIndex:9999}}})]}):e.jsx("a",{onClick:()=>U(l),children:l.title}),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:l.description}),l.tags.length>0&&e.jsx(J,{style:{marginBottom:3},children:e.jsx($,{children:l.tags.map(y=>e.jsx(Ee,{title:"File Tag",placement:"top",children:e.jsx(ne,{color:"orange",children:y.tag.name},"tag-"+y.id)}))})}),l.drive&&e.jsx(e.Fragment,{children:e.jsx(J,{children:e.jsxs($,{children:[e.jsxs(ne,{color:"green",children:["Drive: ",l.drive.name]}),e.jsx(Ee,{title:"Open Drive:"+l.drive.name,children:e.jsx(G,{icon:e.jsx(Re,{}),onClick:()=>{x("/odrive/drive/"+l.drive.id+"/"+l.drive.code+"/files")}})})]})})}),e.jsxs("p",{children:[!l.isAuthor&&e.jsx(e.Fragment,{children:e.jsxs("span",{style:{color:"orange"},children:["Uploaded By:",e.jsx(ye,{size:"small",style:{marginLeft:5},src:l.author.pic}),l.author.fullName]})}),l.isAuthor&&e.jsx(e.Fragment,{children:e.jsx("span",{style:{color:"orange"},children:"Uploaded By:You"})}),e.jsxs("span",{style:{color:"orange",marginLeft:3},children:["|",e.jsx("span",{style:{marginLeft:2},children:l.size})]}),e.jsx(e.Fragment,{children:e.jsxs("span",{style:{marginLeft:3},children:["|",e.jsx(at,{date:new Date(l.created),locale:"en-US"})]})})]})]})})},"file-"+l.id)})}),M&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{type:"primary",onClick:()=>z(s+1),disabled:!M,children:"Load More"})})]})}),e.jsx(Ct,{title:"File Informations",anchor:"right",width:"35vw",onClose:l=>F(l),open:w,children:e.jsx(Zn,{id:k==null?void 0:k.id})})]})},za=r=>e.jsx(e.Fragment,{children:e.jsxs(P,{layout:"vertical",form:r.form,onFinish:t=>{r.onFinish(t)},requiredMark:!1,children:[e.jsx(P.Item,{name:"link",label:"Link",rules:[{required:!0,type:"url"}],children:e.jsx(ee,{size:"large",placeholder:"Enter Url Address ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})}),Ha=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1);o.useState(25);const[f]=P.useForm(),[u,C]=o.useState(0),[T,_]=o.useState(0),[M,R]=o.useState(!0);de();const[x,w]=o.useState(!1),[F]=P.useForm(),k=()=>{w(!0)},q=async j=>{const{data:l}=await Y.custom({url:"",method:"post",meta:{operation:"createDarasaResourceLink",variables:{id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},link:{value:j.link,type:"String",required:!0}},fields:["success","message",{resource:["id","link","created","updated","isActive","canDelete","canEdit","canAdd",{author:["id","firstName","middleName","lastName","fullName","pic"]},{darasa:["id"]}]}]}}).catch(y=>(g.error("Error creating resource link"),{data:null})).then(y=>y);l&&(l.success?(g(l.message),n([l.resource,...t]),F.resetFields(),w(!1)):g.error(l.message))},U=async(j,l="",y=!1)=>{const{data:p}=await Y.custom({url:"",method:"get",meta:{operation:"darasaResources",variables:{page:{value:j,type:"Int",required:!0},key:{value:l,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","link","created","updated","isActive","canDelete","canEdit","canAdd",{author:["id","firstName","middleName","lastName","fullName","pic"]},{darasa:["id"]}]}]}}).catch(d=>(g.error("Error fetching resources links"),{data:null})).then(d=>d);p&&(_(p.total),C(p.pages),c(p.page),R(p.hasNext),(l.length>0||l.length===0&&y)&&n(p.results),p.results.length>0&&!y&&n(t.concat(p.results))),i(!1)},z=async j=>{const{data:l}=await Y.custom({url:"",method:"post",meta:{operation:"deleteDarasaResourceLink",variables:{id:{value:parseInt(j.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(y=>(g.error("Error deleting resource link"),{data:null})).then(y=>y);l&&(l.success?(g.success(l.message),n(t.filter(y=>y.id!==j))):g.error(l.message))},I=j=>{me.confirm({title:"Deleting Resource Link",icon:e.jsx(he,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>z(j)})};return o.useEffect(()=>{U(s)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx($,{span:20,children:e.jsx(P,{layout:"vertical",form:f,onFinish:j=>U(0,j.key,!0),children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Resources Links...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx($,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{icon:e.jsx(nt,{}),onClick:k,disabled:!r.canManage,size:"large",children:"Add Resource"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(le,{spinning:a,children:[e.jsx(Z,{itemLayout:"horizontal",dataSource:t,renderItem:j=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Z.Item,{style:{margin:0,padding:0},actions:[e.jsx(ge,{trigger:["click"],overlay:e.jsxs(W,{children:[e.jsx(W.Item,{icon:e.jsx(qt,{}),children:e.jsx("a",{target:"_blank",href:j.link,rel:"noopener noreferrer",children:"Open"})}),e.jsx(W.Item,{icon:e.jsx(Ve,{}),disabled:!j.canDelete,onClick:()=>I(j.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}),e.jsx(W.Item,{icon:e.jsx(Pe,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:l=>l.preventDefault(),children:e.jsx(Ce,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(Z.Item.Meta,{style:{borderBottom:"1px solid #e8e8e8"},avatar:e.jsx(nt,{}),title:e.jsx("a",{href:j.link,target:"_blank",rel:"noreferrer",children:j.link}),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{}),e.jsx("p",{children:e.jsx(at,{date:new Date(j.created),locale:"en-US"})})]})})},"class-resource-link-"+j.id)},"class-resource-link-item-container-"+j.id)}),M&&e.jsx("div",{style:{textAlign:"center",marginTop:12},children:e.jsx("button",{onClick:()=>{U(s+1)},children:"Load More"})})]})}),e.jsx(te,{title:"Adding Resource Link",open:x,onClose:j=>w(j),width:"50vw",children:e.jsx(za,{form:F,onFinish:q})})]})},Ya=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1),[f,u]=o.useState(0),[C,T]=o.useState(!0),[_]=P.useForm();de();const M=async(x,w="",F=!1)=>{const{data:k}=await Y.custom({url:"",method:"get",meta:{operation:"darasaStudentsToAdd",variables:{page:{value:x,type:"Int",required:!0},key:{value:w,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","firstName","middleName","lastName","fullName","email","pic","isActive"]}]}}).catch(q=>(g.error("Error fetching students"),{data:null})).then(q=>q);k&&(u(k.total),c(k.page),T(k.hasNext),n(k.results)),i(!1)},R=async x=>{const{data:w}=await Y.custom({url:"",method:"post",meta:{operation:"createDarasaStudent",variables:{darasa:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},student:{value:parseInt(x===void 0?"0":x.toString()),type:"Int",required:!0}},fields:["success","message",{student:["id","canDelete","canEdit","canManage","blocked",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(F=>(g.error("Error adding student"),{data:null})).then(F=>F);w&&(w.success?(g.success(w.message),n(t.filter(F=>F.id!==x)),r.handleAddingStudent(w.student)):g.error(w.message))};return o.useEffect(()=>{M(s)},[r.random]),a?e.jsx(e.Fragment,{children:e.jsx(ke,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx($,{span:24,children:e.jsx(P,{layout:"vertical",form:_,onFinish:x=>{c(0),M(0,x.key,!0)},children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search User(s)/Student(s) to Add ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs("div",{id:"scrollableDrivesToAdd",style:{height:"65vh",overflow:"auto"},children:[e.jsx(Z,{dataSource:t,renderItem:x=>e.jsxs(Z.Item,{actions:[e.jsx(ot,{title:"Are you sure to Add  -"+x.fullName+" ?",onConfirm:()=>R(x.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(G,{icon:e.jsx(Ft,{}),children:"Add"})})],children:[e.jsx(ye,{src:x.pic,style:{marginRight:10}}),x.fullName,e.jsx(Rt,{}),e.jsx(bt.Text,{mark:!0,children:x.email})]})}),C&&e.jsx(G,{onClick:()=>{M(s+1)},type:"primary",style:{margin:"auto",display:"block"},children:"Load More"})]})]})},Wa=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1),[f,u]=o.useState(0),[C,T]=o.useState(!0),[_]=P.useForm();de();const M=async(x,w="",F=!1)=>{const{data:k}=await Y.custom({url:"",method:"get",meta:{operation:"blockedDarasaStudents",variables:{page:{value:x,type:"Int",required:!0},key:{value:w,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","canDelete","canEdit","canManage","blocked",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(q=>(g.error("Error fetching students"),{data:null})).then(q=>q);k&&(u(k.total),c(k.page),T(k.hasNext),n(k.results)),i(!1)},R=async(x,w)=>{const{data:F}=await Y.custom({url:"",method:"post",meta:{operation:"blockUnblockDarasaStudent",variables:{id:{value:parseInt(x.toString()),type:"Int",required:!0},blocked:{value:w,type:"Boolean",required:!0}},fields:["success","message",{darasaStudent:["id","canDelete","canEdit","canManage","blocked",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(()=>(g.error("Error Unblocking student"),{data:null})).then(k=>k);F&&(F.success?(g.success(F.message),n(t.filter(k=>k.id!==x)),r.handleUnblockingStudent(F.darasaStudent)):g.error(F.message))};return o.useEffect(()=>{M(s)},[r.random]),a?e.jsx(e.Fragment,{children:e.jsx(ke,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx($,{span:24,children:e.jsx(P,{layout:"vertical",form:_,onFinish:x=>{c(0),M(0,x.key,!0)},children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Blocked Students ...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs("div",{id:"scrollableDrivesToAdd",style:{height:"65vh",overflow:"auto"},children:[e.jsx(Z,{dataSource:t,renderItem:x=>{var w,F,k;return e.jsxs(Z.Item,{actions:[e.jsx(ot,{title:"Are you sure to Unblock  -"+x.user.fullName+" ?",onConfirm:()=>R(x.id,!1),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(G,{icon:e.jsx(Br,{}),children:"Unblock"})})],children:[e.jsx(ye,{src:(w=x==null?void 0:x.user)==null?void 0:w.pic,style:{marginRight:10}}),(F=x==null?void 0:x.user)==null?void 0:F.fullName,e.jsx(Rt,{}),e.jsx(bt.Text,{mark:!0,children:(k=x==null?void 0:x.user)==null?void 0:k.email})]})}}),C&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{onClick:()=>M(s+1),disabled:!C,children:"Load More"})})]})]})},Ba=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1),[f,u]=o.useState(0),[C,T]=o.useState(0),[_,M]=o.useState(!0),[R]=P.useForm();de();const[x,w]=o.useState(!1),[F,k]=o.useState(!1),q=()=>{w(!0)},U=async(d,E="",B=!1)=>{const{data:K}=await Y.custom({url:"",method:"get",meta:{operation:"darasaStudents",variables:{page:{value:d,type:"Int",required:!0},key:{value:E,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","canDelete","canEdit","canManage","blocked",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(()=>(g.error("Error fetching students"),{data:null})).then(A=>A);K&&(T(K.total),u(K.pages),c(K.page),M(K.hasNext),n(K.results)),i(!1)},z=async d=>{n([d,...t])},I=async d=>{const{data:E}=await Y.custom({url:"",method:"post",meta:{operation:"deleteDarasaStudent",variables:{id:{value:parseInt(d.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error removing student"),{data:null})).then(B=>B);E&&(E.success?(g.success(E.message),n(t.filter(B=>B.id!==d))):g.error(E.message))},j=async(d,E)=>{const{data:B}=await Y.custom({url:"",method:"post",meta:{operation:"blockUnblockDarasaStudent",variables:{id:{value:parseInt(d.toString()),type:"Int",required:!0},blocked:{value:E,type:"Boolean",required:!0}},fields:["success","message",{darasaStudent:["id","canDelete","canEdit","canManage","blocked",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(()=>(g.error("Error blocking/unblocking student"),{data:null})).then(K=>K);if(B)if(B.success){g.success(B.message);const K=t.map(A=>A.id===d?B.darasaStudent:A);n(K)}else g.error(B.message)},l=d=>{const E=t.map(B=>B.id===d.id?d:B);n(E)},y=d=>{me.confirm({title:"Removing Student",icon:e.jsx(he,{}),content:"Are you sure ...",okText:"Remove",cancelText:"Cancel",onOk:()=>I(d)})},p=(d,E)=>{me.confirm({title:E?"Blocking Student":"Unblocking Student",icon:e.jsx(he,{}),content:"Are you sure ...",okText:E?"Block":"Unblock",cancelText:"Cancel",onOk:()=>j(d,E)})};return o.useEffect(()=>{U(s)},[]),a?e.jsx(e.Fragment,{children:e.jsx(ke,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx($,{span:12,children:e.jsx(P,{layout:"vertical",form:R,onFinish:d=>{c(0),U(0,d.key,!0)},children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Student(s)...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs($,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(G,{size:"large",icon:e.jsx(Lt,{}),onClick:q,disabled:!r.canManage,children:"Add Student"}),e.jsx(G,{size:"large",icon:e.jsx(it,{}),onClick:()=>k(!0),disabled:!r.canManage,children:"Blocked Students"})]})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[t.length>0?e.jsx(J,{align:"top",children:t.map(d=>e.jsx($,{span:6,children:e.jsxs(Te,{hoverable:d.isActive,style:{marginRight:10,borderColor:d.blocked?"red":"#f0f0f0"},children:[e.jsx(Se,{style:{right:0,position:"absolute"},children:e.jsx(ge,{trigger:["click"],overlay:e.jsxs(W,{children:[e.jsx(W.Item,{icon:e.jsx(Re,{}),disabled:!d.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"View"})}),e.jsx(W.Item,{icon:e.jsx(Pe,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(W.Item,{icon:e.jsx(it,{}),onClick:()=>y(d.id),disabled:!d.canDelete,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})}),d.blocked?e.jsx(W.Item,{icon:e.jsx(Br,{}),onClick:()=>p(d.id,!1),disabled:!d.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Unblock"})}):e.jsx(W.Item,{icon:e.jsx(ea,{}),onClick:()=>p(d.id,!0),disabled:!d.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Block"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:E=>E.preventDefault(),children:e.jsx(Ce,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx("a",{children:e.jsxs(Se,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(ye,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(Re,{}),src:d.user.pic}),e.jsx("span",{style:{fontSize:20},children:d.user.fullName})]})})]})}))}):e.jsx(Je,{severity:"info",children:"No Student found for this class. Please add some students"}),_&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{onClick:()=>{U(s+1)},disabled:!_,children:a?e.jsx(le,{}):e.jsx(e.Fragment,{children:e.jsx("span",{children:"Load More"})})})})]}),e.jsx(te,{title:"Adding Students",open:x,onClose:d=>w(d),width:"50vw",children:e.jsx(Ya,{id:r.id,random:Math.random(),handleAddingStudent:z})}),e.jsx(te,{title:"Blocked Students",open:F,onClose:d=>k(d),width:"50vw",children:e.jsx(Wa,{id:r.id,random:Math.random(),handleUnblockingStudent:l})})]})},$a=r=>{const[t,n]=o.useState(!1),a=async i=>{var c;n(!0);const{data:s}=await Y.custom({url:"",method:"post",meta:{operation:"createClassYoutubeVideo",variables:{classId:{value:parseInt((c=r.id)==null?void 0:c.toString()),type:"Int",required:!0},url:{value:i.url,type:"String",required:!0}},fields:["success","message",{video:["id","title","description","url","video","isYoutube","created","updated","isActive","canDelete","canEdit",{darasa:["id"]},{author:["id","fullName","firstName","middleName","lastName"]}]}]}}).catch(f=>(g.error("Error Adding a Video"),{data:null})).then(f=>f);s&&(s.success?(g.success(s.message),r.handleAddingDrive(s.video)):g.error(s.message)),n(!1)};return e.jsx(e.Fragment,{children:e.jsx(le,{spinning:t,children:e.jsxs(P,{layout:"vertical",onFinish:i=>{a(i)},requiredMark:!1,children:[e.jsx(P.Item,{name:"url",label:"Youtube Video URL",rules:[{required:!0,type:"url",message:"Please input Youtube URL ..."}],children:e.jsx(ee,{size:"large",placeholder:"Enter Youtube URL ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",loading:t,children:"Save"})})]})})})},yr=[".mp4"],Ga=r=>Array.isArray(r)?r:r==null?void 0:r.fileList,Ka=r=>{const[t,n]=o.useState(!1),[a]=P.useForm(),[i,s]=o.useState(""),c=Vt(),f=async u=>{n(!0);const{data:C}=await Y.custom({url:"",method:"post",meta:{operation:"uploadClassVideo",variables:{classId:{value:parseInt(c.id),type:"Int",required:!0},video:{value:u.video,type:"Upload",required:!0},title:{value:u.title,type:"String",required:!0},description:{value:u.description,type:"String",required:!1}},fields:["success","message",{video:["id","title","description","url","video","isYoutube","created","updated","isActive","canDelete","canEdit",{darasa:["id"]},{author:["id","fullName","firstName","middleName","lastName"]}]}]}}).catch(T=>(g.error("Error uploading a Video File"),{data:null})).then(T=>T);C&&(C.success?(s(""),g.success(C.message),r.handleAddingVideo(C.video)):g.error(C.message)),n(!1)};return e.jsx(e.Fragment,{children:e.jsxs(P,{layout:"vertical",onFinish:u=>{u.description=i,f(u)},requiredMark:!1,form:a,children:[e.jsx(P.Item,{label:"Pick a Video Files ("+yr.join()+")",children:e.jsx(P.Item,{name:"video",valuePropName:"fileList",getValueFromEvent:Ga,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload students excel file"}],children:e.jsxs(lr.Dragger,{name:"file",accept:yr.join(),multiple:!1,beforeUpload:()=>!1,onChange:u=>{a.setFieldsValue({title:u.file.name})},onRemove:u=>{a.setFieldsValue({title:""})},children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(ta,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx(P.Item,{name:"title",label:"Video Title",rules:[{required:!0,type:"string",message:"Please input title"}],children:e.jsx(ee,{size:"large",placeholder:"Enter Title ..."})}),e.jsx("h3",{children:"Description"}),e.jsx(Ne.CKEditor,{editor:_e,data:i,onReady:u=>{u.editing.view.change(C=>{C.setStyle("min-height","100px",u.editing.view.document.getRoot())})},onChange:(u,C)=>{const T=C.getData();s(T)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})};class Xa extends o.Component{constructor(n){super(n);hr(this,"player");this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.load=this.load.bind(this),this.changeCurrentTime=this.changeCurrentTime.bind(this),this.seek=this.seek.bind(this),this.changePlaybackRateRate=this.changePlaybackRateRate.bind(this),this.changeVolume=this.changeVolume.bind(this),this.setMuted=this.setMuted.bind(this)}componentDidMount(){this.player.subscribeToStateChange(this.handleStateChange.bind(this)),this.props.updatePlayer(this.player,this.props.index)}setMuted(n){return()=>{this.player.muted=n}}handleStateChange(n){this.setState({player:n})}play(){g("playing"),this.player.play()}pause(){this.player.pause()}load(){this.player.load()}changeCurrentTime(n){return()=>{const{player:a}=this.player.getState();this.player.seek(a.currentTime+n)}}seek(n){return()=>{this.player.seek(n)}}changePlaybackRateRate(n){return()=>{const{player:a}=this.player.getState();this.player.playbackRate=a.playbackRate+n}}changeVolume(n){return()=>{const{player:a}=this.player.getState();this.player.volume=a.volume+n}}render(){return e.jsx("div",{children:e.jsx(ra.Player,{ref:n=>{this.player=n},aspectRatio:"1110:680",preload:"auto",autoPlay:!1,children:e.jsx("source",{src:this.props.file})})})}}var Ht={},Ja=function(t){return Qa(t)&&!Za(t)};function Qa(r){return!!r&&typeof r=="object"}function Za(r){var t=Object.prototype.toString.call(r);return t==="[object RegExp]"||t==="[object Date]"||ri(r)}var ei=typeof Symbol=="function"&&Symbol.for,ti=ei?Symbol.for("react.element"):60103;function ri(r){return r.$$typeof===ti}function ni(r){return Array.isArray(r)?[]:{}}function xt(r,t){return t.clone!==!1&&t.isMergeableObject(r)?st(ni(r),r,t):r}function ai(r,t,n){return r.concat(t).map(function(a){return xt(a,n)})}function ii(r,t){if(!t.customMerge)return st;var n=t.customMerge(r);return typeof n=="function"?n:st}function si(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(t){return Object.propertyIsEnumerable.call(r,t)}):[]}function xr(r){return Object.keys(r).concat(si(r))}function sn(r,t){try{return t in r}catch{return!1}}function oi(r,t){return sn(r,t)&&!(Object.hasOwnProperty.call(r,t)&&Object.propertyIsEnumerable.call(r,t))}function li(r,t,n){var a={};return n.isMergeableObject(r)&&xr(r).forEach(function(i){a[i]=xt(r[i],n)}),xr(t).forEach(function(i){oi(r,i)||(sn(r,i)&&n.isMergeableObject(t[i])?a[i]=ii(i,n)(r[i],t[i],n):a[i]=xt(t[i],n))}),a}function st(r,t,n){n=n||{},n.arrayMerge=n.arrayMerge||ai,n.isMergeableObject=n.isMergeableObject||Ja,n.cloneUnlessOtherwiseSpecified=xt;var a=Array.isArray(t),i=Array.isArray(r),s=a===i;return s?a?n.arrayMerge(r,t,n):li(r,t,n):xt(t,n)}st.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(a,i){return st(a,i,n)},{})};var ci=st,on=ci,vr=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function di(r,t){return!!(r===t||vr(r)&&vr(t))}function ui(r,t){if(r.length!==t.length)return!1;for(var n=0;n<r.length;n++)if(!di(r[n],t[n]))return!1;return!0}function mi(r,t){t===void 0&&(t=ui);var n,a=[],i,s=!1;function c(){for(var f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];return s&&n===this&&t(f,a)||(i=r.apply(this,f),s=!0,n=this,a=f),i}return c}const hi=Object.freeze(Object.defineProperty({__proto__:null,default:mi},Symbol.toStringTag,{value:"Module"})),fi=na(hi);var pi=typeof Element<"u",gi=typeof Map=="function",yi=typeof Set=="function",xi=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function It(r,t){if(r===t)return!0;if(r&&t&&typeof r=="object"&&typeof t=="object"){if(r.constructor!==t.constructor)return!1;var n,a,i;if(Array.isArray(r)){if(n=r.length,n!=t.length)return!1;for(a=n;a--!==0;)if(!It(r[a],t[a]))return!1;return!0}var s;if(gi&&r instanceof Map&&t instanceof Map){if(r.size!==t.size)return!1;for(s=r.entries();!(a=s.next()).done;)if(!t.has(a.value[0]))return!1;for(s=r.entries();!(a=s.next()).done;)if(!It(a.value[1],t.get(a.value[0])))return!1;return!0}if(yi&&r instanceof Set&&t instanceof Set){if(r.size!==t.size)return!1;for(s=r.entries();!(a=s.next()).done;)if(!t.has(a.value[0]))return!1;return!0}if(xi&&ArrayBuffer.isView(r)&&ArrayBuffer.isView(t)){if(n=r.length,n!=t.length)return!1;for(a=n;a--!==0;)if(r[a]!==t[a])return!1;return!0}if(r.constructor===RegExp)return r.source===t.source&&r.flags===t.flags;if(r.valueOf!==Object.prototype.valueOf&&typeof r.valueOf=="function"&&typeof t.valueOf=="function")return r.valueOf()===t.valueOf();if(r.toString!==Object.prototype.toString&&typeof r.toString=="function"&&typeof t.toString=="function")return r.toString()===t.toString();if(i=Object.keys(r),n=i.length,n!==Object.keys(t).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[a]))return!1;if(pi&&r instanceof Element)return!1;for(a=n;a--!==0;)if(!((i[a]==="_owner"||i[a]==="__v"||i[a]==="__o")&&r.$$typeof)&&!It(r[i[a]],t[i[a]]))return!1;return!0}return r!==r&&t!==t}var ln=function(t,n){try{return It(t,n)}catch(a){if((a.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw a}},Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.defaultProps=Ke.propTypes=void 0;var Ue=vi(aa);function vi(r){return r&&r.__esModule?r:{default:r}}var ve=Ue.default.string,je=Ue.default.bool,et=Ue.default.number,Gt=Ue.default.array,ut=Ue.default.oneOfType,Ae=Ue.default.shape,be=Ue.default.object,oe=Ue.default.func,jr=Ue.default.node,ji={url:ut([ve,Gt,be]),playing:je,loop:je,controls:je,volume:et,muted:je,playbackRate:et,width:ut([ve,et]),height:ut([ve,et]),style:be,progressInterval:et,playsinline:je,pip:je,stopOnUnmount:je,light:ut([je,ve,be]),playIcon:jr,previewTabIndex:et,fallback:jr,oEmbedUrl:ve,wrapper:ut([ve,oe,Ae({render:oe.isRequired})]),config:Ae({soundcloud:Ae({options:be}),youtube:Ae({playerVars:be,embedOptions:be,onUnstarted:oe}),facebook:Ae({appId:ve,version:ve,playerId:ve,attributes:be}),dailymotion:Ae({params:be}),vimeo:Ae({playerOptions:be,title:ve}),file:Ae({attributes:be,tracks:Gt,forceVideo:je,forceAudio:je,forceHLS:je,forceSafariHLS:je,forceDisableHls:je,forceDASH:je,forceFLV:je,hlsOptions:be,hlsVersion:ve,dashVersion:ve,flvVersion:ve}),wistia:Ae({options:be,playerId:ve,customControls:Gt}),mixcloud:Ae({options:be}),twitch:Ae({options:be,playerId:ve}),vidyard:Ae({options:be})}),onReady:oe,onStart:oe,onPlay:oe,onPause:oe,onBuffer:oe,onBufferEnd:oe,onEnded:oe,onError:oe,onDuration:oe,onSeek:oe,onPlaybackRateChange:oe,onPlaybackQualityChange:oe,onProgress:oe,onClickPreview:oe,onEnablePIP:oe,onDisablePIP:oe};Ke.propTypes=ji;var fe=function(){},bi={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:fe},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:fe,onStart:fe,onPlay:fe,onPause:fe,onBuffer:fe,onBufferEnd:fe,onEnded:fe,onError:fe,onDuration:fe,onSeek:fe,onPlaybackRateChange:fe,onPlaybackQualityChange:fe,onProgress:fe,onClickPreview:fe,onEnablePIP:fe,onDisablePIP:fe};Ke.defaultProps=bi;var xe={},Si=function(t,n,a){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");typeof n=="function"&&(a=n,n={}),n=n||{},a=a||function(){},s.type=n.type||"text/javascript",s.charset=n.charset||"utf8",s.async="async"in n?!!n.async:!0,s.src=t,n.attrs&&Ci(s,n.attrs),n.text&&(s.text=""+n.text);var c="onload"in s?br:wi;c(s,a),s.onload||br(s,a),i.appendChild(s)};function Ci(r,t){for(var n in t)r.setAttribute(n,t[n])}function br(r,t){r.onload=function(){this.onerror=this.onload=null,t(null,r)},r.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),r)}}function wi(r,t){r.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,t(null,r))}}Object.defineProperty(xe,"__esModule",{value:!0});xe.parseStartTime=Fi;xe.parseEndTime=Ri;xe.randomString=Li;xe.queryString=qi;xe.getSDK=Vi;xe.getConfig=Ui;xe.omit=zi;xe.callPlayer=Hi;xe.isMediaStream=Yi;xe.isBlobUrl=Wi;xe.supportsWebKitPresentationMode=Bi;var Di=cn(Si),Ti=cn(on);function cn(r){return r&&r.__esModule?r:{default:r}}function ki(r,t){return Mi(r)||Ai(r,t)||Ii(r,t)||Pi()}function Pi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ii(r,t){if(r){if(typeof r=="string")return Sr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sr(r,t)}}function Sr(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=r[n];return a}function Ai(r,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(r)))){var n=[],a=!0,i=!1,s=void 0;try{for(var c=r[Symbol.iterator](),f;!(a=(f=c.next()).done)&&(n.push(f.value),!(t&&n.length===t));a=!0);}catch(u){i=!0,s=u}finally{try{!a&&c.return!=null&&c.return()}finally{if(i)throw s}}return n}}function Mi(r){if(Array.isArray(r))return r}var Oi=/[?&#](?:start|t)=([0-9hms]+)/,Ei=/[?&#]end=([0-9hms]+)/,tr=/(\d+)(h|m|s)/g,Ni=/^\d+$/;function dn(r,t){if(!(r instanceof Array)){var n=r.match(t);if(n){var a=n[1];if(a.match(tr))return _i(a);if(Ni.test(a))return parseInt(a)}}}function _i(r){for(var t=0,n=tr.exec(r);n!==null;){var a=n,i=ki(a,3),s=i[1],c=i[2];c==="h"&&(t+=parseInt(s,10)*60*60),c==="m"&&(t+=parseInt(s,10)*60),c==="s"&&(t+=parseInt(s,10)),n=tr.exec(r)}return t}function Fi(r){return dn(r,Oi)}function Ri(r){return dn(r,Ei)}function Li(){return Math.random().toString(36).substr(2,5)}function qi(r){return Object.keys(r).map(function(t){return"".concat(t,"=").concat(r[t])}).join("&")}function Kt(r){return window[r]?window[r]:window.exports&&window.exports[r]?window.exports[r]:window.module&&window.module.exports&&window.module.exports[r]?window.module.exports[r]:null}var tt={};function Vi(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){return!0},i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:Di.default,s=Kt(t);return s&&a(s)?Promise.resolve(s):new Promise(function(c,f){if(tt[r]){tt[r].push({resolve:c,reject:f});return}tt[r]=[{resolve:c,reject:f}];var u=function(_){tt[r].forEach(function(M){return M.resolve(_)})};if(n){var C=window[n];window[n]=function(){C&&C(),u(Kt(t))}}i(r,function(T){T?(tt[r].forEach(function(_){return _.reject(T)}),tt[r]=null):n||u(Kt(t))})})}function Ui(r,t){return(0,Ti.default)(t.config,r.config)}function zi(r){for(var t,n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];for(var s=(t=[]).concat.apply(t,a),c={},f=Object.keys(r),u=0,C=f;u<C.length;u++){var T=C[u];s.indexOf(T)===-1&&(c[T]=r[T])}return c}function Hi(r){var t;if(!this.player||!this.player[r]){var n="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(r,"%c  ");return this.player?this.player[r]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return(t=this.player)[r].apply(t,i)}function Yi(r){return typeof window<"u"&&typeof window.MediaStream<"u"&&r instanceof window.MediaStream}function Wi(r){return/^blob:/.test(r)}function Bi(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.createElement("video"),t=/iPhone|iPod/.test(navigator.userAgent)===!1;return r.webkitSupportsPresentationMode&&typeof r.webkitSetPresentationMode=="function"&&t}var un={};(function(r){function t(l){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(p){return typeof p}:t=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},t(l)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(o),a=c(ln),i=Ke,s=xe;function c(l){return l&&l.__esModule?l:{default:l}}function f(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return f=function(){return l},l}function u(l){if(l&&l.__esModule)return l;if(l===null||t(l)!=="object"&&typeof l!="function")return{default:l};var y=f();if(y&&y.has(l))return y.get(l);var p={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in l)if(Object.prototype.hasOwnProperty.call(l,E)){var B=d?Object.getOwnPropertyDescriptor(l,E):null;B&&(B.get||B.set)?Object.defineProperty(p,E,B):p[E]=l[E]}return p.default=l,y&&y.set(l,p),p}function C(){return C=Object.assign||function(l){for(var y=1;y<arguments.length;y++){var p=arguments[y];for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(l[d]=p[d])}return l},C.apply(this,arguments)}function T(l,y){if(!(l instanceof y))throw new TypeError("Cannot call a class as a function")}function _(l,y){for(var p=0;p<y.length;p++){var d=y[p];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}function M(l,y,p){return y&&_(l.prototype,y),p&&_(l,p),l}function R(l,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(y&&y.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),y&&x(l,y)}function x(l,y){return x=Object.setPrototypeOf||function(d,E){return d.__proto__=E,d},x(l,y)}function w(l){var y=q();return function(){var d=U(l),E;if(y){var B=U(this).constructor;E=Reflect.construct(d,arguments,B)}else E=d.apply(this,arguments);return F(this,E)}}function F(l,y){return y&&(t(y)==="object"||typeof y=="function")?y:k(l)}function k(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function q(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function U(l){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)},U(l)}function z(l,y,p){return y in l?Object.defineProperty(l,y,{value:p,enumerable:!0,configurable:!0,writable:!0}):l[y]=p,l}var I=5e3,j=function(l){R(p,l);var y=w(p);function p(){var d;T(this,p);for(var E=arguments.length,B=new Array(E),K=0;K<E;K++)B[K]=arguments[K];return d=y.call.apply(y,[this].concat(B)),z(k(d),"mounted",!1),z(k(d),"isReady",!1),z(k(d),"isPlaying",!1),z(k(d),"isLoading",!0),z(k(d),"loadOnReady",null),z(k(d),"startOnPlay",!0),z(k(d),"seekOnPlay",null),z(k(d),"onDurationCalled",!1),z(k(d),"handlePlayerMount",function(A){if(d.player){d.progress();return}d.player=A,d.player.load(d.props.url),d.progress()}),z(k(d),"getInternalPlayer",function(A){return d.player?d.player[A]:null}),z(k(d),"progress",function(){if(d.props.url&&d.player&&d.isReady){var A=d.getCurrentTime()||0,V=d.getSecondsLoaded(),L=d.getDuration();if(L){var H={playedSeconds:A,played:A/L};V!==null&&(H.loadedSeconds=V,H.loaded=V/L),(H.playedSeconds!==d.prevPlayed||H.loadedSeconds!==d.prevLoaded)&&d.props.onProgress(H),d.prevPlayed=H.playedSeconds,d.prevLoaded=H.loadedSeconds}}d.progressTimeout=setTimeout(d.progress,d.props.progressFrequency||d.props.progressInterval)}),z(k(d),"handleReady",function(){if(d.mounted){d.isReady=!0,d.isLoading=!1;var A=d.props,V=A.onReady,L=A.playing,H=A.volume,b=A.muted;V(),!b&&H!==null&&d.player.setVolume(H),d.loadOnReady?(d.player.load(d.loadOnReady,!0),d.loadOnReady=null):L&&d.player.play(),d.handleDurationCheck()}}),z(k(d),"handlePlay",function(){d.isPlaying=!0,d.isLoading=!1;var A=d.props,V=A.onStart,L=A.onPlay,H=A.playbackRate;d.startOnPlay&&(d.player.setPlaybackRate&&H!==1&&d.player.setPlaybackRate(H),V(),d.startOnPlay=!1),L(),d.seekOnPlay&&(d.seekTo(d.seekOnPlay),d.seekOnPlay=null),d.handleDurationCheck()}),z(k(d),"handlePause",function(A){d.isPlaying=!1,d.isLoading||d.props.onPause(A)}),z(k(d),"handleEnded",function(){var A=d.props,V=A.activePlayer,L=A.loop,H=A.onEnded;V.loopOnEnded&&L&&d.seekTo(0),L||(d.isPlaying=!1,H())}),z(k(d),"handleError",function(){var A;d.isLoading=!1,(A=d.props).onError.apply(A,arguments)}),z(k(d),"handleDurationCheck",function(){clearTimeout(d.durationCheckTimeout);var A=d.getDuration();A?d.onDurationCalled||(d.props.onDuration(A),d.onDurationCalled=!0):d.durationCheckTimeout=setTimeout(d.handleDurationCheck,100)}),z(k(d),"handleLoaded",function(){d.isLoading=!1}),d}return M(p,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}},{key:"componentDidUpdate",value:function(E){var B=this;if(this.player){var K=this.props,A=K.url,V=K.playing,L=K.volume,H=K.muted,b=K.playbackRate,S=K.pip,O=K.loop,D=K.activePlayer,m=K.disableDeferredLoading;if(!(0,a.default)(E.url,A)){if(this.isLoading&&!D.forceLoad&&!m&&!(0,s.isMediaStream)(A)){console.warn("ReactPlayer: the attempt to load ".concat(A," is being deferred until the player has loaded")),this.loadOnReady=A;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(A,this.isReady)}!E.playing&&V&&!this.isPlaying&&this.player.play(),E.playing&&!V&&this.isPlaying&&this.player.pause(),!E.pip&&S&&this.player.enablePIP&&this.player.enablePIP(),E.pip&&!S&&this.player.disablePIP&&this.player.disablePIP(),E.volume!==L&&L!==null&&this.player.setVolume(L),E.muted!==H&&(H?this.player.mute():(this.player.unmute(),L!==null&&setTimeout(function(){return B.player.setVolume(L)}))),E.playbackRate!==b&&this.player.setPlaybackRate&&this.player.setPlaybackRate(b),E.loop!==O&&this.player.setLoop&&this.player.setLoop(O)}}},{key:"getDuration",value:function(){return this.isReady?this.player.getDuration():null}},{key:"getCurrentTime",value:function(){return this.isReady?this.player.getCurrentTime():null}},{key:"getSecondsLoaded",value:function(){return this.isReady?this.player.getSecondsLoaded():null}},{key:"seekTo",value:function(E,B,K){var A=this;if(!this.isReady){E!==0&&(this.seekOnPlay=E,setTimeout(function(){A.seekOnPlay=null},I));return}var V=B?B==="fraction":E>0&&E<1;if(V){var L=this.player.getDuration();if(!L){console.warn("ReactPlayer: could not seek using fraction duration not yet available");return}this.player.seekTo(L*E,K);return}this.player.seekTo(E,K)}},{key:"render",value:function(){var E=this.props.activePlayer;return E?n.default.createElement(E,C({},this.props,{onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError})):null}}]),p}(n.Component);r.default=j,z(j,"displayName","Player"),z(j,"propTypes",i.propTypes),z(j,"defaultProps",i.defaultProps)})(un);var Xt={},Cr;function $i(){return Cr||(Cr=1,function(r){function t(I){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(l){return typeof l}:t=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},t(I)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(o);function a(){if(typeof WeakMap!="function")return null;var I=new WeakMap;return a=function(){return I},I}function i(I){if(I&&I.__esModule)return I;if(I===null||t(I)!=="object"&&typeof I!="function")return{default:I};var j=a();if(j&&j.has(I))return j.get(I);var l={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in I)if(Object.prototype.hasOwnProperty.call(I,p)){var d=y?Object.getOwnPropertyDescriptor(I,p):null;d&&(d.get||d.set)?Object.defineProperty(l,p,d):l[p]=I[p]}return l.default=I,j&&j.set(I,l),l}function s(I,j){var l=Object.keys(I);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(I);j&&(y=y.filter(function(p){return Object.getOwnPropertyDescriptor(I,p).enumerable})),l.push.apply(l,y)}return l}function c(I){for(var j=1;j<arguments.length;j++){var l=arguments[j]!=null?arguments[j]:{};j%2?s(Object(l),!0).forEach(function(y){k(I,y,l[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(l)):s(Object(l)).forEach(function(y){Object.defineProperty(I,y,Object.getOwnPropertyDescriptor(l,y))})}return I}function f(I,j){if(!(I instanceof j))throw new TypeError("Cannot call a class as a function")}function u(I,j){for(var l=0;l<j.length;l++){var y=j[l];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(I,y.key,y)}}function C(I,j,l){return j&&u(I.prototype,j),l&&u(I,l),I}function T(I,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(j&&j.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),j&&_(I,j)}function _(I,j){return _=Object.setPrototypeOf||function(y,p){return y.__proto__=p,y},_(I,j)}function M(I){var j=w();return function(){var y=F(I),p;if(j){var d=F(this).constructor;p=Reflect.construct(y,arguments,d)}else p=y.apply(this,arguments);return R(this,p)}}function R(I,j){return j&&(t(j)==="object"||typeof j=="function")?j:x(I)}function x(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I}function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function F(I){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},F(I)}function k(I,j,l){return j in I?Object.defineProperty(I,j,{value:l,enumerable:!0,configurable:!0,writable:!0}):I[j]=l,I}var q="64px",U={},z=function(I){T(l,I);var j=M(l);function l(){var y;f(this,l);for(var p=arguments.length,d=new Array(p),E=0;E<p;E++)d[E]=arguments[E];return y=j.call.apply(j,[this].concat(d)),k(x(y),"mounted",!1),k(x(y),"state",{image:null}),k(x(y),"handleKeyPress",function(B){(B.key==="Enter"||B.key===" ")&&y.props.onClick()}),y}return C(l,[{key:"componentDidMount",value:function(){this.mounted=!0,this.fetchImage(this.props)}},{key:"componentDidUpdate",value:function(p){var d=this.props,E=d.url,B=d.light;(p.url!==E||p.light!==B)&&this.fetchImage(this.props)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchImage",value:function(p){var d=this,E=p.url,B=p.light,K=p.oEmbedUrl;if(!n.default.isValidElement(B)){if(typeof B=="string"){this.setState({image:B});return}if(U[E]){this.setState({image:U[E]});return}return this.setState({image:null}),window.fetch(K.replace("{url}",E)).then(function(A){return A.json()}).then(function(A){if(A.thumbnail_url&&d.mounted){var V=A.thumbnail_url.replace("height=100","height=480").replace("-d_295x166","-d_640");d.setState({image:V}),U[E]=V}})}}},{key:"render",value:function(){var p=this.props,d=p.light,E=p.onClick,B=p.playIcon,K=p.previewTabIndex,A=this.state.image,V=n.default.isValidElement(d),L={display:"flex",alignItems:"center",justifyContent:"center"},H={preview:c({width:"100%",height:"100%",backgroundImage:A&&!V?"url(".concat(A,")"):void 0,backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer"},L),shadow:c({background:"radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)",borderRadius:q,width:q,height:q,position:V?"absolute":void 0},L),playIcon:{borderStyle:"solid",borderWidth:"16px 0 16px 26px",borderColor:"transparent transparent transparent white",marginLeft:"7px"}},b=n.default.createElement("div",{style:H.shadow,className:"react-player__shadow"},n.default.createElement("div",{style:H.playIcon,className:"react-player__play-icon"}));return n.default.createElement("div",{style:H.preview,className:"react-player__preview",onClick:E,tabIndex:K,onKeyPress:this.handleKeyPress},V?d:null,B||b)}}]),l}(n.Component);r.default=z}(Xt)),Xt}Object.defineProperty(Ht,"__esModule",{value:!0});Ht.createReactPlayer=void 0;var Ge=hn(o),Gi=Yt(on),Jt=Yt(fi),wr=Yt(ln),pt=Ke,Ki=xe,Xi=Yt(un);function Yt(r){return r&&r.__esModule?r:{default:r}}function gt(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gt=function(n){return typeof n}:gt=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},gt(r)}function Dr(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,a)}return n}function Tr(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dr(Object(n),!0).forEach(function(a){ie(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Dr(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}function At(){return At=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},At.apply(this,arguments)}function Qt(r){return es(r)||Zi(r)||Qi(r)||Ji()}function Ji(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qi(r,t){if(r){if(typeof r=="string")return rr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rr(r,t)}}function Zi(r){if(typeof Symbol<"u"&&Symbol.iterator in Object(r))return Array.from(r)}function es(r){if(Array.isArray(r))return rr(r)}function rr(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=r[n];return a}function ts(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function kr(r,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function rs(r,t,n){return t&&kr(r.prototype,t),n&&kr(r,n),r}function ns(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&nr(r,t)}function nr(r,t){return nr=Object.setPrototypeOf||function(a,i){return a.__proto__=i,a},nr(r,t)}function as(r){var t=ss();return function(){var a=Mt(r),i;if(t){var s=Mt(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return is(this,i)}}function is(r,t){return t&&(gt(t)==="object"||typeof t=="function")?t:pe(r)}function pe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ss(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Mt(r){return Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Mt(r)}function ie(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function mn(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return mn=function(){return r},r}function hn(r){if(r&&r.__esModule)return r;if(r===null||gt(r)!=="object"&&typeof r!="function")return{default:r};var t=mn();if(t&&t.has(r))return t.get(r);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var s=a?Object.getOwnPropertyDescriptor(r,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=r[i]}return n.default=r,t&&t.set(r,n),n}var os=(0,Ge.lazy)(function(){return Promise.resolve().then(function(){return hn($i())})}),ls=typeof window<"u"&&window.document,cs=typeof $t<"u"&&$t.window&&$t.window.document,ds=Object.keys(pt.propTypes),us=ls||cs?Ge.Suspense:function(){return null},mt=[],ms=function(t,n){var a,i;return i=a=function(s){ns(f,s);var c=as(f);function f(){var u;ts(this,f);for(var C=arguments.length,T=new Array(C),_=0;_<C;_++)T[_]=arguments[_];return u=c.call.apply(c,[this].concat(T)),ie(pe(u),"state",{showPreview:!!u.props.light}),ie(pe(u),"references",{wrapper:function(R){u.wrapper=R},player:function(R){u.player=R}}),ie(pe(u),"handleClickPreview",function(M){u.setState({showPreview:!1}),u.props.onClickPreview(M)}),ie(pe(u),"showPreview",function(){u.setState({showPreview:!0})}),ie(pe(u),"getDuration",function(){return u.player?u.player.getDuration():null}),ie(pe(u),"getCurrentTime",function(){return u.player?u.player.getCurrentTime():null}),ie(pe(u),"getSecondsLoaded",function(){return u.player?u.player.getSecondsLoaded():null}),ie(pe(u),"getInternalPlayer",function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"player";return u.player?u.player.getInternalPlayer(M):null}),ie(pe(u),"seekTo",function(M,R,x){if(!u.player)return null;u.player.seekTo(M,R,x)}),ie(pe(u),"handleReady",function(){u.props.onReady(pe(u))}),ie(pe(u),"getActivePlayer",(0,Jt.default)(function(M){for(var R=0,x=[].concat(mt,Qt(t));R<x.length;R++){var w=x[R];if(w.canPlay(M))return w}return n||null})),ie(pe(u),"getConfig",(0,Jt.default)(function(M,R){var x=u.props.config;return Gi.default.all([pt.defaultProps.config,pt.defaultProps.config[R]||{},x,x[R]||{}])})),ie(pe(u),"getAttributes",(0,Jt.default)(function(M){return(0,Ki.omit)(u.props,ds)})),ie(pe(u),"renderActivePlayer",function(M){if(!M)return null;var R=u.getActivePlayer(M);if(!R)return null;var x=u.getConfig(M,R.key);return Ge.default.createElement(Xi.default,At({},u.props,{key:R.key,ref:u.references.player,config:x,activePlayer:R.lazyPlayer||R,onReady:u.handleReady}))}),u}return rs(f,[{key:"shouldComponentUpdate",value:function(C,T){return!(0,wr.default)(this.props,C)||!(0,wr.default)(this.state,T)}},{key:"componentDidUpdate",value:function(C){var T=this.props.light;!C.light&&T&&this.setState({showPreview:!0}),C.light&&!T&&this.setState({showPreview:!1})}},{key:"renderPreview",value:function(C){if(!C)return null;var T=this.props,_=T.light,M=T.playIcon,R=T.previewTabIndex,x=T.oEmbedUrl;return Ge.default.createElement(os,{url:C,light:_,playIcon:M,previewTabIndex:R,oEmbedUrl:x,onClick:this.handleClickPreview})}},{key:"render",value:function(){var C=this.props,T=C.url,_=C.style,M=C.width,R=C.height,x=C.fallback,w=C.wrapper,F=this.state.showPreview,k=this.getAttributes(T),q=typeof w=="string"?this.references.wrapper:void 0;return Ge.default.createElement(w,At({ref:q,style:Tr(Tr({},_),{},{width:M,height:R})},k),Ge.default.createElement(us,{fallback:x},F?this.renderPreview(T):this.renderActivePlayer(T)))}}]),f}(Ge.Component),ie(a,"displayName","ReactPlayer"),ie(a,"propTypes",pt.propTypes),ie(a,"defaultProps",pt.defaultProps),ie(a,"addCustomPlayer",function(s){mt.push(s)}),ie(a,"removeCustomPlayers",function(){mt.length=0}),ie(a,"canPlay",function(s){for(var c=0,f=[].concat(mt,Qt(t));c<f.length;c++){var u=f[c];if(u.canPlay(s))return!0}return!1}),ie(a,"canEnablePIP",function(s){for(var c=0,f=[].concat(mt,Qt(t));c<f.length;c++){var u=f[c];if(u.canEnablePIP&&u.canEnablePIP(s))return!0}return!1}),i};Ht.createReactPlayer=ms;var fn={},Q={};Object.defineProperty(Q,"__esModule",{value:!0});Q.canPlay=Q.FLV_EXTENSIONS=Q.DASH_EXTENSIONS=Q.HLS_EXTENSIONS=Q.VIDEO_EXTENSIONS=Q.AUDIO_EXTENSIONS=Q.MATCH_URL_KALTURA=Q.MATCH_URL_VIDYARD=Q.MATCH_URL_MIXCLOUD=Q.MATCH_URL_DAILYMOTION=Q.MATCH_URL_TWITCH_CHANNEL=Q.MATCH_URL_TWITCH_VIDEO=Q.MATCH_URL_WISTIA=Q.MATCH_URL_STREAMABLE=Q.MATCH_URL_FACEBOOK_WATCH=Q.MATCH_URL_FACEBOOK=Q.MATCH_URL_VIMEO=Q.MATCH_URL_SOUNDCLOUD=Q.MATCH_URL_YOUTUBE=void 0;var Pr=xe;function hs(r,t){var n;if(typeof Symbol>"u"||r[Symbol.iterator]==null){if(Array.isArray(r)||(n=fs(r))||t&&r&&typeof r.length=="number"){n&&(r=n);var a=0,i=function(){};return{s:i,n:function(){return a>=r.length?{done:!0}:{done:!1,value:r[a++]}},e:function(C){throw C},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,c=!1,f;return{s:function(){n=r[Symbol.iterator]()},n:function(){var C=n.next();return s=C.done,C},e:function(C){c=!0,f=C},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(c)throw f}}}}function fs(r,t){if(r){if(typeof r=="string")return Ir(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ir(r,t)}}function Ir(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=r[n];return a}var ar=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//;Q.MATCH_URL_YOUTUBE=ar;var pn=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/;Q.MATCH_URL_SOUNDCLOUD=pn;var gn=/vimeo\.com\/(?!progressive_redirect).+/;Q.MATCH_URL_VIMEO=gn;var yn=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/;Q.MATCH_URL_FACEBOOK=yn;var xn=/^https?:\/\/fb\.watch\/.+$/;Q.MATCH_URL_FACEBOOK_WATCH=xn;var vn=/streamable\.com\/([a-z0-9]+)$/;Q.MATCH_URL_STREAMABLE=vn;var jn=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/;Q.MATCH_URL_WISTIA=jn;var bn=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/;Q.MATCH_URL_TWITCH_VIDEO=bn;var Sn=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/;Q.MATCH_URL_TWITCH_CHANNEL=Sn;var Cn=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/;Q.MATCH_URL_DAILYMOTION=Cn;var wn=/mixcloud\.com\/([^/]+\/[^/]+)/;Q.MATCH_URL_MIXCLOUD=wn;var Dn=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/;Q.MATCH_URL_VIDYARD=Dn;var Tn=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/;Q.MATCH_URL_KALTURA=Tn;var dr=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i;Q.AUDIO_EXTENSIONS=dr;var ur=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i;Q.VIDEO_EXTENSIONS=ur;var mr=/\.(m3u8)($|\?)/i;Q.HLS_EXTENSIONS=mr;var kn=/\.(mpd)($|\?)/i;Q.DASH_EXTENSIONS=kn;var Pn=/\.(flv)($|\?)/i;Q.FLV_EXTENSIONS=Pn;var ps=function r(t){if(t instanceof Array){var n=hs(t),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;if(typeof i=="string"&&r(i)||r(i.src))return!0}}catch(s){n.e(s)}finally{n.f()}return!1}return(0,Pr.isMediaStream)(t)||(0,Pr.isBlobUrl)(t)?!0:dr.test(t)||ur.test(t)||mr.test(t)||kn.test(t)||Pn.test(t)},gs={youtube:function(t){return t instanceof Array?t.every(function(n){return ar.test(n)}):ar.test(t)},soundcloud:function(t){return pn.test(t)&&!dr.test(t)},vimeo:function(t){return gn.test(t)&&!ur.test(t)&&!mr.test(t)},facebook:function(t){return yn.test(t)||xn.test(t)},streamable:function(t){return vn.test(t)},wistia:function(t){return jn.test(t)},twitch:function(t){return bn.test(t)||Sn.test(t)},dailymotion:function(t){return Cn.test(t)},mixcloud:function(t){return wn.test(t)},vidyard:function(t){return Dn.test(t)},kaltura:function(t){return Tn.test(t)},file:ps};Q.canPlay=gs;(function(r){function t(b){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(O){return typeof O}:t=function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},t(b)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=c(o),a=xe,i=Q;function s(){if(typeof WeakMap!="function")return null;var b=new WeakMap;return s=function(){return b},b}function c(b){if(b&&b.__esModule)return b;if(b===null||t(b)!=="object"&&typeof b!="function")return{default:b};var S=s();if(S&&S.has(b))return S.get(b);var O={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in b)if(Object.prototype.hasOwnProperty.call(b,m)){var v=D?Object.getOwnPropertyDescriptor(b,m):null;v&&(v.get||v.set)?Object.defineProperty(O,m,v):O[m]=b[m]}return O.default=b,S&&S.set(b,O),O}function f(b,S){var O=Object.keys(b);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(b);S&&(D=D.filter(function(m){return Object.getOwnPropertyDescriptor(b,m).enumerable})),O.push.apply(O,D)}return O}function u(b){for(var S=1;S<arguments.length;S++){var O=arguments[S]!=null?arguments[S]:{};S%2?f(Object(O),!0).forEach(function(D){p(b,D,O[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(O)):f(Object(O)).forEach(function(D){Object.defineProperty(b,D,Object.getOwnPropertyDescriptor(O,D))})}return b}function C(b,S){return x(b)||R(b,S)||_(b,S)||T()}function T(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _(b,S){if(b){if(typeof b=="string")return M(b,S);var O=Object.prototype.toString.call(b).slice(8,-1);if(O==="Object"&&b.constructor&&(O=b.constructor.name),O==="Map"||O==="Set")return Array.from(b);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return M(b,S)}}function M(b,S){(S==null||S>b.length)&&(S=b.length);for(var O=0,D=new Array(S);O<S;O++)D[O]=b[O];return D}function R(b,S){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(b)))){var O=[],D=!0,m=!1,v=void 0;try{for(var h=b[Symbol.iterator](),N;!(D=(N=h.next()).done)&&(O.push(N.value),!(S&&O.length===S));D=!0);}catch(X){m=!0,v=X}finally{try{!D&&h.return!=null&&h.return()}finally{if(m)throw v}}return O}}function x(b){if(Array.isArray(b))return b}function w(b,S){if(!(b instanceof S))throw new TypeError("Cannot call a class as a function")}function F(b,S){for(var O=0;O<S.length;O++){var D=S[O];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}function k(b,S,O){return S&&F(b.prototype,S),O&&F(b,O),b}function q(b,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(S&&S.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),S&&U(b,S)}function U(b,S){return U=Object.setPrototypeOf||function(D,m){return D.__proto__=m,D},U(b,S)}function z(b){var S=l();return function(){var D=y(b),m;if(S){var v=y(this).constructor;m=Reflect.construct(D,arguments,v)}else m=D.apply(this,arguments);return I(this,m)}}function I(b,S){return S&&(t(S)==="object"||typeof S=="function")?S:j(b)}function j(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function l(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function y(b){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},y(b)}function p(b,S,O){return S in b?Object.defineProperty(b,S,{value:O,enumerable:!0,configurable:!0,writable:!0}):b[S]=O,b}var d="https://www.youtube.com/iframe_api",E="YT",B="onYouTubeIframeAPIReady",K=/[?&](?:list|channel)=([a-zA-Z0-9_-]+)/,A=/user\/([a-zA-Z0-9_-]+)\/?/,V=/youtube-nocookie\.com/,L="https://www.youtube-nocookie.com",H=function(b){q(O,b);var S=z(O);function O(){var D;w(this,O);for(var m=arguments.length,v=new Array(m),h=0;h<m;h++)v[h]=arguments[h];return D=S.call.apply(S,[this].concat(v)),p(j(D),"callPlayer",a.callPlayer),p(j(D),"parsePlaylist",function(N){if(N instanceof Array)return{listType:"playlist",playlist:N.map(D.getID).join(",")};if(K.test(N)){var X=N.match(K),ae=C(X,2),Fe=ae[1];return{listType:"playlist",list:Fe.replace(/^UC/,"UU")}}if(A.test(N)){var qe=N.match(A),De=C(qe,2),ze=De[1];return{listType:"user_uploads",list:ze}}return{}}),p(j(D),"onStateChange",function(N){var X=N.data,ae=D.props,Fe=ae.onPlay,qe=ae.onPause,De=ae.onBuffer,ze=ae.onBufferEnd,wt=ae.onEnded,lt=ae.onReady,Dt=ae.loop,ct=ae.config,Ze=ct.playerVars,dt=ct.onUnstarted,Ie=window[E].PlayerState,_n=Ie.UNSTARTED,Fn=Ie.PLAYING,Rn=Ie.PAUSED,Ln=Ie.BUFFERING,qn=Ie.ENDED,Vn=Ie.CUED;if(X===_n&&dt(),X===Fn&&(Fe(),ze()),X===Rn&&qe(),X===Ln&&De(),X===qn){var Un=!!D.callPlayer("getPlaylist");Dt&&!Un&&(Ze.start?D.seekTo(Ze.start):D.play()),wt()}X===Vn&&lt()}),p(j(D),"mute",function(){D.callPlayer("mute")}),p(j(D),"unmute",function(){D.callPlayer("unMute")}),p(j(D),"ref",function(N){D.container=N}),D}return k(O,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"getID",value:function(m){return!m||m instanceof Array||K.test(m)?null:m.match(i.MATCH_URL_YOUTUBE)[1]}},{key:"load",value:function(m,v){var h=this,N=this.props,X=N.playing,ae=N.muted,Fe=N.playsinline,qe=N.controls,De=N.loop,ze=N.config,wt=N.onError,lt=ze.playerVars,Dt=ze.embedOptions,ct=this.getID(m);if(v){if(K.test(m)||A.test(m)||m instanceof Array){this.player.loadPlaylist(this.parsePlaylist(m));return}this.player.cueVideoById({videoId:ct,startSeconds:(0,a.parseStartTime)(m)||lt.start,endSeconds:(0,a.parseEndTime)(m)||lt.end});return}(0,a.getSDK)(d,E,B,function(Ze){return Ze.loaded}).then(function(Ze){h.container&&(h.player=new Ze.Player(h.container,u({width:"100%",height:"100%",videoId:ct,playerVars:u(u({autoplay:X?1:0,mute:ae?1:0,controls:qe?1:0,start:(0,a.parseStartTime)(m),end:(0,a.parseEndTime)(m),origin:window.location.origin,playsinline:Fe?1:0},h.parsePlaylist(m)),lt),events:{onReady:function(){De&&h.player.setLoop(!0),h.props.onReady()},onPlaybackRateChange:function(Ie){return h.props.onPlaybackRateChange(Ie.data)},onPlaybackQualityChange:function(Ie){return h.props.onPlaybackQualityChange(Ie)},onStateChange:h.onStateChange,onError:function(Ie){return wt(Ie.data)}},host:V.test(m)?L:void 0},Dt)))},wt),Dt.events&&console.warn("Using `embedOptions.events` will likely break things. Use ReactPlayers callback props instead, eg onReady, onPlay, onPause")}},{key:"play",value:function(){this.callPlayer("playVideo")}},{key:"pause",value:function(){this.callPlayer("pauseVideo")}},{key:"stop",value:function(){document.body.contains(this.callPlayer("getIframe"))&&this.callPlayer("stopVideo")}},{key:"seekTo",value:function(m){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.callPlayer("seekTo",m),!v&&!this.props.playing&&this.pause()}},{key:"setVolume",value:function(m){this.callPlayer("setVolume",m*100)}},{key:"setPlaybackRate",value:function(m){this.callPlayer("setPlaybackRate",m)}},{key:"setLoop",value:function(m){this.callPlayer("setLoop",m)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return this.callPlayer("getVideoLoadedFraction")*this.getDuration()}},{key:"render",value:function(){var m=this.props.display,v={width:"100%",height:"100%",display:m};return n.default.createElement("div",{style:v},n.default.createElement("div",{ref:this.ref}))}}]),O}(n.Component);r.default=H,p(H,"displayName","YouTube"),p(H,"canPlay",i.canPlay.youtube)})(fn);var ys=Ht.createReactPlayer,Ar=fn.default,xs=ys([{key:"youtube",canPlay:Ar.canPlay,lazyPlayer:Ar}]);const vs=ia(xs),Mr=[],js=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(),[s,c]=o.useState(!0),[f,u]=o.useState(1),[C,T]=o.useState(0),[_,M]=o.useState(0),[R,x]=o.useState(!0),[w]=P.useForm();de();const[F,k]=o.useState(!1),[q,U]=o.useState(!1),[z,I]=o.useState(0),[j,l]=o.useState(!1),y=o.useRef([]),p=async b=>{i(b),l(!0)},d=()=>{U(!0)},E=()=>{k(!0)},B=async(b,S="",O=!1)=>{const{data:D}=await Y.custom({url:"",method:"get",meta:{operation:"darasaVideos",variables:{page:{value:b,type:"Int",required:!0},key:{value:S,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","description","url","video","isYoutube","created","updated","isActive","canDelete","canEdit",{darasa:["id"]},{author:["id","fullName","firstName","middleName","lastName"]}]}]}}).catch(()=>(g.error("Error loading videos"),{data:null})).then(m=>m);D&&(M(D.total),T(D.pages),u(D.page),x(D.hasNext),n(D.results.map(m=>({...m,isPlaying:!1})))),c(!1)},K=async b=>{n([b,...t]),U(!1)},A=(b,S)=>{Mr[S]=b},V=(b,S)=>{z.toString()!==b.toString()&&I(b),n(t.map((O,D)=>O.id.toString()===b.toString()?{...O,isPlaying:S}:{...O,isPlaying:!1}))},L=async b=>{const{data:S}=await Y.custom({url:"",method:"post",meta:{operation:"deleteClassVideo",variables:{id:{value:b,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error deleting video"),{data:null})).then(O=>O);S&&(S.success?(g.success(S.message),n(t.filter(O=>O.id!==b))):g.error(S.message))},H=b=>{me.confirm({title:"Removing Video",icon:e.jsx(he,{}),content:"Are you sure ...",okText:"Remove",cancelText:"Cancel",onOk:()=>L(b)})};return o.useEffect(()=>{B(f)},[]),s?e.jsx(e.Fragment,{children:e.jsx(ke,{loading:s,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx($,{span:20,children:e.jsx(P,{layout:"vertical",form:w,onFinish:b=>{u(0),B(0,b.key,!0)},children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Video(s)...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx($,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ge,{trigger:["click"],overlay:e.jsxs(W,{children:[e.jsx(W.Item,{disabled:!r.canManage,children:e.jsxs("a",{target:"_blank",rel:"noopener noreferrer",onClick:E,children:[e.jsx(Wr,{}),e.jsx("span",{style:{marginLeft:10},children:"Upload Video"})]})}),e.jsx(W.Item,{children:e.jsxs("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>d(),children:[e.jsx(nt,{}),e.jsx("span",{style:{marginLeft:10},children:"Youtube-Video"})]})})]}),placement:"bottomRight",overlayStyle:{zIndex:9999},children:e.jsx(G,{size:"large",icon:e.jsx(Lt,{}),children:"Add Video"})})})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[t.length>0?e.jsx(J,{align:"top",children:t.map((b,S)=>e.jsx($,{span:12,children:e.jsxs(Te,{hoverable:b.isActive,style:{marginRight:10},title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:b.title}),e.jsx(sa,{title:se(b.created).format("LLLL"),placement:"top",children:e.jsxs(ba.Tag,{color:"red",style:{float:"right"},children:["Published: ",se(b.created).fromNow()]})}),e.jsx(Se,{style:{right:0,position:"absolute",zIndex:"inherit"},children:e.jsx(ge,{trigger:["click"],overlay:e.jsxs(W,{children:[e.jsx(W.Item,{icon:e.jsx(Re,{}),disabled:!b.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>p(b),children:"View Info's"})}),e.jsx(W.Item,{icon:e.jsx(Pe,{}),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(W.Item,{icon:e.jsx(it,{}),onClick:()=>H(b.id),disabled:!r.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:O=>O.preventDefault(),children:e.jsx(Ce,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})]}),children:[b.isYoutube&&e.jsx(vs,{url:b.url,width:"100%"}),!b.isYoutube&&e.jsx("span",{onClick:()=>{V(b.id,!0),Mr[S].pause()},children:e.jsx(Xa,{ref:y.current[S],index:S,file:b.video,videoId:b.id,updatePlaying:V,isPlaying:z.toString()===b.id.toString(),updatePlayer:A})})]})}))}):e.jsx(Je,{severity:"info",children:"No Video found for this class, please add one"}),R&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{type:"primary",onClick:()=>{B(f+1)},children:"Load More"})})]}),e.jsx(te,{title:"Uploading Video",open:F,onClose:b=>k(b),width:"50vw",children:e.jsx(Ka,{id:r.id,random:Math.random(),handleAddingVideo:K})}),e.jsx(te,{title:"Adding Youtube Video",open:q,onClose:b=>U(b),width:"50vw",children:e.jsx($a,{id:r.id,random:Math.random(),handleAddingDrive:K})}),e.jsx(Ct,{title:"Video Info's",width:"40vw",anchor:"right",onClose:b=>l(b),open:j,children:e.jsx(e.Fragment,{children:a&&e.jsxs(e.Fragment,{children:[" ",e.jsx("div",{dangerouslySetInnerHTML:{__html:a.description}})]})})})]})};function Xe(r){if(r===null||r===!0||r===!1)return NaN;var t=Number(r);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function we(r,t){if(t.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+t.length+" present")}function Le(r){we(1,arguments);var t=Object.prototype.toString.call(r);return r instanceof Date||$r(r)==="object"&&t==="[object Date]"?new Date(r.getTime()):typeof r=="number"||t==="[object Number]"?new Date(r):((typeof r=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function bs(r,t){we(2,arguments);var n=Le(r).getTime(),a=Xe(t);return new Date(n+a)}var Ss={};function Wt(){return Ss}function Cs(r){var t=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return t.setUTCFullYear(r.getFullYear()),r.getTime()-t.getTime()}function ws(r){return we(1,arguments),r instanceof Date||$r(r)==="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Ds(r){if(we(1,arguments),!ws(r)&&typeof r!="number")return!1;var t=Le(r);return!isNaN(Number(t))}function Ts(r,t){we(2,arguments);var n=Xe(t);return bs(r,-n)}var ks=864e5;function Ps(r){we(1,arguments);var t=Le(r),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var a=t.getTime(),i=n-a;return Math.floor(i/ks)+1}function Ot(r){we(1,arguments);var t=1,n=Le(r),a=n.getUTCDay(),i=(a<t?7:0)+a-t;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function In(r){we(1,arguments);var t=Le(r),n=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var i=Ot(a),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var c=Ot(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=c.getTime()?n:n-1}function Is(r){we(1,arguments);var t=In(r),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var a=Ot(n);return a}var As=6048e5;function Ms(r){we(1,arguments);var t=Le(r),n=Ot(t).getTime()-Is(t).getTime();return Math.round(n/As)+1}function Et(r,t){var n,a,i,s,c,f,u,C;we(1,arguments);var T=Wt(),_=Xe((n=(a=(i=(s=t==null?void 0:t.weekStartsOn)!==null&&s!==void 0?s:t==null||(c=t.locale)===null||c===void 0||(f=c.options)===null||f===void 0?void 0:f.weekStartsOn)!==null&&i!==void 0?i:T.weekStartsOn)!==null&&a!==void 0?a:(u=T.locale)===null||u===void 0||(C=u.options)===null||C===void 0?void 0:C.weekStartsOn)!==null&&n!==void 0?n:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var M=Le(r),R=M.getUTCDay(),x=(R<_?7:0)+R-_;return M.setUTCDate(M.getUTCDate()-x),M.setUTCHours(0,0,0,0),M}function An(r,t){var n,a,i,s,c,f,u,C;we(1,arguments);var T=Le(r),_=T.getUTCFullYear(),M=Wt(),R=Xe((n=(a=(i=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(c=t.locale)===null||c===void 0||(f=c.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&i!==void 0?i:M.firstWeekContainsDate)!==null&&a!==void 0?a:(u=M.locale)===null||u===void 0||(C=u.options)===null||C===void 0?void 0:C.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(R>=1&&R<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var x=new Date(0);x.setUTCFullYear(_+1,0,R),x.setUTCHours(0,0,0,0);var w=Et(x,t),F=new Date(0);F.setUTCFullYear(_,0,R),F.setUTCHours(0,0,0,0);var k=Et(F,t);return T.getTime()>=w.getTime()?_+1:T.getTime()>=k.getTime()?_:_-1}function Os(r,t){var n,a,i,s,c,f,u,C;we(1,arguments);var T=Wt(),_=Xe((n=(a=(i=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(c=t.locale)===null||c===void 0||(f=c.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&i!==void 0?i:T.firstWeekContainsDate)!==null&&a!==void 0?a:(u=T.locale)===null||u===void 0||(C=u.options)===null||C===void 0?void 0:C.firstWeekContainsDate)!==null&&n!==void 0?n:1),M=An(r,t),R=new Date(0);R.setUTCFullYear(M,0,_),R.setUTCHours(0,0,0,0);var x=Et(R,t);return x}var Es=6048e5;function Ns(r,t){we(1,arguments);var n=Le(r),a=Et(n,t).getTime()-Os(n,t).getTime();return Math.round(a/Es)+1}function re(r,t){for(var n=r<0?"-":"",a=Math.abs(r).toString();a.length<t;)a="0"+a;return n+a}var _s={y:function(t,n){var a=t.getUTCFullYear(),i=a>0?a:1-a;return re(n==="yy"?i%100:i,n.length)},M:function(t,n){var a=t.getUTCMonth();return n==="M"?String(a+1):re(a+1,2)},d:function(t,n){return re(t.getUTCDate(),n.length)},a:function(t,n){var a=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h:function(t,n){return re(t.getUTCHours()%12||12,n.length)},H:function(t,n){return re(t.getUTCHours(),n.length)},m:function(t,n){return re(t.getUTCMinutes(),n.length)},s:function(t,n){return re(t.getUTCSeconds(),n.length)},S:function(t,n){var a=n.length,i=t.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,a-3));return re(s,n.length)}};const He=_s;var rt={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Fs={G:function(t,n,a){var i=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return a.era(i,{width:"abbreviated"});case"GGGGG":return a.era(i,{width:"narrow"});case"GGGG":default:return a.era(i,{width:"wide"})}},y:function(t,n,a){if(n==="yo"){var i=t.getUTCFullYear(),s=i>0?i:1-i;return a.ordinalNumber(s,{unit:"year"})}return He.y(t,n)},Y:function(t,n,a,i){var s=An(t,i),c=s>0?s:1-s;if(n==="YY"){var f=c%100;return re(f,2)}return n==="Yo"?a.ordinalNumber(c,{unit:"year"}):re(c,n.length)},R:function(t,n){var a=In(t);return re(a,n.length)},u:function(t,n){var a=t.getUTCFullYear();return re(a,n.length)},Q:function(t,n,a){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return re(i,2);case"Qo":return a.ordinalNumber(i,{unit:"quarter"});case"QQQ":return a.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,n,a){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return re(i,2);case"qo":return a.ordinalNumber(i,{unit:"quarter"});case"qqq":return a.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,n,a){var i=t.getUTCMonth();switch(n){case"M":case"MM":return He.M(t,n);case"Mo":return a.ordinalNumber(i+1,{unit:"month"});case"MMM":return a.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(i,{width:"wide",context:"formatting"})}},L:function(t,n,a){var i=t.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return re(i+1,2);case"Lo":return a.ordinalNumber(i+1,{unit:"month"});case"LLL":return a.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(i,{width:"wide",context:"standalone"})}},w:function(t,n,a,i){var s=Ns(t,i);return n==="wo"?a.ordinalNumber(s,{unit:"week"}):re(s,n.length)},I:function(t,n,a){var i=Ms(t);return n==="Io"?a.ordinalNumber(i,{unit:"week"}):re(i,n.length)},d:function(t,n,a){return n==="do"?a.ordinalNumber(t.getUTCDate(),{unit:"date"}):He.d(t,n)},D:function(t,n,a){var i=Ps(t);return n==="Do"?a.ordinalNumber(i,{unit:"dayOfYear"}):re(i,n.length)},E:function(t,n,a){var i=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return a.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(i,{width:"short",context:"formatting"});case"EEEE":default:return a.day(i,{width:"wide",context:"formatting"})}},e:function(t,n,a,i){var s=t.getUTCDay(),c=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(c);case"ee":return re(c,2);case"eo":return a.ordinalNumber(c,{unit:"day"});case"eee":return a.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(s,{width:"short",context:"formatting"});case"eeee":default:return a.day(s,{width:"wide",context:"formatting"})}},c:function(t,n,a,i){var s=t.getUTCDay(),c=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(c);case"cc":return re(c,n.length);case"co":return a.ordinalNumber(c,{unit:"day"});case"ccc":return a.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(s,{width:"narrow",context:"standalone"});case"cccccc":return a.day(s,{width:"short",context:"standalone"});case"cccc":default:return a.day(s,{width:"wide",context:"standalone"})}},i:function(t,n,a){var i=t.getUTCDay(),s=i===0?7:i;switch(n){case"i":return String(s);case"ii":return re(s,n.length);case"io":return a.ordinalNumber(s,{unit:"day"});case"iii":return a.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(i,{width:"short",context:"formatting"});case"iiii":default:return a.day(i,{width:"wide",context:"formatting"})}},a:function(t,n,a){var i=t.getUTCHours(),s=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,n,a){var i=t.getUTCHours(),s;switch(i===12?s=rt.noon:i===0?s=rt.midnight:s=i/12>=1?"pm":"am",n){case"b":case"bb":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,n,a){var i=t.getUTCHours(),s;switch(i>=17?s=rt.evening:i>=12?s=rt.afternoon:i>=4?s=rt.morning:s=rt.night,n){case"B":case"BB":case"BBB":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,n,a){if(n==="ho"){var i=t.getUTCHours()%12;return i===0&&(i=12),a.ordinalNumber(i,{unit:"hour"})}return He.h(t,n)},H:function(t,n,a){return n==="Ho"?a.ordinalNumber(t.getUTCHours(),{unit:"hour"}):He.H(t,n)},K:function(t,n,a){var i=t.getUTCHours()%12;return n==="Ko"?a.ordinalNumber(i,{unit:"hour"}):re(i,n.length)},k:function(t,n,a){var i=t.getUTCHours();return i===0&&(i=24),n==="ko"?a.ordinalNumber(i,{unit:"hour"}):re(i,n.length)},m:function(t,n,a){return n==="mo"?a.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):He.m(t,n)},s:function(t,n,a){return n==="so"?a.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):He.s(t,n)},S:function(t,n){return He.S(t,n)},X:function(t,n,a,i){var s=i._originalDate||t,c=s.getTimezoneOffset();if(c===0)return"Z";switch(n){case"X":return Er(c);case"XXXX":case"XX":return Be(c);case"XXXXX":case"XXX":default:return Be(c,":")}},x:function(t,n,a,i){var s=i._originalDate||t,c=s.getTimezoneOffset();switch(n){case"x":return Er(c);case"xxxx":case"xx":return Be(c);case"xxxxx":case"xxx":default:return Be(c,":")}},O:function(t,n,a,i){var s=i._originalDate||t,c=s.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Or(c,":");case"OOOO":default:return"GMT"+Be(c,":")}},z:function(t,n,a,i){var s=i._originalDate||t,c=s.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Or(c,":");case"zzzz":default:return"GMT"+Be(c,":")}},t:function(t,n,a,i){var s=i._originalDate||t,c=Math.floor(s.getTime()/1e3);return re(c,n.length)},T:function(t,n,a,i){var s=i._originalDate||t,c=s.getTime();return re(c,n.length)}};function Or(r,t){var n=r>0?"-":"+",a=Math.abs(r),i=Math.floor(a/60),s=a%60;if(s===0)return n+String(i);var c=t||"";return n+String(i)+c+re(s,2)}function Er(r,t){if(r%60===0){var n=r>0?"-":"+";return n+re(Math.abs(r)/60,2)}return Be(r,t)}function Be(r,t){var n=t||"",a=r>0?"-":"+",i=Math.abs(r),s=re(Math.floor(i/60),2),c=re(i%60,2);return a+s+n+c}const Rs=Fs;var Nr=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Mn=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Ls=function(t,n){var a=t.match(/(P+)(p+)?/)||[],i=a[1],s=a[2];if(!s)return Nr(t,n);var c;switch(i){case"P":c=n.dateTime({width:"short"});break;case"PP":c=n.dateTime({width:"medium"});break;case"PPP":c=n.dateTime({width:"long"});break;case"PPPP":default:c=n.dateTime({width:"full"});break}return c.replace("{{date}}",Nr(i,n)).replace("{{time}}",Mn(s,n))},qs={p:Mn,P:Ls};const Vs=qs;var Us=["D","DD"],zs=["YY","YYYY"];function Hs(r){return Us.indexOf(r)!==-1}function Ys(r){return zs.indexOf(r)!==-1}function _r(r,t,n){if(r==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Ws={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Bs=function(t,n,a){var i,s=Ws[t];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+i:i+" ago":i};const $s=Bs;function Zt(r){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):r.defaultWidth,a=r.formats[n]||r.formats[r.defaultWidth];return a}}var Gs={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ks={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Xs={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Js={date:Zt({formats:Gs,defaultWidth:"full"}),time:Zt({formats:Ks,defaultWidth:"full"}),dateTime:Zt({formats:Xs,defaultWidth:"full"})};const Qs=Js;var Zs={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},eo=function(t,n,a,i){return Zs[t]};const to=eo;function ht(r){return function(t,n){var a=n!=null&&n.context?String(n.context):"standalone",i;if(a==="formatting"&&r.formattingValues){var s=r.defaultFormattingWidth||r.defaultWidth,c=n!=null&&n.width?String(n.width):s;i=r.formattingValues[c]||r.formattingValues[s]}else{var f=r.defaultWidth,u=n!=null&&n.width?String(n.width):r.defaultWidth;i=r.values[u]||r.values[f]}var C=r.argumentCallback?r.argumentCallback(t):t;return i[C]}}var ro={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},no={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ao={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},io={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},so={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},oo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},lo=function(t,n){var a=Number(t),i=a%100;if(i>20||i<10)switch(i%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},co={ordinalNumber:lo,era:ht({values:ro,defaultWidth:"wide"}),quarter:ht({values:no,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:ht({values:ao,defaultWidth:"wide"}),day:ht({values:io,defaultWidth:"wide"}),dayPeriod:ht({values:so,defaultWidth:"wide",formattingValues:oo,defaultFormattingWidth:"wide"})};const uo=co;function ft(r){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.width,i=a&&r.matchPatterns[a]||r.matchPatterns[r.defaultMatchWidth],s=t.match(i);if(!s)return null;var c=s[0],f=a&&r.parsePatterns[a]||r.parsePatterns[r.defaultParseWidth],u=Array.isArray(f)?ho(f,function(_){return _.test(c)}):mo(f,function(_){return _.test(c)}),C;C=r.valueCallback?r.valueCallback(u):u,C=n.valueCallback?n.valueCallback(C):C;var T=t.slice(c.length);return{value:C,rest:T}}}function mo(r,t){for(var n in r)if(r.hasOwnProperty(n)&&t(r[n]))return n}function ho(r,t){for(var n=0;n<r.length;n++)if(t(r[n]))return n}function fo(r){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.match(r.matchPattern);if(!a)return null;var i=a[0],s=t.match(r.parsePattern);if(!s)return null;var c=r.valueCallback?r.valueCallback(s[0]):s[0];c=n.valueCallback?n.valueCallback(c):c;var f=t.slice(i.length);return{value:c,rest:f}}}var po=/^(\d+)(th|st|nd|rd)?/i,go=/\d+/i,yo={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},xo={any:[/^b/i,/^(a|c)/i]},vo={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jo={any:[/1/i,/2/i,/3/i,/4/i]},bo={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},So={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Co={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},wo={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Do={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},To={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ko={ordinalNumber:fo({matchPattern:po,parsePattern:go,valueCallback:function(t){return parseInt(t,10)}}),era:ft({matchPatterns:yo,defaultMatchWidth:"wide",parsePatterns:xo,defaultParseWidth:"any"}),quarter:ft({matchPatterns:vo,defaultMatchWidth:"wide",parsePatterns:jo,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:ft({matchPatterns:bo,defaultMatchWidth:"wide",parsePatterns:So,defaultParseWidth:"any"}),day:ft({matchPatterns:Co,defaultMatchWidth:"wide",parsePatterns:wo,defaultParseWidth:"any"}),dayPeriod:ft({matchPatterns:Do,defaultMatchWidth:"any",parsePatterns:To,defaultParseWidth:"any"})};const Po=ko;var Io={code:"en-US",formatDistance:$s,formatLong:Qs,formatRelative:to,localize:uo,match:Po,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Ao=Io;var Mo=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Oo=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Eo=/^'([^]*?)'?$/,No=/''/g,_o=/[a-zA-Z]/;function Nt(r,t,n){var a,i,s,c,f,u,C,T,_,M,R,x,w,F,k,q,U,z;we(2,arguments);var I=String(t),j=Wt(),l=(a=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:j.locale)!==null&&a!==void 0?a:Ao,y=Xe((s=(c=(f=(u=n==null?void 0:n.firstWeekContainsDate)!==null&&u!==void 0?u:n==null||(C=n.locale)===null||C===void 0||(T=C.options)===null||T===void 0?void 0:T.firstWeekContainsDate)!==null&&f!==void 0?f:j.firstWeekContainsDate)!==null&&c!==void 0?c:(_=j.locale)===null||_===void 0||(M=_.options)===null||M===void 0?void 0:M.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=Xe((R=(x=(w=(F=n==null?void 0:n.weekStartsOn)!==null&&F!==void 0?F:n==null||(k=n.locale)===null||k===void 0||(q=k.options)===null||q===void 0?void 0:q.weekStartsOn)!==null&&w!==void 0?w:j.weekStartsOn)!==null&&x!==void 0?x:(U=j.locale)===null||U===void 0||(z=U.options)===null||z===void 0?void 0:z.weekStartsOn)!==null&&R!==void 0?R:0);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!l.localize)throw new RangeError("locale must contain localize property");if(!l.formatLong)throw new RangeError("locale must contain formatLong property");var d=Le(r);if(!Ds(d))throw new RangeError("Invalid time value");var E=Cs(d),B=Ts(d,E),K={firstWeekContainsDate:y,weekStartsOn:p,locale:l,_originalDate:d},A=I.match(Oo).map(function(V){var L=V[0];if(L==="p"||L==="P"){var H=Vs[L];return H(V,l.formatLong)}return V}).join("").match(Mo).map(function(V){if(V==="''")return"'";var L=V[0];if(L==="'")return Fo(V);var H=Rs[L];if(H)return!(n!=null&&n.useAdditionalWeekYearTokens)&&Ys(V)&&_r(V,t,String(r)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&Hs(V)&&_r(V,t,String(r)),H(B,V,l.localize,K);if(L.match(_o))throw new RangeError("Format string contains an unescaped latin alphabet character `"+L+"`");return V}).join("");return A}function Fo(r){var t=r.match(Eo);return t?t[1].replace(No,"'"):r}const{Option:Ro}=Oe,Fr=[{value:"",label:"Select Duration Type"},{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"}],Lo=r=>{const[t,n]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(P,{layout:"vertical",form:r.form,onFinish:a=>{a.description=t,r.onFinish(a),n("")},requiredMark:!1,children:[e.jsx(P.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(ee,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(P.Item,{name:"startDate",label:"start Date",rules:[{required:!0,type:"date",message:"Please select date"}],children:e.jsx(Qe,{showTime:{format:"HH:mm"},disabledDate:a=>{const i=se().format("YYYY-MM-DD");return a&&a<se(i,"YYYY-MM-DD")},style:{width:"100%"},popupStyle:{zIndex:9999}})}),e.jsxs(J,{children:[e.jsx($,{span:12,children:e.jsx(P.Item,{name:"duration",label:"Duration",style:{width:"100%"},rules:[{required:!0,type:"integer",message:"Enter Duration"}],children:e.jsx(We,{min:1,defaultValue:1,style:{width:"100%"},size:"large"})})}),e.jsx($,{span:12,children:e.jsx(P.Item,{name:"durationType",label:"Duration Type",style:{width:"100%"},rules:[{required:!0,type:"string",message:"Please select duration type"}],children:e.jsx(Oe,{defaultValue:Fr[0].value,size:"large",style:{width:"100%"},dropdownStyle:{zIndex:9999},children:Fr.map(a=>e.jsx(Ro,{children:a.label},a.value))})})})]}),e.jsx("h3",{children:"Description"}),e.jsx(Ne.CKEditor,{editor:_e,data:t,onReady:a=>{a.editing.view.change(i=>{i.setStyle("min-height","100px",a.editing.view.document.getRoot())})},onChange:(a,i)=>{const s=i.getData();n(s)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},qo=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(),[s,c]=o.useState(!0),[f,u]=o.useState(1);o.useState(25);const[C]=P.useForm(),[T,_]=o.useState(0),[M,R]=o.useState(0),[x,w]=o.useState(!0),{push:F}=de(),[k,q]=o.useState(!1),[U]=P.useForm(),[z,I]=o.useState(!1),[j]=P.useForm(),l=A=>{i(A),I(!0)},y=()=>{q(!0)},p=async A=>{const{data:V}=await Y.custom({url:"",method:"post",meta:{operation:"editVirtualClass",variables:{id:{value:A.id,type:"Int",required:!0},name:{value:A.name,type:"String",required:!0},description:{value:A.description,type:"String",required:!0},duration:{value:A.duration,type:"Int",required:!0},durationType:{value:A.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:A.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(()=>(g.error("Error editing class"),{data:null})).then(L=>L);V&&(V.success?(g.success(V.message),n(t.map(L=>L.id===V.virtual.id?V.virtual:L)),I(!1)):g.error(V.message))},d=async A=>{const{data:V}=await Y.custom({url:"",method:"post",meta:{operation:"createVirtualClass",variables:{darasaId:{value:parseInt(r.id?r.id.toString():"0"),type:"Int",required:!1},name:{value:A.name,type:"String",required:!0},description:{value:A.description,type:"String",required:!0},duration:{value:A.duration,type:"Int",required:!0},durationType:{value:A.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:A.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(()=>(g.error("Error creating virtual class"),{data:null})).then(L=>L);V&&(V.success?(g.success(V.message),q(!1),n([V.virtual,...t])):g.error(V.message))},E=async(A,V="",L=!1)=>{const{data:H}=await Y.custom({url:"",method:"get",meta:{operation:"darasaVirtuals",variables:{page:{value:A,type:"Int",required:!0},key:{value:V,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","middleName","lastName","email","fullName","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(()=>(g.error("Error fetching virtual classes"),{data:null})).then(b=>b);H&&(R(H.total),_(H.pages),u(H.page),w(H.hasNext),n(L?H.results:[...t,...H.results])),c(!1)},B=async A=>{const{data:V}=await Y.custom({url:"",method:"post",meta:{operation:"deleteVirtualClass",variables:{id:{value:A,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error deleting virtual class"),{data:null})).then(L=>L);V&&(V.success?(g.success(V.message),n(t.filter(L=>L.id!==A))):g.error(V.message))},K=A=>{me.confirm({title:"Deleting Virtual Class Session",icon:e.jsx(he,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>B(A)})};return o.useEffect(()=>{E(f)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx($,{span:20,children:e.jsx(P,{layout:"vertical",form:C,onFinish:A=>E(0,A.key,!0),children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Virtual Sessions...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx($,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{icon:e.jsx(nt,{}),onClick:y,disabled:!r.canManage,size:"large",children:"Create Virtual Session"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(le,{spinning:s,children:[e.jsx(Z,{itemLayout:"horizontal",dataSource:t,renderItem:A=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Te,{children:e.jsx(Z.Item,{actions:[e.jsx(ge,{trigger:["click"],overlay:e.jsxs(W,{children:[e.jsx(W.Item,{icon:e.jsx(qt,{}),disabled:!A.canJoin,onClick:()=>F("/oclass/virtual/class/session/"+A.id+"/"+A.token),children:e.jsx("a",{children:"Join"})}),A.canDelete?e.jsx(W.Item,{disabled:!A.canDelete,icon:e.jsx(Ve,{}),onClick:()=>K(A.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}):e.jsx(e.Fragment,{}),A.canEdit&&e.jsx(W.Item,{icon:e.jsx(St,{}),disabled:!A.canEdit,onClick:()=>l(A),children:e.jsx("a",{children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:V=>V.preventDefault(),children:e.jsx(Ce,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(ke,{avatar:!0,title:!1,loading:!1,active:!0,children:e.jsx(Z.Item.Meta,{avatar:e.jsx(ye,{}),title:e.jsx("a",{onClick:()=>A.canJoin?F("/oclass/virtual/class/session/"+A.id+"/"+A.token):g("You can't join this session"),children:A.name}),description:e.jsxs(e.Fragment,{children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:A.description}}),e.jsxs("p",{children:[e.jsxs(ne,{color:"green",children:["Start At:"," ",Nt(new Date(A.startDate),"MMMM do, yyyy H:mma")]}),e.jsxs(ne,{color:"green",children:["End In:"," ",Nt(new Date(A.endDate),"MMMM do, yyyy H:mma")]}),A.canJoin?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx(ne,{color:"red",children:"Not Joinable"})})]})]})})})})})},"class-virtual-session-item-container-"+A.id)}),x&&e.jsx("div",{style:{textAlign:"center",marginTop:12},children:e.jsx("button",{onClick:()=>{E(f+1)},children:"Load More"})})]})}),e.jsx(te,{title:"Creating Class Virtual Session",open:k,onClose:A=>q(A),width:"50vw",children:e.jsx(Lo,{form:U,onFinish:d})}),e.jsx(te,{title:"Editting "+(a==null?void 0:a.name),width:"40vw",open:z,onClose:A=>I(A),children:e.jsx(Gr,{form:j,darasa:a,onFinish:p})})]})};function vt(r){"@babel/helpers - typeof";return vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(r)}function Rr(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,a)}return n}function ir(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rr(Object(n),!0).forEach(function(a){$e(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}function $e(r,t,n){return t=Vo(t),t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function Vo(r){var t=Uo(r,"string");return vt(t)==="symbol"?t:String(t)}function Uo(r,t){if(vt(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var a=n.call(r,t||"default");if(vt(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var zo=function(t){var n,a=t.componentCls,i=t.colorBgContainer,s=t.fontSize,c=t.fontSizeSM,f=t.padding,u=t.paddingXS,C=t.marginSM,T=t.marginXXS,_=t.controlHeight,M=t.lineHeightSM,R=t.colorText,x=t.colorTextSecondary,w=t.colorTextTertiary,F=t.motionDurationSlow;return $e({},a,ir(ir({},ca(t)),{},(n={position:"relative",backgroundColor:i},$e(n,"".concat(a,"-inner"),{display:"flex",paddingBlock:f}),$e(n,"".concat(a,"-avatar"),{position:"relative",flexShrink:0,marginInlineEnd:C,cursor:"pointer",img:{width:_,height:_,borderRadius:"50%"}}),$e(n,"".concat(a,"-content"),{position:"relative",flex:"auto",minWidth:0,wordWrap:"break-word","&-author":{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",marginBottom:T,"& > a, & > span":{paddingInlineEnd:u,fontSize:c,lineHeight:M},"&-name":{color:x,fontSize:s,transition:"color ".concat(F),"> *":{color:x,"&:hover":{color:x}}},"&-time":{color:w,whiteSpace:"nowrap",cursor:"auto"}},"&-detail p":{whiteSpace:"pre-wrap",marginBlock:0}}),$e(n,"".concat(a,"-actions"),{marginTop:C,marginBottom:0,paddingInlineStart:0,"> li":{display:"inline-block",color:x,"> span":{marginInlineEnd:C,color:x,fontSize:c,cursor:"pointer",transition:"color ".concat(F),userSelect:"none","&:hover":{color:R}}}}),$e(n,"".concat(a,"-nested"),{marginInlineStart:44}),n)))};function Ho(r){var t=oa.useToken(),n=t.theme,a=t.token,i=t.hashId,s=o.useContext(Kr.ConfigContext),c=s.iconPrefixCls;return[la({theme:n,token:a,hashId:i,path:["compatible","Comment",r,c]},function(){var f=ir({componentCls:".".concat(r)},a);return[zo(f)]}),i]}function jt(r){"@babel/helpers - typeof";return jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(r)}var Yo=["actions","author","avatar","children","className","content","prefixCls","datetime"];function sr(){return sr=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},sr.apply(this,arguments)}function Wo(r,t,n){return t=Bo(t),t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function Bo(r){var t=$o(r,"string");return jt(t)==="symbol"?t:String(t)}function $o(r,t){if(jt(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var a=n.call(r,t||"default");if(jt(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Go(r,t){return Qo(r)||Jo(r,t)||Xo(r,t)||Ko()}function Ko(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xo(r,t){if(r){if(typeof r=="string")return Lr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lr(r,t)}}function Lr(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=r[n];return a}function Jo(r,t){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var a,i,s,c,f=[],u=!0,C=!1;try{if(s=(n=n.call(r)).next,t===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=s.call(n)).done)&&(f.push(a.value),f.length!==t);u=!0);}catch(T){C=!0,i=T}finally{try{if(!u&&n.return!=null&&(c=n.return(),Object(c)!==c))return}finally{if(C)throw i}}return f}}function Qo(r){if(Array.isArray(r))return r}function Zo(r,t){if(r==null)return{};var n=el(r,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(r,a)&&(n[a]=r[a])}return n}function el(r,t){if(r==null)return{};var n={},a=Object.keys(r),i,s;for(s=0;s<a.length;s++)i=a[s],!(t.indexOf(i)>=0)&&(n[i]=r[i]);return n}var tl=Kr.ConfigContext,rl=function(t){var n=t.actions,a=t.author,i=t.avatar,s=t.children,c=t.className,f=t.content,u=t.prefixCls,C=t.datetime,T=Zo(t,Yo),_=o.useContext(tl),M=_.getPrefixCls,R=_.direction,x=function(d,E){return o.createElement("div",{className:pr("".concat(d,"-nested"))},E)},w=M("comment",u),F=Ho(w),k=Go(F,2),q=k[0],U=k[1],z=i?o.createElement("div",{className:"".concat(w,"-avatar")},typeof i=="string"?o.createElement("img",{src:i,alt:"comment-avatar"}):i):null,I=n&&n.length?o.createElement("ul",{className:"".concat(w,"-actions")},n.map(function(p,d){return o.createElement("li",{key:"action-".concat(d)},p)})):null,j=(a||C)&&o.createElement("div",{className:"".concat(w,"-content-author")},a&&o.createElement("span",{className:"".concat(w,"-content-author-name")},a),C&&o.createElement("span",{className:"".concat(w,"-content-author-time")},C)),l=o.createElement("div",{className:"".concat(w,"-content")},j,o.createElement("div",{className:"".concat(w,"-content-detail")},f),I),y=pr(w,Wo({},"".concat(w,"-rtl"),R==="rtl"),c,U);return q(o.createElement("div",sr({},T,{className:y}),o.createElement("div",{className:"".concat(w,"-inner")},z,l),s?x(w,s):null))};const On=rl,nl=r=>new Promise((t,n)=>{const a=new FileReader;a.readAsDataURL(r),a.onload=()=>t(a.result),a.onerror=i=>n(i)}),al=r=>{const{data:t}=cr(),[n,a]=o.useState(!1),[i,s]=o.useState(""),[c,f]=o.useState(""),[u,C]=o.useState([]),[T,_]=o.useState(!0),[M,R]=o.useState(1);o.useState(25);const[x]=P.useForm(),[w,F]=o.useState(0),[k,q]=o.useState(0),[U,z]=o.useState(!0);Xr();const[I,j]=o.useState(!1),[l,y]=o.useState(""),p=o.useRef(null),d=o.useRef([]),[E,B]=o.useState([]),K=D=>{d.current[D-1].scrollIntoView({behavior:"smooth"})},A=()=>{p.current.scrollIntoView({behavior:"smooth"})},V=async(D,m="",v=25)=>{D===1&&(u.length=0,C([]));const{data:h}=await Y.custom({url:"",method:"get",meta:{operation:"darasaPostComments",variables:{page:{value:parseInt(D.toString()),type:"Int",required:!0},key:{value:m,type:"String",required:!1},postId:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},pageSize:{value:parseInt(v.toString()),type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","content","created","updated","isActive","canEdit","canDelete",{user:["id","firstName","lastName","middleName","fullName","email","pic"]},{post:["id"]},{medias:["id","media"]}]}]}}).catch(N=>(g.error("Error loading comments"),{data:null})).then(N=>N);h&&(q(h.total),F(h.pages),R(h.page+1),z(h.hasNext),C([...u,...h.results])),_(!1)},L=async D=>{j(!0);const{data:m}=await Y.custom({url:"",method:"post",meta:{operation:"createDarasaPostComment",variables:{postId:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},content:{value:D.content,type:"String",required:!0},photos:{value:E,type:"[Upload]",required:!1}},fields:["success","message",{comment:["id","content",{user:["id","firstName","lastName","middleName","fullName","email","pic"]},{post:["id","totalComments"]},{medias:["id","media"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}}).catch(v=>(g.error("Error submitting comment"),{data:null})).then(v=>v);j(!1),y(""),m&&(m.success?(B([]),C([...u,m.comment]),A(),r.updateTotalComment(r==null?void 0:r.id,1)):g.error(m.message))},H=async(D,m)=>{const{data:v}=await Y.custom({url:"",method:"post",meta:{operation:"deleteDarasaPostComment",variables:{id:{value:D,type:"Int",required:!0}},fields:["success","message"]}}).catch(h=>(g.error("Error deleting comment"),{data:null})).then(h=>h);v&&(v.success?(g.success(v.message),C(u.filter(h=>h.id!==D)),r.updateTotalComment(r==null?void 0:r.id,-1),K(m)):g.error(v.message))},b=e.jsxs("div",{children:[e.jsx(Qr,{}),e.jsx("div",{style:{marginTop:8},children:"Photo"})]}),S=async D=>{!D.url&&!D.preview&&(D.preview=await nl(D.originFileObj)),s(D.url||D.preview),a(!0),f(D.name||D.url.substring(D.url.lastIndexOf("/")+1))},O=({fileList:D})=>{B(D)};return o.useEffect(()=>{V(1),A()},[r.id,r.randKey]),e.jsxs(e.Fragment,{children:[e.jsx("div",{id:"scrollableDiv",style:{height:"58vh",overflow:"auto"},children:e.jsxs(le,{spinning:T,children:[e.jsx("div",{ref:p}),e.jsx(Z,{className:"comment-list",header:`${u.length} replies`,itemLayout:"horizontal",dataSource:u,renderItem:(D,m)=>e.jsx(Z.Item,{ref:v=>{d.current[m]=v},extra:[e.jsx(ge,{overlay:e.jsxs(W,{children:[e.jsx(W.Item,{icon:e.jsx(Ve,{}),disabled:!D.canDelete,children:e.jsx(ot,{placement:"topLeft",title:"Are you sure to delete this comment?",onConfirm:()=>H(D.id,m),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})},"delete-post-comment"+D.id),D.canManage?e.jsx(e.Fragment,{}):e.jsx(W.Item,{icon:e.jsx(Pe,{}),children:e.jsx("a",{onClick:()=>g("Under construction"),children:"Report"})},"report-post-comment"+D.id)]}),trigger:["click"],placement:"bottomRight",arrow:!0,overlayStyle:{zIndex:9999},children:e.jsx(G,{children:e.jsx(Ce,{})})})],actions:[],children:e.jsx(Z.Item.Meta,{avatar:e.jsx(ye,{src:D.user.pic}),title:e.jsx("a",{children:D.user.fullName}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:D.user.bio}),e.jsx("span",{dangerouslySetInnerHTML:{__html:D.content}}),e.jsx("div",{children:D.medias.length>0&&e.jsx(J,{children:e.jsx($,{span:24,children:e.jsx(yt.PreviewGroup,{children:D.medias.map(v=>e.jsx(yt,{preview:{visible:!0,zIndex:99999,bodyStyle:{zIndex:99999,zIndexPopup:99999}},style:{padding:10,display:"inline"},width:100,src:v.media}))})})})}),e.jsxs("span",{style:{color:"orange",display:"block"},children:[": Posted ",se(D.created).fromNow()]})]})})},"post-comment-"+D.id)}),U&&e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(G,{onClick:()=>V(M,"",25),children:"Load More"})})]})}),e.jsx(On,{avatar:e.jsx(ye,{src:t.pic,alt:"Han Solo"}),content:e.jsxs(P,{form:x,onFinish:D=>{D.content=l,L(D),x.resetFields()},children:[e.jsx("div",{children:e.jsx(Ne.CKEditor,{disabled:I,editor:_e,data:l,onReady:D=>{D.editing.view.change(m=>{m.setStyle("min-height","75px",D.editing.view.document.getRoot())})},onChange:(D,m)=>{const v=m.getData();y(v)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})}),e.jsx("div",{style:{marginTop:10},children:e.jsx(lr,{multiple:!0,name:"photos",accept:Jr.supported_image_extensions.join(),beforeUpload:()=>!1,listType:"picture-card",fileList:E,maxCount:3,onPreview:D=>{S(D)},onChange:O,children:E.length>=3?null:b})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{size:"large",loading:I,onClick:()=>x.submit(),type:"primary",disabled:l.length===0,children:"Publish Comment"})})]})}),e.jsx(te,{open:n,title:c,onClose:D=>a(D),children:e.jsx("img",{alt:"example",style:{width:"100%"},src:i})})]})},{Text:qr}=bt,il=r=>new Promise((t,n)=>{const a=new FileReader;a.readAsDataURL(r),a.onload=()=>t(a.result),a.onerror=i=>n(i)}),sl=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState(""),[s,c]=o.useState(""),[f,u]=o.useState([]),[C,T]=o.useState(),[_,M]=o.useState(!0),[R,x]=o.useState(!1),[w,F]=o.useState(1),[k,q]=o.useState(0),[U,z]=o.useState(!0),{data:I}=cr(),[j,l]=o.useState(""),[y,p]=o.useState(!1),[d,E]=o.useState([]),B=m=>{T(m),p(!0)},K=async(m,v="")=>{const{data:h}=await Y.custom({url:"",method:"get",meta:{operation:"darasaPosts",variables:{id:{value:parseInt(r.id.toString()),type:"Int",required:!0},page:{value:m,type:"Int",required:!0},key:{value:v,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","slug","content","isPublic","created","updated","isActive","isLiked","canEdit","canDelete","totalLikes","totalComments","canManage",{user:["id","firstName","lastName","middleName","fullName","email","pic"]},{medias:["id","media"]}]}]}}).catch(N=>(g.error("Error loading posts"),{data:null})).then(N=>N);h&&(q(h.total),F(h.page+1),z(h.hasNext),u(h.results)),M(!1)};o.useEffect(()=>{K(w)},[]);const A=async()=>{x(!0);const{data:m}=await Y.custom({url:"",method:"post",meta:{operation:"createDarasaPost",variables:{id:{value:parseInt(r.id.toString()),type:"Int",required:!0},content:{value:j,type:"String",required:!0},photos:{value:d,type:"[Upload]",required:!0}},fields:["success","message",{post:["id","slug","content","isPublic","created","updated","isActive","isLiked","canEdit","canDelete","totalLikes","totalComments","canManage",{user:["id","firstName","lastName","middleName","fullName","email","pic"]},{medias:["id","media"]}]}]}}).catch(v=>(g.error("Error creating post"),{data:null})).then(v=>v);x(!1),m&&m.success&&(l(""),u([m.post,...f]),E([]),g.success(m.message))},V=async m=>{const{data:v}=await Y.custom({url:"",method:"post",meta:{operation:"deleteDarasaPost",variables:{id:{value:parseInt(m.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(h=>(g.error("Error deleting post"),{data:null})).then(h=>h);v&&(v.success?(g.success(v.message),u(f.filter(h=>h.id!==m))):g.error(v.message))},L=m=>{me.confirm({title:"Deleting Post",icon:e.jsx(he,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>V(m)})},H=async m=>{const{data:v}=await Y.custom({url:"",method:"post",meta:{operation:"addDarasaPostLike",variables:{id:{value:parseInt(m.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(h=>(g.error("Error liking post"),{data:null})).then(h=>h);if(v)if(v.success){const h=f.map(N=>N.id===m?{...N,isLiked:!0,totalLikes:N.totalLikes+1}:N);u(h)}else g.error(v.message)},b=async(m,v)=>{const h=f.map(N=>N.id===m?{...N,totalComments:N.totalComments+v}:N);u(h)},S=e.jsxs("div",{children:[e.jsx(Qr,{}),e.jsx("div",{style:{marginTop:8},children:"Photo"})]}),O=async m=>{!m.url&&!m.preview&&(m.preview=await il(m.originFileObj)),i(m.url||m.preview),n(!0),c(m.name||m.url.substring(m.url.lastIndexOf("/")+1))},D=({fileList:m})=>{E(m)};return e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx($,{span:24,children:e.jsx("div",{id:"scrollableDiv",style:{height:"80vh",overflow:"auto"},children:e.jsxs(Ut,{dataLength:k,next:()=>K(w),hasMore:U,scrollableTarget:"scrollableDiv",loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(le,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:f.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:[e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(On,{avatar:e.jsx(ye,{src:I==null?void 0:I.pic,alt:I==null?void 0:I.fullName}),style:{padding:0,border:"1",borderColor:"silver"},content:e.jsxs("div",{children:[e.jsx(Ne.CKEditor,{disabled:R,editor:_e,data:j,onReady:m=>{m.editing.view.change(v=>{v.setStyle("min-height","100px",m.editing.view.document.getRoot())})},onChange:(m,v)=>{const h=v.getData();l(h)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{children:e.jsx(lr,{multiple:!0,name:"photos",accept:Jr.supported_image_extensions.join(),beforeUpload:()=>!1,listType:"picture-card",fileList:d,maxCount:7,onPreview:m=>{O(m)},onChange:D,children:d.length>=7?null:S})}),e.jsx("span",{style:{display:"flex",justifyContent:"flex-end",padding:0},children:e.jsx(G,{size:"large",htmlType:"submit",loading:R,type:"primary",disabled:!j,style:{marginTop:10},onClick:()=>A(),children:"Post"})})]})},"comment-header-")}),e.jsx(Z,{itemLayout:"vertical",size:"large",dataSource:f,loading:_,renderItem:m=>e.jsxs(Z.Item,{extra:[e.jsx(ge,{overlay:e.jsxs(W,{children:[e.jsx(W.Item,{icon:e.jsx(Ve,{}),disabled:!m.canDelete,children:e.jsx("a",{onClick:()=>L(m.id),children:"Delete"})},"delete-post-"+m.id),m.canManage?e.jsx(e.Fragment,{}):e.jsx(W.Item,{icon:e.jsx(Pe,{}),children:e.jsx("a",{onClick:()=>g("Under construction"),children:"Report"})},"report-post"+m.id)]}),trigger:["click"],placement:"bottomRight",arrow:!0,overlayStyle:{zIndex:9999},children:e.jsx(G,{children:e.jsx(Ce,{})})})],actions:[e.jsx("a",{onClick:()=>H(m.id),children:e.jsxs(Se,{children:[m.isLiked?e.jsx(da,{style:{color:"red"}}):e.jsx(ua,{style:{color:"red"}}),e.jsx(qr,{children:m.totalLikes})]})}),e.jsx("a",{onClick:()=>B(m),children:e.jsxs(Se,{children:[e.jsx(ma,{}),e.jsx(qr,{children:m.totalComments})]})})],children:[e.jsx(Z.Item.Meta,{avatar:e.jsx(ye,{src:m.user.pic}),title:e.jsx("a",{children:m.user.fullName}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:m.user.bio}),e.jsxs("span",{style:{color:"orange"},children:[": Posted ",se(m.created).fromNow()]})]})}),e.jsx("span",{dangerouslySetInnerHTML:{__html:m.content}}),e.jsx("div",{children:e.jsx(J,{children:e.jsx($,{span:24,children:e.jsx(yt.PreviewGroup,{children:m.medias.map(v=>e.jsx(yt,{style:{padding:10,display:"inline"},width:300,src:v.media}))})})})})]},m.slug+m.id)})]})})}),e.jsx($,{span:6})]}),e.jsx(Ct,{title:"Comments",anchor:"right",width:"40vw",open:y,onClose:m=>p(m),children:e.jsx(al,{id:C==null?void 0:C.id,randKey:Math.random(),updateTotalComment:b})}),e.jsx(te,{visible:t,title:s,footer:null,onCancel:()=>n(!1),destroyOnClose:!0,children:e.jsx("img",{alt:"example",style:{width:"100%"},src:a})})]})},ol=r=>{const[t,n]=o.useState(""),[a]=P.useForm(),i=async s=>{const{data:c}=await Y.custom({url:"",method:"post",meta:{operation:"createDarasaTopic",variables:{darasaId:{value:parseInt(r.darasa),type:"Int",required:!0},title:{value:s.title,type:"String",required:!0},description:{value:s.description,type:"String",required:!0},startDate:{value:se(s.start_date).format("YYYY-MM-DD"),type:"String",required:!1},minutes:{value:s.minutes,type:"Int",required:!1}},fields:["success","message",{topic:["id","title","description","created","canEdit","startDate","endDate","canDelete","updated","isActive","canEdit","canDelete","canManage",{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]},{subtopics:["id","title","description","canManage","canEdit","canDelete","isActive"]},{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]}]}]}}).catch(f=>(g.error("Error creating topic"),{data:null})).then(f=>f);c&&(c.success?(g.success(c.message),r.onFinish(c.topic),a.resetFields()):g.error(c.message))};return e.jsx(e.Fragment,{children:e.jsxs(P,{layout:"vertical",form:a,onFinish:s=>{s.description=t,i(s)},onReset:()=>{n("")},requiredMark:!1,children:[e.jsx(P.Item,{name:"title",label:"Topic Title",rules:[{required:!0,type:"string",message:"Enter Topic Title ..."}],children:e.jsx(ee,{size:"large",placeholder:"Enter Topic Title ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(Ne.CKEditor,{editor:_e,data:t,onReady:s=>{s.editing.view.change(c=>{c.setStyle("min-height","150px",s.editing.view.document.getRoot())})},onChange:(s,c)=>{const f=c.getData();n(f)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(P.Item,{label:"Start Date",name:"start_date",rules:[{required:!!a.getFieldValue("minutes"),type:"object",message:"Please select Start Date"}],children:e.jsx(Qe,{size:"large",style:{width:"50%"},disabledDate:s=>s.add(1,"day")<se().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(P.Item,{label:"Total Duration (Minutes)",name:"minutes",rules:[{required:!1,type:"number",message:"Please enter total duration in minutes"}],children:e.jsx(We,{style:{width:"35%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},ll=r=>{const[t,n]=o.useState(""),[a]=P.useForm(),i=async s=>{const{data:c}=await Y.custom({url:"",method:"post",meta:{operation:"createDarasaSubtopic",variables:{topicId:{value:parseInt(r.topic.id),type:"Int",required:!0},title:{value:s.title,type:"String",required:!0},description:{value:s.description,type:"String",required:!0},startDate:{value:se(s.start_date).format("YYYY-MM-DD"),type:"String",required:!1},minutes:{value:s.minutes,type:"Int",required:!1}},fields:["success","message",{topic:["id","title","description","created","canEdit","startDate","endDate","canDelete","updated","isActive","canEdit","canDelete","canManage",{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]},{subtopics:["id","title","description","canManage","canEdit","canDelete","isActive"]},{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]}]}]}}).catch(f=>(g.error("Error creating topic"),{data:null})).then(f=>f);c&&(c.success?(g.success(c.message),r.onFinish(c.topic),a.resetFields()):g.error(c.message))};return e.jsx(e.Fragment,{children:e.jsxs(P,{layout:"vertical",form:a,onFinish:s=>{s.description=t,i(s)},requiredMark:!1,children:[e.jsx(P.Item,{name:"title",label:"Topic Title",rules:[{required:!0,type:"string"}],children:e.jsx(ee,{size:"large",placeholder:"Enter Topic Title ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(Ne.CKEditor,{editor:_e,data:t,onReady:s=>{s.editing.view.change(c=>{c.setStyle("min-height","150px",s.editing.view.document.getRoot())})},onChange:(s,c)=>{const f=c.getData();n(f)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(P.Item,{label:"Start Date",name:"start_date",rules:[{required:!1,type:"object",message:"Please select Start Date"}],children:e.jsx(Qe,{size:"large",style:{width:"50%"},disabledDate:s=>s.add(1,"day")<se().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(P.Item,{label:"Total Duration (Minutes)",name:"minutes",rules:[{required:!1,type:"number",message:"Enter Total Duration (Minutes)"}],children:e.jsx(We,{style:{width:"50%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})};function cl(r){return Sa({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h8zM4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4z"}},{tag:"path",attr:{d:"M8 4.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5zM8 6a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 3a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-3.5 1.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"}}]})(r)}const{TreeNode:Vr,DirectoryTree:dl}=Ca,{Panel:ul}=rn,ml=r=>{const[t,n]=o.useState([]),[a,i]=o.useState([]),[s,c]=o.useState(),[f,u]=o.useState(!0),[C,T]=o.useState(1),[_,M]=o.useState(0),[R,x]=o.useState(0),[w,F]=o.useState(!0),[k]=P.useForm(),[q,U]=o.useState(void 0);de();const I=!Zr.useBreakpoint().lg,[j,l]=o.useState(!1),[y,p]=o.useState(!1),d=()=>{l(!0)},E=async(m,v="",h=!1)=>{const{data:N}=await Y.custom({url:"",method:"get",meta:{operation:"darasaTopics",variables:{page:{value:m,type:"Int",required:!0},key:{value:v,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","description","created","canEdit","startDate","endDate","minutes","canDelete","updated","isActive","canEdit","canDelete","canManage",{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]},{subtopics:["id","title","description","startDate","endDate","minutes","canManage","canEdit","canDelete","isActive"]},{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]}]}]}}).catch(X=>(g.error("Error fetching Topics"),{data:null})).then(X=>X);N&&(x(N.total),M(N.pages),T(N.page),F(N.hasNext),n(N.results),i(N.results)),u(!1)},B=async m=>{const{data:v}=await Y.custom({url:"",method:"post",meta:{operation:"deleteDarasaTopic",variables:{id:{value:m,type:"Int",required:!0}},fields:["success","message"]}}).catch(h=>(g.error("Error removing class Topic"),{data:null})).then(h=>h);v&&(v.success?(g.success(v.message),n(t.filter(h=>h.id!==m)),i(a.filter(h=>h.id!==m))):g.error(v.message))},K=async(m,v)=>{const{data:h}=await Y.custom({url:"",method:"post",meta:{operation:"deleteDarasaTopic",variables:{id:{value:m,type:"Int",required:!0}},fields:["success","message"]}}).catch(N=>(g.error("Error removing class Topic"),{data:null})).then(N=>N);if(h)if(h.success){g.success(h.message);const N=[...t],X=N.findIndex(De=>De.id===v),ae=N[X].subtopics.findIndex(De=>De.id===m);ae!==-1&&N[X].subtopics.splice(ae,1),n(N);const Fe=[...a],qe=N.findIndex(De=>De.id===v);if(qe!==-1){const De=N[qe].subtopics.findIndex(ze=>ze.id===m);De!==-1&&Fe[qe].subtopics.splice(De,1),i(Fe)}}else g.error(h.message)},A=m=>{me.confirm({title:"Deleting Topic",icon:e.jsx(he,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>B(m)})},V=(m,v)=>{me.confirm({title:"Deleting Subtopic",icon:e.jsx(he,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>K(m,v)})},L=m=>{c(m),p(!0)},H=async m=>{n([m,...t]),a.length===t.length&&i([m,...a])},b=async m=>{n(t.map(v=>v.id===m.id?m:v)),i(a.map(v=>v.id===m.id?m:v))},S=m=>{const v=t.filter(h=>h.id===parseInt(m));i(v)},O=()=>e.jsx(pa,{description:"No topic Registered ..."}),D=m=>m.subtopics.map(v=>e.jsx(ul,{extra:[e.jsx("div",{style:{right:0,zIndex:99999},children:e.jsx(ge,{trigger:["click"],overlay:e.jsxs(W,{children:[e.jsx(W.Item,{icon:e.jsx(Pe,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(W.Item,{icon:e.jsx(it,{}),onClick:()=>V(v.id,m.id),disabled:!r.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:h=>h.preventDefault(),children:e.jsx(Ce,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})],header:e.jsx("div",{children:e.jsxs("span",{children:[v.title,v.minutes>0&&e.jsxs(ne,{color:"green",children:[v.minutes," ",v.minutes>1?"Mins":"Min"]})]})}),children:e.jsx("div",{dangerouslySetInnerHTML:{__html:v.description}})},v.id));return o.useEffect(()=>{E(C)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx($,{span:6,children:e.jsxs(Te,{style:{marginRight:5},children:[t.length===0&&e.jsx(e.Fragment,{children:O()}),e.jsx(dl,{multiple:!0,defaultExpandedKeys:[],onExpand:(m,v)=>{const h=v.node.key;if(h&&h.toString().includes("topic")){U(h);const N=h.toString().split("-")[1];S(N)}else if(!(h&&h.toString().includes("sub")))i(t);else{const N=h.toString().split(":")[0];U(N);const X=N.toString().split("-")[1];S(X)}},children:t.map((m,v)=>e.jsx(Vr,{icon:e.jsx(gr,{}),title:m.title,children:m.subtopics.map(h=>e.jsx(Vr,{icon:e.jsx(gr,{}),title:h.title},"topic-"+m.id+":sub-"+h.id))},"topic-"+m.id))})]})}),e.jsxs($,{span:18,children:[e.jsxs(J,{children:[e.jsx($,{span:12,children:e.jsx(P,{layout:"vertical",form:k,onFinish:m=>{T(0),E(0,m.key,!0)},children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Topics(s)...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx($,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{icon:e.jsx(Lt,{}),size:"large",onClick:d,disabled:!r.canManage,children:"Add Topic"})})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[a.length>0?e.jsx(J,{align:"top",children:a.map((m,v)=>e.jsx($,{span:24,style:{marginTop:v===0?0:10},children:e.jsxs(Te,{hoverable:m.isActive,style:{marginRight:10},title:e.jsxs("div",{children:[e.jsxs("span",{children:[e.jsx("span",{style:{fontSize:22},children:m.title}),m.minutes>0&&e.jsx("span",{style:{marginLeft:10},children:e.jsx(Ee,{color:"green",title:e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:["Starts:"," ",se(m.startDate).format("DD/MM/YYYY hh:mm a")]}),e.jsxs(ne,{children:["Ends:"," ",se(m.endDate).format("DD/MM/YYYY hh:mm a")]})]}),children:e.jsxs(ne,{color:"green",children:[m.minutes," ",m.minutes>1?"Mins":"Min"]})})})]}),e.jsx(Se,{style:{right:0,position:"absolute"},children:e.jsx(ge,{trigger:["click"],overlay:e.jsxs(W,{children:[e.jsx(W.Item,{icon:e.jsx(en,{}),disabled:!m.canManage,children:e.jsx("a",{onClick:()=>L(m),children:"Add Subtopics"})}),e.jsx(W.Item,{icon:e.jsx(Yr,{}),disabled:!0,children:e.jsx("a",{onClick:()=>L(m),children:"Add Documents"})}),e.jsx(W.Item,{icon:e.jsx(ha,{}),disabled:!0,children:e.jsx("a",{onClick:()=>L(m),children:"Add Videos"})}),e.jsx(W.Item,{icon:e.jsx(cl,{}),disabled:!0,children:e.jsx("a",{onClick:()=>L(m),children:"Add Audios"})}),e.jsx(W.Item,{icon:e.jsx(Pe,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(W.Item,{icon:e.jsx(it,{}),onClick:()=>A(m.id),disabled:!r.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:h=>h.preventDefault(),children:e.jsx(Ce,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})]}),children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:m.description}}),m.subtopics.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsxs($,{span:24,style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:20,fontWeight:"bolder"},children:"Subtopics"}),m.canManage&&e.jsx(G,{disabled:!m.canManage,icon:e.jsx(fa,{}),onClick:()=>L(m),children:"Add Subtopic"})]})}),e.jsx(rn,{defaultActiveKey:["1"],accordion:!0,children:D(m)})]})]})}))}):e.jsx(Te,{children:e.jsx(J,{justify:"center",children:e.jsx($,{children:O()})})}),w&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{onClick:()=>E(C+1),disabled:!w,children:"Load More"})})]})]})]}),e.jsx(te,{title:"Adding Topics",open:j,onClose:m=>l(m),width:I?"100vw":"50vw",children:e.jsx(ol,{darasa:r.id,onFinish:H})}),e.jsx(te,{title:"Add Subtopics to "+(s==null?void 0:s.title),open:y,onClose:m=>p(m),width:I?"100vw":"50vw",children:e.jsx(ll,{topic:s,onFinish:b})})]})},hl=r=>{o.useState();const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1),[f,u]=o.useState(0),[C,T]=o.useState(0),[_,M]=o.useState(!0),[R]=P.useForm();de(),o.useState(!1),o.useState(!1);const x=async(w,F="",k=!1)=>{const{data:q}=await Y.custom({url:"",method:"get",meta:{operation:"darasaOrders",variables:{page:{value:w,type:"Int",required:!0},key:{value:F,type:"String",required:!1},darasaId:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},paid:{value:!0,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","receiptNumber","phone","amount","paymentDate","canDelete","canEdit","canManage",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(U=>(g.error("Error fetching Class Payments"),{data:null})).then(U=>U);console.log(q),q&&(T(q.total),u(q.pages),c(q.page),M(q.hasNext),n(q.results)),i(!1)};return o.useEffect(()=>{x(s)},[]),a?e.jsx(e.Fragment,{children:e.jsx(ke,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx($,{span:12,children:e.jsx(P,{layout:"vertical",form:R,onFinish:w=>{c(0),x(0,w.key,!0)},children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Payment(s)...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[e.jsx(Z,{itemLayout:"horizontal",dataSource:t,locale:{emptyText:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(he,{style:{fontSize:20}})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("p",{children:"No Payments found"})})]})},renderItem:w=>e.jsx(Z.Item,{children:e.jsx(Z.Item.Meta,{avatar:e.jsx(ye,{src:w.user.pic}),title:e.jsxs("a",{children:[w.user.fullName,e.jsxs(ne,{color:"green",style:{marginLeft:10},children:[w.amount," TSH"]})]}),description:w.user.email})},w.id)}),_&&e.jsx("div",{style:{textAlign:"center",marginTop:12},children:e.jsx("button",{onClick:()=>{x(s+1)},children:"Load More"})})]})]})},fl=r=>{const[t,n]=o.useState(!0),[a,i]=o.useState([]);P.useForm();const s=async(f,u="",C=!1)=>{n(!0),await Y.custom({url:"",method:"get",meta:{operation:"darasaOrders",variables:{page:{value:f,type:"Int",required:!0},key:{value:u,type:"String",required:!1},darasaId:{value:parseInt(r.darasa===void 0?"0":r.darasa.toString()),type:"Int",required:!0},paid:{value:!0,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","receiptNumber","phone","amount","paymentDate","canDelete","canEdit","canManage",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(T=>(g.error("Error getting supported carriers"),{data:null})).then(T=>T),n(!1)},c=[{title:"Student Name",dataIndex:"studentName",key:"studentName",rebnder:(f,u)=>e.jsx(e.Fragment,{children:u.darasa.user.fullName})},{title:"Receipt Number",dataIndex:"receiptNumber",key:"receiptNumber",render:(f,u)=>e.jsx(e.Fragment,{children:u.receiptNumber})},{title:"Amount",dataIndex:"amount",key:"amount",render:(f,u)=>e.jsx(e.Fragment,{children:u.amount})}];return o.useEffect(()=>{s(1)},[r.randKey]),e.jsx(e.Fragment,{children:e.jsx(nn,{loading:t,dataSource:a,columns:c,locale:{emptyText:"No Payments yet"}})})},pl=r=>{const[t,n]=o.useState(!1);P.useForm();const a=async()=>{await Y.custom({url:"",method:"get",meta:{operation:"paymentSupportedTelecomCarriers",variables:{},fields:[{results:["id","name"]}]}}).catch(i=>(g.error("Error getting supported carriers"),{data:null})).then(i=>i)};return o.useEffect(()=>{a()},[r.randKey]),e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(J,{children:e.jsxs($,{span:24,children:[e.jsx(ga,{title:"Total Amount to be Disbursed (Approximate)",value:112893,precision:2}),e.jsx(G,{style:{marginTop:16},type:"primary",onClick:()=>n(!0),children:"View Details"})]})})}),e.jsx(Ct,{title:"Disbursement Details",anchor:"right",width:"40vw",onClose:i=>n(i),open:t,children:e.jsx(fl,{darasa:r.darasa,randKey:Math.random()})})]})},gl=r=>{o.useState();const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1),[f,u]=o.useState(0),[C,T]=o.useState(0),[_,M]=o.useState(!0),[R]=P.useForm();de();const[x,w]=o.useState(!1);o.useState(!1);const F=async(k,q="",U=!1)=>{const{data:z}=await Y.custom({url:"",method:"get",meta:{operation:"darasaOrderDisbursements",variables:{page:{value:k,type:"Int",required:!0},key:{value:q,type:"String",required:!1},darasaId:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},paid:{value:!0,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","receiptNumber","disbursementNumber","disbursementDate","status","amount","canDelete","canEdit","canManage",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(I=>(g.error("Error fetching Class Disbursements"),{data:null})).then(I=>I);console.log(z),z&&(T(z.total),u(z.pages),c(z.page),M(z.hasNext),n(z.results)),i(!1)};return o.useEffect(()=>{F(s)},[]),a?e.jsx(e.Fragment,{children:e.jsx(ke,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx($,{span:12,children:e.jsx(P,{layout:"vertical",form:R,onFinish:k=>{c(0),F(0,k.key,!0)},children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Payment(s)...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx($,{span:12,style:{textAlign:"right"},children:e.jsx(G,{size:"large",disabled:!r.canManage,icon:e.jsx(ya,{}),onClick:()=>w(!0),children:"Create Disbursement"})})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[e.jsx(Z,{itemLayout:"horizontal",dataSource:t,locale:{emptyText:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(he,{style:{fontSize:20}})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("p",{children:"No Disbursement found"})})]})},renderItem:k=>e.jsxs(Z.Item,{children:[e.jsx(Z.Item.Meta,{avatar:e.jsx(ye,{src:k.user.pic}),title:e.jsxs("a",{children:[k.user.fullName,e.jsxs(ne,{color:"green",style:{marginLeft:10},children:[k.amount," TSH"]})]}),description:k.user.email}),"first"]},k.id)}),_&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{onClick:()=>F(s+1),disabled:!_,children:"Load More"})})]}),e.jsx(te,{title:"Create Disbursement",open:x,width:"50vw",onClose:k=>w(k),children:e.jsx(pl,{darasa:r.id,randKey:Math.random()})})]})},{TabPane:Me}=tn,yl=r=>{const[t,n]=o.useState(),[a,i]=o.useState(!0),[s,c]=o.useState("1"),{push:f}=de(),u=Vt(),C=async T=>{const{data:_}=await Y.custom({url:"",method:"get",meta:{operation:"darasa",variables:{id:{value:parseInt(T.toString()),type:"Int",required:!0}},fields:["id","name","code","created","canEdit","canDelete","canManage","updated","isActive","isAuthor","isConnected","isBlocked","payable","price","startDate","endDate"]}}).catch(()=>(g.error("Error fetching darasa"),{data:null})).then(M=>M);_&&(n(_),i(!1))};return o.useEffect(()=>{C(u.id),localStorage.getItem("currentClass")===u.id.toString()?c(localStorage.getItem("classCurrentTabIndex")??"1"):(localStorage.setItem("currentClass",u.id.toString()),c("1"))},[u.id]),e.jsx(e.Fragment,{children:e.jsxs(le,{spinning:a,children:[e.jsx("div",{style:{marginTop:5,marginBottom:5},children:e.jsxs(Ye,{children:[e.jsx(Ye.Item,{children:e.jsx("a",{onClick:()=>f("/oclass"),children:"Home"})}),e.jsx(Ye.Item,{children:e.jsx("a",{onClick:()=>f("/oclass"),children:"Classes"})}),e.jsxs(Ye.Item,{children:["Class Session",e.jsx(Rt,{}),t!=null&&t.name?e.jsxs("span",{style:{color:"orange"},children:[t==null?void 0:t.name," - ","{"+(t==null?void 0:t.code)+"}"]}):e.jsx(e.Fragment,{})]})]})}),(t==null?void 0:t.isBlocked)&&e.jsx(Je,{severity:"warning",sx:{fontSize:18},children:"You have been blocked from this class, please contact the class owner for more information."}),!(t!=null&&t.isBlocked)&&e.jsx("div",{style:{marginTop:10,background:"white",padding:10},children:e.jsxs(tn,{type:"card",tabBarExtraContent:e.jsx(G,{icon:e.jsx(xa,{}),disabled:!(t!=null&&t.canManage),children:"Configs"}),activeKey:s,onTabClick:T=>{c(T.toString()),localStorage.setItem("classCurrentTabIndex",T)},children:[e.jsx(Me,{tab:"Class Feeds",children:e.jsx(sl,{id:u.id,canManage:t==null?void 0:t.canManage})},"1"),e.jsx(Me,{tab:"Files",children:e.jsx(Ua,{id:u.id,canManage:t==null?void 0:t.canManage})},"2"),e.jsx(Me,{tab:"Connected Drives",children:e.jsx(Va,{id:u.id,canManage:t==null?void 0:t.canManage})},"3"),e.jsx(Me,{tab:"Topics",children:e.jsx(ml,{id:u.id,canManage:t==null?void 0:t.canManage})},"12"),e.jsx(Me,{tab:"Resources Links",children:e.jsx(Ha,{id:u.id,canManage:t==null?void 0:t.canManage})},"4"),e.jsx(Me,{tab:"Videos",children:e.jsx(js,{id:u.id,canManage:t==null?void 0:t.canManage})},"5"),e.jsx(Me,{tab:"Virtual Sessions",disabled:!1,children:e.jsx(qo,{id:u.id,canManage:t==null?void 0:t.canManage})},"6"),e.jsx(Me,{tab:"Assignments",disabled:!1,children:e.jsx(La,{id:u.id,canManage:t==null?void 0:t.canManage})},"7"),e.jsx(Me,{tab:"Announcements",children:e.jsx(Fa,{id:u.id,canManage:t==null?void 0:t.canManage})},"8"),e.jsx(Me,{tab:"Students",children:e.jsx(Ba,{id:u.id,canManage:t==null?void 0:t.canManage})},"9"),(t==null?void 0:t.payable)&&(t==null?void 0:t.canManage)&&e.jsxs(e.Fragment,{children:[e.jsx(Me,{tab:"Payments",children:e.jsx(hl,{id:u.id,canManage:t==null?void 0:t.canManage})},"10"),e.jsx(Me,{tab:"Disbursements",children:e.jsx(gl,{id:u.id,canManage:t==null?void 0:t.canManage})},"11")]})]})})]})})},En=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState(!1),[s,c]=o.useState(""),[f,u]=o.useState([]),[C,T]=o.useState("");o.useState(!1),o.useState(!1);const[_]=P.useForm(),M=async()=>{const{data:x}=await Y.custom({url:"",method:"get",meta:{operation:"paymentSupportedTelecomCarriers",variables:{},fields:[{results:["id","name"]}]}}).catch(w=>(g.error("Error getting supported carriers"),{data:null})).then(w=>w);if(x){const w=x.results,F=[];w.forEach(k=>{F.push(k.name)}),u(F)}},R=async x=>{n(!0);const{data:w}=await Y.custom({url:"",method:"post",meta:{operation:"validateMobilePhoneNumber",variables:{phone:{value:x,type:"String",required:!0}},fields:["success","message","carrier","formattedPhone"]}}).catch(F=>(g.error("Error Validating Mobile Phone Number"),{data:null})).then(F=>F);return w&&(i(w.success),w.success||(c(w.message),T(w.carrier))),n(!1),w};return o.useEffect(()=>{M()},[r.randKey]),e.jsxs("div",{children:[e.jsxs(ue,{title:"",column:1,children:[e.jsx(ue.Item,{label:"Class Name",children:r.darasa.name}),e.jsx(ue.Item,{label:"Class Code",children:r.darasa.code}),e.jsx(ue.Item,{label:"Cost",children:e.jsxs("span",{style:{fontSize:22},children:[r.darasa.price.toLocaleString(),"/= Tsh"]})}),e.jsx(ue.Item,{label:"Description",children:r.darasa.description})]}),e.jsxs(P,{layout:"vertical",form:_,onFinish:x=>{},requiredMark:!0,autoComplete:"off",children:[e.jsx(P.Item,{name:"phone",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Mobile Phone Number"}),C.length>0&&e.jsx(ne,{color:"green",style:{marginLeft:10},children:C}),t&&e.jsx(le,{spinning:t})]}),rules:[{required:!0,type:"string",message:"Required"},{validator:async(x,w)=>{if(w.length>=10){if(!t){const F=await R(w).then(k=>k);if(F!=null&&F.success)T(F.carrier),i(!0);else return T(""),Promise.reject(F==null?void 0:F.message)}}else i(!1)}}],children:e.jsx(ee,{size:"large",placeholder:"Mobile Phone Number ..."})}),f.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{children:"Supported Payment Merchants"}),e.jsx("span",{children:f.map(x=>e.jsx(ne,{color:"red",children:x}))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",disabled:!a,children:"Pay"})})]})]})},xl=()=>{const[r,t]=o.useState(!0),[n,a]=o.useState(!1),[i,s]=o.useState(),[c,f]=o.useState(!1),u=Vt(),C=async _=>{t(!0);const{data:M}=await Y.custom({url:"",method:"post",meta:{operation:"checkDarasaConnected",variables:{id:{value:parseInt(_.toString()),type:"Int",required:!0}},fields:["success","message",{darasa:["id","name","code","created","canEdit","canDelete","canManage","updated","isActive","isAuthor","isConnected","payable","price","startDate","endDate",{user:["id","firstName","middleName","lastName","fullName","pic"]}]}]}}).catch(R=>({data:null})).then(R=>R);t(!1),M&&(a(M.success),s(M.darasa))},T=async _=>{const{data:M}=await Y.custom({url:"",method:"post",meta:{operation:"connectDarasa",variables:{id:{value:parseInt(_.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>({data:null})).then(R=>R);M?(a(M.success),s(M.darasa),g.success(M.message),M.success&&C(u.id)):g.error(M.message)};return o.useEffect(()=>{C(u.id)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginTop:0},children:[r&&e.jsx(e.Fragment,{children:e.jsx(J,{children:e.jsx($,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(le,{tip:"Checking Connection",size:"large",style:{color:"red"},children:e.jsx("div",{className:"content",style:{height:"50vh",width:"100vh"}})})})})}),n&&e.jsx(yl,{}),!n&&!r&&e.jsxs(e.Fragment,{children:[e.jsx(Te,{children:e.jsxs(ue,{title:"Class Info's",children:[e.jsx(ue.Item,{label:"Class Name/Title",children:i==null?void 0:i.name}),e.jsx(ue.Item,{label:"Class Code",children:i==null?void 0:i.code}),e.jsx(ue.Item,{label:"Created By",children:e.jsx("a",{children:i==null?void 0:i.user.fullName})}),(i==null?void 0:i.startDate)&&e.jsx(ue.Item,{label:"Start Date",children:se(i==null?void 0:i.startDate).format("YYYY-MM-DD")}),(i==null?void 0:i.endDate)&&e.jsx(ue.Item,{label:"End Date",children:se(i==null?void 0:i.endDate).format("YYYY-MM-DD")}),(i==null?void 0:i.payable)&&e.jsxs(ue.Item,{label:"Price",children:[i==null?void 0:i.price.toLocaleString(),"/= Tsh"]})]})}),e.jsx(J,{children:e.jsxs($,{span:24,style:{display:"flex",justifyContent:"center"},children:[(i==null?void 0:i.payable)&&e.jsx(G,{size:"large",onClick:()=>f(!0),children:"Pay for This Class"}),!(i!=null&&i.payable)&&e.jsx(ot,{title:"Are you sure to Connect/Join to this Class",onConfirm:()=>T(u.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(G,{size:"large",children:"Connect/Join"})})]})})]})]}),e.jsx(te,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Purchasing"}),e.jsx("span",{style:{marginLeft:10,fontWeight:"bolder"},children:i==null?void 0:i.name})]}),width:"35vw",open:c,onClose:_=>f(_),children:e.jsx(En,{darasa:i,randKey:Math.random()})})]})},vl=()=>e.jsx(xl,{}),jl=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx(zt,{mode:"connected"})}),bl=()=>e.jsx(jl,{}),{Meta:Sl}=Te,Cl=r=>{const[t,n]=o.useState([]),[a,i]=o.useState();o.useState();const[s,c]=o.useState(!1),[f,u]=o.useState(!1),[C,T]=o.useState(!0),[_,M]=o.useState(1),[R,x]=o.useState(0),[w,F]=o.useState(!0),[k]=P.useForm();de();const U=!Zr.useBreakpoint().lg,z=l=>{i(l),u(!0)},I=l=>{i(l),c(!0)},j=async(l,y="",p=!1)=>{const{data:d}=await Y.custom({url:"",method:"get",meta:{operation:"madarasaToBuy",variables:{page:{value:l,type:"Int",required:!0},key:{value:y,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","price","cover","created","canEdit","canDelete","canManage","updated","isActive","isAuthor","isConnected"]}]}}).catch(()=>(g.error("Error getting darasas"),{data:null})).then(E=>E);d&&(x(d.total),M(d.page),F(d.hasNext),n(d.results)),T(!1)};return o.useEffect(()=>{j(_)},[]),C?e.jsx(e.Fragment,{children:e.jsx(ke,{loading:C,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(J,{style:{display:"flex",justifyContent:"center"},children:e.jsx($,{span:U?24:10,children:e.jsx(P,{layout:"vertical",form:k,onFinish:l=>{M(0),j(0,l.key,!0)},children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Classes...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(Ut,{dataLength:R,next:()=>j(_),hasMore:w,loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(le,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:t.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:t.length>0?e.jsx(J,{align:"top",children:t.map(l=>e.jsx($,{span:U?24:8,children:e.jsxs(Te,{hoverable:l.isActive,style:{marginRight:10,marginBottom:10},actions:[e.jsx(G,{size:"large",onClick:()=>I(l),children:"Read More"}),e.jsx(G,{size:"large",onClick:()=>z(l),children:"Buy Now"})],children:[e.jsx("div",{style:{height:window.innerHeight/3,background:"url("+l.cover+")",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",marginBottom:10,borderRadius:5}}),e.jsx(Sl,{title:e.jsx(e.Fragment,{children:e.jsxs(Se,{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("h2",{children:[e.jsx(Ee,{title:l.name,children:er(l.name,20)}),e.jsx(ne,{color:"red",style:{marginLeft:10},children:l.code})]}),e.jsxs("span",{style:{fontSize:24},children:[l.price,"/="]})]})}),description:e.jsx(e.Fragment,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:er(l.description,100)}})})})]})}))}):e.jsx(Je,{severity:"info",sx:{fontSize:18},children:"No Classes Found"})}),e.jsx(Ct,{title:a==null?void 0:a.name,width:"50vw",anchor:"right",onClose:l=>c(l),open:s,children:e.jsxs(ue,{title:"",column:1,children:[e.jsx(ue.Item,{label:"Class Name",children:a==null?void 0:a.name}),e.jsx(ue.Item,{label:"Class Code#",children:a==null?void 0:a.code}),e.jsxs(ue.Item,{label:"Cost",children:[a==null?void 0:a.price," Tsh"]}),e.jsx(ue.Item,{label:"Description",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:a==null?void 0:a.description}})}),e.jsx(ue.Item,{label:"",children:e.jsx(G,{size:"large",onClick:()=>z(a),children:"Buy Now"})})]})}),e.jsx(te,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Purchasing"}),e.jsx("span",{style:{marginLeft:10,fontWeight:"bolder"},children:a==null?void 0:a.name})]}),width:"35vw",open:f,onClose:l=>u(l),children:e.jsx(En,{darasa:a,randKey:Math.random()})})]})},wl=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx(Cl,{randKey:Math.random()})}),Dl=()=>e.jsx(wl,{}),Tl=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx(zt,{mode:"my"})}),kl=()=>e.jsx(Tl,{}),Pl=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState(0),[s,c]=o.useState(0),[f,u]=o.useState(1),[C,T]=o.useState(25),[_,M]=o.useState(""),[R,x]=o.useState([]),[w,F]=o.useState(),[k]=P.useForm(),[q,U]=o.useState(!1);de();const z=async y=>{F(y),U(!0)},I=async(y,p="",d=25)=>{n(!0);const{data:E}=await Y.custom({url:"",method:"get",meta:{operation:"myBooksOrders",variables:{page:{value:y,type:"Int",required:!0},key:{value:p,type:"String",required:!1},pageSize:{value:d,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","price","paymentDate","receiptNumber","isPaid",{book:["id","title","description","file","cover","price","created","updated","isActive","isPublic","hasPurchaseOrder","canEdit","canDelete","canManage",{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]},{user:["id","firstName","middleName","lastName"]},{bill:["id","billNumber"]},"isActive","created","updated","canDelete","canManage"]}]}}).catch(B=>(g.error("Error getting Bills"),{data:null})).then(B=>B);E&&(i(E.total),c(E.pages),u(E.page),x(E.results)),n(!1)},j=async y=>{const{data:p}=await Y.custom({url:"",method:"post",meta:{operation:"deleteBookOrder",variables:{id:{value:y,type:"Int",required:!0}},fields:["success","message"]}}).catch(d=>(g.error("Error deleting Order"),{data:null})).then(d=>d);p&&x(R.filter(d=>d.id!==y))},l=[{title:"Bill#",dataIndex:"billNumber",fixed:!0,render:(y,p,d)=>{var E;return e.jsx("span",{children:e.jsx("a",{children:(E=p==null?void 0:p.bill)==null?void 0:E.billNumber})})}},{title:"Book Title",dataIndex:"bookTitle",fixed:!0,render:(y,p,d)=>{var E;return e.jsx("span",{children:e.jsx("a",{children:(E=p==null?void 0:p.book)==null?void 0:E.title})})}},{title:"Bill Amount",dataIndex:"billAmount",fixed:!0,render:(y,p,d)=>e.jsxs("span",{children:[p.price," Tsh"]})},{title:"Paid",dataIndex:"isPaid",fixed:!0,render:(y,p,d)=>e.jsx("span",{children:p.isPaid?e.jsx(ne,{color:"green",children:"Yes"}):e.jsx(ne,{color:"red",children:"No"})})},{title:"Created",dataIndex:"created",render:(y,p,d)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(at,{date:new Date(p.created)})})})},{title:"Status",dataIndex:"isActive",render:(y,p,d)=>e.jsx("a",{children:p!=null&&p.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(y,p,d)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[!p.isPaid&&e.jsx(ot,{title:"Are you sure to delete this Order?",onConfirm:()=>j(p.id),okText:"Yes",cancelText:"No",disabled:!(p!=null&&p.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(G,{icon:e.jsx(Ve,{}),disabled:!(p!=null&&p.canDelete),size:"large"})}),p.isPaid&&e.jsx(Ee,{title:"Print Receipt",children:e.jsx(G,{icon:e.jsx(ja,{}),size:"large"})}),!p.isPaid&&e.jsx(Ee,{title:"View Order Details",children:e.jsx(G,{icon:e.jsx(en,{}),size:"large",onClick:()=>z(p)})})]})}];return o.useEffect(()=>{I(f,"",25)},[r.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(va,{offsetTop:75,children:e.jsx(J,{style:{display:"flex",justifyContent:"center",marginTop:20},children:e.jsx($,{span:10,children:e.jsx(P,{layout:"vertical",form:k,onFinish:y=>{I(1,y.key,25)},children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Bill(s)...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})})})}),e.jsx(J,{children:e.jsx($,{span:24,children:e.jsx(nn,{loading:t,columns:l,dataSource:R,pagination:{onChange:(y,p)=>{T(p),I(y,_,p)},total:a,pageSize:C,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})})}),e.jsx(te,{title:"Order Details & Payment",open:q,width:"50vw",onClose:y=>U(y),children:e.jsx(wa,{book:w==null?void 0:w.darasa})})]})},Il=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx(Pl,{randKey:Math.random()})}),Al=()=>e.jsx(Il,{}),{Option:Ml}=Oe,Ur=[{value:"",label:"Select Duration Type"},{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"}],Ol=r=>{const[t,n]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(P,{layout:"vertical",form:r.form,onFinish:a=>{a.description=t,r.onFinish(a),n("")},requiredMark:!1,children:[e.jsx(P.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(ee,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(P.Item,{name:"startDate",label:"start Date",rules:[{required:!0,type:"date",message:"Please select date"}],children:e.jsx(Qe,{showTime:{format:"HH:mm"},disabledDate:a=>{const i=se().format("YYYY-MM-DD");return a&&a<se(i,"YYYY-MM-DD")},style:{width:"100%"},popupStyle:{zIndex:9999}})}),e.jsxs(J,{children:[e.jsx($,{span:12,children:e.jsx(P.Item,{name:"duration",label:"Duration",style:{width:"100%"},rules:[{required:!0,type:"integer",message:"Enter Duration"}],children:e.jsx(We,{min:1,defaultValue:1,style:{width:"100%"},size:"large"})})}),e.jsx($,{span:12,children:e.jsx(P.Item,{name:"durationType",label:"Duration Type",style:{width:"100%"},rules:[{required:!0,type:"string",message:"Please select duration type"}],children:e.jsx(Oe,{defaultValue:Ur[0].value,size:"large",style:{width:"100%"},dropdownStyle:{zIndex:9999},children:Ur.map(a=>e.jsx(Ml,{children:a.label},a.value))})})})]}),e.jsx(P.Item,{name:"isPublic",label:"Availability",rules:[{required:!1,type:"boolean"}],children:e.jsx(_t,{defaultChecked:!0,disabled:!0,checked:!0,value:!0,children:"Public Available"})}),e.jsx("h3",{children:"Description"}),e.jsx(Ne.CKEditor,{editor:_e,data:t,onReady:a=>{a.editing.view.change(i=>{i.setStyle("min-height","100px",a.editing.view.document.getRoot())})},onChange:(a,i)=>{const s=i.getData();n(s)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},El=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState([]),[s,c]=o.useState(),[f,u]=o.useState(),[C,T]=o.useState(!0),[_,M]=o.useState(1),[R,x]=o.useState(0),[w,F]=o.useState(!0),[k]=P.useForm(),[q,U]=o.useState(!1),{push:z}=de(),[I]=P.useForm(),[j,l]=o.useState(!1),[y,p]=o.useState(!1),d=S=>{c(S),p(!0)},E=async S=>{const{data:O}=await Y.custom({url:"",method:"post",meta:{operation:"connectClass",variables:{id:{value:S,type:"Int",required:!0}},fields:["success","message"]}}).catch(D=>(g.error("Error connecting to class"),{data:null})).then(D=>D);O&&(O.success?(l(!1),u(null),g(O.message),i(a.filter(D=>D.id!==S))):g.error(O.message))},B=async S=>{const{data:O}=await Y.custom({url:"",method:"post",meta:{operation:"createVirtualClass",variables:{name:{value:S.name,type:"String",required:!0},description:{value:S.description,type:"String",required:!0},duration:{value:S.duration,type:"Int",required:!0},durationType:{value:S.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:S.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(D=>(g.error("Error creating class"),{data:null})).then(D=>D);O&&(O.success?(g.success(O.message),U(!1),i([O.virtual,...a])):g.error(O.message))},K=async S=>{const{data:O}=await Y.custom({url:"",method:"post",meta:{operation:"editVirtualClass",variables:{id:{value:S.id,type:"Int",required:!0},name:{value:S.name,type:"String",required:!0},description:{value:S.description,type:"String",required:!0},duration:{value:S.duration,type:"Int",required:!0},durationType:{value:S.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:S.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(D=>(g.error("Error editing class"),{data:null})).then(D=>D);O&&(O.success?(g.success(O.message),i(a.map(D=>D.id===O.virtual.id?O.virtual:D)),p(!1)):g.error(O.message))},A=()=>{I.resetFields(),U(!0)},V=async S=>{const{data:O}=await Y.custom({url:"",method:"post",meta:{operation:"deleteVirtualClass",variables:{id:{value:S,type:"Int",required:!0}},fields:["success","message"]}}).catch(D=>(g.error("Error deleting class"),{data:null})).then(D=>D);O&&(O.success?(g.success(O.message),i(a.filter(D=>D.id!==S))):g.error(O.message))},L=S=>{me.confirm({title:"Deleting Virtual Class",icon:e.jsx(he,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>V(S)})},H=async(S,O="",D=!1)=>{const{data:m}=await Y.custom({url:"",method:"get",meta:{operation:"publicVirtualClasses",variables:{page:{value:S,type:"Int",required:!0},key:{value:O,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(v=>(g.error("Error fetching classes"),{data:null})).then(v=>v);m&&(x(m.total),M(m.page),F(m.hasNext),i(m.results)),T(!1)},b=async()=>{const{data:S}=await Y.custom({url:"",method:"get",meta:{operation:"darasaAuth",variables:{},fields:["auth"]}}).catch(O=>(g.error("Error getting darasa auth"),{data:null})).then(O=>O);S&&n(S.auth.create_virtual_classes)};return o.useEffect(()=>{b(),H(_)},[]),C?e.jsx(e.Fragment,{children:e.jsx(ke,{loading:C,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx($,{span:20,children:e.jsx(P,{layout:"vertical",form:k,onFinish:S=>{M(0),H(0,S.key,!0)},children:e.jsx(P.Item,{name:"key",children:e.jsx(ee,{size:"large",placeholder:"Search Public Virtual Classes...",prefix:e.jsx(ce,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx($,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{icon:e.jsx(Ft,{}),size:"large",onClick:()=>A(),disabled:!t,children:"Create Virtual Class"})})]}),e.jsx(Ut,{dataLength:R,next:()=>H(_),hasMore:w,loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(le,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:a.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(Z,{loading:!1,itemLayout:"horizontal",loadMore:!1,dataSource:a,renderItem:S=>e.jsx(Te,{children:e.jsx(Z.Item,{actions:[e.jsx(ge,{trigger:["click"],overlay:e.jsxs(W,{children:[e.jsx(W.Item,{icon:e.jsx(qt,{}),disabled:!S.canJoin,onClick:()=>z("/oclass/virtual/class/session/"+S.id+"/"+S.token),children:e.jsx("a",{children:"Join"})}),S.canDelete?e.jsx(W.Item,{disabled:!S.canDelete,icon:e.jsx(Ve,{}),onClick:()=>L(S.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}):e.jsx(e.Fragment,{}),e.jsx(W.Item,{icon:e.jsx(St,{}),disabled:!S.canEdit,onClick:()=>d(S),children:e.jsx("a",{children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:O=>O.preventDefault(),children:e.jsx(Ce,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(ke,{avatar:!0,title:!1,loading:!1,active:!0,children:e.jsx(Z.Item.Meta,{avatar:e.jsx(ye,{}),title:e.jsx("a",{onClick:()=>S.canJoin?z("/oclass/virtual/class/session/"+S.id+"/"+S.token):g("You can't join this class"),children:S.name}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:S.description}),e.jsxs("p",{children:[e.jsxs(ne,{color:"green",children:["Start At:"," ",e.jsx("span",{style:{marginLeft:10},children:Nt(new Date(S.startDate),"MMMM do, yyyy H:mma")})]}),e.jsxs(ne,{color:"green",children:["End In:",e.jsx("span",{style:{marginLeft:10},children:Nt(new Date(S.endDate),"MMMM do, yyyy H:mma")})]}),S.canJoin?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx(ne,{color:"red",children:"Not Joinable"})})]})]})})})})})})}),e.jsx(te,{title:"Creating Public Virtual Class",width:"40vw",open:q,onClose:S=>U(S),children:e.jsx(Ol,{form:I,onFinish:B})}),e.jsx(te,{title:"Connecting "+(f==null?void 0:f.name),open:j,width:"40vw",onClose:S=>l(S),children:e.jsxs(e.Fragment,{children:[e.jsx(an,{id:f==null?void 0:f.id}),e.jsx(G,{onClick:()=>E(f==null?void 0:f.id),style:{position:"absolute",bottom:0,right:0,marginBottom:10},children:"Connect"})]})}),e.jsx(te,{title:"Editting "+(s==null?void 0:s.name),width:"40vw",open:y,onClose:S=>p(S),children:e.jsx(Gr,{form:I,darasa:s,onFinish:K})})]})},Nl=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx(El,{mode:"connected"})}),_l=()=>e.jsx(Nl,{}),Nn="meet.jit.si";var Fl=globalThis&&globalThis.__awaiter||function(r,t,n,a){function i(s){return s instanceof n?s:new n(function(c){c(s)})}return new(n||(n=Promise))(function(s,c){function f(T){try{C(a.next(T))}catch(_){c(_)}}function u(T){try{C(a.throw(T))}catch(_){c(_)}}function C(T){T.done?s(T.value):i(T.value).then(f,u)}C((a=a.apply(r,t||[])).next())})};const Rl=(r,t,n)=>Fl(void 0,void 0,void 0,function*(){return new Promise((a,i)=>{if(window.JitsiMeetExternalAPI)return a(window.JitsiMeetExternalAPI);const s=document.createElement("script"),c=t?`?release=${t}`:"",f=n?`${n}/`:"";s.async=!0,s.src=`https://${r}/${f}external_api.js${c}`,s.onload=()=>a(window.JitsiMeetExternalAPI),s.onerror=()=>i(new Error(`Script load error: ${s.src}`)),document.head.appendChild(s)})});let Pt;const Ll=(r=Nn,t,n)=>Pt||(Pt=Rl(r,t,n),Pt),ql=r=>{const t=r.split("/");if(!(t.length<=1))return t[0]};let Vl=0;const zr=r=>`${r}-${Vl++}`,Ul=({domain:r=Nn,roomName:t,configOverwrite:n,interfaceConfigOverwrite:a,jwt:i,invitees:s,devices:c,userInfo:f,release:u,spinner:C,onApiReady:T,onReadyToClose:_,getIFrameRef:M})=>{const[R,x]=o.useState(!0),[w,F]=o.useState(!1),k=o.useRef(),q=o.useRef(),U=o.useRef(null),z=o.useMemo(()=>zr("jitsiMeeting"),[zr]);o.useEffect(()=>{Ll(r,u,ql(t)).then(l=>{k.current=l,F(!0)}).catch(l=>console.error(l.message))},[]);const I=o.useCallback(l=>{q.current=new l(r,{roomName:t,configOverwrite:n,interfaceConfigOverwrite:a,jwt:i,invitees:s,devices:c,userInfo:f,release:u,parentNode:U.current}),x(!1),q.current&&(typeof T=="function"&&T(q.current),q.current.on("readyToClose",()=>{typeof _=="function"&&_()}),U.current&&typeof M=="function"&&M(U.current))},[q,U,T,_,M,r,t,n,a,i,s,c,f]);o.useEffect(()=>{w&&!q.current&&k.current&&I(k.current)},[w,I]);const j=o.useCallback(()=>!C||!R||q.current?null:e.jsx(C,{},void 0),[C,q.current]);return e.jsxs(e.Fragment,{children:[j(),e.jsx("div",{id:z,ref:U},z)]},void 0)};globalThis&&globalThis.__rest;const zl={app_name:"Oclass",api_url:"https://olbongo.co.tz",conference_url:"video.olbongo.co.tz"},Hl=r=>{const[t,n]=o.useState(),[a,i]=o.useState(!1),[s,c]=o.useState(!0),[f,u]=o.useState(!0),{push:C}=Xr(),{data:T}=cr(),_=Vt(),M=async()=>{const{data:x}=await Y.custom({url:"",method:"get",meta:{operation:"virtual",variables:{id:{value:parseInt(_.id),type:"Int",required:!0}},fields:["id","name","description","startDate","duration","durationType","token",{darasa:["id","name","code","description"]},{author:["id","firstName","middleName","lastName","fullName","pic","email"]},"created","canEdit","canDelete","canManage","updated","isActive"]}}).catch(w=>(g.error("Error fetching virtual class"),{data:null})).then(w=>w);x&&n(x),c(!1)},R=e.jsxs(Ye,{children:[e.jsx(Ye.Item,{children:e.jsx("a",{onClick:()=>C("/oclass"),children:"Home"})}),e.jsx(Ye.Item,{children:e.jsx("a",{onClick:()=>C("/oclass/public/virtual/classes"),children:"Virtual Sessions/Classes"})}),e.jsx(Ye.Item,{children:t==null?void 0:t.name})]});return o.useEffect(()=>{M()},[]),s?e.jsxs(e.Fragment,{children:[R,e.jsx(J,{align:"middle",children:e.jsx($,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(le,{size:"large"})})})]}):a?e.jsxs(e.Fragment,{children:[R,e.jsx("div",{children:e.jsxs(J,{align:"middle",children:[e.jsx($,{span:8}),e.jsx($,{span:8,children:e.jsx(Te,{title:t==null?void 0:t.name,bordered:!1,actions:[e.jsx(G,{onClick:()=>window.location.reload(),children:"Re-join"})],children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(t==null?void 0:t.description)??""}})})})]})})]}):e.jsxs(e.Fragment,{children:[R,f&&e.jsxs(J,{align:"middle",children:[e.jsx($,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(Se,{direction:"vertical",children:e.jsx(le,{size:"large"})})}),e.jsx($,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(Se,{direction:"vertical",children:"Preparing Virtual Conference Connection"})})]}),t&&e.jsx(Ul,{domain:zl.conference_url,roomName:t.id.toString()+t.token,configOverwrite:{speakerStats:{disabled:!0,disableSearch:!1,order:["role","name","hasLeft"]},breakoutRooms:{hideAddRoomButton:!0,hideAutoAssignButton:!0,hideJoinRoomButton:!0},disableInviteFunctions:!0,hideConferenceSubject:!0,disablePolls:!0,autoKnockLobby:!0,enableLobbyChat:!0,disableModeratorIndicator:!1,disableReactionsModeration:!1,openSharedDocumentOnJoin:!1,startWithAudioMuted:!0,startScreenSharing:!1,enableEmailInStats:!1,enableWelcomePage:!1,readOnlyName:!0,notifications:[],screenshotCapture:{enabled:!0,mode:"recording"},prejoinConfig:{enabled:!0,hideDisplayName:!0,hideExtraJoinButtons:["no-audio","by-phone"]},p2p:{enabled:!0},e2ee:{labels:{labelTooltip:"Tooltip",description:"Description",label:"E2EE",warning:"Warning"},externallyManagedKey:!1}},interfaceConfigOverwrite:{DISABLE_JOIN_LEAVE_NOTIFICATIONS:!1},userInfo:{displayName:T==null?void 0:T.fullName,email:T==null?void 0:T.email},onApiReady:x=>{u(!1),x.addListener("videoConferenceJoined",()=>{}),x.addListener("videoConferenceLeft",()=>{}),x.addListener("participantJoined",w=>{}),x.addListener("participantLeft",w=>{}),x.addListener("onMessageReceived",w=>{}),x.addListener("onMessageSent",w=>{}),x.addListener("onChatMessage",w=>{}),x.addListener("onChatMessageReceived",w=>{}),x.addListener("onChatMessageSent",w=>{})},onReadyToClose:()=>{i(!0)},getIFrameRef:x=>{x.style.height="88vh"}})]})},Yl=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx(Hl,{mode:"connected"})}),Wl=()=>e.jsx(Yl,{}),ac=r=>{const{page:t}=r;return t==="VirtualClassSessionPage"?e.jsx(Wl,{}):t==="PublicVirtualClassesPage"?e.jsx(_l,{}):t==="OclassOrdersPage"?e.jsx(Al,{}):t==="MyClassesPage"?e.jsx(kl,{}):t==="OclassMarketplacePage"?e.jsx(Dl,{}):t==="ConnectedClassesPage"?e.jsx(bl,{}):t==="ClassSessionPage"?e.jsx(vl,{}):t==="ClassesPage"?e.jsx(Ea,{}):t==="ClassesConnectPage"?e.jsx(Ma,{}):t==="DarasaArchivesPage"?e.jsx(ka,{}):e.jsx("div",{children:"Page not found ..."})};export{ac as DarasaPages};
