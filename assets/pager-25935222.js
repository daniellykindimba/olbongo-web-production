import{ch as os,j as e,r as t,cm as Te,aT as n,a1 as B,aW as te,aP as W,av as k,g as I,_ as o,c as re,aY as ce,cl as se,ck as Fe,R as Yt,a8 as qe,cn as ue,cL as me,aN as E,cz as Z,aZ as ie,aO as pe,cT as cs,af as fe,ce as Se,aX as Je,aR as xt,aU as be,S as je,cP as _e,cd as lt,cU as Zt,cV as ds,B as Gt}from"./index-31656684.js";import{D as Oe}from"./index-85dd326a.js";import{G as de}from"./index-85104932.js";import{S as Ce}from"./SyncOutlined-d0ff1170.js";import{P as ee}from"./index-407cea42.js";import{S as oe}from"./SearchOutlined-98399cee.js";import{E as ve}from"./EditOutlined-df147766.js";import{D as he}from"./DeleteOutlined-061c08d7.js";import{S as ot}from"./Skeleton-ac22c0ad.js";import{C as $e}from"./index-c6966173.js";import{D as mt}from"./index-01f551f8.js";import{S as us}from"./index-f345030f.js";import{S as Xt,P as ms}from"./SaveFilled-4d8b2304.js";import{A as ne}from"./analytic_card_component-d4526750.js";import{T as Xe}from"./index-a0423fef.js";import{l as Ae}from"./index-27baea77.js";import{U as Me}from"./index-0b3a0956.js";import{U as Ue}from"./UploadOutlined-61d39690.js";import{A as Ze}from"./index-3fde922a.js";import{A as hs}from"./AppstoreOutlined-bbb6a71e.js";import{M as ct}from"./index-39eadc4e.js";import{M as pt}from"./MoreOutlined-1ff14862.js";import{E as xs}from"./ExclamationCircleOutlined-185158ec.js";import{R as ps,P as gs,S as ys,a as js}from"./school_settings_component-56220d2b.js";import{K as fs,P as Ss,M as vs,N as Cs,U as dt}from"./UnlockOutlined-98bb23ab.js";import{L as Ie}from"./index-06f03951.js";import{P as es}from"./PlusCircleFilled-13e5c0f6.js";import{A as ts}from"./index-fcba2bd3.js";import{D as ze}from"./index-27ce434d.js";import{C as ss}from"./CloseOutlined-c73e4784.js";import{I as Pe}from"./index-13c4f105.js";import{S as Re}from"./SaveOutlined-c100c8d1.js";import{D as bs}from"./DownloadOutlined-bc952592.js";import{U as Qt}from"./UserOutlined-806c0f5d.js";import{M as Is}from"./MessageOutlined-d5f4891c.js";import{A as As}from"./index.esm-11fcd741.js";import{L as ks}from"./LockFilled-6764f508.js";import{U as Fs}from"./UnlockFilled-085dcca5.js";import{S as Ns}from"./SendOutlined-4e07a25d.js";import{L as ut}from"./LockOutlined-bd0bd5bc.js";import{I as as}from"./InboxOutlined-af724513.js";import"./index-150b311c.js";import"./index-7a6d4613.js";import"./localeData-b8525379.js";import"./SwapRightOutlined-c4e52b1e.js";import"./SinglePicker-7ad8b2be.js";import"./index-384881ca.js";import"./ActionButton-b117416a.js";import"./EditOutlined-401a1613.js";import"./DeleteOutlined-25685737.js";import"./DotChartOutlined-f39c986e.js";import"./index-296df5bd.js";import"./index-c117bd80.js";import"./transButton-051b5cc0.js";import"./index-4d674653.js";import"./defineProperty-7c0414be.js";import"./useNotification-e2a75d78.js";import"./DialogWrap-6cb026bc.js";import"./useMutateObserver-ec92de11.js";import"./index-7500b2bb.js";import"./InputNumber-be06b4c0.js";import"./Image-9c47947e.js";import"./Upload-32f95907.js";import"./Rate-c64c3a3a.js";import"./fade-f7ae8084.js";import"./DownloadOutlined-6cd35f11.js";import"./InfoCircleFilled-48450e15.js";import"./InfoCircleFilled-baaa675e.js";import"./index-d5da4e34.js";import"./index-ce7929ee.js";import"./UpOutlined-7082c42f.js";const Ts=os(e.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined"),{TextArea:qs}=B,Ps=a=>{const s=async m=>{var x,y;const{data:r}=await I.custom({url:"",method:"post",meta:{operation:"updateExaminationType",variables:{examinationTypeId:{value:parseInt(((y=(x=a.examinationType)==null?void 0:x.id)==null?void 0:y.toString())??"0"),type:"Int",required:!0},name:{value:m.name,type:"String",required:!0},code:{value:m.code,type:"String",required:!0},description:{value:m.description,type:"String",required:!1},startDate:{value:m.start_date,type:"String",required:!1},endDate:{value:m.end_date,type:"String",required:!1}},fields:["success","message",{examinationType:["id","name","code","description",{schoolType:["id","name"]},"startDate","endDate","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(v=>(o.error("Error in updating Examination Type"),{data:null})).then(v=>v);r&&(r.success?(o.success("Examination Type updated successfully"),a.onFinish(r.examinationType)):o.error(r.message))};return t.useEffect(()=>{var m,r,x,y,v;a.form.setFieldsValue({name:(m=a.examinationType)==null?void 0:m.name,code:(r=a.examinationType)==null?void 0:r.code,start_date:Te(((x=a.examinationType)==null?void 0:x.startDate)??new Date),end_date:Te(((y=a.examinationType)==null?void 0:y.endDate)??new Date),description:(v=a.examinationType)==null?void 0:v.description})},[a.randKey]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:m=>{m.start_date=Te(m.start_date).format("YYYY-MM-DD"),m.end_date=Te(m.end_date).format("YYYY-MM-DD"),s(m)},requiredMark:!0,autoComplete:"off",initialValues:{remember:!1,email:"",password:""},children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input code"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs(te,{children:[e.jsx(W,{span:12,children:e.jsx(n.Item,{name:"start_date",label:"Start Date",rules:[{required:!1,type:"date",message:"Please input Start Date"}],children:e.jsx(Oe,{style:{width:"100%"},popupStyle:{zIndex:9999}})})}),e.jsx(W,{span:12,children:e.jsx(n.Item,{name:"end_date",label:"End Date",rules:[{required:!1,type:"date",message:"Please input End Date"}],children:e.jsx(Oe,{style:{width:"100%"},popupStyle:{zIndex:9999}})})})]}),e.jsx(n.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(qs,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Es=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(1),[q,A]=t.useState(0),[P,w]=t.useState(!1),[d,z]=t.useState(20),[_,T]=t.useState(""),[L,H]=t.useState(!0);re();const[V]=n.useForm(),[O]=n.useForm();de.useBreakpoint().lg;const[D,F]=t.useState(!1),C=j=>{m(j),F(!0)},c=async j=>{x(r.map(i=>i.id===j.id?j:i)),O.resetFields(),F(!1)},p=async()=>{const{data:j}=await I.custom({url:"",method:"post",meta:{operation:"syncExaminationsTypes",variables:{},fields:["success","message"]}});j.success?(o.success(j.message),r.length=0,b(1,"")):o.error(j.message)},f=async j=>{const{data:i}=await I.custom({url:"",method:"post",meta:{operation:"deleteExaminationType",variables:{examinationTypeId:{value:parseInt(j.toString()),type:"Int",required:!0}},fields:["success","message"]}});i.success?(o.success(i.message),x(r.filter(h=>h.id!==j))):o.error(i.message)},l=()=>{o("Canceled")},S=[{title:"Name",dataIndex:"name",fixed:!0,render:(j,i,h)=>e.jsx("span",{children:e.jsx("a",{children:i.name})})},{title:"Code",dataIndex:"Code",fixed:!0,render:(j,i,h)=>e.jsx("span",{children:i.code})},{title:"School Type",dataIndex:"schoolType",fixed:!0,render:(j,i,h)=>e.jsx("span",{children:i.schoolType.name})},{title:"Created",dataIndex:"created",render:(j,i,h)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(i.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(j,i,h)=>e.jsx("span",{children:i!=null&&i.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(j,i,h)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(k,{icon:e.jsx(ve,{}),disabled:!(i!=null&&i.canEdit),onClick:()=>C(i)}),e.jsx(ee,{title:"Are you sure to delete this Examination Type?",onConfirm:()=>f(i==null?void 0:i.id),onCancel:()=>l,okText:"Yes",cancelText:"No",disabled:!(i!=null&&i.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(i!=null&&i.canDelete)})})]})}],b=async(j,i="",h=20)=>{const{data:U}=await I.custom({url:"",method:"get",meta:{operation:"examinationsTypes",variables:{page:{value:j,type:"Int",required:!0},key:{value:i,type:"String",required:!1},pageSize:{value:h,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description",{schoolType:["id","name"]},"startDate","endDate","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(N=>(o.error("Error occured while fetching examinations types"),{data:null})).then(N=>N);U&&(v(U.page),A(U.total),w(U.hasNext),x(U.results)),H(!1)};return t.useEffect(()=>{b(y,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:12,children:e.jsx(n,{layout:"vertical",form:V,onFinish:j=>{v(1),r.length=0,T(j.key),b(1,j.key,d)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>p(),children:"Sync Examinations Types"})})]}),e.jsx(ce,{loading:L,columns:S,dataSource:r,scroll:{x:!0},pagination:{onChange:(j,i)=>{z(i),b(j,_,i)},total:q,pageSize:d,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(se,{title:"Editting "+(s==null?void 0:s.name),open:D,onClose:j=>F(j),children:e.jsx(Ps,{form:O,onFinish:c,randKey:Math.random(),examinationType:s})})]})},xe=({children:a})=>{const{data:s}=Fe(),m=()=>{!(s!=null&&s.isStaff)&&!(s!=null&&s.isAdmin)&&(window.location.pathname="/")},[r,x]=Yt.useState(!0),[y,v]=Yt.useState(!1),q=async()=>{x(!0);const{data:A}=await I.custom({url:"",method:"get",meta:{operation:"controlAuthorized",variables:{},fields:["analytics"]}}).catch(P=>({data:null})).then(P=>P);A&&v(A.analytics.authorized),x(!1)};return t.useEffect(()=>{m(),q()},[]),!y&&!r?e.jsx(e.Fragment,{children:e.jsx("h1",{children:"Unauthorized"})}):e.jsx(qe,{spinning:r,children:a})},Ms=()=>(t.useEffect(()=>{document.title=ue.system_name+": Examinations Types"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Examinations Types"})]})}),e.jsx(Es,{height:80})]})})),Ds=a=>{t.useState();const[s,m]=t.useState([]),[r,x]=t.useState(1),[y,v]=t.useState(0),[q,A]=t.useState(20),[P,w]=t.useState(""),[d,z]=t.useState(!1),[_,T]=t.useState(!0);re();const[L]=n.useForm();n.useForm();const V=!de.useBreakpoint().lg,[O,Y]=t.useState(!1),D=async()=>{const{data:f}=await I.custom({url:"",method:"post",meta:{operation:"syncSchoolVenuesTypes",variables:{},fields:["success","message"]}});f.success?(o.success(f.message),s.length=0,p(1,"")):o.error(f.message)},F=async f=>{const{data:l}=await I.custom({url:"",method:"post",meta:{operation:"deleteSchoolVenueType",variables:{schoolVenueTypeId:{value:parseInt(f.toString()),type:"Int",required:!0}},fields:["success","message"]}});l.success?(o.success(l.message),m(s.filter(S=>S.id!==f))):o.error(l.message)},C=()=>{o("Canceled")},c=[{title:"Name",dataIndex:"name",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:e.jsx("a",{children:l.name})})},{title:"Created",dataIndex:"created",render:(f,l,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(l.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(f,l,S)=>e.jsx("a",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,l,S)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ee,{title:"Are you sure to delete this Venue Type?",onConfirm:()=>F(l==null?void 0:l.id),onCancel:()=>C,okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(l!=null&&l.canDelete)})})})}],p=async(f,l="",S=20)=>{const{data:b}=await I.custom({url:"",method:"get",meta:{operation:"schoolVenueTypes",variables:{page:{value:f,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:S,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});x(b.page),v(b.total),z(b.hasNext),m(b.results),T(!1)};return t.useEffect(()=>{p(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:V?24:20,children:e.jsx(n,{layout:"vertical",form:L,onFinish:f=>{x(1),s.length=0,w(f.key),p(1,f.key,q)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:V?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>D(),children:"Sync Mtaa"})})]}),e.jsx(ce,{loading:_,columns:c,dataSource:s,scroll:{x:!0},pagination:{onChange:(f,l)=>{A(l),p(f,P,l)},total:y,pageSize:q,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(se,{title:"Edit Region Informations",width:"20%",open:O,onClose:f=>Y(f),children:e.jsx(e.Fragment,{})})]})},zs=()=>(t.useEffect(()=>{document.title=ue.system_name+": School Venues Types"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"School Venues Types"})]})}),e.jsx(Ds,{height:80})]})})),Ls=async()=>{const{data:a}=await I.custom({url:"",method:"get",meta:{operation:"systemSettings",variables:{},fields:["smsSenderName","staffOtpAuthorize","adminOtpAuthorize","teachersOtpAuthorize","studentsOtpAuthorize","parentsOtpAuthorize","concatenateUsernameWithSchoolRegno","allowUserPublicRegistration","maximumLoginAttemp","smsCostPerUnit","otpExpiresTime","allowSessionTimeoutFeature","tokenExpires","passwordComplexityMinLength","passwordComplexityMaxLength","passwordComplexityMinUppercase","passwordComplexityMinLowercase","passwordComplexityMinNumeric","passwordComplexityMinSpecial","passwordComplexityAllowCharacterRepetition","allowedPasswordBackCompare","blockInteractionTillPasswordChanged","passwordMustChangeAfterDays","notifyPasswordChangeBeforeDays","resetAccountLockoutAfterMinutes","accountLockoutDurationInMinutes","allowedPasswordReusePeriondInMonths","userStorageLimit","allowGoogleAuth","allowFacebookAuth","allowTwitterAuth","allowLinkedinAuth","allowGithubAuth"]}}).catch(s=>(console.error(s),{data:null})).then(s=>s);return a||null},rt=a=>{switch(a){case"tokenExpires":return"in seconds";case"otpExpiresTime":return"in seconds";case"smsCostPerUnit":return"in Tsh";default:return""}},Bs=a=>{const[s,m]=t.useState(!1),[r,x]=t.useState(!1),[y,v]=t.useState(),[q]=n.useForm(),A=async()=>{const{data:d}=await I.custom({url:"",method:"post",meta:{operation:"autoCreateSystemSettings",variables:{},fields:["success","message"]}}).catch(()=>(o.remove(),o.error("Error occured while Auto Creating System Settings"),{data:null})).then(z=>z);d&&(o.remove(),d.success?(o.success(d.message),P()):o.error(d.message))},P=async()=>{x(!0);const d=await Ls();if(d){m(!0);const z={teachersOtpAuthorize:d.teachersOtpAuthorize,studentsOtpAuthorize:d.studentsOtpAuthorize,parentsOtpAuthorize:d.parentsOtpAuthorize,concatenateUsernameWithSchoolRegno:d.concatenateUsernameWithSchoolRegno,allowUserPublicRegistration:d.allowUserPublicRegistration,maximumLoginAttemp:d.maximumLoginAttemp,smsCostPerUnit:d.smsCostPerUnit,otpExpiresTime:d.otpExpiresTime,tokenExpires:d.tokenExpires,staffOtpAuthorize:d.staffOtpAuthorize,adminOtpAuthorize:d.adminOtpAuthorize,passwordComplexityMinLength:d.passwordComplexityMinLength,passwordComplexityMaxLength:d.passwordComplexityMaxLength,passwordComplexityMinUppercase:d.passwordComplexityMinUppercase,passwordComplexityMinLowercase:d.passwordComplexityMinLowercase,passwordComplexityMinNumeric:d.passwordComplexityMinNumeric,passwordComplexityMinSpecial:d.passwordComplexityMinSpecial,allowedPasswordBackCompare:d.allowedPasswordBackCompare,allowSessionTimeoutFeature:d.allowSessionTimeoutFeature,blockInteractionTillPasswordChanged:d.blockInteractionTillPasswordChanged,passwordComplexityAllowCharacterRepetition:d.passwordComplexityAllowCharacterRepetition,passwordMustChangeAfterDays:d.passwordMustChangeAfterDays,notifyPasswordChangeBeforeDays:d.notifyPasswordChangeBeforeDays,resetAccountLockoutAfterMinutes:d.resetAccountLockoutAfterMinutes,accountLockoutDurationInMinutes:d.accountLockoutDurationInMinutes,allowedPasswordReusePeriondInMonths:d.allowedPasswordReusePeriondInMonths,smsSenderName:d.smsSenderName,userStorageLimit:d.userStorageLimit,allowGoogleAuth:d.allowGoogleAuth,allowTwitterAuth:d.allowTwitterAuth,allowLinkedinAuth:d.allowLinkedinAuth,allowFacebookAuth:d.allowFacebookAuth,allowGithubAuth:d.allowGithubAuth};v(z),q.setFieldsValue({teachersOtpAuthorize:d.teachersOtpAuthorize,studentsOtpAuthorize:d.studentsOtpAuthorize,parentsOtpAuthorize:d.parentsOtpAuthorize,concatenateUsernameWithSchoolRegno:d.concatenateUsernameWithSchoolRegno,allowUserPublicRegistration:d.allowUserPublicRegistration,maximumLoginAttemp:d.maximumLoginAttemp,smsCostPerUnit:d.smsCostPerUnit,otpExpiresTime:d.otpExpiresTime,tokenExpires:d.tokenExpires,staffOtpAuthorize:d.staffOtpAuthorize,adminOtpAuthorize:d.adminOtpAuthorize,passwordComplexityMinLength:d.passwordComplexityMinLength,passwordComplexityMaxLength:d.passwordComplexityMaxLength,passwordComplexityMinUppercase:d.passwordComplexityMinUppercase,passwordComplexityMinLowercase:d.passwordComplexityMinLowercase,passwordComplexityMinNumeric:d.passwordComplexityMinNumeric,passwordComplexityMinSpecial:d.passwordComplexityMinSpecial,allowedPasswordBackCompare:d.allowedPasswordBackCompare,allowSessionTimeoutFeature:d.allowSessionTimeoutFeature,blockInteractionTillPasswordChanged:d.blockInteractionTillPasswordChanged,passwordComplexityAllowCharacterRepetition:d.passwordComplexityAllowCharacterRepetition,passwordMustChangeAfterDays:d.passwordMustChangeAfterDays,notifyPasswordChangeBeforeDays:d.notifyPasswordChangeBeforeDays,resetAccountLockoutAfterMinutes:d.resetAccountLockoutAfterMinutes,accountLockoutDurationInMinutes:d.accountLockoutDurationInMinutes,allowedPasswordReusePeriondInMonths:d.allowedPasswordReusePeriondInMonths,userStorageLimit:d.userStorageLimit,smsSenderName:d.smsSenderName,allowGoogleAuth:d.allowGoogleAuth,allowTwitterAuth:d.allowTwitterAuth,allowLinkedinAuth:d.allowLinkedinAuth,allowFacebookAuth:d.allowFacebookAuth,allowGithubAuth:d.allowGithubAuth})}else m(!1);x(!1)},w=async d=>{const{data:z}=await I.custom({url:"",method:"post",meta:{operation:"updateSystemSettings",variables:{smsSenderName:{value:d.smsSenderName,type:"String",required:!1},teachersOtpAuthorize:{value:d.teachersOtpAuthorize,type:"Boolean",required:!1},studentsOtpAuthorize:{value:d.studentsOtpAuthorize,type:"Boolean",required:!1},parentsOtpAuthorize:{value:d.parentsOtpAuthorize,type:"Boolean",required:!1},concatenateUsernameWithSchoolRegno:{value:d.concatenateUsernameWithSchoolRegno,type:"Boolean",required:!1},allowUserPublicRegistration:{value:d.allowUserPublicRegistration,type:"Boolean",required:!1},maximumLoginAttemp:{value:d.maximumLoginAttemp?parseInt(d.maximumLoginAttemp.toString()):5,type:"Int",required:!1},smsCostPerUnit:{value:d.smsCostPerUnit?parseInt(d.smsCostPerUnit.toString()):0,type:"Float",required:!1},otpExpiresTime:{value:d.otpExpiresTime?parseInt(d.otpExpiresTime.toString()):120,type:"Int",required:!1},tokenExpires:{value:d.tokenExpires?parseInt(d.tokenExpires.toString()):120,type:"Int"},staffOtpAuthorize:{value:d.staffOtpAuthorize,type:"Boolean",required:!1},adminOtpAuthorize:{value:d.adminOtpAuthorize,type:"Boolean",required:!1},passwordComplexityMinLength:{value:parseInt(d.passwordComplexityMinLength.toString()),type:"Int",reqired:!1},passwordComplexityMaxLength:{value:parseInt(d.passwordComplexityMaxLength.toString()),type:"Int",reqired:!1},passwordComplexityMinUppercase:{value:parseInt(d.passwordComplexityMinUppercase.toString()),type:"Int",reqired:!1},passwordComplexityMinLowercase:{value:parseInt(d.passwordComplexityMinLowercase.toString()),type:"Int",reqired:!1},passwordComplexityMinNumeric:{value:parseInt(d.passwordComplexityMinNumeric.toString()),type:"Int",reqired:!1},passwordComplexityMinSpecial:{value:parseInt(d.passwordComplexityMinSpecial.toString()),type:"Int",reqired:!1},allowedPasswordBackCompare:{value:parseInt(d.allowedPasswordBackCompare.toString()),type:"Int",required:!1},allowSessionTimeoutFeature:{value:d.allowSessionTimeoutFeature,type:"Boolean",required:!1},blockInteractionTillPasswordChanged:{value:d.blockInteractionTillPasswordChanged,type:"Boolean",required:!1},passwordComplexityAllowCharacterRepetition:{value:d.passwordComplexityAllowCharacterRepetition,type:"Boolean",required:!1},passwordMustChangeAfterDays:{value:parseInt(d.passwordMustChangeAfterDays.toString()),type:"Int",required:!1},notifyPasswordChangeBeforeDays:{value:parseInt(d.notifyPasswordChangeBeforeDays.toString()),type:"Int",required:!1},resetAccountLockoutAfterMinutes:{value:parseInt(d.resetAccountLockoutAfterMinutes.toString()),type:"Int",required:!1},accountLockoutDurationInMinutes:{value:parseInt(d.accountLockoutDurationInMinutes.toString()),type:"Int",required:!1},allowedPasswordReusePeriondInMonths:{value:parseInt(d.allowedPasswordReusePeriondInMonths.toString()),type:"Int",required:!1},userStorageLimit:{value:parseInt(d.userStorageLimit.toString()),type:"Int",required:!1},allowGoogleAuth:{value:d.allowGoogleAuth,type:"Boolean",required:!1},allowTwitterAuth:{value:d.allowTwitterAuth,type:"Boolean",required:!1},allowLinkedinAuth:{value:d.allowLinkedinAuth,type:"Boolean",required:!1},allowFacebookAuth:{value:d.allowFacebookAuth,type:"Boolean",required:!1},allowGithubAuth:{value:d.allowGithubAuth,type:"Boolean",required:!1}},fields:["success","message"]}}).catch(_=>(console.error(_),o.remove(),o.error("Error occured while updating System Settings"),{data:null})).then(_=>_);o.remove(),z&&(z.success?o.success(z.message):o.error(z.message))};return t.useEffect(()=>{P()},[a.randKey]),e.jsx(e.Fragment,{children:e.jsx(ot,{loading:r,active:!0,children:s?e.jsx(e.Fragment,{children:e.jsxs(te,{children:[e.jsx(W,{span:10,children:e.jsx($e,{children:e.jsx(mt,{column:1,title:"System Settings",children:Object.entries(y??{}).map(([d,z],_)=>typeof z=="boolean"?e.jsx(mt.Item,{labelStyle:{fontWeight:"bolder"},label:d.split(/(?=[A-Z])/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "),children:z?e.jsx(e.Fragment,{children:e.jsx("span",{style:{color:"green"},children:"Enabled"})}):e.jsx(e.Fragment,{children:e.jsx("span",{style:{color:"red"},children:"Disabled"})})},_):e.jsx(mt.Item,{labelStyle:{fontWeight:"bolder"},label:d.split(/(?=[A-Z])/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "),children:z}))})})}),e.jsx(W,{span:14,children:e.jsx("div",{style:{marginLeft:20},children:e.jsx(n,{layout:"horizontal",form:q,onFinish:d=>{w(d)},children:e.jsx(te,{style:{display:"flex"},children:e.jsx(W,{span:24,children:e.jsxs($e,{children:[Object.entries(y??{}).map(([d,z],_)=>typeof z=="boolean"?e.jsx(n.Item,{label:e.jsxs(e.Fragment,{children:[d.split(/(?=[A-Z])/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "),rt(d)&&e.jsx(ie,{children:rt(d)})]}),name:d,initialValue:z,children:e.jsx(us,{checked:q.getFieldValue(d),onChange:T=>{q.submit(),v(q.getFieldsValue())}})},_):e.jsx(n.Item,{label:e.jsxs(e.Fragment,{children:[d.split(/(?=[A-Z])/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "),rt(d)&&e.jsx(ie,{style:{marginLeft:5},color:"green",children:rt(d)})]}),name:d,initialValue:z,children:e.jsx(B,{size:"large",value:q.getFieldValue(d),placeholder:"Enter "+d.split(/(?=[A-Z])/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "),onChange:T=>{q.submit(),v(q.getFieldsValue())}})})),e.jsx(n.Item,{children:e.jsx(k,{htmlType:"submit",size:"large",style:{marginTop:20,float:"right"},icon:e.jsx(Xt,{}),danger:!0,children:"Save"})})]})})})})})})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(k,{onClick:()=>A(),children:"Auto Create Settings"})})})})})},_s=()=>(t.useEffect(()=>{document.title=ue.system_name+": System Settings"},[]),e.jsx(xe,{children:e.jsxs(e.Fragment,{children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"System Settings"})]})}),e.jsx(Bs,{})]})})),{Title:Os,Text:mr}=Xe,Rs=a=>{const[s,m]=t.useState(),[r,x]=t.useState(!0);re(),de.useBreakpoint().lg;const v=async()=>{const{data:q}=await I.custom({url:"",method:"get",meta:{operation:"darasaAnalytics",fields:["analytics"]}});m(q.analytics),x(!1)};return t.useEffect(()=>{v()},[]),e.jsx(e.Fragment,{children:e.jsxs(te,{align:"top",children:[e.jsx(W,{span:24,children:e.jsx(Os,{level:5,children:"Oclass Analytics"})}),e.jsx(ne,{title:"Classes",value:s==null?void 0:s.totalClasses,link:"",loading:r}),e.jsx(ne,{title:"Active Classes",value:s==null?void 0:s.totalActiveClasses,link:"",loading:r}),e.jsx(ne,{title:"Blocked Classes",value:s==null?void 0:s.totalBlockedClasses,link:"",loading:r}),e.jsx(ne,{title:"Students",value:s==null?void 0:s.totalStudents,link:"",loading:r}),e.jsx(ne,{title:"Active Students",value:s==null?void 0:s.totalActiveStudents,link:"",loading:r}),e.jsx(ne,{title:"Blocked Students",value:s==null?void 0:s.totalBlockedStudents,link:"",loading:r}),e.jsx(ne,{title:"Drives",value:s==null?void 0:s.totalClassesDrives,link:"",loading:r}),e.jsx(ne,{title:"Active Drives",value:s==null?void 0:s.totalActiveClassesDrives,link:"",loading:r}),e.jsx(ne,{title:"Blocked Drives",value:s==null?void 0:s.totalBlockedClassesDrives,link:"",loading:r}),e.jsx(ne,{title:"Announcements",value:s==null?void 0:s.totalClassesAnnouncements,link:"",loading:r}),e.jsx(ne,{title:"Active Announcements",value:s==null?void 0:s.totalActiveClassesAnnouncements,link:"",loading:r}),e.jsx(ne,{title:"Blocked Announcements",value:s==null?void 0:s.totalBlockedClassesAnnouncements,link:"",loading:r}),e.jsx(ne,{title:"Assignments",value:s==null?void 0:s.totalClassesAssignments,link:"",loading:r}),e.jsx(ne,{title:"Active Assignments",value:s==null?void 0:s.totalActiveClassesAssignments,link:"",loading:r}),e.jsx(ne,{title:"Blocked Assignments",value:s==null?void 0:s.totalBlockedClassesAssignments,link:"",loading:r}),e.jsx(ne,{title:"Resources Links",value:s==null?void 0:s.totalClassesResourcesLinks,link:"",loading:r}),e.jsx(ne,{title:"Active Resources Links",value:s==null?void 0:s.totalActiveClassesResourcesLinks,link:"",loading:r}),e.jsx(ne,{title:"Blocked Resources Links",value:s==null?void 0:s.totalBlockedClassesResourcesLinks,link:"",loading:r})]})})},{Title:Us}=Xe,ws=a=>{const[s,m]=t.useState(),[r,x]=t.useState(!0),y=async()=>{const{data:v}=await I.custom({url:"",method:"get",meta:{operation:"odriveAnalytics",fields:["analytics"]}});m(v.analytics),x(!1)};return t.useEffect(()=>{y()},[]),e.jsx(e.Fragment,{children:e.jsxs(te,{align:"top",children:[e.jsx(W,{span:24,children:e.jsx(Us,{level:5,children:"Odrive Analytics"})}),e.jsx(ne,{title:"Drives",value:s==null?void 0:s.totalDrives,link:"",loading:r}),e.jsx(ne,{title:"Active Drives",value:s==null?void 0:s.totalActiveDrives,link:"",loading:r}),e.jsx(ne,{title:"Blocked Drives",value:s==null?void 0:s.totalBlockedDrives,link:"",loading:r}),e.jsx(ne,{title:"Files",value:s==null?void 0:s.totalFiles,link:"",loading:r}),e.jsx(ne,{title:"Active Files",value:s==null?void 0:s.totalActiveFiles,link:"",loading:r}),e.jsx(ne,{title:"Blocked Files",value:s==null?void 0:s.totalBlockedFiles,link:"",loading:r}),e.jsx(ne,{title:"Private Drives",value:s==null?void 0:s.totalPrivateDrives,link:"",loading:r}),e.jsx(ne,{title:"Active Private Drives",value:s==null?void 0:s.totalActivePrivateDrives,link:"",loading:r}),e.jsx(ne,{title:"Blocked Private Drives",value:s==null?void 0:s.totalBlockedPrivateDrives,link:"",loading:r}),e.jsx(ne,{title:"Public Drives",value:s==null?void 0:s.totalPublicDrives,link:"",loading:r}),e.jsx(ne,{title:"Active Public Drives",value:s==null?void 0:s.totalActivePublicDrives,link:"",loading:r}),e.jsx(ne,{title:"Active Odrive Schools",value:s==null?void 0:s.totalActiveOdriveSchools,link:"",loading:r}),e.jsx(ne,{title:"Blocked Odrives Schools",value:s==null?void 0:s.totalBlockedPublicDrives,link:"",loading:r}),e.jsx(ne,{title:"Drives Members",value:s==null?void 0:s.totalDrivesMembers,link:"",loading:r}),e.jsx(ne,{title:"Active Drives Members",value:s==null?void 0:s.totalActiveDrivesMembers,link:"",loading:r}),e.jsx(ne,{title:"Blocked Drives Members",value:s==null?void 0:s.totalBlockedDrivesMembers,link:"",loading:r})]})})},{Title:Vs,Text:hr}=Xe,Ks=a=>{const[s,m]=t.useState(),[r,x]=t.useState(0),[y,v]=t.useState(!0);re(),de.useBreakpoint().lg;const A=async()=>{const{data:w}=await I.custom({url:"",method:"get",meta:{operation:"userAnalytics",fields:["analytics"]}});m(w.analytics),v(!1)},P=async()=>{const{data:w}=await I.custom({url:"",method:"get",meta:{operation:"globalOpesSmsBalance",fields:["data"]}});w&&x(parseInt(w.data.balance))};return t.useEffect(()=>{A(),P()},[]),e.jsx(e.Fragment,{children:e.jsxs(te,{align:"top",children:[e.jsx(W,{span:24,children:e.jsx(Vs,{level:5,children:"Users/Members/School Analytics"})}),e.jsx(ne,{title:"Schools",value:s==null?void 0:s.total_schools,link:"/control/schools",loading:y}),e.jsx(ne,{title:"Active Users",value:s==null?void 0:s.total_active_users,link:"/control/users?status=1",loading:y}),e.jsx(ne,{title:"Blocked Users",value:s==null?void 0:s.total_blocked_users,link:"/control/users?status=0",loading:y}),e.jsx(ne,{title:"Active Admins",value:s==null?void 0:s.total_adminstrators,link:"/control/users?status=1&role=adminstrator",loading:y}),e.jsx(ne,{title:"Blocked Admins",value:s==null?void 0:s.total_blocked_adminstrators,link:"/control/users?status=0&role=adminstrator",loading:y}),e.jsx(ne,{title:"Active Staffs",value:s==null?void 0:s.total_staffs,link:"/control/users?status=1&role=staff",loading:y}),e.jsx(ne,{title:"Blocked Staffs",value:s==null?void 0:s.total_blocked_staffs,link:"/control/users?status=0&role=staff",loading:y}),e.jsx(ne,{title:"Messages Balance",value:r,link:"",loading:y})]})})},Hs=a=>e.jsxs(e.Fragment,{children:[e.jsx(Ks,{}),e.jsx(ws,{}),e.jsx(Rs,{})]}),Ws=()=>(Fe(),t.useEffect(()=>(document.title=ue.system_name+": Analytics",document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Analytics"})]})}),e.jsx("div",{style:{maxHeight:"calc(100vh - 105px)",minHeight:"calc(100vh - 105px)",overflowY:"auto"},children:e.jsx(Hs,{})})]})})),{TextArea:Ys}=B,Gs=a=>{const[s,m]=t.useState(!1),[r,x]=t.useState(),[y,v]=t.useState(!1),[q,A]=t.useState(!1),[P,w]=t.useState(!1),[d,z]=t.useState(!0);return e.jsx(e.Fragment,{children:e.jsx(Ae.Spin,{spinning:s,children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:_=>{_.is_public=q,_.is_custom=P,_.must_login=d,_.icon=r,m(!0),a.onFinish(_)},requiredMark:!1,initialValues:{remember:!1,email:"",password:""},children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"url",label:"Path",rules:[{required:!0,type:"string",message:"Please input url"}],children:e.jsx(B,{size:"large",placeholder:"Enter Path..."})}),e.jsx(n.Item,{name:"must_login",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{onChange:()=>{z(!d)},defaultChecked:d,children:"Must Login"})}),e.jsx(n.Item,{name:"is_public",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{onChange:()=>{A(!q)},children:"Public Available"})}),e.jsx(n.Item,{name:"is_custom",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{onChange:()=>{w(!P)},children:"Custom Application"})}),e.jsx(n.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(Ys,{rows:4})}),e.jsx(n.Item,{name:"icon",label:"Icon",style:{marginBottom:"12px"},children:e.jsx(Me,{beforeUpload:()=>!1,maxCount:1,onChange:_=>{const T=_.file;r?r.uid!==T.uid&&(x(T),v(!0)):(x(T),v(!0))},onRemove:()=>{x(void 0),v(!1)},accept:"image/*",children:e.jsx(k,{icon:e.jsx(Ue,{}),children:"Click to Select"})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(k,{type:"primary",size:"large",htmlType:"submit",disabled:!y||s,loading:s,children:[s&&e.jsx(cs,{color:"success"}),"Save"]})})]})})})},{TextArea:Qs}=B,Js=a=>{const[s,m]=t.useState(),[r,x]=t.useState(!0),[y,v]=t.useState(!1);return t.useEffect(()=>{a.form.setFieldsValue({name:a.app.name,url:a.app.url,description:a.app.description,must_login:a.app.mustLogin,is_public:a.app.isPublic,is_custom:a.app.isCustom,is_active:a.app.isActive,icon:a.app.icon}),m(null)},[a.randKey]),e.jsx(e.Fragment,{children:e.jsx(qe,{spinning:y,children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:q=>{q.id=parseInt(a.app.id),q.icon=s,v(!0),a.onFinish(q)},requiredMark:!1,initialValues:{remember:!1,email:"",password:""},children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"url",label:"Path",rules:[{required:!0,type:"string",message:"Please input url"}],children:e.jsx(B,{size:"large",placeholder:"Enter Path..."})}),e.jsx(n.Item,{name:"must_login",valuePropName:"checked",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{children:"Must Login"})}),e.jsx(n.Item,{name:"is_public",valuePropName:"checked",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{children:"Public Available"})}),e.jsx(n.Item,{name:"is_custom",valuePropName:"checked",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{children:"Custom Application"})}),e.jsx(n.Item,{name:"is_active",valuePropName:"checked",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{children:"is Active"})}),e.jsx(n.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(Qs,{rows:4})}),e.jsxs(n.Item,{name:"icon",label:"Icon:",style:{marginBottom:"12px"},children:[e.jsx(fe,{title:a.app.icon,children:e.jsx("span",{style:{color:"green",display:"block"},children:a.app.icon})}),e.jsx(Me,{beforeUpload:()=>!1,maxCount:1,onChange:q=>{const A=q.file;s?s.uid!==A.uid&&(m(A),x(!0)):(m(A),x(!0))},onRemove:()=>{m(void 0),x(!1)},accept:"image/*",children:e.jsx(k,{icon:e.jsx(Ue,{}),children:"Click to Select"})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",loading:y,disabled:y,children:"Save"})})]})})})},$s=a=>{const[s,m]=t.useState([]),[r,x]=t.useState(),[y,v]=t.useState(!0);re();const[q,A]=t.useState(!1),[P,w]=t.useState(!1),[d]=n.useForm(),[z]=n.useForm(),T=!de.useBreakpoint().lg,L=p=>{x(p),w(!0)},H=()=>{A(!0)},V=()=>{A(!1)},O=async p=>{const{data:f}=await I.custom({url:"",method:"post",meta:{operation:"createApp",variables:{name:{value:p.name,type:"String",required:!0},description:{value:p.description,type:"String",required:!1},url:{value:p.url,type:"String",required:!0},icon:{value:p.icon,type:"Upload",required:!0},isPublic:{value:p.is_public,type:"Boolean",required:!1},isCustom:{value:p.is_custom,type:"Boolean",required:!1},mustLogin:{value:p.must_login,type:"Boolean",required:!1}},fields:["success","message",{app:["id","name","url","icon","description","created","updated","isActive","canDelete","canEdit","canManage","canAccess"]}]}});o.remove(),f.success?(o.success(f.message),m([f.app,...s]),d.resetFields(),A(!1)):o.error(f.message)},Y=async p=>{const{data:f}=await I.custom({url:"",method:"post",meta:{operation:"updateApp",variables:{id:{value:p.id,type:"Int",required:!0},name:{value:p.name,type:"String",required:!0},description:{value:p.description,type:"String",required:!1},url:{value:p.url,type:"String",required:!0},icon:{value:p.icon,type:"Upload",required:!1},isPublic:{value:p.is_public,type:"Boolean",required:!1},isCustom:{value:p.is_custom,type:"Boolean",required:!1},mustLogin:{value:p.must_login,type:"Boolean",required:!1},isActive:{value:p.is_active,type:"Boolean",required:!1}},fields:["success","message",{app:["id","name","url","icon","description","created","updated","isActive","canDelete","canEdit","canManage","canAccess"]}]}});f.success?(o.success(f.message),m(s.map(l=>l.id.toString()===p.id.toString()?f.app:l)),z.resetFields(),w(!1)):o.error(f.message)},D=async()=>{const{data:p}=await I.custom({url:"",method:"post",meta:{operation:"syncDefaultApps",variables:{},fields:["success","message"]}});p.success?(o.success(p.message),c()):o.error(p.message)},F=async p=>{const{data:f}=await I.custom({url:"",method:"post",meta:{operation:"deleteApp",variables:{id:{value:p,type:"Int",required:!0}},fields:["success","message"]}});f.success?(o.success(f.message),m(s.filter(l=>l.id.toString()!==p.toString()))):o.error(f.message)},C=p=>{ct.confirm({title:"Deleting Application",icon:e.jsx(xs,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>F(parseInt(p.toString()))})},c=async()=>{const{data:p}=await I.custom({url:"",method:"get",meta:{operation:"apps",variables:{control:{value:!0,type:"Boolean",required:!0}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","icon","url","isActive","mustLogin","isCustom","isPublic","created","updated","isActive","canEdit","canDelete","canManage","canAccess"]}]}});m(p.results),v(!1)};return t.useEffect(()=>{c()},[]),y?e.jsx(e.Fragment,{children:e.jsx(ot,{loading:y,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(te,{children:[e.jsx(W,{span:20}),e.jsxs(W,{span:4,style:{display:"flex",justifyContent:"flex-end",marginBottom:5,marginTop:5},children:[e.jsxs(k,{size:"large",onClick:()=>{d.resetFields(),H()},danger:!0,children:[e.jsx(Se,{}),"Create App"]}),e.jsxs(k,{size:"large",onClick:()=>{D()},danger:!0,children:[e.jsx(Se,{}),"Sync Default Apps"]})]})]}),e.jsx("div",{style:{maxHeight:"calc(100vh - 150px)",minHeight:"calc(100vh - 150px)",overflowY:"auto"},children:e.jsxs(te,{align:"top",children:[s.length===0&&e.jsx(W,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx("h3",{children:"No Apps Found ..."})}),s.map(p=>e.jsx(W,{span:T?12:4,children:e.jsxs($e,{hoverable:p.isActive,style:{marginRight:10,marginBottom:10},children:[e.jsx(Je,{style:{right:0,position:"absolute"},children:e.jsx(xt,{trigger:["click"],overlay:e.jsxs(be,{children:[e.jsx(be.Item,{icon:e.jsx(ve,{}),onClick:()=>{L(p)},disabled:!(p!=null&&p.canDelete),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(be.Item,{icon:e.jsx(he,{}),onClick:()=>{C(p.id)},disabled:!(p!=null&&p.canDelete),children:e.jsxs("a",{target:"_blank",rel:"noopener noreferrer",children:["Delete ",p.canDelete]})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:f=>f.preventDefault(),children:e.jsx(pt,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsxs(Je,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},onClick:()=>{},children:[e.jsx(Ze,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(hs,{}),src:p.icon}),p.name]})]})}))]})}),e.jsx(se,{title:"Creating An Application",open:q,onOk:V,width:"30vw",onClose:p=>A(p),children:e.jsx(Gs,{form:d,onFinish:O})}),e.jsx(se,{title:"Edit Application",open:P,width:"30vw",onClose:p=>{w(p)},children:e.jsx(Js,{app:r,form:z,onFinish:Y,randKey:Math.random()})})]})},Zs=()=>{const{data:a}=Fe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/")};return t.useEffect(()=>(document.title=ue.system_name+": Applications",s(),document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),e.jsx(xe,{children:e.jsxs(e.Fragment,{children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Applications"})]})}),e.jsx($s,{})]})})},Xs=a=>{const[s,m]=t.useState([]),[r,x]=t.useState(1),[y,v]=t.useState(0),[q,A]=t.useState(20),[P,w]=t.useState(""),[d,z]=t.useState(!1),[_,T]=t.useState(!0);re();const[L]=n.useForm();n.useForm();const V=!de.useBreakpoint().lg,O=[{title:"Name",dataIndex:"name",fixed:!0,render:(F,C,c)=>e.jsx("span",{children:e.jsx("a",{children:C.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(F,C,c)=>e.jsx("span",{children:e.jsx("a",{children:F})})},{title:"Created",dataIndex:"created",render:(F,C,c)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(C.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(F,C,c)=>e.jsx("a",{children:C!=null&&C.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(F,C,c)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"}})}],Y=async(F,C="",c=20)=>{const{data:p}=await I.custom({url:"",method:"get",meta:{operation:"systemPermissions",variables:{page:{value:F,type:"Int",required:!0},key:{value:C,type:"String",required:!1},pageSize:{value:c,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});x(p.page),v(p.total),z(p.hasNext),m(p.results),T(!1)},D=async()=>{const{data:F}=await I.custom({url:"",method:"post",meta:{operation:"syncSystemPermissions",variables:{},fields:["success","message"]}});F.success?(o.success(F.message),s.length=0,m([]),Y(1)):o.error(F.message)};return t.useEffect(()=>{Y(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:V?24:20,children:e.jsx(n,{layout:"vertical",form:L,onFinish:F=>{x(1),s.length=0,w(F.key),Y(1,F.key,q)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:V?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(fe,{title:"Synchronize Default School Ownerships",children:e.jsx(k,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>D()})})})]}),e.jsx("div",{children:e.jsx(ce,{loading:_,columns:O,dataSource:s,scroll:{x:!0},pagination:{onChange:(F,C)=>{A(C),Y(F,P,C)},total:y,pageSize:q,position:["bottomCenter"],showQuickJumper:!0}})})]})},ea=()=>{const{data:a}=Fe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/")};return t.useEffect(()=>{document.title=ue.system_name+": Permissions",s()},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Permissions"})]})}),e.jsx(Xs,{height:80})]})})},ta=a=>e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:s=>{a.onFinish(s)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})}),sa=a=>{const[s,m]=t.useState(a.role.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.role.name,isActive:a.role.isActive})},[a.form,a.role]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.role.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},aa=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(1),[q,A]=t.useState(0),[P,w]=t.useState(20),[d,z]=t.useState(""),[_,T]=t.useState(!1),[L,H]=t.useState(!0);re();const[V]=n.useForm(),[O]=n.useForm();de.useBreakpoint().lg;const[D,F]=t.useState(!1),[C,c]=t.useState(!1),[p,f]=t.useState(!1),l=G=>{m(G),F(!0)},S=G=>{m(G),f(!0)},b=()=>{f(!1)},j=async G=>{const{data:$}=await I.custom({url:"",method:"post",meta:{operation:"updateSystemRole",variables:{id:{value:G.id,type:"Int",required:!0},name:{value:G.name,type:"String",required:!0},isActive:{value:G.isActive,type:"Boolean",required:!0}},fields:["success","message",{schoolType:["id","name","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}});$.success?(o.success($.message),O.resetFields(),f(!1),x(r.map(R=>parseInt(R.id.toString())===parseInt(G.id)?$.role:R))):o.error($.message)},i=async G=>{const{data:$}=await I.custom({url:"",method:"post",meta:{operation:"createSystemRole",variables:{id:{value:G.id,type:"Int",required:!0},name:{value:G.name,type:"String",required:!0},isActive:{value:G.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","code","description","custom","created","updated","isActive","canDelete","canEdit","canManage"]}]}});$.success?(o.success($.message),O.resetFields(),f(!1),x(r.map(R=>R.id===$.role.id?$.role:R))):o.error($.message)},h=async G=>{const{data:$}=await I.custom({url:"",method:"post",meta:{operation:"deleteSystemRole",variables:{id:{value:parseInt(G.toString()),type:"Int",required:!0}},fields:["success","message"]}});$.success?(o.success($.message),x(r.filter(R=>R.id!==G))):o.error($.message)},U=()=>{o("Canceled")},N=[{title:"Name",dataIndex:"name",fixed:!0,render:(G,$,R)=>e.jsx("span",{children:e.jsx("a",{children:$.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(G,$,R)=>e.jsx("span",{children:e.jsx("a",{children:G})})},{title:"Custom Role",dataIndex:"custom",fixed:!0,render:(G,$,R)=>e.jsx("span",{children:$.custom?e.jsx(ie,{color:"red",children:"Custom"}):e.jsx(ie,{color:"green",children:"Not Custom"})})},{title:"Created",dataIndex:"created",render:(G,$,R)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date($.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(G,$,R)=>e.jsx("a",{children:$!=null&&$.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(G,$,R)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(fe,{title:"Manage Role Permissions",placement:"left",children:e.jsx(k,{icon:e.jsx(fs,{}),disabled:!($!=null&&$.canManage),onClick:()=>l($)})}),e.jsx(ee,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>h($==null?void 0:$.id),onCancel:()=>U,okText:"Yes",cancelText:"No",disabled:!($!=null&&$.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!($!=null&&$.canDelete)})}),e.jsx(fe,{title:"Edit "+($==null?void 0:$.name)+" Ownership",color:"green",placement:"left",children:e.jsx(k,{icon:e.jsx(ve,{}),disabled:!($!=null&&$.canEdit),onClick:()=>S($)})})]})}],g=async(G,$="",R=20)=>{const{data:u}=await I.custom({url:"",method:"get",meta:{operation:"systemRoles",variables:{page:{value:G,type:"Int",required:!0},key:{value:$,type:"String",required:!1},pageSize:{value:R,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","custom","isActive","created","updated","canEdit","canDelete","canManage"]}]}});v(u.page),A(u.total),T(u.hasNext),x(u.results),H(!1)},X=async()=>{const{data:G}=await I.custom({url:"",method:"post",meta:{operation:"syncSystemRoles",variables:{},fields:["success","message"]}});G.success?(o.success(G.message),r.length=0,x([]),g(1)):o.error(G.message)};return t.useEffect(()=>{g(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:8,children:e.jsx(n,{layout:"vertical",form:V,onFinish:G=>{v(1),r.length=0,z(G.key),g(1,G.key,P)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(fe,{title:"Synchronize Default Schools Roles",placement:"left",color:"green",children:e.jsx(k,{size:"large",icon:e.jsx(Ce,{}),style:{marginRight:10},onClick:()=>X()})})})]}),e.jsx("div",{children:e.jsx(ce,{loading:L,columns:N,dataSource:r,scroll:{x:!0},pagination:{onChange:(G,$)=>{w($),g(G,d,$)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Edit System Role",width:"30vw",open:p,onOk:b,onClose:G=>f(G),children:e.jsx(sa,{form:O,role:s,onFinish:j})}),e.jsx(se,{title:"Create System Role",width:"30vw",open:C,onCancel:G=>c(G),children:e.jsx(ta,{form:O,onFinish:i})}),e.jsx(se,{title:"Manage Role Permissions",width:"70vw",visible:D,onCancel:G=>F(G),children:e.jsx(ps,{role:s,randKey:Math.random()})})]})},na=()=>{const{data:a}=Fe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/")};return t.useEffect(()=>{document.title=ue.system_name+": Roles",s()},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Roles"})]})}),e.jsx(aa,{height:80})]})})},ia=a=>{const[s,m]=t.useState(a.district.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.district.name,isActive:a.district.isActive})},[a.form,a.district]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.district.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},ra=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(1),[q,A]=t.useState(0),[P,w]=t.useState(20),[d,z]=t.useState(""),[_,T]=t.useState(!1),[L,H]=t.useState(!0);re();const[V]=n.useForm(),[O]=n.useForm(),D=!de.useBreakpoint().lg,[F,C]=t.useState(!1),c=j=>{m(j),C(!0)},p=async j=>{const{data:i}=await I.custom({url:"",method:"post",meta:{operation:"updateDistrict",variables:{id:{value:j.id,type:"Int",required:!0},name:{value:j.name,type:"String",required:!0},isActive:{value:j.isActive,type:"Boolean",required:!0}},fields:["success","message",{district:["id","name",{region:["id","name"]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}});i.success?(o.success(i.message),O.resetFields(),C(!1),x(r.map(h=>h.id===i.district.id?i.district:h))):o.error(i.message)},f=async j=>{const{data:i}=await I.custom({url:"",method:"post",meta:{operation:"deleteDistrict",variables:{id:{value:j,type:"Int",required:!0}},fields:["success","message"]}});i.success?(o.success(i.message),x(r.filter(h=>h.id!==j))):o.error(i.message)},l=()=>{o("Canceled")},S=[{title:"Name",dataIndex:"name",fixed:!0,render:(j,i,h)=>e.jsx("span",{children:e.jsx("a",{children:i.name})})},{title:"Region",dataIndex:"region",fixed:!0,render:(j,i,h)=>e.jsx("span",{children:e.jsx("a",{children:i.region.name})})},{title:"Created",dataIndex:"created",render:(j,i,h)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(i.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(j,i,h)=>e.jsx("a",{children:i!=null&&i.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(j,i,h)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ee,{title:"Are you sure to delete this member?",onConfirm:()=>f(i==null?void 0:i.id),onCancel:()=>l,okText:"Yes",cancelText:"No",disabled:!(i!=null&&i.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(i!=null&&i.canDelete)})}),e.jsx(k,{disabled:!(i!=null&&i.canEdit),icon:e.jsx(ve,{}),onClick:()=>c(i)})]})}],b=async(j,i="",h=20)=>{const{data:U}=await I.custom({url:"",method:"get",meta:{operation:"districts",variables:{page:{value:j,type:"Int",required:!0},key:{value:i,type:"String",required:!1},pageSize:{value:h,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name",{region:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});v(U.page),A(U.total),T(U.hasNext),x(U.results),H(!1)};return t.useEffect(()=>{b(y)},[]),e.jsxs(e.Fragment,{children:[e.jsx(te,{style:{marginTop:10},children:e.jsx(W,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:V,onFinish:j=>{v(1),r.length=0,b(1,j.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{children:e.jsx(ce,{loading:L,columns:S,dataSource:r,scroll:{y:window.innerHeight-310},pagination:{onChange:(j,i)=>{w(i),b(j,d,i)},onShowSizeChange:(j,i)=>{w(i),b(1,d,i)},showSizeChanger:!0,total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(se,{title:"Edit District Informations",width:"30vw",open:F,onClose:j=>C(j),children:e.jsx(ia,{form:O,district:s,onFinish:p})})]})},la=()=>{const{data:a}=Fe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/")};return t.useEffect(()=>{document.title=ue.system_name+": Districts",s()},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Districts"})]})}),e.jsx(ra,{height:80})]})})},oa=a=>{const[s]=n.useForm(),[m,r]=t.useState(a.level.isActive),x=async y=>{const{data:v}=await I.custom({url:"",method:"post",meta:{operation:"updateEducationLevel",variables:{id:{value:y.id,type:"Int",required:!0},name:{value:y.name,type:"String",required:!0},isActive:{value:y.isActive,type:"Boolean",required:!0}},fields:["success","message",{educationLevel:["id","name","code","index",{schoolType:["id","name","code"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});v.success?(o.success(v.message),s.resetFields(),a.onFinish(v.educationLevel)):o.error(v.message)};return t.useEffect(()=>{a.form.setFieldsValue({name:a.level.name,isActive:a.level.isActive})},[a.form,a.level]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:y=>{y.isActive=m,y.id=parseInt(a.level.id.toString()),x(y)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:m,onChange:()=>r(!m),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},ca=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(1),[q,A]=t.useState(0),[P,w]=t.useState(20),[d,z]=t.useState(""),[_,T]=t.useState(!1),[L,H]=t.useState(!0);re();const[V]=n.useForm(),[O]=n.useForm();de.useBreakpoint().lg,t.useState(!1);const[D,F]=t.useState(!1),C=j=>{m(j),F(!0)},c=async()=>{const{data:j}=await I.custom({url:"",method:"post",meta:{operation:"synchronizeEducationLevelsIndexes",variables:{},fields:["success","message"]}});j.success?o.success(j.message):o.error(j.message)},p=async j=>{x(r.map(i=>parseInt(i.id.toString())===parseInt(j.id.toString())?j:i)),F(!1)},f=async j=>{const{data:i}=await I.custom({url:"",method:"post",meta:{operation:"deleteEducationLevel",variables:{id:{value:parseInt(j.toString()),type:"Int",required:!0}},fields:["success","message"]}});i.success?(o.success(i.message),x(r.filter(h=>h.id!==j))):o.error(i.message)},l=()=>{o("Canceled")},S=[{title:"Name",dataIndex:"name",fixed:!0,render:(j,i,h)=>e.jsx("span",{children:e.jsx("a",{children:i.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(j,i,h)=>e.jsx("span",{children:e.jsx("a",{children:i.code})})},{title:"Index",dataIndex:"index",fixed:!0,render:(j,i,h)=>e.jsx("span",{children:e.jsx("a",{children:i.index})})},{title:"School Type",dataIndex:"schoolType",fixed:!0,render:(j,i,h)=>{var U;return e.jsx("span",{children:e.jsx("a",{children:(U=i.schoolType)==null?void 0:U.name})})}},{title:"Created",dataIndex:"created",render:(j,i,h)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(i.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(j,i,h)=>e.jsx("a",{children:i!=null&&i.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(j,i,h)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ee,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>f(i==null?void 0:i.id),onCancel:()=>l,okText:"Yes",cancelText:"No",disabled:!(i!=null&&i.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(i!=null&&i.canDelete),danger:!0})}),e.jsx(fe,{title:"Edit "+(i==null?void 0:i.name)+" Ownership",color:"green",children:e.jsx(k,{icon:e.jsx(ve,{}),disabled:!(i!=null&&i.canEdit),onClick:()=>C(i),danger:!0})})]})}],b=async(j,i="",h=20)=>{const{data:U}=await I.custom({url:"",method:"get",meta:{operation:"educationLevels",variables:{page:{value:j,type:"Int",required:!0},key:{value:i,type:"String",required:!1},pageSize:{value:h,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","index",{schoolType:["id","name","code"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});v(U.page),A(U.total),T(U.hasNext),x(U.results),H(!1)};return t.useEffect(()=>{b(y,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:8,children:e.jsx(n,{layout:"vertical",form:V,onFinish:j=>{v(1),r.length=0,z(j.key),b(1,j.key,P)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(fe,{title:"Auto Correct All Education Levels Indexes over all Schools",color:"green",placement:"left",children:e.jsx(ee,{title:"Synchronizing All Indexes of Education Levels over all Schools",placement:"left",onConfirm:c,onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(Ce,{}),size:"large",children:"Sync Indexes"})})})})]}),e.jsx("div",{children:e.jsx(ce,{loading:L,columns:S,dataSource:r,scroll:{x:!0},pagination:{onChange:(j,i)=>{w(i),b(j,d,i)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Edit "+(s==null?void 0:s.name)+" Information",width:"20%",open:D,onClose:j=>F(j),children:e.jsx(oa,{form:O,level:s,onFinish:p})})]})},da=()=>{const{data:a}=Fe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/")};return t.useEffect(()=>{document.title=ue.system_name+": School Education Levels",s()},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"School Education Levels"})]})}),e.jsx(ca,{height:80})]})})},ua=()=>(t.useEffect(()=>{document.title=ue.system_name+": Programmes"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Programmes(High Level Education)"})]})}),e.jsx(gs,{height:80,control:!0})]})})),ma=a=>{const[s,m]=t.useState(a.region.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.region.name,isActive:a.region.isActive})},[a.form,a.region]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.region.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},ha=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(1),[q,A]=t.useState(0),[P,w]=t.useState(20),[d,z]=t.useState(""),[_,T]=t.useState(!1),[L,H]=t.useState(!0);re();const[V]=n.useForm(),[O]=n.useForm(),D=!de.useBreakpoint().lg,[F,C]=t.useState(!1),c=i=>{m(i),C(!0)},p=async i=>{const{data:h}=await I.custom({url:"",method:"post",meta:{operation:"updateRegion",variables:{id:{value:i.id,type:"Int",required:!0},name:{value:i.name,type:"String",required:!0},isActive:{value:i.isActive,type:"Boolean",required:!0}},fields:["success","message",{region:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});h.success?(o.success(h.message),O.resetFields(),C(!1),x(r.map(U=>U.id===h.region.id?h.region:U))):o.error(h.message)},f=async()=>{const{data:i}=await I.custom({url:"",method:"post",meta:{operation:"syncMtaa",variables:{},fields:["success","message"]}});i.success?o.success(i.message):o.error(i.message)},l=async i=>{const{data:h}=await I.custom({url:"",method:"post",meta:{operation:"deleteRegion",variables:{id:{value:i,type:"Int",required:!0}},fields:["success","message"]}});h.success?(o.success(h.message),x(r.filter(U=>U.id!==i))):o.error(h.message)},S=()=>{o("Canceled")},b=[{title:"Name",dataIndex:"name",fixed:!0,render:(i,h,U)=>e.jsx("span",{children:e.jsx("a",{children:h.name})})},{title:"Created",dataIndex:"created",render:(i,h,U)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(h.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(i,h,U)=>e.jsx("a",{children:h!=null&&h.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(i,h,U)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ee,{title:"Are you sure to delete this member?",onConfirm:()=>l(h==null?void 0:h.id),onCancel:()=>S,okText:"Yes",cancelText:"No",disabled:!(h!=null&&h.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(h!=null&&h.canDelete)})}),e.jsx(k,{disabled:!(h!=null&&h.canEdit),onClick:()=>c(h),icon:e.jsx(ve,{})})]})}],j=async(i,h="",U=20)=>{const{data:N}=await I.custom({url:"",method:"get",meta:{operation:"regions",variables:{page:{value:i,type:"Int",required:!0},key:{value:h,type:"String",required:!1},pageSize:{value:U,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});v(N.page),A(N.total),T(N.hasNext),x(N.results),H(!1)};return t.useEffect(()=>{j(y,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:V,onFinish:i=>{v(1),r.length=0,j(1,i.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:D?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>f(),children:"Sync Mtaa"})})]}),e.jsx("div",{children:e.jsx(ce,{loading:L,columns:b,dataSource:r,scroll:{y:window.innerHeight-310},pagination:{onChange:(i,h)=>{w(h),j(i,d,h)},onShowSizeChange:(i,h)=>{w(h),j(i,d,h)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Edit Region Informations",width:"30vw",open:F,onClose:i=>C(i),children:e.jsx(ma,{form:O,region:s,onFinish:p})})]})},xa=()=>(t.useEffect(()=>{document.title=ue.system_name+": Regions"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Regions"})]})}),e.jsx(ha,{height:80})]})})),{Option:Le}=je,{TextArea:pa}=B,ga=a=>{var u,M,ae,ke,et,tt,st,at,nt,we,De,it,Ve,Ke,He,We,Ye,Ge,Qe,K,J,ge,ye,Ee;const[s,m]=t.useState([]),[r,x]=t.useState([]),[y,v]=t.useState([]),[q,A]=t.useState([]),[P,w]=t.useState([]),[d,z]=t.useState([]),[_,T]=t.useState(0),[L,H]=t.useState(0),[V,O]=t.useState(),[Y,D]=t.useState(!1),[F,C]=t.useState(!1),[c,p]=t.useState(!1),[f,l]=t.useState([]),[S,b]=t.useState(),j=async(Q=1,le="")=>{const{data:Ne}=await I.custom({url:"",method:"get",meta:{operation:"ownerships",variables:{page:{value:Q,type:"Int",required:!0},key:{value:le,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});v(Ne.results)},i=async(Q,le="")=>{p(!0);const{data:Ne}=await I.custom({url:"",method:"get",meta:{operation:"wards",variables:{key:{value:le,type:"String",required:!1},district:{value:Q,type:"Int",requiqred:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});A(Ne.results),p(!1)},h=async(Q,le="")=>{C(!0);const{data:Ne}=await I.custom({url:"",method:"get",meta:{operation:"districts",variables:{key:{value:le,type:"String",required:!1},region:{value:Q,type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});w(Ne.results),C(!1)},U=async(Q="")=>{const{data:le}=await I.custom({url:"",method:"get",meta:{operation:"regions",variables:{key:{value:Q,type:"String",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});z(le.results),a.form.setFieldsValue({district:void 0,ward:void 0})},N=async Q=>{T(Q),h(Q)},g=async Q=>{H(Q),i(Q)},X=async(Q="")=>{const{data:le}=await I.custom({url:"",method:"get",meta:{operation:"schoolsTypes",variables:{key:{value:Q,type:"String",required:!1},excludeAssigned:{value:!0,type:"Boolean",required:!1},schoolId:{value:parseInt(a.school.id),type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});m(le.results)},G=async(Q=1,le="")=>{const{data:Ne}=await I.custom({url:"",method:"get",meta:{operation:"curriculums",variables:{page:{value:Q,type:"Int",required:!0},key:{value:le,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});x(Ne.results)},$=Q=>{b(Q)},R=Q=>{l(Q)};return t.useEffect(()=>{var Q,le,Ne,gt,yt,jt,ft,St,vt,Ct,bt,It,At,kt,Ft,Nt,Tt,qt,Pt,Et,Mt,Dt,zt,Lt,Bt,_t,Ot,Rt,Ut,wt,Vt,Kt,Ht,Wt;X(),j(),U(),G(),U((gt=(Ne=(le=(Q=a.school)==null?void 0:Q.ward)==null?void 0:le.district)==null?void 0:Ne.region)==null?void 0:gt.name),N(parseInt((ft=(jt=(yt=a.school)==null?void 0:yt.ward)==null?void 0:jt.district)==null?void 0:ft.region.id)),$(parseInt((vt=(St=a.school)==null?void 0:St.applicableSyllabus)==null?void 0:vt.id)),C(!1),g(parseInt((bt=(Ct=a.school)==null?void 0:Ct.ward)==null?void 0:bt.district.id)),p(!1),a.form.setFieldsValue({name:(It=a.school)==null?void 0:It.name,serial_number:(At=a.school)==null?void 0:At.serialNumber,ownership_id:(Ft=(kt=a.school)==null?void 0:kt.ownership)==null?void 0:Ft.id,school_type_id:(Tt=(Nt=a.school)==null?void 0:Nt.schoolType)==null?void 0:Tt.id,region_id:(Mt=(Et=(Pt=(qt=a.school)==null?void 0:qt.ward)==null?void 0:Pt.district)==null?void 0:Et.region)==null?void 0:Mt.id,district_id:(Lt=(zt=(Dt=a.school)==null?void 0:Dt.ward)==null?void 0:zt.district)==null?void 0:Lt.id,ward_id:(_t=(Bt=a.school)==null?void 0:Bt.ward)==null?void 0:_t.id,longitude:(Ot=a.school)==null?void 0:Ot.longitude,latitude:(Rt=a.school)==null?void 0:Rt.latitude,bio:(Ut=a.school)==null?void 0:Ut.bio,logo:(wt=a.school)==null?void 0:wt.logo,is_universal:(Vt=a.school)==null?void 0:Vt.isUniversal,njiwa_account:(Kt=a.school)==null?void 0:Kt.hasNjiwaAccount,curriculum_id:parseInt((Wt=(Ht=a.school)==null?void 0:Ht.curriculum)==null?void 0:Wt.id.toString())})},[a.randKey]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:Q=>{Q.schoolTypes=f,Q.id=a.school.id,Q.is_active=a.school.isActive,a.onFinish(Q)},requiredMark:!1,initialValues:{name:(u=a.school)==null?void 0:u.name,serial_number:(M=a.school)==null?void 0:M.serialNumber,ownership_id:(ke=(ae=a.school)==null?void 0:ae.ownership)==null?void 0:ke.id,school_type_id:(tt=(et=a.school)==null?void 0:et.schoolType)==null?void 0:tt.id,region_id:(we=(nt=(at=(st=a.school)==null?void 0:st.ward)==null?void 0:at.district)==null?void 0:nt.region)==null?void 0:we.id,district_id:(Ve=(it=(De=a.school)==null?void 0:De.ward)==null?void 0:it.district)==null?void 0:Ve.id,ward_id:(He=(Ke=a.school)==null?void 0:Ke.ward)==null?void 0:He.id,longitude:(We=a.school)==null?void 0:We.longitude,latitude:(Ye=a.school)==null?void 0:Ye.latitude,bio:(Ge=a.school)==null?void 0:Ge.bio,logo:(Qe=a.school)==null?void 0:Qe.logo,is_universal:(K=a.school)==null?void 0:K.isUniversal,njiwa_account:(J=a.school)==null?void 0:J.hasNjiwaAccount,curriculum_id:(ye=(ge=a.school)==null?void 0:ge.curriculum)==null?void 0:ye.id},children:[e.jsxs(te,{children:[e.jsxs(W,{span:11,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"serial_number",label:"Serial Number",rules:[{required:!0,type:"string",message:"Please input Serial Number ..."}],children:e.jsx(B,{size:"large",placeholder:"Enter Serial Number ..."})}),e.jsx(n.Item,{label:"School Type",rules:[{required:!0,type:"string",message:"Please choose School Type"}],children:e.jsx(je,{mode:"multiple",showSearch:!0,size:"large",placeholder:"Select a School Type",optionFilterProp:"children",onChange:R,onSearch:Q=>{},filterOption:(Q,le)=>le.children.toLowerCase().includes(Q.toLowerCase()),dropdownStyle:{zIndex:9999},children:s.map((Q,le)=>e.jsx(Le,{value:Q.id,children:Q.name}))})}),e.jsx(n.Item,{name:"ownership_id",label:"School Ownership",rules:[{required:!0,type:"string",message:"Please choose Ownership"}],children:e.jsx(je,{showSearch:!0,size:"large",placeholder:"Select a Ownership",optionFilterProp:"children",onChange:Q=>{},onSearch:Q=>{},filterOption:(Q,le)=>le.children.toLowerCase().includes(Q.toLowerCase()),dropdownStyle:{zIndex:9999},children:y.map((Q,le)=>e.jsx(Le,{value:Q.id,children:Q.name}))})}),e.jsx(n.Item,{label:"Curriculum",name:"curriculum_id",rules:[{required:!1,type:"number",message:"Please choose Curriculum"}],children:e.jsx(je,{size:"large",showSearch:!0,placeholder:"Select Curriculum",optionFilterProp:"children",onChange:$,onSearch:Q=>{},filterOption:(Q,le)=>le.children.toLowerCase().includes(Q.toLowerCase()),dropdownStyle:{zIndex:9999},children:r.map((Q,le)=>e.jsx(Le,{value:parseInt(Q.id.toString()),children:Q.name}))})}),e.jsx(n.Item,{name:"bio",label:"Biography",style:{marginBottom:"12px"},children:e.jsx(pa,{rows:4})}),e.jsx(n.Item,{name:"logo",label:"Logo",style:{marginBottom:"12px"},children:e.jsx(Me,{beforeUpload:()=>!1,maxCount:1,onChange:Q=>{const le=Q.file;V?V.uid!==le.uid&&(O(le),D(!0)):(O(le),D(!0))},onRemove:()=>{O(void 0),D(!1)},accept:"image/*",children:e.jsx(k,{icon:e.jsx(Ue,{}),size:"large",children:"Click to Select"})})})]}),e.jsxs(W,{span:11,offset:2,children:[e.jsx(n.Item,{name:"region_id",label:"Region",rules:[{required:!0,type:"string",message:"Please Choose Region ..."}],children:e.jsx(je,{showSearch:!0,size:"large",placeholder:"Select a region",optionFilterProp:"children",onChange:Q=>{N(parseInt(Q)),a.form.resetFields(["district_id","ward_id"]),a.form.setFieldsValue({district_id:void 0,ward_id:void 0}),w([]),A([])},onSearch:Q=>{Q.length>2&&U(Q)},filterOption:(Q,le)=>le.children.toLowerCase().includes(Q.toLowerCase()),dropdownStyle:{zIndex:9999},children:d.map((Q,le)=>e.jsx(Le,{value:Q.id,children:Q.name}))})}),e.jsx(n.Item,{name:"district_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"District"}),e.jsx(qe,{spinning:F})]}),rules:[{required:!0,type:"string",message:"Please Choose District ..."}],children:e.jsx(je,{showSearch:!0,size:"large",disabled:F||P.length===0,placeholder:"Select a district",optionFilterProp:"children",onChange:Q=>{g(parseInt(Q)),a.form.setFieldsValue({ward:void 0}),A([])},onSearch:Q=>{Q.length>2&&_!==0&&h(_,Q)},filterOption:(Q,le)=>le.children.toLowerCase().includes(Q.toLowerCase()),dropdownStyle:{zIndex:9999},children:P.map((Q,le)=>e.jsx(Le,{value:Q.id,children:Q.name}))})}),e.jsx(n.Item,{name:"ward_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Ward"}),e.jsx(qe,{spinning:c})]}),children:e.jsx(je,{showSearch:!0,size:"large",disabled:c||q.length===0,placeholder:"Select a ward",optionFilterProp:"children",onChange:Q=>{},onSearch:Q=>{Q.length>2&&i(L,Q)},filterOption:(Q,le)=>le.children.toLowerCase().includes(Q.toLowerCase()),dropdownStyle:{zIndex:9999},children:q.map((Q,le)=>e.jsx(Le,{value:Q.id,children:Q.name}))})}),e.jsx(n.Item,{name:"website",label:"Website",rules:[{required:!1,type:"url",message:"Please input Website Address ..."}],children:e.jsx(B,{size:"large",placeholder:"Enter Website Address ..."})}),e.jsx(n.Item,{name:"latitude",label:"Latitude",rules:[{required:!1,type:"string",message:"Please input Latitude ..."}],children:e.jsx(B,{size:"large",placeholder:"Enter Latitude..."})}),e.jsx(n.Item,{name:"longitude",label:"Longitude",rules:[{required:!1,type:"string",message:"Please input Longitude ..."}],children:e.jsx(B,{size:"large",placeholder:"Enter Longitude..."})}),e.jsx(n.Item,{name:"is_universal",valuePropName:"checked",children:e.jsx(pe,{children:"Universal"})}),e.jsx(n.Item,{name:"njiwa_account",valuePropName:"checked",children:e.jsx(pe,{disabled:(Ee=a.school)==null?void 0:Ee.hasNjiwaAccount,children:"Auto Create Njiwa Account"})})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},ya=a=>{const[s,m]=t.useState([]),[r,x]=t.useState(!0),[y,v]=t.useState(1);t.useState(25);const[q]=n.useForm(),[A,P]=t.useState(0),[w,d]=t.useState(0),[z,_]=t.useState(!0);re(),t.useState(!1),t.useState(!1),t.useState();const T=async H=>{const{data:V}=await I.custom({url:"",method:"post",meta:{operation:"addSchoolAdminstrator",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0},userId:{value:parseInt(H.toString()),type:"Int",required:!0}},fields:["success","message",{member:["id",{school:["id","name"]},{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}});o.remove(),V.success?(o.success(V.message),m(s.filter(O=>O.id.toString()!==H.toString())),a.onAdd(V.member)):o.error(V.message),ct.destroyAll()},L=async(H,V="",O=!1)=>{const{data:Y}=await I.custom({url:"",method:"get",meta:{operation:"notSchoolAdminstrators",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0},page:{value:H,type:"Int",required:!0},key:{value:V,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","firstName","middleName","lastName","fullName","email","pic","created","updated","isActive","canEdit","canDelete","canManage"]}]}});d(Y.total),P(Y.pages),v(Y.page),_(Y.hasNext),m([...s,...Y.results]),x(!1)};return t.useEffect(()=>{s.length=0,m([]),L(1)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(te,{children:e.jsx(W,{span:24,children:e.jsx(n,{layout:"vertical",form:q,onFinish:H=>{s.length=0,m([]),L(1,H.key,!0)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search Adminstrator(s)...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(qe,{spinning:r,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(Ie,{itemLayout:"horizontal",dataSource:s,renderItem:H=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Ie.Item,{style:{margin:0,padding:0},actions:[e.jsx(ee,{placement:"topLeft",title:"Adding "+H.fullName+" to "+a.school.name+"?",onConfirm:()=>T(H.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(es,{})})})],children:e.jsx(Ie.Item.Meta,{avatar:e.jsx(Ze,{src:H.pic}),title:e.jsx("a",{children:H.fullName}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:H.email})})})},"file-"+H.id)})})}),z&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(k,{type:"primary",onClick:()=>{L(y+1)},children:"Load More"})})]})]})},{Option:ja}=je,fa=["female","male","others"],Sa=a=>{const[s,m]=t.useState(!1),[r,x]=t.useState(!1),[y,v]=t.useState(!1),[q,A]=t.useState(!1),[P,w]=t.useState(),[d]=n.useForm(),z=async _=>{A(!0);const{data:T}=await I.custom({url:"",method:"post",meta:{operation:"createSchoolAdminstratorPlain",variables:{schoolId:{value:parseInt(_.school_id),type:"Int",required:!0},firstName:{value:_.first_name,type:"String",required:!0},middleName:{value:_.middle_name,type:"String",required:!0},lastName:{value:_.last_name,type:"String",required:!0},phoneNumber:{value:_.phone_number,type:"String",required:!0},email:{value:_.email,type:"String",required:!1},gender:{value:_.gender,type:"String",required:!1}},fields:["success","message","memberExists","existSameSchool","existSameSchoolNotAuthenticated",{member:["id",{school:["id","name"]},{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}}).catch(L=>(o.error("Error in Creating School Adminstrator"),{data:null})).then(L=>L);T&&(T.success?(o.success(T.message),a.onFinish(T.member)):(o.error(T.message),w(T.message),m(T.memberExists),x(T.existSameSchool),v(T.existSameSchoolNotAuthenticated))),A(!1)};return t.useEffect(()=>{},[a.randKey]),e.jsxs(e.Fragment,{children:[P&&e.jsx(ts,{description:e.jsx(e.Fragment,{children:P}),type:"error",closable:!0}),e.jsxs(n,{layout:"vertical",form:d,onFinish:_=>{_.school_id=a.school.id,z(_)},requiredMark:!0,autoComplete:"off",initialValues:{remember:!1,email:"",password:""},children:[e.jsx(n.Item,{name:"first_name",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter First Name ..."})}),e.jsx(n.Item,{name:"middle_name",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(n.Item,{name:"last_name",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(n.Item,{label:"Gender",name:"gender",rules:[{required:!0,type:"string",message:"Please choose Gender..."}],children:e.jsx(je,{size:"large",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onSearch:_=>{},filterOption:(_,T)=>T.children.toLowerCase().includes(_.toLowerCase()),dropdownStyle:{zIndex:9999},children:fa.map((_,T)=>e.jsx(ja,{value:_,children:_.charAt(0).toUpperCase()+_.slice(1)}))})}),e.jsx(n.Item,{name:"phone_number",label:"Mobile Phone Number",rules:[{required:!0,type:"string",message:"Please input Mobile Phone Number"}],children:e.jsx(B,{size:"large",placeholder:"Enter Mobile Phone Number ..."})}),e.jsx(n.Item,{name:"email",label:"Email Address",rules:[{required:!0,type:"string",message:"Please input Email Address ..."}],children:e.jsx(B,{size:"large",placeholder:"Enter First Name ..."})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(k,{type:"primary",size:"large",color:"red",onClick:()=>{d.resetFields()},danger:!0,children:"Clear"}),e.jsx(k,{size:"large",htmlType:"submit",disabled:q,loading:q,danger:!0,children:"Save"})]})]})]})},va=a=>{const[s,m]=t.useState([]),[r,x]=t.useState(!0),[y,v]=t.useState(1),[q,A]=t.useState(25),[P,w]=t.useState(""),[d]=n.useForm(),[z,_]=t.useState(0),[T,L]=t.useState(0),[H,V]=t.useState(!0);re();const[O,Y]=t.useState(!1),[D,F]=t.useState(!1),C=()=>{Y(!0)},c=b=>{m([b,...s])},p=async b=>{const{data:j}=await I.custom({url:"",method:"post",meta:{operation:"removeSchoolAdminstrator",variables:{id:{value:b,type:"Int",required:!0}},fields:["success","message"]}});j.success?(o.success(j.message),m(s.filter(i=>i.id.toString()!==b.toString()))):o.error(j.message),ct.destroyAll()},f=async b=>{const{data:j}=await I.custom({url:"",method:"post",meta:{operation:"deleteSchoolMember",variables:{id:{value:b,type:"Int",required:!0}},fields:["success","message"]}});j.success?(o.success(j.message),m(s.filter(i=>i.id.toString()!==b.toString()))):o.error(j.message),ct.destroyAll()},l=async(b,j="",i=20)=>{const{data:h}=await I.custom({url:"",method:"get",meta:{operation:"schoolMembers",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0},adminstrator:{value:!0,type:"Boolean",required:!0},page:{value:b,type:"Int",required:!0},key:{value:j,type:"String",required:!1},pageSize:{value:i,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{school:["id","name"]},{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}});L(h.total),_(h.pages),v(h.page),V(h.hasNext),m([...s,...h.results]),x(!1)},S=b=>{m([b,...s]),F(!1)};return t.useEffect(()=>{s.length=0,m([]),l(1,"",20)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{children:[e.jsx(W,{span:16,children:e.jsx(n,{layout:"vertical",form:d,onFinish:b=>{w(b.key),l(0,b.key,q)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search Adminstrator(s)...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(W,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(k,{size:"large",icon:e.jsx(Se,{}),onClick:C,children:"Enroll"}),e.jsx(k,{size:"large",icon:e.jsx(Se,{}),onClick:()=>F(!0),children:"Register New"})]})]}),e.jsxs(qe,{spinning:r,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"65vh",overflowY:"auto"},children:e.jsx(Ie,{itemLayout:"horizontal",dataSource:s,renderItem:b=>{var j,i,h;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Ie.Item,{style:{margin:0,padding:0},actions:[e.jsx(xt,{trigger:["click"],placement:"bottomRight",overlay:e.jsxs(be,{children:[e.jsx(be.Item,{disabled:!b.canDelete,icon:e.jsx(he,{}),children:e.jsx(ee,{placement:"topRight",title:"Are you sure you want to delete this adminstrator?",onConfirm:()=>f(parseInt(b.id.toString())),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(be.Item,{icon:e.jsx(ss,{}),children:e.jsx(ee,{placement:"topRight",title:"Are you sure you want to Remove Adminstrator Role?",onConfirm:()=>p(parseInt(b.id.toString())),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove Adminstrator Role"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(pt,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(Ie.Item.Meta,{avatar:e.jsx(Ze,{src:(j=b.user)==null?void 0:j.pic}),title:e.jsx("a",{children:(i=b.user)==null?void 0:i.fullName}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:(h=b.user)==null?void 0:h.email})})})},"file-"+b.id)})}})}),H&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(k,{type:"primary",onClick:()=>{l(y+1,P)},children:"Load More"})})]}),e.jsx(ze,{title:"Adding School Adminstrators",width:"30vw",onClose:b=>Y(b),open:O,anchor:"right",noOverFlow:!0,children:e.jsx(ya,{randKey:Math.random(),school:a.school,onAdd:c})}),e.jsx(ze,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Registering School Adminstrators"}),e.jsx(ie,{color:"green",style:{marginLeft:10},children:a.school.name})]}),width:"40vw",onClose:b=>F(b),open:D,noOverFlow:!0,children:e.jsx(Sa,{school:a.school,randKey:Math.random(),onFinish:S})})]})},{Option:Be}=je,{TextArea:Ca}=B,ba=a=>{const[s,m]=t.useState([]),[r,x]=t.useState([]),[y,v]=t.useState([]),[q,A]=t.useState([]),[P,w]=t.useState([]),[d,z]=t.useState([]),[_,T]=t.useState(0),[L,H]=t.useState(0),[V,O]=t.useState(),[Y,D]=t.useState(!1),[F,C]=t.useState(!1),[c,p]=t.useState(!1),[f,l]=t.useState([]),[S,b]=t.useState(),j=async(u=1,M="")=>{const{data:ae}=await I.custom({url:"",method:"get",meta:{operation:"ownerships",variables:{page:{value:u,type:"Int",required:!0},key:{value:M,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});v(ae.results)},i=async(u=1,M="")=>{const{data:ae}=await I.custom({url:"",method:"get",meta:{operation:"curriculums",variables:{page:{value:u,type:"Int",required:!0},key:{value:M,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});x(ae.results)},h=async(u,M="")=>{p(!0);const{data:ae}=await I.custom({url:"",method:"get",meta:{operation:"wards",variables:{key:{value:M,type:"String",required:!1},district:{value:u,type:"Int",requiqred:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});A(ae.results),p(!1)},U=async(u,M="")=>{C(!0);const{data:ae}=await I.custom({url:"",method:"get",meta:{operation:"districts",variables:{key:{value:M,type:"String",required:!1},region:{value:u,type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});w(ae.results),C(!1)},N=async(u="")=>{const{data:M}=await I.custom({url:"",method:"get",meta:{operation:"regions",variables:{key:{value:u,type:"String",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});z(M.results),a.form.setFieldsValue({district:void 0,ward:void 0})},g=async(u="")=>{const{data:M}=await I.custom({url:"",method:"get",meta:{operation:"schoolsTypes",variables:{key:{value:u,type:"String",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});m(M.results)},X=async u=>{T(u),U(u)},G=async u=>{H(u),h(u)},$=u=>{l(u)},R=u=>{b(u)};return t.useEffect(()=>{g(),j(),N(),i()},[]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:u=>{u.schoolTypes=f,a.onFinish(u)},requiredMark:!0,children:[e.jsxs(te,{children:[e.jsxs(W,{span:11,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"serial_number",label:"Serial Number",rules:[{required:!0,type:"string",message:"Please input Serial Number ..."}],children:e.jsx(B,{size:"large",placeholder:"Enter Serial Number ..."})}),e.jsx(n.Item,{label:"School Type",name:"schoolTypes",rules:[{required:!0,type:"array",message:"Please choose School Type"}],children:e.jsx(je,{size:"large",mode:"multiple",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onChange:$,onSearch:u=>{},filterOption:(u,M)=>M.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:s.map((u,M)=>e.jsx(Be,{value:u.id,children:u.name}))})}),e.jsx(n.Item,{name:"ownership_id",label:"School Ownership",rules:[{required:!0,type:"string",message:"Please choose Ownership"}],children:e.jsx(je,{size:"large",showSearch:!0,placeholder:"Select a Ownership",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,M)=>M.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:y.map((u,M)=>e.jsx(Be,{value:u.id,children:u.name}))})}),e.jsx(n.Item,{label:"Curriculum",name:"curriculum_id",rules:[{required:!1,type:"number",message:"Please choose Curriculum"}],children:e.jsx(je,{size:"large",showSearch:!0,placeholder:"Select Curriculum",optionFilterProp:"children",onChange:R,onSearch:u=>{},filterOption:(u,M)=>M.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:r.map((u,M)=>e.jsx(Be,{value:parseInt(u.id.toString()),children:u.name}))})}),e.jsx(n.Item,{name:"bio",label:"Biography",style:{marginBottom:"12px"},children:e.jsx(Ca,{rows:4})}),e.jsx(n.Item,{name:"logo",label:"Logo",style:{marginBottom:"12px"},children:e.jsx(Me,{beforeUpload:()=>!1,maxCount:1,onChange:u=>{const M=u.file;V?V.uid!==M.uid&&(O(M),D(!0)):(O(M),D(!0))},onRemove:()=>{O(void 0),D(!1)},accept:"image/*",children:e.jsx(k,{icon:e.jsx(Ue,{}),children:"Click to Select"})})})]}),e.jsxs(W,{span:11,offset:2,children:[e.jsx(n.Item,{name:"region_id",label:"Region",rules:[{required:!0,type:"string",message:"Please Choose Region ..."}],children:e.jsx(je,{size:"large",showSearch:!0,placeholder:"Select a region",optionFilterProp:"children",onChange:u=>{X(parseInt(u)),a.form.setFieldsValue({district:void 0,ward:void 0}),w([]),A([])},onSearch:u=>{u.length>2&&N(u)},filterOption:(u,M)=>M.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:d.map((u,M)=>e.jsx(Be,{value:u.id,children:u.name}))})}),e.jsx(n.Item,{name:"district_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"District"}),e.jsx(qe,{spinning:F})]}),rules:[{required:!0,type:"string",message:"Please Choose District ..."}],children:e.jsx(je,{size:"large",showSearch:!0,disabled:F||P.length===0,placeholder:"Select a district",optionFilterProp:"children",onChange:u=>{G(parseInt(u)),a.form.setFieldsValue({ward:void 0}),A([])},onSearch:u=>{u.length>2&&_!==0&&U(_,u)},filterOption:(u,M)=>M.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:P.map((u,M)=>e.jsx(Be,{value:u.id,children:u.name}))})}),e.jsx(n.Item,{name:"ward_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Ward"}),e.jsx(qe,{spinning:c})]}),children:e.jsx(je,{size:"large",showSearch:!0,disabled:c||q.length===0,placeholder:"Select a ward",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{u.length>2&&h(L,u)},filterOption:(u,M)=>M.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:q.map((u,M)=>e.jsx(Be,{value:u.id,children:u.name}))})}),e.jsx(n.Item,{name:"website",label:"Website",rules:[{required:!1,type:"url",message:"Please input Website Address ..."}],children:e.jsx(B,{size:"large",placeholder:"Enter Website Address ..."})}),e.jsx(n.Item,{name:"latitude",label:"Latitude",rules:[{required:!1,type:"string",message:"Please input Latitude ..."}],children:e.jsx(B,{size:"large",placeholder:"Enter Latitude..."})}),e.jsx(n.Item,{name:"longitude",label:"Longitude",rules:[{required:!1,type:"string",message:"Please input Longitude ..."}],children:e.jsx(B,{size:"large",placeholder:"Enter Longitude..."})}),e.jsx(n.Item,{name:"is_universal",valuePropName:"checked",children:e.jsx(pe,{children:"Universal"})}),e.jsx(n.Item,{name:"njiwa_account",valuePropName:"checked",children:e.jsx(pe,{children:"Auto Create Njiwa Account"})})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Ia=a=>{const[s]=n.useForm(),[m,r]=t.useState(),[x,y]=t.useState(!1),[v,q]=t.useState(""),[A,P]=t.useState(),w=async d=>{const{data:z}=await I.custom({url:"",method:"post",meta:{operation:"createSchoolContract",variables:{contractNumber:{value:d.contract_number,type:"String",required:!0},contractValue:{value:d.contract_value,type:"Float",required:!0},startDate:{value:d.start_date,type:"String",required:!0},endDate:{value:d.end_date,type:"String",required:!0},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0},contractDocument:{value:m,type:"Upload",required:!0},totalMembers:{value:d.total_members,type:"Int",required:!0}},fields:["success","message"]}});z.success?(o.success(z.message),a.onFinish(),s.resetFields()):(q(z.message),o.error(z.message))};return t.useEffect(()=>{},[]),e.jsxs(e.Fragment,{children:[v.length>0&&e.jsx(e.Fragment,{children:e.jsx(Ae.Alert,{description:v,type:"error"})}),e.jsxs(n,{layout:"vertical",form:s,onFinish:d=>{q(""),w(d)},requiredMark:!0,children:[e.jsx(n.Item,{name:"contract_number",label:"Contract Number",rules:[{required:!0,type:"string",message:"Please input Contract Number ..."}],children:e.jsx(B,{size:"large",placeholder:"Enter Contract Number ..."})}),e.jsx(n.Item,{name:"contract_value",label:"Contract Value",rules:[{required:!0,type:"number",message:"Please input Contract Value ..."}],children:e.jsx(Pe,{min:0,defaultValue:0,onChange:()=>{},size:"large",style:{width:"100%"}})}),e.jsx(n.Item,{name:"total_members",label:"Total Members",rules:[{required:!0,type:"number",message:"Please input Total Members ..."}],children:e.jsx(Pe,{min:0,defaultValue:0,onChange:()=>{},size:"large",style:{width:"100%"}})}),e.jsx(n.Item,{name:"start_date",label:"Contract Start Date",rules:[{required:!0,type:"object",message:"Please input Contract Start Date ..."}],children:e.jsx(Oe,{onChange:d=>{P(d)},popupStyle:{zIndex:9999}})}),e.jsx(n.Item,{name:"end_date",label:"Contract End Date",rules:[{required:!0,type:"object",message:"Please input Contract End Date ..."}],children:e.jsx(Oe,{onChange:()=>{},popupStyle:{zIndex:9999},disabledDate:d=>A?d&&d<_e().endOf("day")||d<A.endOf("day"):d&&d<_e().endOf("day")})}),e.jsx(n.Item,{name:"contract_document",label:"Contract Document",style:{marginBottom:"12px"},rules:[{required:!x,type:"object",message:"Please Pick a Contract Document ..."}],children:e.jsx(Me,{beforeUpload:()=>!1,maxCount:1,onChange:d=>{const z=d.file;m?m.uid!==z.uid&&(r(z),y(!0)):(r(z),y(!0))},onRemove:()=>{r(void 0),y(!1)},accept:".pdf",children:e.jsx(k,{icon:e.jsx(Ue,{}),children:"Click to Select"})})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20},children:[e.jsx(k,{size:"large",icon:e.jsx(Re,{}),onClick:()=>{r(void 0),y(!1),s.resetFields()},danger:!0,children:"Reset"}),e.jsx(k,{size:"large",htmlType:"submit",icon:e.jsx(Re,{}),danger:!0,children:"Save"})]})]})]})},Aa=a=>{const[s]=n.useForm(),[m,r]=t.useState(),[x,y]=t.useState(!1),[v,q]=t.useState(""),[A,P]=t.useState(),w=async d=>{const{data:z}=await I.custom({url:"",method:"post",meta:{operation:"updateSchoolContract",variables:{id:{value:parseInt(a.contract.id.toString()),type:"Int",required:!0},contractValue:{value:d.contract_value,type:"Float",required:!0},startDate:{value:d.start_date,type:"String",required:!0},endDate:{value:d.end_date,type:"String",required:!0},contractDocument:{value:m,type:"Upload",required:!1},totalMembers:{value:d.total_members,type:"Int",required:!0}},fields:["success","message",{schoolContract:["id","contractNumber","contractValue","contractDocument","totalMembers","startDate","endDate","created","updated","isActive","canEdit","canDelete","canManage"]}]}});z.success?(o.success(z.message),a.onFinish(z.schoolContract),s.resetFields()):(q(z.message),o.error(z.message))};return t.useEffect(()=>{},[]),e.jsxs(e.Fragment,{children:[v.length>0&&e.jsx(e.Fragment,{children:e.jsx(Ae.Alert,{description:v,type:"error"})}),e.jsxs(n,{layout:"vertical",form:s,onFinish:d=>{q(""),w(d)},requiredMark:!0,initialValues:{start_date:_e(a.contract.startDate),end_date:_e(a.contract.endDate),contract_value:a.contract.contractValue,total_members:a.contract.totalMembers},children:[e.jsx(n.Item,{name:"contract_value",label:"Contract Value",rules:[{required:!0,type:"number",message:"Please input Contract Value ..."}],children:e.jsx(Pe,{min:0,defaultValue:0,onChange:()=>{},size:"large",style:{width:"100%"}})}),e.jsx(n.Item,{name:"total_members",label:"Total Members",rules:[{required:!0,type:"number",message:"Please input Total Members ..."}],children:e.jsx(Pe,{min:0,defaultValue:0,onChange:()=>{},size:"large",style:{width:"100%"}})}),e.jsx(n.Item,{name:"start_date",label:"Contract Start Date",rules:[{required:!0,type:"object",message:"Please input Contract Start Date ..."}],children:e.jsx(Oe,{onChange:d=>{P(d)},popupStyle:{zIndex:9999}})}),e.jsx(n.Item,{name:"end_date",label:"Contract End Date",rules:[{required:!0,type:"object",message:"Please input Contract End Date ..."}],children:e.jsx(Oe,{onChange:()=>{},popupStyle:{zIndex:9999},disabledDate:d=>A?d&&d<_e().endOf("day")||d<A.endOf("day"):d&&d<_e().endOf("day")})}),e.jsx(n.Item,{name:"contract_document",label:"Contract Document",style:{marginBottom:"12px"},rules:[{required:!1,type:"object",message:"Please Pick a Contract Document ..."}],children:e.jsx(Me,{beforeUpload:()=>!1,maxCount:1,onChange:d=>{const z=d.file;m?m.uid!==z.uid&&(r(z),y(!0)):(r(z),y(!0))},onRemove:()=>{r(void 0),y(!1)},accept:".pdf",children:e.jsx(k,{icon:e.jsx(Ue,{}),children:"Click to Select"})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:20},children:e.jsx(k,{size:"large",htmlType:"submit",icon:e.jsx(Re,{}),danger:!0,children:"Save"})})]})]})},ka=a=>{const[s]=n.useForm(),[m,r]=t.useState([]),[x,y]=t.useState(),[v,q]=t.useState(!1),[A,P]=t.useState(1),[w,d]=t.useState(0),[z,_]=t.useState(!1);t.useState(!1);const[T,L]=t.useState(""),[H,V]=t.useState(!1),[O,Y]=t.useState(!1),D=[{title:"Contract Number",dataIndex:"contractNumber",key:"contractNumber",render:(c,p)=>e.jsxs(e.Fragment,{children:[e.jsx("a",{children:c}),p.contractDocument&&e.jsx(fe,{title:"Click to Download Contract Document",children:e.jsx(k,{size:"small",style:{marginLeft:5},danger:!0,onClick:()=>{window.open(p.contractDocument)},children:e.jsx(bs,{})})})]})},{title:"Start Date",dataIndex:"startDate",key:"startDate",render:c=>e.jsx(e.Fragment,{children:Te(c).format("lll")})},{title:"End Date",dataIndex:"endDate",key:"endDate",render:c=>e.jsx(e.Fragment,{children:Te(c).format("lll")})},{title:"Max Members",dataIndex:"totalMembers",key:"totalMembers"},{title:"Contract Value",dataIndex:"contractValue",key:"contractValue",render:(c,p)=>p.contractValue.toLocaleString()},{title:"Created",dataIndex:"created",key:"created",render:c=>e.jsx(e.Fragment,{children:Te(c).format("lll")})},{title:"Created",dataIndex:"created",key:"created",render:c=>e.jsx(e.Fragment,{children:Te(c).format("lll")})},{title:"",dataIndex:"actions",key:"actions",render:(c,p)=>e.jsxs(e.Fragment,{children:[e.jsx(k,{size:"small",onClick:()=>{y(p),Y(!0)},danger:!0,icon:e.jsx(ve,{})}),e.jsx(ee,{title:"Delete the contract?",placement:"topRight",onConfirm:()=>C(p.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(k,{size:"small",danger:!0,icon:e.jsx(he,{})})})]})}],F=async(c,p="",f=20)=>{const{data:l}=await I.custom({url:"",method:"get",meta:{operation:"schoolContracts",variables:{page:{value:c,type:"Int",required:!0},pageSize:{value:f,type:"Int",required:!0},key:{value:p,type:"String",required:!1},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","contractNumber","contractValue","contractDocument","totalMembers","startDate","endDate","created","updated","isActive","canEdit","canDelete","canManage"]}]}});P(l.page),d(l.total),_(l.hasNext),r(l.results),q(!1)},C=async c=>{const{data:p}=await I.custom({url:"",method:"post",meta:{operation:"deleteSchoolContract",variables:{id:{value:c,type:"Int",required:!0}},fields:["success","message"]}});p.success?(o.success(p.message),F(A,T)):o.error(p.message)};return t.useEffect(()=>{F(A,T)},[a.randKey,a.school]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:10,children:e.jsx(n,{layout:"vertical",form:s,onFinish:c=>{},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:14,style:{textAlign:"right"},children:e.jsx(k,{icon:e.jsx(Se,{}),size:"large",onClick:()=>{V(!0)},danger:!0,children:"Add Contract"})})]}),e.jsx(ce,{dataSource:m,columns:D}),e.jsx(ze,{title:"Adding New Contract",anchor:"right",width:"35vw",onClose:c=>V(c),open:H,noOverFlow:!0,children:e.jsx(Ia,{school:a.school,onFinish:()=>{V(!1),F(1,"")}})}),e.jsx(ze,{title:"Updating Contract",anchor:"right",width:"35vw",onClose:c=>Y(c),open:O,noOverFlow:!0,children:e.jsx(Aa,{contract:x,school:a.school,onFinish:c=>{Y(!1),F(1,"")}})})]})},Fa=a=>{const[s]=n.useForm(),m=async r=>{const{data:x}=await I.custom({url:"",method:"post",meta:{operation:"createSchoolNjiwaAccountBilling",variables:{amount:{value:r.amount,type:"Float",required:!1},units:{value:0,type:"Int",required:!1},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0}},fields:["success","message",{bill:["id",{account:["id"]},"billNumber","amount","units","source",{creator:["id","fullName","firstName","middleName","lastName","email","phone"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(y=>({data:null})).then(y=>y);x&&(x.success?(o.success(x.message),a.onFinish(x.bill)):o.error(x.message))};return t.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:s,onFinish:r=>{m(r)},requiredMark:!0,children:[e.jsx(n.Item,{name:"amount",label:"Amount",rules:[{required:!0,type:"number",message:"Please input Amount"}],children:e.jsx(Pe,{min:1,style:{width:"50%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{size:"large",htmlType:"submit",danger:!0,icon:e.jsx(Re,{}),children:"Save"})})]})})},Na=a=>{const[s]=n.useForm(),m=async r=>{const{data:x}=await I.custom({url:"",method:"post",meta:{operation:"createSchoolNjiwaAccountBilling",variables:{amount:{value:0,type:"Float",required:!1},units:{value:r.units,type:"Int",required:!1},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0}},fields:["success","message",{bill:["id",{account:["id"]},"billNumber","amount","units","source",{creator:["id","fullName","firstName","middleName","lastName","email","phone"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(y=>({data:null})).then(y=>y);x&&(x.success?(o.success(x.message),a.onFinish(x.bill)):o.error(x.message))};return t.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:s,onFinish:r=>{m(r)},requiredMark:!0,children:[e.jsx(n.Item,{name:"units",label:"Unit",rules:[{required:!0,type:"number",message:"Please input Unit"}],children:e.jsx(Pe,{min:1,style:{width:"50%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{size:"large",htmlType:"submit",danger:!0,icon:e.jsx(Re,{}),children:"Save"})})]})})},{Title:Jt,Text:$t}=Xe,Ta=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(!1),[q,A]=t.useState(!1),[P,w]=t.useState(!1),[d,z]=t.useState(!1),[_,T]=t.useState(!1),L=async(c,p="",f=20)=>{const{data:l}=await I.custom({url:"",method:"get",meta:{operation:"schoolNjiwaAccountBillings",variables:{page:{value:c,type:"Int",required:!0},key:{value:p,type:"String",required:!1},pageSize:{value:f,type:"Int",required:!1},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{account:["id"]},"billNumber","amount","units","source","synced",{creator:["id","fullName","firstName","middleName","lastName","email","phone"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(S=>(o.error("Error occured while fetching Bills"),{data:null})).then(S=>S);l&&x([...l.results]),v(!1)},H=async()=>{T(!0);const{data:c}=await I.custom({url:"",method:"post",meta:{operation:"ressetNjiwaAccount",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0}},fields:["success","message"]}}).catch(p=>({data:null})).then(p=>p);c&&(c.success?(o.success(c.message),F(),L(1)):o.error(c.message)),T(!1)},V=async c=>{const{data:p}=await I.custom({url:"",method:"post",meta:{operation:"deleteNjiwaAccountBilling",variables:{billId:{value:parseInt(c.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(f=>({data:null})).then(f=>f);p&&(p.success?(o.success(p.message),F(),L(1)):o.error(p.message))},O=async()=>{z(!0);const{data:c}=await I.custom({url:"",method:"post",meta:{operation:"syncNjiwaAccount",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0}},fields:["success","message"]}}).catch(p=>({data:null})).then(p=>p);c&&(c.success?(o.success(c.message),F()):o.error(c.message)),z(!1)},Y=async c=>{x([c,...r]),A(!1),F()},D=async c=>{x([c,...r]),w(!1),F()},F=async()=>{const{data:c}=await I.custom({url:"",method:"get",meta:{operation:"njiwaAccount",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0}},fields:["id","balance","messageUnits"]}}).catch(p=>({data:null})).then(p=>p);c&&m(c)},C=[{title:"Bill Number",dataIndex:"bill_number",key:"billNumber",render:(c,p,f)=>e.jsxs("span",{children:[e.jsx("span",{style:{marginRight:3},children:p.billNumber}),p.synced&&e.jsx(ie,{color:"green",children:"Synced"}),!p.synced&&e.jsx(ie,{color:"red",children:"Not Synced"})]})},{title:"Amount",dataIndex:"amount",key:"amount",render:(c,p,f)=>e.jsx("span",{children:p.amount})},{title:"Units",dataIndex:"units",key:"units",render:(c,p,f)=>e.jsx("span",{children:p.units})},{title:"Paid",dataIndex:"isPaid",key:"isPaid",render:(c,p,f)=>e.jsx("span",{children:p.isPaid?"Yes":"No"})},{title:"Source",dataIndex:"source",key:"source",render:(c,p,f)=>e.jsx("span",{children:p.source})},{title:"",dataIndex:"actions",key:"actions",render:(c,p,f)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ee,{title:"Are you sure delete this bill - > "+p.billNumber+"?",placement:"topRight",onConfirm:()=>V(p.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(k,{danger:!0,icon:e.jsx(he,{})})}),!p.synced&&e.jsx(k,{danger:!0,icon:e.jsx(Ce,{}),style:{marginLeft:5}})]})}];return t.useEffect(()=>{F(),L(1,"",20)},[a.randKey,a.school]),e.jsxs(e.Fragment,{children:[e.jsx(te,{children:e.jsxs(W,{span:24,style:{display:"flex",justifyContent:"space-between",marginBottom:5},children:[e.jsx("span",{children:e.jsx(ee,{title:"Are you sure you want to reset the account?",onConfirm:()=>H(),onCancel:()=>{},okText:"Reset",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(ms,{}),danger:!0,loading:d,children:"Reset"})})}),e.jsxs("span",{children:[e.jsx(k,{icon:e.jsx(Se,{}),danger:!0,onClick:()=>A(!0),children:"Balance"}),e.jsx(k,{icon:e.jsx(Se,{}),danger:!0,onClick:()=>w(!0),children:"Units"}),e.jsx(k,{icon:e.jsx(Ce,{}),danger:!0,onClick:O,loading:d,children:"Sync"})]})]})}),e.jsxs(te,{children:[e.jsx(W,{span:8,children:e.jsx(ot,{loading:y,active:!0,children:e.jsx($e,{hoverable:!0,style:{marginRight:10},onClick:()=>{},children:e.jsxs(Je,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Jt,{level:2,children:s==null?void 0:s.balance}),e.jsx($t,{children:"Balance"})]})})})}),e.jsx(W,{span:8,children:e.jsx(ot,{loading:y,active:!0,children:e.jsx($e,{hoverable:!0,style:{marginRight:10},onClick:()=>{},children:e.jsxs(Je,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Jt,{level:2,children:s==null?void 0:s.messageUnits}),e.jsx($t,{children:"Units"})]})})})})]}),e.jsx(te,{style:{marginTop:10},children:e.jsxs(W,{span:24,children:[e.jsx(ce,{columns:C,dataSource:r}),","]})}),e.jsx(se,{title:"Add Balance",width:"40vw",open:q,onClose:c=>A(c),children:e.jsx(Fa,{school:a.school,onFinish:Y})}),e.jsx(se,{title:"Add Units",width:"40vw",open:P,onClose:c=>w(c),children:e.jsx(Na,{school:a.school,onFinish:D})})]})},qa=a=>{var Ve,Ke,He,We,Ye,Ge,Qe;const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState([]),[q,A]=t.useState([]),[P,w]=t.useState(1),[d,z]=t.useState(0),[_,T]=t.useState(20),[L,H]=t.useState(""),[V,O]=t.useState(!1),[Y,D]=t.useState(!0);re();const[F,C]=t.useState(!1),[c,p]=t.useState(!1),[f,l]=t.useState(!1),[S]=n.useForm(),[b]=n.useForm(),[j,i]=t.useState(!1),[h,U]=t.useState(!1),[N,g]=t.useState(!1),[X,G]=t.useState(!1),$=K=>{m(K),G(!0)},R=async K=>{m(K),g(!0)},u=K=>{m(K),U(!0)},M=K=>{m(K),i(!0)},ae=K=>{m(K),l(!0)},ke=K=>{m(K),p(!0)},et=()=>{C(!0)},tt=async K=>{const{data:J}=await I.custom({url:"",method:"post",meta:{operation:"createSchool",variables:{name:{value:K.name,type:"String",required:!0},serialNumber:{value:K.serial_number,type:"String",required:!0},ownershipId:{value:parseInt(K.ownership_id),type:"Int",required:!0},schoolTypes:{value:K.schoolTypes,type:"[String]",required:!0},regionId:{value:parseInt(K.region_id),type:"Int",required:!1},districtId:{value:parseInt(K.district_id),type:"Int",required:!1},wardId:{value:parseInt(K.ward_id),type:"Int",required:!1},bio:{value:K.bio,type:"String",required:!1},website:{value:K.website,type:"String",required:!1},longitude:{value:K.longitude,type:"Float",required:!1},latitude:{value:K.latitude,type:"Float",required:!1},isUniversal:{value:K.is_universal,type:"Boolean",required:!1},njiwaAccount:{value:K.njiwa_account,type:"Boolean",required:!1},curriculumId:{value:parseInt(K.curriculum_id),type:"Int",required:!1}},fields:["success","message",{school:["id","name","serialNumber","hasNjiwaAccount",{region:["id","name"]},{district:["id","name"]},{ownership:["id","name"]},{schoolType:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},{curriculum:["id","name"]},"latitude","longitude","bio","logo","created","updated","isActive","isUniversal","canEdit","canDelete","canManage"]}]}});J.success?(o.success(J.message),x([J.school,...r]),C(!1),S.resetFields()):o.error(J.message)},st=async K=>{const{data:J}=await I.custom({url:"",method:"post",meta:{operation:"updateSchool",variables:{id:{value:parseInt(K.id),type:"Int",required:!0},name:{value:K.name,type:"String",required:!0},serialNumber:{value:K.serial_number,type:"String",required:!0},ownershipId:{value:parseInt(K.ownership_id),type:"Int",required:!0},schoolTypes:{value:K.schoolTypes,type:"[String]",required:!0},regionId:{value:parseInt(K.region_id),type:"Int",required:!1},districtId:{value:parseInt(K.district_id),type:"Int",required:!1},wardId:{value:parseInt(K.ward_id),type:"Int",required:!1},bio:{value:K.bio,type:"String",required:!1},website:{value:K.website,type:"String",required:!1},longitude:{value:K.longitude,type:"Float",required:!1},latitude:{value:K.latitude,type:"Float",required:!1},isActive:{value:K.is_active,type:"Boolean",required:!1},isUniversal:{value:K.is_universal,type:"Boolean",required:!1},njiwaAccount:{value:K.njiwa_account,type:"Boolean",required:!1},curriculumId:{value:parseInt(K.curriculum_id),type:"Int",required:!1}},fields:["success","message",{school:["id","name","serialNumber","hasNjiwaAccount",{region:["id","name"]},{district:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{ownership:["id","name"]},{schoolType:["id","name"]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},{curriculum:["id","name"]},"latitude","longitude","bio","logo","created","updated","isActive","isUniversal","canEdit","canDelete","canManage"]}]}});J.success?(o.success(J.message),x(r.map(ge=>ge.id===K.id?J.school:ge)),S.resetFields(),p(!1)):o.error(J.message)},at=async K=>{const{data:J}=await I.custom({url:"",method:"post",meta:{operation:"deleteSchool",variables:{id:{value:K,type:"Int",required:!0}},fields:["success","message"]}});J.success?(o.success(J.message),x(r.filter(ge=>parseInt(ge.id.toString())!==parseInt(K.toString())))):o.error(J.message)},nt=async(K,J)=>{const{data:ge}=await I.custom({url:"",method:"post",meta:{operation:"deleteSchoolOperatingType",variables:{schoolOperatingTypeId:{value:parseInt(K.toString()),type:"Int",required:!0}},fields:["success","message",{school:["id","name","serialNumber",{region:["id","name"]},{district:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{ownership:["id","name"]},{schoolType:["id","name"]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},{curriculum:["id","name"]},"latitude","longitude","bio","logo","created","updated","isActive","isUniversal","canEdit","canDelete","canManage"]}]}});ge.success?(o.success(ge.message),x(r.map(ye=>ye.id===J?ge.school:ye))):o.error(ge.message)},we=async K=>{const{data:J}=await I.custom({url:"",method:"post",meta:{operation:"createNjiwaAccount",variables:{schoolId:{value:parseInt(K.toString()),type:"Int",required:!0}},fields:["success","message",{school:["id","name","serialNumber","hasNjiwaAccount",{region:["id","name"]},{district:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{ownership:["id","name"]},{schoolType:["id","name"]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},{curriculum:["id","name"]},"latitude","longitude","bio","logo","created","updated","isActive","isUniversal","canEdit","canDelete","canManage"]}]}});J.success?(o.success(J.message),x(r.map(ge=>ge.id===K?J.school:ge))):o.error(J.message)},De=async(K,J="",ge=20)=>{const{data:ye}=await I.custom({url:"",method:"get",meta:{operation:"schools",variables:{page:{value:K,type:"Int",required:!0},pageSize:{value:ge,type:"Int",required:!0},key:{value:J,type:"String",required:!1},schoolTypes:{value:q,type:"[Int]",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","serialNumber","hasNjiwaAccount",{region:["id","name"]},{district:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{ownership:["id","name"]},{schoolType:["id","name"]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},{curriculum:["id","name"]},"latitude","longitude","bio","logo","created","updated","isUniversal","contractEndDate","isActive","canEdit","canDelete","canManage"]}]}});ye&&(w(ye.page),z(ye.total),O(ye.hasNext),x(ye.results)),D(!1)},it=async(K,J="",ge=20)=>{const{data:ye}=await I.custom({url:"",method:"get",meta:{operation:"schoolsTypes",variables:{page:{value:K,type:"Int",required:!0},pageSize:{value:ge,type:"Int",required:!0},key:{value:J,type:"String",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});v(ye.results)};return t.useEffect(()=>{it(1,"",20),De(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{children:[e.jsx(W,{span:16,children:e.jsx(n,{layout:"vertical",form:b,onFinish:K=>{w(1),r.length=0,De(1,K.key,_)},children:e.jsxs(te,{style:{marginBottom:0},children:[e.jsx(W,{span:20,children:e.jsx(n.Item,{name:"key",style:{marginBottom:3},children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(W,{span:4,children:e.jsx(n.Item,{style:{marginBottom:3},children:e.jsxs(k,{size:"large",htmlType:"submit",onClick:()=>b.submit(),children:[e.jsx(oe,{}),"Search"]})})}),e.jsx(W,{span:24,children:e.jsx(n.Item,{children:e.jsxs("div",{children:[y.map(K=>q.includes(parseInt(K.id.toString()))?e.jsx("a",{onClick:()=>{q.includes(parseInt(K.id.toString()))&&A(q.filter(J=>J!==parseInt(K.id.toString())))},children:e.jsx(ie.CheckableTag,{checked:!0,style:{padding:5},children:K.name})}):e.jsx("a",{onClick:()=>{q.includes(parseInt(K.id.toString()))||A([...q,parseInt(K.id.toString())])},children:e.jsx(ie,{style:{padding:5},children:K.name})})),q.length>0&&e.jsx("a",{onClick:()=>{A([]),b.submit()},children:e.jsx(ie,{style:{padding:5},icon:e.jsx(ss,{}),color:"red",children:"Clear All"})})]})})})]})})}),e.jsx(W,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(k,{size:"large",onClick:et,children:[e.jsx(Se,{}),"Create School"]})})]}),e.jsx(ce,{dataSource:r,columns:[{title:"Name",dataIndex:"name",key:"name",render:(K,J,ge)=>e.jsxs(e.Fragment,{children:[e.jsx("a",{onClick:()=>{},children:J.name}),e.jsx("span",{style:{marginLeft:10},children:J.isUniversal?e.jsx(ie,{color:"red",children:"Universal"}):e.jsx(ie,{color:"green",children:"Not Universal"})})]})},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber"},{title:"Region",dataIndex:"region",key:"region",render:(K,J,ge)=>{var ye,Ee,Q;return e.jsx("span",{children:(Q=(Ee=(ye=J==null?void 0:J.ward)==null?void 0:ye.district)==null?void 0:Ee.region)==null?void 0:Q.name})}},{title:"District",dataIndex:"district",key:"district",render:(K,J,ge)=>{var ye,Ee;return e.jsx("span",{children:(Ee=(ye=J==null?void 0:J.ward)==null?void 0:ye.district)==null?void 0:Ee.name})}},{title:"Ward",dataIndex:"ward",key:"ward",render:(K,J,ge)=>{var ye;return e.jsx("span",{children:(ye=J==null?void 0:J.ward)==null?void 0:ye.name})}},{title:"School Type",dataIndex:"schoolType",key:"schoolType",render:(K,J,ge)=>J.schoolOperatingTypes.map(ye=>e.jsx(fe,{title:"Click to Remove "+ye.schoolType.name,placement:"bottom",children:e.jsx(ee,{title:"Are you sure to delete this Operating Type?",onConfirm:()=>nt(ye.id,J.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{children:e.jsx(ie,{color:"green",children:ye.schoolType.name})})})}))},{title:"Ownership",dataIndex:"Ownership",key:"ownership",render:(K,J,ge)=>e.jsx("span",{children:J.ownership.name})},{title:"Has Njiwa",dataIndex:"hasNjiwaAccount",key:"hasNjiwaAccount",render:(K,J,ge)=>e.jsx("span",{children:J.hasNjiwaAccount?e.jsxs(e.Fragment,{children:[e.jsx(ie,{color:"green",children:"Yes"}),e.jsx(k,{size:"small",onClick:()=>u(J),danger:!0,children:"Config"})]}):e.jsx(e.Fragment,{children:e.jsx(ee,{title:"Are you sure to Activate Njiwa Account for this School? by default School Adminstrator will be granted access to Njiwa Module",onConfirm:()=>we(J.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{children:e.jsx(ie,{color:"red",children:"No"})})})})})},{title:"Contract End Date",dataIndex:"contractEndDate",key:"contractEndDate",render:(K,J,ge)=>J.contractEndDate?e.jsx("span",{children:Te(J.contractEndDate).format("DD/MM/YYYY")}):e.jsx(k,{size:"small",onClick:()=>{R(J)},danger:!0,children:"Add a Contract"})},{title:"",dataIndex:"Action",key:"action",render:(K,J,ge)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(xt,{trigger:["click"],overlay:e.jsxs(be,{children:[e.jsx(be.Item,{icon:e.jsx(Ts,{}),onClick:()=>$(J),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"View"})}),e.jsx(be.Item,{disabled:!J.canDelete,icon:e.jsx(he,{}),onClick:()=>{},children:e.jsx(ee,{placement:"topLeft",title:"Deleting School: "+J.name,onConfirm:()=>at(parseInt(J.id)),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(be.Item,{disabled:!J.canEdit,icon:e.jsx(ve,{}),onClick:()=>ke(J),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(be.Item,{disabled:!J.canEdit,icon:e.jsx(Qt,{}),onClick:()=>ae(J),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Adminstrators"})}),e.jsx(be.Item,{disabled:!J.canManage,icon:e.jsx(lt,{}),onClick:()=>R(J),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Contracts"})}),e.jsx(be.Item,{disabled:!J.canManage,icon:e.jsx(Qt,{}),onClick:()=>M(J),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"School Settings"})}),!J.hasNjiwaAccount&&e.jsx(be.Item,{disabled:!J.canManage,icon:e.jsx(Is,{}),children:e.jsx(ee,{title:"Are you sure to Activate Njiwa Account for this School? by default School Adminstrator will be granted access to Njiwa Module",onConfirm:()=>we(J.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Register Njiwa Account"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:ye=>ye.preventDefault(),children:e.jsx(pt,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],pagination:{onChange:(K,J)=>{T(J),De(K,L,J)},onShowSizeChange:(K,J)=>{T(J),De(K,L,J)},total:d,pageSize:_,position:["bottomCenter"],showQuickJumper:!0},scroll:{y:window.innerHeight-310}}),e.jsx(se,{title:"Registering School",width:"50%",destroyOnClose:!0,open:F,onClose:K=>C(K),children:e.jsx(ba,{form:S,onFinish:tt})}),e.jsx(se,{title:"Edit School Informations",width:"50vw",open:c,onClose:K=>p(K),children:e.jsx(ga,{school:s,form:S,onFinish:st,randKey:Math.random()})}),e.jsx(se,{title:"School System Adminstrators",width:"50vw",open:f,onClose:K=>l(K),children:e.jsx(va,{randKey:Math.random(),school:s})}),e.jsx(se,{title:"School Settings",width:"50%",open:j,onClose:K=>i(K),children:e.jsx(ys,{school:s,full:!0,randKey:Math.random()})}),e.jsx(se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"red"},children:s==null?void 0:s.name}),e.jsx("span",{style:{marginLeft:5},children:"Contracts"})]}),width:"70vw",open:h,onClose:K=>U(K),children:e.jsx(Ta,{school:s,full:!0,randKey:Math.random()})}),e.jsx(se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"red"},children:s==null?void 0:s.name}),e.jsx("span",{style:{marginLeft:5},children:"Contracts"})]}),width:"90vw",open:N,onClose:K=>g(K),children:e.jsx(ka,{school:s,randKey:Math.random()})}),e.jsx(ze,{anchor:"right",title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"red"},children:s==null?void 0:s.name}),e.jsx("span",{style:{marginLeft:5},children:"Details"})]}),width:"50vw",open:X,onClose:K=>G(K),children:e.jsx(e.Fragment,{children:e.jsxs(Ae.Descriptions,{title:"",column:1,children:[e.jsx(Ae.Descriptions.Item,{label:"School Name",children:s==null?void 0:s.name}),e.jsx(Ae.Descriptions.Item,{label:"Serial Number",children:s==null?void 0:s.serialNumber}),e.jsx(Ae.Descriptions.Item,{label:"Curriculum",children:(Ve=s==null?void 0:s.curriculum)==null?void 0:Ve.name}),e.jsx(Ae.Descriptions.Item,{label:"School Types",children:s==null?void 0:s.schoolOperatingTypes.map((K,J)=>e.jsx(ie,{color:"green",children:K.schoolType.name},J))}),e.jsx(Ae.Descriptions.Item,{label:"Region",children:(We=(He=(Ke=s==null?void 0:s.ward)==null?void 0:Ke.district)==null?void 0:He.region)==null?void 0:We.name}),e.jsx(Ae.Descriptions.Item,{label:"District",children:(Ge=(Ye=s==null?void 0:s.ward)==null?void 0:Ye.district)==null?void 0:Ge.name}),e.jsx(Ae.Descriptions.Item,{label:"Ward",children:(Qe=s==null?void 0:s.ward)==null?void 0:Qe.name}),e.jsx(Ae.Descriptions.Item,{label:"Latitude",children:s==null?void 0:s.latitude}),e.jsx(Ae.Descriptions.Item,{label:"Longitude",children:s==null?void 0:s.longitude})]})})})]})},Pa=()=>(t.useEffect(()=>(document.title=ue.system_name+": Schools",document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),e.jsx(xe,{children:e.jsxs(e.Fragment,{children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Schools"})]})}),e.jsx(qa,{})]})})),ns=a=>e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:s=>{a.onFinish(s)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})}),is=a=>{const[s,m]=t.useState(a.ward.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.ward.name,isActive:a.ward.isActive})},[a.form,a.ward]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.ward.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Ea=a=>{t.useState();const[s,m]=t.useState([]),[r,x]=t.useState(1),[y,v]=t.useState(0),[q,A]=t.useState(20),[P,w]=t.useState(""),[d,z]=t.useState(!1),[_,T]=t.useState(!0);re();const[L]=n.useForm();de.useBreakpoint();const H=async Y=>{const{data:D}=await I.custom({url:"",method:"post",meta:{operation:"addSchoolTypeCurriculum",variables:{schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0},curriculumId:{value:parseInt(Y.toString()),type:"Int",required:!0}},fields:["success","message",{schoolTypeCurriculum:["id",{schoolType:["id"]},{curriculum:["id","name","code","description"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});o.remove(),D.success?(o.success(D.message),a.onAdd(D.schoolTypeCurriculum),m(s.filter(F=>F.id!==Y))):o.error(D.message)},V=[{title:"Name",dataIndex:"name",fixed:!0,render:(Y,D)=>e.jsx("span",{children:e.jsx("a",{children:D.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(Y,D)=>e.jsx("span",{children:e.jsx("a",{children:D.code})})},{title:"",dataIndex:"action",render:(Y,D)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ee,{title:"Are you sure to Add this School Type Curriculum?",placement:"left",onConfirm:()=>H(D==null?void 0:D.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(D!=null&&D.canManage),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(Se,{}),disabled:!(D!=null&&D.canManage)})})})}],O=async(Y,D="",F=20)=>{const{data:C}=await I.custom({url:"",method:"get",meta:{operation:"schoolTypeCurriculumsToAdd",variables:{page:{value:Y,type:"Int",required:!0},key:{value:D,type:"String",required:!1},pageSize:{value:F,type:"Int",required:!1},schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}});x(C.page),v(C.total),z(C.hasNext),m(C.results),T(!1)};return t.useEffect(()=>{O(r,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsx(te,{style:{marginTop:10},children:e.jsx(W,{span:24,children:e.jsx(n,{layout:"vertical",form:L,onFinish:Y=>{x(1),s.length=0,O(1,Y.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{children:e.jsx(ce,{loading:_,columns:V,dataSource:s,scroll:{x:!0},pagination:{onChange:(Y,D)=>{A(D),O(Y,P,D)},total:y,pageSize:q,position:["bottomCenter"],showQuickJumper:!0}})})]})},Ma=a=>{t.useState();const[s,m]=t.useState([]),[r,x]=t.useState(1),[y,v]=t.useState(0),[q,A]=t.useState(20),[P,w]=t.useState(""),[d,z]=t.useState(!1),[_,T]=t.useState(!0);re();const[L]=n.useForm();de.useBreakpoint().lg,t.useState(!1);const[V,O]=t.useState(!1),Y=()=>{O(!0)},D=async f=>{const{data:l}=await I.custom({url:"",method:"post",meta:{operation:"removeSchoolTypeCurriculum",variables:{schoolTypeCurriculumId:{value:parseInt(f.toString()),type:"Int",required:!0}},fields:["success","message"]}});l.success?(o.success(l.message),m(s.filter(S=>S.id!==f))):o.error(l.message)},F=()=>{o("Canceled")},C=[{title:"Name",dataIndex:"name",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:e.jsx("a",{children:l.curriculum.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:e.jsx("a",{children:l.curriculum.code})})},{title:"Created",dataIndex:"created",render:(f,l,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(l.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(f,l,S)=>e.jsx("a",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,l,S)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ee,{title:"Are you sure to delete this School Type Curriculum?",onConfirm:()=>D(l==null?void 0:l.id),onCancel:()=>F,okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(l!=null&&l.canDelete)})})})}],c=async(f,l="",S=20)=>{const{data:b}=await I.custom({url:"",method:"get",meta:{operation:"schoolTypeCurriculums",variables:{page:{value:f,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:S,type:"Int",required:!1},schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{schoolType:["id"]},{curriculum:["id","name","code","description"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});x(b.page),v(b.total),z(b.hasNext),m(b.results),T(!1)},p=async f=>{m([f,...s])};return t.useEffect(()=>{c(r,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:12,children:e.jsx(n,{layout:"vertical",form:L,onFinish:f=>{x(1),s.length=0,c(1,f.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{size:"large",icon:e.jsx(Se,{}),onClick:()=>Y(),children:"Add"})})]}),e.jsx("div",{children:e.jsx(ce,{loading:_,columns:C,dataSource:s,scroll:{x:!0,y:"50vh"},pagination:{onChange:(f,l)=>{A(l),c(f,P,l)},total:y,pageSize:q,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(ze,{title:"Adding Curriculums",anchor:"right",width:"35vw",open:V,noOverFlow:!0,onClose:()=>{O(!1)},children:e.jsx(Ea,{schoolType:a.schoolType,onAdd:p})})]})},{Option:Da}=je,za=a=>{const[s,m]=t.useState(!1),[r,x]=t.useState([]),[y]=n.useForm(),v=async A=>{const{data:P}=await I.custom({url:"",method:"post",meta:{operation:"createSchoolTypeGrade",variables:{schoolTypeId:{value:A.school_type_id,type:"Int",required:!0},gradeId:{value:A.grade_id,type:"Int",required:!0},minScore:{value:A.min_score,type:"Int",required:!0},maxScore:{value:A.max_score,type:"Int",required:!0}},fields:["success","message",{schoolTypeGrade:["id",{grade:["id","name"]},"minScore","maxScore","isActive","created","updated","canEdit","canDelete","canManage"]}]}});P.success?(o.success(P.message),y.resetFields(),q(1,"",20),a.onFinish(P.schoolTypeGrade)):o.error(P.message)},q=async(A,P="",w=20)=>{m(!0);const{data:d}=await I.custom({url:"",method:"get",meta:{operation:"schoolTypeGradesToAdd",variables:{page:{value:A,type:"Int",required:!0},key:{value:P,type:"String",required:!1},pageSize:{value:w,type:"Int",required:!1},schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});x(d.results),m(!1)};return t.useEffect(()=>{q(1,"",20)},[a.schoolType]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:y,onFinish:A=>{A.school_type_id=parseInt(a.schoolType.id.toString()),v(A)},requiredMark:!1,initialValues:{remember:!1,email:"",password:""},children:[e.jsx(n.Item,{name:"grade_id",label:"Grade",rules:[{required:!0,type:"number",message:"Please select Grade"}],children:e.jsx(je,{size:"large",dropdownStyle:{zIndex:9999},children:r.map(A=>e.jsx(Da,{value:parseInt(A.id.toString()),children:A.name},A.id))})}),e.jsx(n.Item,{name:"min_score",label:"Min Score (%)",rules:[{required:!0,type:"number",message:"Please input Min Score"},{validator:(A,P)=>P&&P>y.getFieldValue("max_score")?Promise.reject("Min Score must be less than Max Score"):Promise.resolve()}],children:e.jsx(Pe,{size:"large",min:0,max:100,style:{width:"50%"}})}),e.jsx(n.Item,{name:"max_score",label:"Max Score (%)",rules:[{required:!0,type:"number",message:"Please input Max Score"},{validator:(A,P)=>P&&P<y.getFieldValue("min_score")?Promise.reject("Max Score must be greater than Min Score"):Promise.resolve()}],children:e.jsx(Pe,{size:"large",min:0,max:100,style:{width:"50%"}})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{size:"large",htmlType:"submit",icon:e.jsx(Re,{}),disabled:s,danger:!0,children:"Save"})})]})})},La=a=>{const[s,m]=t.useState([]),[r,x]=t.useState(1),[y,v]=t.useState(0),[q,A]=t.useState(20),[P,w]=t.useState(""),[d,z]=t.useState(!1),[_,T]=t.useState(!0);re();const[L]=n.useForm();de.useBreakpoint().lg,t.useState(!1);const[V,O]=t.useState(!1),Y=()=>{O(!0)},D=async f=>{const{data:l}=await I.custom({url:"",method:"post",meta:{operation:"deleteSchoolTypeGrade",variables:{id:{value:parseInt(f.toString()),type:"Int",required:!0}},fields:["success","message"]}});l.success?(o.success(l.message),m(s.filter(S=>S.id!==f))):o.error(l.message)},F=()=>{o("Canceled")},C=[{title:"Name",dataIndex:"name",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:e.jsx("a",{children:l.grade.name})})},{title:"Min Score",dataIndex:"minScore",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:e.jsx("a",{children:l.minScore})})},{title:"Max Score",dataIndex:"maxScore",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:e.jsx("a",{children:l.maxScore})})},{title:"Created",dataIndex:"created",render:(f,l,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(l.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(f,l,S)=>e.jsx("a",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,l,S)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ee,{title:"Are you sure to delete this School Grade?",onConfirm:()=>D(l==null?void 0:l.id),onCancel:()=>F,okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(l!=null&&l.canDelete),danger:!0})})})}],c=async(f,l="",S=20)=>{const{data:b}=await I.custom({url:"",method:"get",meta:{operation:"schoolTypeGrades",variables:{page:{value:f,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:S,type:"Int",required:!1},schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{grade:["id","name"]},"minScore","maxScore","isActive","created","updated","canEdit","canDelete","canManage"]}]}});x(b.page),v(b.total),z(b.hasNext),m(b.results),T(!1)},p=async f=>{m([f,...s])};return t.useEffect(()=>{c(r,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:12,children:e.jsx(n,{layout:"vertical",form:L,onFinish:f=>{x(1),s.length=0,c(1,f.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{size:"large",icon:e.jsx(Se,{}),onClick:()=>Y(),danger:!0,children:"Add"})})]}),e.jsx("div",{children:e.jsx(ce,{loading:_,columns:C,dataSource:s,scroll:{x:!0,y:"50vh"},pagination:{onChange:(f,l)=>{A(l),c(f,P,l)},total:y,pageSize:q,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Adding Grade",width:"30vw",open:V,onClose:f=>O(f),children:e.jsx(za,{schoolType:a.schoolType,onFinish:p})})]})},Ba=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(25),[q,A]=t.useState(""),[P,w]=t.useState(1),[d,z]=t.useState(0),[_,T]=t.useState(!1),[L,H]=t.useState(!0);re();const[V]=n.useForm(),[O]=n.useForm();de.useBreakpoint().lg;const[D,F]=t.useState(!1),[C,c]=t.useState(!1),[p,f]=t.useState(!1),[l,S]=t.useState(!1),b=u=>{m(u),S(!0)},j=u=>{m(u),f(!0)},i=u=>{m(u),c(!0)},h=async u=>{const{data:M}=await I.custom({url:"",method:"post",meta:{operation:"updateSchoolsTypes",variables:{id:{value:u.id,type:"Int",required:!0},name:{value:u.name,type:"String",required:!0},isActive:{value:u.isActive,type:"Boolean",required:!0}},fields:["success","message",{schoolType:["id","name","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}});M.success?(o.success(M.message),O.resetFields(),c(!1),x(r.map(ae=>parseInt(ae.id.toString())===parseInt(u.id)?M.schoolType:ae))):o.error(M.message)},U=async u=>{const{data:M}=await I.custom({url:"",method:"post",meta:{operation:"updateSchoolOwnership",variables:{id:{value:u.id,type:"Int",required:!0},name:{value:u.name,type:"String",required:!0},isActive:{value:u.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});M.success?(o.success(M.message),O.resetFields(),c(!1),x(r.map(ae=>ae.id===M.schoolType.id?M.level:ae))):o.error(M.message)},N=async u=>{const{data:M}=await I.custom({url:"",method:"post",meta:{operation:"deleteSchoolsEducationLevel",variables:{id:{value:parseInt(u.toString()),type:"Int",required:!0}},fields:["success","message"]}});M.success?(o.success(M.message),x(r.filter(ae=>ae.id!==u))):o.error(M.message)},g=()=>{o("Canceled")},X=[{title:"Name",dataIndex:"name",fixed:!0,render:(u,M,ae)=>e.jsx("span",{children:e.jsx("a",{children:M.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(u,M,ae)=>e.jsx("span",{children:e.jsx("a",{children:u})})},{title:"Grading System",dataIndex:"code",fixed:!0,render:(u,M,ae)=>e.jsx("span",{children:e.jsxs(k,{onClick:()=>b(M),danger:!0,children:[e.jsx(lt,{}),"Configure"]})})},{title:"Created",dataIndex:"created",render:(u,M,ae)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(M.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(u,M,ae)=>e.jsx("a",{children:M!=null&&M.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(u,M,ae)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(fe,{title:"View/Manage Application Curriculums",placement:"left",color:"green",children:e.jsx(k,{style:{marginRight:3},onClick:()=>j(M),icon:e.jsx(lt,{}),disabled:!(M!=null&&M.canManage),danger:!0})}),e.jsx(ee,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>N(M==null?void 0:M.id),onCancel:()=>g,okText:"Yes",cancelText:"No",disabled:!(M!=null&&M.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{style:{marginRight:3},icon:e.jsx(he,{}),disabled:!(M!=null&&M.canDelete),danger:!0})}),e.jsx(fe,{title:"Edit "+(M==null?void 0:M.name)+" Ownership",color:"green",placement:"left",children:e.jsx(k,{style:{marginRight:3},icon:e.jsx(ve,{}),disabled:!(M!=null&&M.canEdit),onClick:()=>i(M),danger:!0})})]})}],G=async(u,M="",ae=25)=>{const{data:ke}=await I.custom({url:"",method:"get",meta:{operation:"schoolsTypes",variables:{page:{value:u,type:"Int",required:!0},key:{value:M,type:"String",required:!1},pageSize:{value:ae,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});w(ke.page),z(ke.total),T(ke.hasNext),x([...ke.results]),H(!1)},$=async()=>{const{data:u}=await I.custom({url:"",method:"post",meta:{operation:"syncSchoolsTypes",variables:{},fields:["success","message"]}});u.success?(o.success(u.message),r.length=0,x([]),G(1)):o.error(u.message)},R=async()=>{const{data:u}=await I.custom({url:"",method:"post",meta:{operation:"syncDefaultGrading",variables:{},fields:["success","message"]}});u.success?o.success(u.message):o.error(u.message)};return t.useEffect(()=>{G(P)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:8,children:e.jsx(n,{layout:"vertical",form:V,onFinish:u=>{w(1),r.length=0,G(1,u.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(W,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(fe,{title:"Synchronize Defualt Grading",color:"green",children:e.jsx(k,{style:{marginRight:3},size:"large",icon:e.jsx(Ce,{}),onClick:()=>R(),danger:!0,children:"Default Grading"})}),e.jsx(fe,{title:"Synchronize Default School Ownerships",color:"green",children:e.jsx(k,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>$(),danger:!0,children:"Types"})})]})]}),e.jsx(ce,{loading:L,columns:X,dataSource:r,scroll:{x:!0},pagination:{onChange:(u,M)=>{v(M),G(u,q,M)},total:d,pageSize:y,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(se,{title:"Edit School Type Informations",width:"60vw",open:C,onClose:u=>c(u),children:e.jsx(is,{form:O,ward:s,onFinish:h})}),e.jsx(se,{title:"Create School Type Informations",width:"60vw",open:D,onClose:u=>F(u),children:e.jsx(ns,{form:O,onFinish:U})}),e.jsx(se,{title:"Applicable Curriculums for "+(s==null?void 0:s.name),width:"60vw",open:p,onClose:u=>{f(u)},children:e.jsx(Ma,{schoolType:s})}),e.jsx(se,{title:(s==null?void 0:s.name)+" Grading System",width:"60vw",open:l,onClose:u=>{S(u)},children:e.jsx(La,{schoolType:s})})]})},_a=()=>(t.useEffect(()=>{document.title=ue.system_name+": School Types"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Schools Types"})]})}),e.jsx(Ba,{height:80})]})})),Oa=a=>{t.useState();const[s,m]=t.useState([]),[r,x]=t.useState(25),[y,v]=t.useState(""),[q,A]=t.useState(1),[P,w]=t.useState(0),[d,z]=t.useState(!1),[_,T]=t.useState(!0);re();const[L]=n.useForm();n.useForm();const V=!de.useBreakpoint().lg,[O,Y]=t.useState(!1),[D,F]=t.useState(!1),C=async()=>{const{data:S}=await I.custom({url:"",method:"post",meta:{operation:"synchronizeGrades",variables:{},fields:["success","message"]}});S.success&&(o.success(S.message),l(1))},c=async S=>{const{data:b}=await I.custom({url:"",method:"post",meta:{operation:"deleteGrade",variables:{id:{value:parseInt(S.toString()),type:"Int",required:!0}},fields:["success","message"]}});b.success?(o.success(b.message),m(s.filter(j=>j.id!==S))):o.error(b.message)},p=()=>{o("Canceled")},f=[{title:"Name",dataIndex:"name",fixed:!0,render:(S,b,j)=>e.jsx("span",{children:e.jsx("a",{children:b.name})})},{title:"Created",dataIndex:"created",render:(S,b,j)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(b.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(S,b,j)=>e.jsx("a",{children:b!=null&&b.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(S,b,j)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ee,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>c(b==null?void 0:b.id),onCancel:()=>p,okText:"Yes",cancelText:"No",disabled:!(b!=null&&b.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{style:{marginRight:3},icon:e.jsx(he,{}),disabled:!(b!=null&&b.canDelete),danger:!0})}),e.jsx(fe,{title:"Edit "+(b==null?void 0:b.name)+" Ownership",color:"green",placement:"left",children:e.jsx(k,{style:{marginRight:3},icon:e.jsx(ve,{}),disabled:!(b!=null&&b.canEdit),onClick:()=>{},danger:!0})})]})}],l=async(S,b="",j=25)=>{const{data:i}=await I.custom({url:"",method:"get",meta:{operation:"grades",variables:{page:{value:S,type:"Int",required:!0},key:{value:b,type:"String",required:!1},pageSize:{value:j,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});A(i.page),w(i.total),z(i.hasNext),m([...i.results]),T(!1)};return t.useEffect(()=>{l(q)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:V?24:20,children:e.jsx(n,{layout:"vertical",form:L,onFinish:S=>{A(1),s.length=0,l(1,S.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:V?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(fe,{title:"Synchronize Default Grades",children:e.jsx(k,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>C(),danger:!0})})})]}),e.jsx(ce,{loading:_,columns:f,dataSource:s,scroll:{x:!0},pagination:{onChange:(S,b)=>{x(b),l(S,y,b)},total:P,pageSize:r,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(se,{title:"Edit Grade",width:"60vw",open:D,onClose:S=>F(S),children:e.jsx(e.Fragment,{})}),e.jsx(se,{title:"Create Grade",width:"60vw",open:O,onCancel:S=>Y(S),children:e.jsx(e.Fragment,{})})]})},Ra=()=>(t.useEffect(()=>{document.title=ue.system_name+": Grades"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Grades"})]})}),e.jsx(Oa,{height:80})]})})),Ua=a=>{const[s]=n.useForm(),[m,r]=t.useState(a.ownership.isActive),x=async y=>{const{data:v}=await I.custom({url:"",method:"post",meta:{operation:"updateSchoolsOwnerships",variables:{id:{value:y.id,type:"Int",required:!0},name:{value:y.name,type:"String",required:!0},isActive:{value:y.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});v.success?(o.success(v.message),s.resetFields(),a.onFinish(v.ownership)):o.error(v.message)};return t.useEffect(()=>{a.form.setFieldsValue({name:a.ownership.name,isActive:a.ownership.isActive})},[a.form,a.ownership]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:y=>{y.isActive=m,y.id=parseInt(a.ownership.id),x(y)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:m,onChange:()=>r(!m),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},wa=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(1),[q,A]=t.useState(0),[P,w]=t.useState(!1),[d,z]=t.useState(20),[_,T]=t.useState(""),[L,H]=t.useState(!0);re();const[V]=n.useForm(),[O]=n.useForm(),D=!de.useBreakpoint().lg,[F,C]=t.useState(!1),[c,p]=t.useState(!1),f=N=>{m(N),p(!0)},l=async N=>{x(r.map(g=>parseInt(g.id.toString())===parseInt(N.id.toString())?N:g)),p(!1)},S=async N=>{const{data:g}=await I.custom({url:"",method:"post",meta:{operation:"updateSchoolOwnership",variables:{id:{value:N.id,type:"Int",required:!0},name:{value:N.name,type:"String",required:!0},isActive:{value:N.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});g.success?(o.success(g.message),O.resetFields(),p(!1),x(r.map(X=>X.id===g.ownership.id?g.ownership:X))):o.error(g.message)},b=async N=>{const{data:g}=await I.custom({url:"",method:"post",meta:{operation:"deleteSchoolOwnership",variables:{id:{value:parseInt(N.toString()),type:"Int",required:!0}},fields:["success","message"]}});g.success?(o.success(g.message),x(r.filter(X=>X.id!==N))):o.error(g.message)},j=()=>{o("Canceled")},i=[{title:"Name",dataIndex:"name",fixed:!0,render:(N,g,X)=>e.jsx("span",{children:e.jsx("a",{children:g.name})})},{title:"Created",dataIndex:"created",render:(N,g,X)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(g.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(N,g,X)=>e.jsx("a",{children:g!=null&&g.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(N,g,X)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ee,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>b(g==null?void 0:g.id),onCancel:()=>j,okText:"Yes",cancelText:"No",disabled:!(g!=null&&g.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(g!=null&&g.canDelete),danger:!0})}),e.jsx(fe,{title:"Edit "+(g==null?void 0:g.name)+" Ownership",color:"green",children:e.jsx(k,{icon:e.jsx(ve,{}),disabled:!(g!=null&&g.canEdit),onClick:()=>f(g),danger:!0})})]})}],h=async(N,g="",X=20)=>{const{data:G}=await I.custom({url:"",method:"get",meta:{operation:"ownerships",variables:{page:{value:N,type:"Int",required:!0},key:{value:g,type:"String",required:!1},pageSize:{value:X,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});v(G.page),A(G.total),w(G.hasNext),x(G.results),H(!1)},U=async()=>{const{data:N}=await I.custom({url:"",method:"post",meta:{operation:"syncSchoolsOwnerships",variables:{},fields:["success","message"]}});N.success?(o.success(N.message),r.length=0,x([]),h(1)):o.error(N.message)};return t.useEffect(()=>{h(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:V,onFinish:N=>{v(1),r.length=0,T(N.key),h(1,N.key,d)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(W,{span:D?24:4,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(fe,{title:"Synchronize Default School Ownerships",children:e.jsx(k,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>U()})}),e.jsx(fe,{title:"Create New School Ownership",children:e.jsx(k,{size:"large",icon:e.jsx(Se,{}),onClick:()=>C(!0)})})]})]}),e.jsx("div",{children:e.jsx(ce,{loading:L,columns:i,dataSource:r,scroll:{x:!0},pagination:{onChange:(N,g)=>{z(g),h(N,_,g)},total:q,pageSize:d,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Edit School Ownership Informations",width:"30vw",open:c,onClose:N=>p(N),children:e.jsx(Ua,{form:O,ownership:s,onFinish:l})}),e.jsx(se,{title:"Create School Ownership Informations",width:"30vw",open:F,onClose:N=>C(N),children:e.jsx(ns,{form:O,onFinish:S})})]})},Va=()=>(t.useEffect(()=>{document.title=ue.system_name+": School Ownerships"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"School Ownerships"})]})}),e.jsx(wa,{height:80})]})})),Ka=a=>{const[s,m]=t.useState(a.member.isAdmin),[r,x]=t.useState(a.member.isStaff);return t.useEffect(()=>{a.form.setFieldsValue({firstName:a.member.firstName,middleName:a.member.middleName,lastName:a.member.lastName,email:a.member.email,phone:a.member.phone,isAdmin:a.member.isAdmin,isStaff:a.member.isStaff})},[a.form,a.member]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:y=>{y.id=parseInt(a.member.id),y.isAdmin=s,y.isStaff=r,a.onFinish(y)},requiredMark:!0,children:[e.jsx(n.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter First Name ..."})}),e.jsx(n.Item,{name:"middleName",label:"Middle Name",rules:[{required:!1,type:"string",message:"Please input Middle Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(n.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(n.Item,{name:"email",label:"Email",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(B,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(n.Item,{name:"phone",label:"Mobile Phone Number",rules:[{required:!0,type:"string",message:"Please input Mobile Phone Number ..."}],children:e.jsx(B,{size:"large",placeholder:"Enter Mobile Phone Number ..."})}),e.jsx(n.Item,{name:"isAdmin",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{defaultChecked:s,onChange:()=>{m(!s)},children:"Admin"})}),e.jsx(n.Item,{name:"isStaff",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{defaultChecked:r,checked:r,onChange:()=>{x(!r)},children:"Staff"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Ha=["id","firstName","lastName","email","middleName","fullName","phone","pic","username","isActive","isStaff","isAdmin","ldapAuth","created","updated","canEdit","canDelete","canManage"],Wa=a=>{const[s,m]=t.useState(!1),[r,x]=t.useState(!1),[y,v]=t.useState(!1),q=async A=>{const{data:P}=await I.custom({url:"",method:"post",meta:{operation:"createUserExtended",variables:{firstName:{value:A.firstName,type:"String",required:!0},middleName:{value:A.middleName,type:"String",required:!1},lastName:{value:A.lastName,type:"String",required:!0},username:{value:A.username,type:"String",required:!1},email:{value:A.email,type:"String",required:!y},phone:{value:A.phone,type:"String",required:!0},password:{value:A.password,type:"String",required:!y},passwordRepeat:{value:A.passwordRepeat,type:"String",required:!y},isAdmin:{value:A.isAdmin,type:"Boolean",required:!1},isStaff:{value:A.isStaff,type:"Boolean",required:!1},ldapAuth:{value:A.ldapAuth,type:"Boolean",required:!1}},fields:["success","message",{user:Ha}]}});P.success?(o.success(P.message),a.onFinish(P.user)):o.error(P.message)};return t.useEffect(()=>{},[a.form]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:A=>{A.isAdmin=s,A.isStaff=r,A.ldapAuth=y,y||(A.username=A.email),q(A)},requiredMark:!0,children:[e.jsxs("div",{style:{maxHeight:"70vh",overflowY:"auto",padding:20},children:[e.jsx(n.Item,{name:"ldapAuth",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{defaultChecked:y,onChange:()=>{v(!y)},children:"LDAP Authentication"})}),e.jsx(n.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter First Name ..."})}),e.jsx(n.Item,{name:"middleName",label:"Middle Name",rules:[{required:!1,type:"string",message:"Please input Middle Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(n.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(n.Item,{name:"email",label:e.jsxs(e.Fragment,{children:["Email Address",!y&&e.jsx(ie,{color:"green",children:"Username"})]}),rules:[{required:!y,type:"email",message:"Please input Email Address"}],children:e.jsx(B,{size:"large",placeholder:"Enter Email Address ..."})}),y&&e.jsx(n.Item,{name:"username",label:"Username",rules:[{required:y,type:"string",message:"Please input Username ..."}],children:e.jsx(B,{size:"large",placeholder:"Enter Username ..."})}),!y&&e.jsxs(e.Fragment,{children:[e.jsx(n.Item,{name:"password",label:"Password",rules:[{required:!y,type:"string",message:"Please input Password ..."}],children:e.jsx(B,{size:"large",type:"password",placeholder:"Enter Password ..."})}),e.jsx(n.Item,{name:"passwordRepeat",label:"Password Confirm",rules:[{required:!y,type:"string",message:"Please input Password Confirm ..."}],children:e.jsx(B,{size:"large",type:"password",placeholder:"Enter Password Confirm ..."})})]}),e.jsx(n.Item,{name:"phone",label:"Mobile Phone",rules:[{required:!0,type:"string",message:"Please input Mobile Phone"}],children:e.jsx(B,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(n.Item,{name:"isAdmin",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{defaultChecked:s,onChange:()=>{m(!s)},children:"Admin"})}),e.jsx(n.Item,{name:"isStaff",rules:[{required:!1,type:"boolean"}],children:e.jsx(pe,{defaultChecked:r||y,checked:r||y,onChange:()=>{x(!r)},children:"Staff"})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{size:"large",htmlType:"submit",danger:!0,children:"Save"})})]})})},{Paragraph:Ya}=Xe,Ga=a=>{var r,x,y,v,q;const[s]=n.useForm(),m=async A=>{const{data:P}=await I.custom({url:"",method:"post",meta:{operation:"createLdapCredentials",variables:{userId:{value:A.userId,type:"Int",required:!0},username:{value:A.username,type:"String",required:!1},password:{value:A.password,type:"String",required:!1},passwordConfirm:{value:A.passwordConfirm,type:"String",required:!1}},fields:["success","message"]}});P.success?(o.success(P.message),s.resetFields(),a.onFinish()):o.error(P.message)};return t.useEffect(()=>{},[a.member]),e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Copy the link below and send it to the user to create their LDAP credentials",e.jsx("span",{style:{color:"red"},children:"Link Expires in 24Hours"})]}),e.jsx(ts,{type:"info",message:e.jsx(e.Fragment,{children:e.jsx(Ya,{copyable:!0,style:{fontSize:"22px"},children:window.location.origin+"/auth/ldap/"+Te().add("h",24).valueOf()+"/"+((r=a.member)==null?void 0:r.id)+"/login?fname="+((x=a.member)==null?void 0:x.firstName)+"&lname="+((y=a.member)==null?void 0:y.lastName)+"&mname="+((v=a.member)==null?void 0:v.middleName)+"&email="+((q=a.member)==null?void 0:q.email)})})}),e.jsx("div",{style:{marginTop:50},children:e.jsxs(n,{layout:"vertical",form:s,onFinish:A=>{var P;A.userId=parseInt(((P=a.member)==null?void 0:P.id)??"0"),m(A)},requiredMark:!0,children:[e.jsx(n.Item,{name:"username",label:"Username",rules:[{required:!0,type:"string",message:"Please input Username"}],children:e.jsx(B,{size:"large",placeholder:"Enter Username ..."})}),e.jsx(n.Item,{name:"password",label:"Password",rules:[{required:!0,type:"string",message:"Please input Password"}],children:e.jsx(B,{size:"large",type:"password",placeholder:"Enter Password ..."})}),e.jsx(n.Item,{name:"passwordConfirm",label:"Confirm Password",rules:[{required:!0,type:"string",message:"Please input Confirm Password"},({getFieldValue:A})=>({validator(P,w){return!w||A("password")===w?Promise.resolve():Promise.reject(new Error("The two passwords that you entered do not match!"))}})],children:e.jsx(B,{size:"large",type:"password",placeholder:"Enter Confirm Password ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})]})},ht=["id","firstName","lastName","email","middleName","fullName","phone","pic","username","isActive","isStaff","isAdmin","ldapAuth","authenticationType","created","updated","canEdit","canDelete","canManage"],Qa=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(1),[q,A]=t.useState(0),[P,w]=t.useState(20),[d,z]=t.useState(""),[_,T]=t.useState(!1),[L,H]=t.useState(!0);re();const[V]=n.useForm(),[O]=n.useForm();de.useBreakpoint().lg;const[D,F]=t.useState(!1),[C,c]=t.useState(!1),[p,f]=t.useState(!1),l=new URLSearchParams(window.location.search),S=l.get("status")||"0",b=l.get("role")||"user",j=R=>{m(R),f(!0)},i=R=>{m(R),F(!0)},h=async()=>{f(!1)},U=async R=>{const{data:u}=await I.custom({url:"",method:"post",meta:{operation:"updateUser",variables:{id:{value:R.id,type:"Int",required:!0},firstName:{value:R.firstName,type:"String",required:!1},middleName:{value:R.middleName,type:"String",required:!1},lastName:{value:R.lastName,type:"String",required:!1},email:{value:R.email,type:"String",required:!1},phone:{value:R.phone,type:"String",required:!1},isAdmin:{value:R.isAdmin,type:"Boolean",required:!1},isStaff:{value:R.isStaff,type:"Boolean",required:!1},ldapAuth:{value:R.ldapAuth,type:"Boolean",required:!1}},fields:["success","message",{user:ht}]}});u.success?(o.success(u.message),O.resetFields(),F(!1)):o.error(u.message)},N=async R=>{x([R,...r]),O.resetFields(),c(!1)},g=async R=>{const{data:u}=await I.custom({url:"",method:"post",meta:{operation:"deleteUser",variables:{id:{value:parseInt(R.toString()),type:"Int",required:!0}},fields:["success","message"]}});u.success?(o.success(u.message),x(r.filter(M=>M.id!==R))):o.error(u.message)},X=async(R,u)=>{const{data:M}=await I.custom({url:"",method:"post",meta:{operation:"blockUnblockUser",variables:{id:{value:parseInt(R.toString()),type:"Int",required:!0},block:{value:u,type:"Boolean",required:!0}},fields:["success","message",{user:ht}]}});M.success?(o.success(M.message),x(r.map(ae=>ae.id===R?M.user:ae))):o.error(M.message)},G=()=>{o("Canceled")},$=async(R,u="",M=20)=>{const{data:ae}=await I.custom({url:"",method:"get",meta:{operation:"users",variables:{page:{value:R,type:"Int",required:!0},key:{value:u,type:"String",required:!1},pageSize:{value:M,type:"Int",required:!1},where:{value:{is_staff:b==="staff",is_admin:b==="adminstrator",is_active:parseInt(S)===1},type:"JSON",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:ht}]}});v(ae.page),A(ae.total),T(ae.hasNext),x(ae.results),H(!1)};return t.useEffect(()=>{$(y)},[l.get("status"),l.get("role")]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:10,children:e.jsx(n,{layout:"vertical",form:V,onFinish:R=>{v(1),r.length=0,$(1,R.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:14,style:{display:"flex",justifyContent:"end"},children:e.jsx(k,{size:"large",icon:e.jsx(Se,{}),onClick:()=>c(!0),danger:!0,children:"Create User"})})]}),e.jsx(ce,{loading:L,columns:[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(R,u,M)=>e.jsx("span",{children:e.jsx("a",{children:u.fullName})})},{title:"Username",dataIndex:"username",render:(R,u,M)=>e.jsx("span",{children:e.jsx("a",{children:u.username})})},{title:"Email",dataIndex:"email",render:(R,u,M)=>e.jsxs("span",{children:[u.email&&e.jsx(ie,{color:"green",children:u.email}),u.phone&&e.jsx(ie,{color:"green",children:u.phone})]})},{title:"LDAP Auth",dataIndex:"created",render:(R,u,M)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:u.ldapAuth?e.jsx(ie,{color:"green",children:"Yes"}):e.jsx(ie,{color:"red",children:"No"})})})},{title:"Date Joined",dataIndex:"created",render:(R,u,M)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(u.created).toLocaleString()})})},{title:"Authentication Type",dataIndex:"authenticationType",render:(R,u,M)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:u.authenticationType})})},{title:"Status",dataIndex:"isActive",render:(R,u,M)=>e.jsx("a",{children:u!=null&&u.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(R,u,M)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[u.ldapAuth&&e.jsx(k,{icon:e.jsx(As,{}),disabled:!(u!=null&&u.canEdit),onClick:()=>j(u),danger:!0}),e.jsx(ee,{title:"Are you sure to delete this member?",placement:"left",onConfirm:()=>g(u==null?void 0:u.id),onCancel:()=>G,okText:"Yes",cancelText:"No",disabled:!(u!=null&&u.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(u!=null&&u.canDelete),danger:!0})}),e.jsx(k,{icon:e.jsx(ve,{}),disabled:!(u!=null&&u.canEdit),onClick:()=>i(u),danger:!0}),u.isActive?e.jsx(ee,{title:"Blocking User???",placement:"left",onConfirm:()=>X(u==null?void 0:u.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(ks,{}),disabled:!(u!=null&&u.canManage),danger:!0})}):e.jsx(ee,{title:"Unblocking User???",placement:"left",onConfirm:()=>X(u==null?void 0:u.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(Fs,{}),disabled:!(u!=null&&u.canEdit),danger:!0})})]})}],dataSource:r,scroll:{y:window.innerHeight-310},pagination:{onChange:(R,u)=>{w(u),$(R,d,u)},onShowSizeChange:(R,u)=>{w(u),$(R,d,u)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(se,{title:"Create User Form",width:"50%",open:C,onClose:R=>c(R),children:e.jsx(Wa,{form:O,onFinish:N})}),e.jsx(se,{title:"Edit User Informations",width:"50%",visible:D,onClose:R=>F(R),children:e.jsx(Ka,{form:O,member:s,onFinish:U})}),e.jsx(se,{title:"Creating LDAP Credentials for User",width:"50vw",open:p,onClose:R=>f(R),children:e.jsx(Ga,{member:s,onFinish:h})})]})},Ja=()=>(t.useEffect(()=>(document.title=ue.system_name+": Users/Members",document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Users/Members"})]})}),e.jsx(Qa,{})]})})),$a=a=>{const[s,m]=t.useState([]),[r,x]=t.useState(1),[y,v]=t.useState(0),[q,A]=t.useState(20),[P,w]=t.useState(""),[d,z]=t.useState(!1),[_,T]=t.useState(!0);re();const[L]=n.useForm(),[H]=n.useForm();de.useBreakpoint().lg;const[O,Y]=t.useState(!1),D=async l=>{const{data:S}=await I.custom({url:"",method:"post",meta:{operation:"createLoginReedemCode",variables:{phone:{value:l.phone,type:"String",required:!0},registrationNumber:{value:l.registrationNumber,type:"String",required:!1},email:{value:l.email,type:"String",required:!1}},fields:["success","message",{loginReedemCode:["id","code","phone","registrationNumber",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","isUsed","canDelete","canEdit","canManage"]}]}}).catch(()=>(o.error("Failed, creating Login Reedem Code"),{data:null})).then(b=>b);S&&(S.success?(o.success(S.message),m([S.loginReedemCode,...s]),H.resetFields()):o.error(S.message))},F=async l=>{const{data:S}=await I.custom({url:"",method:"post",meta:{operation:"resendLoginReedemCode",variables:{id:{value:l,type:"Int",required:!0}},fields:["success","message"]}}).catch(b=>(o.error("Failed, deleting Login Reedem Code"),{data:null})).then(b=>b);S&&(S.success?o.success(S.message):o.error(S.message))},C=async l=>{const{data:S}=await I.custom({url:"",method:"post",meta:{operation:"deleteLoginReedemCode",variables:{id:{value:l,type:"Int",required:!0}},fields:["success","message"]}}).catch(b=>(o.error("Failed, deleting Login Reedem Code"),{data:null})).then(b=>b);S&&(S.success?(o.success(S.message),m(s.filter(b=>b.id!==l))):o.error(S.message))},c=()=>{o("Canceled")},p=[{title:"Reedem Code",dataIndex:"code",fixed:!0,render:(l,S,b)=>e.jsx("span",{children:e.jsx("a",{children:S.code})})},{title:"User",dataIndex:"user",render:(l,S,b)=>{var j,i,h;return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:(S==null?void 0:S.user)&&e.jsxs("span",{children:["Full Name: ",(j=S==null?void 0:S.user)==null?void 0:j.firstName," ",(i=S==null?void 0:S.user)==null?void 0:i.middleName," ",(h=S==null?void 0:S.user)==null?void 0:h.lastName]})}),e.jsx("span",{children:(S==null?void 0:S.email)&&e.jsxs(ie,{children:["Email: ",S==null?void 0:S.email]})}),e.jsx("span",{children:(S==null?void 0:S.registrationNumber)&&e.jsxs(ie,{children:["Reg#: ",S==null?void 0:S.registrationNumber]})})]})}},{title:"Phone Number",dataIndex:"phone",fixed:!0,render:(l,S,b)=>e.jsx("span",{children:e.jsx("a",{children:S.phone})})},{title:"Is Used",dataIndex:"isUsed",render:(l,S,b)=>e.jsx("a",{children:S!=null&&S.isUsed?e.jsx("span",{style:{color:"green"},children:"Used"}):e.jsx("span",{style:{color:"red"},children:"Not Used"})})},{title:"Status",dataIndex:"isActive",render:(l,S,b)=>e.jsx("a",{children:S!=null&&S.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(l,S,b)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ee,{title:"Resend this Reedem Code?",onConfirm:()=>F(S==null?void 0:S.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(S!=null&&S.canManage),overlayStyle:{zIndex:9999},children:e.jsx(k,{size:"large",icon:e.jsx(Ns,{}),disabled:!(S!=null&&S.canDelete)})}),e.jsx(ee,{title:"Are you sure to delete this Reedem Code?",onConfirm:()=>C(S==null?void 0:S.id),onCancel:()=>c,okText:"Yes",cancelText:"No",disabled:!(S!=null&&S.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{size:"large",icon:e.jsx(he,{}),disabled:!(S!=null&&S.canDelete)})})]})}],f=async(l,S="",b=20)=>{const{data:j}=await I.custom({url:"",method:"get",meta:{operation:"loginReedems",variables:{page:{value:l,type:"Int",required:!0},key:{value:S,type:"String",required:!1},pageSize:{value:b,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","code","phone",{user:["id","firstName","lastName","email","middleName","fullName","pic","isActive","isStaff","isAdmin"]},"created","updated","canEdit","canDelete","canManage","isActive","isUsed"]}]}});x(j.page),v(j.total),z(j.hasNext),m(j.results),T(!1)};return t.useEffect(()=>{f(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:10,children:e.jsx(n,{layout:"vertical",form:L,onFinish:l=>{x(1),s.length=0,f(1,l.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:14,style:{display:"flex",justifyContent:"end"},children:e.jsx(k,{icon:e.jsx(es,{}),size:"large",onClick:()=>Y(!0),children:"Reedem"})})]}),e.jsx(ce,{loading:_,columns:p,dataSource:s,scroll:{x:!0},pagination:{onChange:(l,S)=>{A(S),f(l,P,S)},total:y,pageSize:q,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(se,{title:"Creating Reedem Code",open:O,onClose:l=>Y(l),width:"30vw",children:e.jsxs(e.Fragment,{children:[e.jsxs(n,{layout:"vertical",form:H,onFinish:l=>{D(l)},children:[e.jsx(n.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,type:"string",message:"Please input Phone Number"}],children:e.jsx(B,{size:"large",placeholder:"Phone Number ...",prefix:e.jsx(Ss,{}),autoComplete:"off"})}),e.jsx(n.Item,{name:"email",label:"Email Address",children:e.jsx(B,{size:"large",placeholder:"Email Address ...",prefix:e.jsx(vs,{}),autoComplete:"off",allowClear:!0})}),e.jsx(n.Item,{name:"registrationNumber",label:"Registration Number",children:e.jsx(B,{size:"large",placeholder:"Registration Number ...",prefix:e.jsx(Cs,{}),autoComplete:"off",allowClear:!0})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"end"},children:e.jsx(k,{size:"large",onClick:()=>H.submit(),children:"Reedem"})})]})})]})},Za=()=>(t.useEffect(()=>{document.title=ue.system_name+": Login Reedems"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Login Reedems"})]})}),e.jsx($a,{height:80})]})})),Xa=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(1),[q,A]=t.useState(0),[P,w]=t.useState(20),[d,z]=t.useState(""),[_,T]=t.useState(!1),[L,H]=t.useState(!0);re();const[V]=n.useForm(),[O]=n.useForm(),D=!de.useBreakpoint().lg,[F,C]=t.useState(!1),c=i=>{m(i),C(!0)},p=()=>{C(!1)},f=async i=>{const{data:h}=await I.custom({url:"",method:"post",meta:{operation:"updateWard",variables:{id:{value:i.id,type:"Int",required:!0},name:{value:i.name,type:"String",required:!0},isActive:{value:i.isActive,type:"Boolean",required:!0}},fields:["success","message",{ward:["id","name",{district:["id","name",{region:["id","name"]}]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}});h.success?(o.success(h.message),O.resetFields(),C(!1),x(r.map(U=>U.id===h.ward.id?h.ward:U))):o.error(h.message)},l=async i=>{const{data:h}=await I.custom({url:"",method:"post",meta:{operation:"deleteWard",variables:{id:{value:parseInt(i.toString()),type:"Int",required:!0}},fields:["success","message"]}});h.success?(o.success(h.message),x(r.filter(U=>U.id!==i))):o.error(h.message)},S=()=>{o("Canceled")},b=[{title:"Name",dataIndex:"name",fixed:!0,render:(i,h,U)=>e.jsx("span",{children:e.jsx("a",{children:h.name})})},{title:"District",dataIndex:"district",fixed:!0,render:(i,h,U)=>e.jsx("span",{children:e.jsx("a",{children:h.district.name})})},{title:"Region",dataIndex:"region",fixed:!0,render:(i,h,U)=>e.jsx("span",{children:e.jsx("a",{children:h.district.region.name})})},{title:"Created",dataIndex:"created",render:(i,h,U)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(h.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(i,h,U)=>e.jsx("a",{children:h!=null&&h.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(i,h,U)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ee,{title:"Are you sure to delete this Ward?",onConfirm:()=>l(h==null?void 0:h.id),onCancel:()=>S,okText:"Yes",cancelText:"No",disabled:!(h!=null&&h.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(h!=null&&h.canDelete)})}),e.jsx(fe,{title:"Edit "+(h==null?void 0:h.name)+" Ward",color:"green",children:e.jsx(k,{icon:e.jsx(ve,{}),disabled:!(h!=null&&h.canEdit),onClick:()=>c(h)})})]})}],j=async(i,h="",U=20)=>{const{data:N}=await I.custom({url:"",method:"get",meta:{operation:"wards",variables:{page:{value:i,type:"Int",required:!0},key:{value:h,type:"String",required:!1},pageSize:{value:U,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name",{district:["id","name",{region:["id","name"]}]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});v(N.page),A(N.total),T(N.hasNext),x(N.results),H(!1)};return t.useEffect(()=>{j(y)},[]),e.jsxs(e.Fragment,{children:[e.jsx(te,{style:{marginTop:10},children:e.jsx(W,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:V,onFinish:i=>{v(1),r.length=0,j(1,i.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{children:e.jsx(ce,{loading:L,columns:b,dataSource:r,scroll:{y:window.innerHeight-310},pagination:{onChange:(i,h)=>{w(h),j(i,d,h)},onShowSizeChange:(i,h)=>{w(h),j(1,d,h)},showSizeChanger:!0,total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Edit Ward Informations",width:"30vw",open:F,onCancel:p,children:e.jsx(is,{form:O,ward:s,onFinish:f})})]})},en=()=>(t.useEffect(()=>{document.title=ue.system_name+": Wards"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Wards"})]})}),e.jsx(Xa,{height:80})]})})),tn=a=>{t.useState();const[s,m]=t.useState([]),[r,x]=t.useState(1),[y,v]=t.useState(0),[q,A]=t.useState(20),[P,w]=t.useState(""),[d,z]=t.useState(!1),[_,T]=t.useState(!0);re();const[L]=n.useForm();n.useForm();const V=!de.useBreakpoint().lg,O=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(F,C,c)=>e.jsxs(Je,{direction:"vertical",children:[e.jsx("span",{children:C.fullName}),e.jsx("span",{children:C.email})]})},{title:"",dataIndex:"action",render:(F,C,c)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ee,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Add"}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:5},children:C.fullName}),e.jsx("span",{style:{marginLeft:5},children:"As Private Tutor?"})]}),onConfirm:()=>Y(C.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(C!=null&&C.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(Se,{}),disabled:!(C!=null&&C.canDelete)})})})}],Y=async F=>{const{data:C}=await I.custom({url:"",method:"post",meta:{operation:"addPrivateTutor",variables:{userId:{value:parseInt(F.toString()),type:"Int",required:!0}},fields:["success","message",{privateTutor:["id",{user:["id","firstName","middleName","lastName","fullName","email","isActive","created","updated","canEdit","canDelete","canManage"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(o.remove(),o.error("Error occured while Adding Private Tutor"),{data:null})).then(c=>c);o.remove(),C&&(C.success?(o.success(C.message),a.onAdd(C.privateTutor)):o.error(C.message))},D=async(F,C="",c=20)=>{T(!0);const{data:p}=await I.custom({url:"",method:"get",meta:{operation:"notPrivateTutors",variables:{page:{value:F,type:"Int",required:!0},key:{value:C,type:"String",required:!1},pageSize:{value:c,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","firstName","middleName","lastName","fullName","email","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(o.remove(),o.error("Error occured while fetching examinations types"),{data:null})).then(f=>f);p&&(x(p.page),v(p.total),z(p.hasNext),m([...p.results])),T(!1)};return t.useEffect(()=>{D(r)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(te,{style:{marginTop:10},children:e.jsx(W,{span:24,children:e.jsx(n,{layout:"vertical",form:L,onFinish:F=>{x(1),s.length=0,D(1,F.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ce,{loading:_,columns:O,dataSource:s,pagination:{onChange:(F,C)=>{A(C),D(F,P,C)},total:y,pageSize:q,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0,y:"68vh"}})]})},sn=a=>{t.useState();const[s,m]=t.useState([]),[r,x]=t.useState(1),[y,v]=t.useState(0),[q,A]=t.useState(20),[P,w]=t.useState(""),[d,z]=t.useState(!1),[_,T]=t.useState(!0);re();const[L]=n.useForm();n.useForm(),de.useBreakpoint().lg;const[V,O]=t.useState(!1),Y=async f=>{m([f,...s])},D=async f=>{const{data:l}=await I.custom({url:"",method:"post",meta:{operation:"deletePrivateTutor",variables:{privateTutorId:{value:parseInt(f.toString()),type:"Int",required:!0}},fields:["success","message"]}});l.success?(o.success(l.message),m(s.filter(S=>S.id!==f))):o.error(l.message)},F=()=>{o("Canceled")},C=async(f,l)=>{const{data:S}=await I.custom({url:"",method:"post",meta:{operation:"blockUnblockPrivateTutor",variables:{privateTutorId:{value:parseInt(f.toString()),type:"Int",required:!0},blocked:{value:l,type:"Boolean",required:!0}},fields:["success","message",{privateTutor:["id",{user:["id","firstName","middleName","lastName","fullName","email","isActive","created","updated","canEdit","canDelete","canManage"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(l?o.error("Error occured while Unblocking Private Tutor"):o.error("Error occured while Blocking Private Tutor"),{data:null})).then(b=>b);S&&(S.success?(o.success(S.message),m(s.map(b=>b.id===f?S.privateTutor:b))):o.error(S.message))},c=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:e.jsx("a",{children:l.user.fullName})})},{title:"Email",dataIndex:"email",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:l.user.email})},{title:"Created",dataIndex:"created",render:(f,l,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(l.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(f,l,S)=>e.jsx("span",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,l,S)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[l.isActive?e.jsx(ee,{title:"Are you sure to Block this Private Tutor?",onConfirm:()=>C(l==null?void 0:l.id,!1),onCancel:()=>F,okText:"Block",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{style:{marginRight:3},icon:e.jsx(ut,{}),disabled:!(l!=null&&l.canDelete),danger:!0})}):e.jsx(ee,{title:"Are you sure to Unblock this Private Tutor?",onConfirm:()=>C(l==null?void 0:l.id,!0),onCancel:()=>F,okText:"Unblock",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{style:{marginRight:3},icon:e.jsx(dt,{}),disabled:!(l!=null&&l.canDelete),danger:!0})}),e.jsx(ee,{title:"Are you sure to delete this Private Tutor?",onConfirm:()=>D(l==null?void 0:l.id),onCancel:()=>F,okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{style:{marginRight:3},icon:e.jsx(he,{}),disabled:!(l!=null&&l.canDelete),danger:!0})})]})}],p=async(f,l="",S=20)=>{const{data:b}=await I.custom({url:"",method:"get",meta:{operation:"privateTutors",variables:{page:{value:f,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:S,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{user:["id","firstName","middleName","lastName","fullName","email"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(j=>(o.error("Error occured while fetching examinations types"),{data:null})).then(j=>j);b&&(x(b.page),v(b.total),z(b.hasNext),m([...b.results])),T(!1)};return t.useEffect(()=>{p(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:8,children:e.jsx(n,{layout:"vertical",form:L,onFinish:f=>{x(1),s.length=0,p(1,f.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{size:"large",icon:e.jsx(Se,{}),onClick:()=>O(!0),danger:!0,children:"Add Tutor"})})]}),e.jsx(ce,{loading:_,columns:c,dataSource:s,pagination:{onChange:(f,l)=>{A(l),p(f,P,l)},onShowSizeChange:(f,l)=>{A(l),p(f,P,l)},total:y,pageSize:q,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:window.innerHeight-310}}),e.jsx(ze,{title:"Adding Private Tutors",anchor:"right",width:"40vw",onClose:f=>O(f),open:V,noOverFlow:!0,children:e.jsx(tn,{onAdd:Y,randKey:Math.random()})})]})},an=()=>(t.useEffect(()=>{document.title=ue.system_name+": Private Tutors"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Private Tutors"})]})}),e.jsx(sn,{height:80})]})})),nn=a=>{const s=async m=>{const{data:r}=await I.custom({url:"",method:"post",meta:{operation:"createPaymentPackage",variables:{name:{value:m.name,type:"String",required:!0},code:{value:m.code,type:"String",required:!0},amount:{value:m.amount,type:"Float",required:!0},description:{value:m.description,type:"String",required:!1},vatIncluded:{value:m.vat_included,type:"Boolean",required:!0}},fields:["success","message",{paymentPackage:["id","name","code","description","amount","isActive","vatIncluded","created","updated","canEdit","canDelete","canManage"]}]}}).catch(x=>(o.error("Error in Creating Payment Package"),{data:null})).then(x=>x);r&&(r.success?(o.success("Payment Package Created Successfully"),a.onFinish(r.paymentPackage)):o.error(r.message))};return t.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:m=>{s(m)},requiredMark:!0,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code ..."}],children:e.jsx(B,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(n.Item,{name:"amount",label:"Amount",initialValue:0,rules:[{required:!0,type:"number",min:0}],children:e.jsx(Pe,{value:0,style:{width:"100%"},size:"large"})}),e.jsx(n.Item,{name:"vat_included",valuePropName:"checked",initialValue:!0,rules:[{required:!0,type:"boolean",message:"Please Check ..."}],children:e.jsx(pe,{children:"VAT Included"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{size:"large",htmlType:"submit",icon:e.jsx(Xt,{}),danger:!0,children:"Save"})})]})})},rn=a=>{const s=async m=>{const{data:r}=await I.custom({url:"",method:"post",meta:{operation:"updatePaymentPackage",variables:{paymentPackageId:{value:m.payment_package_id,type:"Int",required:!0},name:{value:m.name,type:"String",required:!0},code:{value:m.code,type:"String",required:!0},amount:{value:m.amount,type:"Float",required:!0},description:{value:m.description,type:"String",required:!1},vatIncluded:{value:m.vat_included,type:"Boolean",required:!0}},fields:["success","message",{paymentPackage:["id","name","code","description","vatIncluded","amount","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(x=>(o.error("Error in Updating Payment Package"),{data:null})).then(x=>x);r&&(r.success?(o.success("Payment Package Created Successfully"),a.onFinish(r.paymentPackage)):o.error(r.message))};return t.useEffect(()=>{a.paymentPackage&&a.form.setFieldsValue({name:a.paymentPackage.name,code:a.paymentPackage.code,amount:a.paymentPackage.amount,description:a.paymentPackage.description,vat_included:a.paymentPackage.vatIncluded})},[a.randKey]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:m=>{m.payment_package_id=a.paymentPackage.id,s(m)},requiredMark:!0,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code ..."}],children:e.jsx(B,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(n.Item,{name:"amount",label:"Amount",initialValue:0,rules:[{required:!0,type:"number",min:0}],children:e.jsx(Pe,{value:0,style:{width:"100%"},size:"large"})}),e.jsx(n.Item,{name:"vat_included",valuePropName:"checked",initialValue:!0,rules:[{required:!0,type:"boolean",message:"Please Check ..."}],children:e.jsx(pe,{children:"VAT Included"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Update"})})]})})},rs=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(1),[q,A]=t.useState(0),[P,w]=t.useState(20),[d,z]=t.useState(""),[_,T]=t.useState(!1),[L,H]=t.useState(!0);re();const[V]=n.useForm(),[O]=n.useForm(),[Y]=n.useForm();de.useBreakpoint().lg;const[F,C]=t.useState(!1),[c,p]=t.useState(!1),f=N=>{m(N),p(!0)},l=async N=>{x(r.map(g=>g.id===N.id?N:g)),O.resetFields(),p(!1)},S=async N=>{x([N,...r]),Y.resetFields(),C(!1)},b=async N=>{const{data:g}=await I.custom({url:"",method:"post",meta:{operation:"deletePaymentPackage",variables:{paymentPackageId:{value:parseInt(N.toString()),type:"Int",required:!0}},fields:["success","message"]}});g.success?(o.success(g.message),x(r.filter(X=>X.id!==N))):o.error(g.message)},j=()=>{o("Canceled")},i=async(N,g)=>{const{data:X}=await I.custom({url:"",method:"post",meta:{operation:"blockUnblockPaymentPackage",variables:{paymentPackageId:{value:parseInt(N.toString()),type:"Int",required:!0},blocked:{value:g,type:"Boolean",required:!0}},fields:["success","message",{paymentPackage:["id","name","code","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(g?o.error("Error occured while Unblocking Payment Package"):o.error("Error occured while Blocking Payment Package"),{data:null})).then(G=>G);X&&(X.success?(o.success(X.message),x(r.map(G=>G.id===N?X.paymentPackage:G))):o.error(X.message))},h=[{title:"Name",dataIndex:"name",fixed:!0,render:(N,g,X)=>e.jsx("span",{children:e.jsx("a",{children:g.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(N,g,X)=>e.jsx("span",{children:g.code})},{title:"Amount",dataIndex:"amount",fixed:!0,render:(N,g,X)=>e.jsxs("span",{children:[g.amount,e.jsx("span",{style:{marginLeft:10},children:g.vatIncluded?e.jsx(ie,{color:"green",children:"+VAT"}):e.jsx(ie,{color:"red",children:"1VAT"})})]})},{title:"Created",dataIndex:"created",render:(N,g,X)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(g.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(N,g,X)=>e.jsx("span",{children:g!=null&&g.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(N,g,X)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[g.isActive?e.jsx(ee,{title:"Are you sure to Block this Payment Package?",onConfirm:()=>i(g==null?void 0:g.id,!1),onCancel:()=>j,okText:"Block",cancelText:"No",disabled:!(g!=null&&g.canManage),overlayStyle:{zIndex:9999},children:e.jsx(k,{style:{marginRight:3},icon:e.jsx(ut,{}),disabled:!(g!=null&&g.canManage),danger:!0})}):e.jsx(ee,{title:"Are you sure to Unblock this Payment Package?",onConfirm:()=>i(g==null?void 0:g.id,!0),onCancel:()=>j,okText:"Unblock",cancelText:"No",disabled:!(g!=null&&g.canManage),overlayStyle:{zIndex:9999},children:e.jsx(k,{style:{marginRight:3},icon:e.jsx(dt,{}),disabled:!(g!=null&&g.canManage),danger:!0})}),e.jsx(ee,{title:"Are you sure to delete this Payment Package?",onConfirm:()=>b(g==null?void 0:g.id),onCancel:()=>j,okText:"Yes",cancelText:"No",disabled:!(g!=null&&g.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{style:{marginRight:3},icon:e.jsx(he,{}),disabled:!(g!=null&&g.canDelete),danger:!0})}),e.jsx(k,{style:{marginRight:3},icon:e.jsx(ve,{}),disabled:!(g!=null&&g.canEdit),onClick:()=>f(g),danger:!0})]})}],U=async(N,g="",X=20)=>{const{data:G}=await I.custom({url:"",method:"get",meta:{operation:"paymentPackages",variables:{page:{value:N,type:"Int",required:!0},key:{value:g,type:"String",required:!1},pageSize:{value:X,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","code","amount","vatIncluded","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch($=>(o.error("Error occured while fetching Payment Packages"),{data:null})).then($=>$);G&&(v(G.page),A(G.total),T(G.hasNext),x([...G.results])),H(!1)};return t.useEffect(()=>{U(y)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:8,children:e.jsx(n,{layout:"vertical",form:V,onFinish:N=>{v(1),r.length=0,U(1,N.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{size:"large",icon:e.jsx(Se,{}),onClick:()=>C(!0),danger:!0,children:"Add Payment Package"})})]}),e.jsx(ce,{loading:L,columns:h,dataSource:r,pagination:{onChange:(N,g)=>{w(g),U(N,d,g)},onShowSizeChange:(N,g)=>{w(g),U(N,d,g)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:window.innerHeight-310}}),e.jsx(se,{title:"Adding Payment Package",width:"40vw",onClose:()=>C(!1),onOk:()=>C(!1),open:F,destroyOnClose:!0,children:e.jsx(nn,{form:Y,onFinish:S})}),e.jsx(se,{title:"Edit Payment Package",width:"40vw",onClose:N=>p(N),open:c,children:e.jsx(rn,{form:O,onFinish:l,paymentPackage:s,randKey:Math.random()})})]})},ln=()=>(t.useEffect(()=>{document.title=ue.system_name+": Payment Packages"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Payment Packages"})]})}),e.jsx(rs,{height:80})]})})),on=a=>{t.useState();const[s,m]=t.useState([]),[r,x]=t.useState(1),[y,v]=t.useState(0),[q,A]=t.useState(20),[P,w]=t.useState(""),[d,z]=t.useState(!1),[_,T]=t.useState(!0);re();const[L]=n.useForm(),V=!de.useBreakpoint().lg,O=async C=>{const{data:c}=await I.custom({url:"",method:"post",meta:{operation:"deleteOrder",variables:{orderId:{value:parseInt(C.toString()),type:"Int",required:!0}},fields:["success","message"]}});c.success?(o.success(c.message),m(s.filter(p=>p.id!==C))):o.error(c.message)},Y=async(C,c)=>{const{data:p}=await I.custom({url:"",method:"post",meta:{operation:"blockUnblockOrder",variables:{orderId:{value:parseInt(C.toString()),type:"Int",required:!0},blocked:{value:c,type:"Boolean",required:!0}},fields:["success","message",{order:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(f=>(c?o.error("Error occured while Unblocking Payment Package"):o.error("Error occured while Blocking Payment Package"),{data:null})).then(f=>f);p&&(p.success?(o.success(p.message),m(s.map(f=>f.id===C?p.order:f))):o.error(p.message))},D=[{title:"Order#",dataIndex:"order_number",fixed:!0,render:(C,c,p)=>e.jsx("span",{children:e.jsx("a",{children:c.orderNumber})})},{title:"Client",dataIndex:"client",fixed:!0,render:(C,c,p)=>e.jsx("span",{children:c.user.fullName})},{title:"Amount",dataIndex:"amount",fixed:!0,render:(C,c,p)=>e.jsxs("span",{children:[c.amount,e.jsx("span",{style:{marginLeft:10},children:c.vatIncluded?e.jsx(ie,{color:"green",children:"+VAT"}):e.jsx(ie,{color:"red",children:"1VAT"})})]})},{title:"Created",dataIndex:"created",render:(C,c,p)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(c.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(C,c,p)=>e.jsx("span",{children:c!=null&&c.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(C,c,p)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[c.isActive?e.jsx(ee,{title:"Are you sure to Block this Order?",onConfirm:()=>Y(c==null?void 0:c.id,!1),onCancel:()=>{},okText:"Block",cancelText:"No",disabled:!(c!=null&&c.canManage),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(ut,{}),disabled:!(c!=null&&c.canManage)})}):e.jsx(ee,{title:"Are you sure to Unblock this Order?",onConfirm:()=>Y(c==null?void 0:c.id,!0),onCancel:()=>{},okText:"Unblock",cancelText:"No",disabled:!(c!=null&&c.canManage),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(dt,{}),disabled:!(c!=null&&c.canManage)})}),e.jsx(ee,{title:"Are you sure to delete this Order?",onConfirm:()=>O(c==null?void 0:c.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(c!=null&&c.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(c!=null&&c.canDelete)})})]})}],F=async(C,c="",p=20)=>{const{data:f}=await I.custom({url:"",method:"get",meta:{operation:"orders",variables:{page:{value:C,type:"Int",required:!0},key:{value:c,type:"String",required:!1},pageSize:{value:p,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(l=>(o.error("Error occured while fetching Orders"),{data:null})).then(l=>l);f&&(x(f.page),v(f.total),z(f.hasNext),m([...f.results])),T(!1)};return t.useEffect(()=>{F(r)},[]),e.jsxs(e.Fragment,{children:[e.jsx(te,{style:{marginTop:10},children:e.jsx(W,{span:V?24:20,children:e.jsx(n,{layout:"vertical",form:L,onFinish:C=>{x(1),s.length=0,F(1,C.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ce,{loading:_,columns:D,dataSource:s,pagination:{onChange:(C,c)=>{A(c),F(C,P,c)},total:y,pageSize:q,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})]})},cn=()=>(t.useEffect(()=>{document.title=ue.system_name+": Orders"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Orders"})]})}),e.jsx(on,{height:80})]})})),dn=a=>{t.useState();const[s,m]=t.useState([]),[r,x]=t.useState(1),[y,v]=t.useState(0),[q,A]=t.useState(20),[P,w]=t.useState(""),[d,z]=t.useState(!1),[_,T]=t.useState(!0);re();const[L]=n.useForm(),V=!de.useBreakpoint().lg,O=async C=>{const{data:c}=await I.custom({url:"",method:"post",meta:{operation:"deleteOrderPayment",variables:{orderPaymentId:{value:parseInt(C.toString()),type:"Int",required:!0}},fields:["success","message"]}});c.success?(o.success(c.message),m(s.filter(p=>p.id!==C))):o.error(c.message)},Y=async(C,c)=>{const{data:p}=await I.custom({url:"",method:"post",meta:{operation:"blockUnblockOrderPayment",variables:{orderPaymentId:{value:parseInt(C.toString()),type:"Int",required:!0},blocked:{value:c,type:"Boolean",required:!0}},fields:["success","message",{orderPayment:["id","amount","paymentStatus","paymentDate","isActive","created","updated","canEdit","canDelete","canManage",{order:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}]}}).catch(f=>(c?o.error("Error occured while Unblocking Order Payment"):o.error("Error occured while Blocking Order Payment"),{data:null})).then(f=>f);p&&(p.success?(o.success(p.message),m(s.map(f=>f.id===C?p.order:f))):o.error(p.message))},D=[{title:"Order#",dataIndex:"order_number",fixed:!0,render:(C,c,p)=>e.jsx("span",{children:e.jsx("a",{children:c.orderNumber})})},{title:"Client",dataIndex:"client",fixed:!0,render:(C,c,p)=>e.jsx("span",{children:c.user.fullName})},{title:"Order Amount",dataIndex:"amount",fixed:!0,render:(C,c,p)=>e.jsxs("span",{children:[c.order.amount,e.jsx("span",{style:{marginLeft:10},children:c.vatIncluded?e.jsx(ie,{color:"green",children:"+VAT"}):e.jsx(ie,{color:"red",children:"1VAT"})})]})},{title:"Paid Amount",dataIndex:"paidAmount",fixed:!0,render:(C,c,p)=>e.jsx("span",{children:c.amount})},{title:"Receipt#",dataIndex:"receipt",fixed:!0,render:(C,c,p)=>e.jsx("span",{children:c.receiptNumber})},{title:"Payment Date",dataIndex:"paymentDate",render:(C,c,p)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(c.paymentDate).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(C,c,p)=>e.jsx("span",{children:c!=null&&c.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(C,c,p)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[c.isActive?e.jsx(ee,{title:"Are you sure to Block this Order?",onConfirm:()=>Y(c==null?void 0:c.id,!1),onCancel:()=>{},okText:"Block",cancelText:"No",disabled:!(c!=null&&c.canManage),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(ut,{}),disabled:!(c!=null&&c.canManage)})}):e.jsx(ee,{title:"Are you sure to Unblock this Order?",onConfirm:()=>Y(c==null?void 0:c.id,!0),onCancel:()=>{},okText:"Unblock",cancelText:"No",disabled:!(c!=null&&c.canManage),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(dt,{}),disabled:!(c!=null&&c.canManage)})}),e.jsx(ee,{title:"Are you sure to delete this Order?",onConfirm:()=>O(c==null?void 0:c.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(c!=null&&c.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(c!=null&&c.canDelete)})})]})}],F=async(C,c="",p=20)=>{const{data:f}=await I.custom({url:"",method:"get",meta:{operation:"ordersPayments",variables:{page:{value:C,type:"Int",required:!0},key:{value:c,type:"String",required:!1},pageSize:{value:p,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","amount","paymentStatus","paymentDate","isActive","created","updated","canEdit","canDelete","canManage",{order:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}]}}).catch(l=>(o.error("Error occured while fetching Orders Payments"),{data:null})).then(l=>l);f&&(x(f.page),v(f.total),z(f.hasNext),m([...f.results])),T(!1)};return t.useEffect(()=>{F(r)},[]),e.jsxs(e.Fragment,{children:[e.jsx(te,{style:{marginTop:10},children:e.jsx(W,{span:V?24:20,children:e.jsx(n,{layout:"vertical",form:L,onFinish:C=>{x(1),s.length=0,F(1,C.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ce,{loading:_,columns:D,dataSource:s,pagination:{onChange:(C,c)=>{A(c),F(C,P,c)},total:y,pageSize:q,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})]})},un=()=>(t.useEffect(()=>{document.title=ue.system_name+": Orders Payments"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Orders Payments"})]})}),e.jsx(dn,{height:80})]})})),mn=()=>(t.useEffect(()=>{document.title=ue.system_name+": Order Payments"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Order Payments"})]})}),e.jsx(rs,{height:80})]})})),hn=a=>{const[s,m]=t.useState(a.carrier.allowPayment),[r,x]=t.useState(a.carrier.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.carrier.name,allowPayment:a.carrier.allowPayment,isActive:a.carrier.isActive})},[a.form,a.carrier]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:y=>{y.isActive=r,y.allowPayment=s,y.id=parseInt(a.carrier.id),a.onFinish(y)},requiredMark:!1,autoComplete:"off",children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ...",autoComplete:"off"})}),e.jsx(n.Item,{name:"allowPayment",children:e.jsx(pe,{checked:s,onChange:()=>m(!s),children:"Allow Payment"})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:r,onChange:()=>x(!r),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},xn=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(1),[q,A]=t.useState(0),[P,w]=t.useState(20),[d,z]=t.useState(""),[_,T]=t.useState(!1),[L,H]=t.useState(!0);re();const[V]=n.useForm(),[O]=n.useForm(),D=!de.useBreakpoint().lg,[F,C]=t.useState(!1),c=i=>{m(i),C(!0)},p=async i=>{const{data:h}=await I.custom({url:"",method:"post",meta:{operation:"updateTelecomCarrier",variables:{id:{value:i.id,type:"Int",required:!0},name:{value:i.name,type:"String",required:!0},allowPayment:{value:i.allowPayment,type:"Boolean",required:!0},isActive:{value:i.isActive,type:"Boolean",required:!0}},fields:["success","message",{telecomCarrier:["id","name","allowPayment","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(U=>({data:null})).then(U=>U);h&&(h.success?(o.success(h.message),O.resetFields(),C(!1),x(r.map(U=>parseInt(U.id.toString())===parseInt(h.telecomCarrier.id.toString())?h.telecomCarrier:U))):o.error(h.message))},f=async()=>{const{data:i}=await I.custom({url:"",method:"post",meta:{operation:"syncTelecomCarriers",variables:{},fields:["success","message"]}});i.success?(o.success(i.message),j(1,"",20)):o.error(i.message)},l=async i=>{const{data:h}=await I.custom({url:"",method:"post",meta:{operation:"deleteTelecomCarrier",variables:{id:{value:i,type:"Int",required:!0}},fields:["success","message"]}});h.success?(o.success(h.message),x(r.filter(U=>U.id!==i))):h.message},S=()=>{o("Canceled")},b=[{title:"Name",dataIndex:"name",fixed:!0,render:(i,h,U)=>e.jsx("span",{children:e.jsx("a",{children:h.name})})},{title:"Allow Payment",dataIndex:"allowPayment",fixed:!0,render:(i,h,U)=>e.jsx("span",{children:h.allowPayment?e.jsx(ie,{color:"green",children:"Yes"}):e.jsx(ie,{color:"red",children:"NO"})})},{title:"Created",dataIndex:"created",render:(i,h,U)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(h.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(i,h,U)=>e.jsx("a",{children:h!=null&&h.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(i,h,U)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ee,{title:"Are you sure to delete this Telecom Carrier?",onConfirm:()=>l(h==null?void 0:h.id),onCancel:()=>S,okText:"Yes",cancelText:"No",disabled:!(h!=null&&h.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(h!=null&&h.canDelete)})}),e.jsx(k,{disabled:!(h!=null&&h.canEdit),onClick:()=>c(h),icon:e.jsx(ve,{})})]})}],j=async(i,h="",U=20)=>{const{data:N}=await I.custom({url:"",method:"get",meta:{operation:"telecomCarriers",variables:{page:{value:i,type:"Int",required:!0},key:{value:h,type:"String",required:!1},pageSize:{value:U,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","allowPayment","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(g=>(o.error(g.message),{data:null})).then(g=>g);N&&(v(N.page),A(N.total),T(N.hasNext),x(N.results)),H(!1)};return t.useEffect(()=>{j(y,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:V,onFinish:i=>{v(1),r.length=0,j(1,i.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:D?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>f(),children:"Sync Mtaa"})})]}),e.jsx("div",{children:e.jsx(ce,{loading:L,columns:b,dataSource:r,scroll:{x:!0},pagination:{onChange:(i,h)=>{w(h),j(i,d,h)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Edit Telecom Carrier Informations",width:"20%",open:F,onClose:i=>C(i),children:e.jsx(hn,{form:O,carrier:s,onFinish:p})})]})},pn=()=>(t.useEffect(()=>{document.title=ue.system_name+": Telecom Carriers"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Telecom Carriers"})]})}),e.jsx(xn,{height:80})]})})),gn=a=>{const[s,m]=t.useState([]),[r,x]=t.useState(!0),[y,v]=t.useState(1);t.useState(25);const[q,A]=t.useState(""),[P]=n.useForm();t.useState(0),t.useState(0);const[w,d]=t.useState(!0);re();const z=async T=>{var H,V;const{data:L}=await I.custom({url:"",method:"post",meta:{operation:"addCombinationSubject",variables:{combinationId:{value:parseInt((H=a.combination)!=null&&H.id?(V=a.combination)==null?void 0:V.id.toString():"0"),type:"Int",required:!0},subjectId:{value:parseInt(T?T.toString():"0"),type:"Int",required:!0}},fields:["success","message",{combination:["id","name","code","description",{subjects:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});o.remove(),L.success?(o.success(L.message),s.length=0,m([]),_(1,q),a.onAdd(L.combination)):o.error(L.message)},_=async(T,L="")=>{var V,O;const{data:H}=await I.custom({url:"",method:"get",meta:{operation:"combinationSubjectsToAdd",variables:{combinationId:{value:parseInt((V=a.combination)!=null&&V.id?(O=a.combination)==null?void 0:O.id.toString():"0"),type:"Int",required:!0},page:{value:T,type:"Int",required:!0},key:{value:L,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description",{schoolType:["id","name"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}});H.hasNext&&(d(H.hasNext),v(H.page+1),m([...s,...H.results])),x(!1)};return t.useEffect(()=>{s.length=0,m([]),_(1)},[a.randKey,a.combination]),e.jsxs(e.Fragment,{children:[e.jsx(te,{children:e.jsx(W,{span:24,children:e.jsx(n,{layout:"vertical",form:P,onFinish:T=>{A(T.key),s.length=0,m([]),_(1,T.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search Adminstrator(s)...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(qe,{spinning:r,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"70vh",overflowY:"auto"},children:e.jsx(Ie,{itemLayout:"horizontal",dataSource:s,renderItem:T=>{var L;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Ie.Item,{style:{margin:0,padding:0},actions:[e.jsx(ee,{placement:"topLeft",title:"Adding "+T.name+" to "+((L=a.combination)==null?void 0:L.name)+"?",onConfirm:()=>z(T.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(Se,{})})})],children:e.jsx(Ie.Item.Meta,{title:e.jsxs("a",{children:[T.name,e.jsx(ie,{color:"green",style:{marginLeft:10},children:T.schoolType.name})]})})},"file-"+T.id)})}})}),w&&e.jsx("div",{style:{position:"absolute",bottom:0,width:"100%",textAlign:"center"},children:e.jsx(k,{type:"primary",onClick:()=>{_(y,q)},children:"Load More"})})]})]})},yn=a=>{const[s,m]=t.useState([]),[r,x]=t.useState(!0),[y,v]=t.useState(1);t.useState(25);const[q,A]=t.useState(""),[P]=n.useForm();t.useState(0),t.useState(0);const[w,d]=t.useState(!0);re();const z=async T=>{const{data:L}=await I.custom({url:"",method:"post",meta:{operation:"removeCombinationSubject",variables:{combinationSubjectId:{value:T,type:"Int",required:!0}},fields:["success","message",{combination:["id","name","code","description",{subjects:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});L.success?(o.success(L.message),s.length=0,m([]),_(1,q),a.onAdd(L.combination)):o.error(L.message)},_=async(T,L="")=>{var V,O;const{data:H}=await I.custom({url:"",method:"get",meta:{operation:"combinationSubjects",variables:{combinationId:{value:parseInt((V=a.combination)!=null&&V.id?(O=a.combination)==null?void 0:O.id.toString():"0"),type:"Int",required:!0},page:{value:T,type:"Int",required:!0},key:{value:L,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{combination:["id","name","code"]},{subject:["id","name",{schoolType:["id","name"]}]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}});d(H.hasNext),v(H.page+1),m([...s,...H.results]),x(!1)};return t.useEffect(()=>{s.length=0,m([]),_(1)},[a.randKey,a.combination]),e.jsxs(e.Fragment,{children:[e.jsx(te,{children:e.jsx(W,{span:24,children:e.jsx(n,{layout:"vertical",form:P,onFinish:T=>{A(T.key),s.length=0,m([]),_(1,T.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search Adminstrator(s)...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(qe,{spinning:r,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"60vh",overflowY:"auto"},children:e.jsx(Ie,{itemLayout:"horizontal",dataSource:s,renderItem:T=>{var L;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Ie.Item,{style:{margin:0,padding:0},actions:[e.jsx(ee,{placement:"topLeft",title:"Removing "+T.subject.name+" to "+((L=a.combination)==null?void 0:L.name)+"?",onConfirm:()=>z(T.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{})})})],children:e.jsx(Ie.Item.Meta,{title:e.jsxs("a",{children:[T.subject.name,e.jsx(ie,{color:"green",style:{marginLeft:10},children:T.subject.schoolType.name})]})})},"file-"+T.id)})}})}),w&&e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:10},children:e.jsx(k,{type:"primary",onClick:()=>{_(y,q)},children:"Load More"})})]})]})},jn=a=>{const[s,m]=t.useState(a.combination.isActive),[r]=n.useForm(),x=async y=>{const{data:v}=await I.custom({url:"",method:"post",meta:{operation:"updateCombination",variables:{combinationId:{value:y.combination_id,type:"Int",required:!0},name:{value:y.name,type:"String",required:!0},code:{value:y.code,type:"String",required:!0},description:{value:y.description,type:"String",required:!1},isActive:{value:s,type:"Boolean",required:!1}},fields:["success","message",{combination:["id","name","code","description",{subjects:["id","name"]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}});v.success?(o.success(v.message),r.resetFields(),a.onFinish(v.combination)):o.error(v.message)};return t.useEffect(()=>{r.setFieldsValue({name:a.combination.name,code:a.combination.code,is_active:a.combination.isActive})},[a.combination]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:r,onFinish:y=>{y.is_active=s,y.combination_id=parseInt(a.combination.id.toString()),x(y)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx(B,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(n.Item,{name:"is_active",children:e.jsx(pe,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},fn=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(1),[q,A]=t.useState(0),[P,w]=t.useState(20),[d,z]=t.useState(""),[_,T]=t.useState(!1),[L,H]=t.useState(!0);re();const[V]=n.useForm();n.useForm();const Y=!de.useBreakpoint().lg,[D,F]=t.useState(!1),[C,c]=t.useState(!1),[p,f]=t.useState(!1),l=R=>{m(R),c(!0)},S=R=>{m(R),f(!0)},b=R=>{m(R),F(!0)},j=async R=>{x(r.map(u=>u.id.toString()===R.id.toString()?R:u)),F(!1)},i=async()=>{const{data:R}=await I.custom({url:"",method:"post",meta:{operation:"syncCombinations",variables:{},fields:["success","message"]}});R.success?(o.success(R.message),g(y,"",20)):o.error(R.message)},h=async R=>{const{data:u}=await I.custom({url:"",method:"post",meta:{operation:"deleteRegion",variables:{id:{value:R,type:"Int",required:!0}},fields:["success","message"]}});u.success?(o.success(u.message),x(r.filter(M=>M.id!==R))):o.error(u.message)},U=()=>{o("Canceled")},N=[{title:"Name",dataIndex:"name",fixed:!0,render:(R,u,M)=>e.jsx("span",{children:e.jsx("a",{children:u.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(R,u,M)=>e.jsx("span",{children:e.jsx("a",{children:u.code})})},{title:"Subjects",dataIndex:"subjects",fixed:!0,render:(R,u,M)=>{var ae;return e.jsxs("span",{children:[u.subjects.length===0&&e.jsx(ie,{color:"red",children:"No Subjects Added"}),u.subjects.length>0&&((ae=u==null?void 0:u.subjects)==null?void 0:ae.map(ke=>e.jsx(ie,{color:"green",children:ke.name},ke.id))),e.jsx(fe,{title:"Click to add more subjects",color:"green",children:e.jsx(k,{icon:e.jsx(Se,{}),onClick:()=>l(u)})}),e.jsx(fe,{title:"Click to View Subjects",color:"green",children:e.jsx(k,{icon:e.jsx(lt,{}),onClick:()=>S(u)})})]})}},{title:"Created",dataIndex:"created",render:(R,u,M)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(u.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(R,u,M)=>e.jsx("a",{children:u!=null&&u.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(R,u,M)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ee,{title:"Are you sure to delete this member?",onConfirm:()=>h(u==null?void 0:u.id),onCancel:()=>U,okText:"Yes",cancelText:"No",disabled:!(u!=null&&u.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(u!=null&&u.canDelete),danger:!0})}),e.jsx(k,{disabled:!(u!=null&&u.canEdit),onClick:()=>b(u),icon:e.jsx(ve,{}),danger:!0})]})}],g=async(R,u="",M=20)=>{const{data:ae}=await I.custom({url:"",method:"get",meta:{operation:"combinations",variables:{page:{value:R,type:"Int",required:!0},key:{value:u,type:"String",required:!1},pageSize:{value:M,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description",{subjects:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});v(ae.page),A(ae.total),T(ae.hasNext),x(ae.results),H(!1)},X=async R=>{x(r.map(u=>parseInt(u.id.toString())===parseInt(R.id.toString())?R:u))},G=()=>e.jsx(e.Fragment,{children:e.jsx(n,{layout:"vertical",form:V,onFinish:R=>{v(1),r.length=0,g(1,R.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),$=()=>e.jsx(e.Fragment,{children:e.jsx(k,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>i(),children:"Sync Combinations"})});return t.useEffect(()=>{g(y,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[Y&&e.jsxs(e.Fragment,{children:[e.jsx(W,{span:24,style:{display:"flex",justifyContent:"flex-end"},children:$()}),e.jsx(W,{span:24,children:G()})]}),!Y&&e.jsxs(e.Fragment,{children:[e.jsx(W,{span:12,children:G()}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:$()})]})]}),e.jsx("div",{children:e.jsx(ce,{loading:L,columns:N,dataSource:r,scroll:{x:!0},pagination:{onChange:(R,u)=>{w(u),g(R,d,u)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Editting "+(s==null?void 0:s.name)+" Informations",width:Y?"100vw":"40vw",open:D,onClose:R=>F(R),children:e.jsx(jn,{combination:s,onFinish:j})}),e.jsx(se,{title:"Adding Subjects to "+(s==null?void 0:s.name),width:Y?"100vw":"40vw",destroyOnClose:!0,open:C,onClose:R=>c(R),children:e.jsx(gn,{combination:s,onAdd:X})}),e.jsx(se,{title:(s==null?void 0:s.name)+" Subjects",width:Y?"100vw":"40vw",open:p,onClose:R=>f(R),children:e.jsx(yn,{combination:s,onAdd:X})})]})},Sn=()=>{const{data:a}=Fe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/")};return t.useEffect(()=>{document.title=ue.system_name+": Combinations",s()},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/combinations",children:"Control"})}),e.jsx(E.Item,{children:"Combinations"})]})}),e.jsx(fn,{height:80})]})})},{Option:vn}=je,{TextArea:Cn}=B,bn=a=>Array.isArray(a)?a:a==null?void 0:a.fileList,In=a=>{const[s,m]=t.useState([]),[r]=n.useForm(),x=async()=>{const{data:v}=await I.custom({url:"",method:"get",meta:{operation:"schoolTypes",variables:{showAll:{value:!0,type:"Boolean",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});m(v.results)},y=async v=>{const{data:q}=await I.custom({url:"",method:"post",meta:{operation:"createSubject",variables:{schoolTypeId:{value:v.school_type_id,type:"Int",required:!0},name:{value:v.name,type:"String",required:!0},description:{value:v.description,type:"String",required:!1},icon:{value:v.icon,type:"Upload",required:!1}},fields:["success","message",{subject:["id","name","description",{schoolType:["id","name","code"]},"icon","isActive","created","updated","canEdit","canDelete","canManage"]}]}});q.success?(o.success(q.message),a.onFinish(q.subject),r.resetFields()):o.error(q.message)};return t.useEffect(()=>{x()},[a.randKey]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:r,onFinish:v=>{y(v)},children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{label:"School Type",name:"school_type_id",rules:[{required:!0,type:"number",message:"Please choose School Type"}],children:e.jsx(je,{size:"large",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onSearch:v=>{},filterOption:(v,q)=>q.children.toLowerCase().includes(v.toLowerCase()),dropdownStyle:{zIndex:9999},children:s.map((v,q)=>e.jsx(vn,{value:parseInt(v.id.toString()),children:v.name}))})}),e.jsx(n.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description ..."}],children:e.jsx(Cn,{rows:4,placeholder:"Enter Description ..."})}),e.jsx(n.Item,{label:"Subject Icon",name:"icon",valuePropName:"fileList",getValueFromEvent:bn,rules:[{required:!1,type:"array",message:"Please pick a Subject Icon"}],children:e.jsxs(Me.Dragger,{name:"icon",accept:".jpg,.jpeg,.png,.gif,.svg",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(as,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},{Option:An}=je,{TextArea:kn}=B,Fn=a=>Array.isArray(a)?a:a==null?void 0:a.fileList,Nn=a=>{const[s,m]=t.useState([]);n.useForm();const r=async()=>{const{data:y}=await I.custom({url:"",method:"get",meta:{operation:"schoolTypes",variables:{showAll:{value:!0,type:"Boolean",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});m(y.results)},x=async y=>{const{data:v}=await I.custom({url:"",method:"post",meta:{operation:"updateSubject",variables:{subjectId:{value:parseInt(a.subject.id),type:"Int",required:!0},schoolTypeId:{value:y.school_type_id,type:"Int",required:!0},name:{value:y.name,type:"String",required:!0},description:{value:y.description,type:"String",required:!1},icon:{value:y.icon,type:"Upload",required:!1}},fields:["success","message",{subject:["id","name","description",{schoolType:["id","name","code"]},"icon","isActive","created","updated","canEdit","canDelete","canManage"]}]}});v.success?(o(v.message),a.onFinish(v.subject)):o.error(v.message)};return t.useEffect(()=>{r(),a.form.setFieldsValue({name:a.subject.name,school_type_id:parseInt(a.subject.schoolType.id),description:a.subject.description})},[a.form,a.subject]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:y=>{x(y)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{label:"School Type",name:"school_type_id",rules:[{required:!0,type:"number",message:"Please choose School Type"}],children:e.jsx(je,{size:"large",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onSearch:y=>{},filterOption:(y,v)=>v.children.toLowerCase().includes(y.toLowerCase()),dropdownStyle:{zIndex:9999},children:s.map((y,v)=>e.jsx(An,{value:parseInt(y.id.toString()),children:y.name}))})}),e.jsx(n.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description ..."}],children:e.jsx(kn,{rows:4,placeholder:"Enter Description ..."})}),e.jsx(n.Item,{label:"Subject Icon",name:"icon",valuePropName:"fileList",getValueFromEvent:Fn,rules:[{required:!1,type:"array",message:"Please pick a Subject Icon"}],children:e.jsxs(Me.Dragger,{name:"icon",accept:".jpg,.jpeg,.png,.gif,.svg",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(as,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Tn=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(1),[q,A]=t.useState(0),[P,w]=t.useState(20),[d,z]=t.useState(""),[_,T]=t.useState(!1),[L,H]=t.useState(!0);re();const[V]=n.useForm(),[O]=n.useForm();de.useBreakpoint().lg;const[D,F]=t.useState(!1),[C,c]=t.useState(!1),p=N=>{m(N),F(!0)},f=async N=>{x(r.map(g=>g.id===N.id?N:g)),m(void 0),F(!1)},l=async N=>{x([N,...r])},S=async()=>{const{data:N}=await I.custom({url:"",method:"post",meta:{operation:"syncSchoolsTypes",variables:{},fields:["success","message"]}});N.success?(o.success(N.message),U(y,"",20)):o.error(N.message)},b=async N=>{const{data:g}=await I.custom({url:"",method:"post",meta:{operation:"deleteSubject",variables:{subjectId:{value:parseInt(N.toString()),type:"Int",required:!0}},fields:["success","message"]}});g.success?(o.success(g.message),x(r.filter(X=>X.id!==N))):o.error(g.message)},j=()=>{o("Canceled")},i=N=>N.split(" ").map($=>$.charAt(0)).join("").toUpperCase(),h=[{title:"Name",dataIndex:"name",fixed:!0,render:(N,g,X)=>e.jsxs("span",{children:[g.icon&&e.jsxs(e.Fragment,{children:[e.jsx(Ze,{size:"large",src:g.icon})," "]}),!g.icon&&e.jsx(Ze,{size:"large",style:{backgroundColor:"#f56a00"},children:e.jsx(e.Fragment,{children:i(g.name)}),src:g.icon}),e.jsx("a",{style:{marginLeft:10},children:g.name})]})},{title:"School Type",dataIndex:"schooltype",fixed:!0,render:(N,g,X)=>e.jsx("span",{children:e.jsxs("a",{children:[g.schoolType.name,e.jsx(ie,{color:"red",style:{marginLeft:5},children:g.schoolType.code})]})})},{title:"Created",dataIndex:"created",render:(N,g,X)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(g.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(N,g,X)=>e.jsx("a",{children:g!=null&&g.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(N,g,X)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ee,{title:"Are you sure to delete this member?",onConfirm:()=>b(g==null?void 0:g.id),onCancel:()=>j,okText:"Yes",cancelText:"No",disabled:!(g!=null&&g.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(g!=null&&g.canDelete)})}),e.jsx(k,{disabled:!(g!=null&&g.canEdit),onClick:()=>p(g),icon:e.jsx(ve,{})})]})}],U=async(N,g="",X=20)=>{const{data:G}=await I.custom({url:"",method:"get",meta:{operation:"subjects",variables:{page:{value:N,type:"Int",required:!0},key:{value:g,type:"String",required:!1},pageSize:{value:X,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description",{schoolType:["id","name","code"]},"icon","isActive","created","updated","canEdit","canDelete","canManage"]}]}});v(G.page),A(G.total),T(G.hasNext),x(G.results),H(!1)};return t.useEffect(()=>{U(y,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:12,children:e.jsx(n,{layout:"vertical",form:V,onFinish:N=>{v(1),r.length=0,U(1,N.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(k,{size:"large",icon:e.jsx(Se,{}),onClick:()=>c(!0),children:"Add Subject"}),e.jsx(k,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>S(),children:"Sync Subjects"})]})]}),e.jsx("div",{children:e.jsx(ce,{loading:L,columns:h,dataSource:r,scroll:{x:!0},pagination:{onChange:(N,g)=>{w(g),U(N,d,g)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Edit Subject Informations",width:"30vw",open:D,onClose:N=>F(N),children:e.jsx(Nn,{form:O,subject:s,onFinish:f})}),e.jsx(se,{title:"Creating a new Subject",width:"30vw",open:C,onClose:N=>c(N),children:e.jsx(In,{onFinish:l,randKey:Math.random()})})]})},qn=()=>(t.useEffect(()=>{document.title=ue.system_name+": Subjects"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Subjects"})]})}),e.jsx(Tn,{height:80})]})})),Pn=a=>{t.useState();const[s,m]=t.useState([]),[r,x]=t.useState(1),[y,v]=t.useState(0),[q,A]=t.useState(20),[P,w]=t.useState(""),[d,z]=t.useState(!1),[_,T]=t.useState(!0);re();const[L]=n.useForm();de.useBreakpoint().lg;const V=async()=>{await I.custom({url:"",method:"post",meta:{operation:"syncCombinations",variables:{},fields:["success","message"]}})},O=[{title:"Receipient Phone",dataIndex:"receipientPhone",fixed:!0,render:(D,F,C)=>e.jsxs("span",{children:[e.jsx("a",{children:F.receipientPhoneNumber}),e.jsx(ie,{style:{marginLeft:5},children:F.carrier})]})},{title:"Channel",dataIndex:"channel",fixed:!0,render:(D,F,C)=>{var c,p;return e.jsx("span",{children:(p=(c=F==null?void 0:F.channelMessage)==null?void 0:c.channel)==null?void 0:p.name})}},{title:"Content",dataIndex:"content",fixed:!0,render:(D,F,C)=>e.jsx("span",{children:e.jsx("a",{children:F.messageContent})})},{title:"Status",dataIndex:"status",fixed:!0,render:(D,F,C)=>e.jsx("span",{children:e.jsx(ie,{color:F.statusColor,children:F.status})})},{title:"Created",dataIndex:"created",render:(D,F,C)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(F.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(D,F,C)=>e.jsx("a",{children:F!=null&&F.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(D,F,C)=>e.jsx("span",{})}],Y=async(D,F="",C=20)=>{const{data:c}=await I.custom({url:"",method:"get",meta:{operation:"messagesDispatches",variables:{page:{value:D,type:"Int",required:!0},key:{value:F,type:"String",required:!1},pageSize:{value:C,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{channelMessage:["id","message","messageCount",{creator:["id","fullName","email","phone","firstName","middleName","lastName"]},{channel:["id","name","code"]}]},"receipientPhoneNumber","carrier","statusColor","sentAt","deliveredAt","failedAt","messageCount","messageContent","status","isActive","created","updated","canEdit","canDelete","canManage"]}]}});x(c.page),v(c.total),z(c.hasNext),m(c.results),T(!1)};return t.useEffect(()=>{Y(r,"",50)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:12,children:e.jsx(n,{layout:"vertical",form:L,onFinish:D=>{x(1),s.length=0,Y(1,D.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>V(),children:"Sync CDR"})})]}),e.jsx("div",{children:e.jsx(ce,{loading:_,columns:O,dataSource:s,scroll:{x:!0},pagination:{onChange:(D,F)=>{A(F),Y(D,P,F)},total:y,pageSize:q,position:["bottomCenter"],showQuickJumper:!0}})})]})},En=()=>(t.useEffect(()=>{document.title=ue.system_name+": Sms Sent"},[]),e.jsx(xe,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Sms Sent"})]})}),e.jsx(Pn,{height:80})]})})),{TextArea:Mn}=B,Dn=a=>{const[s,m]=t.useState(a.syllabusType.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.syllabusType.name,description:a.syllabusType.description,isActive:a.syllabusType.isActive})},[a.form,a.syllabusType]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.syllabusType.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"description",label:"Description",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(Mn,{rows:4,placeholder:"Please write Description ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},zn=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(1),[q,A]=t.useState(0),[P,w]=t.useState(20),[d,z]=t.useState(""),[_,T]=t.useState(!1),[L,H]=t.useState(!0);re();const[V]=n.useForm(),[O]=n.useForm();de.useBreakpoint().lg;const[D,F]=t.useState(!1),C=j=>{m(j),F(!0)},c=async j=>{const{data:i}=await I.custom({url:"",method:"post",meta:{operation:"updateSyllabusType",variables:{id:{value:j.id,type:"Int",required:!0},name:{value:j.name,type:"String",required:!0},description:{value:j.description,type:"String",required:!1},isActive:{value:j.isActive,type:"Boolean",required:!1}},fields:["success","message",{syllabusType:["id","name","description","created","updated","isActive","canDelete","canEdit","canManage"]}]}});i.success?(o.success(i.message),O.resetFields(),F(!1),x(r.map(h=>h.id===i.syllabusType.id?i.syllabusType:h))):o.error(i.message)},p=async j=>{const{data:i}=await I.custom({url:"",method:"post",meta:{operation:"deleteSyllabusType",variables:{id:{value:j,type:"Int",required:!0}},fields:["success","message"]}});i.success?(o.success(i.message),x(r.filter(h=>h.id!==j))):o.error(i.message)},f=async()=>{const{data:j}=await I.custom({url:"",method:"post",meta:{operation:"synchronizeDefaultSyllabusTypes",variables:{},fields:["success","message"]}});j.success?(o.success(j.message),b(1)):o.error(j.message)},l=()=>{o("Canceled")},S=[{title:"Name",dataIndex:"name",fixed:!0,render:(j,i,h)=>e.jsx("span",{children:e.jsx("a",{children:i.name})})},{title:"Description",dataIndex:"description",fixed:!0,render:(j,i,h)=>e.jsx("span",{children:e.jsx("a",{children:i.description})})},{title:"Created",dataIndex:"created",render:(j,i,h)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(i.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(j,i,h)=>e.jsx("a",{children:i!=null&&i.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(j,i,h)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ee,{title:"Are you sure to delete this Syllabus Type?",onConfirm:()=>p(i==null?void 0:i.id),onCancel:()=>l,okText:"Yes",cancelText:"No",disabled:!(i!=null&&i.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(i!=null&&i.canDelete)})}),e.jsx(k,{disabled:!(i!=null&&i.canEdit),icon:e.jsx(ve,{}),onClick:()=>C(i)})]})}],b=async(j,i="",h=20)=>{const{data:U}=await I.custom({url:"",method:"get",meta:{operation:"syllabusTypes",variables:{page:{value:j,type:"Int",required:!0},key:{value:i,type:"String",required:!1},pageSize:{value:h,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}});v(U.page),A(U.total),T(U.hasNext),x(U.results),H(!1)};return t.useEffect(()=>{b(y)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:12,children:e.jsx(n,{layout:"vertical",form:V,onFinish:j=>{v(1),r.length=0,b(1,j.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ee,{title:"Are you sure to sync default syllabus types?",placement:"left",onConfirm:()=>{f()},onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(Ce,{}),size:"large",children:"Sync Default Syllabus Types"})})})]}),e.jsx("div",{children:e.jsx(ce,{loading:L,columns:S,dataSource:r,scroll:{x:!0},pagination:{onChange:(j,i)=>{w(i),b(j,d,i)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(se,{title:"Edit Syllabus Type Informations",width:"45vw",open:D,onClose:j=>F(j),children:e.jsx(Dn,{form:O,syllabusType:s,onFinish:c})})]})},Ln=()=>(window.location.href.split("/").slice(3).join("/").split("?")[0],localStorage.getItem("sessionKey")||Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),""),Bn=()=>(t.useEffect(()=>{document.title=ue.system_name+": Syllabus Types",window.history.pushState({},"",Ln())},[]),e.jsx(xe,{children:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Syllabus Types"})]})})}),e.jsx(zn,{height:80})]})})),{TextArea:_n}=B,On=a=>{const[s,m]=t.useState(a.curriculum.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.curriculum.name,description:a.curriculum.description,code:a.curriculum.code,isActive:a.curriculum.isActive})},[a.form,a.curriculum]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.curriculum.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(B,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx(B,{size:"large",disabled:!0,placeholder:"Enter Code ..."})}),e.jsx(n.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please write Description ..."}],children:e.jsx(_n,{rows:4,placeholder:"Please write Description ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(pe,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Rn=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(1),[q,A]=t.useState(0),[P,w]=t.useState(20),[d,z]=t.useState(""),[_,T]=t.useState(!1),[L,H]=t.useState(!0);re();const[V]=n.useForm(),[O]=n.useForm();de.useBreakpoint().lg;const[D,F]=t.useState(!1),C=j=>{m(j),F(!0)},c=async j=>{const{data:i}=await I.custom({url:"",method:"post",meta:{operation:"updateCurriculum",variables:{id:{value:j.id,type:"Int",required:!0},name:{value:j.name,type:"String",required:!0},code:{value:j.code,type:"String",required:!0},description:{value:j.description,type:"String",required:!1},isActive:{value:j.isActive,type:"Boolean",required:!1}},fields:["success","message",{curriculum:["id","name","description","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}});i.success?(o.success(i.message),O.resetFields(),F(!1),x(r.map(h=>h.id===i.curriculum.id?i.curriculum:h))):o.error(i.message)},p=async j=>{const{data:i}=await I.custom({url:"",method:"post",meta:{operation:"deleteCurriculum",variables:{id:{value:j,type:"Int",required:!0}},fields:["success","message"]}});i.success?(o.success(i.message),x(r.filter(h=>h.id!==j))):o.error(i.message)},f=async()=>{const{data:j}=await I.custom({url:"",method:"post",meta:{operation:"syncCurriculums",variables:{},fields:["success","message"]}});j.success?(o.success(j.message),b(1)):o.error(j.message)},l=()=>{o("Canceled")},S=[{title:"Name",dataIndex:"name",fixed:!0,render:(j,i,h)=>e.jsx("span",{children:e.jsx("a",{children:i.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(j,i,h)=>e.jsx("span",{children:e.jsx("a",{children:i.code})})},{title:"Description",dataIndex:"description",fixed:!0,render:(j,i,h)=>e.jsx("span",{children:e.jsx("a",{children:i.description})})},{title:"Created",dataIndex:"created",render:(j,i,h)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(i.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(j,i,h)=>e.jsx("a",{children:i!=null&&i.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(j,i,h)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ee,{title:"Are you sure to delete this Curriculum?",onConfirm:()=>p(i==null?void 0:i.id),onCancel:()=>l,okText:"Yes",cancelText:"No",disabled:!(i!=null&&i.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(i!=null&&i.canDelete)})}),e.jsx(k,{disabled:!(i!=null&&i.canEdit),icon:e.jsx(ve,{}),onClick:()=>C(i)})]})}],b=async(j,i="",h=20)=>{const{data:U}=await I.custom({url:"",method:"get",meta:{operation:"curriculums",variables:{page:{value:j,type:"Int",required:!0},key:{value:i,type:"String",required:!1},pageSize:{value:h,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}});v(U.page),A(U.total),T(U.hasNext),x(U.results),H(!1)};return t.useEffect(()=>{b(y)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[e.jsx(W,{span:12,children:e.jsx(n,{layout:"vertical",form:V,onFinish:j=>{v(1),r.length=0,b(1,j.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ee,{title:"Are you sure to sync default Curriculums?",placement:"left",onConfirm:()=>{f()},onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(Ce,{}),size:"large",children:"Sync Default Curriculums"})})})]}),e.jsx("div",{children:e.jsx(ce,{loading:L,columns:S,dataSource:r,scroll:{x:!0},pagination:{onChange:(j,i)=>{w(i),b(j,d,i)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(se,{title:"Edit Curriculum Informations",width:"45vw",open:D,onClose:j=>F(j),children:e.jsx(On,{form:O,curriculum:s,onFinish:c})})]})},Un=()=>{const{data:a}=Fe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/")};return t.useEffect(()=>{document.title=ue.system_name+": Curriculums",s()},[]),e.jsx(xe,{children:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Curriculums"})]})})}),e.jsx(Rn,{height:80})]})})},wn=a=>{const[s]=n.useForm(),m=async r=>{const{data:x}=await I.custom({url:"",method:"post",meta:{operation:"createBannedWord",variables:{word:{value:r.word,type:"String",required:!0}},fields:["success","message",{bannedWord:["id","word","created","updated","isActive","canDelete","canEdit","canManage"]}]}});x.success?(o.success(x.message),s.resetFields(),a.onFinish(x.bannedWord)):o.error(x.message)};return e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:s,onFinish:r=>{m(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"word",label:"Banned Word",rules:[{required:!0,type:"string",message:"Please input Word"}],children:e.jsx(B,{size:"large",placeholder:"Enter Banned Word ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Vn=a=>{var r;const[s]=n.useForm();t.useEffect(()=>{a.word&&s.setFieldsValue({word:a.word.word})},[a.word]);const m=async x=>{var v;const{data:y}=await I.custom({url:"",method:"post",meta:{operation:"updateBannedWord",variables:{id:{value:(v=a.word)==null?void 0:v.id,type:"Int",required:!0},word:{value:x.word,type:"String",required:!0}},fields:["success","message",{bannedWord:["id","word","created","updated","isActive","canDelete","canEdit","canManage"]}]}});y.success?(o.success(y.message),s.resetFields(),a.onFinish(y.bannedWord)):o.error(y.message)};return e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:s,onFinish:x=>{m(x)},requiredMark:!0,initialValues:{word:(r=a.word)==null?void 0:r.word},children:[e.jsx(n.Item,{name:"word",label:"Banned Word",rules:[{required:!0,type:"string",message:"Please input Word"}],children:e.jsx(B,{size:"large",placeholder:"Enter Banned Word ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Kn=a=>{const[s,m]=t.useState(),[r,x]=t.useState([]),[y,v]=t.useState(1),[q,A]=t.useState(0),[P,w]=t.useState(20),[d,z]=t.useState(""),[_,T]=t.useState(!1),[L,H]=t.useState(!0);re();const[V]=n.useForm();n.useForm();const Y=!de.useBreakpoint().lg,[D,F]=t.useState(!1),[C,c]=t.useState(!1),p=N=>{m(N),F(!0)},f=async N=>{x([N,...r])},l=async N=>{x(r.map(g=>g.id===N.id?N:g)),F(!1)},S=async N=>{const{data:g}=await I.custom({url:"",method:"post",meta:{operation:"deleteBannedWord",variables:{id:{value:N,type:"Int",required:!0}},fields:["success","message"]}});g.success?(o.success(g.message),x(r.filter(X=>X.id!==N))):o.error(g.message)},b=async()=>{const{data:N}=await I.custom({url:"",method:"post",meta:{operation:"syncBannedWords",variables:{},fields:["success","message"]}});N.success?(o.success(N.message),i(1)):o.error(N.message)},j=()=>{o("Canceled")},i=async(N,g="",X=20)=>{const{data:G}=await I.custom({url:"",method:"get",meta:{operation:"bannedWords",variables:{page:{value:N,type:"Int",required:!0},key:{value:g,type:"String",required:!1},pageSize:{value:X,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","word","isActive","created","updated","canEdit","canDelete","canManage"]}]}});v(G.page),A(G.total),T(G.hasNext),x(G.results),H(!1)},h=()=>e.jsx(e.Fragment,{children:e.jsx(n,{layout:"vertical",form:V,onFinish:N=>{v(1),r.length=0,i(1,N.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),U=()=>e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(Se,{}),size:"large",onClick:()=>c(!0),children:"Add Word"}),e.jsx(ee,{title:"Are you sure to sync default Banned Words?",placement:"left",onConfirm:()=>{b()},onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(Ce,{}),size:"large",children:"Sync Default Banned Words"})})]});return t.useEffect(()=>{i(y)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[Y&&e.jsxs(e.Fragment,{children:[e.jsx(W,{span:24,style:{display:"flex",justifyContent:"flex-end"},children:U()}),e.jsx(W,{span:24,children:h()})]}),!Y&&e.jsxs(e.Fragment,{children:[e.jsx(W,{span:12,children:h()}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:U()})]})]}),e.jsx("div",{children:e.jsx(ce,{loading:L,columns:[{title:"Word",dataIndex:"word",fixed:!0,render:(N,g,X)=>e.jsx("span",{children:e.jsx("a",{children:g.word})})},{title:"Created",dataIndex:"created",render:(N,g,X)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(g.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(N,g,X)=>e.jsx("a",{children:g!=null&&g.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(N,g,X)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ee,{title:"Are you sure to delete this Curriculum?",onConfirm:()=>S(g==null?void 0:g.id),onCancel:()=>j,okText:"Yes",cancelText:"No",disabled:!(g!=null&&g.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(g!=null&&g.canDelete)})}),e.jsx(k,{disabled:!(g!=null&&g.canEdit),icon:e.jsx(ve,{}),onClick:()=>p(g)})]})}],dataSource:r,scroll:{y:"calc(100vh - 20px"},pagination:{onChange:(N,g)=>{w(g),i(N,d,g)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(se,{title:"Edit Banned Word",width:"45vw",open:D,onClose:N=>F(N),children:e.jsx(Vn,{word:s,onFinish:l})}),e.jsx(se,{title:"Create Banned Word",width:"35vw",open:C,onClose:N=>c(N),children:e.jsx(wn,{onFinish:f})})]})},Hn=()=>{const{data:a}=Fe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/")};return t.useEffect(()=>(document.title=ue.system_name+": Banned Words",s(),document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),e.jsx(xe,{children:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Curriculums"})]})})}),e.jsx(Kn,{})]})})},ls=[{user:Zt},...ds],Wn=a=>{const[s,m]=t.useState(!0),[r,x]=t.useState(1),[y,v]=t.useState(0);t.useState(25);const[q,A]=t.useState(0),[P,w]=t.useState([]),[d]=n.useForm(),z=async(T,L="",H=25)=>{const{data:V}=await I.custom({url:"",method:"get",meta:{operation:"notQuizzerManagers",variables:{page:{value:T,type:"Int",required:!0},key:{value:L,type:"String",required:!1},pageSize:{value:H,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Zt}]}});x(V.page),v(V.total),A(V.pages),w(V.results),m(!1)},_=async T=>{const{data:L}=await I.custom({url:"",method:"post",meta:{operation:"addQuizzerManager",variables:{id:{value:parseInt(T.toString()),type:"Int",required:!0}},fields:["success","message",{quizzerManager:ls}]}});o.remove(),L.success?(o.success(L.message),w(P.filter(H=>H.id!==T)),a.onFinish(L.quizzerManager)):o.error(L.message)};return t.useEffect(()=>{z(1)},[]),e.jsxs(e.Fragment,{children:[e.jsx(n,{layout:"vertical",form:d,onFinish:T=>{z(1,T.key)},requiredMark:!1,children:e.jsx(n.Item,{name:"key",rules:[{required:!1,type:"string",message:"Search Users ..."}],children:e.jsx(B,{size:"large",placeholder:"Seach Users ..."})})}),e.jsx(Gt,{sx:{minHeight:"80svh",maxHeight:"80svh",overflowY:"scroll",overflowX:"hidden"},children:e.jsx(Ie,{bordered:!0,dataSource:P,renderItem:T=>e.jsx(Ie.Item,{actions:[e.jsx(k,{type:"primary",onClick:()=>_(T.id),children:"Add"})],children:T.fullName})})}),e.jsx(Gt,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:2,marginBottom:2},children:e.jsx(js,{count:q,color:"secondary",onChange:(T,L)=>{z(L,d.getFieldValue("key"))}})})]})},Yn=a=>{t.useState();const[s,m]=t.useState([]),[r,x]=t.useState(1),[y,v]=t.useState(0),[q,A]=t.useState(20),[P,w]=t.useState(""),[d,z]=t.useState(!1),[_,T]=t.useState(!0);re();const[L]=n.useForm();n.useForm();const V=!de.useBreakpoint().lg,[O,Y]=t.useState(!1),D=async f=>{const{data:l}=await I.custom({url:"",method:"post",meta:{operation:"deleteQuizzerManager",variables:{id:{value:f,type:"Int",required:!0}},fields:["success","message"]}});l.success?(o.success(l.message),m(s.filter(S=>S.id!==f))):o.error(l.message)},F=[{title:"Manager Name",dataIndex:"managerName",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:e.jsx("a",{children:l.user.fullName})})},{title:"Created",dataIndex:"created",render:(f,l,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(l.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(f,l,S)=>e.jsx("a",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,l,S)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ee,{title:"Are you sure to delete this Manager?",onConfirm:()=>D(l==null?void 0:l.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(k,{icon:e.jsx(he,{}),disabled:!(l!=null&&l.canDelete)})})})}],C=async(f,l="",S=20)=>{T(!0);const{data:b}=await I.custom({url:"",method:"get",meta:{operation:"quizzerManagers",variables:{page:{value:f,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:S,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:ls}]}});x(b.page),v(b.total),z(b.hasNext),m(b.results),T(!1)},c=()=>e.jsx(e.Fragment,{children:e.jsx(n,{layout:"vertical",form:L,onFinish:f=>{C(1,f.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(B,{size:"large",placeholder:"Search ...",prefix:e.jsx(oe,{}),autoComplete:"off",allowClear:!0})})})}),p=()=>e.jsx(e.Fragment,{children:e.jsx(k,{icon:e.jsx(Se,{}),size:"large",onClick:()=>Y(!0),children:"Add Manager"})});return t.useEffect(()=>{C(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{style:{marginTop:10},children:[V&&e.jsxs(e.Fragment,{children:[e.jsx(W,{span:24,style:{display:"flex",justifyContent:"flex-end"},children:p()}),e.jsx(W,{span:24,children:c()})]}),!V&&e.jsxs(e.Fragment,{children:[e.jsx(W,{span:12,children:c()}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:p()})]})]}),e.jsx("div",{children:e.jsx(ce,{loading:_,columns:F,dataSource:s,scroll:{x:!0},pagination:{onChange:(f,l)=>{A(l),C(f,P,l)},total:y,pageSize:q,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(se,{title:"Adding Quizzer Manager",width:"35vw",open:O,onClose:f=>Y(f),children:e.jsx(Wn,{onFinish:f=>{m([f,...s])}})})]})},Gn=()=>{const{data:a}=Fe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/")};return t.useEffect(()=>{document.title=ue.system_name+": Quizzer Managers",s()},[]),e.jsx(xe,{children:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(E.Item,{children:e.jsx(Z,{to:"/",children:"Home"})}),e.jsx(E.Item,{children:e.jsx(Z,{to:"/control/analytics",children:"Control"})}),e.jsx(E.Item,{children:"Quizzer Managers"})]})})}),e.jsx(Yn,{height:80})]})})},xr=a=>{const{page:s}=a;return s==="BannedWordsPage"?e.jsx(Hn,{}):s==="CurriculumsPage"?e.jsx(Un,{}):s==="SyllabusTypesPage"?e.jsx(Bn,{}):s==="SmsSentPage"?e.jsx(En,{}):s==="SubjectsPage"?e.jsx(qn,{}):s==="CombinationsPage"?e.jsx(Sn,{}):s==="TelecomCarriersPage"?e.jsx(pn,{}):s==="OrderPaymentsPage"?e.jsx(mn,{}):s==="OrdersPaymentsPage"?e.jsx(un,{}):s==="ExaminationsTypesPage"?e.jsx(Ms,{}):s==="ControlSchoolVenuesTypesPage"?e.jsx(zs,{}):s==="SystemSettingsPage"?e.jsx(_s,{}):s==="ControlAnalyticsPage"?e.jsx(Ws,{}):s==="ControlApplicationsPage"?e.jsx(Zs,{}):s==="ControlPermissionsPage"?e.jsx(ea,{}):s==="ControlRolesPage"?e.jsx(na,{}):s==="ControlDistrictsPage"?e.jsx(la,{}):s==="SchoolEducationLevelsPage"?e.jsx(da,{}):s==="ProgrammesPage"?e.jsx(ua,{}):s==="ControlRegionsPage"?e.jsx(xa,{}):s==="SchoolsPage"?e.jsx(Pa,{}):s==="SchoolsTypesPage"?e.jsx(_a,{}):s==="GradesPage"?e.jsx(Ra,{}):s==="SchoolOwnershipsPage"?e.jsx(Va,{}):s==="ControlUsersPage"?e.jsx(Ja,{}):s==="ControlLoginReedemPage"?e.jsx(Za,{}):s==="WardsPage"?e.jsx(en,{}):s==="PrivateTutorsPage"?e.jsx(an,{}):s==="PaymentPackagesPage"?e.jsx(ln,{}):s==="OrdersPage"?e.jsx(cn,{}):s==="QuizzerManagersPage"?e.jsx(Gn,{}):e.jsx("div",{children:"Page not found ..."})};export{xr as ControlPages};
