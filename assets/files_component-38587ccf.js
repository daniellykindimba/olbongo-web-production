import{r as c,l as j,aC as I,j as s,L as M,D,M as P,C as E,au as V,av as q,_ as l,H as L,al as _,ah as u,ai as A,g as F}from"./index-0106a5d3.js";import{a as O,F as T}from"./file_item_component-21ae1875.js";const{Paragraph:z}=_,G=n=>{const[d,r]=c.useState([]);j();const[k,m]=c.useState(!1),[i,h]=c.useState(),[w,g]=c.useState(!1),p=!I.useBreakpoint().lg,x=e=>{h(e),g(!0)},y=e=>{const t=n.data.map(a=>(a.id===e.id&&(a.imageVisible=!0),a));r(t)},C=e=>{const t=n.data.map(a=>(a.id===e.id&&(a.imageVisible=!1),a));r(t)},f=e=>{h(e),m(!0)},b=async(e,t)=>{const{data:a}=await F.custom({url:"",method:"post",meta:{operation:"makeFilePublicPrivate",variables:{id:{value:e,type:"Int",required:!0},public:{value:t,type:"Boolean",required:!0}},fields:["success","message"]}}).catch(o=>(l.error("Error changing file privacy"),{data:null})).then(o=>o);a&&(a.success?(l.success(a.message),r(d.map(o=>(o.id===e&&(o.isPublic=t),o)))):a.message),u.destroyAll()},v=(e,t)=>{u.confirm({title:"Confirm",icon:s.jsx(A,{}),content:t?"Making File Public ...":"Making File  Private  ....",okText:t?"Make Public":"Make Private",cancelText:"Cancel",onOk:()=>b(e,t)})},S=async e=>{const{data:t}=await F.custom({url:"",method:"post",meta:{operation:"deleteFile",variables:{id:{value:e,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(l.error("Error deleting file"),{data:null})).then(a=>a);t&&(t.success?(l.success(t.message),r(d.filter(a=>a.id.toString()!==e.toString()))):l.error(t.message)),u.destroyAll()};return c.useEffect(()=>{r(n.data)},[n.data]),s.jsxs(s.Fragment,{children:[s.jsx(M,{loading:n.loading,itemLayout:"horizontal",dataSource:d,renderItem:e=>s.jsx(O,{item:e,showDrive:n.showDrive,min:n.min??!1,handleChangePrivate:v,handleDelete:S,handleMakeImageNotVisible:C,handleMakeImageVisible:y,handleShowFileInfoDrawer:f,handleShareFile:x})}),s.jsx(D,{title:"File Informations",anchor:"right",width:p?"100vw":"35vw",onClose:e=>m(e),open:k,children:s.jsx(T,{id:i==null?void 0:i.id})}),s.jsx(P,{title:"Share File",open:w,onClose:e=>g(e),width:p?"100vw":"50vw",children:s.jsx(E,{title:"Click Copy icon to copy share link",children:s.jsx(z,{copyable:{icon:[s.jsx(V,{},"copy-icon"),s.jsx(q,{},"copied-icon")],tooltips:["click here","you clicked!!"],onCopy:()=>{l.success("Link Successfully Copied")}},style:{textAlign:"center",fontSize:20},children:L.site_url+"/odrive/file/"+(i==null?void 0:i.id)+"/"+encodeURIComponent((i==null?void 0:i.slug)??"")+"/share"})})})]})};export{G as F};
