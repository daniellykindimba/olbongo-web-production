import{r as o,c as k,j as e,aW as l,aP as i,av as d,cl as P,g as M,_ as b}from"./index-ddd3790b.js";import{C as _}from"./change_password_form-e7c9577f.js";import{M as S}from"./index-11e9f281.js";import{A as u}from"./index-af50c390.js";import"./InfoCircleFilled-02e9cfd0.js";import"./InfoCircleFilled-baaa675e.js";import"./ActionButton-20c4ebc0.js";import"./DialogWrap-db682764.js";import"./index-5d11415b.js";import"./fade-270ed1d4.js";const R=A=>{const[p,m]=S.useModal(),[a,g]=o.useState(!1),[h,r]=o.useState(!1),[x,f]=o.useState(!1),[n,C]=o.useState(!1),{push:j}=k(),c=async()=>{const{data:t}=await M.custom({url:"",method:"get",meta:{operation:"needToChangePassword",fields:["data"]}}).catch(()=>(b.error("Failed to get user informations"),{data:null})).then(s=>s);t&&(g(t.data.need_to_change_password),f(t.data.block_interaction),C(t.data.account_blocked),t.data.account_blocked&&w())},w=()=>{let t=5;const s=p.success({title:"Account Blocked",content:`Your will be redirected to Login in ${t} second.`}),y=setInterval(()=>{t-=1,s.update({content:`Your will be redirected to Login in ${t} second.`}),t===0&&(localStorage.clear(),window.location.pathname="/login")},1e3);setTimeout(()=>{clearInterval(y),s.destroy()},t*1e3)};return o.useEffect(()=>{c()},[]),e.jsxs(e.Fragment,{children:[n&&!n&&e.jsx(l,{style:{display:"flex",justifyContent:"center"},children:e.jsx(i,{xs:6,xl:6,xxl:6,children:e.jsx(u,{type:"error",description:e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:16},children:["Your Account has been blocked",e.jsx(d,{size:"large",style:{marginLeft:10},onClick:()=>j("/logout"),children:"Click to Logout"})]})})})})}),a&&!n&&e.jsx(l,{style:{display:"flex",justifyContent:"center"},children:e.jsx(i,{xs:24,xl:12,xxl:12,style:{display:"flex",justifyContent:"center"},children:e.jsx(u,{type:"error",description:e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:16},children:["Need to Change your Password",e.jsx(d,{size:"large",style:{marginLeft:10},onClick:()=>r(!0),children:"Click to Change"})]})})})})}),e.jsx(P,{title:"Change Password",open:h||x&&a,width:"30vw",onClose:t=>r(t),children:e.jsx(_,{onFinish:c})}),m]})};export{R as NeedToChangePasswordComponent};
