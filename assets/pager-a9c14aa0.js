import{r as t,h as Te,j as e,c as n,I as L,R as ee,d as M,ap as Xe,B as F,g as k,_ as d,l as ne,aE as le,e as re,aX as Ce,K as ce,M as se,a7 as ge,as as ve,a3 as X,a5 as oe,aK as qe,q as zt,a as Pe,H,al as ue,f as te,C as Ae,a6 as nt,b as ie,aY as _t,am as We,S as ke,o as he,a9 as Oe,aZ as we,a_ as Zt,T as je,P as ye,Y as rt,Z as Ne,a0 as lt,A as Ve,a$ as Xt,ai as et,aj as es,b0 as ts,ao as Se,L as Fe,b1 as Ut,k as Kt,aB as Vt,D as He,ac as Be,b2 as Ye,W as ss,b3 as as,b4 as Lt,O as tt,b5 as ns,aV as is,aW as rs,b6 as ls,b7 as cs,b8 as ds,b9 as os,ba as st,bb as at,aa as Ht,bc as Yt,bd as us,y as Bt}from"./index-c92f9f6b.js";import{S as ms}from"./index-ad2b9004.js";import{l as hs}from"./index-742844e5.js";import{R as xs,P as ps,S as gs,a as js}from"./school_settings_component-11132ff6.js";import{A as ys}from"./index.esm-2a6d2955.js";import"./index-9cea7caf.js";import"./toConsumableArray-bbf3d55f.js";import"./index-f6c51ccc.js";import"./iconBase-1d410209.js";const{TextArea:fs}=L,Ss=a=>{const s=async m=>{var h;const{data:r}=await k.custom({url:"",method:"post",meta:{operation:"updateExaminationType",variables:{examinationTypeId:{value:(h=a.examinationType)==null?void 0:h.id,type:"Int",required:!0},name:{value:m.name,type:"String",required:!0},code:{value:m.code,type:"String",required:!0},description:{value:m.description,type:"String",required:!1},startDate:{value:m.start_date,type:"String",required:!1},endDate:{value:m.end_date,type:"String",required:!1}},fields:["success","message",{examinationType:["id","name","code","description","description","startDate","endDate","created","updated","isActive","canEdit","canDelete","canManage"]}]}}).catch(x=>(d.error("Error in updating Examination Type"),{data:null})).then(x=>x);r&&(r.success?(d.success("Examination Type updated successfully"),a.onFinish(r.examinationType)):d.error(r.message))};return t.useEffect(()=>{var m,r,h,x,j;a.form.setFieldsValue({name:(m=a.examinationType)==null?void 0:m.name,code:(r=a.examinationType)==null?void 0:r.code,start_date:Te(((h=a.examinationType)==null?void 0:h.startDate)??new Date),end_date:Te(((x=a.examinationType)==null?void 0:x.endDate)??new Date),description:(j=a.examinationType)==null?void 0:j.description})},[a.randKey]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:m=>{m.start_date=Te(m.start_date).format("YYYY-MM-DD"),m.end_date=Te(m.end_date).format("YYYY-MM-DD"),s(m)},requiredMark:!0,autoComplete:"off",initialValues:{remember:!1,email:"",password:""},children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input code"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs(ee,{children:[e.jsx(M,{span:12,children:e.jsx(n.Item,{name:"start_date",label:"Start Date",rules:[{required:!1,type:"date",message:"Please input Start Date"}],children:e.jsx(Xe,{style:{width:"100%"},popupStyle:{zIndex:9999}})})}),e.jsx(M,{span:12,children:e.jsx(n.Item,{name:"end_date",label:"End Date",rules:[{required:!1,type:"date",message:"Please input End Date"}],children:e.jsx(Xe,{style:{width:"100%"},popupStyle:{zIndex:9999}})})})]}),e.jsx(n.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(fs,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},vs=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(1),[N,A]=t.useState(0),[E,Y]=t.useState(!1),[p,_]=t.useState(20),[R,T]=t.useState(""),[z,U]=t.useState(!0);ne();const[K]=n.useForm(),[B]=n.useForm(),D=!le.useBreakpoint().lg,[b,C]=t.useState(!1),o=i=>{m(i),C(!0)},y=async i=>{h(r.map(c=>c.id===i.id?i:c)),B.resetFields(),C(!1)},g=async()=>{const{data:i}=await k.custom({url:"",method:"post",meta:{operation:"syncExaminationsTypes",variables:{},fields:["success","message"]}});i.success?(d.success(i.message),r.length=0,v(1,"")):d.error(i.message)},l=async i=>{const{data:c}=await k.custom({url:"",method:"post",meta:{operation:"deleteExaminationType",variables:{examinationTypeId:{value:parseInt(i.toString()),type:"Int",required:!0}},fields:["success","message"]}});c.success?(d.success(c.message),h(r.filter(O=>O.id!==i))):d.error(c.message)},f=()=>{d("Canceled")},I=[{title:"Name",dataIndex:"name",fixed:!0,render:(i,c,O)=>e.jsx("span",{children:e.jsx("a",{children:c.name})})},{title:"Code",dataIndex:"Code",fixed:!0,render:(i,c,O)=>e.jsx("span",{children:c.code})},{title:"Start Date",dataIndex:"startDate",fixed:!0,render:(i,c,O)=>e.jsx("span",{children:c.startDate&&Te(c.startDate).format("YYYY-MM-DD")})},{title:"End Date",dataIndex:"endDate",fixed:!0,render:(i,c,O)=>e.jsx("span",{children:c.endDate&&Te(c.endDate).format("YYYY-MM-DD")})},{title:"Created",dataIndex:"created",render:(i,c,O)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(c.created)})})})},{title:"Status",dataIndex:"isActive",render:(i,c,O)=>e.jsx("span",{children:c!=null&&c.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(i,c,O)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(F,{icon:e.jsx(ve,{}),disabled:!(c!=null&&c.canEdit),onClick:()=>o(c)}),e.jsx(X,{title:"Are you sure to delete this Examination Type?",onConfirm:()=>l(c==null?void 0:c.id),onCancel:()=>f,okText:"Yes",cancelText:"No",disabled:!(c!=null&&c.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(c!=null&&c.canDelete)})})]})}],v=async(i,c="",O=20)=>{const{data:S}=await k.custom({url:"",method:"get",meta:{operation:"examinationsTypes",variables:{page:{value:i,type:"Int",required:!0},key:{value:c,type:"String",required:!1},pageSize:{value:O,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","startDate","endDate","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(u=>(d.error("Error occured while fetching examinations types"),{data:null})).then(u=>u);S&&(j(S.page),A(S.total),Y(S.hasNext),h(S.results)),U(!1)};return t.useEffect(()=>{v(x,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:K,onFinish:i=>{j(1),r.length=0,T(i.key),v(1,i.key,p)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:D?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>g(),children:"Sync Mtaa"})})]}),e.jsx(ce,{loading:z,columns:I,dataSource:r,scroll:{x:!0},pagination:{onChange:(i,c)=>{_(c),v(i,R,c)},total:N,pageSize:p,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(se,{title:"Editting "+(s==null?void 0:s.name),open:b,onCancel:i=>C(i),children:e.jsx(Ss,{form:B,onFinish:y,randKey:Math.random(),examinationType:s})})]})},me=({children:a})=>{const{data:s}=qe(),m=()=>{((s==null?void 0:s.isStaff)===!1||(s==null?void 0:s.isAdmin)===!1)&&(window.location.pathname="/home")},[r,h]=zt.useState(!0),[x,j]=zt.useState(!1),N=async()=>{h(!0);const{data:A}=await k.custom({url:"",method:"get",meta:{operation:"controlAuthorized",variables:{},fields:["analytics"]}}).catch(E=>({data:null})).then(E=>E);A&&j(A.analytics.authorized),h(!1)};return t.useEffect(()=>{m(),N()},[]),!x&&!r?e.jsx(e.Fragment,{children:e.jsx("h1",{children:"Unauthorized"})}):e.jsx(Pe,{spinning:r,children:a})},Cs=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Examinations Types"})]}),e.jsx(vs,{height:80})]})}),bs=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,j]=t.useState(0),[N,A]=t.useState(20),[E,Y]=t.useState(""),[p,_]=t.useState(!1),[R,T]=t.useState(!0);ne();const[z]=n.useForm();n.useForm();const K=!le.useBreakpoint().lg,[B,V]=t.useState(!1),D=async()=>{const{data:g}=await k.custom({url:"",method:"post",meta:{operation:"syncSchoolVenuesTypes",variables:{},fields:["success","message"]}});g.success?(d.success(g.message),s.length=0,y(1,"")):d.error(g.message)},b=async g=>{const{data:l}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchoolVenueType",variables:{schoolVenueTypeId:{value:parseInt(g.toString()),type:"Int",required:!0}},fields:["success","message"]}});l.success?(d.success(l.message),m(s.filter(f=>f.id!==g))):d.error(l.message)},C=()=>{d("Canceled")},o=[{title:"Name",dataIndex:"name",fixed:!0,render:(g,l,f)=>e.jsx("span",{children:e.jsx("a",{children:l.name})})},{title:"Created",dataIndex:"created",render:(g,l,f)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(l.created)})})})},{title:"Status",dataIndex:"isActive",render:(g,l,f)=>e.jsx("a",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(g,l,f)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to delete this Venue Type?",onConfirm:()=>b(l==null?void 0:l.id),onCancel:()=>C,okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(l!=null&&l.canDelete)})})})}],y=async(g,l="",f=20)=>{const{data:I}=await k.custom({url:"",method:"get",meta:{operation:"schoolVenueTypes",variables:{page:{value:g,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:f,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(I.page),j(I.total),_(I.hasNext),m(I.results),T(!1)};return t.useEffect(()=>{y(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:K?24:20,children:e.jsx(n,{layout:"vertical",form:z,onFinish:g=>{h(1),s.length=0,Y(g.key),y(1,g.key,N)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:K?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>D(),children:"Sync Mtaa"})})]}),e.jsx(ce,{loading:R,columns:o,dataSource:s,scroll:{x:!0},pagination:{onChange:(g,l)=>{A(l),y(g,E,l)},total:x,pageSize:N,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(se,{title:"Edit Region Informations",width:"20%",open:B,onClose:g=>V(g),children:e.jsx(e.Fragment,{})})]})},Is=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"School Venues Types"})]}),e.jsx(bs,{height:80})]})}),As=async()=>{const{data:a}=await k.custom({url:"",method:"get",meta:{operation:"systemSettings",variables:{},fields:["smsSenderName","staffOtpAuthorize","adminOtpAuthorize","teachersOtpAuthorize","studentsOtpAuthorize","parentsOtpAuthorize","concatenateUsernameWithSchoolRegno","allowUserPublicRegistration","maximumLoginAttemp","smsCostPerUnit","otpExpiresTime","allowSessionTimeoutFeature","tokenExpires","passwordComplexityMinLength","passwordComplexityMaxLength","passwordComplexityMinUppercase","passwordComplexityMinLowercase","passwordComplexityMinNumeric","passwordComplexityMinSpecial","passwordComplexityAllowCharacterRepetition","allowedPasswordBackCompare","blockInteractionTillPasswordChanged","passwordMustChangeAfterDays","notifyPasswordChangeBeforeDays","resetAccountLockoutAfterMinutes","accountLockoutDurationInMinutes","allowedPasswordReusePeriondInMonths","userStorageLimit"]}}).catch(s=>({data:null})).then(s=>s);return a||null},Ze=a=>{switch(a){case"tokenExpires":return"in seconds";case"otpExpiresTime":return"in seconds";case"smsCostPerUnit":return"in Tsh";default:return""}},ks=a=>{const[s,m]=t.useState(!1),[r,h]=t.useState(!1),[x,j]=t.useState(),[N]=n.useForm(),A=async()=>{const{data:p}=await k.custom({url:"",method:"post",meta:{operation:"autoCreateSystemSettings",variables:{},fields:["success","message"]}}).catch(_=>(d.error("Error occured while Auto Creating System Settings"),{data:null})).then(_=>_);p&&(p.success?(d.success(p.message),E()):d.error(p.message))},E=async()=>{h(!0);const p=await As();if(p){m(!0);const _={teachersOtpAuthorize:p.teachersOtpAuthorize,studentsOtpAuthorize:p.studentsOtpAuthorize,parentsOtpAuthorize:p.parentsOtpAuthorize,concatenateUsernameWithSchoolRegno:p.concatenateUsernameWithSchoolRegno,allowUserPublicRegistration:p.allowUserPublicRegistration,maximumLoginAttemp:p.maximumLoginAttemp,smsCostPerUnit:p.smsCostPerUnit,otpExpiresTime:p.otpExpiresTime,tokenExpires:p.tokenExpires,staffOtpAuthorize:p.staffOtpAuthorize,adminOtpAuthorize:p.adminOtpAuthorize,passwordComplexityMinLength:p.passwordComplexityMinLength,passwordComplexityMaxLength:p.passwordComplexityMaxLength,passwordComplexityMinUppercase:p.passwordComplexityMinUppercase,passwordComplexityMinLowercase:p.passwordComplexityMinLowercase,passwordComplexityMinNumeric:p.passwordComplexityMinNumeric,passwordComplexityMinSpecial:p.passwordComplexityMinSpecial,allowedPasswordBackCompare:p.allowedPasswordBackCompare,allowSessionTimeoutFeature:p.allowSessionTimeoutFeature,blockInteractionTillPasswordChanged:p.blockInteractionTillPasswordChanged,passwordComplexityAllowCharacterRepetition:p.passwordComplexityAllowCharacterRepetition,passwordMustChangeAfterDays:p.passwordMustChangeAfterDays,notifyPasswordChangeBeforeDays:p.notifyPasswordChangeBeforeDays,resetAccountLockoutAfterMinutes:p.resetAccountLockoutAfterMinutes,accountLockoutDurationInMinutes:p.accountLockoutDurationInMinutes,allowedPasswordReusePeriondInMonths:p.allowedPasswordReusePeriondInMonths,smsSenderName:p.smsSenderName,userStorageLimit:p.userStorageLimit};j(_),N.setFieldsValue({teachersOtpAuthorize:p.teachersOtpAuthorize,studentsOtpAuthorize:p.studentsOtpAuthorize,parentsOtpAuthorize:p.parentsOtpAuthorize,concatenateUsernameWithSchoolRegno:p.concatenateUsernameWithSchoolRegno,allowUserPublicRegistration:p.allowUserPublicRegistration,maximumLoginAttemp:p.maximumLoginAttemp,smsCostPerUnit:p.smsCostPerUnit,otpExpiresTime:p.otpExpiresTime,tokenExpires:p.tokenExpires,staffOtpAuthorize:p.staffOtpAuthorize,adminOtpAuthorize:p.adminOtpAuthorize,passwordComplexityMinLength:p.passwordComplexityMinLength,passwordComplexityMaxLength:p.passwordComplexityMaxLength,passwordComplexityMinUppercase:p.passwordComplexityMinUppercase,passwordComplexityMinLowercase:p.passwordComplexityMinLowercase,passwordComplexityMinNumeric:p.passwordComplexityMinNumeric,passwordComplexityMinSpecial:p.passwordComplexityMinSpecial,allowedPasswordBackCompare:p.allowedPasswordBackCompare,allowSessionTimeoutFeature:p.allowSessionTimeoutFeature,blockInteractionTillPasswordChanged:p.blockInteractionTillPasswordChanged,passwordComplexityAllowCharacterRepetition:p.passwordComplexityAllowCharacterRepetition,passwordMustChangeAfterDays:p.passwordMustChangeAfterDays,notifyPasswordChangeBeforeDays:p.notifyPasswordChangeBeforeDays,resetAccountLockoutAfterMinutes:p.resetAccountLockoutAfterMinutes,accountLockoutDurationInMinutes:p.accountLockoutDurationInMinutes,allowedPasswordReusePeriondInMonths:p.allowedPasswordReusePeriondInMonths,userStorageLimit:p.userStorageLimit})}else m(!1);h(!1)},Y=async p=>{const{data:_}=await k.custom({url:"",method:"post",meta:{operation:"updateSystemSettings",variables:{smsSenderName:{value:p.smsSenderName,type:"String",required:!1},teachersOtpAuthorize:{value:p.teachersOtpAuthorize,type:"Boolean",required:!1},studentsOtpAuthorize:{value:p.studentsOtpAuthorize,type:"Boolean",required:!1},parentsOtpAuthorize:{value:p.parentsOtpAuthorize,type:"Boolean",required:!1},concatenateUsernameWithSchoolRegno:{value:p.concatenateUsernameWithSchoolRegno,type:"Boolean",required:!1},allowUserPublicRegistration:{value:p.allowUserPublicRegistration,type:"Boolean",required:!1},maximumLoginAttemp:{value:p.maximumLoginAttemp?parseInt(p.maximumLoginAttemp.toString()):5,type:"Int",required:!1},smsCostPerUnit:{value:p.smsCostPerUnit?parseInt(p.smsCostPerUnit.toString()):0,type:"Float",required:!1},otpExpiresTime:{value:p.otpExpiresTime?parseInt(p.otpExpiresTime.toString()):120,type:"Float",required:!1},tokenExpires:{value:p.tokenExpires?parseInt(p.tokenExpires.toString()):60,type:"Int"},staffOtpAuthorize:{value:p.staffOtpAuthorize,type:"Boolean",required:!1},adminOtpAuthorize:{value:p.adminOtpAuthorize,type:"Boolean",required:!1},passwordComplexityMinLength:{value:parseInt(p.passwordComplexityMinLength.toString()),type:"Int",reqired:!1},passwordComplexityMaxLength:{value:parseInt(p.passwordComplexityMaxLength.toString()),type:"Int",reqired:!1},passwordComplexityMinUppercase:{value:parseInt(p.passwordComplexityMinUppercase.toString()),type:"Int",reqired:!1},passwordComplexityMinLowercase:{value:parseInt(p.passwordComplexityMinLowercase.toString()),type:"Int",reqired:!1},passwordComplexityMinNumeric:{value:parseInt(p.passwordComplexityMinNumeric.toString()),type:"Int",reqired:!1},passwordComplexityMinSpecial:{value:parseInt(p.passwordComplexityMinSpecial.toString()),type:"Int",reqired:!1},allowedPasswordBackCompare:{value:parseInt(p.allowedPasswordBackCompare.toString()),type:"Int",required:!1},allowSessionTimeoutFeature:{value:p.allowSessionTimeoutFeature,type:"Boolean",required:!1},blockInteractionTillPasswordChanged:{value:p.blockInteractionTillPasswordChanged,type:"Boolean",required:!1},passwordComplexityAllowCharacterRepetition:{value:p.passwordComplexityAllowCharacterRepetition,type:"Boolean",required:!1},passwordMustChangeAfterDays:{value:parseInt(p.passwordMustChangeAfterDays.toString()),type:"Int",required:!1},notifyPasswordChangeBeforeDays:{value:parseInt(p.notifyPasswordChangeBeforeDays.toString()),type:"Int",required:!1},resetAccountLockoutAfterMinutes:{value:parseInt(p.resetAccountLockoutAfterMinutes.toString()),type:"Int",required:!1},accountLockoutDurationInMinutes:{value:parseInt(p.accountLockoutDurationInMinutes.toString()),type:"Int",required:!1},allowedPasswordReusePeriondInMonths:{value:parseInt(p.allowedPasswordReusePeriondInMonths.toString()),type:"Int",required:!1},userStorageLimit:{value:parseInt(p.userStorageLimit.toString()),type:"Int",required:!1}},fields:["success","message"]}}).catch(R=>(d.error("Error occured while updating System Settings"),{data:null})).then(R=>R);_&&(_.success?d.success(_.message):d.error(_.message))};return t.useEffect(()=>{E()},[a.randKey]),e.jsx(e.Fragment,{children:e.jsx(te,{loading:r,active:!0,children:s?e.jsx(e.Fragment,{children:e.jsxs(ee,{children:[e.jsx(M,{span:10,children:e.jsx(Ae,{children:e.jsx(nt,{column:1,title:"System Settings",children:Object.entries(x??{}).map(([p,_],R)=>typeof _=="boolean"?e.jsx(nt.Item,{labelStyle:{fontWeight:"bolder"},label:p.split(/(?=[A-Z])/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "),children:_?e.jsx(e.Fragment,{children:e.jsx("span",{style:{color:"green"},children:"Enabled"})}):e.jsx(e.Fragment,{children:e.jsx("span",{style:{color:"red"},children:"Disabled"})})}):e.jsx(nt.Item,{labelStyle:{fontWeight:"bolder"},label:p.split(/(?=[A-Z])/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "),children:_}))})})}),e.jsx(M,{span:14,children:e.jsx("div",{style:{marginLeft:20},children:e.jsx(n,{layout:"horizontal",form:N,onFinish:p=>{Y(p)},children:e.jsx(ee,{style:{display:"flex"},children:e.jsx(M,{span:24,children:e.jsxs(Ae,{children:[Object.entries(x??{}).map(([p,_],R)=>typeof _=="boolean"?e.jsx(n.Item,{label:e.jsxs(e.Fragment,{children:[p.split(/(?=[A-Z])/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "),Ze(p)&&e.jsx(ie,{children:Ze(p)})]}),name:p,initialValue:_,children:e.jsx(ms,{checked:N.getFieldValue(p),onChange:T=>{N.submit(),j(N.getFieldsValue())}})}):e.jsx(n.Item,{label:e.jsxs(e.Fragment,{children:[p.split(/(?=[A-Z])/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "),Ze(p)&&e.jsx(ie,{style:{marginLeft:5},color:"green",children:Ze(p)})]}),name:p,initialValue:_,children:e.jsx(L,{size:"large",value:N.getFieldValue(p),placeholder:"Enter "+p.split(/(?=[A-Z])/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "),onChange:T=>{N.submit(),j(N.getFieldsValue())}})})),e.jsx(n.Item,{children:e.jsx(F,{htmlType:"submit",size:"large",style:{marginTop:20,float:"right"},icon:e.jsx(_t,{}),danger:!0,children:"Save"})})]})})})})})})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(F,{onClick:()=>A(),children:"Auto Create Settings"})})})})})},Fs=()=>e.jsx(me,{children:e.jsxs(e.Fragment,{children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"System Settings"})]}),e.jsx(ks,{})]})}),{Title:Wt,Text:Ns}=We,be=({title:a,value:s})=>e.jsx(Ae,{hoverable:!0,style:{marginRight:10},bodyStyle:{padding:0},children:e.jsxs(ke,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Wt,{level:5,children:s}),e.jsx(Ns,{children:a})]})}),Ts=a=>{const[s,m]=t.useState(),[r,h]=t.useState(!0);ne();const j=!le.useBreakpoint().lg,N=async()=>{const{data:A}=await k.custom({url:"",method:"get",meta:{operation:"darasaAnalytics",fields:["analytics"]}});m(A.analytics),h(!1)};return t.useEffect(()=>{N()},[]),e.jsx(e.Fragment,{children:e.jsxs(ee,{align:"top",children:[e.jsx(M,{span:24,children:e.jsx(Wt,{level:5,children:"Oclass Analytics"})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Classes",value:s==null?void 0:s.totalClasses})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Active Classes",value:s==null?void 0:s.totalActiveClasses})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Blocked Classes",value:s==null?void 0:s.totalBlockedClasses})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Students",value:s==null?void 0:s.totalStudents})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Active Students",value:s==null?void 0:s.totalActiveStudents})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Blocked Students",value:s==null?void 0:s.totalBlockedStudents})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Drives",value:s==null?void 0:s.totalClassesDrives})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Active Classes Drives",value:s==null?void 0:s.totalActiveClassesDrives})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Blocked Classes Drives",value:s==null?void 0:s.totalBlockedClassesDrives})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Announcements",value:s==null?void 0:s.totalClassesAnnouncements})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Active Announcements",value:s==null?void 0:s.totalActiveClassesAnnouncements})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Blocked Announcements",value:s==null?void 0:s.totalBlockedClassesAnnouncements})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Assignments",value:s==null?void 0:s.totalClassesAssignments})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Active Assignments",value:s==null?void 0:s.totalActiveClassesAnnouncements})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Blocked Assignments",value:s==null?void 0:s.totalBlockedClassesAssignments})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Resources Links",value:s==null?void 0:s.totalClassesResourcesLinks})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Active Resources Links",value:s==null?void 0:s.totalActiveClassesResourcesLinks})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(be,{title:"Blocked Resources Links",value:s==null?void 0:s.totalBlockedClassesResourcesLinks})})})]})})},{Title:wt,Text:qs}=We,Ie=({title:a,value:s})=>e.jsx(Ae,{hoverable:!0,style:{marginRight:10},bodyStyle:{padding:0},children:e.jsxs(ke,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(wt,{level:5,children:s}),e.jsx(qs,{children:a})]})}),Ps=a=>{const[s,m]=t.useState(),[r,h]=t.useState(!0);ne();const j=!le.useBreakpoint().lg,N=async()=>{const{data:A}=await k.custom({url:"",method:"get",meta:{operation:"odriveAnalytics",fields:["analytics"]}});m(A.analytics),h(!1)};return t.useEffect(()=>{N()},[]),e.jsx(e.Fragment,{children:e.jsxs(ee,{align:"top",children:[e.jsx(M,{span:24,children:e.jsx(wt,{level:5,children:"Odrive Analytics"})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(Ie,{title:"Drives",value:s==null?void 0:s.totalDrives})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(Ie,{title:"Active Drives",value:s==null?void 0:s.totalActiveDrives})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(Ie,{title:"Blocked Drives",value:s==null?void 0:s.totalBlockedDrives})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(Ie,{title:"Files",value:s==null?void 0:s.totalFiles})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(Ie,{title:"Active Files",value:s==null?void 0:s.totalActiveFiles})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(Ie,{title:"Blocked Files",value:s==null?void 0:s.totalBlockedFiles})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(Ie,{title:"Private Drives",value:s==null?void 0:s.totalPrivateDrives})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(Ie,{title:"Active Private Drives",value:s==null?void 0:s.totalActivePrivateDrives})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(Ie,{title:"Blocked Private Drives",value:s==null?void 0:s.totalBlockedPrivateDrives})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(Ie,{title:"Public Drives",value:s==null?void 0:s.totalPublicDrives})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(Ie,{title:"Active Public Drives",value:s==null?void 0:s.totalActivePublicDrives})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(Ie,{title:"Active Schools",value:s==null?void 0:s.totalActiveOdriveSchools})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(Ie,{title:"Blocked Schools",value:s==null?void 0:s.totalBlockedOdriveSchools})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(Ie,{title:"Drives Members",value:s==null?void 0:s.totalDrivesMembers})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(Ie,{title:"Active Drives Members",value:s==null?void 0:s.totalActiveDrivesMembers})})}),e.jsx(M,{span:j?12:4,children:e.jsx(te,{loading:r,active:!0,children:e.jsx(Ie,{title:"Blocked Drives Members",value:s==null?void 0:s.totalBlockedDrivesMembers})})})]})})},{Title:Me,Text:ze}=We,Ms=a=>{const[s,m]=t.useState(),[r,h]=t.useState(0),[x,j]=t.useState(!0),{push:N}=ne(),E=!le.useBreakpoint().lg,Y=async()=>{const{data:_}=await k.custom({url:"",method:"get",meta:{operation:"userAnalytics",fields:["analytics"]}});m(_.analytics),j(!1)},p=async()=>{const{data:_}=await k.custom({url:"",method:"get",meta:{operation:"globalOpesSmsBalance",fields:["data"]}});_&&h(parseInt(_.data.balance))};return t.useEffect(()=>{Y(),p()},[]),e.jsx(e.Fragment,{children:e.jsxs(ee,{align:"top",children:[e.jsx(M,{span:24,children:e.jsx(Me,{level:5,children:"Users/Members/School Analytics"})}),e.jsx(M,{span:E?12:3,children:e.jsx(te,{loading:x,active:!0,children:e.jsx(Ae,{hoverable:!0,style:{marginRight:10},onClick:()=>N("/control/schools"),bodyStyle:{padding:0},children:e.jsxs(ke,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Me,{level:5,children:s==null?void 0:s.total_schools}),e.jsx(ze,{children:"Scbools"})]})})})}),e.jsx(M,{span:E?12:4,children:e.jsx(te,{loading:x,active:!0,children:e.jsx(Ae,{hoverable:!0,style:{marginRight:10},onClick:()=>N("/control/users?status=1"),bodyStyle:{padding:0},children:e.jsxs(ke,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Me,{level:5,children:s==null?void 0:s.total_active_users}),e.jsx(ze,{children:"Active Users"})]})})})}),e.jsx(M,{span:E?12:4,children:e.jsx(te,{loading:x,active:!0,children:e.jsx(Ae,{hoverable:!0,style:{marginRight:10},onClick:()=>N("/control/users?status=0"),bodyStyle:{padding:0},children:e.jsxs(ke,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Me,{level:5,children:s==null?void 0:s.total_blocked_users}),e.jsx(ze,{children:"Blocked Users"})]})})})}),e.jsx(M,{span:E?12:2,children:e.jsx(te,{loading:x,active:!0,children:e.jsx(Ae,{hoverable:!0,style:{marginRight:10},onClick:()=>N("/control/users?status=1&role=adminstrator"),bodyStyle:{padding:0},children:e.jsxs(ke,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Me,{level:5,children:s==null?void 0:s.total_adminstrators}),e.jsx(ze,{children:"Active Admins"})]})})})}),e.jsx(M,{span:E?12:2,children:e.jsx(te,{loading:x,active:!0,children:e.jsx(Ae,{hoverable:!0,style:{marginRight:10},onClick:()=>N("/control/users?status=0&role=adminstrator"),bodyStyle:{padding:0},children:e.jsxs(ke,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Me,{level:5,children:s==null?void 0:s.total_blocked_adminstrators}),e.jsx(ze,{children:"Blocked Admins"})]})})})}),e.jsx(M,{span:E?12:2,children:e.jsx(te,{loading:x,active:!0,children:e.jsx(Ae,{hoverable:!0,style:{marginRight:10},onClick:()=>N("/control/users?status=1&role=staff"),bodyStyle:{padding:0},children:e.jsxs(ke,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Me,{level:5,children:s==null?void 0:s.total_staffs}),e.jsx(ze,{children:"Active Staffs"})]})})})}),e.jsx(M,{span:E?12:2,children:e.jsx(te,{loading:x,active:!0,children:e.jsx(Ae,{hoverable:!0,style:{marginRight:10},onClick:()=>N("/control/users?status=0&role=staff"),bodyStyle:{padding:0},children:e.jsxs(ke,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Me,{level:5,children:s==null?void 0:s.total_blocked_staffs}),e.jsx(ze,{children:"Blocked Staffs"})]})})})}),e.jsx(M,{span:E?12:2,children:e.jsx(te,{loading:x,active:!0,children:e.jsx(Ae,{hoverable:!0,style:{marginRight:10},bodyStyle:{padding:0},children:e.jsxs(ke,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Me,{level:5,children:r}),e.jsx(ze,{children:"Messages Balance"})]})})})})]})})},Es=a=>e.jsxs(e.Fragment,{children:[e.jsx(Ms,{}),e.jsx(Ps,{}),e.jsx(Ts,{})]}),Ds=()=>{const{data:a}=qe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Analytics"})]}),e.jsx(Es,{})]})})},{TextArea:zs}=L,Ls=a=>{const[s,m]=t.useState(!1),[r,h]=t.useState(),[x,j]=t.useState(!1),[N,A]=t.useState(!1),[E,Y]=t.useState(!1),[p,_]=t.useState(!0);return e.jsx(e.Fragment,{children:e.jsx(hs.Spin,{spinning:s,children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:R=>{R.is_public=N,R.is_custom=E,R.must_login=p,R.icon=r,m(!0),a.onFinish(R)},requiredMark:!1,initialValues:{remember:!1,email:"",password:""},children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"url",label:"Path",rules:[{required:!0,type:"string",message:"Please input url"}],children:e.jsx(L,{size:"large",placeholder:"Enter Path..."})}),e.jsx(n.Item,{name:"must_login",rules:[{required:!1,type:"boolean"}],children:e.jsx(he,{onChange:()=>{_(!p)},defaultChecked:p,children:"Must Login"})}),e.jsx(n.Item,{name:"is_public",rules:[{required:!1,type:"boolean"}],children:e.jsx(he,{onChange:()=>{A(!N)},children:"Public Available"})}),e.jsx(n.Item,{name:"is_custom",rules:[{required:!1,type:"boolean"}],children:e.jsx(he,{onChange:()=>{Y(!E)},children:"Custom Application"})}),e.jsx(n.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(zs,{rows:4})}),e.jsx(n.Item,{name:"icon",label:"Icon",style:{marginBottom:"12px"},children:e.jsx(Oe,{beforeUpload:()=>!1,maxCount:1,onChange:R=>{const T=R.file;r?r.uid!==T.uid&&(h(T),j(!0)):(h(T),j(!0))},onRemove:()=>{h(void 0),j(!1)},accept:"image/*",children:e.jsx(F,{icon:e.jsx(we,{}),children:"Click to Select"})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(F,{type:"primary",size:"large",htmlType:"submit",disabled:!x||s,loading:s,children:[s&&e.jsx(Zt,{color:"success"}),"Save"]})})]})})})},{TextArea:Bs}=L,Os=a=>{const[s,m]=t.useState(),[r,h]=t.useState(!0),[x,j]=t.useState(!1);return t.useEffect(()=>{a.form.setFieldsValue({name:a.app.name,url:a.app.url,description:a.app.description,must_login:a.app.mustLogin,is_public:a.app.isPublic,is_custom:a.app.isCustom,is_active:a.app.isActive,icon:a.app.icon}),m(null)},[a.randKey]),e.jsx(e.Fragment,{children:e.jsx(Pe,{spinning:x,children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:N=>{N.id=parseInt(a.app.id),N.icon=s,j(!0),a.onFinish(N)},requiredMark:!1,initialValues:{remember:!1,email:"",password:""},children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"url",label:"Path",rules:[{required:!0,type:"string",message:"Please input url"}],children:e.jsx(L,{size:"large",placeholder:"Enter Path..."})}),e.jsx(n.Item,{name:"must_login",valuePropName:"checked",rules:[{required:!1,type:"boolean"}],children:e.jsx(he,{children:"Must Login"})}),e.jsx(n.Item,{name:"is_public",valuePropName:"checked",rules:[{required:!1,type:"boolean"}],children:e.jsx(he,{children:"Public Available"})}),e.jsx(n.Item,{name:"is_custom",valuePropName:"checked",rules:[{required:!1,type:"boolean"}],children:e.jsx(he,{children:"Custom Application"})}),e.jsx(n.Item,{name:"is_active",valuePropName:"checked",rules:[{required:!1,type:"boolean"}],children:e.jsx(he,{children:"is Active"})}),e.jsx(n.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(Bs,{rows:4})}),e.jsxs(n.Item,{name:"icon",label:"Icon:",style:{marginBottom:"12px"},children:[e.jsx(je,{title:a.app.icon,children:e.jsx("span",{style:{color:"green",display:"block"},children:a.app.icon})}),e.jsx(Oe,{beforeUpload:()=>!1,maxCount:1,onChange:N=>{const A=N.file;s?s.uid!==A.uid&&(m(A),h(!0)):(m(A),h(!0))},onRemove:()=>{m(void 0),h(!1)},accept:"image/*",children:e.jsx(F,{icon:e.jsx(we,{}),children:"Click to Select"})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",loading:x,disabled:x,children:"Save"})})]})})})},Rs=a=>{const[s,m]=t.useState([]),[r,h]=t.useState(),[x,j]=t.useState(!0);ne();const[N,A]=t.useState(!1),[E,Y]=t.useState(!1),[p]=n.useForm(),[_]=n.useForm(),T=!le.useBreakpoint().lg,z=y=>{h(y),Y(!0)},U=()=>{A(!0)},K=()=>{A(!1)},B=async y=>{const{data:g}=await k.custom({url:"",method:"post",meta:{operation:"createApp",variables:{name:{value:y.name,type:"String",required:!0},description:{value:y.description,type:"String",required:!1},url:{value:y.url,type:"String",required:!0},icon:{value:y.icon,type:"Upload",required:!0},isPublic:{value:y.is_public,type:"Boolean",required:!1},isCustom:{value:y.is_custom,type:"Boolean",required:!1},mustLogin:{value:y.must_login,type:"Boolean",required:!1}},fields:["success","message",{app:["id","name","url","icon","description","created","updated","isActive","canDelete","canEdit","canManage","canAccess"]}]}});g.success?(d.success(g.message),m([g.app,...s]),p.resetFields(),A(!1)):d.error(g.message)},V=async y=>{const{data:g}=await k.custom({url:"",method:"post",meta:{operation:"updateApp",variables:{id:{value:y.id,type:"Int",required:!0},name:{value:y.name,type:"String",required:!0},description:{value:y.description,type:"String",required:!1},url:{value:y.url,type:"String",required:!0},icon:{value:y.icon,type:"Upload",required:!1},isPublic:{value:y.is_public,type:"Boolean",required:!1},isCustom:{value:y.is_custom,type:"Boolean",required:!1},mustLogin:{value:y.must_login,type:"Boolean",required:!1},isActive:{value:y.is_active,type:"Boolean",required:!1}},fields:["success","message",{app:["id","name","url","icon","description","created","updated","isActive","canDelete","canEdit","canManage","canAccess"]}]}});g.success?(d.success(g.message),m(s.map(l=>l.id.toString()===y.id.toString()?g.app:l)),_.resetFields(),Y(!1)):d.error(g.message)},D=async()=>{const{data:y}=await k.custom({url:"",method:"post",meta:{operation:"syncDefaultApps",variables:{},fields:["success","message"]}});y.success?(d.success(y.message),o()):d.error(y.message)},b=async y=>{const{data:g}=await k.custom({url:"",method:"post",meta:{operation:"deleteApp",variables:{id:{value:y,type:"Int",required:!0}},fields:["success","message"]}});g.success?(d.success(g.message),m(s.filter(l=>l.id.toString()!==y.toString()))):d.error(g.message)},C=y=>{et.confirm({title:"Deleting Application",icon:e.jsx(es,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>b(parseInt(y.toString()))})},o=async()=>{const{data:y}=await k.custom({url:"",method:"get",meta:{operation:"apps",variables:{control:{value:!0,type:"Boolean",required:!0}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","icon","url","isActive","mustLogin","isCustom","isPublic","created","updated","isActive","canEdit","canDelete","canManage","canAccess"]}]}});m(y.results),j(!1)};return t.useEffect(()=>{o()},[]),x?e.jsx(e.Fragment,{children:e.jsx(te,{loading:x,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(M,{span:20}),e.jsxs(M,{span:4,style:{display:"flex",justifyContent:"flex-end",marginBottom:5,marginTop:5},children:[e.jsxs(F,{size:"large",onClick:()=>{p.resetFields(),U()},danger:!0,children:[e.jsx(ye,{}),"Create App"]}),e.jsxs(F,{size:"large",onClick:()=>{D()},danger:!0,children:[e.jsx(ye,{}),"Sync Default Apps"]})]})]}),e.jsxs(ee,{align:"top",children:[s.length===0&&e.jsx(M,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx("h3",{children:"No Apps Found ..."})}),s.map(y=>e.jsx(M,{span:T?12:4,children:e.jsxs(Ae,{hoverable:y.isActive,style:{marginRight:10,marginBottom:10},children:[e.jsx(ke,{style:{right:0,position:"absolute"},children:e.jsx(rt,{trigger:["click"],overlay:e.jsxs(Ne,{children:[e.jsx(Ne.Item,{icon:e.jsx(ve,{}),onClick:()=>{z(y)},disabled:!(y!=null&&y.canDelete),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(Ne.Item,{icon:e.jsx(oe,{}),onClick:()=>{C(y.id)},disabled:!(y!=null&&y.canDelete),children:e.jsxs("a",{target:"_blank",rel:"noopener noreferrer",children:["Delete ",y.canDelete]})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:g=>g.preventDefault(),children:e.jsx(lt,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsxs(ke,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},onClick:()=>{},children:[e.jsx(Ve,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(Xt,{}),src:y.icon}),y.name]})]})}))]}),e.jsx(se,{title:"Creating An Application",open:N,onOk:K,width:"30vw",onClose:y=>A(y),children:e.jsx(Ls,{form:p,onFinish:B})}),e.jsx(se,{title:"Edit Application",open:E,width:"30vw",onClose:y=>{Y(y)},children:e.jsx(Os,{app:r,form:_,onFinish:V,randKey:Math.random()})})]})},_s=()=>{const{data:a}=qe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(me,{children:e.jsxs(e.Fragment,{children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Applications"})]}),e.jsx(Rs,{})]})})},Us=a=>{const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,j]=t.useState(0),[N,A]=t.useState(20),[E,Y]=t.useState(""),[p,_]=t.useState(!1),[R,T]=t.useState(!0);ne();const[z]=n.useForm();n.useForm();const K=!le.useBreakpoint().lg,B=[{title:"Name",dataIndex:"name",fixed:!0,render:(b,C,o)=>e.jsx("span",{children:e.jsx("a",{children:C.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(b,C,o)=>e.jsx("span",{children:e.jsx("a",{children:b})})},{title:"Created",dataIndex:"created",render:(b,C,o)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(C.created)})})})},{title:"Status",dataIndex:"isActive",render:(b,C,o)=>e.jsx("a",{children:C!=null&&C.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(b,C,o)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"}})}],V=async(b,C="",o=20)=>{const{data:y}=await k.custom({url:"",method:"get",meta:{operation:"systemPermissions",variables:{page:{value:b,type:"Int",required:!0},key:{value:C,type:"String",required:!1},pageSize:{value:o,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(y.page),j(y.total),_(y.hasNext),m(y.results),T(!1)},D=async()=>{const{data:b}=await k.custom({url:"",method:"post",meta:{operation:"syncSystemPermissions",variables:{},fields:["success","message"]}});b.success?(d.success(b.message),s.length=0,m([]),V(1)):d.error(b.message)};return t.useEffect(()=>{V(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:K?24:20,children:e.jsx(n,{layout:"vertical",form:z,onFinish:b=>{h(1),s.length=0,Y(b.key),V(1,b.key,N)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:K?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(je,{title:"Synchronize Default School Ownerships",children:e.jsx(F,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>D()})})})]}),e.jsx("div",{children:e.jsx(ce,{loading:R,columns:B,dataSource:s,scroll:{x:!0},pagination:{onChange:(b,C)=>{A(C),V(b,E,C)},total:x,pageSize:N,position:["bottomCenter"],showQuickJumper:!0}})})]})},Ks=()=>{const{data:a}=qe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Permissions"})]}),e.jsx(Us,{height:80})]})})},Vs=a=>e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:s=>{a.onFinish(s)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})}),Hs=a=>{const[s,m]=t.useState(a.role.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.role.name,isActive:a.role.isActive})},[a.form,a.role]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.role.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(he,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Ys=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(1),[N,A]=t.useState(0),[E,Y]=t.useState(20),[p,_]=t.useState(""),[R,T]=t.useState(!1),[z,U]=t.useState(!0);ne();const[K]=n.useForm(),[B]=n.useForm();le.useBreakpoint().lg;const[D,b]=t.useState(!1),[C,o]=t.useState(!1),[y,g]=t.useState(!1),l=G=>{m(G),b(!0)},f=G=>{m(G),g(!0)},I=()=>{g(!1)},v=async G=>{const{data:J}=await k.custom({url:"",method:"post",meta:{operation:"updateSystemRole",variables:{id:{value:G.id,type:"Int",required:!0},name:{value:G.name,type:"String",required:!0},isActive:{value:G.isActive,type:"Boolean",required:!0}},fields:["success","message",{schoolType:["id","name","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}});J.success?(d.success(J.message),B.resetFields(),g(!1),h(r.map(Z=>parseInt(Z.id.toString())===parseInt(G.id)?J.role:Z))):d.error(J.message)},i=async G=>{const{data:J}=await k.custom({url:"",method:"post",meta:{operation:"createSystemRole",variables:{id:{value:G.id,type:"Int",required:!0},name:{value:G.name,type:"String",required:!0},isActive:{value:G.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","code","description","custom","created","updated","isActive","canDelete","canEdit","canManage"]}]}});J.success?(d.success(J.message),B.resetFields(),g(!1),h(r.map(Z=>Z.id===J.role.id?J.role:Z))):d.error(J.message)},c=async G=>{const{data:J}=await k.custom({url:"",method:"post",meta:{operation:"deleteSystemRole",variables:{id:{value:parseInt(G.toString()),type:"Int",required:!0}},fields:["success","message"]}});J.success?(d.success(J.message),h(r.filter(Z=>Z.id!==G))):d.error(J.message)},O=()=>{d("Canceled")},S=[{title:"Name",dataIndex:"name",fixed:!0,render:(G,J,Z)=>e.jsx("span",{children:e.jsx("a",{children:J.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(G,J,Z)=>e.jsx("span",{children:e.jsx("a",{children:G})})},{title:"Custom Role",dataIndex:"custom",fixed:!0,render:(G,J,Z)=>e.jsx("span",{children:J.custom?e.jsx(ie,{color:"red",children:"Custom"}):e.jsx(ie,{color:"green",children:"Not Custom"})})},{title:"Created",dataIndex:"created",render:(G,J,Z)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(J.created)})})})},{title:"Status",dataIndex:"isActive",render:(G,J,Z)=>e.jsx("a",{children:J!=null&&J.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(G,J,Z)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(je,{title:"Manage Role Permissions",placement:"left",children:e.jsx(F,{icon:e.jsx(ts,{}),disabled:!(J!=null&&J.canManage),onClick:()=>l(J)})}),e.jsx(X,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>c(J==null?void 0:J.id),onCancel:()=>O,okText:"Yes",cancelText:"No",disabled:!(J!=null&&J.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(J!=null&&J.canDelete)})}),e.jsx(je,{title:"Edit "+(J==null?void 0:J.name)+" Ownership",color:"green",placement:"left",children:e.jsx(F,{icon:e.jsx(ve,{}),disabled:!(J!=null&&J.canEdit),onClick:()=>f(J)})})]})}],u=async(G,J="",Z=20)=>{const{data:q}=await k.custom({url:"",method:"get",meta:{operation:"systemRoles",variables:{page:{value:G,type:"Int",required:!0},key:{value:J,type:"String",required:!1},pageSize:{value:Z,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","custom","isActive","created","updated","canEdit","canDelete","canManage"]}]}});j(q.page),A(q.total),T(q.hasNext),h(q.results),U(!1)},W=async()=>{const{data:G}=await k.custom({url:"",method:"post",meta:{operation:"syncSystemRoles",variables:{},fields:["success","message"]}});G.success?(d.success(G.message),r.length=0,h([]),u(1)):d.error(G.message)};return t.useEffect(()=>{u(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:8,children:e.jsx(n,{layout:"vertical",form:K,onFinish:G=>{j(1),r.length=0,_(G.key),u(1,G.key,E)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(je,{title:"Synchronize Default Schools Roles",placement:"left",color:"green",children:e.jsx(F,{size:"large",icon:e.jsx(Ce,{}),style:{marginRight:10},onClick:()=>W()})})})]}),e.jsx("div",{children:e.jsx(ce,{loading:z,columns:S,dataSource:r,scroll:{x:!0},pagination:{onChange:(G,J)=>{Y(J),u(G,p,J)},total:N,pageSize:E,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Edit System Role",width:"30vw",open:y,onOk:I,onClose:G=>g(G),children:e.jsx(Hs,{form:B,role:s,onFinish:v})}),e.jsx(se,{title:"Create System Role",width:"30vw",open:C,onCancel:G=>o(G),children:e.jsx(Vs,{form:B,onFinish:i})}),e.jsx(se,{title:"Manage Role Permissions",width:"70vw",visible:D,onCancel:G=>b(G),children:e.jsx(xs,{role:s,randKey:Math.random()})})]})},Ws=()=>{const{data:a}=qe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Roles"})]}),e.jsx(Ys,{height:80})]})})},ws=a=>{const[s,m]=t.useState(a.district.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.district.name,isActive:a.district.isActive})},[a.form,a.district]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.district.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(he,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Gs=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(1),[N,A]=t.useState(0),[E,Y]=t.useState(20),[p,_]=t.useState(""),[R,T]=t.useState(!1),[z,U]=t.useState(!0);ne();const[K]=n.useForm(),[B]=n.useForm(),D=!le.useBreakpoint().lg,[b,C]=t.useState(!1),o=v=>{m(v),C(!0)},y=async v=>{const{data:i}=await k.custom({url:"",method:"post",meta:{operation:"updateDistrict",variables:{id:{value:v.id,type:"Int",required:!0},name:{value:v.name,type:"String",required:!0},isActive:{value:v.isActive,type:"Boolean",required:!0}},fields:["success","message",{district:["id","name",{region:["id","name"]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}});i.success?(d.success(i.message),B.resetFields(),C(!1),h(r.map(c=>c.id===i.district.id?i.district:c))):d.error(i.message)},g=async v=>{const{data:i}=await k.custom({url:"",method:"post",meta:{operation:"deleteDistrict",variables:{id:{value:v,type:"Int",required:!0}},fields:["success","message"]}});i.success?(d.success(i.message),h(r.filter(c=>c.id!==v))):d.error(i.message)},l=()=>{d("Canceled")},f=[{title:"Name",dataIndex:"name",fixed:!0,render:(v,i,c)=>e.jsx("span",{children:e.jsx("a",{children:i.name})})},{title:"Region",dataIndex:"region",fixed:!0,render:(v,i,c)=>e.jsx("span",{children:e.jsx("a",{children:i.region.name})})},{title:"Created",dataIndex:"created",render:(v,i,c)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(i.created)})})})},{title:"Status",dataIndex:"isActive",render:(v,i,c)=>e.jsx("a",{children:i!=null&&i.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,i,c)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this member?",onConfirm:()=>g(i==null?void 0:i.id),onCancel:()=>l,okText:"Yes",cancelText:"No",disabled:!(i!=null&&i.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(i!=null&&i.canDelete)})}),e.jsx(F,{disabled:!(i!=null&&i.canEdit),icon:e.jsx(ve,{}),onClick:()=>o(i)})]})}],I=async(v,i="",c=20)=>{const{data:O}=await k.custom({url:"",method:"get",meta:{operation:"districts",variables:{page:{value:v,type:"Int",required:!0},key:{value:i,type:"String",required:!1},pageSize:{value:c,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name",{region:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});j(O.page),A(O.total),T(O.hasNext),h(O.results),U(!1)};return t.useEffect(()=>{I(x)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(M,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:K,onFinish:v=>{j(1),r.length=0,I(1,v.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{children:e.jsx(ce,{loading:z,columns:f,dataSource:r,scroll:{y:window.innerHeight-310},pagination:{onChange:(v,i)=>{Y(i),I(v,p,i)},onShowSizeChange:(v,i)=>{Y(i),I(1,p,i)},showSizeChanger:!0,total:N,pageSize:E,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(se,{title:"Edit District Informations",width:"30vw",open:b,onClose:v=>C(v),children:e.jsx(ws,{form:B,district:s,onFinish:y})})]})},Qs=()=>{const{data:a}=qe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Districts"})]}),e.jsx(Gs,{height:80})]})})},Js=a=>{const[s]=n.useForm(),[m,r]=t.useState(a.level.isActive),h=async x=>{const{data:j}=await k.custom({url:"",method:"post",meta:{operation:"updateEducationLevel",variables:{id:{value:x.id,type:"Int",required:!0},name:{value:x.name,type:"String",required:!0},isActive:{value:x.isActive,type:"Boolean",required:!0}},fields:["success","message",{educationLevel:["id","name","code","index",{schoolType:["id","name","code"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});j.success?(d.success(j.message),s.resetFields(),a.onFinish(j.educationLevel)):d.error(j.message)};return t.useEffect(()=>{a.form.setFieldsValue({name:a.level.name,isActive:a.level.isActive})},[a.form,a.level]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:x=>{x.isActive=m,x.id=parseInt(a.level.id.toString()),h(x)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(he,{checked:m,onChange:()=>r(!m),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},$s=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(1),[N,A]=t.useState(0),[E,Y]=t.useState(20),[p,_]=t.useState(""),[R,T]=t.useState(!1),[z,U]=t.useState(!0);ne();const[K]=n.useForm(),[B]=n.useForm();le.useBreakpoint().lg,t.useState(!1);const[D,b]=t.useState(!1),C=v=>{m(v),b(!0)},o=async()=>{const{data:v}=await k.custom({url:"",method:"post",meta:{operation:"synchronizeEducationLevelsIndexes",variables:{},fields:["success","message"]}});v.success?d.success(v.message):d.error(v.message)},y=async v=>{h(r.map(i=>parseInt(i.id.toString())===parseInt(v.id.toString())?v:i)),b(!1)},g=async v=>{const{data:i}=await k.custom({url:"",method:"post",meta:{operation:"deleteEducationLevel",variables:{id:{value:parseInt(v.toString()),type:"Int",required:!0}},fields:["success","message"]}});i.success?(d.success(i.message),h(r.filter(c=>c.id!==v))):d.error(i.message)},l=()=>{d("Canceled")},f=[{title:"Name",dataIndex:"name",fixed:!0,render:(v,i,c)=>e.jsx("span",{children:e.jsx("a",{children:i.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(v,i,c)=>e.jsx("span",{children:e.jsx("a",{children:i.code})})},{title:"Index",dataIndex:"index",fixed:!0,render:(v,i,c)=>e.jsx("span",{children:e.jsx("a",{children:i.index})})},{title:"School Type",dataIndex:"schoolType",fixed:!0,render:(v,i,c)=>{var O;return e.jsx("span",{children:e.jsx("a",{children:(O=i.schoolType)==null?void 0:O.name})})}},{title:"Created",dataIndex:"created",render:(v,i,c)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(i.created)})})})},{title:"Status",dataIndex:"isActive",render:(v,i,c)=>e.jsx("a",{children:i!=null&&i.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,i,c)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>g(i==null?void 0:i.id),onCancel:()=>l,okText:"Yes",cancelText:"No",disabled:!(i!=null&&i.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(i!=null&&i.canDelete),danger:!0})}),e.jsx(je,{title:"Edit "+(i==null?void 0:i.name)+" Ownership",color:"green",children:e.jsx(F,{icon:e.jsx(ve,{}),disabled:!(i!=null&&i.canEdit),onClick:()=>C(i),danger:!0})})]})}],I=async(v,i="",c=20)=>{const{data:O}=await k.custom({url:"",method:"get",meta:{operation:"educationLevels",variables:{page:{value:v,type:"Int",required:!0},key:{value:i,type:"String",required:!1},pageSize:{value:c,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","index",{schoolType:["id","name","code"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});j(O.page),A(O.total),T(O.hasNext),h(O.results),U(!1)};return t.useEffect(()=>{I(x,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:8,children:e.jsx(n,{layout:"vertical",form:K,onFinish:v=>{j(1),r.length=0,_(v.key),I(1,v.key,E)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(je,{title:"Auto Correct All Education Levels Indexes over all Schools",color:"green",placement:"left",children:e.jsx(X,{title:"Synchronizing All Indexes of Education Levels over all Schools",placement:"left",onConfirm:o,onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(Ce,{}),size:"large",children:"Sync Indexes"})})})})]}),e.jsx("div",{children:e.jsx(ce,{loading:z,columns:f,dataSource:r,scroll:{x:!0},pagination:{onChange:(v,i)=>{Y(i),I(v,p,i)},total:N,pageSize:E,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Edit "+(s==null?void 0:s.name)+" Information",width:"20%",open:D,onClose:v=>b(v),children:e.jsx(Js,{form:B,level:s,onFinish:y})})]})},Zs=()=>{const{data:a}=qe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"School Education Levels"})]}),e.jsx($s,{height:80})]})})},Xs=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Programmes(High Level Education)"})]}),e.jsx(ps,{height:80,control:!0})]})}),ea=a=>{const[s,m]=t.useState(a.region.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.region.name,isActive:a.region.isActive})},[a.form,a.region]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.region.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(he,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},ta=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(1),[N,A]=t.useState(0),[E,Y]=t.useState(20),[p,_]=t.useState(""),[R,T]=t.useState(!1),[z,U]=t.useState(!0);ne();const[K]=n.useForm(),[B]=n.useForm(),D=!le.useBreakpoint().lg,[b,C]=t.useState(!1),o=i=>{m(i),C(!0)},y=async i=>{const{data:c}=await k.custom({url:"",method:"post",meta:{operation:"updateRegion",variables:{id:{value:i.id,type:"Int",required:!0},name:{value:i.name,type:"String",required:!0},isActive:{value:i.isActive,type:"Boolean",required:!0}},fields:["success","message",{region:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});c.success?(d.success(c.message),B.resetFields(),C(!1),h(r.map(O=>O.id===c.region.id?c.region:O))):d.error(c.message)},g=async()=>{const{data:i}=await k.custom({url:"",method:"post",meta:{operation:"syncMtaa",variables:{},fields:["success","message"]}});i.success?d.success(i.message):d.error(i.message)},l=async i=>{const{data:c}=await k.custom({url:"",method:"post",meta:{operation:"deleteRegion",variables:{id:{value:i,type:"Int",required:!0}},fields:["success","message"]}});c.success?(d.success(c.message),h(r.filter(O=>O.id!==i))):d.error(c.message)},f=()=>{d("Canceled")},I=[{title:"Name",dataIndex:"name",fixed:!0,render:(i,c,O)=>e.jsx("span",{children:e.jsx("a",{children:c.name})})},{title:"Created",dataIndex:"created",render:(i,c,O)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(c.created)})})})},{title:"Status",dataIndex:"isActive",render:(i,c,O)=>e.jsx("a",{children:c!=null&&c.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(i,c,O)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this member?",onConfirm:()=>l(c==null?void 0:c.id),onCancel:()=>f,okText:"Yes",cancelText:"No",disabled:!(c!=null&&c.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(c!=null&&c.canDelete)})}),e.jsx(F,{disabled:!(c!=null&&c.canEdit),onClick:()=>o(c),icon:e.jsx(ve,{})})]})}],v=async(i,c="",O=20)=>{const{data:S}=await k.custom({url:"",method:"get",meta:{operation:"regions",variables:{page:{value:i,type:"Int",required:!0},key:{value:c,type:"String",required:!1},pageSize:{value:O,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});j(S.page),A(S.total),T(S.hasNext),h(S.results),U(!1)};return t.useEffect(()=>{v(x,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:K,onFinish:i=>{j(1),r.length=0,v(1,i.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:D?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>g(),children:"Sync Mtaa"})})]}),e.jsx("div",{children:e.jsx(ce,{loading:z,columns:I,dataSource:r,scroll:{y:window.innerHeight-310},pagination:{onChange:(i,c)=>{Y(c),v(i,p,c)},onShowSizeChange:(i,c)=>{Y(c),v(i,p,c)},total:N,pageSize:E,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Edit Region Informations",width:"30vw",open:b,onClose:i=>C(i),children:e.jsx(ea,{form:B,region:s,onFinish:y})})]})},sa=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Regions"})]}),e.jsx(ta,{height:80})]})}),{Option:Ue}=Se,{TextArea:aa}=L,na=a=>{var S,u,W,G,J,Z,q,P,ae,fe,Ge,Qe,Re,Le,Je,$e,w,Q,xe,pe,Ee,_e;const[s,m]=t.useState([]),[r,h]=t.useState([]),[x,j]=t.useState([]),[N,A]=t.useState([]),[E,Y]=t.useState([]),[p,_]=t.useState(0),[R,T]=t.useState(0),[z,U]=t.useState(),[K,B]=t.useState(!1),[V,D]=t.useState(!1),[b,C]=t.useState(!1),[o,y]=t.useState([]),g=async($=1,de="")=>{const{data:De}=await k.custom({url:"",method:"get",meta:{operation:"ownerships",variables:{page:{value:$,type:"Int",required:!0},key:{value:de,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(De.results)},l=async($,de="")=>{C(!0);const{data:De}=await k.custom({url:"",method:"get",meta:{operation:"wards",variables:{key:{value:de,type:"String",required:!1},district:{value:$,type:"Int",requiqred:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});j(De.results),C(!1)},f=async($,de="")=>{D(!0);const{data:De}=await k.custom({url:"",method:"get",meta:{operation:"districts",variables:{key:{value:de,type:"String",required:!1},region:{value:$,type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});A(De.results),D(!1)},I=async($="")=>{const{data:de}=await k.custom({url:"",method:"get",meta:{operation:"regions",variables:{key:{value:$,type:"String",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});Y(de.results),a.form.setFieldsValue({district:void 0,ward:void 0})},v=async $=>{_($),f($)},i=async $=>{T($),l($)},c=async($="")=>{const{data:de}=await k.custom({url:"",method:"get",meta:{operation:"schoolsTypes",variables:{key:{value:$,type:"String",required:!1},excludeAssigned:{value:!0,type:"Boolean",required:!1},schoolId:{value:parseInt(a.school.id),type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});m(de.results)},O=$=>{y($)};return t.useEffect(()=>{var $,de,De,ct,dt,ot,ut,mt,ht,xt,pt,gt,jt,yt,ft,St,vt,Ct,bt,It,At,kt,Ft,Nt,Tt,qt,Pt,Mt,Et,Dt;c(),g(),I(),I((ct=(De=(de=($=a.school)==null?void 0:$.ward)==null?void 0:de.district)==null?void 0:De.region)==null?void 0:ct.name),v(parseInt((ut=(ot=(dt=a.school)==null?void 0:dt.ward)==null?void 0:ot.district)==null?void 0:ut.region.id)),D(!1),i(parseInt((ht=(mt=a.school)==null?void 0:mt.ward)==null?void 0:ht.district.id)),C(!1),a.form.setFieldsValue({name:(xt=a.school)==null?void 0:xt.name,serial_number:(pt=a.school)==null?void 0:pt.serialNumber,ownership_id:(jt=(gt=a.school)==null?void 0:gt.ownership)==null?void 0:jt.id,school_type_id:(ft=(yt=a.school)==null?void 0:yt.schoolType)==null?void 0:ft.id,region_id:(bt=(Ct=(vt=(St=a.school)==null?void 0:St.ward)==null?void 0:vt.district)==null?void 0:Ct.region)==null?void 0:bt.id,district_id:(kt=(At=(It=a.school)==null?void 0:It.ward)==null?void 0:At.district)==null?void 0:kt.id,ward_id:(Nt=(Ft=a.school)==null?void 0:Ft.ward)==null?void 0:Nt.id,longitude:(Tt=a.school)==null?void 0:Tt.longitude,latitude:(qt=a.school)==null?void 0:qt.latitude,bio:(Pt=a.school)==null?void 0:Pt.bio,logo:(Mt=a.school)==null?void 0:Mt.logo,is_universal:(Et=a.school)==null?void 0:Et.isUniversal,njiwa_account:(Dt=a.school)==null?void 0:Dt.hasNjiwaAccount})},[a.randKey]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:$=>{$.schoolTypes=o,$.id=a.school.id,$.is_active=a.school.isActive,a.onFinish($)},requiredMark:!1,initialValues:{name:(S=a.school)==null?void 0:S.name,serial_number:(u=a.school)==null?void 0:u.serialNumber,ownership_id:(G=(W=a.school)==null?void 0:W.ownership)==null?void 0:G.id,school_type_id:(Z=(J=a.school)==null?void 0:J.schoolType)==null?void 0:Z.id,region_id:(fe=(ae=(P=(q=a.school)==null?void 0:q.ward)==null?void 0:P.district)==null?void 0:ae.region)==null?void 0:fe.id,district_id:(Re=(Qe=(Ge=a.school)==null?void 0:Ge.ward)==null?void 0:Qe.district)==null?void 0:Re.id,ward_id:(Je=(Le=a.school)==null?void 0:Le.ward)==null?void 0:Je.id,longitude:($e=a.school)==null?void 0:$e.longitude,latitude:(w=a.school)==null?void 0:w.latitude,bio:(Q=a.school)==null?void 0:Q.bio,logo:(xe=a.school)==null?void 0:xe.logo,is_universal:(pe=a.school)==null?void 0:pe.isUniversal,njiwa_account:(Ee=a.school)==null?void 0:Ee.hasNjiwaAccount},children:[e.jsxs(ee,{children:[e.jsxs(M,{span:11,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"serial_number",label:"Serial Number",rules:[{required:!0,type:"string",message:"Please input Serial Number ..."}],children:e.jsx(L,{size:"large",placeholder:"Enter Serial Number ..."})}),e.jsx(n.Item,{label:"School Type",rules:[{required:!0,type:"string",message:"Please choose School Type"}],children:e.jsx(Se,{mode:"multiple",showSearch:!0,size:"large",placeholder:"Select a School Type",optionFilterProp:"children",onChange:O,onSearch:$=>{},filterOption:($,de)=>de.children.toLowerCase().includes($.toLowerCase()),dropdownStyle:{zIndex:9999},children:s.map(($,de)=>e.jsx(Ue,{value:$.id,children:$.name}))})}),e.jsx(n.Item,{name:"ownership_id",label:"School Ownership",rules:[{required:!0,type:"string",message:"Please choose Ownership"}],children:e.jsx(Se,{showSearch:!0,size:"large",placeholder:"Select a Ownership",optionFilterProp:"children",onChange:$=>{},onSearch:$=>{},filterOption:($,de)=>de.children.toLowerCase().includes($.toLowerCase()),dropdownStyle:{zIndex:9999},children:r.map(($,de)=>e.jsx(Ue,{value:$.id,children:$.name}))})}),e.jsx(n.Item,{name:"bio",label:"Biography",style:{marginBottom:"12px"},children:e.jsx(aa,{rows:4})}),e.jsx(n.Item,{name:"logo",label:"Logo",style:{marginBottom:"12px"},children:e.jsx(Oe,{beforeUpload:()=>!1,maxCount:1,onChange:$=>{const de=$.file;z?z.uid!==de.uid&&(U(de),B(!0)):(U(de),B(!0))},onRemove:()=>{U(void 0),B(!1)},accept:"image/*",children:e.jsx(F,{icon:e.jsx(we,{}),size:"large",children:"Click to Select"})})})]}),e.jsxs(M,{span:11,offset:2,children:[e.jsx(n.Item,{name:"region_id",label:"Region",rules:[{required:!0,type:"string",message:"Please Choose Region ..."}],children:e.jsx(Se,{showSearch:!0,size:"large",placeholder:"Select a region",optionFilterProp:"children",onChange:$=>{v(parseInt($)),a.form.resetFields(["district_id","ward_id"]),a.form.setFieldsValue({district_id:void 0,ward_id:void 0}),A([]),j([])},onSearch:$=>{$.length>2&&I($)},filterOption:($,de)=>de.children.toLowerCase().includes($.toLowerCase()),dropdownStyle:{zIndex:9999},children:E.map(($,de)=>e.jsx(Ue,{value:$.id,children:$.name}))})}),e.jsx(n.Item,{name:"district_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"District"}),e.jsx(Pe,{spinning:V})]}),rules:[{required:!0,type:"string",message:"Please Choose District ..."}],children:e.jsx(Se,{showSearch:!0,size:"large",disabled:V||N.length===0,placeholder:"Select a district",optionFilterProp:"children",onChange:$=>{i(parseInt($)),a.form.setFieldsValue({ward:void 0}),j([])},onSearch:$=>{$.length>2&&p!==0&&f(p,$)},filterOption:($,de)=>de.children.toLowerCase().includes($.toLowerCase()),dropdownStyle:{zIndex:9999},children:N.map(($,de)=>e.jsx(Ue,{value:$.id,children:$.name}))})}),e.jsx(n.Item,{name:"ward_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Ward"}),e.jsx(Pe,{spinning:b})]}),children:e.jsx(Se,{showSearch:!0,size:"large",disabled:b||x.length===0,placeholder:"Select a ward",optionFilterProp:"children",onChange:$=>{},onSearch:$=>{$.length>2&&l(R,$)},filterOption:($,de)=>de.children.toLowerCase().includes($.toLowerCase()),dropdownStyle:{zIndex:9999},children:x.map(($,de)=>e.jsx(Ue,{value:$.id,children:$.name}))})}),e.jsx(n.Item,{name:"website",label:"Website",rules:[{required:!1,type:"url",message:"Please input Website Address ..."}],children:e.jsx(L,{size:"large",placeholder:"Enter Website Address ..."})}),e.jsx(n.Item,{name:"latitude",label:"Latitude",rules:[{required:!1,type:"string",message:"Please input Latitude ..."}],children:e.jsx(L,{size:"large",placeholder:"Enter Latitude..."})}),e.jsx(n.Item,{name:"longitude",label:"Longitude",rules:[{required:!1,type:"string",message:"Please input Longitude ..."}],children:e.jsx(L,{size:"large",placeholder:"Enter Longitude..."})}),e.jsx(n.Item,{name:"is_universal",valuePropName:"checked",children:e.jsx(he,{children:"Universal"})}),e.jsx(n.Item,{name:"njiwa_account",valuePropName:"checked",children:e.jsx(he,{disabled:(_e=a.school)==null?void 0:_e.hasNjiwaAccount,children:"Auto Create Njiwa Account"})})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},ia=a=>{const[s,m]=t.useState([]),[r,h]=t.useState(!0),[x,j]=t.useState(1);t.useState(25);const[N]=n.useForm(),[A,E]=t.useState(0),[Y,p]=t.useState(0),[_,R]=t.useState(!0);ne(),t.useState(!1),t.useState(!1),t.useState();const T=async U=>{const{data:K}=await k.custom({url:"",method:"post",meta:{operation:"addSchoolAdminstrator",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0},userId:{value:parseInt(U.toString()),type:"Int",required:!0}},fields:["success","message",{member:["id",{school:["id","name"]},{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}});K.success?(d.success(K.message),m(s.filter(B=>B.id.toString()!==U.toString())),a.onAdd(K.member)):d.error(K.message),et.destroyAll()},z=async(U,K="",B=!1)=>{const{data:V}=await k.custom({url:"",method:"get",meta:{operation:"notSchoolAdminstrators",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0},page:{value:U,type:"Int",required:!0},key:{value:K,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","firstName","middleName","lastName","fullName","email","pic","created","updated","isActive","canEdit","canDelete","canManage"]}]}});p(V.total),E(V.pages),j(V.page),R(V.hasNext),m([...s,...V.results]),h(!1)};return t.useEffect(()=>{s.length=0,m([]),z(1)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsx(M,{span:24,children:e.jsx(n,{layout:"vertical",form:N,onFinish:U=>{s.length=0,m([]),z(1,U.key,!0)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search Adminstrator(s)...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(Pe,{spinning:r,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(Fe,{itemLayout:"horizontal",dataSource:s,renderItem:U=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Fe.Item,{style:{margin:0,padding:0},actions:[e.jsx(X,{placement:"topLeft",title:"Adding "+U.fullName+" to "+a.school.name+"?",onConfirm:()=>T(U.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(Ut,{})})})],children:e.jsx(Fe.Item.Meta,{avatar:e.jsx(Ve,{src:U.pic}),title:e.jsx("a",{children:U.fullName}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:U.email})})})},"file-"+U.id)})})}),_&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(F,{type:"primary",onClick:()=>{z(x+1)},children:"Load More"})})]})]})},{Option:ra}=Se,la=["female","male","others"],ca=a=>{const[s,m]=t.useState(!1),[r,h]=t.useState(!1),[x,j]=t.useState(!1),[N,A]=t.useState(!1),[E,Y]=t.useState(),[p]=n.useForm(),_=async R=>{A(!0);const{data:T}=await k.custom({url:"",method:"post",meta:{operation:"createSchoolAdminstratorPlain",variables:{schoolId:{value:parseInt(R.school_id),type:"Int",required:!0},firstName:{value:R.first_name,type:"String",required:!0},middleName:{value:R.middle_name,type:"String",required:!0},lastName:{value:R.last_name,type:"String",required:!0},phoneNumber:{value:R.phone_number,type:"String",required:!0},email:{value:R.email,type:"String",required:!1},gender:{value:R.gender,type:"String",required:!1}},fields:["success","message","memberExists","existSameSchool","existSameSchoolNotAuthenticated",{member:["id",{school:["id","name"]},{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}}).catch(z=>(d.error("Error in Creating School Adminstrator"),{data:null})).then(z=>z);T&&(T.success?(d.success(T.message),a.onFinish(T.member)):(d.error(T.message),Y(T.message),m(T.memberExists),h(T.existSameSchool),j(T.existSameSchoolNotAuthenticated))),A(!1)};return t.useEffect(()=>{},[a.randKey]),e.jsxs(e.Fragment,{children:[E&&e.jsx(Kt,{description:e.jsx(e.Fragment,{children:E}),type:"error",closable:!0}),e.jsxs(n,{layout:"vertical",form:p,onFinish:R=>{R.school_id=a.school.id,_(R)},requiredMark:!0,autoComplete:"off",initialValues:{remember:!1,email:"",password:""},children:[e.jsx(n.Item,{name:"first_name",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter First Name ..."})}),e.jsx(n.Item,{name:"middle_name",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(n.Item,{name:"last_name",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(n.Item,{label:"Gender",name:"gender",rules:[{required:!0,type:"string",message:"Please choose Gender..."}],children:e.jsx(Se,{size:"large",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onSearch:R=>{},filterOption:(R,T)=>T.children.toLowerCase().includes(R.toLowerCase()),dropdownStyle:{zIndex:9999},children:la.map((R,T)=>e.jsx(ra,{value:R,children:R.charAt(0).toUpperCase()+R.slice(1)}))})}),e.jsx(n.Item,{name:"phone_number",label:"Mobile Phone Number",rules:[{required:!0,type:"string",message:"Please input Mobile Phone Number"}],children:e.jsx(L,{size:"large",placeholder:"Enter Mobile Phone Number ..."})}),e.jsx(n.Item,{name:"email",label:"Email Address",rules:[{required:!0,type:"string",message:"Please input Email Address ..."}],children:e.jsx(L,{size:"large",placeholder:"Enter First Name ..."})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(F,{type:"primary",size:"large",color:"red",onClick:()=>{p.resetFields()},danger:!0,children:"Clear"}),e.jsx(F,{size:"large",htmlType:"submit",disabled:N,loading:N,danger:!0,children:"Save"})]})]})]})},da=a=>{const[s,m]=t.useState([]),[r,h]=t.useState(!0),[x,j]=t.useState(1),[N,A]=t.useState(25),[E,Y]=t.useState(""),[p]=n.useForm(),[_,R]=t.useState(0),[T,z]=t.useState(0),[U,K]=t.useState(!0);ne();const[B,V]=t.useState(!1),[D,b]=t.useState(!1),C=()=>{V(!0)},o=I=>{m([I,...s])},y=async I=>{const{data:v}=await k.custom({url:"",method:"post",meta:{operation:"removeSchoolAdminstrator",variables:{id:{value:I,type:"Int",required:!0}},fields:["success","message"]}});v.success?(d.success(v.message),m(s.filter(i=>i.id.toString()!==I.toString()))):d.error(v.message),et.destroyAll()},g=async I=>{const{data:v}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchoolMember",variables:{id:{value:I,type:"Int",required:!0}},fields:["success","message"]}});v.success?(d.success(v.message),m(s.filter(i=>i.id.toString()!==I.toString()))):d.error(v.message),et.destroyAll()},l=async(I,v="",i=20)=>{const{data:c}=await k.custom({url:"",method:"get",meta:{operation:"schoolMembers",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0},adminstrator:{value:!0,type:"Boolean",required:!0},page:{value:I,type:"Int",required:!0},key:{value:v,type:"String",required:!1},pageSize:{value:i,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{school:["id","name"]},{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}});z(c.total),R(c.pages),j(c.page),K(c.hasNext),m([...s,...c.results]),h(!1)},f=I=>{m([I,...s]),b(!1)};return t.useEffect(()=>{s.length=0,m([]),l(1,"",20)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(M,{span:16,children:e.jsx(n,{layout:"vertical",form:p,onFinish:I=>{Y(I.key),l(0,I.key,N)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search Adminstrator(s)...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(M,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(F,{size:"large",icon:e.jsx(ye,{}),onClick:C,children:"Enroll"}),e.jsx(F,{size:"large",icon:e.jsx(ye,{}),onClick:()=>b(!0),children:"Register New"})]})]}),e.jsxs(Pe,{spinning:r,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"65vh",overflowY:"auto"},children:e.jsx(Fe,{itemLayout:"horizontal",dataSource:s,renderItem:I=>{var v,i,c;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Fe.Item,{style:{margin:0,padding:0},actions:[e.jsx(rt,{trigger:["click"],placement:"bottomRight",overlay:e.jsxs(Ne,{children:[e.jsx(Ne.Item,{disabled:!I.canDelete,icon:e.jsx(oe,{}),children:e.jsx(X,{placement:"topRight",title:"Are you sure you want to delete this adminstrator?",onConfirm:()=>g(parseInt(I.id.toString())),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(Ne.Item,{icon:e.jsx(Vt,{}),children:e.jsx(X,{placement:"topRight",title:"Are you sure you want to Remove Adminstrator Role?",onConfirm:()=>y(parseInt(I.id.toString())),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove Adminstrator Role"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:O=>O.preventDefault(),children:e.jsx(lt,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(Fe.Item.Meta,{avatar:e.jsx(Ve,{src:(v=I.user)==null?void 0:v.pic}),title:e.jsx("a",{children:(i=I.user)==null?void 0:i.fullName}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:(c=I.user)==null?void 0:c.email})})})},"file-"+I.id)})}})}),U&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(F,{type:"primary",onClick:()=>{l(x+1,E)},children:"Load More"})})]}),e.jsx(He,{title:"Adding School Adminstrators",width:"30vw",onClose:I=>V(I),open:B,anchor:"right",children:e.jsx(ia,{randKey:Math.random(),school:a.school,onAdd:o})}),e.jsx(He,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Registering School Adminstrators"}),e.jsx(ie,{color:"green",style:{marginLeft:10},children:a.school.name})]}),width:"40vw",onClose:I=>b(I),open:D,children:e.jsx(ca,{school:a.school,randKey:Math.random(),onFinish:f})})]})},{Option:Ke}=Se,{TextArea:oa}=L,ua=a=>{const[s,m]=t.useState([]),[r,h]=t.useState([]),[x,j]=t.useState([]),[N,A]=t.useState([]),[E,Y]=t.useState([]),[p,_]=t.useState(0),[R,T]=t.useState(0),[z,U]=t.useState(),[K,B]=t.useState(!1),[V,D]=t.useState(!1),[b,C]=t.useState(!1),[o,y]=t.useState([]),g=async(S=1,u="")=>{const{data:W}=await k.custom({url:"",method:"get",meta:{operation:"ownerships",variables:{page:{value:S,type:"Int",required:!0},key:{value:u,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(W.results)},l=async(S,u="")=>{C(!0);const{data:W}=await k.custom({url:"",method:"get",meta:{operation:"wards",variables:{key:{value:u,type:"String",required:!1},district:{value:S,type:"Int",requiqred:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});j(W.results),C(!1)},f=async(S,u="")=>{D(!0);const{data:W}=await k.custom({url:"",method:"get",meta:{operation:"districts",variables:{key:{value:u,type:"String",required:!1},region:{value:S,type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});A(W.results),D(!1)},I=async(S="")=>{const{data:u}=await k.custom({url:"",method:"get",meta:{operation:"regions",variables:{key:{value:S,type:"String",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});Y(u.results),a.form.setFieldsValue({district:void 0,ward:void 0})},v=async(S="")=>{const{data:u}=await k.custom({url:"",method:"get",meta:{operation:"schoolsTypes",variables:{key:{value:S,type:"String",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});m(u.results)},i=async S=>{_(S),f(S)},c=async S=>{T(S),l(S)},O=S=>{y(S)};return t.useEffect(()=>{v(),g(),I()},[]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:S=>{S.schoolTypes=o,a.onFinish(S)},requiredMark:!0,children:[e.jsxs(ee,{children:[e.jsxs(M,{span:11,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"serial_number",label:"Serial Number",rules:[{required:!0,type:"string",message:"Please input Serial Number ..."}],children:e.jsx(L,{size:"large",placeholder:"Enter Serial Number ..."})}),e.jsx(n.Item,{label:"School Type",name:"schoolTypes",rules:[{required:!0,type:"array",message:"Please choose School Type"}],children:e.jsx(Se,{size:"large",mode:"multiple",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onChange:O,onSearch:S=>{},filterOption:(S,u)=>u.children.toLowerCase().includes(S.toLowerCase()),dropdownStyle:{zIndex:9999},children:s.map((S,u)=>e.jsx(Ke,{value:S.id,children:S.name}))})}),e.jsx(n.Item,{name:"ownership_id",label:"School Ownership",rules:[{required:!0,type:"string",message:"Please choose Ownership"}],children:e.jsx(Se,{size:"large",showSearch:!0,placeholder:"Select a Ownership",optionFilterProp:"children",onChange:S=>{},onSearch:S=>{},filterOption:(S,u)=>u.children.toLowerCase().includes(S.toLowerCase()),dropdownStyle:{zIndex:9999},children:r.map((S,u)=>e.jsx(Ke,{value:S.id,children:S.name}))})}),e.jsx(n.Item,{name:"bio",label:"Biography",style:{marginBottom:"12px"},children:e.jsx(oa,{rows:4})}),e.jsx(n.Item,{name:"logo",label:"Logo",style:{marginBottom:"12px"},children:e.jsx(Oe,{beforeUpload:()=>!1,maxCount:1,onChange:S=>{const u=S.file;z?z.uid!==u.uid&&(U(u),B(!0)):(U(u),B(!0))},onRemove:()=>{U(void 0),B(!1)},accept:"image/*",children:e.jsx(F,{icon:e.jsx(we,{}),children:"Click to Select"})})})]}),e.jsxs(M,{span:11,offset:2,children:[e.jsx(n.Item,{name:"region_id",label:"Region",rules:[{required:!0,type:"string",message:"Please Choose Region ..."}],children:e.jsx(Se,{size:"large",showSearch:!0,placeholder:"Select a region",optionFilterProp:"children",onChange:S=>{i(parseInt(S)),a.form.setFieldsValue({district:void 0,ward:void 0}),A([]),j([])},onSearch:S=>{S.length>2&&I(S)},filterOption:(S,u)=>u.children.toLowerCase().includes(S.toLowerCase()),dropdownStyle:{zIndex:9999},children:E.map((S,u)=>e.jsx(Ke,{value:S.id,children:S.name}))})}),e.jsx(n.Item,{name:"district_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"District"}),e.jsx(Pe,{spinning:V})]}),rules:[{required:!0,type:"string",message:"Please Choose District ..."}],children:e.jsx(Se,{size:"large",showSearch:!0,disabled:V||N.length===0,placeholder:"Select a district",optionFilterProp:"children",onChange:S=>{c(parseInt(S)),a.form.setFieldsValue({ward:void 0}),j([])},onSearch:S=>{S.length>2&&p!==0&&f(p,S)},filterOption:(S,u)=>u.children.toLowerCase().includes(S.toLowerCase()),dropdownStyle:{zIndex:9999},children:N.map((S,u)=>e.jsx(Ke,{value:S.id,children:S.name}))})}),e.jsx(n.Item,{name:"ward_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Ward"}),e.jsx(Pe,{spinning:b})]}),children:e.jsx(Se,{size:"large",showSearch:!0,disabled:b||x.length===0,placeholder:"Select a ward",optionFilterProp:"children",onChange:S=>{},onSearch:S=>{S.length>2&&l(R,S)},filterOption:(S,u)=>u.children.toLowerCase().includes(S.toLowerCase()),dropdownStyle:{zIndex:9999},children:x.map((S,u)=>e.jsx(Ke,{value:S.id,children:S.name}))})}),e.jsx(n.Item,{name:"website",label:"Website",rules:[{required:!1,type:"url",message:"Please input Website Address ..."}],children:e.jsx(L,{size:"large",placeholder:"Enter Website Address ..."})}),e.jsx(n.Item,{name:"latitude",label:"Latitude",rules:[{required:!1,type:"string",message:"Please input Latitude ..."}],children:e.jsx(L,{size:"large",placeholder:"Enter Latitude..."})}),e.jsx(n.Item,{name:"longitude",label:"Longitude",rules:[{required:!1,type:"string",message:"Please input Longitude ..."}],children:e.jsx(L,{size:"large",placeholder:"Enter Longitude..."})}),e.jsx(n.Item,{name:"is_universal",valuePropName:"checked",children:e.jsx(he,{children:"Universal"})}),e.jsx(n.Item,{name:"njiwa_account",valuePropName:"checked",children:e.jsx(he,{children:"Auto Create Njiwa Account"})})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},ma=a=>{const[s]=n.useForm(),[m,r]=t.useState(),[h,x]=t.useState(!1),j=async N=>{const{data:A}=await k.custom({url:"",method:"post",meta:{operation:"createSchoolContract",variables:{contractNumber:{value:N.contract_number,type:"String",required:!0},contractValue:{value:N.contract_value,type:"Float",required:!0},startDate:{value:N.start_date,type:"String",required:!0},endDate:{value:N.end_date,type:"String",required:!0},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0},contractDocument:{value:m,type:"Upload",required:!0}},fields:["success","message"]}});A.success?(d.success(A.message),a.onFinish(),s.resetFields()):d.error(A.message)};return t.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:s,onFinish:N=>{j(N)},requiredMark:!0,children:[e.jsx(n.Item,{name:"contract_number",label:"Contract Number",rules:[{required:!0,type:"string",message:"Please input Contract Number ..."}],children:e.jsx(L,{size:"large",placeholder:"Enter Contract Number ..."})}),e.jsx(n.Item,{name:"contract_value",label:"Contract Value",rules:[{required:!0,type:"number",message:"Please input Contract Value ..."}],children:e.jsx(Be,{min:0,defaultValue:0,onChange:()=>{},size:"large",style:{width:"100%"}})}),e.jsx(n.Item,{name:"start_date",label:"Contract Start Date",rules:[{required:!0,type:"object",message:"Please input Contract Start Date ..."}],children:e.jsx(Xe,{onChange:()=>{},popupStyle:{zIndex:9999}})}),e.jsx(n.Item,{name:"end_date",label:"Contract End Date",rules:[{required:!0,type:"object",message:"Please input Contract End Date ..."}],children:e.jsx(Xe,{onChange:()=>{},popupStyle:{zIndex:9999}})}),e.jsx(n.Item,{name:"contract_document",label:"Contract Document",style:{marginBottom:"12px"},rules:[{required:!h,type:"object",message:"Please Pick a Contract Document ..."}],children:e.jsx(Oe,{beforeUpload:()=>!1,maxCount:1,onChange:N=>{const A=N.file;m?m.uid!==A.uid&&(r(A),x(!0)):(r(A),x(!0))},onRemove:()=>{r(void 0),x(!1)},accept:".pdf",children:e.jsx(F,{icon:e.jsx(we,{}),children:"Click to Select"})})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20},children:[e.jsx(F,{size:"large",icon:e.jsx(Ye,{}),onClick:()=>{r(void 0),x(!1),s.resetFields()},danger:!0,children:"Reset"}),e.jsx(F,{size:"large",htmlType:"submit",icon:e.jsx(Ye,{}),danger:!0,children:"Save"})]})]})})},ha=a=>{const[s]=n.useForm(),[m,r]=t.useState([]),[h,x]=t.useState(),[j,N]=t.useState(!1),[A,E]=t.useState(1),[Y,p]=t.useState(0),[_,R]=t.useState(!1);t.useState(!1);const[T,z]=t.useState(""),[U,K]=t.useState(!1),B=[{title:"Contract Number",dataIndex:"contractNumber",key:"contractNumber",render:(b,C)=>e.jsxs(e.Fragment,{children:[e.jsx("a",{children:b}),C.contractDocument&&e.jsx(je,{title:"Click to Download Contract Document",children:e.jsx(F,{size:"small",style:{marginLeft:5},danger:!0,onClick:()=>{window.open(C.contractDocument)},children:e.jsx(ss,{})})})]})},{title:"Start Date",dataIndex:"startDate",key:"startDate",render:b=>e.jsx(e.Fragment,{children:Te(b).format("lll")})},{title:"End Date",dataIndex:"endDate",key:"endDate",render:b=>e.jsx(e.Fragment,{children:Te(b).format("lll")})},{title:"Contract Value",dataIndex:"contractValue",key:"contractValue"},{title:"Created",dataIndex:"created",key:"created",render:b=>e.jsx(e.Fragment,{children:Te(b).format("lll")})},{title:"Created",dataIndex:"created",key:"created",render:b=>e.jsx(e.Fragment,{children:Te(b).format("lll")})},{title:"",dataIndex:"actions",key:"actions",render:(b,C)=>e.jsxs(e.Fragment,{children:[e.jsx(F,{size:"small",onClick:()=>{x(C)},danger:!0,icon:e.jsx(ve,{})}),e.jsx(X,{title:"Delete the contract?",placement:"topRight",onConfirm:()=>D(C.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(F,{size:"small",danger:!0,icon:e.jsx(oe,{})})})]})}],V=async(b,C="",o=20)=>{const{data:y}=await k.custom({url:"",method:"get",meta:{operation:"schoolContracts",variables:{page:{value:b,type:"Int",required:!0},pageSize:{value:o,type:"Int",required:!0},key:{value:C,type:"String",required:!1},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","contractNumber","contractValue","contractDocument","startDate","endDate","created","updated","isActive","canEdit","canDelete","canManage"]}]}});E(y.page),p(y.total),R(y.hasNext),r(y.results),N(!1)},D=async b=>{const{data:C}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchoolContract",variables:{id:{value:b,type:"Int",required:!0}},fields:["success","message"]}});C.success?(d.success(C.message),V(A,T)):d.error(C.message)};return t.useEffect(()=>{V(A,T)},[a.randKey,a.school]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:10,children:e.jsx(n,{layout:"vertical",form:s,onFinish:b=>{},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:14,style:{textAlign:"right"},children:e.jsx(F,{icon:e.jsx(ye,{}),size:"large",onClick:()=>{K(!0)},danger:!0,children:"Add Contract"})})]}),e.jsx(ce,{dataSource:m,columns:B}),e.jsx(He,{title:"Adding New Contract",anchor:"right",width:"35vw",onClose:b=>K(b),open:U,children:e.jsx(ma,{school:a.school,onFinish:()=>{K(!1),V(1,"")}})})]})},xa=a=>{const[s]=n.useForm(),m=async r=>{const{data:h}=await k.custom({url:"",method:"post",meta:{operation:"createSchoolNjiwaAccountBilling",variables:{amount:{value:r.amount,type:"Float",required:!1},units:{value:0,type:"Int",required:!1},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0}},fields:["success","message",{bill:["id",{account:["id"]},"billNumber","amount","units","source",{creator:["id","fullName","firstName","middleName","lastName","email","phone"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(x=>({data:null})).then(x=>x);h&&(h.success?(d.success(h.message),a.onFinish(h.bill)):d.error(h.message))};return t.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:s,onFinish:r=>{m(r)},requiredMark:!0,children:[e.jsx(n.Item,{name:"amount",label:"Amount",rules:[{required:!0,type:"number",message:"Please input Amount"}],children:e.jsx(Be,{min:1,style:{width:"50%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{size:"large",htmlType:"submit",danger:!0,icon:e.jsx(Ye,{}),children:"Save"})})]})})},pa=a=>{const[s]=n.useForm(),m=async r=>{const{data:h}=await k.custom({url:"",method:"post",meta:{operation:"createSchoolNjiwaAccountBilling",variables:{amount:{value:0,type:"Float",required:!1},units:{value:r.units,type:"Int",required:!1},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0}},fields:["success","message",{bill:["id",{account:["id"]},"billNumber","amount","units","source",{creator:["id","fullName","firstName","middleName","lastName","email","phone"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(x=>({data:null})).then(x=>x);h&&(h.success?(d.success(h.message),a.onFinish(h.bill)):d.error(h.message))};return t.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:s,onFinish:r=>{m(r)},requiredMark:!0,children:[e.jsx(n.Item,{name:"units",label:"Unit",rules:[{required:!0,type:"number",message:"Please input Unit"}],children:e.jsx(Be,{min:1,style:{width:"50%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{size:"large",htmlType:"submit",danger:!0,icon:e.jsx(Ye,{}),children:"Save"})})]})})},{Title:Ot,Text:Rt}=We,ga=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(!1),[N,A]=t.useState(!1),[E,Y]=t.useState(!1),[p,_]=t.useState(!1),[R,T]=t.useState(!1),z=async(o,y="",g=20)=>{const{data:l}=await k.custom({url:"",method:"get",meta:{operation:"schoolNjiwaAccountBillings",variables:{page:{value:o,type:"Int",required:!0},key:{value:y,type:"String",required:!1},pageSize:{value:g,type:"Int",required:!1},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{account:["id"]},"billNumber","amount","units","source","synced",{creator:["id","fullName","firstName","middleName","lastName","email","phone"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(f=>(d.error("Error occured while fetching Bills"),{data:null})).then(f=>f);l&&h([...l.results]),j(!1)},U=async()=>{T(!0);const{data:o}=await k.custom({url:"",method:"post",meta:{operation:"ressetNjiwaAccount",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0}},fields:["success","message"]}}).catch(y=>({data:null})).then(y=>y);o&&(o.success?(d.success(o.message),b(),z(1)):d.error(o.message)),T(!1)},K=async o=>{const{data:y}=await k.custom({url:"",method:"post",meta:{operation:"deleteNjiwaAccountBilling",variables:{billId:{value:parseInt(o.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(g=>({data:null})).then(g=>g);y&&(y.success?(d.success(y.message),b(),z(1)):d.error(y.message))},B=async()=>{_(!0);const{data:o}=await k.custom({url:"",method:"post",meta:{operation:"syncNjiwaAccount",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0}},fields:["success","message"]}}).catch(y=>({data:null})).then(y=>y);o&&(o.success?(d.success(o.message),b()):d.error(o.message)),_(!1)},V=async o=>{h([o,...r]),A(!1),b()},D=async o=>{h([o,...r]),Y(!1),b()},b=async()=>{const{data:o}=await k.custom({url:"",method:"get",meta:{operation:"njiwaAccount",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0}},fields:["id","balance","messageUnits"]}}).catch(y=>({data:null})).then(y=>y);o&&m(o)},C=[{title:"Bill Number",dataIndex:"bill_number",key:"billNumber",render:(o,y,g)=>e.jsxs("span",{children:[e.jsx("span",{style:{marginRight:3},children:y.billNumber}),y.synced&&e.jsx(ie,{color:"green",children:"Synced"}),!y.synced&&e.jsx(ie,{color:"red",children:"Not Synced"})]})},{title:"Amount",dataIndex:"amount",key:"amount",render:(o,y,g)=>e.jsx("span",{children:y.amount})},{title:"Units",dataIndex:"units",key:"units",render:(o,y,g)=>e.jsx("span",{children:y.units})},{title:"Paid",dataIndex:"isPaid",key:"isPaid",render:(o,y,g)=>e.jsx("span",{children:y.isPaid?"Yes":"No"})},{title:"Source",dataIndex:"source",key:"source",render:(o,y,g)=>e.jsx("span",{children:y.source})},{title:"",dataIndex:"actions",key:"actions",render:(o,y,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure delete this bill - > "+y.billNumber+"?",placement:"topRight",onConfirm:()=>K(y.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(F,{danger:!0,icon:e.jsx(oe,{})})}),!y.synced&&e.jsx(F,{danger:!0,icon:e.jsx(Ce,{}),style:{marginLeft:5}})]})}];return t.useEffect(()=>{b(),z(1,"",20)},[a.randKey,a.school]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsxs(M,{span:24,style:{display:"flex",justifyContent:"space-between",marginBottom:5},children:[e.jsx("span",{children:e.jsx(X,{title:"Are you sure you want to reset the account?",onConfirm:()=>U(),onCancel:()=>{},okText:"Reset",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(as,{}),danger:!0,loading:p,children:"Reset"})})}),e.jsxs("span",{children:[e.jsx(F,{icon:e.jsx(ye,{}),danger:!0,onClick:()=>A(!0),children:"Balance"}),e.jsx(F,{icon:e.jsx(ye,{}),danger:!0,onClick:()=>Y(!0),children:"Units"}),e.jsx(F,{icon:e.jsx(Ce,{}),danger:!0,onClick:B,loading:p,children:"Sync"})]})]})}),e.jsxs(ee,{children:[e.jsx(M,{span:8,children:e.jsx(te,{loading:x,active:!0,children:e.jsx(Ae,{hoverable:!0,style:{marginRight:10},onClick:()=>{},children:e.jsxs(ke,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ot,{level:2,children:s==null?void 0:s.balance}),e.jsx(Rt,{children:"Balance"})]})})})}),e.jsx(M,{span:8,children:e.jsx(te,{loading:x,active:!0,children:e.jsx(Ae,{hoverable:!0,style:{marginRight:10},onClick:()=>{},children:e.jsxs(ke,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ot,{level:2,children:s==null?void 0:s.messageUnits}),e.jsx(Rt,{children:"Units"})]})})})})]}),e.jsx(ee,{style:{marginTop:10},children:e.jsxs(M,{span:24,children:[e.jsx(ce,{columns:C,dataSource:r}),","]})}),e.jsx(se,{title:"Add Balance",width:"40vw",open:N,onClose:o=>A(o),children:e.jsx(xa,{school:a.school,onFinish:V})}),e.jsx(se,{title:"Add Units",width:"40vw",open:E,onClose:o=>Y(o),children:e.jsx(pa,{school:a.school,onFinish:D})})]})},ja=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState([]),[N,A]=t.useState([]),[E,Y]=t.useState(1),[p,_]=t.useState(0),[R,T]=t.useState(20),[z,U]=t.useState(""),[K,B]=t.useState(!1),[V,D]=t.useState(!0);ne();const[b,C]=t.useState(!1),[o,y]=t.useState(!1),[g,l]=t.useState(!1),[f]=n.useForm(),[I]=n.useForm(),[v,i]=t.useState(!1),[c,O]=t.useState(!1),[S,u]=t.useState(!1),W=async w=>{m(w),u(!0)},G=w=>{m(w),O(!0)},J=w=>{m(w),i(!0)},Z=w=>{m(w),l(!0)},q=w=>{m(w),y(!0)},P=()=>{C(!0)},ae=async w=>{const{data:Q}=await k.custom({url:"",method:"post",meta:{operation:"createSchool",variables:{name:{value:w.name,type:"String",required:!0},serialNumber:{value:w.serial_number,type:"String",required:!0},ownershipId:{value:parseInt(w.ownership_id),type:"Int",required:!0},schoolTypes:{value:w.schoolTypes,type:"[String]",required:!0},regionId:{value:parseInt(w.region_id),type:"Int",required:!1},districtId:{value:parseInt(w.district_id),type:"Int",required:!1},wardId:{value:parseInt(w.ward_id),type:"Int",required:!1},bio:{value:w.bio,type:"String",required:!1},website:{value:w.website,type:"String",required:!1},longitude:{value:w.longitude,type:"Float",required:!1},latitude:{value:w.latitude,type:"Float",required:!1},isUniversal:{value:w.is_universal,type:"Boolean",required:!1},njiwaAccount:{value:w.njiwa_account,type:"Boolean",required:!1}},fields:["success","message",{school:["id","name","serialNumber","hasNjiwaAccount",{region:["id","name"]},{district:["id","name"]},{ownership:["id","name"]},{schoolType:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},"latitude","longitude","bio","logo","created","updated","isActive","isUniversal","canEdit","canDelete","canManage"]}]}});Q.success?(d.success(Q.message),h([Q.school,...r]),C(!1),f.resetFields()):d.error(Q.message)},fe=async w=>{const{data:Q}=await k.custom({url:"",method:"post",meta:{operation:"updateSchool",variables:{id:{value:parseInt(w.id),type:"Int",required:!0},name:{value:w.name,type:"String",required:!0},serialNumber:{value:w.serial_number,type:"String",required:!0},ownershipId:{value:parseInt(w.ownership_id),type:"Int",required:!0},schoolTypes:{value:w.schoolTypes,type:"[String]",required:!0},regionId:{value:parseInt(w.region_id),type:"Int",required:!1},districtId:{value:parseInt(w.district_id),type:"Int",required:!1},wardId:{value:parseInt(w.ward_id),type:"Int",required:!1},bio:{value:w.bio,type:"String",required:!1},website:{value:w.website,type:"String",required:!1},longitude:{value:w.longitude,type:"Float",required:!1},latitude:{value:w.latitude,type:"Float",required:!1},isActive:{value:w.is_active,type:"Boolean",required:!1},isUniversal:{value:w.is_universal,type:"Boolean",required:!1},njiwaAccount:{value:w.njiwa_account,type:"Boolean",required:!1}},fields:["success","message",{school:["id","name","serialNumber","hasNjiwaAccount",{region:["id","name"]},{district:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{ownership:["id","name"]},{schoolType:["id","name"]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},"latitude","longitude","bio","logo","created","updated","isActive","isUniversal","canEdit","canDelete","canManage"]}]}});Q.success?(d.success(Q.message),h(r.map(xe=>xe.id===w.id?Q.school:xe)),f.resetFields(),y(!1)):d.error(Q.message)},Ge=async w=>{const{data:Q}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchool",variables:{id:{value:w,type:"Int",required:!0}},fields:["success","message"]}});Q.success?(d.success(Q.message),h(r.filter(xe=>parseInt(xe.id.toString())!==parseInt(w.toString())))):d.error(Q.message)},Qe=async(w,Q)=>{const{data:xe}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchoolOperatingType",variables:{schoolOperatingTypeId:{value:parseInt(w.toString()),type:"Int",required:!0}},fields:["success","message",{school:["id","name","serialNumber",{region:["id","name"]},{district:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{ownership:["id","name"]},{schoolType:["id","name"]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},"latitude","longitude","bio","logo","created","updated","isActive","isUniversal","canEdit","canDelete","canManage"]}]}});xe.success?(d.success(xe.message),h(r.map(pe=>pe.id===Q?xe.school:pe))):d.error(xe.message)},Re=async w=>{const{data:Q}=await k.custom({url:"",method:"post",meta:{operation:"createNjiwaAccount",variables:{schoolId:{value:parseInt(w.toString()),type:"Int",required:!0}},fields:["success","message",{school:["id","name","serialNumber","hasNjiwaAccount",{region:["id","name"]},{district:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{ownership:["id","name"]},{schoolType:["id","name"]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},"latitude","longitude","bio","logo","created","updated","isActive","isUniversal","canEdit","canDelete","canManage"]}]}});Q.success?(d.success(Q.message),h(r.map(xe=>xe.id===w?Q.school:xe))):d.error(Q.message)},Le=async(w,Q="",xe=20)=>{const{data:pe}=await k.custom({url:"",method:"get",meta:{operation:"schools",variables:{page:{value:w,type:"Int",required:!0},pageSize:{value:xe,type:"Int",required:!0},key:{value:Q,type:"String",required:!1},schoolTypes:{value:N,type:"[Int]",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","serialNumber","hasNjiwaAccount",{region:["id","name"]},{district:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{ownership:["id","name"]},{schoolType:["id","name"]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},"latitude","longitude","bio","logo","created","updated","isUniversal","contractEndDate","isActive","canEdit","canDelete","canManage"]}]}});Y(pe.page),_(pe.total),B(pe.hasNext),h(pe.results),D(!1)},Je=async(w,Q="",xe=20)=>{const{data:pe}=await k.custom({url:"",method:"get",meta:{operation:"schoolsTypes",variables:{page:{value:w,type:"Int",required:!0},pageSize:{value:xe,type:"Int",required:!0},key:{value:Q,type:"String",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});j(pe.results)};t.useEffect(()=>{Je(1,"",20),Le(1,"",20)},[]);const $e=[{title:"Name",dataIndex:"name",key:"name",render:(w,Q,xe)=>e.jsxs(e.Fragment,{children:[e.jsx("a",{onClick:()=>{},children:Q.name}),e.jsx("span",{style:{marginLeft:10},children:Q.isUniversal?e.jsx(ie,{color:"red",children:"Universal"}):e.jsx(ie,{color:"green",children:"Not Universal"})})]})},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber"},{title:"Region",dataIndex:"region",key:"region",render:(w,Q,xe)=>{var pe,Ee,_e;return e.jsx("span",{children:(_e=(Ee=(pe=Q==null?void 0:Q.ward)==null?void 0:pe.district)==null?void 0:Ee.region)==null?void 0:_e.name})}},{title:"District",dataIndex:"district",key:"district",render:(w,Q,xe)=>{var pe,Ee;return e.jsx("span",{children:(Ee=(pe=Q==null?void 0:Q.ward)==null?void 0:pe.district)==null?void 0:Ee.name})}},{title:"Ward",dataIndex:"ward",key:"ward",render:(w,Q,xe)=>{var pe;return e.jsx("span",{children:(pe=Q==null?void 0:Q.ward)==null?void 0:pe.name})}},{title:"School Type",dataIndex:"schoolType",key:"schoolType",render:(w,Q,xe)=>Q.schoolOperatingTypes.map(pe=>e.jsx(je,{title:"Click to Remove "+pe.schoolType.name,placement:"bottom",children:e.jsx(X,{title:"Are you sure to delete this Operating Type?",onConfirm:()=>Qe(pe.id,Q.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{children:e.jsx(ie,{color:"green",children:pe.schoolType.name})})})}))},{title:"Ownership",dataIndex:"Ownership",key:"ownership",render:(w,Q,xe)=>e.jsx("span",{children:Q.ownership.name})},{title:"Has Njiwa",dataIndex:"hasNjiwaAccount",key:"hasNjiwaAccount",render:(w,Q,xe)=>e.jsx("span",{children:Q.hasNjiwaAccount?e.jsxs(e.Fragment,{children:[e.jsx(ie,{color:"green",children:"Yes"}),e.jsx(F,{size:"small",onClick:()=>G(Q),danger:!0,children:"Config"})]}):e.jsx(e.Fragment,{children:e.jsx(X,{title:"Are you sure to Activate Njiwa Account for this School? by default School Adminstrator will be granted access to Njiwa Module",onConfirm:()=>Re(Q.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{children:e.jsx(ie,{color:"red",children:"No"})})})})})},{title:"Contract End Date",dataIndex:"contractEndDate",key:"contractEndDate",render:(w,Q,xe)=>Q.contractEndDate?e.jsx("span",{children:Te(Q.contractEndDate).format("DD/MM/YYYY")}):e.jsx(F,{size:"small",onClick:()=>{W(Q)},danger:!0,children:"Add a Contract"})},{title:"",dataIndex:"Action",key:"action",render:(w,Q,xe)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(rt,{trigger:["click"],overlay:e.jsxs(Ne,{children:[e.jsx(Ne.Item,{disabled:!Q.canDelete,icon:e.jsx(oe,{}),onClick:()=>{},children:e.jsx(X,{placement:"topLeft",title:"Deleting School: "+Q.name,onConfirm:()=>Ge(parseInt(Q.id)),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(Ne.Item,{disabled:!Q.canEdit,icon:e.jsx(ve,{}),onClick:()=>q(Q),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(Ne.Item,{disabled:!Q.canEdit,icon:e.jsx(Lt,{}),onClick:()=>Z(Q),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Adminstrators"})}),e.jsx(Ne.Item,{disabled:!Q.canManage,icon:e.jsx(tt,{}),onClick:()=>W(Q),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Contracts"})}),e.jsx(Ne.Item,{disabled:!Q.canManage,icon:e.jsx(Lt,{}),onClick:()=>J(Q),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"School Settings"})}),!Q.hasNjiwaAccount&&e.jsx(Ne.Item,{disabled:!Q.canManage,icon:e.jsx(ns,{}),children:e.jsx(X,{title:"Are you sure to Activate Njiwa Account for this School? by default School Adminstrator will be granted access to Njiwa Module",onConfirm:()=>Re(Q.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Register Njiwa Account"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:pe=>pe.preventDefault(),children:e.jsx(lt,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(M,{span:16,children:e.jsx(n,{layout:"vertical",form:I,onFinish:w=>{Y(1),r.length=0,Le(1,w.key,R)},children:e.jsxs(ee,{style:{marginBottom:0},children:[e.jsx(M,{span:20,children:e.jsx(n.Item,{name:"key",style:{marginBottom:3},children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(M,{span:4,children:e.jsx(n.Item,{style:{marginBottom:3},children:e.jsxs(F,{size:"large",htmlType:"submit",onClick:()=>I.submit(),children:[e.jsx(re,{}),"Search"]})})}),e.jsx(M,{span:24,children:e.jsx(n.Item,{children:e.jsxs("div",{children:[x.map(w=>N.includes(parseInt(w.id.toString()))?e.jsx("a",{onClick:()=>{N.includes(parseInt(w.id.toString()))&&A(N.filter(Q=>Q!==parseInt(w.id.toString())))},children:e.jsx(ie.CheckableTag,{checked:!0,style:{padding:5},children:w.name})}):e.jsx("a",{onClick:()=>{N.includes(parseInt(w.id.toString()))||A([...N,parseInt(w.id.toString())])},children:e.jsx(ie,{style:{padding:5},children:w.name})})),N.length>0&&e.jsx("a",{onClick:()=>{A([]),I.submit()},children:e.jsx(ie,{style:{padding:5},icon:e.jsx(Vt,{}),color:"red",children:"Clear All"})})]})})})]})})}),e.jsx(M,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(F,{size:"large",onClick:P,children:[e.jsx(ye,{}),"Create School"]})})]}),e.jsx(ce,{dataSource:r,columns:$e,pagination:{onChange:(w,Q)=>{T(Q),Le(w,z,Q)},onShowSizeChange:(w,Q)=>{T(Q),Le(w,z,Q)},total:p,pageSize:R,position:["bottomCenter"],showQuickJumper:!0},scroll:{y:window.innerHeight-310}}),e.jsx(se,{title:"Registering School",width:"50%",destroyOnClose:!0,open:b,onClose:w=>C(w),children:e.jsx(ua,{form:f,onFinish:ae})}),e.jsx(se,{title:"Edit School Informations",width:"50vw",open:o,onClose:w=>y(w),children:e.jsx(na,{school:s,form:f,onFinish:fe,randKey:Math.random()})}),e.jsx(se,{title:"School System Adminstrators",width:"50vw",open:g,onClose:w=>l(w),children:e.jsx(da,{randKey:Math.random(),school:s})}),e.jsx(se,{title:"School Settings",width:"50%",open:v,onClose:w=>i(w),children:e.jsx(gs,{school:s,full:!0,randKey:Math.random()})}),e.jsx(se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"red"},children:s==null?void 0:s.name}),e.jsx("span",{style:{marginLeft:5},children:"Contracts"})]}),width:"70vw",open:c,onClose:w=>O(w),children:e.jsx(ga,{school:s,full:!0,randKey:Math.random()})}),e.jsx(se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"red"},children:s==null?void 0:s.name}),e.jsx("span",{style:{marginLeft:5},children:"Contracts"})]}),width:"90vw",open:S,onClose:w=>u(w),children:e.jsx(ha,{school:s,randKey:Math.random()})})]})},ya=()=>e.jsx(me,{children:e.jsxs(e.Fragment,{children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Schools"})]}),e.jsx(ja,{})]})}),Gt=a=>e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:s=>{a.onFinish(s)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})}),Qt=a=>{const[s,m]=t.useState(a.ward.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.ward.name,isActive:a.ward.isActive})},[a.form,a.ward]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.ward.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(he,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},fa=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,j]=t.useState(0),[N,A]=t.useState(20),[E,Y]=t.useState(""),[p,_]=t.useState(!1),[R,T]=t.useState(!0);ne();const[z]=n.useForm();le.useBreakpoint();const U=async V=>{const{data:D}=await k.custom({url:"",method:"post",meta:{operation:"addSchoolTypeCurriculum",variables:{schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0},curriculumId:{value:V,type:"Int",required:!0}},fields:["success","message",{schoolTypeCurriculum:["id",{schoolType:["id"]},{curriculum:["id","name","code","description"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});D.success?(d.success(D.message),a.onAdd(D.schoolTypeCurriculum),m(s.filter(b=>b.id!==V))):d.error(D.message)},K=[{title:"Name",dataIndex:"name",fixed:!0,render:(V,D)=>e.jsx("span",{children:e.jsx("a",{children:D.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(V,D)=>e.jsx("span",{children:e.jsx("a",{children:D.code})})},{title:"",dataIndex:"action",render:(V,D)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to Add this School Type Curriculum?",placement:"left",onConfirm:()=>U(D==null?void 0:D.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(D!=null&&D.canManage),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(ye,{}),disabled:!(D!=null&&D.canManage)})})})}],B=async(V,D="",b=20)=>{const{data:C}=await k.custom({url:"",method:"get",meta:{operation:"schoolTypeCurriculumsToAdd",variables:{page:{value:V,type:"Int",required:!0},key:{value:D,type:"String",required:!1},pageSize:{value:b,type:"Int",required:!1},schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(C.page),j(C.total),_(C.hasNext),m(C.results),T(!1)};return t.useEffect(()=>{B(r,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(M,{span:24,children:e.jsx(n,{layout:"vertical",form:z,onFinish:V=>{h(1),s.length=0,B(1,V.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{children:e.jsx(ce,{loading:R,columns:K,dataSource:s,scroll:{x:!0},pagination:{onChange:(V,D)=>{A(D),B(V,E,D)},total:x,pageSize:N,position:["bottomCenter"],showQuickJumper:!0}})})]})},Sa=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,j]=t.useState(0),[N,A]=t.useState(20),[E,Y]=t.useState(""),[p,_]=t.useState(!1),[R,T]=t.useState(!0);ne();const[z]=n.useForm();le.useBreakpoint().lg,t.useState(!1);const[K,B]=t.useState(!1),V=()=>{B(!0)},D=async g=>{const{data:l}=await k.custom({url:"",method:"post",meta:{operation:"removeSchoolTypeCurriculum",variables:{schoolTypeCurriculumId:{value:parseInt(g.toString()),type:"Int",required:!0}},fields:["success","message"]}});l.success?(d.success(l.message),m(s.filter(f=>f.id!==g))):d.error(l.message)},b=()=>{d("Canceled")},C=[{title:"Name",dataIndex:"name",fixed:!0,render:(g,l,f)=>e.jsx("span",{children:e.jsx("a",{children:l.curriculum.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(g,l,f)=>e.jsx("span",{children:e.jsx("a",{children:l.curriculum.code})})},{title:"Created",dataIndex:"created",render:(g,l,f)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(l.created)})})})},{title:"Status",dataIndex:"isActive",render:(g,l,f)=>e.jsx("a",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(g,l,f)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to delete this School Type Curriculum?",onConfirm:()=>D(l==null?void 0:l.id),onCancel:()=>b,okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(l!=null&&l.canDelete)})})})}],o=async(g,l="",f=20)=>{const{data:I}=await k.custom({url:"",method:"get",meta:{operation:"schoolTypeCurriculums",variables:{page:{value:g,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:f,type:"Int",required:!1},schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{schoolType:["id"]},{curriculum:["id","name","code","description"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(I.page),j(I.total),_(I.hasNext),m(I.results),T(!1)},y=async g=>{m([g,...s])};return t.useEffect(()=>{o(r,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:12,children:e.jsx(n,{layout:"vertical",form:z,onFinish:g=>{h(1),s.length=0,o(1,g.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{size:"large",icon:e.jsx(ye,{}),onClick:()=>V(),children:"Add"})})]}),e.jsx("div",{children:e.jsx(ce,{loading:R,columns:C,dataSource:s,scroll:{x:!0,y:"50vh"},pagination:{onChange:(g,l)=>{A(l),o(g,E,l)},total:x,pageSize:N,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(He,{title:"Adding Curriculums",anchor:"right",width:"35vw",open:K,onClose:()=>{B(!1)},children:e.jsx(fa,{schoolType:a.schoolType,onAdd:y})})]})},{Option:va}=Se,Ca=a=>{const[s,m]=t.useState(!1),[r,h]=t.useState([]),[x]=n.useForm(),j=async A=>{const{data:E}=await k.custom({url:"",method:"post",meta:{operation:"createSchoolTypeGrade",variables:{schoolTypeId:{value:A.school_type_id,type:"Int",required:!0},gradeId:{value:A.grade_id,type:"Int",required:!0},minScore:{value:A.min_score,type:"Int",required:!0},maxScore:{value:A.max_score,type:"Int",required:!0}},fields:["success","message",{schoolTypeGrade:["id",{grade:["id","name"]},"minScore","maxScore","isActive","created","updated","canEdit","canDelete","canManage"]}]}});E.success?(d.success(E.message),x.resetFields(),N(1,"",20),a.onFinish(E.schoolTypeGrade)):d.error(E.message)},N=async(A,E="",Y=20)=>{m(!0);const{data:p}=await k.custom({url:"",method:"get",meta:{operation:"schoolTypeGradesToAdd",variables:{page:{value:A,type:"Int",required:!0},key:{value:E,type:"String",required:!1},pageSize:{value:Y,type:"Int",required:!1},schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(p.results),m(!1)};return t.useEffect(()=>{N(1,"",20)},[a.schoolType]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:x,onFinish:A=>{A.school_type_id=parseInt(a.schoolType.id.toString()),j(A)},requiredMark:!1,initialValues:{remember:!1,email:"",password:""},children:[e.jsx(n.Item,{name:"grade_id",label:"Grade",rules:[{required:!0,type:"number",message:"Please select Grade"}],children:e.jsx(Se,{size:"large",dropdownStyle:{zIndex:9999},children:r.map(A=>e.jsx(va,{value:parseInt(A.id.toString()),children:A.name},A.id))})}),e.jsx(n.Item,{name:"min_score",label:"Min Score (%)",rules:[{required:!0,type:"number",message:"Please input Min Score"},{validator:(A,E)=>E&&E>x.getFieldValue("max_score")?Promise.reject("Min Score must be less than Max Score"):Promise.resolve()}],children:e.jsx(Be,{size:"large",min:0,max:100,style:{width:"50%"}})}),e.jsx(n.Item,{name:"max_score",label:"Max Score (%)",rules:[{required:!0,type:"number",message:"Please input Max Score"},{validator:(A,E)=>E&&E<x.getFieldValue("min_score")?Promise.reject("Max Score must be greater than Min Score"):Promise.resolve()}],children:e.jsx(Be,{size:"large",min:0,max:100,style:{width:"50%"}})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{size:"large",htmlType:"submit",icon:e.jsx(Ye,{}),disabled:s,danger:!0,children:"Save"})})]})})},ba=a=>{const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,j]=t.useState(0),[N,A]=t.useState(20),[E,Y]=t.useState(""),[p,_]=t.useState(!1),[R,T]=t.useState(!0);ne();const[z]=n.useForm();le.useBreakpoint().lg,t.useState(!1);const[K,B]=t.useState(!1),V=()=>{B(!0)},D=async g=>{const{data:l}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchoolTypeGrade",variables:{id:{value:parseInt(g.toString()),type:"Int",required:!0}},fields:["success","message"]}});l.success?(d.success(l.message),m(s.filter(f=>f.id!==g))):d.error(l.message)},b=()=>{d("Canceled")},C=[{title:"Name",dataIndex:"name",fixed:!0,render:(g,l,f)=>e.jsx("span",{children:e.jsx("a",{children:l.grade.name})})},{title:"Min Score",dataIndex:"minScore",fixed:!0,render:(g,l,f)=>e.jsx("span",{children:e.jsx("a",{children:l.minScore})})},{title:"Max Score",dataIndex:"maxScore",fixed:!0,render:(g,l,f)=>e.jsx("span",{children:e.jsx("a",{children:l.maxScore})})},{title:"Created",dataIndex:"created",render:(g,l,f)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(l.created)})})})},{title:"Status",dataIndex:"isActive",render:(g,l,f)=>e.jsx("a",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(g,l,f)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to delete this School Grade?",onConfirm:()=>D(l==null?void 0:l.id),onCancel:()=>b,okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(l!=null&&l.canDelete),danger:!0})})})}],o=async(g,l="",f=20)=>{const{data:I}=await k.custom({url:"",method:"get",meta:{operation:"schoolTypeGrades",variables:{page:{value:g,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:f,type:"Int",required:!1},schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{grade:["id","name"]},"minScore","maxScore","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(I.page),j(I.total),_(I.hasNext),m(I.results),T(!1)},y=async g=>{m([g,...s])};return t.useEffect(()=>{o(r,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:12,children:e.jsx(n,{layout:"vertical",form:z,onFinish:g=>{h(1),s.length=0,o(1,g.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{size:"large",icon:e.jsx(ye,{}),onClick:()=>V(),danger:!0,children:"Add"})})]}),e.jsx("div",{children:e.jsx(ce,{loading:R,columns:C,dataSource:s,scroll:{x:!0,y:"50vh"},pagination:{onChange:(g,l)=>{A(l),o(g,E,l)},total:x,pageSize:N,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Adding Grade",width:"30vw",open:K,onClose:g=>B(g),children:e.jsx(Ca,{schoolType:a.schoolType,onFinish:y})})]})},Ia=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(25),[N,A]=t.useState(""),[E,Y]=t.useState(1),[p,_]=t.useState(0),[R,T]=t.useState(!1),[z,U]=t.useState(!0);ne();const[K]=n.useForm(),[B]=n.useForm();le.useBreakpoint().lg;const[D,b]=t.useState(!1),[C,o]=t.useState(!1),[y,g]=t.useState(!1),[l,f]=t.useState(!1),I=q=>{m(q),f(!0)},v=q=>{m(q),g(!0)},i=q=>{m(q),o(!0)},c=async q=>{const{data:P}=await k.custom({url:"",method:"post",meta:{operation:"updateSchoolsTypes",variables:{id:{value:q.id,type:"Int",required:!0},name:{value:q.name,type:"String",required:!0},isActive:{value:q.isActive,type:"Boolean",required:!0}},fields:["success","message",{schoolType:["id","name","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}});P.success?(d.success(P.message),B.resetFields(),o(!1),h(r.map(ae=>parseInt(ae.id.toString())===parseInt(q.id)?P.schoolType:ae))):d.error(P.message)},O=async q=>{const{data:P}=await k.custom({url:"",method:"post",meta:{operation:"updateSchoolOwnership",variables:{id:{value:q.id,type:"Int",required:!0},name:{value:q.name,type:"String",required:!0},isActive:{value:q.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});P.success?(d.success(P.message),B.resetFields(),o(!1),h(r.map(ae=>ae.id===P.schoolType.id?P.level:ae))):d.error(P.message)},S=async q=>{const{data:P}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchoolsEducationLevel",variables:{id:{value:parseInt(q.toString()),type:"Int",required:!0}},fields:["success","message"]}});P.success?(d.success(P.message),h(r.filter(ae=>ae.id!==q))):d.error(P.message)},u=()=>{d("Canceled")},W=[{title:"Name",dataIndex:"name",fixed:!0,render:(q,P,ae)=>e.jsx("span",{children:e.jsx("a",{children:P.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(q,P,ae)=>e.jsx("span",{children:e.jsx("a",{children:q})})},{title:"Grading System",dataIndex:"code",fixed:!0,render:(q,P,ae)=>e.jsx("span",{children:e.jsxs(F,{onClick:()=>I(P),danger:!0,children:[e.jsx(tt,{}),"Configure"]})})},{title:"Created",dataIndex:"created",render:(q,P,ae)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(P.created)})})})},{title:"Status",dataIndex:"isActive",render:(q,P,ae)=>e.jsx("a",{children:P!=null&&P.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(q,P,ae)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(je,{title:"View/Manage Application Curriculums",placement:"left",color:"green",children:e.jsx(F,{style:{marginRight:3},onClick:()=>v(P),icon:e.jsx(tt,{}),disabled:!(P!=null&&P.canManage),danger:!0})}),e.jsx(X,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>S(P==null?void 0:P.id),onCancel:()=>u,okText:"Yes",cancelText:"No",disabled:!(P!=null&&P.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{style:{marginRight:3},icon:e.jsx(oe,{}),disabled:!(P!=null&&P.canDelete),danger:!0})}),e.jsx(je,{title:"Edit "+(P==null?void 0:P.name)+" Ownership",color:"green",placement:"left",children:e.jsx(F,{style:{marginRight:3},icon:e.jsx(ve,{}),disabled:!(P!=null&&P.canEdit),onClick:()=>i(P),danger:!0})})]})}],G=async(q,P="",ae=25)=>{const{data:fe}=await k.custom({url:"",method:"get",meta:{operation:"schoolsTypes",variables:{page:{value:q,type:"Int",required:!0},key:{value:P,type:"String",required:!1},pageSize:{value:ae,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});Y(fe.page),_(fe.total),T(fe.hasNext),h([...fe.results]),U(!1)},J=async()=>{const{data:q}=await k.custom({url:"",method:"post",meta:{operation:"syncSchoolsTypes",variables:{},fields:["success","message"]}});q.success?(d.success(q.message),r.length=0,h([]),G(1)):d.error(q.message)},Z=async()=>{const{data:q}=await k.custom({url:"",method:"post",meta:{operation:"syncDefaultGrading",variables:{},fields:["success","message"]}});q.success?d.success(q.message):d.error(q.message)};return t.useEffect(()=>{G(E)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:8,children:e.jsx(n,{layout:"vertical",form:K,onFinish:q=>{Y(1),r.length=0,G(1,q.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(M,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(je,{title:"Synchronize Defualt Grading",color:"green",children:e.jsx(F,{style:{marginRight:3},size:"large",icon:e.jsx(Ce,{}),onClick:()=>Z(),danger:!0,children:"Default Grading"})}),e.jsx(je,{title:"Synchronize Default School Ownerships",color:"green",children:e.jsx(F,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>J(),danger:!0,children:"Types"})})]})]}),e.jsx(ce,{loading:z,columns:W,dataSource:r,scroll:{x:!0},pagination:{onChange:(q,P)=>{j(P),G(q,N,P)},total:p,pageSize:x,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(se,{title:"Edit School Type Informations",width:"60vw",open:C,onClose:q=>o(q),children:e.jsx(Qt,{form:B,ward:s,onFinish:c})}),e.jsx(se,{title:"Create School Type Informations",width:"60vw",open:D,onClose:q=>b(q),children:e.jsx(Gt,{form:B,onFinish:O})}),e.jsx(se,{title:"Applicable Curriculums for "+(s==null?void 0:s.name),width:"60vw",open:y,onClose:q=>{g(q)},children:e.jsx(Sa,{schoolType:s})}),e.jsx(se,{title:(s==null?void 0:s.name)+" Grading System",width:"60vw",open:l,onClose:q=>{f(q)},children:e.jsx(ba,{schoolType:s})})]})},Aa=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Schools Types"})]}),e.jsx(Ia,{height:80})]})}),ka=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(25),[x,j]=t.useState(""),[N,A]=t.useState(1),[E,Y]=t.useState(0),[p,_]=t.useState(!1),[R,T]=t.useState(!0);ne();const[z]=n.useForm();n.useForm();const K=!le.useBreakpoint().lg,[B,V]=t.useState(!1),[D,b]=t.useState(!1),C=async()=>{const{data:f}=await k.custom({url:"",method:"post",meta:{operation:"synchronizeGrades",variables:{},fields:["success","message"]}});f.success&&(d.success(f.message),l(1))},o=async f=>{const{data:I}=await k.custom({url:"",method:"post",meta:{operation:"deleteGrade",variables:{id:{value:parseInt(f.toString()),type:"Int",required:!0}},fields:["success","message"]}});I.success?(d.success(I.message),m(s.filter(v=>v.id!==f))):d.error(I.message)},y=()=>{d("Canceled")},g=[{title:"Name",dataIndex:"name",fixed:!0,render:(f,I,v)=>e.jsx("span",{children:e.jsx("a",{children:I.name})})},{title:"Created",dataIndex:"created",render:(f,I,v)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(I.created)})})})},{title:"Status",dataIndex:"isActive",render:(f,I,v)=>e.jsx("a",{children:I!=null&&I.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,I,v)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>o(I==null?void 0:I.id),onCancel:()=>y,okText:"Yes",cancelText:"No",disabled:!(I!=null&&I.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{style:{marginRight:3},icon:e.jsx(oe,{}),disabled:!(I!=null&&I.canDelete),danger:!0})}),e.jsx(je,{title:"Edit "+(I==null?void 0:I.name)+" Ownership",color:"green",placement:"left",children:e.jsx(F,{style:{marginRight:3},icon:e.jsx(ve,{}),disabled:!(I!=null&&I.canEdit),onClick:()=>{},danger:!0})})]})}],l=async(f,I="",v=25)=>{const{data:i}=await k.custom({url:"",method:"get",meta:{operation:"grades",variables:{page:{value:f,type:"Int",required:!0},key:{value:I,type:"String",required:!1},pageSize:{value:v,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});A(i.page),Y(i.total),_(i.hasNext),m([...i.results]),T(!1)};return t.useEffect(()=>{l(N)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:K?24:20,children:e.jsx(n,{layout:"vertical",form:z,onFinish:f=>{A(1),s.length=0,l(1,f.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:K?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(je,{title:"Synchronize Default Grades",children:e.jsx(F,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>C(),danger:!0})})})]}),e.jsx(ce,{loading:R,columns:g,dataSource:s,scroll:{x:!0},pagination:{onChange:(f,I)=>{h(I),l(f,x,I)},total:E,pageSize:r,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(se,{title:"Edit Grade",width:"60vw",open:D,onClose:f=>b(f),children:e.jsx(e.Fragment,{})}),e.jsx(se,{title:"Create Grade",width:"60vw",open:B,onCancel:f=>V(f),children:e.jsx(e.Fragment,{})})]})},Fa=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Grades"})]}),e.jsx(ka,{height:80})]})}),Na=a=>{const[s]=n.useForm(),[m,r]=t.useState(a.ownership.isActive),h=async x=>{const{data:j}=await k.custom({url:"",method:"post",meta:{operation:"updateSchoolsOwnerships",variables:{id:{value:x.id,type:"Int",required:!0},name:{value:x.name,type:"String",required:!0},isActive:{value:x.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});j.success?(d.success(j.message),s.resetFields(),a.onFinish(j.ownership)):d.error(j.message)};return t.useEffect(()=>{a.form.setFieldsValue({name:a.ownership.name,isActive:a.ownership.isActive})},[a.form,a.ownership]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:x=>{x.isActive=m,x.id=parseInt(a.ownership.id),h(x)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(he,{checked:m,onChange:()=>r(!m),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Ta=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(1),[N,A]=t.useState(0),[E,Y]=t.useState(!1),[p,_]=t.useState(20),[R,T]=t.useState(""),[z,U]=t.useState(!0);ne();const[K]=n.useForm(),[B]=n.useForm(),D=!le.useBreakpoint().lg,[b,C]=t.useState(!1),[o,y]=t.useState(!1),g=S=>{m(S),y(!0)},l=async S=>{h(r.map(u=>parseInt(u.id.toString())===parseInt(S.id.toString())?S:u)),y(!1)},f=async S=>{const{data:u}=await k.custom({url:"",method:"post",meta:{operation:"updateSchoolOwnership",variables:{id:{value:S.id,type:"Int",required:!0},name:{value:S.name,type:"String",required:!0},isActive:{value:S.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});u.success?(d.success(u.message),B.resetFields(),y(!1),h(r.map(W=>W.id===u.ownership.id?u.ownership:W))):d.error(u.message)},I=async S=>{const{data:u}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchoolOwnership",variables:{id:{value:parseInt(S.toString()),type:"Int",required:!0}},fields:["success","message"]}});u.success?(d.success(u.message),h(r.filter(W=>W.id!==S))):d.error(u.message)},v=()=>{d("Canceled")},i=[{title:"Name",dataIndex:"name",fixed:!0,render:(S,u,W)=>e.jsx("span",{children:e.jsx("a",{children:u.name})})},{title:"Created",dataIndex:"created",render:(S,u,W)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(u.created)})})})},{title:"Status",dataIndex:"isActive",render:(S,u,W)=>e.jsx("a",{children:u!=null&&u.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(S,u,W)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>I(u==null?void 0:u.id),onCancel:()=>v,okText:"Yes",cancelText:"No",disabled:!(u!=null&&u.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(u!=null&&u.canDelete),danger:!0})}),e.jsx(je,{title:"Edit "+(u==null?void 0:u.name)+" Ownership",color:"green",children:e.jsx(F,{icon:e.jsx(ve,{}),disabled:!(u!=null&&u.canEdit),onClick:()=>g(u),danger:!0})})]})}],c=async(S,u="",W=20)=>{const{data:G}=await k.custom({url:"",method:"get",meta:{operation:"ownerships",variables:{page:{value:S,type:"Int",required:!0},key:{value:u,type:"String",required:!1},pageSize:{value:W,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});j(G.page),A(G.total),Y(G.hasNext),h(G.results),U(!1)},O=async()=>{const{data:S}=await k.custom({url:"",method:"post",meta:{operation:"syncSchoolsOwnerships",variables:{},fields:["success","message"]}});S.success?(d.success(S.message),r.length=0,h([]),c(1)):d.error(S.message)};return t.useEffect(()=>{c(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:K,onFinish:S=>{j(1),r.length=0,T(S.key),c(1,S.key,p)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(M,{span:D?24:4,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(je,{title:"Synchronize Default School Ownerships",children:e.jsx(F,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>O()})}),e.jsx(je,{title:"Create New School Ownership",children:e.jsx(F,{size:"large",icon:e.jsx(ye,{}),onClick:()=>C(!0)})})]})]}),e.jsx("div",{children:e.jsx(ce,{loading:z,columns:i,dataSource:r,scroll:{x:!0},pagination:{onChange:(S,u)=>{_(u),c(S,R,u)},total:N,pageSize:p,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Edit School Ownership Informations",width:"30vw",open:o,onClose:S=>y(S),children:e.jsx(Na,{form:B,ownership:s,onFinish:l})}),e.jsx(se,{title:"Create School Ownership Informations",width:"30vw",open:b,onClose:S=>C(S),children:e.jsx(Gt,{form:B,onFinish:f})})]})},qa=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"School Ownerships"})]}),e.jsx(Ta,{height:80})]})}),Pa=a=>{const[s,m]=t.useState(a.member.isAdmin),[r,h]=t.useState(a.member.isStaff);return t.useEffect(()=>{a.form.setFieldsValue({firstName:a.member.firstName,middleName:a.member.middleName,lastName:a.member.lastName,email:a.member.email,phone:a.member.phone,isAdmin:a.member.isAdmin,isStaff:a.member.isStaff})},[a.form,a.member]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:x=>{x.id=parseInt(a.member.id),x.isAdmin=s,x.isStaff=r,a.onFinish(x)},requiredMark:!0,children:[e.jsx(n.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter First Name ..."})}),e.jsx(n.Item,{name:"middleName",label:"Middle Name",rules:[{required:!1,type:"string",message:"Please input Middle Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(n.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(n.Item,{name:"email",label:"Email",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(L,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(n.Item,{name:"phone",label:"Mobile Phone Number",rules:[{required:!0,type:"string",message:"Please input Mobile Phone Number ..."}],children:e.jsx(L,{size:"large",placeholder:"Enter Mobile Phone Number ..."})}),e.jsx(n.Item,{name:"isAdmin",rules:[{required:!1,type:"boolean"}],children:e.jsx(he,{defaultChecked:s,onChange:()=>{m(!s)},children:"Admin"})}),e.jsx(n.Item,{name:"isStaff",rules:[{required:!1,type:"boolean"}],children:e.jsx(he,{defaultChecked:r,checked:r,onChange:()=>{h(!r)},children:"Staff"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Ma=["id","firstName","lastName","email","middleName","fullName","phone","pic","username","isActive","isStaff","isAdmin","ldapAuth","created","updated","canEdit","canDelete","canManage"],Ea=a=>{const[s,m]=t.useState(!1),[r,h]=t.useState(!1),[x,j]=t.useState(!1),N=async A=>{const{data:E}=await k.custom({url:"",method:"post",meta:{operation:"createUserExtended",variables:{firstName:{value:A.firstName,type:"String",required:!0},middleName:{value:A.middleName,type:"String",required:!0},lastName:{value:A.lastName,type:"String",required:!0},username:{value:A.username,type:"String",required:!1},email:{value:A.email,type:"String",required:!x},phone:{value:A.phone,type:"String",required:!0},password:{value:A.password,type:"String",required:!x},passwordRepeat:{value:A.passwordRepeat,type:"String",required:!x},isAdmin:{value:A.isAdmin,type:"Boolean",required:!1},isStaff:{value:A.isStaff,type:"Boolean",required:!1},ldapAuth:{value:A.ldapAuth,type:"Boolean",required:!1}},fields:["success","message",{user:Ma}]}});E.success?(d.success(E.message),a.onFinish(E.user)):d.error(E.message)};return t.useEffect(()=>{},[a.form]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:A=>{A.isAdmin=s,A.isStaff=r,A.ldapAuth=x,x||(A.username=A.email),N(A)},requiredMark:!0,children:[e.jsxs("div",{style:{maxHeight:"70vh",overflowY:"auto",padding:20},children:[e.jsx(n.Item,{name:"ldapAuth",rules:[{required:!1,type:"boolean"}],children:e.jsx(he,{defaultChecked:x,onChange:()=>{j(!x)},children:"LDAP Authentication"})}),e.jsx(n.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter First Name ..."})}),e.jsx(n.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(n.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(n.Item,{name:"email",label:e.jsxs(e.Fragment,{children:["Email Address",!x&&e.jsx(ie,{color:"green",children:"Username"})]}),rules:[{required:!x,type:"email",message:"Please input Email Address"}],children:e.jsx(L,{size:"large",placeholder:"Enter Email Address ..."})}),x&&e.jsx(n.Item,{name:"username",label:"Username",rules:[{required:x,type:"string",message:"Please input Username ..."}],children:e.jsx(L,{size:"large",placeholder:"Enter Username ..."})}),!x&&e.jsxs(e.Fragment,{children:[e.jsx(n.Item,{name:"password",label:"Password",rules:[{required:!x,type:"string",message:"Please input Password ..."}],children:e.jsx(L,{size:"large",type:"password",placeholder:"Enter Password ..."})}),e.jsx(n.Item,{name:"passwordRepeat",label:"Password Confirm",rules:[{required:!x,type:"string",message:"Please input Password Confirm ..."}],children:e.jsx(L,{size:"large",type:"password",placeholder:"Enter Password Confirm ..."})})]}),e.jsx(n.Item,{name:"phone",label:"Mobile Phone",rules:[{required:!0,type:"string",message:"Please input Mobile Phone"}],children:e.jsx(L,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(n.Item,{name:"isAdmin",rules:[{required:!1,type:"boolean"}],children:e.jsx(he,{defaultChecked:s,onChange:()=>{m(!s)},children:"Admin"})}),e.jsx(n.Item,{name:"isStaff",rules:[{required:!1,type:"boolean"}],children:e.jsx(he,{defaultChecked:r||x,checked:r||x,onChange:()=>{h(!r)},children:"Staff"})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{size:"large",htmlType:"submit",danger:!0,children:"Save"})})]})})},{Paragraph:Da}=We,za=a=>{var r,h,x,j,N;const[s]=n.useForm(),m=async A=>{const{data:E}=await k.custom({url:"",method:"post",meta:{operation:"createLdapCredentials",variables:{userId:{value:A.userId,type:"Int",required:!0},username:{value:A.username,type:"String",required:!1},password:{value:A.password,type:"String",required:!1},passwordConfirm:{value:A.passwordConfirm,type:"String",required:!1}},fields:["success","message"]}});E.success?(d.success(E.message),s.resetFields(),a.onFinish()):d.error(E.message)};return t.useEffect(()=>{},[a.member]),e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Copy the link below and send it to the user to create their LDAP credentials",e.jsx("span",{style:{color:"red"},children:"Link Expires in 24Hours"})]}),e.jsx(Kt,{type:"info",message:e.jsx(e.Fragment,{children:e.jsx(Da,{copyable:!0,style:{fontSize:"22px"},children:window.location.origin+"/auth/ldap/"+Te().add("h",24).valueOf()+"/"+((r=a.member)==null?void 0:r.id)+"/login?fname="+((h=a.member)==null?void 0:h.firstName)+"&lname="+((x=a.member)==null?void 0:x.lastName)+"&mname="+((j=a.member)==null?void 0:j.middleName)+"&email="+((N=a.member)==null?void 0:N.email)})})}),e.jsx("div",{style:{marginTop:50},children:e.jsxs(n,{layout:"vertical",form:s,onFinish:A=>{var E;A.userId=parseInt(((E=a.member)==null?void 0:E.id)??"0"),m(A)},requiredMark:!0,children:[e.jsx(n.Item,{name:"username",label:"Username",rules:[{required:!0,type:"string",message:"Please input Username"}],children:e.jsx(L,{size:"large",placeholder:"Enter Username ..."})}),e.jsx(n.Item,{name:"password",label:"Password",rules:[{required:!0,type:"string",message:"Please input Password"}],children:e.jsx(L,{size:"large",type:"password",placeholder:"Enter Password ..."})}),e.jsx(n.Item,{name:"passwordConfirm",label:"Confirm Password",rules:[{required:!0,type:"string",message:"Please input Confirm Password"},({getFieldValue:A})=>({validator(E,Y){return!Y||A("password")===Y?Promise.resolve():Promise.reject(new Error("The two passwords that you entered do not match!"))}})],children:e.jsx(L,{size:"large",type:"password",placeholder:"Enter Confirm Password ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})]})},it=["id","firstName","lastName","email","middleName","fullName","phone","pic","username","isActive","isStaff","isAdmin","ldapAuth","created","updated","canEdit","canDelete","canManage"],La=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(1),[N,A]=t.useState(0),[E,Y]=t.useState(20),[p,_]=t.useState(""),[R,T]=t.useState(!1),[z,U]=t.useState(!0);ne();const[K]=n.useForm(),[B]=n.useForm();le.useBreakpoint().lg;const[D,b]=t.useState(!1),[C,o]=t.useState(!1),[y,g]=t.useState(!1),l=new URLSearchParams(window.location.search),f=l.get("status")||"0",I=l.get("role")||"user",v=q=>{m(q),g(!0)},i=q=>{m(q),b(!0)},c=async()=>{g(!1)},O=async q=>{const{data:P}=await k.custom({url:"",method:"post",meta:{operation:"updateUser",variables:{id:{value:q.id,type:"Int",required:!0},firstName:{value:q.firstName,type:"String",required:!1},middleName:{value:q.middleName,type:"String",required:!1},lastName:{value:q.lastName,type:"String",required:!1},email:{value:q.email,type:"String",required:!1},phone:{value:q.phone,type:"String",required:!1},isAdmin:{value:q.isAdmin,type:"Boolean",required:!1},isStaff:{value:q.isStaff,type:"Boolean",required:!1},ldapAuth:{value:q.ldapAuth,type:"Boolean",required:!1}},fields:["success","message",{user:it}]}});P.success?(d.success(P.message),B.resetFields(),b(!1)):d.error(P.message)},S=async q=>{h([q,...r]),B.resetFields(),o(!1)},u=async q=>{const{data:P}=await k.custom({url:"",method:"post",meta:{operation:"deleteUser",variables:{id:{value:parseInt(q.toString()),type:"Int",required:!0}},fields:["success","message"]}});P.success?(d.success(P.message),h(r.filter(ae=>ae.id!==q))):d.error(P.message)},W=async(q,P)=>{const{data:ae}=await k.custom({url:"",method:"post",meta:{operation:"blockUnblockUser",variables:{id:{value:parseInt(q.toString()),type:"Int",required:!0},block:{value:P,type:"Boolean",required:!0}},fields:["success","message",{user:it}]}});ae.success?(d.success(ae.message),h(r.map(fe=>fe.id===q?ae.user:fe))):d.error(ae.message)},G=()=>{d("Canceled")},J=[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(q,P,ae)=>e.jsx("span",{children:e.jsx("a",{children:P.fullName})})},{title:"Username",dataIndex:"username",render:(q,P,ae)=>e.jsx("span",{children:e.jsx("a",{children:P.username})})},{title:"Email",dataIndex:"email",render:(q,P,ae)=>e.jsxs("span",{children:[P.email&&e.jsx(ie,{color:"green",children:P.email}),P.phone&&e.jsx(ie,{color:"green",children:P.phone})]})},{title:"LDAP Auth",dataIndex:"created",render:(q,P,ae)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:P.ldapAuth?e.jsx(ie,{color:"green",children:"Yes"}):e.jsx(ie,{color:"red",children:"No"})})})},{title:"Date Joined",dataIndex:"created",render:(q,P,ae)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(P.created)})})})},{title:"Status",dataIndex:"isActive",render:(q,P,ae)=>e.jsx("a",{children:P!=null&&P.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(q,P,ae)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[P.ldapAuth&&e.jsx(F,{icon:e.jsx(ys,{}),disabled:!(P!=null&&P.canEdit),onClick:()=>v(P),danger:!0}),e.jsx(X,{title:"Are you sure to delete this member?",placement:"left",onConfirm:()=>u(P==null?void 0:P.id),onCancel:()=>G,okText:"Yes",cancelText:"No",disabled:!(P!=null&&P.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(P!=null&&P.canDelete),danger:!0})}),e.jsx(F,{icon:e.jsx(ve,{}),disabled:!(P!=null&&P.canEdit),onClick:()=>i(P),danger:!0}),P.isActive?e.jsx(X,{title:"Blocking User???",placement:"left",onConfirm:()=>W(P==null?void 0:P.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(is,{}),disabled:!(P!=null&&P.canManage),danger:!0})}):e.jsx(X,{title:"Unblocking User???",placement:"left",onConfirm:()=>W(P==null?void 0:P.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(rs,{}),disabled:!(P!=null&&P.canEdit),danger:!0})})]})}],Z=async(q,P="",ae=20)=>{const{data:fe}=await k.custom({url:"",method:"get",meta:{operation:"users",variables:{page:{value:q,type:"Int",required:!0},key:{value:P,type:"String",required:!1},pageSize:{value:ae,type:"Int",required:!1},where:{value:{is_staff:I==="staff",is_admin:I==="adminstrator",is_active:parseInt(f)===1},type:"JSON",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:it}]}});j(fe.page),A(fe.total),T(fe.hasNext),h(fe.results),U(!1)};return t.useEffect(()=>{Z(x)},[l.get("status"),l.get("role")]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:10,children:e.jsx(n,{layout:"vertical",form:K,onFinish:q=>{j(1),r.length=0,Z(1,q.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:14,style:{display:"flex",justifyContent:"end"},children:e.jsx(F,{size:"large",icon:e.jsx(ye,{}),onClick:()=>o(!0),danger:!0,children:"Create User"})})]}),e.jsx(ce,{loading:z,columns:J,dataSource:r,scroll:{y:window.innerHeight-310},pagination:{onChange:(q,P)=>{Y(P),Z(q,p,P)},onShowSizeChange:(q,P)=>{Y(P),Z(q,p,P)},total:N,pageSize:E,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(se,{title:"Create User Form",width:"50%",open:C,onClose:q=>o(q),children:e.jsx(Ea,{form:B,onFinish:S})}),e.jsx(se,{title:"Edit User Informations",width:"50%",visible:D,onClose:q=>b(q),children:e.jsx(Pa,{form:B,member:s,onFinish:O})}),e.jsx(se,{title:"Creating LDAP Credentials for User",width:"50vw",open:y,onClose:q=>g(q),children:e.jsx(za,{member:s,onFinish:c})})]})},Ba=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Users/Members"})]}),e.jsx(La,{height:80})]})}),Oa=a=>{const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,j]=t.useState(0),[N,A]=t.useState(20),[E,Y]=t.useState(""),[p,_]=t.useState(!1),[R,T]=t.useState(!0);ne();const[z]=n.useForm(),[U]=n.useForm();le.useBreakpoint().lg;const[B,V]=t.useState(!1),D=async l=>{const{data:f}=await k.custom({url:"",method:"post",meta:{operation:"createLoginReedemCode",variables:{phone:{value:l.phone,type:"String",required:!0},registrationNumber:{value:l.registrationNumber,type:"String",required:!1},email:{value:l.email,type:"String",required:!1}},fields:["success","message",{loginReedemCode:["id","code","phone","registrationNumber",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","isUsed","canDelete","canEdit","canManage"]}]}}).catch(()=>(d.error("Failed, creating Login Reedem Code"),{data:null})).then(I=>I);f&&(f.success?(d.success(f.message),m([f.loginReedemCode,...s]),U.resetFields()):d.error(f.message))},b=async l=>{const{data:f}=await k.custom({url:"",method:"post",meta:{operation:"resendLoginReedemCode",variables:{id:{value:l,type:"Int",required:!0}},fields:["success","message"]}}).catch(I=>(d.error("Failed, deleting Login Reedem Code"),{data:null})).then(I=>I);f&&(f.success?d.success(f.message):d.error(f.message))},C=async l=>{const{data:f}=await k.custom({url:"",method:"post",meta:{operation:"deleteLoginReedemCode",variables:{id:{value:l,type:"Int",required:!0}},fields:["success","message"]}}).catch(I=>(d.error("Failed, deleting Login Reedem Code"),{data:null})).then(I=>I);f&&(f.success?(d.success(f.message),m(s.filter(I=>I.id!==l))):d.error(f.message))},o=()=>{d("Canceled")},y=[{title:"Reedem Code",dataIndex:"code",fixed:!0,render:(l,f,I)=>e.jsx("span",{children:e.jsx("a",{children:f.code})})},{title:"User",dataIndex:"user",render:(l,f,I)=>{var v,i,c;return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:(f==null?void 0:f.user)&&e.jsxs("span",{children:["Full Name: ",(v=f==null?void 0:f.user)==null?void 0:v.firstName," ",(i=f==null?void 0:f.user)==null?void 0:i.middleName," ",(c=f==null?void 0:f.user)==null?void 0:c.lastName]})}),e.jsx("span",{children:(f==null?void 0:f.email)&&e.jsxs(ie,{children:["Email: ",f==null?void 0:f.email]})}),e.jsx("span",{children:(f==null?void 0:f.registrationNumber)&&e.jsxs(ie,{children:["Reg#: ",f==null?void 0:f.registrationNumber]})})]})}},{title:"Phone Number",dataIndex:"phone",fixed:!0,render:(l,f,I)=>e.jsx("span",{children:e.jsx("a",{children:f.phone})})},{title:"Is Used",dataIndex:"isUsed",render:(l,f,I)=>e.jsx("a",{children:f!=null&&f.isUsed?e.jsx("span",{style:{color:"green"},children:"Used"}):e.jsx("span",{style:{color:"red"},children:"Not Used"})})},{title:"Status",dataIndex:"isActive",render:(l,f,I)=>e.jsx("a",{children:f!=null&&f.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(l,f,I)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Resend this Reedem Code?",onConfirm:()=>b(f==null?void 0:f.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(f!=null&&f.canManage),overlayStyle:{zIndex:9999},children:e.jsx(F,{size:"large",icon:e.jsx(os,{}),disabled:!(f!=null&&f.canDelete)})}),e.jsx(X,{title:"Are you sure to delete this Reedem Code?",onConfirm:()=>C(f==null?void 0:f.id),onCancel:()=>o,okText:"Yes",cancelText:"No",disabled:!(f!=null&&f.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{size:"large",icon:e.jsx(oe,{}),disabled:!(f!=null&&f.canDelete)})})]})}],g=async(l,f="",I=20)=>{const{data:v}=await k.custom({url:"",method:"get",meta:{operation:"loginReedems",variables:{page:{value:l,type:"Int",required:!0},key:{value:f,type:"String",required:!1},pageSize:{value:I,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","code","phone",{user:["id","firstName","lastName","email","middleName","fullName","pic","isActive","isStaff","isAdmin"]},"created","updated","canEdit","canDelete","canManage","isActive","isUsed"]}]}});h(v.page),j(v.total),_(v.hasNext),m(v.results),T(!1)};return t.useEffect(()=>{g(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:10,children:e.jsx(n,{layout:"vertical",form:z,onFinish:l=>{h(1),s.length=0,g(1,l.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:14,style:{display:"flex",justifyContent:"end"},children:e.jsx(F,{icon:e.jsx(Ut,{}),size:"large",onClick:()=>V(!0),children:"Reedem"})})]}),e.jsx(ce,{loading:R,columns:y,dataSource:s,scroll:{x:!0},pagination:{onChange:(l,f)=>{A(f),g(l,E,f)},total:x,pageSize:N,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(se,{title:"Creating Reedem Code",open:B,onClose:l=>V(l),width:"30vw",children:e.jsxs(e.Fragment,{children:[e.jsxs(n,{layout:"vertical",form:U,onFinish:l=>{D(l)},children:[e.jsx(n.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,type:"string",message:"Please input Phone Number"}],children:e.jsx(L,{size:"large",placeholder:"Phone Number ...",prefix:e.jsx(ls,{}),autoComplete:"off"})}),e.jsx(n.Item,{name:"email",label:"Email Address",children:e.jsx(L,{size:"large",placeholder:"Email Address ...",prefix:e.jsx(cs,{}),autoComplete:"off",allowClear:!0})}),e.jsx(n.Item,{name:"registrationNumber",label:"Registration Number",children:e.jsx(L,{size:"large",placeholder:"Registration Number ...",prefix:e.jsx(ds,{}),autoComplete:"off",allowClear:!0})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"end"},children:e.jsx(F,{size:"large",onClick:()=>U.submit(),children:"Reedem"})})]})})]})},Ra=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Login Reedems"})]}),e.jsx(Oa,{height:80})]})}),_a=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(1),[N,A]=t.useState(0),[E,Y]=t.useState(20),[p,_]=t.useState(""),[R,T]=t.useState(!1),[z,U]=t.useState(!0);ne();const[K]=n.useForm(),[B]=n.useForm(),D=!le.useBreakpoint().lg,[b,C]=t.useState(!1),o=i=>{m(i),C(!0)},y=()=>{C(!1)},g=async i=>{const{data:c}=await k.custom({url:"",method:"post",meta:{operation:"updateWard",variables:{id:{value:i.id,type:"Int",required:!0},name:{value:i.name,type:"String",required:!0},isActive:{value:i.isActive,type:"Boolean",required:!0}},fields:["success","message",{ward:["id","name",{district:["id","name",{region:["id","name"]}]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}});c.success?(d.success(c.message),B.resetFields(),C(!1),h(r.map(O=>O.id===c.ward.id?c.ward:O))):d.error(c.message)},l=async i=>{const{data:c}=await k.custom({url:"",method:"post",meta:{operation:"deleteWard",variables:{id:{value:parseInt(i.toString()),type:"Int",required:!0}},fields:["success","message"]}});c.success?(d.success(c.message),h(r.filter(O=>O.id!==i))):d.error(c.message)},f=()=>{d("Canceled")},I=[{title:"Name",dataIndex:"name",fixed:!0,render:(i,c,O)=>e.jsx("span",{children:e.jsx("a",{children:c.name})})},{title:"District",dataIndex:"district",fixed:!0,render:(i,c,O)=>e.jsx("span",{children:e.jsx("a",{children:c.district.name})})},{title:"Region",dataIndex:"region",fixed:!0,render:(i,c,O)=>e.jsx("span",{children:e.jsx("a",{children:c.district.region.name})})},{title:"Created",dataIndex:"created",render:(i,c,O)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(c.created)})})})},{title:"Status",dataIndex:"isActive",render:(i,c,O)=>e.jsx("a",{children:c!=null&&c.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(i,c,O)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this Ward?",onConfirm:()=>l(c==null?void 0:c.id),onCancel:()=>f,okText:"Yes",cancelText:"No",disabled:!(c!=null&&c.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(c!=null&&c.canDelete)})}),e.jsx(je,{title:"Edit "+(c==null?void 0:c.name)+" Ward",color:"green",children:e.jsx(F,{icon:e.jsx(ve,{}),disabled:!(c!=null&&c.canEdit),onClick:()=>o(c)})})]})}],v=async(i,c="",O=20)=>{const{data:S}=await k.custom({url:"",method:"get",meta:{operation:"wards",variables:{page:{value:i,type:"Int",required:!0},key:{value:c,type:"String",required:!1},pageSize:{value:O,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name",{district:["id","name",{region:["id","name"]}]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});j(S.page),A(S.total),T(S.hasNext),h(S.results),U(!1)};return t.useEffect(()=>{v(x)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(M,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:K,onFinish:i=>{j(1),r.length=0,v(1,i.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{children:e.jsx(ce,{loading:z,columns:I,dataSource:r,scroll:{y:window.innerHeight-310},pagination:{onChange:(i,c)=>{Y(c),v(i,p,c)},onShowSizeChange:(i,c)=>{Y(c),v(1,p,c)},showSizeChanger:!0,total:N,pageSize:E,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Edit Ward Informations",width:"30vw",open:b,onCancel:y,children:e.jsx(Qt,{form:B,ward:s,onFinish:g})})]})},Ua=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Wards"})]}),e.jsx(_a,{height:80})]})}),Ka=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,j]=t.useState(0),[N,A]=t.useState(20),[E,Y]=t.useState(""),[p,_]=t.useState(!1),[R,T]=t.useState(!0);ne();const[z]=n.useForm();n.useForm();const K=!le.useBreakpoint().lg,B=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(b,C,o)=>e.jsxs(ke,{direction:"vertical",children:[e.jsx("span",{children:C.fullName}),e.jsx("span",{children:C.email})]})},{title:"",dataIndex:"action",render:(b,C,o)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Add"}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:5},children:C.fullName}),e.jsx("span",{style:{marginLeft:5},children:"As Private Tutor?"})]}),onConfirm:()=>V(C.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(C!=null&&C.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(ye,{}),disabled:!(C!=null&&C.canDelete)})})})}],V=async b=>{const{data:C}=await k.custom({url:"",method:"post",meta:{operation:"addPrivateTutor",variables:{userId:{value:parseInt(b.toString()),type:"Int",required:!0}},fields:["success","message",{privateTutor:["id",{user:["id","firstName","middleName","lastName","fullName","email","isActive","created","updated","canEdit","canDelete","canManage"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(o=>(d.error("Error occured while Adding Private Tutor"),{data:null})).then(o=>o);C&&(C.success?(d.success(C.message),a.onAdd(C.privateTutor)):d.error(C.message))},D=async(b,C="",o=20)=>{T(!0);const{data:y}=await k.custom({url:"",method:"get",meta:{operation:"notPrivateTutors",variables:{page:{value:b,type:"Int",required:!0},key:{value:C,type:"String",required:!1},pageSize:{value:o,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","firstName","middleName","lastName","fullName","email","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(g=>(d.error("Error occured while fetching examinations types"),{data:null})).then(g=>g);y&&(h(y.page),j(y.total),_(y.hasNext),m([...y.results])),T(!1)};return t.useEffect(()=>{D(r)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(M,{span:24,children:e.jsx(n,{layout:"vertical",form:z,onFinish:b=>{h(1),s.length=0,D(1,b.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ce,{loading:R,columns:B,dataSource:s,pagination:{onChange:(b,C)=>{A(C),D(b,E,C)},total:x,pageSize:N,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0,y:"68vh"}})]})},Va=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,j]=t.useState(0),[N,A]=t.useState(20),[E,Y]=t.useState(""),[p,_]=t.useState(!1),[R,T]=t.useState(!0);ne();const[z]=n.useForm();n.useForm(),le.useBreakpoint().lg;const[K,B]=t.useState(!1),V=async g=>{m([g,...s])},D=async g=>{const{data:l}=await k.custom({url:"",method:"post",meta:{operation:"deletePrivateTutor",variables:{privateTutorId:{value:parseInt(g.toString()),type:"Int",required:!0}},fields:["success","message"]}});l.success?(d.success(l.message),m(s.filter(f=>f.id!==g))):d.error(l.message)},b=()=>{d("Canceled")},C=async(g,l)=>{const{data:f}=await k.custom({url:"",method:"post",meta:{operation:"blockUnblockPrivateTutor",variables:{privateTutorId:{value:parseInt(g.toString()),type:"Int",required:!0},blocked:{value:l,type:"Boolean",required:!0}},fields:["success","message",{privateTutor:["id",{user:["id","firstName","middleName","lastName","fullName","email","isActive","created","updated","canEdit","canDelete","canManage"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(l?d.error("Error occured while Unblocking Private Tutor"):d.error("Error occured while Blocking Private Tutor"),{data:null})).then(I=>I);f&&(f.success?(d.success(f.message),m(s.map(I=>I.id===g?f.privateTutor:I))):d.error(f.message))},o=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(g,l,f)=>e.jsx("span",{children:e.jsx("a",{children:l.user.fullName})})},{title:"Email",dataIndex:"email",fixed:!0,render:(g,l,f)=>e.jsx("span",{children:l.user.email})},{title:"Created",dataIndex:"created",render:(g,l,f)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(l.created)})})})},{title:"Status",dataIndex:"isActive",render:(g,l,f)=>e.jsx("span",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(g,l,f)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[l.isActive?e.jsx(X,{title:"Are you sure to Block this Private Tutor?",onConfirm:()=>C(l==null?void 0:l.id,!1),onCancel:()=>b,okText:"Block",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{style:{marginRight:3},icon:e.jsx(st,{}),disabled:!(l!=null&&l.canDelete),danger:!0})}):e.jsx(X,{title:"Are you sure to Unblock this Private Tutor?",onConfirm:()=>C(l==null?void 0:l.id,!0),onCancel:()=>b,okText:"Unblock",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{style:{marginRight:3},icon:e.jsx(at,{}),disabled:!(l!=null&&l.canDelete),danger:!0})}),e.jsx(X,{title:"Are you sure to delete this Private Tutor?",onConfirm:()=>D(l==null?void 0:l.id),onCancel:()=>b,okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{style:{marginRight:3},icon:e.jsx(oe,{}),disabled:!(l!=null&&l.canDelete),danger:!0})})]})}],y=async(g,l="",f=20)=>{const{data:I}=await k.custom({url:"",method:"get",meta:{operation:"privateTutors",variables:{page:{value:g,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:f,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{user:["id","firstName","middleName","lastName","fullName","email"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(v=>(d.error("Error occured while fetching examinations types"),{data:null})).then(v=>v);I&&(h(I.page),j(I.total),_(I.hasNext),m([...I.results])),T(!1)};return t.useEffect(()=>{y(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:8,children:e.jsx(n,{layout:"vertical",form:z,onFinish:g=>{h(1),s.length=0,y(1,g.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{size:"large",icon:e.jsx(ye,{}),onClick:()=>B(!0),danger:!0,children:"Add Tutor"})})]}),e.jsx(ce,{loading:R,columns:o,dataSource:s,pagination:{onChange:(g,l)=>{A(l),y(g,E,l)},onShowSizeChange:(g,l)=>{A(l),y(g,E,l)},total:x,pageSize:N,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:window.innerHeight-310}}),e.jsx(He,{title:"Adding Private Tutors",anchor:"right",width:"40vw",onClose:g=>B(g),open:K,children:e.jsx(Ka,{onAdd:V,randKey:Math.random()})})]})},Ha=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Private Tutors"})]}),e.jsx(Va,{height:80})]})}),Ya=a=>{const s=async m=>{const{data:r}=await k.custom({url:"",method:"post",meta:{operation:"createPaymentPackage",variables:{name:{value:m.name,type:"String",required:!0},code:{value:m.code,type:"String",required:!0},amount:{value:m.amount,type:"Float",required:!0},description:{value:m.description,type:"String",required:!1},vatIncluded:{value:m.vat_included,type:"Boolean",required:!0}},fields:["success","message",{paymentPackage:["id","name","code","description","amount","isActive","vatIncluded","created","updated","canEdit","canDelete","canManage"]}]}}).catch(h=>(d.error("Error in Creating Payment Package"),{data:null})).then(h=>h);r&&(r.success?(d.success("Payment Package Created Successfully"),a.onFinish(r.paymentPackage)):d.error(r.message))};return t.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:m=>{s(m)},requiredMark:!0,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code ..."}],children:e.jsx(L,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(n.Item,{name:"amount",label:"Amount",initialValue:0,rules:[{required:!0,type:"number",min:0}],children:e.jsx(Be,{value:0,style:{width:"100%"},size:"large"})}),e.jsx(n.Item,{name:"vat_included",valuePropName:"checked",initialValue:!0,rules:[{required:!0,type:"boolean",message:"Please Check ..."}],children:e.jsx(he,{children:"VAT Included"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{size:"large",htmlType:"submit",icon:e.jsx(_t,{}),danger:!0,children:"Save"})})]})})},Wa=a=>{const s=async m=>{const{data:r}=await k.custom({url:"",method:"post",meta:{operation:"updatePaymentPackage",variables:{paymentPackageId:{value:m.payment_package_id,type:"Int",required:!0},name:{value:m.name,type:"String",required:!0},code:{value:m.code,type:"String",required:!0},amount:{value:m.amount,type:"Float",required:!0},description:{value:m.description,type:"String",required:!1},vatIncluded:{value:m.vat_included,type:"Boolean",required:!0}},fields:["success","message",{paymentPackage:["id","name","code","description","vatIncluded","amount","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(h=>(d.error("Error in Updating Payment Package"),{data:null})).then(h=>h);r&&(r.success?(d.success("Payment Package Created Successfully"),a.onFinish(r.paymentPackage)):d.error(r.message))};return t.useEffect(()=>{a.paymentPackage&&a.form.setFieldsValue({name:a.paymentPackage.name,code:a.paymentPackage.code,amount:a.paymentPackage.amount,description:a.paymentPackage.description,vat_included:a.paymentPackage.vatIncluded})},[a.randKey]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:m=>{m.payment_package_id=a.paymentPackage.id,s(m)},requiredMark:!0,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code ..."}],children:e.jsx(L,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(n.Item,{name:"amount",label:"Amount",initialValue:0,rules:[{required:!0,type:"number",min:0}],children:e.jsx(Be,{value:0,style:{width:"100%"},size:"large"})}),e.jsx(n.Item,{name:"vat_included",valuePropName:"checked",initialValue:!0,rules:[{required:!0,type:"boolean",message:"Please Check ..."}],children:e.jsx(he,{children:"VAT Included"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Update"})})]})})},Jt=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(1),[N,A]=t.useState(0),[E,Y]=t.useState(20),[p,_]=t.useState(""),[R,T]=t.useState(!1),[z,U]=t.useState(!0);ne();const[K]=n.useForm(),[B]=n.useForm(),[V]=n.useForm();le.useBreakpoint().lg;const[b,C]=t.useState(!1),[o,y]=t.useState(!1),g=S=>{m(S),y(!0)},l=async S=>{h(r.map(u=>u.id===S.id?S:u)),B.resetFields(),y(!1)},f=async S=>{h([S,...r]),V.resetFields(),C(!1)},I=async S=>{const{data:u}=await k.custom({url:"",method:"post",meta:{operation:"deletePaymentPackage",variables:{paymentPackageId:{value:parseInt(S.toString()),type:"Int",required:!0}},fields:["success","message"]}});u.success?(d.success(u.message),h(r.filter(W=>W.id!==S))):d.error(u.message)},v=()=>{d("Canceled")},i=async(S,u)=>{const{data:W}=await k.custom({url:"",method:"post",meta:{operation:"blockUnblockPaymentPackage",variables:{paymentPackageId:{value:parseInt(S.toString()),type:"Int",required:!0},blocked:{value:u,type:"Boolean",required:!0}},fields:["success","message",{paymentPackage:["id","name","code","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(u?d.error("Error occured while Unblocking Payment Package"):d.error("Error occured while Blocking Payment Package"),{data:null})).then(G=>G);W&&(W.success?(d.success(W.message),h(r.map(G=>G.id===S?W.paymentPackage:G))):d.error(W.message))},c=[{title:"Name",dataIndex:"name",fixed:!0,render:(S,u,W)=>e.jsx("span",{children:e.jsx("a",{children:u.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(S,u,W)=>e.jsx("span",{children:u.code})},{title:"Amount",dataIndex:"amount",fixed:!0,render:(S,u,W)=>e.jsxs("span",{children:[u.amount,e.jsx("span",{style:{marginLeft:10},children:u.vatIncluded?e.jsx(ie,{color:"green",children:"+VAT"}):e.jsx(ie,{color:"red",children:"1VAT"})})]})},{title:"Created",dataIndex:"created",render:(S,u,W)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(u.created)})})})},{title:"Status",dataIndex:"isActive",render:(S,u,W)=>e.jsx("span",{children:u!=null&&u.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(S,u,W)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[u.isActive?e.jsx(X,{title:"Are you sure to Block this Payment Package?",onConfirm:()=>i(u==null?void 0:u.id,!1),onCancel:()=>v,okText:"Block",cancelText:"No",disabled:!(u!=null&&u.canManage),overlayStyle:{zIndex:9999},children:e.jsx(F,{style:{marginRight:3},icon:e.jsx(st,{}),disabled:!(u!=null&&u.canManage),danger:!0})}):e.jsx(X,{title:"Are you sure to Unblock this Payment Package?",onConfirm:()=>i(u==null?void 0:u.id,!0),onCancel:()=>v,okText:"Unblock",cancelText:"No",disabled:!(u!=null&&u.canManage),overlayStyle:{zIndex:9999},children:e.jsx(F,{style:{marginRight:3},icon:e.jsx(at,{}),disabled:!(u!=null&&u.canManage),danger:!0})}),e.jsx(X,{title:"Are you sure to delete this Payment Package?",onConfirm:()=>I(u==null?void 0:u.id),onCancel:()=>v,okText:"Yes",cancelText:"No",disabled:!(u!=null&&u.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{style:{marginRight:3},icon:e.jsx(oe,{}),disabled:!(u!=null&&u.canDelete),danger:!0})}),e.jsx(F,{style:{marginRight:3},icon:e.jsx(ve,{}),disabled:!(u!=null&&u.canEdit),onClick:()=>g(u),danger:!0})]})}],O=async(S,u="",W=20)=>{const{data:G}=await k.custom({url:"",method:"get",meta:{operation:"paymentPackages",variables:{page:{value:S,type:"Int",required:!0},key:{value:u,type:"String",required:!1},pageSize:{value:W,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","code","amount","vatIncluded","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(J=>(d.error("Error occured while fetching Payment Packages"),{data:null})).then(J=>J);G&&(j(G.page),A(G.total),T(G.hasNext),h([...G.results])),U(!1)};return t.useEffect(()=>{O(x)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:8,children:e.jsx(n,{layout:"vertical",form:K,onFinish:S=>{j(1),r.length=0,O(1,S.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{size:"large",icon:e.jsx(ye,{}),onClick:()=>C(!0),danger:!0,children:"Add Payment Package"})})]}),e.jsx(ce,{loading:z,columns:c,dataSource:r,pagination:{onChange:(S,u)=>{Y(u),O(S,p,u)},onShowSizeChange:(S,u)=>{Y(u),O(S,p,u)},total:N,pageSize:E,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:window.innerHeight-310}}),e.jsx(se,{title:"Adding Payment Package",width:"40vw",onClose:()=>C(!1),onOk:()=>C(!1),open:b,destroyOnClose:!0,children:e.jsx(Ya,{form:V,onFinish:f})}),e.jsx(se,{title:"Edit Payment Package",width:"40vw",onClose:S=>y(S),open:o,children:e.jsx(Wa,{form:B,onFinish:l,paymentPackage:s,randKey:Math.random()})})]})},wa=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Payment Packages"})]}),e.jsx(Jt,{height:80})]})}),Ga=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,j]=t.useState(0),[N,A]=t.useState(20),[E,Y]=t.useState(""),[p,_]=t.useState(!1),[R,T]=t.useState(!0);ne();const[z]=n.useForm(),K=!le.useBreakpoint().lg,B=async C=>{const{data:o}=await k.custom({url:"",method:"post",meta:{operation:"deleteOrder",variables:{orderId:{value:parseInt(C.toString()),type:"Int",required:!0}},fields:["success","message"]}});o.success?(d.success(o.message),m(s.filter(y=>y.id!==C))):d.error(o.message)},V=async(C,o)=>{const{data:y}=await k.custom({url:"",method:"post",meta:{operation:"blockUnblockOrder",variables:{orderId:{value:parseInt(C.toString()),type:"Int",required:!0},blocked:{value:o,type:"Boolean",required:!0}},fields:["success","message",{order:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(g=>(o?d.error("Error occured while Unblocking Payment Package"):d.error("Error occured while Blocking Payment Package"),{data:null})).then(g=>g);y&&(y.success?(d.success(y.message),m(s.map(g=>g.id===C?y.order:g))):d.error(y.message))},D=[{title:"Order#",dataIndex:"order_number",fixed:!0,render:(C,o,y)=>e.jsx("span",{children:e.jsx("a",{children:o.orderNumber})})},{title:"Client",dataIndex:"client",fixed:!0,render:(C,o,y)=>e.jsx("span",{children:o.user.fullName})},{title:"Amount",dataIndex:"amount",fixed:!0,render:(C,o,y)=>e.jsxs("span",{children:[o.amount,e.jsx("span",{style:{marginLeft:10},children:o.vatIncluded?e.jsx(ie,{color:"green",children:"+VAT"}):e.jsx(ie,{color:"red",children:"1VAT"})})]})},{title:"Created",dataIndex:"created",render:(C,o,y)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(o.created)})})})},{title:"Status",dataIndex:"isActive",render:(C,o,y)=>e.jsx("span",{children:o!=null&&o.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(C,o,y)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[o.isActive?e.jsx(X,{title:"Are you sure to Block this Order?",onConfirm:()=>V(o==null?void 0:o.id,!1),onCancel:()=>{},okText:"Block",cancelText:"No",disabled:!(o!=null&&o.canManage),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(st,{}),disabled:!(o!=null&&o.canManage)})}):e.jsx(X,{title:"Are you sure to Unblock this Order?",onConfirm:()=>V(o==null?void 0:o.id,!0),onCancel:()=>{},okText:"Unblock",cancelText:"No",disabled:!(o!=null&&o.canManage),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(at,{}),disabled:!(o!=null&&o.canManage)})}),e.jsx(X,{title:"Are you sure to delete this Order?",onConfirm:()=>B(o==null?void 0:o.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(o!=null&&o.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(o!=null&&o.canDelete)})})]})}],b=async(C,o="",y=20)=>{const{data:g}=await k.custom({url:"",method:"get",meta:{operation:"orders",variables:{page:{value:C,type:"Int",required:!0},key:{value:o,type:"String",required:!1},pageSize:{value:y,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(l=>(d.error("Error occured while fetching Orders"),{data:null})).then(l=>l);g&&(h(g.page),j(g.total),_(g.hasNext),m([...g.results])),T(!1)};return t.useEffect(()=>{b(r)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(M,{span:K?24:20,children:e.jsx(n,{layout:"vertical",form:z,onFinish:C=>{h(1),s.length=0,b(1,C.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ce,{loading:R,columns:D,dataSource:s,pagination:{onChange:(C,o)=>{A(o),b(C,E,o)},total:x,pageSize:N,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})]})},Qa=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Orders"})]}),e.jsx(Ga,{height:80})]})}),Ja=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,j]=t.useState(0),[N,A]=t.useState(20),[E,Y]=t.useState(""),[p,_]=t.useState(!1),[R,T]=t.useState(!0);ne();const[z]=n.useForm(),K=!le.useBreakpoint().lg,B=async C=>{const{data:o}=await k.custom({url:"",method:"post",meta:{operation:"deleteOrderPayment",variables:{orderPaymentId:{value:parseInt(C.toString()),type:"Int",required:!0}},fields:["success","message"]}});o.success?(d.success(o.message),m(s.filter(y=>y.id!==C))):d.error(o.message)},V=async(C,o)=>{const{data:y}=await k.custom({url:"",method:"post",meta:{operation:"blockUnblockOrderPayment",variables:{orderPaymentId:{value:parseInt(C.toString()),type:"Int",required:!0},blocked:{value:o,type:"Boolean",required:!0}},fields:["success","message",{orderPayment:["id","amount","paymentStatus","paymentDate","isActive","created","updated","canEdit","canDelete","canManage",{order:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}]}}).catch(g=>(o?d.error("Error occured while Unblocking Order Payment"):d.error("Error occured while Blocking Order Payment"),{data:null})).then(g=>g);y&&(y.success?(d.success(y.message),m(s.map(g=>g.id===C?y.order:g))):d.error(y.message))},D=[{title:"Order#",dataIndex:"order_number",fixed:!0,render:(C,o,y)=>e.jsx("span",{children:e.jsx("a",{children:o.orderNumber})})},{title:"Client",dataIndex:"client",fixed:!0,render:(C,o,y)=>e.jsx("span",{children:o.user.fullName})},{title:"Order Amount",dataIndex:"amount",fixed:!0,render:(C,o,y)=>e.jsxs("span",{children:[o.order.amount,e.jsx("span",{style:{marginLeft:10},children:o.vatIncluded?e.jsx(ie,{color:"green",children:"+VAT"}):e.jsx(ie,{color:"red",children:"1VAT"})})]})},{title:"Paid Amount",dataIndex:"paidAmount",fixed:!0,render:(C,o,y)=>e.jsx("span",{children:o.amount})},{title:"Receipt#",dataIndex:"receipt",fixed:!0,render:(C,o,y)=>e.jsx("span",{children:o.receiptNumber})},{title:"Payment Date",dataIndex:"paymentDate",render:(C,o,y)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(o.paymentDate)})})})},{title:"Status",dataIndex:"isActive",render:(C,o,y)=>e.jsx("span",{children:o!=null&&o.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(C,o,y)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[o.isActive?e.jsx(X,{title:"Are you sure to Block this Order?",onConfirm:()=>V(o==null?void 0:o.id,!1),onCancel:()=>{},okText:"Block",cancelText:"No",disabled:!(o!=null&&o.canManage),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(st,{}),disabled:!(o!=null&&o.canManage)})}):e.jsx(X,{title:"Are you sure to Unblock this Order?",onConfirm:()=>V(o==null?void 0:o.id,!0),onCancel:()=>{},okText:"Unblock",cancelText:"No",disabled:!(o!=null&&o.canManage),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(at,{}),disabled:!(o!=null&&o.canManage)})}),e.jsx(X,{title:"Are you sure to delete this Order?",onConfirm:()=>B(o==null?void 0:o.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(o!=null&&o.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(o!=null&&o.canDelete)})})]})}],b=async(C,o="",y=20)=>{const{data:g}=await k.custom({url:"",method:"get",meta:{operation:"ordersPayments",variables:{page:{value:C,type:"Int",required:!0},key:{value:o,type:"String",required:!1},pageSize:{value:y,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","amount","paymentStatus","paymentDate","isActive","created","updated","canEdit","canDelete","canManage",{order:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}]}}).catch(l=>(d.error("Error occured while fetching Orders Payments"),{data:null})).then(l=>l);g&&(h(g.page),j(g.total),_(g.hasNext),m([...g.results])),T(!1)};return t.useEffect(()=>{b(r)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(M,{span:K?24:20,children:e.jsx(n,{layout:"vertical",form:z,onFinish:C=>{h(1),s.length=0,b(1,C.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ce,{loading:R,columns:D,dataSource:s,pagination:{onChange:(C,o)=>{A(o),b(C,E,o)},total:x,pageSize:N,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})]})},$a=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Orders Payments"})]}),e.jsx(Ja,{height:80})]})}),Za=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Order Payments"})]}),e.jsx(Jt,{height:80})]})}),Xa=a=>{const[s,m]=t.useState(a.carrier.allowPayment),[r,h]=t.useState(a.carrier.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.carrier.name,allowPayment:a.carrier.allowPayment,isActive:a.carrier.isActive})},[a.form,a.carrier]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:x=>{x.isActive=r,x.allowPayment=s,x.id=parseInt(a.carrier.id),a.onFinish(x)},requiredMark:!1,autoComplete:"off",children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ...",autoComplete:"off"})}),e.jsx(n.Item,{name:"allowPayment",children:e.jsx(he,{checked:s,onChange:()=>m(!s),children:"Allow Payment"})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(he,{checked:r,onChange:()=>h(!r),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},en=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(1),[N,A]=t.useState(0),[E,Y]=t.useState(20),[p,_]=t.useState(""),[R,T]=t.useState(!1),[z,U]=t.useState(!0);ne();const[K]=n.useForm(),[B]=n.useForm(),D=!le.useBreakpoint().lg,[b,C]=t.useState(!1),o=i=>{m(i),C(!0)},y=async i=>{const{data:c}=await k.custom({url:"",method:"post",meta:{operation:"updateTelecomCarrier",variables:{id:{value:i.id,type:"Int",required:!0},name:{value:i.name,type:"String",required:!0},allowPayment:{value:i.allowPayment,type:"Boolean",required:!0},isActive:{value:i.isActive,type:"Boolean",required:!0}},fields:["success","message",{telecomCarrier:["id","name","allowPayment","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(O=>({data:null})).then(O=>O);c&&(c.success?(d.success(c.message),B.resetFields(),C(!1),h(r.map(O=>parseInt(O.id.toString())===parseInt(c.telecomCarrier.id.toString())?c.telecomCarrier:O))):d.error(c.message))},g=async()=>{const{data:i}=await k.custom({url:"",method:"post",meta:{operation:"syncTelecomCarriers",variables:{},fields:["success","message"]}});i.success?(d.success(i.message),v(1,"",20)):d.error(i.message)},l=async i=>{const{data:c}=await k.custom({url:"",method:"post",meta:{operation:"deleteTelecomCarrier",variables:{id:{value:i,type:"Int",required:!0}},fields:["success","message"]}});c.success?(d.success(c.message),h(r.filter(O=>O.id!==i))):c.message},f=()=>{d("Canceled")},I=[{title:"Name",dataIndex:"name",fixed:!0,render:(i,c,O)=>e.jsx("span",{children:e.jsx("a",{children:c.name})})},{title:"Allow Payment",dataIndex:"allowPayment",fixed:!0,render:(i,c,O)=>e.jsx("span",{children:c.allowPayment?e.jsx(ie,{color:"green",children:"Yes"}):e.jsx(ie,{color:"red",children:"NO"})})},{title:"Created",dataIndex:"created",render:(i,c,O)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(c.created)})})})},{title:"Status",dataIndex:"isActive",render:(i,c,O)=>e.jsx("a",{children:c!=null&&c.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(i,c,O)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this Telecom Carrier?",onConfirm:()=>l(c==null?void 0:c.id),onCancel:()=>f,okText:"Yes",cancelText:"No",disabled:!(c!=null&&c.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(c!=null&&c.canDelete)})}),e.jsx(F,{disabled:!(c!=null&&c.canEdit),onClick:()=>o(c),icon:e.jsx(ve,{})})]})}],v=async(i,c="",O=20)=>{const{data:S}=await k.custom({url:"",method:"get",meta:{operation:"telecomCarriers",variables:{page:{value:i,type:"Int",required:!0},key:{value:c,type:"String",required:!1},pageSize:{value:O,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","allowPayment","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(u=>(d.error(u.message),{data:null})).then(u=>u);S&&(j(S.page),A(S.total),T(S.hasNext),h(S.results)),U(!1)};return t.useEffect(()=>{v(x,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:D?24:20,children:e.jsx(n,{layout:"vertical",form:K,onFinish:i=>{j(1),r.length=0,v(1,i.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:D?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>g(),children:"Sync Mtaa"})})]}),e.jsx("div",{children:e.jsx(ce,{loading:z,columns:I,dataSource:r,scroll:{x:!0},pagination:{onChange:(i,c)=>{Y(c),v(i,p,c)},total:N,pageSize:E,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Edit Telecom Carrier Informations",width:"20%",open:b,onClose:i=>C(i),children:e.jsx(Xa,{form:B,carrier:s,onFinish:y})})]})},tn=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Telecom Carriers"})]}),e.jsx(en,{height:80})]})}),sn=a=>{const[s,m]=t.useState([]),[r,h]=t.useState(!0),[x,j]=t.useState(1);t.useState(25);const[N,A]=t.useState(""),[E]=n.useForm();t.useState(0),t.useState(0);const[Y,p]=t.useState(!0);ne();const _=async T=>{var U,K;const{data:z}=await k.custom({url:"",method:"post",meta:{operation:"addCombinationSubject",variables:{combinationId:{value:parseInt((U=a.combination)!=null&&U.id?(K=a.combination)==null?void 0:K.id.toString():"0"),type:"Int",required:!0},subjectId:{value:parseInt(T?T.toString():"0"),type:"Int",required:!0}},fields:["success","message",{combination:["id","name","code","description",{subjects:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});z.success?(d.success(z.message),s.length=0,m([]),R(1,N),a.onAdd(z.combination)):d.error(z.message)},R=async(T,z="")=>{var K,B;const{data:U}=await k.custom({url:"",method:"get",meta:{operation:"combinationSubjectsToAdd",variables:{combinationId:{value:parseInt((K=a.combination)!=null&&K.id?(B=a.combination)==null?void 0:B.id.toString():"0"),type:"Int",required:!0},page:{value:T,type:"Int",required:!0},key:{value:z,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description",{schoolType:["id","name"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}});U.hasNext&&(p(U.hasNext),j(U.page+1),m([...s,...U.results])),h(!1)};return t.useEffect(()=>{s.length=0,m([]),R(1)},[a.randKey,a.combination]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsx(M,{span:24,children:e.jsx(n,{layout:"vertical",form:E,onFinish:T=>{A(T.key),s.length=0,m([]),R(1,T.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search Adminstrator(s)...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(Pe,{spinning:r,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"70vh",overflowY:"auto"},children:e.jsx(Fe,{itemLayout:"horizontal",dataSource:s,renderItem:T=>{var z;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Fe.Item,{style:{margin:0,padding:0},actions:[e.jsx(X,{placement:"topLeft",title:"Adding "+T.name+" to "+((z=a.combination)==null?void 0:z.name)+"?",onConfirm:()=>_(T.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(ye,{})})})],children:e.jsx(Fe.Item.Meta,{title:e.jsxs("a",{children:[T.name,e.jsx(ie,{color:"green",style:{marginLeft:10},children:T.schoolType.name})]})})},"file-"+T.id)})}})}),Y&&e.jsx("div",{style:{position:"absolute",bottom:0,width:"100%",textAlign:"center"},children:e.jsx(F,{type:"primary",onClick:()=>{R(x,N)},children:"Load More"})})]})]})},an=a=>{const[s,m]=t.useState([]),[r,h]=t.useState(!0),[x,j]=t.useState(1);t.useState(25);const[N,A]=t.useState(""),[E]=n.useForm();t.useState(0),t.useState(0);const[Y,p]=t.useState(!0);ne();const _=async T=>{const{data:z}=await k.custom({url:"",method:"post",meta:{operation:"removeCombinationSubject",variables:{combinationSubjectId:{value:T,type:"Int",required:!0}},fields:["success","message",{combination:["id","name","code","description",{subjects:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});z.success?(d.success(z.message),s.length=0,m([]),R(1,N),a.onAdd(z.combination)):d.error(z.message)},R=async(T,z="")=>{var K,B;const{data:U}=await k.custom({url:"",method:"get",meta:{operation:"combinationSubjects",variables:{combinationId:{value:parseInt((K=a.combination)!=null&&K.id?(B=a.combination)==null?void 0:B.id.toString():"0"),type:"Int",required:!0},page:{value:T,type:"Int",required:!0},key:{value:z,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{combination:["id","name","code"]},{subject:["id","name",{schoolType:["id","name"]}]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}});p(U.hasNext),j(U.page+1),m([...s,...U.results]),h(!1)};return t.useEffect(()=>{s.length=0,m([]),R(1)},[a.randKey,a.combination]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsx(M,{span:24,children:e.jsx(n,{layout:"vertical",form:E,onFinish:T=>{A(T.key),s.length=0,m([]),R(1,T.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search Adminstrator(s)...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(Pe,{spinning:r,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"60vh",overflowY:"auto"},children:e.jsx(Fe,{itemLayout:"horizontal",dataSource:s,renderItem:T=>{var z;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Fe.Item,{style:{margin:0,padding:0},actions:[e.jsx(X,{placement:"topLeft",title:"Removing "+T.subject.name+" to "+((z=a.combination)==null?void 0:z.name)+"?",onConfirm:()=>_(T.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{})})})],children:e.jsx(Fe.Item.Meta,{title:e.jsxs("a",{children:[T.subject.name,e.jsx(ie,{color:"green",style:{marginLeft:10},children:T.subject.schoolType.name})]})})},"file-"+T.id)})}})}),Y&&e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:10},children:e.jsx(F,{type:"primary",onClick:()=>{R(x,N)},children:"Load More"})})]})]})},nn=a=>{const[s,m]=t.useState(a.combination.isActive),[r]=n.useForm(),h=async x=>{const{data:j}=await k.custom({url:"",method:"post",meta:{operation:"updateCombination",variables:{combinationId:{value:x.combination_id,type:"Int",required:!0},name:{value:x.name,type:"String",required:!0},code:{value:x.code,type:"String",required:!0},description:{value:x.description,type:"String",required:!1},isActive:{value:s,type:"Boolean",required:!1}},fields:["success","message",{combination:["id","name","code","description",{subjects:["id","name"]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}});j.success?(d.success(j.message),r.resetFields(),a.onFinish(j.combination)):d.error(j.message)};return t.useEffect(()=>{r.setFieldsValue({name:a.combination.name,code:a.combination.code,is_active:a.combination.isActive})},[a.combination]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:r,onFinish:x=>{x.is_active=s,x.combination_id=parseInt(a.combination.id.toString()),h(x)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx(L,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(n.Item,{name:"is_active",children:e.jsx(he,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},rn=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(1),[N,A]=t.useState(0),[E,Y]=t.useState(20),[p,_]=t.useState(""),[R,T]=t.useState(!1),[z,U]=t.useState(!0);ne();const[K]=n.useForm();n.useForm();const V=!le.useBreakpoint().lg,[D,b]=t.useState(!1),[C,o]=t.useState(!1),[y,g]=t.useState(!1),l=Z=>{m(Z),o(!0)},f=Z=>{m(Z),g(!0)},I=Z=>{m(Z),b(!0)},v=async Z=>{h(r.map(q=>q.id.toString()===Z.id.toString()?Z:q)),b(!1)},i=async()=>{const{data:Z}=await k.custom({url:"",method:"post",meta:{operation:"syncCombinations",variables:{},fields:["success","message"]}});Z.success?(d.success(Z.message),u(x,"",20)):d.error(Z.message)},c=async Z=>{const{data:q}=await k.custom({url:"",method:"post",meta:{operation:"deleteRegion",variables:{id:{value:Z,type:"Int",required:!0}},fields:["success","message"]}});q.success?(d.success(q.message),h(r.filter(P=>P.id!==Z))):d.error(q.message)},O=()=>{d("Canceled")},S=[{title:"Name",dataIndex:"name",fixed:!0,render:(Z,q,P)=>e.jsx("span",{children:e.jsx("a",{children:q.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(Z,q,P)=>e.jsx("span",{children:e.jsx("a",{children:q.code})})},{title:"Subjects",dataIndex:"subjects",fixed:!0,render:(Z,q,P)=>{var ae;return e.jsxs("span",{children:[q.subjects.length===0&&e.jsx(ie,{color:"red",children:"No Subjects Added"}),q.subjects.length>0&&((ae=q==null?void 0:q.subjects)==null?void 0:ae.map(fe=>e.jsx(ie,{color:"green",children:fe.name},fe.id))),e.jsx(je,{title:"Click to add more subjects",color:"green",children:e.jsx(F,{icon:e.jsx(ye,{}),onClick:()=>l(q)})}),e.jsx(je,{title:"Click to View Subjects",color:"green",children:e.jsx(F,{icon:e.jsx(tt,{}),onClick:()=>f(q)})})]})}},{title:"Created",dataIndex:"created",render:(Z,q,P)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(q.created)})})})},{title:"Status",dataIndex:"isActive",render:(Z,q,P)=>e.jsx("a",{children:q!=null&&q.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(Z,q,P)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this member?",onConfirm:()=>c(q==null?void 0:q.id),onCancel:()=>O,okText:"Yes",cancelText:"No",disabled:!(q!=null&&q.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(q!=null&&q.canDelete),danger:!0})}),e.jsx(F,{disabled:!(q!=null&&q.canEdit),onClick:()=>I(q),icon:e.jsx(ve,{}),danger:!0})]})}],u=async(Z,q="",P=20)=>{const{data:ae}=await k.custom({url:"",method:"get",meta:{operation:"combinations",variables:{page:{value:Z,type:"Int",required:!0},key:{value:q,type:"String",required:!1},pageSize:{value:P,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description",{subjects:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});j(ae.page),A(ae.total),T(ae.hasNext),h(ae.results),U(!1)},W=async Z=>{h(r.map(q=>parseInt(q.id.toString())===parseInt(Z.id.toString())?Z:q))},G=()=>e.jsx(e.Fragment,{children:e.jsx(n,{layout:"vertical",form:K,onFinish:Z=>{j(1),r.length=0,u(1,Z.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),J=()=>e.jsx(e.Fragment,{children:e.jsx(F,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>i(),children:"Sync Combinations"})});return t.useEffect(()=>{u(x,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[V&&e.jsxs(e.Fragment,{children:[e.jsx(M,{span:24,style:{display:"flex",justifyContent:"flex-end"},children:J()}),e.jsx(M,{span:24,children:G()})]}),!V&&e.jsxs(e.Fragment,{children:[e.jsx(M,{span:12,children:G()}),e.jsx(M,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:J()})]})]}),e.jsx("div",{children:e.jsx(ce,{loading:z,columns:S,dataSource:r,scroll:{x:!0},pagination:{onChange:(Z,q)=>{Y(q),u(Z,p,q)},total:N,pageSize:E,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Editting "+(s==null?void 0:s.name)+" Informations",width:V?"100vw":"40vw",open:D,onClose:Z=>b(Z),children:e.jsx(nn,{combination:s,onFinish:v})}),e.jsx(se,{title:"Adding Subjects to "+(s==null?void 0:s.name),width:V?"100vw":"40vw",destroyOnClose:!0,open:C,onClose:Z=>o(Z),children:e.jsx(sn,{combination:s,onAdd:W})}),e.jsx(se,{title:(s==null?void 0:s.name)+" Subjects",width:V?"100vw":"40vw",open:y,onClose:Z=>g(Z),children:e.jsx(an,{combination:s,onAdd:W})})]})},ln=()=>{const{data:a}=qe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/combinations",children:"Home"})}),e.jsx(H.Item,{children:"Combinations"})]}),e.jsx(rn,{height:80})]})})},{Option:cn}=Se,{TextArea:dn}=L,on=a=>Array.isArray(a)?a:a==null?void 0:a.fileList,un=a=>{const[s,m]=t.useState([]),[r]=n.useForm(),h=async()=>{const{data:j}=await k.custom({url:"",method:"get",meta:{operation:"schoolTypes",variables:{showAll:{value:!0,type:"Boolean",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});m(j.results)},x=async j=>{const{data:N}=await k.custom({url:"",method:"post",meta:{operation:"createSubject",variables:{schoolTypeId:{value:j.school_type_id,type:"Int",required:!0},name:{value:j.name,type:"String",required:!0},description:{value:j.description,type:"String",required:!1},icon:{value:j.icon,type:"Upload",required:!1}},fields:["success","message",{subject:["id","name","description",{schoolType:["id","name","code"]},"icon","isActive","created","updated","canEdit","canDelete","canManage"]}]}});N.success?(d.success(N.message),a.onFinish(N.subject),r.resetFields()):d.error(N.message)};return t.useEffect(()=>{h()},[a.randKey]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:r,onFinish:j=>{x(j)},children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{label:"School Type",name:"school_type_id",rules:[{required:!0,type:"number",message:"Please choose School Type"}],children:e.jsx(Se,{size:"large",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onSearch:j=>{},filterOption:(j,N)=>N.children.toLowerCase().includes(j.toLowerCase()),dropdownStyle:{zIndex:9999},children:s.map((j,N)=>e.jsx(cn,{value:parseInt(j.id.toString()),children:j.name}))})}),e.jsx(n.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description ..."}],children:e.jsx(dn,{rows:4,placeholder:"Enter Description ..."})}),e.jsx(n.Item,{label:"Subject Icon",name:"icon",valuePropName:"fileList",getValueFromEvent:on,rules:[{required:!1,type:"array",message:"Please pick a Subject Icon"}],children:e.jsxs(Oe.Dragger,{name:"icon",accept:".jpg,.jpeg,.png,.gif,.svg",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(Ht,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},{Option:mn}=Se,{TextArea:hn}=L,xn=a=>Array.isArray(a)?a:a==null?void 0:a.fileList,pn=a=>{const[s,m]=t.useState([]);n.useForm();const r=async()=>{const{data:x}=await k.custom({url:"",method:"get",meta:{operation:"schoolTypes",variables:{showAll:{value:!0,type:"Boolean",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});m(x.results)},h=async x=>{const{data:j}=await k.custom({url:"",method:"post",meta:{operation:"updateSubject",variables:{subjectId:{value:parseInt(a.subject.id),type:"Int",required:!0},schoolTypeId:{value:x.school_type_id,type:"Int",required:!0},name:{value:x.name,type:"String",required:!0},description:{value:x.description,type:"String",required:!1},icon:{value:x.icon,type:"Upload",required:!1}},fields:["success","message",{subject:["id","name","description",{schoolType:["id","name","code"]},"icon","isActive","created","updated","canEdit","canDelete","canManage"]}]}});j.success?(d(j.message),a.onFinish(j.subject)):d.error(j.message)};return t.useEffect(()=>{r(),a.form.setFieldsValue({name:a.subject.name,school_type_id:parseInt(a.subject.schoolType.id),description:a.subject.description})},[a.form,a.subject]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:x=>{h(x)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{label:"School Type",name:"school_type_id",rules:[{required:!0,type:"number",message:"Please choose School Type"}],children:e.jsx(Se,{size:"large",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onSearch:x=>{},filterOption:(x,j)=>j.children.toLowerCase().includes(x.toLowerCase()),dropdownStyle:{zIndex:9999},children:s.map((x,j)=>e.jsx(mn,{value:parseInt(x.id.toString()),children:x.name}))})}),e.jsx(n.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description ..."}],children:e.jsx(hn,{rows:4,placeholder:"Enter Description ..."})}),e.jsx(n.Item,{label:"Subject Icon",name:"icon",valuePropName:"fileList",getValueFromEvent:xn,rules:[{required:!1,type:"array",message:"Please pick a Subject Icon"}],children:e.jsxs(Oe.Dragger,{name:"icon",accept:".jpg,.jpeg,.png,.gif,.svg",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(Ht,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},gn=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(1),[N,A]=t.useState(0),[E,Y]=t.useState(20),[p,_]=t.useState(""),[R,T]=t.useState(!1),[z,U]=t.useState(!0);ne();const[K]=n.useForm(),[B]=n.useForm();le.useBreakpoint().lg;const[D,b]=t.useState(!1),[C,o]=t.useState(!1),y=S=>{m(S),b(!0)},g=async S=>{h(r.map(u=>u.id===S.id?S:u)),m(void 0),b(!1)},l=async S=>{h([S,...r])},f=async()=>{const{data:S}=await k.custom({url:"",method:"post",meta:{operation:"syncSchoolsTypes",variables:{},fields:["success","message"]}});S.success?(d.success(S.message),O(x,"",20)):d.error(S.message)},I=async S=>{const{data:u}=await k.custom({url:"",method:"post",meta:{operation:"deleteSubject",variables:{subjectId:{value:parseInt(S.toString()),type:"Int",required:!0}},fields:["success","message"]}});u.success?(d.success(u.message),h(r.filter(W=>W.id!==S))):d.error(u.message)},v=()=>{d("Canceled")},i=S=>S.split(" ").map(J=>J.charAt(0)).join("").toUpperCase(),c=[{title:"Name",dataIndex:"name",fixed:!0,render:(S,u,W)=>e.jsxs("span",{children:[u.icon&&e.jsxs(e.Fragment,{children:[e.jsx(Ve,{size:"large",src:u.icon})," "]}),!u.icon&&e.jsx(Ve,{size:"large",style:{backgroundColor:"#f56a00"},children:e.jsx(e.Fragment,{children:i(u.name)}),src:u.icon}),e.jsx("a",{style:{marginLeft:10},children:u.name})]})},{title:"School Type",dataIndex:"schooltype",fixed:!0,render:(S,u,W)=>e.jsx("span",{children:e.jsxs("a",{children:[u.schoolType.name,e.jsx(ie,{color:"red",style:{marginLeft:5},children:u.schoolType.code})]})})},{title:"Created",dataIndex:"created",render:(S,u,W)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(u.created)})})})},{title:"Status",dataIndex:"isActive",render:(S,u,W)=>e.jsx("a",{children:u!=null&&u.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(S,u,W)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this member?",onConfirm:()=>I(u==null?void 0:u.id),onCancel:()=>v,okText:"Yes",cancelText:"No",disabled:!(u!=null&&u.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(u!=null&&u.canDelete)})}),e.jsx(F,{disabled:!(u!=null&&u.canEdit),onClick:()=>y(u),icon:e.jsx(ve,{})})]})}],O=async(S,u="",W=20)=>{const{data:G}=await k.custom({url:"",method:"get",meta:{operation:"subjects",variables:{page:{value:S,type:"Int",required:!0},key:{value:u,type:"String",required:!1},pageSize:{value:W,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description",{schoolType:["id","name","code"]},"icon","isActive","created","updated","canEdit","canDelete","canManage"]}]}});j(G.page),A(G.total),T(G.hasNext),h(G.results),U(!1)};return t.useEffect(()=>{O(x,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:12,children:e.jsx(n,{layout:"vertical",form:K,onFinish:S=>{j(1),r.length=0,O(1,S.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(M,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(F,{size:"large",icon:e.jsx(ye,{}),onClick:()=>o(!0),children:"Add Subject"}),e.jsx(F,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>f(),children:"Sync Subjects"})]})]}),e.jsx("div",{children:e.jsx(ce,{loading:z,columns:c,dataSource:r,scroll:{x:!0},pagination:{onChange:(S,u)=>{Y(u),O(S,p,u)},total:N,pageSize:E,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(se,{title:"Edit Subject Informations",width:"30vw",open:D,onClose:S=>b(S),children:e.jsx(pn,{form:B,subject:s,onFinish:g})}),e.jsx(se,{title:"Creating a new Subject",width:"30vw",open:C,onClose:S=>o(S),children:e.jsx(un,{onFinish:l,randKey:Math.random()})})]})},jn=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/subjects",children:"Home"})}),e.jsx(H.Item,{children:"Subjects"})]}),e.jsx(gn,{height:80})]})}),yn=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,j]=t.useState(0),[N,A]=t.useState(20),[E,Y]=t.useState(""),[p,_]=t.useState(!1),[R,T]=t.useState(!0);ne();const[z]=n.useForm();le.useBreakpoint().lg;const K=async()=>{await k.custom({url:"",method:"post",meta:{operation:"syncCombinations",variables:{},fields:["success","message"]}})},B=[{title:"Receipient Phone",dataIndex:"receipientPhone",fixed:!0,render:(D,b,C)=>e.jsxs("span",{children:[e.jsx("a",{children:b.receipientPhoneNumber}),e.jsx(ie,{style:{marginLeft:5},children:b.carrier})]})},{title:"Channel",dataIndex:"channel",fixed:!0,render:(D,b,C)=>{var o,y;return e.jsx("span",{children:(y=(o=b==null?void 0:b.channelMessage)==null?void 0:o.channel)==null?void 0:y.name})}},{title:"Content",dataIndex:"content",fixed:!0,render:(D,b,C)=>e.jsx("span",{children:e.jsx("a",{children:b.messageContent})})},{title:"Status",dataIndex:"status",fixed:!0,render:(D,b,C)=>e.jsx("span",{children:e.jsx(ie,{color:b.statusColor,children:b.status})})},{title:"Created",dataIndex:"created",render:(D,b,C)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(b.created)})})})},{title:"Status",dataIndex:"isActive",render:(D,b,C)=>e.jsx("a",{children:b!=null&&b.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(D,b,C)=>e.jsx("span",{})}],V=async(D,b="",C=20)=>{const{data:o}=await k.custom({url:"",method:"get",meta:{operation:"messagesDispatches",variables:{page:{value:D,type:"Int",required:!0},key:{value:b,type:"String",required:!1},pageSize:{value:C,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{channelMessage:["id","message","messageCount",{creator:["id","fullName","email","phone","firstName","middleName","lastName"]},{channel:["id","name","code"]}]},"receipientPhoneNumber","carrier","statusColor","sentAt","deliveredAt","failedAt","messageCount","messageContent","status","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(o.page),j(o.total),_(o.hasNext),m(o.results),T(!1)};return t.useEffect(()=>{V(r,"",50)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:12,children:e.jsx(n,{layout:"vertical",form:z,onFinish:D=>{h(1),s.length=0,V(1,D.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{size:"large",icon:e.jsx(Ce,{}),onClick:()=>K(),children:"Sync CDR"})})]}),e.jsx("div",{children:e.jsx(ce,{loading:R,columns:B,dataSource:s,scroll:{x:!0},pagination:{onChange:(D,b)=>{A(b),V(D,E,b)},total:x,pageSize:N,position:["bottomCenter"],showQuickJumper:!0}})})]})},fn=()=>e.jsx(me,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control",children:"Home"})}),e.jsx(H.Item,{children:"Sms Sent"})]}),e.jsx(yn,{height:80})]})}),{TextArea:Sn}=L,vn=a=>{const[s,m]=t.useState(a.syllabusType.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.syllabusType.name,description:a.syllabusType.description,isActive:a.syllabusType.isActive})},[a.form,a.syllabusType]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.syllabusType.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"description",label:"Description",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(Sn,{rows:4,placeholder:"Please write Description ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(he,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Cn=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(1),[N,A]=t.useState(0),[E,Y]=t.useState(20),[p,_]=t.useState(""),[R,T]=t.useState(!1),[z,U]=t.useState(!0);ne();const[K]=n.useForm(),[B]=n.useForm();le.useBreakpoint().lg;const[D,b]=t.useState(!1),C=v=>{m(v),b(!0)},o=async v=>{const{data:i}=await k.custom({url:"",method:"post",meta:{operation:"updateSyllabusType",variables:{id:{value:v.id,type:"Int",required:!0},name:{value:v.name,type:"String",required:!0},description:{value:v.description,type:"String",required:!1},isActive:{value:v.isActive,type:"Boolean",required:!1}},fields:["success","message",{syllabusType:["id","name","description","created","updated","isActive","canDelete","canEdit","canManage"]}]}});i.success?(d.success(i.message),B.resetFields(),b(!1),h(r.map(c=>c.id===i.syllabusType.id?i.syllabusType:c))):d.error(i.message)},y=async v=>{const{data:i}=await k.custom({url:"",method:"post",meta:{operation:"deleteSyllabusType",variables:{id:{value:v,type:"Int",required:!0}},fields:["success","message"]}});i.success?(d.success(i.message),h(r.filter(c=>c.id!==v))):d.error(i.message)},g=async()=>{const{data:v}=await k.custom({url:"",method:"post",meta:{operation:"synchronizeDefaultSyllabusTypes",variables:{},fields:["success","message"]}});v.success?(d.success(v.message),I(1)):d.error(v.message)},l=()=>{d("Canceled")},f=[{title:"Name",dataIndex:"name",fixed:!0,render:(v,i,c)=>e.jsx("span",{children:e.jsx("a",{children:i.name})})},{title:"Description",dataIndex:"description",fixed:!0,render:(v,i,c)=>e.jsx("span",{children:e.jsx("a",{children:i.description})})},{title:"Created",dataIndex:"created",render:(v,i,c)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(i.created)})})})},{title:"Status",dataIndex:"isActive",render:(v,i,c)=>e.jsx("a",{children:i!=null&&i.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,i,c)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this Syllabus Type?",onConfirm:()=>y(i==null?void 0:i.id),onCancel:()=>l,okText:"Yes",cancelText:"No",disabled:!(i!=null&&i.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(i!=null&&i.canDelete)})}),e.jsx(F,{disabled:!(i!=null&&i.canEdit),icon:e.jsx(ve,{}),onClick:()=>C(i)})]})}],I=async(v,i="",c=20)=>{const{data:O}=await k.custom({url:"",method:"get",meta:{operation:"syllabusTypes",variables:{page:{value:v,type:"Int",required:!0},key:{value:i,type:"String",required:!1},pageSize:{value:c,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}});j(O.page),A(O.total),T(O.hasNext),h(O.results),U(!1)};return t.useEffect(()=>{I(x)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:12,children:e.jsx(n,{layout:"vertical",form:K,onFinish:v=>{j(1),r.length=0,I(1,v.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to sync default syllabus types?",placement:"left",onConfirm:()=>{g()},onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(Ce,{}),size:"large",children:"Sync Default Syllabus Types"})})})]}),e.jsx("div",{children:e.jsx(ce,{loading:z,columns:f,dataSource:r,scroll:{x:!0},pagination:{onChange:(v,i)=>{Y(i),I(v,p,i)},total:N,pageSize:E,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(se,{title:"Edit Syllabus Type Informations",width:"45vw",open:D,onClose:v=>b(v),children:e.jsx(vn,{form:B,syllabusType:s,onFinish:o})})]})},bn=()=>(window.location.href.split("/").slice(3).join("/").split("?")[0],localStorage.getItem("sessionKey")||Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),""),In=()=>(t.useEffect(()=>{window.history.pushState({},"",bn())},[]),e.jsx(me,{children:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Syllabus Types"})]})}),e.jsx(Cn,{height:80})]})})),{TextArea:An}=L,kn=a=>{const[s,m]=t.useState(a.curriculum.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.curriculum.name,description:a.curriculum.description,code:a.curriculum.code,isActive:a.curriculum.isActive})},[a.form,a.curriculum]),e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.curriculum.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(L,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(n.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx(L,{size:"large",disabled:!0,placeholder:"Enter Code ..."})}),e.jsx(n.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please write Description ..."}],children:e.jsx(An,{rows:4,placeholder:"Please write Description ..."})}),e.jsx(n.Item,{name:"isActive",children:e.jsx(he,{checked:s,onChange:()=>m(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Fn=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(1),[N,A]=t.useState(0),[E,Y]=t.useState(20),[p,_]=t.useState(""),[R,T]=t.useState(!1),[z,U]=t.useState(!0);ne();const[K]=n.useForm(),[B]=n.useForm();le.useBreakpoint().lg;const[D,b]=t.useState(!1),C=v=>{m(v),b(!0)},o=async v=>{const{data:i}=await k.custom({url:"",method:"post",meta:{operation:"updateCurriculum",variables:{id:{value:v.id,type:"Int",required:!0},name:{value:v.name,type:"String",required:!0},code:{value:v.code,type:"String",required:!0},description:{value:v.description,type:"String",required:!1},isActive:{value:v.isActive,type:"Boolean",required:!1}},fields:["success","message",{curriculum:["id","name","description","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}});i.success?(d.success(i.message),B.resetFields(),b(!1),h(r.map(c=>c.id===i.curriculum.id?i.curriculum:c))):d.error(i.message)},y=async v=>{const{data:i}=await k.custom({url:"",method:"post",meta:{operation:"deleteCurriculum",variables:{id:{value:v,type:"Int",required:!0}},fields:["success","message"]}});i.success?(d.success(i.message),h(r.filter(c=>c.id!==v))):d.error(i.message)},g=async()=>{const{data:v}=await k.custom({url:"",method:"post",meta:{operation:"syncCurriculums",variables:{},fields:["success","message"]}});v.success?(d.success(v.message),I(1)):d.error(v.message)},l=()=>{d("Canceled")},f=[{title:"Name",dataIndex:"name",fixed:!0,render:(v,i,c)=>e.jsx("span",{children:e.jsx("a",{children:i.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(v,i,c)=>e.jsx("span",{children:e.jsx("a",{children:i.code})})},{title:"Description",dataIndex:"description",fixed:!0,render:(v,i,c)=>e.jsx("span",{children:e.jsx("a",{children:i.description})})},{title:"Created",dataIndex:"created",render:(v,i,c)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(i.created)})})})},{title:"Status",dataIndex:"isActive",render:(v,i,c)=>e.jsx("a",{children:i!=null&&i.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,i,c)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this Curriculum?",onConfirm:()=>y(i==null?void 0:i.id),onCancel:()=>l,okText:"Yes",cancelText:"No",disabled:!(i!=null&&i.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(i!=null&&i.canDelete)})}),e.jsx(F,{disabled:!(i!=null&&i.canEdit),icon:e.jsx(ve,{}),onClick:()=>C(i)})]})}],I=async(v,i="",c=20)=>{const{data:O}=await k.custom({url:"",method:"get",meta:{operation:"curriculums",variables:{page:{value:v,type:"Int",required:!0},key:{value:i,type:"String",required:!1},pageSize:{value:c,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}});j(O.page),A(O.total),T(O.hasNext),h(O.results),U(!1)};return t.useEffect(()=>{I(x)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(M,{span:12,children:e.jsx(n,{layout:"vertical",form:K,onFinish:v=>{j(1),r.length=0,I(1,v.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to sync default Curriculums?",placement:"left",onConfirm:()=>{g()},onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(Ce,{}),size:"large",children:"Sync Default Curriculums"})})})]}),e.jsx("div",{children:e.jsx(ce,{loading:z,columns:f,dataSource:r,scroll:{x:!0},pagination:{onChange:(v,i)=>{Y(i),I(v,p,i)},total:N,pageSize:E,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(se,{title:"Edit Curriculum Informations",width:"45vw",open:D,onClose:v=>b(v),children:e.jsx(kn,{form:B,curriculum:s,onFinish:o})})]})},Nn=()=>{const{data:a}=qe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(me,{children:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Curriculums"})]})}),e.jsx(Fn,{height:80})]})})},Tn=a=>{const[s]=n.useForm(),m=async r=>{const{data:h}=await k.custom({url:"",method:"post",meta:{operation:"createBannedWord",variables:{word:{value:r.word,type:"String",required:!0}},fields:["success","message",{bannedWord:["id","word","created","updated","isActive","canDelete","canEdit","canManage"]}]}});h.success?(d.success(h.message),s.resetFields(),a.onFinish(h.bannedWord)):d.error(h.message)};return e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:s,onFinish:r=>{m(r)},requiredMark:!1,children:[e.jsx(n.Item,{name:"word",label:"Banned Word",rules:[{required:!0,type:"string",message:"Please input Word"}],children:e.jsx(L,{size:"large",placeholder:"Enter Banned Word ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},qn=a=>{var r;const[s]=n.useForm();t.useEffect(()=>{a.word&&s.setFieldsValue({word:a.word.word})},[a.word]);const m=async h=>{var j;const{data:x}=await k.custom({url:"",method:"post",meta:{operation:"updateBannedWord",variables:{id:{value:(j=a.word)==null?void 0:j.id,type:"Int",required:!0},word:{value:h.word,type:"String",required:!0}},fields:["success","message",{bannedWord:["id","word","created","updated","isActive","canDelete","canEdit","canManage"]}]}});x.success?(d.success(x.message),s.resetFields(),a.onFinish(x.bannedWord)):d.error(x.message)};return e.jsx(e.Fragment,{children:e.jsxs(n,{layout:"vertical",form:s,onFinish:h=>{m(h)},requiredMark:!0,initialValues:{word:(r=a.word)==null?void 0:r.word},children:[e.jsx(n.Item,{name:"word",label:"Banned Word",rules:[{required:!0,type:"string",message:"Please input Word"}],children:e.jsx(L,{size:"large",placeholder:"Enter Banned Word ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(F,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Pn=a=>{const[s,m]=t.useState(),[r,h]=t.useState([]),[x,j]=t.useState(1),[N,A]=t.useState(0),[E,Y]=t.useState(20),[p,_]=t.useState(""),[R,T]=t.useState(!1),[z,U]=t.useState(!0);ne();const[K]=n.useForm();n.useForm();const V=!le.useBreakpoint().lg,[D,b]=t.useState(!1),[C,o]=t.useState(!1),y=u=>{m(u),b(!0)},g=async u=>{h([u,...r])},l=async u=>{h(r.map(W=>W.id===u.id?u:W)),b(!1)},f=async u=>{const{data:W}=await k.custom({url:"",method:"post",meta:{operation:"deleteBannedWord",variables:{id:{value:u,type:"Int",required:!0}},fields:["success","message"]}});W.success?(d.success(W.message),h(r.filter(G=>G.id!==u))):d.error(W.message)},I=async()=>{const{data:u}=await k.custom({url:"",method:"post",meta:{operation:"syncBannedWords",variables:{},fields:["success","message"]}});u.success?(d.success(u.message),c(1)):d.error(u.message)},v=()=>{d("Canceled")},i=[{title:"Word",dataIndex:"word",fixed:!0,render:(u,W,G)=>e.jsx("span",{children:e.jsx("a",{children:W.word})})},{title:"Created",dataIndex:"created",render:(u,W,G)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(W.created)})})})},{title:"Status",dataIndex:"isActive",render:(u,W,G)=>e.jsx("a",{children:W!=null&&W.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(u,W,G)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this Curriculum?",onConfirm:()=>f(W==null?void 0:W.id),onCancel:()=>v,okText:"Yes",cancelText:"No",disabled:!(W!=null&&W.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(W!=null&&W.canDelete)})}),e.jsx(F,{disabled:!(W!=null&&W.canEdit),icon:e.jsx(ve,{}),onClick:()=>y(W)})]})}],c=async(u,W="",G=20)=>{const{data:J}=await k.custom({url:"",method:"get",meta:{operation:"bannedWords",variables:{page:{value:u,type:"Int",required:!0},key:{value:W,type:"String",required:!1},pageSize:{value:G,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","word","isActive","created","updated","canEdit","canDelete","canManage"]}]}});j(J.page),A(J.total),T(J.hasNext),h(J.results),U(!1)},O=()=>e.jsx(e.Fragment,{children:e.jsx(n,{layout:"vertical",form:K,onFinish:u=>{j(1),r.length=0,c(1,u.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),S=()=>e.jsxs(e.Fragment,{children:[e.jsx(F,{icon:e.jsx(ye,{}),size:"large",onClick:()=>o(!0),children:"Add Word"}),e.jsx(X,{title:"Are you sure to sync default Banned Words?",placement:"left",onConfirm:()=>{I()},onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(Ce,{}),size:"large",children:"Sync Default Banned Words"})})]});return t.useEffect(()=>{c(x)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[V&&e.jsxs(e.Fragment,{children:[e.jsx(M,{span:24,style:{display:"flex",justifyContent:"flex-end"},children:S()}),e.jsx(M,{span:24,children:O()})]}),!V&&e.jsxs(e.Fragment,{children:[e.jsx(M,{span:12,children:O()}),e.jsx(M,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:S()})]})]}),e.jsx("div",{children:e.jsx(ce,{loading:z,columns:i,dataSource:r,scroll:{x:!0},pagination:{onChange:(u,W)=>{Y(W),c(u,p,W)},total:N,pageSize:E,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(se,{title:"Edit Banned Word",width:"45vw",open:D,onClose:u=>b(u),children:e.jsx(qn,{word:s,onFinish:l})}),e.jsx(se,{title:"Create Banned Word",width:"35vw",open:C,onCancel:u=>o(u),children:e.jsx(Tn,{onFinish:g})})]})},Mn=()=>{const{data:a}=qe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(me,{children:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Curriculums"})]})}),e.jsx(Pn,{height:80})]})})},$t=[{user:Yt},...us],En=a=>{const[s,m]=t.useState(!0),[r,h]=t.useState(1),[x,j]=t.useState(0);t.useState(25);const[N,A]=t.useState(0),[E,Y]=t.useState([]),[p]=n.useForm(),_=async(T,z="",U=25)=>{const{data:K}=await k.custom({url:"",method:"get",meta:{operation:"notQuizzerManagers",variables:{page:{value:T,type:"Int",required:!0},key:{value:z,type:"String",required:!1},pageSize:{value:U,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Yt}]}});h(K.page),j(K.total),A(K.pages),Y(K.results),m(!1)},R=async T=>{const{data:z}=await k.custom({url:"",method:"post",meta:{operation:"addQuizzerManager",variables:{id:{value:parseInt(T.toString()),type:"Int",required:!0}},fields:["success","message",{quizzerManager:$t}]}});z.success?(d.success(z.message),Y(E.filter(U=>U.id!==T)),a.onFinish(z.quizzerManager)):d.error(z.message)};return t.useEffect(()=>{_(1)},[]),e.jsxs(e.Fragment,{children:[e.jsx(n,{layout:"vertical",form:p,onFinish:T=>{_(1,T.key)},requiredMark:!1,children:e.jsx(n.Item,{name:"key",rules:[{required:!1,type:"string",message:"Search Users ..."}],children:e.jsx(L,{size:"large",placeholder:"Seach Users ..."})})}),e.jsx(Bt,{sx:{minHeight:"80svh",maxHeight:"80svh",overflowY:"scroll",overflowX:"hidden"},children:e.jsx(Fe,{bordered:!0,dataSource:E,renderItem:T=>e.jsx(Fe.Item,{actions:[e.jsx(F,{type:"primary",onClick:()=>R(T.id),children:"Add"})],children:T.fullName})})}),e.jsx(Bt,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:2,marginBottom:2},children:e.jsx(js,{count:N,color:"secondary",onChange:(T,z)=>{_(z,p.getFieldValue("key"))}})})]})},Dn=a=>{t.useState();const[s,m]=t.useState([]),[r,h]=t.useState(1),[x,j]=t.useState(0),[N,A]=t.useState(20),[E,Y]=t.useState(""),[p,_]=t.useState(!1),[R,T]=t.useState(!0);ne();const[z]=n.useForm();n.useForm();const K=!le.useBreakpoint().lg,[B,V]=t.useState(!1),D=async g=>{const{data:l}=await k.custom({url:"",method:"post",meta:{operation:"deleteQuizzerManager",variables:{id:{value:g,type:"Int",required:!0}},fields:["success","message"]}});l.success?(d.success(l.message),m(s.filter(f=>f.id!==g))):d.error(l.message)},b=[{title:"Manager Name",dataIndex:"managerName",fixed:!0,render:(g,l,f)=>e.jsx("span",{children:e.jsx("a",{children:l.user.fullName})})},{title:"Created",dataIndex:"created",render:(g,l,f)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ge,{date:new Date(l.created)})})})},{title:"Status",dataIndex:"isActive",render:(g,l,f)=>e.jsx("a",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(g,l,f)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to delete this Manager?",onConfirm:()=>D(l==null?void 0:l.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(F,{icon:e.jsx(oe,{}),disabled:!(l!=null&&l.canDelete)})})})}],C=async(g,l="",f=20)=>{T(!0);const{data:I}=await k.custom({url:"",method:"get",meta:{operation:"quizzerManagers",variables:{page:{value:g,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:f,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:$t}]}});h(I.page),j(I.total),_(I.hasNext),m(I.results),T(!1)},o=()=>e.jsx(e.Fragment,{children:e.jsx(n,{layout:"vertical",form:z,onFinish:g=>{C(1,g.key)},children:e.jsx(n.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),y=()=>e.jsx(e.Fragment,{children:e.jsx(F,{icon:e.jsx(ye,{}),size:"large",onClick:()=>V(!0),children:"Add Manager"})});return t.useEffect(()=>{C(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[K&&e.jsxs(e.Fragment,{children:[e.jsx(M,{span:24,style:{display:"flex",justifyContent:"flex-end"},children:y()}),e.jsx(M,{span:24,children:o()})]}),!K&&e.jsxs(e.Fragment,{children:[e.jsx(M,{span:12,children:o()}),e.jsx(M,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:y()})]})]}),e.jsx("div",{children:e.jsx(ce,{loading:R,columns:b,dataSource:s,scroll:{x:!0},pagination:{onChange:(g,l)=>{A(l),C(g,E,l)},total:x,pageSize:N,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(se,{title:"Adding Quizzer Manager",width:"35vw",open:B,onClose:g=>V(g),children:e.jsx(En,{onFinish:g=>{m([g,...s])}})})]})},zn=()=>{const{data:a}=qe(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{s()},[]),e.jsx(me,{children:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsxs(H,{children:[e.jsx(H.Item,{children:e.jsx(ue,{to:"/control/analytics",children:"Home"})}),e.jsx(H.Item,{children:"Quizzer Managers"})]})}),e.jsx(Dn,{height:80})]})})},Yn=a=>{const{page:s}=a;return s==="BannedWordsPage"?e.jsx(Mn,{}):s==="CurriculumsPage"?e.jsx(Nn,{}):s==="SyllabusTypesPage"?e.jsx(In,{}):s==="SmsSentPage"?e.jsx(fn,{}):s==="SubjectsPage"?e.jsx(jn,{}):s==="CombinationsPage"?e.jsx(ln,{}):s==="TelecomCarriersPage"?e.jsx(tn,{}):s==="OrderPaymentsPage"?e.jsx(Za,{}):s==="OrdersPaymentsPage"?e.jsx($a,{}):s==="ExaminationsTypesPage"?e.jsx(Cs,{}):s==="ControlSchoolVenuesTypesPage"?e.jsx(Is,{}):s==="SystemSettingsPage"?e.jsx(Fs,{}):s==="ControlAnalyticsPage"?e.jsx(Ds,{}):s==="ControlApplicationsPage"?e.jsx(_s,{}):s==="ControlPermissionsPage"?e.jsx(Ks,{}):s==="ControlRolesPage"?e.jsx(Ws,{}):s==="ControlDistrictsPage"?e.jsx(Qs,{}):s==="SchoolEducationLevelsPage"?e.jsx(Zs,{}):s==="ProgrammesPage"?e.jsx(Xs,{}):s==="ControlRegionsPage"?e.jsx(sa,{}):s==="SchoolsPage"?e.jsx(ya,{}):s==="SchoolsTypesPage"?e.jsx(Aa,{}):s==="GradesPage"?e.jsx(Fa,{}):s==="SchoolOwnershipsPage"?e.jsx(qa,{}):s==="ControlUsersPage"?e.jsx(Ba,{}):s==="ControlLoginReedemPage"?e.jsx(Ra,{}):s==="WardsPage"?e.jsx(Ua,{}):s==="PrivateTutorsPage"?e.jsx(Ha,{}):s==="PaymentPackagesPage"?e.jsx(wa,{}):s==="OrdersPage"?e.jsx(Qa,{}):s==="QuizzerManagersPage"?e.jsx(zn,{}):e.jsx("div",{children:"Page not found ..."})};export{Yn as ControlPages};
