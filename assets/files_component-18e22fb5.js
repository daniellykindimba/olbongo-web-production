import{r as c,l as M,aE as D,j as i,L as P,D as E,M as V,C as T,av as q,aw as L,_ as o,ax as O,am as _,ai as d,aj as F,g as x}from"./index-c92f9f6b.js";import{a as A,F as z}from"./file_item_component-e91df2a0.js";const{Paragraph:B}=_,U=l=>{const[u,r]=c.useState([]);M();const[k,m]=c.useState(!1),[s,h]=c.useState(),[C,g]=c.useState(!1),p=!D.useBreakpoint().lg,y=e=>{h(e),g(!0)},f=e=>{const a=l.data.map(t=>(t.id===e.id&&(t.imageVisible=!0),t));r(a)},w=e=>{const a=l.data.map(t=>(t.id===e.id&&(t.imageVisible=!1),t));r(a)},b=e=>{h(e),m(!0)},S=async(e,a)=>{const{data:t}=await x.custom({url:"",method:"post",meta:{operation:"makeFilePublicPrivate",variables:{id:{value:e,type:"Int",required:!0},public:{value:a,type:"Boolean",required:!0}},fields:["success","message"]}}).catch(n=>(o.error("Error changing file privacy"),{data:null})).then(n=>n);t&&(t.success?(o.success(t.message),r(u.map(n=>(n.id===e&&(n.isPublic=a),n)))):t.message),d.destroyAll()},j=(e,a)=>{d.confirm({title:"Confirm",icon:i.jsx(F,{}),content:a?"Making File Public ...":"Making File  Private  ....",okText:a?"Make Public":"Make Private",cancelText:"Cancel",onOk:()=>S(e,a)})},v=async e=>{const{data:a}=await x.custom({url:"",method:"post",meta:{operation:"deleteFile",variables:{id:{value:e,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(o.error("Error deleting file"),{data:null})).then(t=>t);a&&(a.success?(o.success(a.message),r(u.filter(t=>t.id.toString()!==e.toString()))):o.error(a.message)),d.destroyAll()},I=e=>{d.confirm({title:"Confirm",icon:i.jsx(F,{}),content:"Deleting File ....",okText:"Delete",cancelText:"Cancel",onOk:()=>v(e)})};return i.jsxs(i.Fragment,{children:[i.jsx(P,{loading:l.loading,itemLayout:"horizontal",dataSource:l.data,renderItem:e=>i.jsx(A,{item:e,min:l.min??!1,handleChangePrivate:j,handleDelete:I,handleMakeImageNotVisible:w,handleMakeImageVisible:f,handleShowFileInfoDrawer:b,handleShareFile:y})}),i.jsx(E,{title:"File Informations",anchor:"right",width:p?"100vw":"35vw",onClose:e=>m(e),open:k,children:i.jsx(z,{id:s==null?void 0:s.id})}),i.jsx(V,{title:"Share File",open:C,onClose:e=>g(e),width:p?"100vw":"50vw",children:i.jsx(T,{title:"Click Copy icon to copy share link",children:i.jsx(B,{copyable:{icon:[i.jsx(q,{},"copy-icon"),i.jsx(L,{},"copied-icon")],tooltips:["click here","you clicked!!"],onCopy:()=>{o.success("Link Successfully Copied")}},style:{textAlign:"center",fontSize:20},children:O.site_url+"/odrive/file/"+(s==null?void 0:s.id)+"/"+encodeURIComponent((s==null?void 0:s.slug)??"")+"/share"})})})]})};export{U as F};
