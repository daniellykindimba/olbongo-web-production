import{r,m as f,j as e,k as y,aj as v,e as p,a as u,a5 as C,S,af as E,aA as i,aQ as O,ah as b,g as k,_ as q}from"./index-d9f4923f.js";const I=h=>{const[g,l]=r.useState(!1),[a,x]=r.useState([]),{push:n}=f(),m=async(s,t="",j=5)=>{l(!0);const{data:d}=await k.custom({url:"",method:"get",meta:{operation:"myMadarasa",variables:{page:{value:s,type:"Int",required:!0},key:{value:t,type:"String",required:!1},pageSize:{value:j,type:"Int",required:!1},where:{value:{mode:"all"},type:"JSON",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","created","canEdit","canDelete","canManage","updated","isActive","isAuthor","isConnected"]}]}}).catch(c=>(q.error("Error getting darasas"),{data:null})).then(c=>c);d&&x(d.results),l(!1)},o=(s,t)=>s.length>t?s.substring(0,t)+"...":s;return r.useEffect(()=>{m(1,"",5)},[h.randKey]),e.jsx(e.Fragment,{children:e.jsx(y,{title:e.jsx(e.Fragment,{children:e.jsxs(v,{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Classes"}),e.jsx(p,{title:"View All Classes",color:"red",children:e.jsx(u,{icon:e.jsx(C,{}),onClick:()=>n("/oclass"),danger:!0})})]})}),style:{padding:"0px !important"},children:e.jsxs(S,{spinning:g,children:[a.length===0&&e.jsx(E,{description:"You are not connected to any class"}),a.length>0&&e.jsx("div",{style:{overflowY:"auto",maxHeight:"52vh",minHeight:"52vh"},children:e.jsx(i,{itemLayout:"horizontal",dataSource:a,renderItem:s=>e.jsx("div",{style:{padding:"0",margin:"0",borderBottom:"1px solid #f0f0f0"},onClick:()=>n(`/oclass/class/session/${s.id}/${s.code}`),children:e.jsx(i.Item,{actions:[e.jsx(p,{title:"Open",color:"red",children:e.jsx(u,{icon:e.jsx(O,{}),onClick:()=>n(`/oclass/class/session/${s.id}/${s.code}`),danger:!0})})],children:e.jsx(i.Item.Meta,{title:e.jsxs("a",{children:[e.jsx("span",{style:{fontSize:16},children:o(s.name,20)}),e.jsx("span",{style:{marginLeft:5},children:e.jsx(b,{color:"red",children:s.code})})]}),description:o(s.description.replace(/(<([^>]+)>)/gi,""),30)})})})})})]})})})};export{I as DashboardClassesComponent};
