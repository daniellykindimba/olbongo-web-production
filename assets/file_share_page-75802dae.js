import{ch as f,j as e,r as l,u as S,a8 as w,B as p,eT as g,av as z,g as F,_ as b,cn as v,cL as D,aN as a,cz as h}from"./index-3fd7f13b.js";import{f as I}from"./data_objects-1d30f197.js";import{D as n}from"./index-8a153cba.js";const B=f(e.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zm-8 2V5h2v6h1.17L12 13.17 9.83 11H11zm-6 7h14v2H5z"}),"DownloadOutlined"),T=s=>{const[i,r]=l.useState(!0),[t,u]=l.useState(),o=S(),m=async x=>{r(!0);const{data:c}=await F.custom({url:"",method:"get",meta:{operation:"file",variables:{id:{value:x,type:"Int",required:!0}},fields:I}}).catch(()=>(b.error("Error occured while fetching file"),{data:null})).then(j=>j);c&&u(c),r(!1)};return l.useEffect(()=>{m(parseInt(o.file))},[o.file]),e.jsx(e.Fragment,{children:e.jsxs(w,{spinning:i,children:[e.jsxs(n,{title:"Shared File Info",bordered:!0,column:1,children:[e.jsxs(n.Item,{label:"File Name",children:[t==null?void 0:t.title,e.jsx("span",{style:{marginLeft:"10px"},children:e.jsx(d,{file:t,showIcon:!0,showText:!1,showSize:!1,buttonSize:"small"})})]}),e.jsx(n.Item,{label:"File Size",children:t==null?void 0:t.size}),e.jsx(n.Item,{label:"File Author",children:t==null?void 0:t.author.fullName})]}),e.jsx(p,{sx:{marginTop:"10px"},children:e.jsx(d,{file:t,showIcon:!0,showText:!0,showSize:!0,buttonSize:"large"})})]})})},d=s=>{var i;return e.jsx(g,{title:"Click to Download Shared File",placement:"top",children:e.jsxs(z,{size:s.buttonSize,onClick:()=>{var r;window.open((r=s.file)==null?void 0:r.file)},icon:s.showIcon&&e.jsx(B,{}),children:[s.showText&&"Download",s.showSize&&`(${(i=s.file)==null?void 0:i.size})`]})})},y=()=>(l.useEffect(()=>{document.title=v.system_name+": File Share"},[]),e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsxs(a,{children:[e.jsx(a.Item,{children:e.jsx(h,{to:"/",children:"Home"})}),e.jsx(a.Item,{children:e.jsx(h,{to:"/odrive",children:"Odrive"})}),e.jsx(a.Item,{children:"File Share"})]})}),e.jsx(T,{})]}));export{y as FileSharePage};
