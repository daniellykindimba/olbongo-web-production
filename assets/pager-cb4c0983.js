import{bG as fs,bF as Ss,bD as vs,cC as Cs,r as s,bC as bs,b4 as Is,j as e,w as Fs,bP as ks,bQ as Ms,ci as Ls,cK as gt,co as ge,aX as je,aP as B,aW as ne,cM as Fe,aN as V,cA as ae,cY as As,aT as a,a1 as K,av as P,a8 as oe,aZ as le,cN as Es,cZ as Ns,_ as x,c_ as Ps,c$ as Ds,d0 as zs,cf as ce,aY as me,aR as Me,aU as J,af as X,d1 as Ts,d2 as qs,d3 as Rs,d4 as Ys,d5 as Gs,S as H,d6 as Os,g as w,d7 as Ks,d8 as _s,cn as Ye,d9 as Bs,da as Us,db as Ws,aS as Vs,cm as re,aO as Le,ce as Ge,dc as $s,dd as Hs,de as Js,c as jt,P as Gt,df as Qs,dg as ws,dh as Xs,di as Zs,dj as en,dk as tn,dl as sn,dm as nn,dn as rn,dp as ln,dq as an,dr as on,ds as dn,dt as cn,du as Ot,dv as Kt,dw as un,dx as hn,dy as mn,dz as xn,dA as gn,dB as _t,dC as jn,dD as yn,dE as pn,dF as fn,dG as Sn,dH as vn,dI as Cn,dJ as Bt,dK as bn,dL as In,dM as Fn,dN as kn,dO as Mn,u as Ue,dP as Ln,dQ as An,dR as En,B as Ze,dS as Nn,dT as Pn,dU as Dn,cQ as Ut,dV as We,dW as Et,R as zn,F as Tn,dX as qn,dY as Rn,dZ as Wt,d_ as Vt,d$ as Yn,e0 as Gn,e1 as On,e2 as Kn,e3 as _n,e4 as Bn,e5 as Un,e6 as Wn,e7 as Vn,e8 as $n,e9 as Hn,ea as Jn,eb as Qn,ec as wn,ed as Xn,ee as Zn,ef as yt,eg as Qe,eh as pt,ei as er,ej as tr,ek as sr,el as nr,em as rr,en as lr,eo as ar}from"./index-3ee95507.js";import{S as ir,L as et,D as or,B as dr,G as we,F as cr,U as ur}from"./school_switcher_component-3f16689a.js";import{I as ft}from"./index.es-a6fe8a1a.js";import{P as se}from"./index-83878f15.js";import{L as de}from"./index-d5e9db55.js";import{S as ie}from"./SearchOutlined-57b520e5.js";import{P as Oe}from"./PlusCircleFilled-970ea878.js";import{D as Se}from"./index-ade8483e.js";import{G as fe}from"./index-f53a7735.js";import{D as ue}from"./DeleteOutlined-1abe9ead.js";import{M as Ae}from"./MoreOutlined-d4a00d34.js";import{l as Ie}from"./index-08c9ec60.js";import{D as st}from"./index-413f080f.js";import{S as hr}from"./index-4ed9d576.js";import{U as St}from"./index-c926c066.js";import{I as nt}from"./InboxOutlined-ac333ba7.js";import{D as vt}from"./DownloadOutlined-e311890a.js";import{C as tt}from"./index-94377945.js";import{A as Ct}from"./index-2e67f569.js";import{S as ct}from"./SyncOutlined-41989c6b.js";import{U as $t}from"./UploadOutlined-f314e04e.js";import{U as Ht}from"./UnlockFilled-8e1fcbe2.js";import{E as Ne}from"./EditOutlined-49201e5d.js";import{K as Jt,U as Qt,P as wt,M as Xt,N as mr}from"./UnlockOutlined-f0b97d02.js";import{I as _e}from"./index-8a5c8c79.js";import{U as Zt}from"./UserAddOutlined-a531d027.js";import{L as es}from"./LockOutlined-b71b9ce3.js";import{B as xr}from"./BookOutlined-3427b0e9.js";import{S as gr}from"./schoool_examinations_component-66bf80d4.js";import{A as ts}from"./index-8d1d76b6.js";import{a as ss,P as jr,R as yr,S as pr}from"./school_settings_component-ec9625f9.js";import{C as fr}from"./ClearOutlined-0ec7048d.js";import{S as Sr}from"./SaveOutlined-44e0f9d2.js";import{T as vr}from"./index-b596f1e1.js";import{I as Cr}from"./index-dfc68cd1.js";import{D as ke}from"./index-43db387b.js";import{n as br}from"./index-c1e6a54d.js";import{A as Ir}from"./index-76461af0.js";import{U as Be}from"./UserOutlined-ebcd6bec.js";import{C as Nt}from"./SwitcherOutlined-aa8cd501.js";import{C as Pt}from"./CheckCircleFilled-7d616087.js";import{A as Fr}from"./Alert-fb8eba0d.js";import{S as kr}from"./SendOutlined-a71b115b.js";import"./index-95dcb07d.js";import"./ActionButton-ec6aa8b6.js";import"./DeleteOutlined-25685737.js";import"./defineProperty-eb4a8fb2.js";import"./useNotification-cd522466.js";import"./DialogWrap-0869358d.js";import"./index-ccce498a.js";import"./localeData-61e9bfbc.js";import"./SinglePicker-4f8d7753.js";import"./index-422314c8.js";import"./useMutateObserver-8321179d.js";import"./index-58d13a13.js";import"./InputNumber-488995c2.js";import"./Image-73433711.js";import"./Upload-4662cb06.js";import"./Rate-e5442d98.js";import"./index-4fbe1a0e.js";import"./index-21be64ab.js";import"./index-ea22eaf3.js";import"./SwapRightOutlined-c4e52b1e.js";import"./fade-250784e4.js";import"./DownloadOutlined-6cd35f11.js";import"./Skeleton-188a3216.js";import"./DotChartOutlined-f39c986e.js";import"./InfoCircleFilled-acf8006b.js";import"./InfoCircleFilled-baaa675e.js";import"./EditOutlined-401a1613.js";import"./UpOutlined-7082c42f.js";import"./ckeditor-69442fe0.js";import"./transButton-e7e285d6.js";import"./ZoomOutOutlined-4d40b3b9.js";import"./index-3d3985e8.js";import"./context-529be677.js";function Mr(t){return fs("MuiAlertTitle",t)}Ss("MuiAlertTitle",["root"]);const Lr=["className"],Ar=t=>{const{classes:n}=t;return Ms({root:["root"]},Mr,n)},Er=vs(Cs,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(t,n)=>n.root})(({theme:t})=>({fontWeight:t.typography.fontWeightMedium,marginTop:-2})),Nr=s.forwardRef(function(n,c){const l=bs({props:n,name:"MuiAlertTitle"}),{className:i}=l,m=Is(l,Lr),u=l,d=Ar(u);return e.jsx(Er,Fs({gutterBottom:!0,component:"div",ownerState:u,ref:c,className:ks(d.root,i)},m))}),Pr=Nr,Dr=Ls(e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOutlined"),zr=s.lazy(()=>gt(()=>import("./school_analytics-94d363f2.js"),["assets/school_analytics-94d363f2.js","assets/index-3ee95507.js","assets/index-5e5904d3.css","assets/analytic_card_component-816068e9.js","assets/Skeleton-188a3216.js","assets/DotChartOutlined-f39c986e.js","assets/index-be2a73ad.js","assets/EditOutlined-401a1613.js","assets/transButton-e7e285d6.js","assets/index-21be64ab.js"]).then(t=>({default:t.SchoolAnalytics}))),Tr=s.lazy(()=>gt(()=>import("./students_registration_bar_chart-0d6cc8bf.js"),["assets/students_registration_bar_chart-0d6cc8bf.js","assets/index-3ee95507.js","assets/index-5e5904d3.css","assets/index-d9bfe402.js","assets/index-94377945.js","assets/Skeleton-188a3216.js","assets/DotChartOutlined-f39c986e.js","assets/index-422314c8.js"]).then(t=>({default:t.StudentsRegistrationLineChart}))),qr=s.lazy(()=>gt(()=>import("./students_teachers_bar_chart-8c3dd2ab.js"),["assets/students_teachers_bar_chart-8c3dd2ab.js","assets/index-3ee95507.js","assets/index-5e5904d3.css","assets/index-d9bfe402.js","assets/index-94377945.js","assets/Skeleton-188a3216.js","assets/DotChartOutlined-f39c986e.js","assets/index-422314c8.js"]).then(t=>({default:t.StudentsTeachersBarChart}))),Rr=()=>{const[t,n]=s.useState(!0),[c,l]=s.useState(),[i,m]=s.useState([]),[u,d]=s.useState([]),o=async()=>{n(!0),As().then(h=>{n(!1),h&&(d(h.operatingTypes.map(C=>C.schoolType.code)),m(h.operatingTypes),l(h.data))})};return s.useEffect(()=>{document.title=ge.system_name+": School Manager",o()},[]),!t&&!c?e.jsx(je,{direction:"horizontal",style:{width:"100%",height:"88vh",justifyContent:"center"},children:e.jsxs(B,{children:[e.jsx(ne,{children:e.jsx("h2",{children:"Your are not Connected to any Operation School"})}),e.jsx(ne,{style:{display:"flex",justifyContent:"center"},children:e.jsx(ir,{randKey:Math.random()})})]})}):e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Dashboard"})]})}),e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(zr,{operatingTypes:i,operationalSchool:c,operatingTypesCodes:u})}),e.jsxs(ne,{children:[e.jsx(B,{span:12,children:e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Tr,{})})}),e.jsx(B,{span:12,children:e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(qr,{})})})]})]})},Yr=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!0),[m,u]=s.useState(1),[d]=a.useForm(),[o,h]=s.useState(0),[C,k]=s.useState(0),[A,q]=s.useState(!0),I=async E=>{Ns(parseInt(E.toString())).then(N=>{N&&(N.success?(x.success(N.message),c(n.filter(b=>b.id.toString()!==E.toString())),t.onAdd(N.schoolEducationLevel)):x.error(N.message))})},M=async(E,N="")=>{Ps(E,N).then(b=>{b&&(k(b.total),h(b.pages),u(b.page),q(b.hasNext),c([...n,...b.results]))}),i(!1)};return s.useEffect(()=>{M(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(a,{layout:"vertical",form:d,onFinish:E=>{n.length=0,c([]),M(1,E.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search Level(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ne,{children:e.jsx(B,{span:24,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(se,{title:"Adding all education levels",description:"Are you sure to add all education levels?",overlayStyle:{zIndex:9999},onConfirm:()=>{n.forEach(E=>{I(E.id)})},disabled:n.length===0,children:e.jsx(P,{disabled:n.length===0,children:"Add All"})})})}),e.jsx(oe,{spinning:l,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(ft,{dataLength:C,next:()=>M(m),hasMore:A,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(oe,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(de,{itemLayout:"horizontal",dataSource:n,renderItem:E=>e.jsxs("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:[e.jsx(de.Item,{style:{marginBottom:1,padding:0},actions:[e.jsx(se,{title:"Are you sure to add this Education Level?",onConfirm:()=>I(E.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(P,{icon:e.jsx(Oe,{}),onClick:()=>{}})})],children:e.jsx(de.Item.Meta,{title:e.jsxs("a",{children:[E.name,e.jsx(le,{color:"green",children:E.schoolType.name})]}),description:e.jsx(e.Fragment,{})})},"file-"+E.id),e.jsx(Es,{})]})})})})})]})},Gr=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(1),[m,u]=s.useState(!1),[d,o]=s.useState(0),[h,C]=s.useState(!0),[k]=a.useForm(),A=async(I,M="",E=25)=>{C(!0),Ds(I,M,E,parseInt(t.educationLevel.id.toString())).then(N=>{N&&(o(N.total),i(N.page),u(N.hasNext),c([...n,...N.results]))}),C(!1)},q=async I=>{zs(I,parseInt(t.educationLevel.id.toString())).then(M=>{M&&(M.success?(x.success(M.message),c(n.filter(E=>E.id!==I)),t.onAdd(M.schoolEducationLevelCombination)):x.error(M.message))})};return s.useEffect(()=>{A(1,"",25)},[t.randKey,t.educationLevel]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(a,{layout:"vertical",form:k,onFinish:I=>{A(1,I.key,25)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search Subject(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(oe,{spinning:h,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(ft,{dataLength:d,next:()=>A(l),hasMore:m,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(oe,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(de,{itemLayout:"horizontal",dataSource:n,renderItem:I=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(de.Item,{style:{margin:0,padding:0},actions:[e.jsx(se,{title:"Are you sure to add this Combination?",onConfirm:()=>q(I.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(P,{icon:e.jsx(Oe,{}),onClick:()=>{}})})],children:e.jsx(de.Item.Meta,{title:e.jsxs("a",{children:[I.name,e.jsx("span",{style:{marginLeft:10},children:I.subjects.map(M=>e.jsx(le,{color:"green",children:M.name}))})]}),description:e.jsx(e.Fragment,{})})},"combination-"+I.id)})})})})})]})},Or=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,A]=s.useState(!0),[q]=a.useForm(),M=!fe.useBreakpoint().lg,E=async v=>{c([v,...n])},N=[{title:"Name",dataIndex:"name",fixed:!0,render:(v,S)=>e.jsx("span",{children:e.jsx("a",{children:S.combination.name})})},{title:"Subjects",dataIndex:"subjects",fixed:!0,render:(v,S)=>{var L,j;return e.jsx("span",{children:(j=(L=S==null?void 0:S.combination)==null?void 0:L.subjects)==null?void 0:j.map(T=>e.jsx(le,{color:"green",children:T.name}))})}},{title:"Date Created",dataIndex:"created",render:(v,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(S.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(v,S)=>e.jsx("a",{children:S!=null&&S.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,S)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsx(J,{children:e.jsx(J.Item,{icon:e.jsx(ue,{}),children:e.jsx(X,{title:"Delete Combination",children:e.jsx(se,{title:"Are you sure to delete this ",onConfirm:()=>b(S==null?void 0:S.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(S!=null&&S.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",href:"",rel:"noopener noreferrer",download:!0,children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:L=>L.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],b=async v=>{Ts(v).then(S=>{S&&(S.success?(x.success(S.message),c(n.filter(L=>L.id!==v))):x.error(S.message))})},R=async(v,S="",L=20)=>{var j;A(!0),qs(v,S,L,parseInt(((j=t.schoolEducationLevel)==null?void 0:j.id.toString())??"0")).then(T=>{T&&(u(T.total),c([...T.results]))}),A(!1)};return s.useEffect(()=>{R(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:16,children:e.jsx(a,{layout:"vertical",form:q,onFinish:v=>{C(v.key),n.length=0,R(1,v.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:M?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{size:"large",icon:e.jsx(ce,{}),onClick:()=>i(!0),children:"Add Combination"})})]}),e.jsx(me,{loading:k,columns:N,dataSource:n,pagination:{onChange:(v,S)=>{o(S),R(v,h,S)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:"Adding School Education Level Combinations",anchor:"right",width:"35vw",onClose:v=>i(v),open:l,noOverFlow:!0,children:e.jsx(Gr,{randKey:Math.random(),onAdd:E,educationLevel:t.schoolEducationLevel})})]})},{TextArea:Kr}=K,_r=t=>{const[n]=a.useForm(),c=async l=>{Rs(l,t.educationLevel.id).then(i=>{i&&(i.success?(x.success(i.message),t.onAdd(i.schoolEducationLevelGroup),n.resetFields()):x.error(i.message))})};return e.jsx(e.Fragment,{children:e.jsxs(a,{layout:"vertical",form:n,onFinish:l=>{c(l)},requiredMark:!1,children:[e.jsx("span",{children:t.educationLevel.educationLevel.name}),e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(Kr,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Br=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,A]=s.useState(!0),[q]=a.useForm(),M=!fe.useBreakpoint().lg,E=async v=>{c([v,...n])},N=async v=>{Gs(v).then(S=>{S&&(S.success?(x.success(S.message),c(n.filter(L=>L.id!==v))):x.error(S.message))})},b=[{title:"Name",dataIndex:"name",fixed:!0,render:(v,S)=>e.jsx("span",{children:e.jsx("a",{children:S.name})})},{title:"Date Created",dataIndex:"created",render:(v,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(S.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(v,S)=>e.jsx("a",{children:S!=null&&S.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,S)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlayStyle:{zIndex:9999},overlay:e.jsx(J,{children:e.jsx(J.Item,{icon:e.jsx(ue,{}),children:e.jsx(X,{title:"Delete Group",children:e.jsx(se,{title:"Are you sure to delete this ",onConfirm:()=>N(S==null?void 0:S.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(S!=null&&S.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})})})}),children:e.jsx("a",{className:"ant-dropdown-link",onClick:L=>L.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],R=async(v,S="",L=20)=>{var j;A(!0),Ys(v,S,L,parseInt(((j=t.schoolEducationLevel)==null?void 0:j.id.toString())??"0")).then(T=>{T&&(u(T.total),c([...T.results]))}),A(!1)};return s.useEffect(()=>{R(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:16,children:e.jsx(a,{layout:"vertical",form:q,onFinish:v=>{C(v.key),n.length=0,R(1,v.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:M?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{size:"large",icon:e.jsx(ce,{}),onClick:()=>i(!0),children:"Add Group"})})]}),e.jsx(me,{loading:k,columns:b,dataSource:n,pagination:{onChange:(v,S)=>{o(S),R(v,h,S)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:"Adding School Education Level Group",anchor:"right",onClose:v=>i(v),open:l,noOverFlow:!0,width:"35vw",children:e.jsx(_r,{randKey:Math.random(),onAdd:E,educationLevel:t.schoolEducationLevel})})]})},{Option:Ur}=H,rt=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(null),d=async o=>{i(!0),Os(o,t.regionId??0).then(h=>{h&&c(h.results)}),i(!1)};return s.useEffect(()=>{t.regionId&&(u(null),d(""))},[t.regionId]),e.jsx(e.Fragment,{children:e.jsx(a.Item,{name:t.name??"districtId",label:t.label??"District",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"District")+"!"}],children:e.jsx(H,{loading:l,size:t.size??"large",value:m||t.districtId,disabled:!t.regionId,placeholder:"Please Choose "+(t.label??"District ...")+"!",style:{width:220},showSearch:!1,optionFilterProp:"children",filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),onSearch:o=>{o.length>3?d(o):d("")},onChange:o=>{o&&(u(o),t.onChange(parseInt(o)))},dropdownStyle:{zIndex:9999},children:n.map(o=>e.jsx(Ur,{value:parseInt(o.id.toString()),children:o.name}))})})})},{Option:Wr}=H,ns=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(null),d=async o=>{i(!0);const{data:h}=await w.custom({url:"",method:"get",meta:{operation:"schoolEducationLevelGroups",variables:{key:{value:o,type:"String",required:!1},schoolEducationLevelId:{value:t.educationLevelId,type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});c(h.results),i(!1)};return s.useEffect(()=>{t.educationLevelId&&d("")},[t.educationLevelId]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:l,children:e.jsx(a.Item,{name:t.name??"groupId",label:t.label??"Education Level Group",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"Ward")+"!"}],children:e.jsx(H,{size:"large",value:m||t.groupId,disabled:!t.educationLevelId,placeholder:"Please Choose School Education Level Group ...",style:{width:450},showSearch:!1,optionFilterProp:"children",filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),onSearch:o=>{o.length>3?d(o):d("")},onChange:o=>{o&&(u(o),t.onChange(parseInt(o)))},dropdownStyle:{zIndex:9999},children:n.map(o=>e.jsx(Wr,{value:parseInt(o.id.toString()),children:o.name}))})})})})},{Option:Vr}=H,lt=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(null),[m,u]=s.useState(!0),d=async o=>{u(!0),Ks(o).then(h=>{h&&c(h.results),u(!1)})};return s.useEffect(()=>{d("")},[]),e.jsx(e.Fragment,{children:e.jsx(a.Item,{name:t.name??"regionId",label:t.label??"Region",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"Region")+"!"}],children:e.jsx(H,{loading:m,placeholder:"Please Choose "+(t.label??"Region ...")+"!",style:{width:220},size:t.size??"large",showSearch:!0,value:l||t.regionId,onChange:o=>{i(o),t.onChange(parseInt(o))},optionFilterProp:"children",filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),onSearch:o=>{o.length>3?d(o):d("")},dropdownStyle:{zIndex:9999},children:n.map(o=>e.jsx(Vr,{value:parseInt(o.id.toString()),children:o.name}))})})})},{Option:$r}=H,at=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(null),d=async o=>{i(!0),_s(o,t.districtId).then(h=>{h&&c(h.results)}),i(!1)};return s.useEffect(()=>{t.districtId&&(u(null),d(""))},[t.districtId]),e.jsx(e.Fragment,{children:e.jsx(a.Item,{name:t.name??"wardId",label:t.label??"Ward",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"Ward")+"!"}],children:e.jsx(H,{loading:l,size:t.size??"large",value:m||t.wardId,disabled:!t.districtId,placeholder:"Please Choose "+(t.label??"Ward ...")+"!",style:{width:220},showSearch:!1,optionFilterProp:"children",filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),onSearch:o=>{o.length>3?d(o):d("")},onChange:o=>{u(o),t.onChange(parseInt(o))},dropdownStyle:{zIndex:9999},children:n.map(o=>e.jsx($r,{value:parseInt(o.id.toString()),children:o.name}))})})})},{Option:ut}=H,rs=[];for(let t=2022;t<new Date().getFullYear()+5;t++)rs.push(e.jsx(ut,{children:t.toString()},t));const Dt=t=>{var p,F;const[n,c]=s.useState(null),[l,i]=s.useState(null),[m,u]=s.useState(null),[d,o]=s.useState(null),[h,C]=s.useState(null),[k,A]=s.useState(null),[q,I]=s.useState(null),[M]=a.useForm(),[E,N]=s.useState(""),b=async r=>{I(r.format("YYYY-MM-DD"))},R=async r=>{A(r)},v=async r=>{M.setFieldsValue({year:parseInt(r.toString())}),C(parseInt(r.toString()))},S=async r=>{o(r)},L=async r=>{u(r)},j=async r=>{c(r)},T=async r=>{i(r)},f=async r=>{var U;const{data:g}=await w.custom({url:"",method:"post",meta:{operation:"createSchoolEducationLevelStudent",variables:{schoolEducationLevelStudentId:{value:parseInt(((U=r.schoolEducationLevelStudentId)==null?void 0:U.toString())??"0"),type:"Int",required:!1},schoolEducationLevelId:{value:parseInt(t.educationLevel.id.toString()),type:"Int",required:!0},firstName:{value:r.firstName,type:"String",required:!0},middleName:{value:r.middleName,type:"String",required:!0},lastName:{value:r.lastName,type:"String",required:!0},email:{value:r.email,type:"String",required:!1},phones:{value:r.phones,type:"[String]",required:!1},registrationNumber:{value:r.registrationNumber,type:"String",required:!0},year:{value:parseInt(r.year.toString()),type:"Int",required:!0},gender:{value:r.gender,type:"String",required:!0},groupId:{value:r.groupId,type:"Int",required:!1},regionId:{value:r.regionId,type:"Int",required:!1},districtId:{value:r.districtId,type:"Int",required:!1},wardId:{value:r.wardId,type:"Int",required:!1},dob:{value:r.dob,type:"String",required:!1}},fields:["success","message",{schoolEducationLevelStudent:Bs}]}}).catch(()=>(x.error("Error occured while creating student"),{data:null})).then($=>$);g&&(g.success?(x.success(g.message),t.onAdd(g.schoolEducationLevelStudent,t.editting),M.resetFields()):(N(g.message),x.error(g.message)))};return s.useEffect(()=>{var r,g,U,$,Y,G,Z,xe,ye,ve,_,D,te,ee,he,Re,Pe,De,Ee,ze,z,y,Q,pe,Te,be,Ve,$e;o((g=(r=t.student)==null?void 0:r.group)==null?void 0:g.id),C((U=t.student)==null?void 0:U.year),A(($=t.student)==null?void 0:$.member.gender),c((G=(Y=t.student)==null?void 0:Y.region)==null?void 0:G.id),i((xe=(Z=t.student)==null?void 0:Z.district)==null?void 0:xe.id),u((ve=(ye=t.student)==null?void 0:ye.ward)==null?void 0:ve.id),M.setFieldsValue({firstName:(_=t.student)==null?void 0:_.member.firstName,middleName:(D=t.student)==null?void 0:D.member.middleName,lastName:(te=t.student)==null?void 0:te.member.lastName,email:(ee=t.student)==null?void 0:ee.member.email,registrationNumber:(he=t.student)==null?void 0:he.member.registrationNumber,year:(Re=t.student)==null?void 0:Re.year,gender:(Pe=t.student)==null?void 0:Pe.member.gender,groupId:(Ee=(De=t.student)==null?void 0:De.group)==null?void 0:Ee.id,regionId:(z=(ze=t.student)==null?void 0:ze.region)==null?void 0:z.id,districtId:(Q=(y=t.student)==null?void 0:y.district)==null?void 0:Q.id,wardId:(Te=(pe=t.student)==null?void 0:pe.ward)==null?void 0:Te.id}),(be=t.student)!=null&&be.member.dob&&(I(Ye((Ve=t.student)==null?void 0:Ve.member.dob)),M.setFieldsValue({dob:Ye(($e=t.student)==null?void 0:$e.member.dob)}))},[t.editting,t.student,t.educationLevel]),e.jsxs(e.Fragment,{children:[E.length>0&&e.jsx(Ie.Alert,{message:"Error",description:E,closable:!0}),e.jsxs(a,{layout:"vertical",form:M,onFinish:r=>{var g;t.editting&&(r.schoolEducationLevelStudentId=(g=t.student)==null?void 0:g.id),r.groupId=parseInt(d),r.year=h,r.dob=q,r.regionId=parseInt(n),r.districtId=parseInt(l),r.wardId=parseInt(m),f(r)},requiredMark:!0,children:[e.jsx(a.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(a.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(a.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10},children:e.jsx(X,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(P,{type:"dashed",onClick:()=>x("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(a.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(K,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(a.Item,{name:"phones",label:"Phones Number",rules:[{required:!1,type:"string",message:"Please input Phones Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Phones Numbers ..."})}),e.jsxs(je,{direction:"horizontal",children:[e.jsx(a.Item,{name:"dob",label:"Date of Birth",rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(st,{onChange:b,disabledDate:r=>r&&r>Ye().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(a.Item,{name:"gender",label:"Gender",rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:k,children:e.jsxs(H,{placeholder:"Please Choose Gender ...",style:{width:220},onChange:R,dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(ut,{value:"female",children:"Female"}),e.jsx(ut,{value:"male",children:"Male"})]})}),e.jsx(a.Item,{name:"year",label:"Study Year",rules:[{required:!0,type:"integer",message:"Please choose Year"}],initialValue:h?parseInt(h.toString()):new Date().getFullYear(),children:e.jsx(H,{value:h?parseInt(h.toString()):new Date().getFullYear(),placeholder:"Please Choose Year ...",style:{width:220},onChange:v,dropdownStyle:{zIndex:9999},children:rs})})]}),e.jsxs(je,{direction:"horizontal",children:[e.jsx(lt,{onChange:j,regionId:n,name:"region",label:"Region",size:"middle",required:!0}),e.jsx(rt,{regionId:parseInt(n),districtId:l,onChange:T,name:"district",label:"District",size:"middle",required:!0}),e.jsx(at,{districtId:parseInt(l),wardId:m,onChange:L,name:"ward",label:"Ward",size:"middle",required:!1})]}),e.jsx(ns,{educationLevelId:parseInt(t.educationLevel.id),groupId:(F=(p=t.student)==null?void 0:p.group)==null?void 0:F.id,onChange:S,name:"group",label:"School Education Level Group",size:"middle",required:!1}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},{Option:ot}=H,ht=[];for(let t=2022;t<new Date().getFullYear()+5;t++)ht.push(t);const Hr=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(new Date().getFullYear()),[m,u]=s.useState(!0),[d]=a.useForm(),[o,h]=s.useState([]),[C,k]=s.useState(""),A=M=>{u(M)},q=async(M,E="",N=20)=>{var R;const{data:b}=await w.custom({url:"",method:"get",meta:{operation:"schoolEducationLevelsToMigrate",variables:{schoolEducationLevelId:{value:parseInt(((R=t.schoolEducationLevel)==null?void 0:R.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Us}]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(v=>v);b&&h(b.results)},I=async M=>{var N;c(!0);const{data:E}=await w.custom({url:"",method:"post",meta:{operation:"studentsMigration",variables:{schoolEducationLevelId:{value:parseInt(((N=t.schoolEducationLevel)==null?void 0:N.id.toString())??"0"),type:"Int",required:!0},schoolEducationLevelToId:{value:M.school_education_level_to_id,type:"Int",required:!0},yearFrom:{value:M.yearFrom,type:"Int",required:!0},yearTo:{value:M.yearTo,type:"Int",required:!0},honor:{value:M.honor,type:"Boolean",required:!0}},fields:["success","message"]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(b=>b);E&&(E.success?(x.success(E.message),d.resetFields(),t.onFinish(M.yearTo)):(k(E.message),x.error(E.message))),c(!1)};return s.useEffect(()=>{d.resetFields(),q(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:10},children:[e.jsx(Ie.Alert,{message:"Info",description:"Only Active Members(Students) will be migration"}),C.length>0&&e.jsx(Ie.Alert,{message:"Error",description:C,closable:!0})]}),e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:d,onFinish:M=>{I(M)},requiredMark:!0,children:[e.jsx(a.Item,{name:"school_education_level_to_id",label:"School Education Level to Migrate From",rules:[{required:!0,type:"integer",message:"Please choose ..."}],children:e.jsx(H,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:"",onChange:M=>{},dropdownStyle:{zIndex:9999},children:o.map(M=>e.jsx(ot,{value:parseInt(M.id.toString()),children:M.educationLevel.name},M.id.toString()))})}),e.jsx(a.Item,{name:"yearFrom",label:"Year to Migrate From",initialValue:l,rules:[{required:!0,type:"integer",message:"Please choose ..."}],children:e.jsx(H,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:new Date().getFullYear(),onChange:M=>i(M),dropdownStyle:{zIndex:9999},children:ht.map(M=>e.jsx(ot,{value:M,children:M.toString()},M.toString()))})}),e.jsx(a.Item,{name:"yearTo",label:"Year to Migrate To",rules:[{required:!0,type:"integer",message:"Please choose ..."}],children:e.jsx(H,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:"",onChange:M=>{},dropdownStyle:{zIndex:9999},children:ht.filter(M=>M>l).map(M=>e.jsx(ot,{value:M,children:M.toString()},M.toString()))})}),e.jsx(a.Item,{name:"honor",label:"Honor Education Examinations Results",initialValue:m,rules:[{required:!0,type:"boolean",message:"Please choose ..."}],children:e.jsx(hr,{defaultChecked:!0,onChange:A})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})]})},{Option:ls}=H,as=[e.jsx(ls,{value:"",children:"Please choose Academic Year"})];for(let t=2022;t<new Date().getFullYear()+5;t++)as.push(e.jsx(ls,{value:t,children:t.toString()},t.toString()));const Jr=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,Qr=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(""),m=d=>{t.form.setFieldsValue({groupId:d})},u=async d=>{c(!0),i(""),Ws(d).then(o=>{o&&(o.success?(x(o.message),t.onFinish()):(i(o.message),x.error(o.message)))}),c(!1)};return s.useEffect(()=>{},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:10},children:[e.jsx(Ie.Alert,{message:"Info",description:"Please for a successfully upload, please use the template provided below, make sure the columns names remains the same"}),l.length>0&&e.jsx(Ie.Alert,{message:"Error",description:l,closable:!0})]}),e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:d=>{d.school_education_level_id=t.educationLevel.id,u(d)},requiredMark:!0,children:[e.jsx(ns,{educationLevelId:parseInt(t.educationLevel.id),onChange:m,name:"groupId",label:"Education Level Group"}),e.jsx(a.Item,{name:"year",label:"Academic Year",rules:[{required:!0,type:"integer",message:"Please select academic year"}],children:e.jsx(H,{size:"large",style:{width:"100%"},placeholder:"Please Select Academic Year",onChange:d=>{},dropdownStyle:{zIndex:9999},children:as})}),e.jsx(a.Item,{label:"Students Excel File",children:e.jsx(a.Item,{name:"files",valuePropName:"fileList",getValueFromEvent:Jr,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload students excel file"}],children:e.jsxs(St.Dragger,{name:"files",accept:".xls, .xlsx",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(nt,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsxs("span",{children:["Download Uploading Excel Format Template",e.jsx("span",{style:{marginLeft:10},children:e.jsxs("a",{href:ge.student_registration_template_file,target:"_blank",children:[e.jsx(vt,{}),"Download"]})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Register"})})]})})]})},{Option:is}=H,mt=[e.jsx(is,{value:null,children:"Please Select Year"},"default")];for(let t=2022;t<new Date().getFullYear()+5;t++)mt.push(e.jsx(is,{value:t,children:t.toString()},t));const wr=t=>{const[n,c]=s.useState(null),[l,i]=s.useState(null),m=async o=>{c(o)},u=async o=>{i(o)},d=async(o,h)=>{const{data:C}=await w.custom({url:"",method:"post",meta:{operation:"studentsLoginAuthorize",variables:{authorizationType:{value:o,type:"Int",required:!0},schoolEducationLevelId:{value:parseInt(t.schoolEducationLevel.id),type:"Int",required:!0},year:{value:h,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(k=>k);C&&(C.success?(x.success(C.message),t.onFinish()):x.error(C.message))};return s.useEffect(()=>{},[]),e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{fontSize:20},children:"Platform supports Two mode of Default Login Authorizations to Students"}),e.jsxs(tt,{actions:[e.jsx(se,{title:e.jsx(e.Fragment,{children:e.jsxs(je,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Authorize Login?"}),e.jsx("span",{style:{height:10}}),e.jsx("span",{children:e.jsx(H,{value:n||null,placeholder:"Please Choose Year ...",style:{width:220},onChange:m,allowClear:!0,onClear:()=>c(null),dropdownStyle:{zIndex:9999},children:mt})})]})}),onConfirm:()=>d(1,n),onCancel:()=>{},okButtonProps:{disabled:n===null},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(P,{icon:e.jsx(et,{}),children:"Authorize"})})],children:[e.jsxs("span",{style:{fontSize:18},children:["By Using Registration Number of Students as Default ",e.jsx("b",{children:"Username"})," ","and",e.jsx("b",{children:"Password"})]}),e.jsx("span",{style:{display:"block",color:"red"},children:"This action will be applicable only to those students with no Login Access to the Platform"})]}),e.jsxs(tt,{actions:[e.jsx(se,{title:e.jsx(e.Fragment,{children:e.jsxs(je,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Authorize Login?"}),e.jsx("span",{style:{height:10}}),e.jsx("span",{children:e.jsx(H,{value:l||null,placeholder:"Please Choose Year ...",style:{width:220},onChange:u,allowClear:!0,onClear:()=>i(null),dropdownStyle:{zIndex:9999},children:mt})})]})}),onConfirm:()=>d(2,l),onCancel:()=>{},okButtonProps:{disabled:l===null},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(P,{icon:e.jsx(et,{}),children:"Authorize"})})],style:{marginTop:50},children:[e.jsxs("span",{style:{fontSize:18},children:["By Using Email/Phone of Students as Default ",e.jsx("b",{children:"Username"}),", While Default",e.jsx("b",{children:"Password"})," will be Randomly Generated"]}),e.jsx("span",{style:{display:"block",color:"red"},children:"This action will be applicable only to those students with no Login Access to the Platform"})]})]})},{Option:Xr}=H,os=[];for(let t=2022;t<new Date().getFullYear()+5;t++)os.push(e.jsx(Xr,{children:t.toString()},t.toString()));const Zr=t=>{var De,Ee,ze;const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(!1),[h,C]=s.useState(0),[k,A]=s.useState(20),[q,I]=s.useState(""),[M,E]=s.useState(!0),[N]=a.useForm(),[b]=a.useForm(),[R]=a.useForm(),[v,S]=s.useState(!1),[L,j]=s.useState(new Date().getFullYear()),[T,f]=s.useState(!1),[p,F]=s.useState(!1),[r,g]=s.useState([]),[U,$]=s.useState(!1),Y=async z=>{c(z),$(!0)},G=async()=>{F(!0)},Z=z=>{c(z),S(!0)},xe=async(z,y=!1)=>{y?(i(l.map(Q=>Q.id===z.id?z:Q)),S(!1)):i([z,...l])},ye=async(z,y)=>{Hs(z,y).then(Q=>{Q&&(Q.success?(x.success(Q.message),i(l.filter(pe=>pe.id!==z))):x.error(Q.message))})},ve=async z=>{Js(z).then(y=>{y&&(y.success?(x.success(y.message),i(l.filter(Q=>Q.id!==z))):x.error(y.message))})},_=async()=>{he(1,"",20,L)},D=z=>{z.target.checked&&g(r.concat(parseInt(z.target.value))),z.target.checked||g(r.filter(y=>y!==parseInt(z.target.value)))},te=e.jsx(J,{items:[{key:"1",label:e.jsx(se,{title:"Are you sure to delete All Students?",onConfirm:()=>x("Deleting"),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsxs("a",{children:[e.jsx(ue,{color:"red",style:{color:"red"}}),e.jsx("span",{style:{marginLeft:3},children:"Delete All"})]})})},{key:"2",label:e.jsx(se,{title:"Are you sure to delete All Selected Students?",onConfirm:()=>x("Deleting Selected"),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsxs("a",{children:[e.jsx(ue,{color:"red",style:{color:"red"}}),e.jsx("span",{style:{marginLeft:3},children:"Delete Selected"})]})})}]}),ee=[{title:e.jsx(e.Fragment,{children:e.jsx(Me,{overlay:te,overlayStyle:{zIndex:9999},children:e.jsx("a",{onClick:z=>z.preventDefault(),children:e.jsxs(je,{children:["Action(s)",e.jsx(or,{})]})})})}),dataIndex:"year",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:e.jsx(Le,{onChange:D,value:y.id,defaultChecked:r.filter(pe=>pe===y.id).length>0})})},{title:"Year",dataIndex:"year",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.year})},{title:"Reg#",dataIndex:"registrationNumber",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:e.jsx("a",{children:y.member.registrationNumber})})},{title:"First Name",dataIndex:"firstName",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.member.firstName})},{title:"Middle Name",dataIndex:"middleName",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.member.middleName})},{title:"Last Name",dataIndex:"lastName",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.member.lastName})},{title:"Group",dataIndex:"group",fixed:!0,render:(z,y,Q)=>{var pe;return e.jsx("span",{children:y.group?(pe=y.group)==null?void 0:pe.name:"No Group"})}},{title:"Gender",dataIndex:"gender",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.member.gender})},{title:"Phone",dataIndex:"phone",fixed:!0,render:(z,y,Q)=>e.jsxs(e.Fragment,{children:[y.member.phone&&e.jsx("span",{children:y.member.phone}),!y.member.phone&&e.jsxs(e.Fragment,{children:[e.jsx(le,{color:"red",children:"No Phone Number"}),e.jsx(X,{title:"View/Add Phone Number",color:"green",children:e.jsx(P,{icon:e.jsx(Ge,{}),onClick:()=>Y(y)})})]})]})},{title:"Email",dataIndex:"email",fixed:!0,render:(z,y,Q)=>e.jsxs(e.Fragment,{children:[y.member.email&&e.jsx("span",{children:y.member.email}),!y.member.email&&e.jsxs(e.Fragment,{children:[e.jsx(le,{color:"red",children:"No Email Address"}),e.jsx(X,{title:"View/Add Email Address",color:"green",children:e.jsx(P,{icon:e.jsx(Ge,{}),onClick:()=>Y(y)})})]})]})},{title:"Authed",dataIndex:"isAuthed",render:(z,y,Q)=>e.jsx("a",{children:y.member.user?e.jsx(e.Fragment,{children:y!=null&&y.member.isAuthed?e.jsx(le,{color:"green",children:"Authed"}):e.jsx(le,{color:"red",children:"Not Authed"})}):e.jsx(le,{color:"red",children:"Not Authed"})})},{title:"Status",dataIndex:"isActive",render:(z,y,Q)=>e.jsx("a",{children:y!=null&&y.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(z,y,Q)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlayStyle:{zIndex:9999},overlay:e.jsxs(J,{children:[y!=null&&y.isActive?e.jsx(J.Item,{icon:e.jsx(dr,{}),children:e.jsx(X,{title:"Blocking Student",placement:"left",color:"red",children:e.jsx(se,{title:"Are you sure to Block Student ",onConfirm:()=>ye(y==null?void 0:y.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(y!=null&&y.canManage),overlayStyle:{zIndex:9999},children:e.jsx(P,{type:"text",disabled:!(y!=null&&y.canManage),children:"Block"})})})}):e.jsx(J.Item,{icon:e.jsx(Ht,{}),children:e.jsx(X,{title:"Unblocking Student",placement:"left",color:"green",children:e.jsx(se,{title:"Are you sure to Unblock Student ",onConfirm:()=>ye(y==null?void 0:y.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(y!=null&&y.canManage),overlayStyle:{zIndex:9999},children:e.jsx(P,{type:"text",disabled:!(y!=null&&y.canManage),children:"Unblock"})})})}),e.jsx(J.Item,{icon:e.jsx(ue,{}),children:e.jsx(X,{title:"Delete Student",placement:"left",children:e.jsx(se,{title:"Are you sure to delete Student ",onConfirm:()=>ve(y==null?void 0:y.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(y!=null&&y.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})})}),e.jsx(J.Item,{icon:e.jsx(Ne,{}),disabled:!(y!=null&&y.canEdit),onClick:()=>Z(y),children:e.jsx(X,{title:"Edit Student Informations",placement:"left",children:e.jsx("a",{rel:"noopener noreferrer",children:"Edit"})})}),e.jsx(J.Item,{icon:e.jsx(Jt,{}),disabled:!(y!=null&&y.canManage),onClick:()=>x("Credentials"),children:e.jsx(X,{title:"Recreate Credentials",placement:"left",children:e.jsx("a",{rel:"noopener noreferrer",children:"Reset Credentials"})})})]}),children:e.jsx("a",{className:"ant-dropdown-link",onClick:pe=>pe.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],he=async(z,y="",Q=20,pe=new Date().getFullYear())=>{var Te;$s(z,y,Q,pe,((Te=t.schoolEducationLevel)==null?void 0:Te.id)??0).then(be=>{be&&(C(be.total),i([...be.results]))}),E(!1)},Re=async()=>{he(1,"",20,L),b.resetFields()},Pe=async z=>{j(z),R.setFieldsValue({year:z}),he(1,"",20,z)};return s.useEffect(()=>{R.resetFields(),j(new Date().getFullYear()),he(1,"",20,L)},[t.randKey,t.schoolEducationLevel]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsxs(B,{span:24,style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:[e.jsx(P,{size:"large",disabled:l.length===0,icon:e.jsx(et,{}),onClick:()=>o(!0),children:"Auth"}),e.jsx(P,{size:"large",icon:e.jsx(ce,{}),onClick:()=>u(!0),children:"Add Student"}),e.jsx(P,{size:"large",icon:e.jsx(ct,{}),onClick:G,children:"From Another School"}),e.jsx(P,{size:"large",icon:e.jsx(ct,{}),onClick:G,children:"Students Migration From"}),e.jsx(P,{size:"large",icon:e.jsx($t,{}),onClick:()=>f(!0),children:"Upload Student"})]}),e.jsx(B,{span:2,children:e.jsx(a,{layout:"vertical",form:R,onFinish:z=>{},children:e.jsx(a.Item,{name:"year",children:e.jsx(H,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:L,value:L,onChange:z=>{j(parseInt(z.toString())),he(1,"",20,parseInt(z.toString()))},dropdownStyle:{zIndex:9999},children:os})})})}),e.jsx(B,{span:12,children:e.jsx(a,{layout:"vertical",form:N,onFinish:z=>{I(z.key),l.length=0,he(1,z.key,k,L)},children:e.jsxs(ne,{children:[e.jsx(B,{span:22,children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(B,{span:2,children:e.jsx(P,{icon:e.jsx(ie,{}),size:"large",onClick:()=>N.submit()})})]})})})]}),l.length===0&&e.jsx(Vs,{image:"/images/nodata.png",imageStyle:{height:180},description:e.jsx("span",{style:{fontSize:20},children:"There are not Students Registered, please you can use the registration menues above to Register Students"})}),l.length>0&&e.jsx(me,{loading:M,columns:ee,dataSource:l,pagination:{onChange:(z,y)=>{A(y),he(z,q,y,L)},total:h,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0,y:"calc(100vh - 298px)"}}),e.jsx(Se,{title:"Registering a Student for "+((De=t.schoolEducationLevel)==null?void 0:De.educationLevel.name),anchor:"right",onClose:z=>u(z),open:m,noOverFlow:!1,width:"80vw",children:e.jsx(Dt,{editting:!1,randKey:Math.random(),onAdd:xe,educationLevel:t.schoolEducationLevel})}),e.jsx(Se,{title:"Edit Student Informations",anchor:"right",onClose:z=>S(z),open:v,noOverFlow:!0,width:"70vw",children:e.jsx(Dt,{editting:!0,student:n,randKey:Math.random(),onAdd:xe,educationLevel:t.schoolEducationLevel})}),e.jsx(re,{title:`Upload Student for ${(Ee=t.schoolEducationLevel)==null?void 0:Ee.educationLevel.name}`,open:T,onClose:z=>f(z),children:e.jsx(Qr,{educationLevel:t.schoolEducationLevel,randKey:Math.random(),onFinish:Re,form:b}),width:"50vw"}),e.jsx(re,{title:"Students Login Authorization",open:d,onClose:z=>o(z),children:e.jsx(wr,{schoolEducationLevel:t.schoolEducationLevel,onFinish:_}),width:"50vw"}),e.jsx(re,{title:((ze=t.schoolEducationLevel)==null?void 0:ze.educationLevel.name)+" Students Migrations",open:p,onClose:z=>F(z),children:e.jsx(Hr,{randKey:Math.random(),schoolEducationLevel:t.schoolEducationLevel,onFinish:Pe}),width:"50vw"}),e.jsx(re,{title:(n==null?void 0:n.member.firstName)+" "+(n==null?void 0:n.member.middleName)+" "+(n==null?void 0:n.member.lastName)+" Contacts",open:U,onClose:z=>$(z),children:e.jsx(Ct,{type:"info",description:"Contacts"}),width:"50vw"})]})},el=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!0),[m,u]=s.useState(1),[d]=a.useForm(),[o,h]=s.useState(0),[C,k]=s.useState(0),[A,q]=s.useState(!0),[I,M]=s.useState(2);jt();const E=async(b,R)=>{Qs(b,R,I).then(v=>{v.success?(x.success(v.message),c(n.filter(S=>S.id.toString()!==b.toString())),t.onAdd(v.schoolEducationLevelSubject)):x.error(v.message)})},N=async(b,R="")=>{i(!0),ws(b,R,t.schoolEducationLevel.id).then(v=>{v&&(k(v.total),h(v.pages),u(v.page),q(v.hasNext),c([...v.results]))}),i(!1)};return s.useEffect(()=>{n.length=0,c([]),N(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(a,{layout:"vertical",form:d,onFinish:b=>{n.length=0,c([]),N(1,b.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search Subject(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(oe,{spinning:l,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"78vh",overflowY:"auto"},children:e.jsx(de,{itemLayout:"horizontal",dataSource:n,renderItem:b=>{var R;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(de.Item,{style:{margin:0,padding:0},actions:[e.jsx(se,{title:e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Are you sure you want to add"," ",e.jsx("b",{children:b.subject.name})," to"," ",e.jsx("b",{children:(R=t.schoolEducationLevel)==null?void 0:R.educationLevel.name}),"?"]}),e.jsx("div",{style:{marginTop:5},children:e.jsx(a,{layout:"vertical",children:e.jsx(a.Item,{label:"Max Number of Periods Per Week",children:e.jsx(_e,{size:"large",min:1,max:7,defaultValue:2,style:{width:"100%"},onChange:v=>{M(v)}})})})})]}),onConfirm:()=>E(b.id,t.schoolEducationLevel.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(P,{icon:e.jsx(Oe,{}),onClick:()=>{}})})],children:e.jsx(de.Item.Meta,{title:e.jsxs("a",{children:[b.subject.name,e.jsx("span",{style:{marginLeft:10},children:e.jsx(le,{color:"green",children:b.subject.schoolType.name})})]}),description:e.jsx(e.Fragment,{})})},"subject-"+b.id)})}})}),e.jsx("div",{style:{marginTop:10,marginBottom:10,display:"flex",justifyContent:"center"},children:e.jsx(Gt,{current:m,total:C,pageSize:10,onChange:b=>{N(b)},style:{textAlign:"center"}})})]})]})},tl=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState([]),[m,u]=s.useState([]),d=async()=>{const{data:h}=await w.custom({url:"",method:"post",meta:{operation:"createAlternateSubjects",variables:{educationLevelSubjectId:{value:parseInt(t.subject.id),type:"Int",required:!0},choices:{value:m,type:"[Int]",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error occured while Creating Alternate subjects"),{data:null})).then(C=>C);h&&(h.success?(x.success(h.message),o(),u([]),t.onFinish()):x.error(h.message))},o=async()=>{const{data:h}=await w.custom({url:"",method:"get",meta:{operation:"alternateSubjectsChoices",variables:{subjectId:{value:parseInt(t.subject.id),type:"Int",required:!0}},fields:["choices"]}}).catch(()=>(x.error("Error occured while Examinations Types"),{data:null})).then(C=>C);h&&i(h.choices)};return s.useEffect(()=>{o()},[t.randKey]),e.jsx(e.Fragment,{children:e.jsxs(oe,{spinning:n,children:[e.jsx(de,{dataSource:l,renderItem:h=>e.jsx(de.Item,{children:e.jsx(ne,{children:e.jsxs(B,{span:24,children:[h.disabled&&e.jsx(Le,{disabled:h.disabled,checked:h.disabled,children:e.jsx("span",{style:{marginLeft:5},children:h.name})}),!h.disabled&&e.jsx(Le,{onChange:C=>{C.target.checked?u([...m,h.value]):u(m.filter(k=>k!==h.value))},children:e.jsx("span",{style:{marginLeft:5},children:h.name})})]})})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{size:"large",disabled:m.length===0,onClick:()=>d(),children:"Save"})})]})})},sl=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(0),[m,u]=s.useState(20),[d,o]=s.useState(""),[h,C]=s.useState(!0),[k]=a.useForm(),q=!fe.useBreakpoint().lg,I=async N=>{var b;Zs(N,parseInt(((b=t.schoolEducationLevelSubject)==null?void 0:b.id.toString())??"0")).then(R=>{R&&(R.success?(x.success(R.message),c(n.filter(v=>v.id!==N)),t.onAdd(R.schoolEducationLevelSubjectTeacher)):x.error(R.message))})},M=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(N,b,R)=>e.jsx("span",{children:e.jsx("a",{children:b.user.fullName})})},{title:"",dataIndex:"action",render:(N,b,R)=>{var v;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Adding "+((v=t.schoolEducationLevelSubject)==null?void 0:v.schoolSubject.subject.name)+" Teacher",placement:"bottom",children:e.jsx(P,{icon:e.jsx(Zt,{}),onClick:()=>I(b==null?void 0:b.id),children:"Add"})})})}}],E=async(N,b="",R=20)=>{var v;C(!0),Xs(N,parseInt(((v=t.schoolEducationLevelSubject)==null?void 0:v.id.toString())??"0"),b,R).then(S=>{S&&(i(S.total),c([...S.results])),C(!1)})};return s.useEffect(()=>{E(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{style:{marginTop:10},children:e.jsx(B,{span:16,children:e.jsx(a,{layout:"vertical",form:k,onFinish:N=>{o(N.key),n.length=0,E(1,N.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(me,{loading:h,columns:M,dataSource:n,pagination:{onChange:(N,b)=>{u(b),E(N,d,b)},total:l,pageSize:m,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}})]})},nl=t=>{var S;const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,A]=s.useState(!0),[q]=a.useForm(),M=!fe.useBreakpoint().lg,E=async L=>{c([L,...n])},N=async L=>{tn(L).then(j=>{j&&(j.success?(x.success(j.message),c(n.filter(T=>T.id!==L))):x.error(j.message))})},b=async(L,j)=>{sn(L,j).then(T=>{T&&(T.success?(x.success(T.message),c(n.map(f=>f.id===L?T.schoolEducationLevelSubjectTeacher:f))):x.error(T.message))})},R=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(L,j,T)=>e.jsx("span",{children:e.jsx("a",{children:j.schoolMember.user.fullName})})},{title:"Date Created",dataIndex:"created",render:(L,j,T)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(j.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(L,j,T)=>e.jsx("a",{children:j!=null&&j.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(L,j,T)=>{var f,p,F,r,g;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsxs(J,{children:[e.jsx(J.Item,{icon:e.jsx(ue,{}),children:e.jsx(se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Remove "}),e.jsx("span",{style:{fontWeight:"bolder"},children:j.schoolMember.user.fullName}),e.jsx("span",{children:" as "}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:3},children:(f=t.schoolEducationLevelSubject)==null?void 0:f.schoolSubject.subject.name}),e.jsx("span",{style:{marginLeft:3},children:"Teacher"})]}),onConfirm:()=>N(j==null?void 0:j.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(j!=null&&j.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Remove"})})}),j!=null&&j.isActive?e.jsx(J.Item,{icon:e.jsx(es,{}),children:e.jsx(se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Lock "}),e.jsx("span",{style:{fontWeight:"bolder"},children:j.schoolMember.user.fullName}),e.jsx("span",{children:" as "}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:3},children:(p=t.schoolEducationLevelSubject)==null?void 0:p.schoolSubject.subject.name}),e.jsx("span",{style:{marginLeft:3},children:"Teacher"})]}),onConfirm:()=>b(j==null?void 0:j.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(j!=null&&j.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Block"})})}):e.jsx(J.Item,{icon:e.jsx(Qt,{}),children:e.jsx(se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Unblock "}),e.jsx("span",{style:{fontWeight:"bolder"},children:j.schoolMember.user.fullName}),e.jsx("span",{children:" as "}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:3},children:(g=(r=(F=t.schoolEducationLevelSubject)==null?void 0:F.schoolSubject)==null?void 0:r.subject)==null?void 0:g.name}),e.jsx("span",{style:{marginLeft:3},children:"Teacher"})]}),onConfirm:()=>b(j==null?void 0:j.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(j!=null&&j.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Unblock"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}}],v=async(L,j="",T=20)=>{var f;A(!0),en(L,j,T,((f=t.schoolEducationLevelSubject)==null?void 0:f.id)??0).then(p=>{p&&(u(p.total),c([...p.results]))}),A(!1)};return s.useEffect(()=>{v(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:16,children:e.jsx(a,{layout:"vertical",form:q,onFinish:L=>{C(L.key),n.length=0,v(1,L.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:M?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{size:"large",icon:e.jsx(ce,{}),onClick:()=>i(!0),children:"Add Teacher"})})]}),e.jsx(me,{loading:k,columns:R,dataSource:n,pagination:{onChange:(L,j)=>{o(j),v(L,h,j)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}}),e.jsx(re,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{marginRight:3},children:"Adding"}),e.jsx("span",{style:{fontWeight:"bolder"},children:(S=t.schoolEducationLevelSubject)==null?void 0:S.schoolSubject.subject.name}),e.jsx("span",{style:{marginLeft:3},children:"Teachers"})]}),width:"40vw",open:l,onClose:L=>i(L),children:e.jsx(sl,{schoolEducationLevelSubject:t.schoolEducationLevelSubject,randKey:Math.random(),onAdd:E})})]})},rl=t=>{var Y,G,Z,xe,ye,ve;const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(!1),[h,C]=s.useState(0),[k,A]=s.useState(20),[q,I]=s.useState(""),[M,E]=s.useState(!0),[N]=a.useForm(),[b,R]=s.useState(!1),[v,S]=s.useState(0),j=!fe.useBreakpoint().lg,T=async _=>{c(_),R(!0)},f=async _=>{c(_),o(!0)},p=async _=>{i([_,...l])},F=async _=>{ln(_).then(D=>{D.success?(x.success(D.message),i(l.filter(te=>te.id!==_))):x.error(D.message)})},r=async(_,D)=>{an(_,D).then(te=>{te.success?(x.success(te.message),i(l.map(ee=>ee.id===_?te.schoolEducationLevelSubject:ee))):x.error(te.message)})},g=[{title:"Name",dataIndex:"name",fixed:!0,render:(_,D,te)=>{var ee;return e.jsxs("span",{children:[D.schoolSubject.subject.name,(D==null?void 0:D.combination)&&e.jsx(le,{style:{marginLeft:10},color:"red",children:(ee=D==null?void 0:D.combination)==null?void 0:ee.name})]})}},{title:"Subject Type",dataIndex:"subjecttype",fixed:!0,render:(_,D,te)=>e.jsx("span",{children:D.subjectTypeDisplay})},{title:"Teachers",dataIndex:"teachers",fixed:!0,render:(_,D,te)=>{var ee;return e.jsx("span",{children:e.jsx(X,{title:((ee=t.schoolEducationLevel)==null?void 0:ee.educationLevel.name)+"  "+D.schoolSubject.subject.name+" Teachers",children:e.jsx("a",{onClick:()=>f(D),children:D.totalTeachers})})})}},{title:"Max Periods/Week",dataIndex:"maxPeriodsPerWeek",render:(_,D,te)=>e.jsx(e.Fragment,{children:e.jsx(Ie.Popconfirm,{title:"Ajust Max Periods",description:e.jsx(e.Fragment,{children:e.jsx(a,{layout:"vertical",children:e.jsx(a.Item,{label:"Max Number of Periods Per Week "+v,children:e.jsx(_e,{defaultValue:v,onChange:ee=>S(ee),style:{width:"100%"}})})})}),onConfirm:()=>{nn(D.id,v===0||v===null?D.maxPeriodsPerWeek:v).then(ee=>{ee&&ee.success&&i(l.map(he=>he.id===ee.schoolEducationLevelSubject.id?ee.schoolEducationLevelSubject:he))})},onCancel:()=>{},okButtonProps:{disabled:v===0||v===null},onOpenChange:ee=>{S(ee?D.maxPeriodsPerWeek:0)},okText:"Update",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(le,{style:{cursor:"pointer"},children:D.maxPeriodsPerWeek})})})},{title:"Date Created",dataIndex:"created",render:(_,D,te)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(D.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(_,D,te)=>e.jsx(e.Fragment,{children:D!=null&&D.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(_,D,te)=>{var ee;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsxs(J,{children:[e.jsx(J.Item,{icon:e.jsx(ue,{}),children:e.jsx(X,{title:"Delete Subject",children:e.jsx(Ie.Popconfirm,{title:"Are you sure to delete this ",onConfirm:()=>F(D==null?void 0:D.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(D!=null&&D.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})})}),e.jsx(J.Item,{icon:e.jsx(Zt,{}),onClick:()=>f(D),children:e.jsx(X,{title:((ee=t.schoolEducationLevel)==null?void 0:ee.educationLevel.name)+"  "+D.schoolSubject.subject.name+" Teachers",children:e.jsx("a",{children:"Teachers"})})}),D!=null&&D.isActive?e.jsx(J.Item,{icon:e.jsx(es,{}),children:e.jsx(Ie.Popconfirm,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Block "}),e.jsx("span",{style:{fontWeight:"bolder"},children:D.schoolSubject.subject.name})]}),onConfirm:()=>r(D==null?void 0:D.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(D!=null&&D.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Block"})})}):e.jsx(J.Item,{icon:e.jsx(Qt,{}),children:e.jsx(Ie.Popconfirm,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Unblock "}),e.jsx("span",{style:{fontWeight:"bolder"},children:D.schoolSubject.subject.name})]}),onConfirm:()=>r(D==null?void 0:D.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(D!=null&&D.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Block"})})}),e.jsx(J.Item,{icon:e.jsx(xr,{}),onClick:()=>T(D),children:e.jsx(X,{title:"Create Alternate Subjects",children:e.jsx("a",{children:"Create Alternate Subjects"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:he=>he.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}}],U=async(_,D="",te=20)=>{var ee;rn(_,D,te,parseInt(((ee=t.schoolEducationLevel)==null?void 0:ee.id.toString())??"0")).then(he=>{C(he.total),i([...he.results])}),E(!1)},$=async()=>{U(1,"",20)};return s.useEffect(()=>{U(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:16,children:e.jsx(a,{layout:"vertical",form:N,onFinish:_=>{I(_.key),l.length=0,U(1,_.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),["osc","pr"].some(_=>{var D,te;return _===((te=(D=t.schoolEducationLevel)==null?void 0:D.educationLevel)==null?void 0:te.schoolType.code.toLowerCase())})&&e.jsx(B,{span:j?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{size:"large",icon:e.jsx(ce,{}),onClick:()=>u(!0),children:"Add Subject"})})]}),e.jsx(me,{loading:M,columns:g,dataSource:l,pagination:{onChange:(_,D)=>{A(D),U(_,q,D)},total:h,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}}),e.jsx(Se,{title:"Adding "+((Y=t.schoolEducationLevel)==null?void 0:Y.educationLevel.name)+" Subjects",anchor:"right",open:m,noOverFlow:!0,onClose:_=>u(_),width:"35vw",children:e.jsx(el,{randKey:Math.random(),onAdd:p,schoolEducationLevel:t.schoolEducationLevel})}),e.jsx(Se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{marginRight:5},children:(Z=(G=n==null?void 0:n.schoolSubject)==null?void 0:G.subject)==null?void 0:Z.name}),((xe=n==null?void 0:n.combination)==null?void 0:xe.name)&&e.jsx(le,{style:{marginLeft:5},color:"red",children:(ye=n==null?void 0:n.combination)==null?void 0:ye.name}),"Teachers"]}),ancho:"right",width:"45vw",onClose:_=>o(_),open:d,noOverFlow:!0,children:e.jsx(nl,{schoolEducationLevelSubject:n,randKey:Math.random()})}),e.jsx(re,{title:"Alternate "+((ve=n==null?void 0:n.schoolSubject)==null?void 0:ve.subject.name)+" Subject Creator",width:"35vw",open:b,onclose:_=>R(_),children:e.jsx(tl,{subject:n,onFinish:$})})]})},ll=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(0),[h,C]=s.useState(20),[k,A]=s.useState(""),[q,I]=s.useState(!0),[M]=a.useForm(),N=!fe.useBreakpoint().lg,[b,R]=s.useState(!1),[v,S]=s.useState(!1),[L,j]=s.useState(!1),[T,f]=s.useState(!1),[p,F]=s.useState(1),r=_=>{F(_)},g=_=>{c(_),j(!0)},U=_=>{c(_),f(!0)},$=_=>{c(_),S(!0)},Y=_=>{c(_),R(!0)},G=async _=>{i([_,...l])},Z=async _=>{dn(_).then(D=>{D&&(D.success?(x.success(D.message),i(l.filter(te=>te.id!==_))):x.error(D.message))})},xe=async _=>{cn(_,p).then(D=>{D&&(D.success?(x.success(D.message),i(l.map(te=>te.id===_?D.schoolEducationLevel:te))):x.error(D.message))})},ye=[{title:"Name",dataIndex:"name",fixed:!0,render:(_,D,te)=>e.jsx("span",{children:e.jsx("a",{children:D.educationLevel.name})})},{title:"School Type",dataIndex:"schoolType",fixed:!0,render:(_,D,te)=>e.jsx("span",{children:e.jsx(le,{color:"green",children:D.educationLevel.schoolType.name})})},{title:"Level Index",dataIndex:"levelIndex",fixed:!0,render:(_,D,te)=>e.jsx("span",{children:e.jsx(se,{disabled:!0,title:e.jsx(e.Fragment,{children:e.jsxs(je,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Update Education Level Index?"}),e.jsx("div",{style:{height:"10px"}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Education Level Index"}),e.jsx("span",{children:e.jsx(_e,{min:1,max:10,defaultValue:D.levelIndex,onChange:r,style:{width:"100%"}})})]})}),onVisibleChange:ee=>{ee||F(D.levelIndex)},onConfirm:()=>xe(D.id),onCancel:()=>{},okText:"Update",cancelText:"No",okButtonProps:{disabled:p<1||p>10},overlayStyle:{zIndex:9999},children:e.jsx("a",{children:e.jsx(le,{color:"green",children:D.levelIndex})})})})},{title:"Date Created",dataIndex:"created",render:(_,D,te)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(D.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(_,D,te)=>e.jsx("a",{children:D!=null&&D.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(_,D,te)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsxs(J,{children:[e.jsx(J.Item,{icon:e.jsx(ue,{}),children:e.jsx(se,{title:"Are you sure to delete this task?",onConfirm:()=>Z(D.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!D.canDelete,overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})}),["osc","pr"].some(ee=>ee===D.educationLevel.schoolType.code.toLowerCase())&&e.jsx(J.Item,{icon:e.jsx(we,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>Y(D),children:"Groups"})}),["asc"].some(ee=>ee===D.educationLevel.schoolType.code)&&e.jsx(J.Item,{icon:e.jsx(we,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>$(D),children:"Combinations"})}),e.jsx(J.Item,{icon:e.jsx(we,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>U(D),children:"Students"})}),["osc","pr"].some(ee=>ee===D.educationLevel.schoolType.code.toLowerCase())&&e.jsx(J.Item,{icon:e.jsx(ue,{}),onClick:()=>g(D),children:e.jsx("a",{children:"Subjects"})}),["asc"].some(ee=>ee===D.educationLevel.schoolType.code.toLowerCase())&&e.jsx(J.Item,{icon:e.jsx(ue,{}),onClick:()=>g(D),children:e.jsx("a",{children:"Subjects"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:ee=>ee.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],ve=async(_,D="",te=20)=>{I(!0),on(_,D,te).then(ee=>{ee&&(o(ee.total),i([...ee.results]))}),I(!1)};return s.useEffect(()=>{ve(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:N?24:20,children:e.jsx(a,{layout:"vertical",form:M,onFinish:_=>{A(_.key),l.length=0,ve(1,_.key,h)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:N?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{icon:e.jsx(ce,{}),size:"large",onClick:()=>u(!0),children:"Add Education Level"})})]}),e.jsx(me,{loading:q,columns:ye,dataSource:l,pagination:{onChange:(_,D)=>{C(D),ve(_,k,D)},total:d,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:"Adding Education levels",onClose:_=>u(_),open:m,noOverFlow:!0,anchor:"right",width:"30vw",children:e.jsx(Yr,{randKey:Math.random(),onAdd:G})}),e.jsx(re,{title:"Education Level Groups",open:b,onClose:_=>R(_),width:"50vw",children:e.jsx(Br,{schoolEducationLevel:n,height:55})}),e.jsx(re,{title:"Education Combinations",open:v,onClose:_=>S(_),width:"50vw",children:e.jsx(Or,{schoolEducationLevel:n,height:55})}),e.jsx(Se,{title:`${n==null?void 0:n.educationLevel.name} Students`,open:T,noOverFlow:!0,anchor:"right",width:"90vw",onClose:_=>f(_),children:e.jsx(Zr,{schoolEducationLevel:n,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.educationLevel.name)+" Subjects",open:L,width:"70vw",onClose:_=>j(_),children:e.jsx(rl,{schoolEducationLevel:n,height:55,randKey:Math.random()})})]})},al=()=>(s.useEffect(()=>{document.title=ge.system_name+": Education Levels"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Education Levels"})]})}),e.jsx(ll,{})]})),{TextArea:il}=K,{Option:zt}=H,ol=t=>{const[n,c]=s.useState(!0),[l,i]=s.useState(!0),[m,u]=s.useState([]),[d,o]=s.useState([]),h=async(k,A="")=>{c(!0);const{data:q}=await w.custom({url:"",method:"get",meta:{operation:"schoolDepartments",variables:{page:{value:k,type:"Int",required:!0},key:{value:A,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Ot}]}}).catch(()=>(x.error("Error occured while fetching departments"),{data:null})).then(I=>I);q&&u([...q.results]),c(!1)},C=async(k,A="")=>{i(!0);const{data:q}=await w.custom({url:"",method:"get",meta:{operation:"systemProgrammes",variables:{page:{value:k,type:"Int",required:!0},key:{value:A,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Kt}]}}).catch(()=>(x.error("Error occured while fetching programmes"),{data:null})).then(I=>I);q&&o([...q.results]),i(!1)};return s.useEffect(()=>{h(1),C(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:k=>{t.onFinish(k)},requiredMark:!0,children:[e.jsx(a.Item,{name:"department_id",label:"Department",rules:[{required:!0,type:"string",message:"Please choose Department..."}],children:e.jsx(H,{showSearch:!0,placeholder:"Select a Department",optionFilterProp:"children",onChange:k=>{},onSearch:k=>{},filterOption:(k,A)=>A.children.toLowerCase().includes(k.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((k,A)=>e.jsx(zt,{value:k.id,children:k.name}))})}),e.jsx(a.Item,{name:"programme_id",label:"Programme",rules:[{required:!0,type:"string",message:"Please choose Programme..."}],children:e.jsx(H,{showSearch:!0,placeholder:"Select a Programme",optionFilterProp:"children",onChange:k=>{},onSearch:k=>{},filterOption:(k,A)=>A.children.toLowerCase().includes(k.toLowerCase()),dropdownStyle:{zIndex:9999},children:d.map((k,A)=>e.jsx(zt,{value:k.id,children:k.name}))})}),e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(il,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:dl}=K,{Option:Tt}=H,cl=t=>{const[n,c]=s.useState(t.course.isActive),[l,i]=s.useState(!0),[m,u]=s.useState([]),[d,o]=s.useState([]),h=async(k,A="")=>{i(!0);const{data:q}=await w.custom({url:"",method:"get",meta:{operation:"schoolDepartments",variables:{page:{value:k,type:"Int",required:!0},key:{value:A,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Ot}]}}).catch(()=>(x.error("Error occured while fetching departments"),{data:null})).then(I=>I);q&&u([...q.results]),i(!1)},C=async(k,A="")=>{const{data:q}=await w.custom({url:"",method:"get",meta:{operation:"systemProgrammes",variables:{page:{value:k,type:"Int",required:!0},key:{value:A,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Kt}]}}).catch(()=>(x.error("Error occured while fetching programmes"),{data:null})).then(I=>I);q&&o([...q.results])};return s.useEffect(()=>{h(1),C(1),t.form.setFieldsValue({department_id:t.course.department.id,programme_id:t.course.programme.id,name:t.course.name,description:t.course.description,is_active:t.course.isActive})},[t.form,t.course,t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:l,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:k=>{k.is_active=n,k.id=parseInt(t.course.id),t.onFinish(k)},requiredMark:!0,children:[e.jsx(a.Item,{name:"department_id",label:"Department",rules:[{required:!0,type:"string",message:"Please choose Department..."}],children:e.jsx(H,{showSearch:!0,placeholder:"Select a Department",optionFilterProp:"children",onChange:k=>{},onSearch:k=>{},filterOption:(k,A)=>A.children.toLowerCase().includes(k.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((k,A)=>e.jsx(Tt,{value:k.id,children:k.name}))})}),e.jsx(a.Item,{name:"programme_id",label:"Programme",rules:[{required:!0,type:"string",message:"Please choose Programme..."}],children:e.jsx(H,{showSearch:!0,placeholder:"Select a Programme",optionFilterProp:"children",onChange:k=>{},onSearch:k=>{},filterOption:(k,A)=>A.children.toLowerCase().includes(k.toLowerCase()),dropdownStyle:{zIndex:9999},children:d.map((k,A)=>e.jsx(Tt,{value:k.id,children:k.name}))})}),e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(dl,{rows:4,maxLength:6})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Le,{checked:n,onChange:()=>c(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},ul=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(20),[d,o]=s.useState(""),[h,C]=s.useState(0),[k,A]=s.useState(!0),[q]=a.useForm(),[I]=a.useForm(),[M]=a.useForm(),N=!fe.useBreakpoint().lg,[b,R]=s.useState(!1),[v,S]=s.useState(!1),L=r=>{c(r),S(!0)},j=async r=>{un(r).then(g=>{g&&(g.success?(x.success(g.message),I.resetFields(),R(!1),i([g.course,...l])):x.error(g.message))})},T=async r=>{hn(r).then(g=>{g&&(g.success?(x.success(g.message),M.resetFields(),S(!1),i(l.map(U=>parseInt(U.id.toString())===parseInt(r.id.toString())?g.course:U))):x.error(g.message))})},f=async r=>{xn(r).then(g=>{g&&(g.success?(x.success(g.message),i(l.filter(U=>U.id!==r))):x.error(g.message))})},p=async(r,g="",U=20)=>{A(!0),mn(r,g,U).then($=>{$&&(C($.total),i([...$.results]))}),A(!1)};s.useEffect(()=>{p(1,"",20)},[]);const F=[{title:"Name",dataIndex:"name",fixed:!0,render:(r,g,U)=>e.jsx("span",{children:e.jsx("a",{children:g.name})})},{title:"Programme",dataIndex:"programme",fixed:!0,render:(r,g,U)=>e.jsx("span",{children:g.programme.name})},{title:"Department",dataIndex:"department",fixed:!0,render:(r,g,U)=>e.jsx("span",{children:g.department.name})},{title:"Created",dataIndex:"created",render:(r,g,U)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(g.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(r,g,U)=>e.jsx("a",{children:g!=null&&g.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(r,g,U)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(se,{title:"Are you sure to delete this Faculty?",onConfirm:()=>f(g==null?void 0:g.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(g!=null&&g.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(P,{icon:e.jsx(ue,{}),disabled:!(g!=null&&g.canDelete)})}),e.jsx(X,{title:"Edit "+(g==null?void 0:g.name)+" Faculty",color:"green",children:e.jsx(P,{icon:e.jsx(Ne,{}),disabled:!(g!=null&&g.canEdit),onClick:()=>L(g)})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:N?24:20,children:e.jsx(a,{layout:"vertical",form:q,onFinish:r=>{o(r.key),l.length=0,p(1,r.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:N?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Add New Course",children:e.jsx(P,{icon:e.jsx(ce,{}),size:"large",onClick:()=>R(!0),children:"Add Course"})})})]}),e.jsx(me,{loading:k,columns:F,dataSource:l,pagination:{onChange:(r,g)=>{u(g),p(r,d,g)},total:h,pageSize:m,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{open:b,onClose:r=>R(r),width:"30vw",title:"Adding Course",children:e.jsx(ol,{form:I,onFinish:j,randKey:Math.random()})}),e.jsx(re,{open:v,onClose:r=>S(r),width:"30vw",title:"Edit Course",children:e.jsx(cl,{course:n,onFinish:T,form:M,randKey:Math.random()})})]})},hl=()=>(s.useEffect(()=>{document.title=ge.system_name+": Courses"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Courses"})]})}),e.jsx(ul,{height:80,control:!1})]})),{TextArea:ml}=K,{Option:xl}=H,gl=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(!0),[m,u]=s.useState([]),d=async h=>{c(!0),gn(h).then(C=>{c(!1),C&&(C.success?(x.success(C.message),t.form.resetFields(),t.onFinish(C.department)):x.error(C.message))})},o=async(h,C="")=>{i(!0);const{data:k}=await w.custom({url:"",method:"get",meta:{operation:"schoolFaculties",variables:{page:{value:h,type:"Int",required:!0},key:{value:C,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:_t}]}}).catch(()=>(x.error("Error occured while fetching faculties"),{data:null})).then(A=>A);k&&u([...k.results]),i(!1)};return s.useEffect(()=>{o(1)},[t.randKey]),e.jsx("div",{style:{maxHeight:"100%",overflowY:"auto",overflowX:"hidden"},children:e.jsx(oe,{spinning:l,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:h=>{d(h)},requiredMark:!0,children:[e.jsx(a.Item,{name:"faculty_id",label:"Faculty",rules:[{required:!0,type:"string",message:"Please choose Faculty..."}],children:e.jsx(H,{showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,C)=>C.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((h,C)=>e.jsx(xl,{value:h.id,children:h.name}))})}),e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(ml,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Save"})})]})})})},{TextArea:jl}=K,{Option:yl}=H,pl=t=>{const[n,c]=s.useState(t.department.isActive),[l,i]=s.useState(!0),[m,u]=s.useState([]),d=async(o,h="")=>{i(!0);const{data:C}=await w.custom({url:"",method:"get",meta:{operation:"schoolFaculties",variables:{page:{value:o,type:"Int",required:!0},key:{value:h,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:_t}]}}).catch(()=>(x.error("Error occured while fetching faculties"),{data:null})).then(k=>k);C&&u([...C.results]),i(!1)};return s.useEffect(()=>{d(1),t.form.setFieldsValue({faculty_id:t.department.faculty.id,name:t.department.name,description:t.department.description,is_active:t.department.isActive})},[t.form,t.department,t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:l,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:o=>{o.is_active=n,o.id=parseInt(t.department.id),t.onFinish(o)},requiredMark:!0,children:[e.jsx(a.Item,{name:"faculty_id",label:"Faculty",rules:[{required:!0,type:"string",message:"Please choose Faculty..."}],children:e.jsx(H,{showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onChange:o=>{},onSearch:o=>{},filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((o,h)=>e.jsx(yl,{value:o.id,children:o.name}))})}),e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(jl,{rows:4,maxLength:6})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Le,{checked:n,onChange:()=>c(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},fl=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,A]=s.useState(!0),[q]=a.useForm(),[I]=a.useForm(),[M]=a.useForm();fe.useBreakpoint().lg;const[N,b]=s.useState(!1),[R,v]=s.useState(!1),S=F=>{c(F),v(!0)},L=async F=>{jn(F).then(r=>{r&&(r.success?(x.success(r.message),M.resetFields(),v(!1),i(l.map(g=>parseInt(g.id.toString())===parseInt(F.id.toString())?r.department:g))):x.error(r.message))})},j=async F=>{pn(F).then(r=>{r&&(r.success?(x.success(r.message),i(l.filter(g=>g.id!==F))):x.error(r.message))})},T=()=>{x("Canceled")},f=async(F,r="",g=20)=>{A(!0),yn(F,r,g).then(U=>{U&&(u(U.total),i([...U.results]))}),A(!1)};s.useEffect(()=>{f(1,"",20)},[]);const p=[{title:"Name",dataIndex:"name",fixed:!0,render:(F,r,g)=>e.jsx("span",{children:e.jsx("a",{children:r.name})})},{title:"Faculty",dataIndex:"faculty",fixed:!0,render:(F,r,g)=>e.jsx("span",{children:r.faculty.name})},{title:"Created",dataIndex:"created",render:(F,r,g)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(r.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(F,r,g)=>e.jsx("a",{children:r!=null&&r.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(F,r,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(se,{title:"Are you sure to delete this Faculty?",onConfirm:()=>j(r==null?void 0:r.id),onCancel:()=>T,okText:"Yes",cancelText:"No",disabled:!(r!=null&&r.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(P,{icon:e.jsx(ue,{}),disabled:!(r!=null&&r.canDelete)})}),e.jsx(X,{title:"Edit "+(r==null?void 0:r.name)+" Faculty",color:"green",children:e.jsx(P,{icon:e.jsx(Ne,{}),disabled:!(r!=null&&r.canEdit),onClick:()=>S(r)})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:12,children:e.jsx(a,{layout:"vertical",form:q,onFinish:F=>{C(F.key),l.length=0,f(1,F.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Add New Department",children:e.jsx(P,{icon:e.jsx(ce,{}),size:"large",onClick:()=>b(!0),children:"Add Department"})})})]}),e.jsx(me,{loading:k,columns:p,dataSource:l,pagination:{onChange:(F,r)=>{o(r),f(F,h,r)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{open:N,onClose:F=>b(F),title:"Adding Department",width:"30vw",children:e.jsx(gl,{form:I,onFinish:F=>{i([F,...l]),b(!1)},randKey:Math.random()})}),e.jsx(re,{open:R,onClose:F=>v(F),title:"Edit Department",width:"30vw",children:e.jsx(pl,{department:n,form:M,onFinish:L,randKey:Math.random()})})]})},Sl=()=>(s.useEffect(()=>{document.title=ge.system_name+": Departments"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Departments"})]})}),e.jsx(fl,{height:77})]})),vl=()=>(s.useEffect(()=>{document.title=ge.system_name+": Examinations"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Examinations"})]})}),e.jsx(gr,{})]})),{TextArea:Cl}=K,bl=t=>{const[n,c]=s.useState(!1),l=async i=>{c(!0),fn(i).then(m=>{m&&(m.success?(x.success(m.message),t==null||t.form.resetFields(),t==null||t.onFinish(m.faculty)):x.error(m.message))}),c(!1)};return e.jsx(e.Fragment,{children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:i=>{l(i)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Cl,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Save"})})]})})},{TextArea:Il}=K,Fl=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(t.faculty.isActive),m=async u=>{c(!0),Sn(u).then(d=>{d&&(c(!1),d.success?(x.success(d.message),t.form.resetFields(),t.onFinish(d.faculty)):x.error(d.message))})};return s.useEffect(()=>{t.form.setFieldsValue({name:t.faculty.name,description:t.faculty.description,is_active:t.faculty.isActive})},[t.form,t.faculty]),e.jsx(e.Fragment,{children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:u=>{u.is_active=l,u.id=parseInt(t.faculty.id),m(u)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Il,{rows:4,maxLength:6})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Le,{checked:l,onChange:()=>i(!l),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Save"})})]})})},kl=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(20),[d,o]=s.useState(""),[h,C]=s.useState(0),[k,A]=s.useState(!0),[q]=a.useForm(),[I]=a.useForm(),[M]=a.useForm(),N=!fe.useBreakpoint().lg,[b,R]=s.useState(!1),[v,S]=s.useState(!1),L=F=>{c(F),S(!0)},j=async F=>{Cn(F).then(r=>{r&&(r.success?(x.success(r.message),i(l.filter(g=>g.id!==F))):x.error(r.message))})},T=()=>{x("Canceled")},f=async(F,r="",g=20)=>{A(!0),vn(F,r,g).then(U=>{U&&(C(U.total),i([...U.results]))}),A(!1)};s.useEffect(()=>{f(1,"",20)},[]);const p=[{title:"Name",dataIndex:"name",fixed:!0,render:(F,r,g)=>e.jsx("span",{children:e.jsx("a",{children:r.name})})},{title:"Created",dataIndex:"created",render:(F,r,g)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(r.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(F,r,g)=>e.jsx("a",{children:r!=null&&r.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(F,r,g)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(se,{title:"Are you sure to delete this Faculty?",onConfirm:()=>j(r==null?void 0:r.id),onCancel:()=>T,okText:"Yes",cancelText:"No",disabled:!(r!=null&&r.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(P,{icon:e.jsx(ue,{}),disabled:!(r!=null&&r.canDelete)})}),e.jsx(X,{title:"Edit "+(r==null?void 0:r.name)+" Faculty",color:"green",children:e.jsx(P,{icon:e.jsx(Ne,{}),disabled:!(r!=null&&r.canEdit),onClick:()=>L(r)})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:N?24:20,children:e.jsx(a,{layout:"vertical",form:q,onFinish:F=>{o(F.key),l.length=0,f(1,F.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:N?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Add New Faculty",children:e.jsx(P,{icon:e.jsx(ce,{}),size:"large",onClick:()=>R(!0),children:"Add Faculty"})})})]}),e.jsx(me,{loading:k,columns:p,dataSource:l,pagination:{onChange:(F,r)=>{u(r),f(F,d,r)},total:h,pageSize:m,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{open:b,onClose:F=>R(F),width:"30vw",title:"Adding Faculty",children:e.jsx(bl,{form:I,onFinish:F=>{i([F,...l]),R(!1)}})}),e.jsx(re,{open:v,onClose:F=>S(F),width:"30vw",title:"Edit Faculty",children:e.jsx(Fl,{faculty:n,form:M,onFinish:F=>{i(l.map(r=>parseInt(r.id.toString())===parseInt(F.id.toString())?F:r)),S(!1)}})})]})},Ml=()=>(s.useEffect(()=>{document.title=ge.system_name+": Faculties"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Faculties"})]})}),e.jsx(kl,{height:77})]})),{TextArea:Ll}=K,Al=t=>{const[n,c]=s.useState(!1),l=async i=>{const{data:m}=await w.custom({url:"",method:"post",meta:{operation:"createSchoolFee",variables:{name:{value:i.name,type:"String",required:!0},description:{value:i.description,type:"String",required:!1}},fields:["success","message",{schoolFee:Bt}]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(u=>u);m&&(m.success?(x.success(m.message),t.onFinish(m.schoolFee)):x.error(m.message))};return s.useEffect(()=>{},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:i=>{l(i)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Ll,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:El}=K,Nl=t=>{var i,m;const[n,c]=s.useState(!1),l=async u=>{var o;const{data:d}=await w.custom({url:"",method:"post",meta:{operation:"updateSchoolFee",variables:{schoolFeeId:{value:(o=t.schoolFee)==null?void 0:o.id,type:"Int",required:!0},name:{value:u.name,type:"String",required:!0},description:{value:u.description,type:"String",required:!1}},fields:["success","message",{schoolFee:Bt}]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(h=>h);d&&(d.success?(x.success(d.message),t.onFinish(d.schoolFee)):x.error(d.message)),c(!1)};return s.useEffect(()=>{var u,d;t.form.setFieldsValue({name:(u=t.schoolFee)==null?void 0:u.name,description:(d=t.schoolFee)==null?void 0:d.description})},[t.form,t.randKey,(i=t.schoolFee)==null?void 0:i.description,(m=t.schoolFee)==null?void 0:m.name]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:u=>{l(u)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(El,{rows:4,maxLength:6})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},Pl=()=>{const[t,n]=s.useState(),[c,l]=s.useState([]),[i,m]=s.useState(!1),[u,d]=s.useState(0),[o,h]=s.useState(20),[C,k]=s.useState(""),[A,q]=s.useState(!0),[I]=a.useForm(),[M]=a.useForm(),[E]=a.useForm(),b=!fe.useBreakpoint().lg,{push:R}=jt(),[v,S]=s.useState(!1),L=r=>{S(!0),n(r)},j=[{title:"Name",dataIndex:"name",fixed:!0,render:(r,g)=>e.jsx("span",{children:e.jsx("a",{onClick:()=>R("/schoolmanager/school/fees/"+g.id+"/education/levels/"),children:g.name})})},{title:"Date Created",dataIndex:"created",render:(r,g)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(g.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(r,g)=>e.jsx("a",{children:g!=null&&g.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(r,g)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsxs(J,{children:[e.jsx(J.Item,{icon:e.jsx(we,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>R("/schoolmanager/school/fees/"+g.id+"/education/levels/"),children:"Education Levels Fees"})}),e.jsx(J.Item,{icon:e.jsx(ue,{}),children:e.jsx(se,{title:"Are you sure to delete this School Fee?",disabled:!(g!=null&&g.canDelete),onConfirm:()=>T(g.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(J.Item,{icon:e.jsx(Ne,{}),disabled:!g.canEdit,onClick:()=>L(g),children:e.jsx("a",{rel:"noopener noreferrer",children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],T=async r=>{bn(r).then(g=>{g&&(g.success?(x.success(g.message),l(c.filter(U=>U.id!==r))):x.error(g.message))})},f=async(r,g="",U=20)=>{q(!0),In(r,g,U).then($=>{$&&(d($.total),l([...$.results]))}),q(!1)},p=async r=>{l(c.map(g=>g.id===(t==null?void 0:t.id)?r:g)),E.resetFields(),S(!1)},F=async r=>{l([r,...c]),M.resetFields(),m(!1)};return s.useEffect(()=>{f(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:b?24:20,children:e.jsx(a,{layout:"vertical",form:I,onFinish:r=>{k(r.key),c.length=0,f(1,r.key,o)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:b?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{icon:e.jsx(ce,{}),size:"large",onClick:()=>m(!0),children:"Create Fee"})})]}),e.jsx(me,{loading:A,columns:j,dataSource:c,pagination:{onChange:(r,g)=>{h(g),f(r,C,g)},total:u,pageSize:o,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Creating School Fee",open:i,width:"40vw",onClose:r=>m(r),children:e.jsx(Al,{form:M,onFinish:F})}),e.jsx(re,{title:"Editting "+(t==null?void 0:t.name),width:"40vw",open:v,onClose:r=>S(r),children:e.jsx(Nl,{form:E,schoolFee:t,randKey:Math.random(),onFinish:p})})]})},Dl=()=>(s.useEffect(()=>{document.title=ge.system_name+": School Fees"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"School Fees"})]})}),e.jsx(Pl,{})]})),{Option:zl}=H,ds=[];for(let t=2022;t<new Date().getFullYear()+5;t++)ds.push(e.jsx(zl,{children:t.toString()},t));const Tl=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(0),[m,u]=s.useState(20),[d,o]=s.useState(""),[h,C]=s.useState(!0),[k]=a.useForm(),q=!fe.useBreakpoint().lg,[I,M]=s.useState(new Date().getFullYear()),[E,N]=s.useState(0),b=j=>{M(j)},R=j=>{N(j)},v=[{title:"Name",dataIndex:"name",fixed:!0,render:(j,T,f)=>e.jsx("span",{children:e.jsx("a",{children:T.educationLevel.name})})},{title:"",dataIndex:"action",render:(j,T,f)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(se,{arrowPointAtCenter:!1,title:e.jsx(e.Fragment,{children:e.jsxs(je,{direction:"vertical",children:[e.jsxs("span",{children:["Are you sure to Add ",T.educationLevel.name,' ?"']}),e.jsx("div",{style:{height:15}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Fee Amount"}),e.jsx("span",{children:e.jsx(_e,{size:"large",min:0,defaultValue:0,value:E,onChange:R,style:{width:"100%"}})}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Academic Year"}),e.jsx("span",{children:e.jsx(H,{size:"large",value:I?parseInt(I.toString()):new Date().getFullYear(),placeholder:"Please Choose Year ...",style:{width:"100%"},onChange:b,dropdownStyle:{zIndex:9999},children:ds})})]})}),onConfirm:()=>S(T.id),onCancel:()=>{},onVisibleChange:p=>{p&&(M(new Date().getFullYear()),N(0))},okText:"Yes",cancelText:"No",okButtonProps:{disabled:E<=0},overlayStyle:{zIndex:9999},children:e.jsx(P,{icon:e.jsx(ce,{}),children:"Add"})})})}],S=async j=>{var T;Fn(j,I,E,((T=t.fee)==null?void 0:T.id)??0).then(f=>{f&&(f.success?(x.success(f.message),c(n.filter(p=>p.id!==j)),t.onFinish(f.schoolEducationLevelFee)):x.error(f.message))})},L=async(j,T="",f=20)=>{var p;C(!0),kn(j,T,f,((p=t.fee)==null?void 0:p.id)??0).then(F=>{F&&(i(F.total),c([...F.results]))}),C(!1)};return s.useEffect(()=>{L(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{style:{marginTop:10},children:e.jsx(B,{span:q?24:20,children:e.jsx(a,{layout:"vertical",form:k,onFinish:j=>{o(j.key),n.length=0,L(1,j.key,m)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(me,{loading:h,columns:v,dataSource:n,pagination:{onChange:(j,T)=>{u(T),L(j,d,T)},total:l,pageSize:m,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})]})},ql=t=>{var i,m;const[n,c]=s.useState(!1),l=async u=>{var o;const{data:d}=await w.custom({url:"",method:"post",meta:{operation:"updateSchoolEducationLevelFee",variables:{schoolEducationLevelFeeId:{value:(o=t.schoolEducationLevelFee)==null?void 0:o.id,type:"Int",required:!0},amount:{value:u.amount,type:"Float",required:!0},vatIncluded:{value:u.vatIncluded,type:"Boolean",required:!0}},fields:["success","message",{schoolEducationLevelFee:Mn}]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(h=>h);d&&(d.success?(x.success(d.message),t.onFinish(d.schoolEducationLevelFee)):x.error(d.message)),c(!1)};return s.useEffect(()=>{var u,d;t.form.setFieldsValue({amount:(u=t.schoolEducationLevelFee)==null?void 0:u.amount,vatIncluded:(d=t.schoolEducationLevelFee)==null?void 0:d.vatIncluded})},[t.form,t.randKey,(i=t.schoolEducationLevelFee)==null?void 0:i.amount,(m=t.schoolEducationLevelFee)==null?void 0:m.vatIncluded]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:u=>{l(u)},requiredMark:!0,children:[e.jsx(a.Item,{name:"amount",label:"Amount",rules:[{required:!0,type:"number",min:0,message:"Please input Fee Amount"}],children:e.jsx(_e,{min:0,defaultValue:0,style:{width:"100%"}})}),e.jsx(a.Item,{name:"vatIncluded",valuePropName:"checked",initialValue:!0,rules:[{required:!0,type:"boolean",message:"Please check"}],children:e.jsx(Le,{children:"VAT Included"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},Rl=t=>{var g,U;const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(0),[h,C]=s.useState(20),[k,A]=s.useState(""),[q,I]=s.useState(!0),[M]=a.useForm(),[E]=a.useForm(),[N]=a.useForm(),[b,R]=s.useState(!1),S=!fe.useBreakpoint().lg,L=Ue(),j=async $=>{c($),R(!0)},T=[{title:"Education Level",dataIndex:"educationLevel",fixed:!0,render:($,Y)=>{var G,Z;return e.jsx("span",{children:e.jsx("a",{children:(Z=(G=Y.schoolEducationLevel)==null?void 0:G.educationLevel)==null?void 0:Z.name})})}},{title:"Year",dataIndex:"year",fixed:!0,render:($,Y)=>e.jsx("span",{children:Y.year})},{title:"Amount",dataIndex:"amount",fixed:!0,render:($,Y)=>e.jsx("span",{children:parseFloat(Y.amount).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")})},{title:"VAT Included",dataIndex:"vatIncluded",fixed:!0,render:($,Y)=>e.jsx("span",{children:Y.vatIncluded?"Yes":"No"})},{title:"Date Created",dataIndex:"created",render:($,Y)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(Y.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:($,Y)=>e.jsx("a",{children:Y!=null&&Y.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:($,Y)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsxs(J,{children:[e.jsx(J.Item,{icon:e.jsx(ue,{}),children:e.jsx(se,{title:"Are you sure to delete this School Fee?",disabled:!(Y!=null&&Y.canDelete),onConfirm:()=>f(Y.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(J.Item,{icon:e.jsx(Ne,{}),disabled:!Y.canEdit,onClick:()=>j(Y),children:e.jsx("a",{rel:"noopener noreferrer",children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:G=>G.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],f=async $=>{Ln($).then(Y=>{Y&&(Y.success?(x.success(Y.message),i(l.filter(G=>G.id!==$))):x.error(Y.message))})},p=async($,Y="",G=20)=>{I(!0),An($,Y,G,L.schoolFeeId).then(Z=>{Z&&(o(Z.total),i([...Z.results]))}),I(!1)},F=async $=>{i(l.map(Y=>Y.id===(n==null?void 0:n.id)?$:Y)),E.resetFields(),R(!1)},r=async $=>{i([$,...l]),N.resetFields(),u(!1)};return s.useEffect(()=>{p(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:S?24:12,children:e.jsx(a,{layout:"vertical",form:M,onFinish:$=>{A($.key),l.length=0,p(1,$.key,h)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:S?24:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{icon:e.jsx(ce,{}),size:"large",disabled:!t.canAdd,onClick:()=>u(!0),children:"Add Education Level Fee"})})]}),e.jsx(me,{loading:q,columns:T,dataSource:l,pagination:{onChange:($,Y)=>{C(Y),p($,k,Y)},total:d,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Adding"}),e.jsx("span",{style:{marginLeft:5,color:"green"},children:(g=t.fee)==null?void 0:g.name}),e.jsx("span",{style:{marginLeft:5},children:"Education Levels Fees"})]}),width:"30vw",anchor:"right",onClose:()=>u(!1),open:m,noOverFlow:!0,children:e.jsx(Tl,{fee:t.fee,randKey:Math.random(),onFinish:r})}),e.jsx(re,{title:((U=t.fee)==null?void 0:U.name)+" "+(n==null?void 0:n.schoolEducationLevel.educationLevel.name)+" Fee Editting",width:"40vw",open:b,onClose:$=>R($),children:e.jsx(ql,{form:E,schoolEducationLevelFee:n,randKey:Math.random(),onFinish:F})})]})},Yl=()=>{const[t,n]=s.useState(!1),[c,l]=s.useState(),i=Ue(),m=async()=>{n(!0);const{data:u}=await w.custom({url:"",method:"get",meta:{operation:"schoolFee",variables:{id:{value:parseInt(i.schoolFeeId),type:"Int",required:!0}},fields:["id",{school:["id","name"]},"name","description","isActive","created","updated","canEdit","canDelete","canManage"]}}).catch(d=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(d=>d);u&&l(u),n(!1)};return s.useEffect(()=>{document.title=ge.system_name+": Education Levels",m()},[i.schoolFeeId]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:e.jsxs(ae,{to:"/schoolmanager/school/fees",children:["School Fees",c&&e.jsx("span",{style:{marginLeft:10},children:e.jsx(le,{color:"green",children:c?c.name:"School Fee"})}),e.jsx(oe,{spinning:t})]})}),e.jsx(V.Item,{children:"Education Levels Fees"})]})}),e.jsx(Rl,{fee:c,canAdd:(c==null?void 0:c.canManage)&&!t})]})},Gl=t=>{const[n,c]=s.useState([]),[l,i]=s.useState([]),[m,u]=s.useState(!1),d=async(o,h="")=>{const{data:C}=await w.custom({url:"",method:"get",meta:{operation:"schoolRolesMemberNotAssigned",variables:{page:{value:o,type:"Int",required:!0},key:{value:h,type:"String",required:!1},memberId:{value:parseInt(t.member.id),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:En}]}}).catch(()=>(x.error("Error occured while fetching roles"),{data:null})).then(k=>k);C&&c([...C.results])};return s.useEffect(()=>{d(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("h3",{children:[e.jsx("b",{children:"Full Name"}),": ",t.member.firstName," ",t.member.middleName," ",t.member.lastName]}),e.jsxs("h3",{children:[e.jsx("b",{children:"Email Address"}),": ",t.member.email]})]}),e.jsxs(a,{layout:"vertical",form:t.form,onFinish:o=>{o.roles=l.map(h=>parseInt(h.role.id.toString())),o.is_adminstrator=m,t.onFinish(o,t.member)},requiredMark:!0,children:[e.jsx(a.Item,{name:"registration_number",label:"Registration Number",rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(a.Item,{name:"is_adminstrator",rules:[{required:!1,type:"boolean"}],children:e.jsx(Le,{onChange:()=>{u(!m)},defaultChecked:m,children:"Is Adminstrator"})}),e.jsx(de,{bordered:!0,dataSource:n,renderItem:o=>e.jsx(de.Item,{children:e.jsx(Le,{onChange:h=>{h.target.checked?i([...l,o]):i(l.filter(C=>C.role.id!==o.role.id))},defaultChecked:l.includes(o),children:o.role.name})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:45},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},Ol=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!0),[d,o]=s.useState(1),[h,C]=s.useState(""),[k]=a.useForm(),[A]=a.useForm(),[q,I]=s.useState(0),[M,E]=s.useState(!1),N=v=>{E(!0),c(v)},b=async(v,S)=>{Nn(v,S).then(L=>{L&&(L.success?(x.success(L.message),i(l.filter(j=>j.id.toString()!==S.id.toString())),t.onAdd(L.member),E(!1),c(void 0),k.resetFields()):x.error(L.message))})},R=async(v,S="")=>{u(!0),Pn(v,S).then(L=>{L&&(I(L.pages),o(L.page),i([...L.results]))}),u(!1)};return s.useEffect(()=>{R(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(a,{layout:"vertical",form:A,onFinish:v=>{C(v.key),R(1,v.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search Member(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(oe,{spinning:m,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"79vh",minHeight:"79vh",overflowY:"auto"},children:e.jsx(de,{itemLayout:"horizontal",dataSource:l,renderItem:v=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(de.Item,{style:{margin:0,padding:0},actions:[e.jsx(P,{icon:e.jsx(Oe,{}),onClick:()=>N(v)})],children:e.jsx(de.Item.Meta,{avatar:e.jsx(ts,{src:v.pic}),title:e.jsx("a",{children:v.fullName}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:v.email})})})},"file-"+v.id)})})}),e.jsx(Ze,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:2},children:e.jsx(ss,{count:q,color:"secondary",onChange:(v,S)=>{R(S,h)}})})]}),e.jsx(re,{title:"Member Informations",open:M,onClose:v=>E(v),width:"40vw",children:e.jsx(Gl,{member:n,form:k,onFinish:b,randKey:Math.random()})})]})},{Option:cs}=H,us=[e.jsx(cs,{value:null,children:"Please Select Year"},"default")];for(let t=2022;t<new Date().getFullYear()+5;t++)us.push(e.jsx(cs,{value:t,children:t.toString()},t));const Kl=t=>{const[n,c]=s.useState(null),[l,i]=s.useState(!1),[m,u]=s.useState(!1),[d,o]=s.useState(""),[h,C]=s.useState(!1),k=async q=>{c(q)},A=async q=>{i(!0),Dn(q).then(I=>{I&&(o(I.message),I.success?(C(!0),x.success(I.message)):(C(!1),x.error(I.message)))}),i(!1),u(!0)};return s.useEffect(()=>{},[]),!l&&m?e.jsx(e.Fragment,{children:e.jsx(Ct,{message:d,type:h?"success":"error",style:{fontSize:24},onClose:()=>{o(""),i(!1),C(!1),u(!1)},closable:!0})}):e.jsx(e.Fragment,{children:e.jsxs(oe,{spinning:l,children:[e.jsx("p",{style:{fontSize:20},children:"Platform supports Login Authorizations to School Members"}),e.jsxs(tt,{actions:[e.jsx(se,{title:e.jsx(e.Fragment,{children:e.jsxs(je,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Authorize Login?"}),e.jsx("span",{style:{height:10}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Members Registration Year"}),e.jsx("span",{children:e.jsx(H,{size:"large",value:n||null,placeholder:"Please Choose Year ...",style:{width:220},onChange:k,allowClear:!0,onClear:()=>c(null),dropdownStyle:{zIndex:9999},children:us})})]})}),onConfirm:()=>A(n),onCancel:()=>{},okButtonProps:{disabled:n===null},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(P,{size:"large",icon:e.jsx(et,{}),children:"Authorize"})})],style:{marginTop:50},children:[e.jsxs("span",{style:{fontSize:18},children:["By Using Email/Phone/Registration Number of Member as Default"," ",e.jsx("b",{children:"Username"}),", While Default",e.jsx("b",{children:"Password"})," will be ",e.jsx("b",{children:"Randomly Generated"})," or same"," ",e.jsx("b",{children:"Registration Number"})]}),e.jsx("span",{style:{display:"block",color:"red",fontSize:20,marginTop:10},children:"This action will be applicable only to those Members with no Login Access/Authorization to the Platform"})]})]})})},_l=t=>{const[n]=a.useForm(),[c,l]=s.useState(!1),i=async(m,u)=>{l(!0);const{data:d}=await w.custom({url:"",method:"post",meta:{operation:"resetMemberCredential",variables:{memberId:{value:parseInt(t.member.id.toString()),type:"Int",required:!0},phone:{value:m,type:"String",required:!0},email:{value:u,type:"String",required:!1}},fields:["success","message"]}}).catch(()=>(x.error("Error occured while resetting member credential ..."),{data:null})).then(o=>o);l(!1),d&&(d.success&&t.resetting(!1),t.resettingFeedback(d.success,d.message))};return s.useEffect(()=>{},[c]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:c,children:e.jsxs(a,{layout:"vertical",form:t.form?t.form:n,onFinish:m=>{i(m.phone,m.email)},requiredMark:!0,children:[e.jsx(a.Item,{name:"phone",label:"Mobile Phone",rules:[{required:!0,type:"string",message:"Please Mobile Phone number"}],children:e.jsx(K,{prefix:e.jsx(wt,{}),size:"large",placeholder:"Mobile Phone Number ...",onChange:m=>{t.resetPhoneChange(m.target.value)}})}),e.jsx(a.Item,{name:"email",label:"Email Addres",rules:[{required:!1,type:"string",message:"Please Email Address ..."}],children:e.jsx(K,{prefix:e.jsx(Xt,{}),size:"large",placeholder:"Email Address ..."})})]})})})},{Option:qt}=H,Bl=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(null),[m,u]=s.useState(null),[d,o]=s.useState(null),[h,C]=s.useState(null),[k,A]=s.useState(null),[q,I]=s.useState(""),[M]=a.useForm();jt();const E=async L=>{A(L.format("YYYY-MM-DD"))},N=async L=>{C(L)},b=async L=>{o(L)},R=async L=>{i(L)},v=async L=>{u(L)},S=async L=>{c(!0);const{data:j}=await w.custom({url:"",method:"post",meta:{operation:"registerSchoolMember",variables:{firstName:{value:L.firstName,type:"String",required:!0},middleName:{value:L.middleName,type:"String",required:!0},lastName:{value:L.lastName,type:"String",required:!0},email:{value:L.email,type:"String",required:!1},phone:{value:L.phone,type:"String",required:!0},registrationNumber:{value:L.registrationNumber,type:"String",required:!0},gender:{value:L.gender,type:"String",required:!0},regionId:{value:L.regionId,type:"Int",required:!1},districtId:{value:L.districtId,type:"Int",required:!1},wardId:{value:L.wardId,type:"Int",required:!1},dob:{value:L.dob,type:"String",required:!1}},fields:["success","message",{schoolMember:We}]}}).catch(()=>(x.error("Error occured while creating School Member"),{data:null})).then(T=>T);j&&(j.success?(x.success(j.message),t.onAdd(j.schoolMember),M.resetFields()):(I(j.message),x.error(j.message))),c(!1)};return s.useEffect(()=>{},[t.randKey]),e.jsx("div",{style:{height:"100%",overflowY:"auto",overflowX:"hidden",marginBottom:"20px",padding:"10px"},children:e.jsx(Ie.Spin,{spinning:n,children:e.jsxs(e.Fragment,{children:[q.length>0&&e.jsx(Ie.Alert,{message:"Error",description:q,type:"error",closable:!0}),e.jsxs(a,{layout:"vertical",form:M,onFinish:L=>{L.regionId=l,L.districtId=m,L.wardId=d,S(L)},requiredMark:!0,children:[e.jsx(a.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(a.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(a.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10},children:e.jsx(X,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(P,{type:"dashed",onClick:()=>x("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(a.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(K,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(a.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,type:"string",message:"Please input Phones Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Phone Number ..."})}),e.jsxs(je,{direction:"horizontal",children:[e.jsx(a.Item,{name:"dob",label:"Date of Birth",rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(st,{size:"large",onChange:E,disabledDate:L=>L&&L>Ye().subtract(3,"years"),defaultValue:Ut(new Date).subtract(3,"years"),popupStyle:{zIndex:9999}})}),e.jsx(a.Item,{name:"gender",label:"Gender",rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:h,children:e.jsxs(H,{placeholder:"Please Choose Gender ...",style:{width:220},onChange:N,size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(qt,{value:"female",children:"Female"}),e.jsx(qt,{value:"male",children:"Male"})]})})]}),e.jsxs(je,{direction:"horizontal",children:[e.jsx(je,{direction:"vertical",children:e.jsx(lt,{onChange:R,regionId:l,size:"large"})}),e.jsx(je,{direction:"vertical",children:e.jsx(rt,{regionId:parseInt(l),districtId:m,onChange:v,size:"large"})})]}),e.jsx(je,{direction:"horizontal",children:e.jsx(je,{direction:"vertical",children:e.jsx(at,{districtId:parseInt(m),wardId:d,onChange:b,size:"large"})})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:30,marginBottom:30},children:[e.jsx(P,{size:"large",onClick:()=>{M.resetFields()},danger:!0,style:{float:"left"},icon:e.jsx(fr,{}),children:"Clear"}),e.jsx(P,{size:"large",htmlType:"submit",danger:!0,style:{float:"right"},icon:e.jsx(Sr,{}),children:"Save"})]})]})]})})})},{Option:xt}=H,Ul=[];for(let t=2022;t<new Date().getFullYear()+5;t++)Ul.push(e.jsx(xt,{children:t.toString()},t));const Wl=t=>{const[n,c]=s.useState(null),[l,i]=s.useState(null),[m,u]=s.useState(null),[d,o]=s.useState(null),[h,C]=s.useState(null),[k]=a.useForm(),A=async b=>{C(b.format("YYYY-MM-DD"))},q=async b=>{o(b)},I=async b=>{u(b)},M=async b=>{c(b),i(null),u(null),k.resetFields(["districtId","wardId"])},E=async b=>{i(b),u(null),k.resetFields(["wardId"])},N=async b=>{var v;const{data:R}=await w.custom({url:"",method:"post",meta:{operation:"updateSchoolMemberInformation",variables:{id:{value:parseInt(((v=t==null?void 0:t.member)==null?void 0:v.id.toString())??"0"),type:"Int",required:!0},firstName:{value:b.firstName,type:"String",required:!0},middleName:{value:b.middleName,type:"String",required:!0},lastName:{value:b.lastName,type:"String",required:!0},email:{value:b.email,type:"String",required:!1},phone:{value:b.phone,type:"String",required:!1},registrationNumber:{value:b.registrationNumber,type:"String",required:!0},gender:{value:b.gender,type:"String",required:!0},regionId:{value:b.regionId,type:"Int",required:!1},districtId:{value:b.districtId,type:"Int",required:!1},wardId:{value:b.wardId,type:"Int",required:!1},dob:{value:b.dob,type:"String",required:!1}},fields:["success","message",{schoolMember:We}]}}).catch(()=>(x.error("Error occured while updating member Informations"),{data:null})).then(S=>S);R&&(R.success?(x.success(R.message),t.onFinish(R.schoolMember,t.editting),k.resetFields()):x.error(R.message))};return s.useEffect(()=>{var b,R,v,S,L,j,T,f,p,F,r,g,U,$,Y,G,Z,xe,ye,ve,_,D,te;o((b=t.member)==null?void 0:b.gender),c((v=(R=t.member)==null?void 0:R.region)==null?void 0:v.id),i((L=(S=t.member)==null?void 0:S.district)==null?void 0:L.id),u((T=(j=t.member)==null?void 0:j.ward)==null?void 0:T.id),k.setFieldsValue({firstName:(f=t.member)==null?void 0:f.firstName,middleName:(p=t.member)==null?void 0:p.middleName,lastName:(F=t.member)==null?void 0:F.lastName,email:(r=t.member)==null?void 0:r.email,phone:(g=t.member)==null?void 0:g.phone,registrationNumber:(U=t.member)==null?void 0:U.registrationNumber,gender:($=t.member)==null?void 0:$.gender,regionId:parseInt(((G=(Y=t.member)==null?void 0:Y.region)==null?void 0:G.id.toString())??"0"),districtId:parseInt(((xe=(Z=t.member)==null?void 0:Z.district)==null?void 0:xe.id.toString())??"0"),wardId:parseInt(((ve=(ye=t.member)==null?void 0:ye.ward)==null?void 0:ve.id.toString())??"0")}),(_=t.member)!=null&&_.dob&&(C(Ye((D=t.member)==null?void 0:D.dob)),k.setFieldsValue({dob:Ut((te=t.member)==null?void 0:te.dob)}))},[t.member]),e.jsx(e.Fragment,{children:e.jsxs(a,{layout:"vertical",form:k,onFinish:b=>{b.dob=h,N(b)},requiredMark:!0,children:[e.jsx(a.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(a.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(a.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10},children:e.jsx(X,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(P,{type:"dashed",onClick:()=>x("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(a.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(K,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(a.Item,{name:"phone",label:"Phones Number",rules:[{required:!1,type:"string",message:"Please input Phones Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Phones Numbers ..."})}),e.jsxs(ne,{children:[e.jsx(B,{span:24,children:e.jsxs(je,{direction:"horizontal",children:[e.jsx(a.Item,{name:"dob",label:"Date of Birth",rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(st,{onChange:A,disabledDate:b=>b&&b>Ye().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(a.Item,{name:"gender",label:"Gender",rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:d,children:e.jsxs(H,{size:"large",placeholder:"Please Choose Gender ...",style:{width:220},onChange:q,dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(xt,{value:"female",children:"Female"}),e.jsx(xt,{value:"male",children:"Male"})]})})]})}),e.jsxs(B,{span:24,children:[e.jsx(lt,{onChange:M,regionId:parseInt(n),name:"regionId",label:"Region",size:"middle",required:!1}),e.jsx(rt,{regionId:parseInt(n),districtId:parseInt(l),onChange:E,name:"districtId",label:"District",size:"middle",required:!1}),e.jsx(at,{districtId:parseInt(l),wardId:parseInt(m),onChange:I,name:"wardId",label:"Ward",size:"middle",required:!1})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Vl=t=>{const[n,c]=s.useState([]),[l,i]=s.useState([]),[m,u]=s.useState([]),d=async(A,q="")=>{const{data:I}=await w.custom({url:"",method:"get",meta:{operation:"systemRoleRecords",variables:{page:{value:A,type:"Int",required:!0},key:{value:q,type:"String",required:!1},userId:{value:parseInt(t.user.id),type:"Int",required:!0},schoolId:{value:parseInt(t.school.id),type:"Int",required:!0},custom:{value:!1,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["key","title","description","chosen"]}]}});c([...I.results])},o=async A=>{const{data:q}=await w.custom({url:"",method:"post",meta:{operation:"addUserRoles",variables:{userId:{value:parseInt(t.user.id),type:"Int",required:!0},roles:{value:A.map(I=>parseInt(I)),type:"[Int]",required:!0}},fields:["success","message"]}});q.success?(x.success(q.message),d(1)):x.error(q.message)},h=async A=>{const{data:q}=await w.custom({url:"",method:"post",meta:{operation:"removeUserRoles",variables:{userId:{value:parseInt(t.user.id),type:"Int",required:!0},roles:{value:A.map(I=>parseInt(I)),type:"[Int]",required:!0}},fields:["success","message"]}});q.success?(x.success(q.message),d(1)):x.error(q.message)},C=A=>{m.length>0&&o(m),l.length>0&&h(l)},k=(A,q)=>{u(A),i(q)};return s.useEffect(()=>{d(1)},[t.randKey,t.user]),e.jsx(e.Fragment,{children:e.jsx(vr,{titles:["Not Assigned Roles","Assigned Roles"],dataSource:n,showSearch:!0,listStyle:{width:"100vw",height:"65vh"},operations:["Add","Remove"],targetKeys:n.filter(A=>A.chosen).map(A=>A.key),onChange:(A,q,I)=>C(A.map(M=>M.toString())),onSelectChange:(A,q)=>k(A.map(I=>I.toString()),q.map(I=>I.toString())),onSearch:(A,q)=>{},render:A=>A.title})})},$l=t=>{const[n,c]=s.useState([]),l=async(m,u="")=>{const{data:d}=await w.custom({url:"",method:"get",meta:{operation:"userRoles",variables:{page:{value:m,type:"Int",required:!0},key:{value:u,type:"String",required:!1},userId:{value:parseInt(t.user.id),type:"Int",required:!0},schoolId:{value:parseInt(t.school.id),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","created","updated","isActive","canEdit","canDelete","canManage",{role:["id","name","code","description","created","updated","isActive","canEdit","canDelete","canManage"]}]}]}});c([...d.results])},i=async m=>{const{data:u}=await w.custom({url:"",method:"post",meta:{operation:"removeUserRole",variables:{roleId:{value:m.role.id,type:"Int",required:!0},userId:{value:parseInt(t.user.id),type:"Int",required:!0}},fields:["success","message"]}});u.success?(x.success(u.message),c(n.filter(d=>d.id!==m.id))):x.error(u.message)};return s.useEffect(()=>{l(1)},[t.randKey,t.user]),e.jsx(e.Fragment,{children:e.jsx(de,{dataSource:n,renderItem:m=>e.jsx(de.Item,{actions:[e.jsx(se,{placement:"topLeft",title:"Remove "+m.role.name,onConfirm:()=>i(m),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(P,{icon:e.jsx(ue,{}),children:"Remove"})})],children:m.role.name})})})},Hl=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,Jl=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(!1),[m]=a.useForm(),u=async d=>{const{data:o}=await w.custom({url:"",method:"post",meta:{operation:"uploadSchoolMemberProfilePhoto",variables:{id:{value:parseInt(t.member.id),type:"Int",required:!0},photo:{value:d.file,type:"Upload",required:!0}},fields:["success","message",{schoolMember:We}]}}).catch(h=>(console.error(h),x.error("Error occured while uploading profile picture"),{data:null})).then(h=>h);o&&(o.success?(x.success(o.message),t.onChange(o.schoolMember),c(!1)):x.error(o.message))};return s.useEffect(()=>{},[]),e.jsxs(e.Fragment,{children:[e.jsx(P,{block:!0,type:"primary",onClick:()=>c(!0),children:"Update Profile Picture"}),e.jsx(re,{title:"Change Profile Picture",open:n,width:"40vw",onClose:d=>c(d),children:e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:l,children:e.jsxs(a,{layout:"vertical",form:m,onFinish:d=>{u(d)},requiredMark:!0,autoComplete:"off",children:[e.jsx(a.Item,{label:"Pick Files ("+ge.supported_image_extensions.join()+")",children:e.jsx(a.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:Hl,noStyle:!0,rules:[{required:!0,type:"array",message:"Please Upload Profile Picture"}],children:e.jsxs(St.Dragger,{name:"file",accept:ge.supported_file_extensions.join(),multiple:!0,beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(nt,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",loading:l,children:"Change"})})]})})})})]})},Ql=t=>{var u,d,o,h,C,k,A;const[n,c]=s.useState(!1),[l,i]=s.useState(null),m=async()=>{c(!0);const{data:q}=await w.custom({url:"",method:"get",meta:{operation:"schoolMember",variables:{id:{value:parseInt(t.member.id),type:"Int",required:!0}},fields:We}}).catch(I=>(console.error(I),x.error("Error occured while getting school member"),{data:null})).then(I=>I);q&&i(q),c(!1)};return s.useEffect(()=>{i(t.member),m()},[]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(ne,{children:[e.jsxs(B,{span:4,children:[e.jsx(Cr,{width:"100%",height:"280px",src:l==null?void 0:l.dp}),e.jsx("div",{style:{marginTop:10},children:e.jsx(Jl,{member:t.member,onChange:q=>{i(q)}})})]}),e.jsx(B,{span:20,children:e.jsxs("div",{style:{padding:10,marginLeft:10,border:"1px solid #e8e8e8",borderRadius:5},children:[e.jsxs(ke,{title:"Member Basic Informations",children:[e.jsx(ke.Item,{label:"Title",children:t.member.title}),e.jsx(ke.Item,{label:"First Name",children:t.member.firstName}),e.jsx(ke.Item,{label:"Middle Name",children:t.member.middleName}),e.jsx(ke.Item,{label:"Last Name",children:t.member.lastName}),e.jsx(ke.Item,{label:"Gender",children:t.member.gender}),e.jsx(ke.Item,{label:"DOB",children:t.member.dob}),e.jsx(ke.Item,{label:"Age",children:((u=t==null?void 0:t.member)==null?void 0:u.age)&&e.jsxs(e.Fragment,{children:[t.member.age," years"]})})]}),e.jsxs(ke,{title:"Member Contact Informations",children:[e.jsx(ke.Item,{label:"Mobile Phone Number",children:t.member.phone}),e.jsx(ke.Item,{label:"Email Address",children:t.member.email}),e.jsx(ke.Item,{label:"Region",children:(o=(d=t.member)==null?void 0:d.region)==null?void 0:o.name}),e.jsx(ke.Item,{label:"District",children:(C=(h=t.member)==null?void 0:h.district)==null?void 0:C.name}),e.jsx(ke.Item,{label:"Ward",children:(A=(k=t.member)==null?void 0:k.ward)==null?void 0:A.name}),e.jsx(ke.Item,{label:"Address",children:t.member.address})]})]})})]})})})},{TextArea:wl}=K,{Option:Xl}=H,Zl=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,ea=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState([]),[m]=a.useForm(),u=async o=>{c(!0);const{data:h}=await w.custom({url:"",method:"post",meta:{operation:"createSchoolMemberContract",variables:{schoolMemberId:{value:parseInt(t.member.id),type:"Int",required:!0},contractNumber:{value:o.contractNumber,type:"String",required:!0},startDate:{value:o.contractStartDate,type:"String",required:!0},endDate:{value:o.contractEndDate,type:"String",required:!0},contractType:{value:o.contractType,type:"String",required:!0},description:{value:o.contractDescription,type:"String",required:!1},contractDocument:{value:o.file,type:"Upload",required:!0}},fields:["success","message"]}}).catch(C=>(console.error(C),x.error("Error occured while adding contract"),{data:null})).then(C=>C);console.log(h),c(!1)},d=async()=>{const{data:o}=await w.custom({url:"",method:"get",meta:{operation:"schoolMemberContractTypes",variables:{},fields:["data"]}}).catch(()=>(x.error("Error occured while fetching contract types"),{data:null})).then(h=>h);o&&i(o.data)};return s.useEffect(()=>{d()},[]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:m,onFinish:o=>{u(o)},requiredMark:!0,children:[e.jsx(a.Item,{name:"contractNumber",label:"Contract Number",rules:[{required:!0,type:"string",message:"Please input Contract Number"}],children:e.jsx(K,{})}),e.jsx(a.Item,{name:"contractStartDate",label:"Contract Start Date",rules:[{required:!0,type:"date",message:"Please input Contract Start Date"}],children:e.jsx(Ie.DatePicker,{style:{width:"50%"},popupStyle:{zIndex:9999},onChange:()=>{}})}),e.jsx(a.Item,{name:"contractEndDate",label:"Contract End Date",rules:[{required:!0,type:"date",message:"Please input Contract End Date"}],children:e.jsx(Ie.DatePicker,{style:{width:"50%"},popupStyle:{zIndex:9999},onChange:()=>{},disabledDate:o=>o&&o<m.getFieldValue("contractStartDate")})}),e.jsx(a.Item,{name:"contractType",label:"Contract Type",rules:[{required:!0,type:"string",message:"Please choose Contract Type..."}],children:e.jsx(H,{showSearch:!0,placeholder:"Select a Contract Type",optionFilterProp:"children",onChange:o=>{},onSearch:o=>{},filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),dropdownStyle:{zIndex:9999},children:l.map((o,h)=>e.jsx(Xl,{value:o,children:o}))})}),e.jsx(a.Item,{name:"contractDescription",label:"Contract Description",rules:[{required:!1,type:"string",message:"Please input Contract Description"}],children:e.jsx(wl,{rows:4})}),e.jsx(a.Item,{label:"Pick Files (pdf)",children:e.jsx(a.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:Zl,noStyle:!0,rules:[{required:!0,type:"array",message:"Please Upload Contract File"}],children:e.jsxs(Ie.Upload.Dragger,{name:"file",accept:"application/pdf",multiple:!1,beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(nt,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Search:ta}=K,sa=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(0),[m,u]=s.useState(0),[d,o]=s.useState(""),[h,C]=s.useState(null),[k,A]=s.useState(!1),q=async E=>{const{data:N}=await w.custom({url:"",method:"post",meta:{operation:"deleteSchoolMemberContract",variables:{id:{value:E,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error occured while deleting school member contract"),{data:null})).then(b=>b);N&&(x.success(N.message),C(h.filter(b=>b.id!==E)))},I=async(E,N)=>{const{data:b}=await w.custom({url:"",method:"post",meta:{operation:"blockUnblockSchoolMemberContract",variables:{id:{value:parseInt(E.toString()),type:"Int",required:!0},blocked:{value:N,type:"Boolean",required:!0}},fields:["success","message",{schoolMemberContract:Et}]}}).catch(()=>(x.error("Error occured while blocking/unblocking school member contract"),{data:null})).then(R=>R);b?(x.success(b.message,{position:"top-left"}),C(h.map(R=>R.id.toString()===E.toString()?b.schoolMemberContract:R))):x.error("Error occured while blocking/unblocking school member contract",{position:"bottom-right"})},M=async(E=1,N=25,b="")=>{c(!0);const{data:R}=await w.custom({url:"",method:"get",meta:{operation:"schoolMemberContracts",variables:{schoolMemberId:{value:parseInt(t.member.id),type:"Int",required:!0},page:{value:E,type:"Int",required:!0},pageSize:{value:N,type:"Int",required:!0},key:{value:b,type:"String",required:!1}},fields:["total","pages","page","hasNext","hasPrev",{results:Et}]}}).catch(()=>(x.error("Error occured while getting school member contracts"),{data:null})).then(v=>v);R&&(i(R.total),u(R.pages),C(R.results)),c(!1)};return s.useEffect(()=>{M(1,25,"")},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(B,{span:8,children:e.jsx(ta,{placeholder:"input search text",onSearch:E=>{o(E),M(1,25,E)},style:{width:"100%"}})}),e.jsx(B,{span:16,children:e.jsx(P,{type:"primary",style:{float:"right"},icon:e.jsx(ce,{}),onClick:()=>A(!0),disabled:n||!t.member.canManage,children:"Add Contract"})})]}),e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(me,{dataSource:h,columns:[{title:"Contract #",dataIndex:"contractNumber",key:"contractNumber"},{title:"Contract Type",dataIndex:"contractType",key:"contractType"},{title:"Start Date",dataIndex:"contractStartDate",key:"contractStartDate"},{title:"End Date",dataIndex:"contractEndDate",key:"contractEndDate"},{title:"Status",dataIndex:"status",key:"status",render:(E,N)=>e.jsx(e.Fragment,{children:N.isActive?e.jsx(X,{title:"Active",placement:"top",children:e.jsx(le,{color:"green",children:"Active"})}):e.jsx(X,{title:"Blocked",placement:"top",children:e.jsx(le,{color:"red",children:"Blocked"})})})},{title:"",dataIndex:"actions",key:"actions",render:(E,N)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(se,{title:"Delete Contract?",description:"Are you sure to delete this Contract?",onConfirm:()=>q(N.id),okText:"Yes",cancelText:"No",children:e.jsx(P,{type:"primary",icon:e.jsx(ue,{}),disabled:!N.canDelete})}),N.isActive?e.jsx(X,{title:"Block Contract",placement:"top",children:e.jsx(P,{type:"primary",style:{marginLeft:10},icon:e.jsx(Ht,{}),onClick:()=>{I(N.id,!1)}})}):e.jsx(X,{title:"Unblock Contract",placement:"top",children:e.jsx(P,{type:"primary",style:{marginLeft:10},icon:e.jsx(Dr,{}),onClick:()=>{I(N.id,!0)}})}),e.jsx(X,{title:"Download Contract Document",placement:"top",children:e.jsx(P,{type:"primary",style:{marginLeft:10},icon:e.jsx(vt,{}),onClick:()=>{window.open(N.contractDocument,"_blank")}})})]})}]})})}),e.jsx(ne,{children:e.jsx(B,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(Gt,{defaultCurrent:1,total:l,onChange:(E,N)=>{M(E,N,d)}})})}),e.jsx(re,{title:"Add Contract",open:k,width:"40vw",onClose:E=>A(E),children:e.jsx(ea,{member:t.member})})]})},na=t=>{const[n,c]=s.useState(null),l=i=>i.charAt(0).toUpperCase()+i.slice(1);return s.useEffect(()=>{c(JSON.parse(t.member.availability))},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(B,{span:4,children:e.jsx("b",{children:"Day"})}),e.jsx(B,{span:2,children:e.jsx("b",{children:"Morning"})}),e.jsx(B,{span:2,children:e.jsx("b",{children:"After Noon"})}),e.jsx(B,{span:2,children:e.jsx("b",{children:"Evening"})}),e.jsx(B,{span:4,style:{textAlign:"right"},children:e.jsx("b",{children:"Time Range"})})]}),n&&Object.keys(n).map(i=>e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:4,children:i.charAt(0).toUpperCase()+i.slice(1)}),e.jsx(B,{span:2,children:e.jsx(se,{title:n[i].morning?"Available on "+l(i):"Not Available on "+l(i),description:e.jsx("div",{style:{width:"245px"},children:n[i].morning?"Are you sure you want to make this member unavailable in the morning?":"Are you sure you want to make this member available in the morning?"}),onConfirm:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(le,{color:n[i].morning?"green":"red",style:{cursor:"pointer"},children:n[i].morning?"Yes":"No"})})}),e.jsx(B,{span:2,children:e.jsx(se,{title:n[i].afternoon?"Available on "+l(i):"Not Available on "+l(i),description:e.jsx("div",{style:{width:"245px"},children:n[i].afternoon?"Are you sure you want to make this member unavailable in the morning?":"Are you sure you want to make this member available in the morning?"}),onConfirm:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(le,{color:n[i].afternoon?"green":"red",style:{cursor:"pointer"},children:n[i].afternoon?"Yes":"No"})})}),e.jsx(B,{span:2,children:e.jsx(se,{title:n[i].evening?"Available on "+l(i):"Not Available on "+l(i),description:e.jsx("div",{style:{width:"245px"},children:n[i].evening?"Are you sure you want to make this member unavailable in the morning?":"Are you sure you want to make this member available in the morning?"}),onConfirm:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(le,{color:n[i].evening?"green":"red",style:{cursor:"pointer"},children:n[i].evening?"Yes":"No"})})}),e.jsxs(B,{span:4,children:[n[i].time.map(m=>e.jsx("span",{children:m})),e.jsx(P,{size:"small",type:"primary",icon:e.jsx(Ne,{}),style:{float:"right"}})]})]}))]})},ra=zn.createContext({name:"Default"}),la=t=>{var bt,It,Ft,kt,Mt;const[n,c]=br.useNotification(),[l,i]=s.useState(),[m,u]=s.useState([]),[d,o]=s.useState([]),[h,C]=s.useState(!1),[k,A]=s.useState(0),[q,I]=s.useState(20),[M,E]=s.useState(""),[N,b]=s.useState(!0),[R]=a.useForm(),[v]=a.useForm(),L=!fe.useBreakpoint().lg,[j,T]=s.useState(!1),[f,p]=s.useState(!1),[F,r]=s.useState(!1),[g,U]=s.useState(!1),[$,Y]=s.useState(!1),[G,Z]=s.useState(!1),[xe,ye]=s.useState(!1),[ve,_]=s.useState(),[D,te]=s.useState(!1),[ee,he]=s.useState(!1),[Re,Pe]=s.useState(!1),[De,Ee]=s.useState(!1),ze=W=>{i(W),Ee(!0)},z=W=>{i(W),Pe(!0)},y=W=>{i(W),T(!0)},Q=W=>{i(W),ye(!0)},pe=(W,O)=>{W?n.success({message:"Member Credential Reset",description:O,placement:"bottomRight"}):n.error({message:"Member Credential Reset",description:O,placement:"bottomRight"})},Te=W=>{he(W),te(!1),_(void 0),v.resetFields()},be=W=>{te(!0),i(W)},Ve=W=>{_(W)},$e=W=>{i(W),r(!0)},hs=W=>{i(W),p(!0)},ms=async W=>{u([W,...m])},xs=W=>{u([W,...m]),Z(!1)},gs=async W=>{qn(W).then(O=>{O&&(O.success?(x.success(O.message),u(m.filter(Ce=>Ce.id!==W))):x.error(O.message))})},it=async(W,O="",Ce=20,qe=[])=>{b(!0),Rn(W,O,Ce,qe,t.status??"").then(Ke=>{Ke&&(A(Ke.total),u(Ke.results)),b(!1)})},js=async(W,O="",Ce=20)=>{Wt(W,O,Ce).then(qe=>{qe&&(A(qe.total),o([...qe.results]))})},ys=s.useMemo(()=>({name:"School Members"}),[]),ps=async W=>{u(m.map(O=>O.id===W.id?W:O)),T(!1)};return s.useEffect(()=>(it(1,"",20),js(1,"",20),document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[t.status]),e.jsx(e.Fragment,{children:e.jsxs(ra.Provider,{value:ys,children:[c,e.jsx(Ir,{offsetTop:68,children:e.jsx(tt,{size:"small",style:{marginBottom:"10px"},children:e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:L?24:10,children:e.jsx(a,{layout:"horizontal",form:R,onFinish:W=>{E(W.key),m.length=0,it(1,W.key,q,W.roles)},children:e.jsxs(ne,{children:[e.jsx(B,{span:L?24:16,children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(B,{span:6,children:e.jsx(a.Item,{name:"roles",children:e.jsx(H,{size:"large",mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"Please select Member Role(s)",onChange:()=>{},dropdownStyle:{zIndex:9999},children:d.map(W=>e.jsx(H.Option,{value:W.id,children:W.role.name},W.id))})})}),e.jsx(B,{children:e.jsx(P,{htmlType:"submit",size:"large",icon:e.jsx(ie,{}),onClick:()=>R.submit()})})]})})}),e.jsxs(B,{span:L?24:14,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(P,{size:"large",icon:e.jsx(ce,{}),onClick:()=>Y(!0),children:"Authorize Member"}),e.jsx(P,{size:"large",icon:e.jsx(ce,{}),onClick:()=>Z(!0),children:"Register Member"}),e.jsx(P,{size:"large",icon:e.jsx(ce,{}),onClick:()=>C(!0),children:"Enroll Member(s)"})]})]})})}),e.jsx(me,{loading:N,columns:[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(W,O)=>e.jsx("span",{children:e.jsx("a",{children:O.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(W,O)=>e.jsx("span",{children:O.registrationNumber})},{title:"Email",dataIndex:"email",render:(W,O)=>e.jsx("span",{children:O.email?O.email:O.user.email})},{title:"Username",dataIndex:"username",render:(W,O)=>{var Ce;return e.jsx("span",{children:(Ce=O==null?void 0:O.user)==null?void 0:Ce.username})}},{title:"Phone",dataIndex:"phone",render:(W,O)=>e.jsx("span",{children:O.phone?O.phone:O.user.phone})},{title:"Gender",dataIndex:"gender",render:(W,O)=>e.jsx("span",{children:O.gender?O.gender:O.user.gender})},{title:"Region/District/Ward",dataIndex:"region_district_ward",render:(W,O)=>{var Ce,qe,Ke,Lt,At;return e.jsxs("span",{children:[(Ce=O==null?void 0:O.region)==null?void 0:Ce.name,((qe=O==null?void 0:O.district)==null?void 0:qe.name)&&e.jsxs(e.Fragment,{children:["/",(Ke=O==null?void 0:O.district)==null?void 0:Ke.name]}),((Lt=O==null?void 0:O.ward)==null?void 0:Lt.name)&&e.jsxs(e.Fragment,{children:["/",(At=O==null?void 0:O.ward)==null?void 0:At.name]})]})}},{title:"Date Joined",dataIndex:"created",render:(W,O)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(O.created).toLocaleString()})})},{title:"Authed",dataIndex:"isAuthed",render:(W,O)=>{var Ce;return e.jsx("a",{children:(Ce=O==null?void 0:O.user)!=null&&Ce.isAuthed?e.jsx(le,{color:"green",children:"Yes"}):e.jsx(le,{color:"red",children:"Not"})})}},{title:"Status",dataIndex:"isActive",render:(W,O)=>e.jsx("a",{children:O!=null&&O.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"Action(s)",dataIndex:"action",fixed:"right",render:(W,O)=>{var Ce;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsxs(J,{children:[e.jsx(J.Item,{icon:e.jsx(Be,{style:{color:"red"}}),disabled:!O.canEdit,children:e.jsx(X,{title:"Click to view Member Profile",placement:"left",color:"green",children:e.jsx(P,{type:"link",rel:"noopener noreferrer",onClick:()=>Q(O),children:"Profile"})})}),O.contractApplicable&&e.jsx(J.Item,{icon:e.jsx(Ge,{style:{color:"red"}}),disabled:!O.canManage,children:e.jsx(X,{title:"Click to view Member Contracts",placement:"left",color:"green",children:e.jsx(P,{type:"link",rel:"noopener noreferrer",onClick:()=>z(O),children:"Contracts"})})}),e.jsx(J.Item,{icon:e.jsx(Ne,{style:{color:"red"}}),disabled:!O.canEdit,children:e.jsx(X,{title:"Click to Edit Member Informations",placement:"left",color:"green",children:e.jsx(P,{type:"link",rel:"noopener noreferrer",onClick:()=>y(O),children:"Edit"})})}),e.jsx(J.Item,{icon:e.jsx(ue,{style:{color:"red"}}),children:e.jsx(X,{title:"Delete Member",placement:"left",color:"red",children:e.jsx(se,{title:"Are you sure to delete this ",placement:"topRight",onConfirm:()=>gs(O==null?void 0:O.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(O!=null&&O.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(P,{type:"link",disabled:!(O!=null&&O.canDelete),children:"Delete"})})})}),O.canConfigureAvailability&&e.jsx(J.Item,{icon:e.jsx(cr,{style:{color:"red"}}),children:e.jsx(P,{type:"link",onClick:()=>ze(O),children:"Manage Availability"})}),O.user&&e.jsxs(e.Fragment,{children:[e.jsx(J.Item,{icon:e.jsx(Be,{style:{color:"red"}}),children:e.jsx(P,{type:"link",onClick:()=>hs(O),children:"Roles"})}),e.jsx(J.Item,{icon:e.jsx(Be,{style:{color:"red"}}),children:e.jsx(P,{type:"link",onClick:()=>$e(O),children:"Manage Roles"})}),((Ce=O==null?void 0:O.user)==null?void 0:Ce.isAuthed)&&e.jsx(J.Item,{icon:e.jsx(Jt,{style:{color:"red"}}),children:e.jsx(X,{title:"Click to Reset Member Credentials",placement:"left",color:"green",children:e.jsx(P,{type:"link",onClick:()=>be(O),children:"Reset Credentials"})})})]})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:qe=>qe.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}}],dataSource:m,pagination:{onChange:(W,O)=>{I(O),it(W,M,O)},total:k,pageSize:q,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"calc(100vh - 350px)"}}),e.jsx(Se,{title:"Adding School Members",anchor:"right",open:h,noOverFlow:!0,onClose:W=>C(W),width:"35vw",children:e.jsx(Ol,{randKey:Math.random(),onAdd:ms})}),e.jsx(re,{title:"Resetting Password",open:D,onClose:W=>te(W),width:"30vw",children:e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Resetting Credentials for ",e.jsx("b",{children:l==null?void 0:l.fullName})]}),e.jsx("p",{children:"Are you sure to reset this user's credentials?"}),e.jsx(_l,{member:l==null?void 0:l.user,form:v,resetPhoneChange:Ve,randKey:Math.random(),resetting:Te,resettingFeedback:pe}),e.jsxs(Tn,{justify:"space-between",children:[e.jsx(P,{onClick:()=>{te(!1),i(void 0)},children:"Close"}),e.jsx(P,{disabled:v.getFieldValue("phone")?v.getFieldValue("phone").length<10||ee:!0,onClick:()=>{v.submit()},children:"Reset"})]})]})}),e.jsx(re,{title:((bt=l==null?void 0:l.user)==null?void 0:bt.fullName)+" Roles",open:f,onClose:W=>p(W),width:"60vw",children:e.jsx($l,{user:l==null?void 0:l.user,school:l==null?void 0:l.school,randKey:Math.random()})}),e.jsx(re,{title:"Manage "+((It=l==null?void 0:l.user)==null?void 0:It.fullName)+" Roles",open:F,width:"40vw",onClose:W=>r(W),children:e.jsx(Vl,{user:l==null?void 0:l.user,school:l==null?void 0:l.school,randKey:Math.random()})}),e.jsx(re,{title:"Member Registration By Excel Uploading",open:g,width:"40vw",onClose:W=>U(W),children:e.jsx("span",{children:"member registration by excel uploading"})}),e.jsx(re,{title:"Members Authorization",open:$,width:"40vw",onClose:W=>Y(W),children:e.jsx(Kl,{})}),e.jsx(re,{title:"Edit Member",open:j,width:"40vw",onClose:W=>T(W),children:e.jsx(Wl,{member:l,onFinish:ps})}),e.jsx(re,{title:"Managing "+((Ft=l==null?void 0:l.user)==null?void 0:Ft.fullName)+" Availability",open:De,width:"70vw",onClose:W=>Ee(W),children:e.jsx(na,{member:l})}),e.jsx(Se,{title:"Registering School Members",anchor:"right",open:G,onClose:W=>Z(W),width:"35vw",noOverFlow:!0,children:e.jsx(Bl,{onAdd:xs})}),e.jsx(Se,{title:e.jsx(e.Fragment,{children:e.jsxs("span",{children:[e.jsx("b",{children:(kt=l==null?void 0:l.user)==null?void 0:kt.fullName})," Profile"]})}),anchor:"right",open:xe,noOverFlow:!0,onClose:W=>ye(W),width:"85vw",children:e.jsx(Ql,{member:l})}),e.jsx(Se,{title:e.jsx(e.Fragment,{children:e.jsxs("span",{children:[e.jsx("b",{children:(Mt=l==null?void 0:l.user)==null?void 0:Mt.fullName})," Contracts"]})}),anchor:"right",open:Re,noOverFlow:!0,onClose:W=>Pe(W),width:"60vw",children:e.jsx(sa,{member:l})})]})})},aa=()=>{const{status:t}=Ue();return s.useEffect(()=>{document.title=t==="active"?ge.system_name+": Active Members":t==="blocked"?ge.system_name+": Blocked Members":ge.system_name+": All Members"},[t]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Members"}),e.jsx(V.Item,{children:t==="active"?"Active Members":t==="blocked"?"Blocked Members":"All Members"})]})}),e.jsx(la,{status:t})]})},{TextArea:ia}=K,oa=t=>{const[n,c]=s.useState(!0),[l,i]=s.useState(!0);return s.useEffect(()=>{},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("h3",{children:["Course: ",t.studyCourse.course.name]}),e.jsxs("h3",{children:["Year: ",t.studyCourse.year]}),e.jsxs("h3",{children:["Level: ",t.studyCourse.levelDisplay]}),e.jsxs("h3",{children:["Semester: ",t.studyCourse.semesterDisplay]}),e.jsxs(a,{layout:"vertical",form:t.form,onFinish:m=>{m.study_course_id=t.studyCourse.id,m.create_class=n,m.create_drive=l,t.onFinish(m)},initialValues:{periods_per_week:2},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx(K,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(a.Item,{name:"periods_per_week",label:"Periods Per Week",rules:[{required:!0,type:"number",message:"Please input Periods Per Week"},{min:1,type:"number",message:"Periods Per Week must be greater than 0"}],children:e.jsx(Ie.InputNumber,{size:"large",placeholder:"Enter Periods Per Week ..."})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Le,{checked:n,onChange:()=>c(!n),children:"Auto Create Class"})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Le,{checked:l,onChange:()=>i(!l),children:"Auto Create Drive"})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(ia,{rows:2,placeholder:"Please input Description ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},{TextArea:da}=K,ca=t=>{var l,i,m,u,d,o,h,C,k;const[n,c]=s.useState(t.module.isActive);return s.useEffect(()=>{t.form.setFieldsValue({name:t.module.name,code:t.module.code,description:t.module.description,periods_per_week:t.module.periodsPerWeek,is_active:t.module.isActive})},[t.randKey,t.module,t.form]),e.jsxs(e.Fragment,{children:[e.jsxs("h3",{children:["Course: ",(m=(i=(l=t.module)==null?void 0:l.studyCourse)==null?void 0:i.course)==null?void 0:m.name]}),e.jsxs("h3",{children:["Year: ",(d=(u=t.module)==null?void 0:u.studyCourse)==null?void 0:d.year]}),e.jsxs("h3",{children:["Level: ",(h=(o=t.module)==null?void 0:o.studyCourse)==null?void 0:h.levelDisplay]}),e.jsxs("h3",{children:["Semester: ",(k=(C=t.module)==null?void 0:C.studyCourse)==null?void 0:k.semesterDisplay]}),e.jsxs(a,{layout:"vertical",form:t.form,onFinish:A=>{A.id=parseInt(t.module.id),A.study_course_id=t.module.studyCourse.id,A.is_active=n,t.onFinish(A)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx(K,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(da,{rows:2,placeholder:"Please input Description ..."})}),e.jsx(a.Item,{name:"periods_per_week",label:"Periods Per Week",rules:[{required:!0,type:"number",message:"Please input Periods Per Week"},{min:1,type:"number",message:"Periods Per Week must be greater than 0"}],children:e.jsx(_e,{size:"large",placeholder:"Enter Periods Per Week ..."})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Le,{checked:n,onChange:()=>c(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},{Option:Xe}=H,ua=[];for(let t=2022;t<new Date().getFullYear()+5;t++)ua.push(e.jsx(Xe,{children:t.toString()},t));const ha=t=>{const[n,c]=s.useState(null),[l,i]=s.useState(null),[m,u]=s.useState(null),[d,o]=s.useState(null),[h,C]=s.useState(null),[k,A]=s.useState([]),[q]=a.useForm(),[I,M]=s.useState(""),E=async j=>{C(j.format("YYYY-MM-DD"))},N=async j=>{o(j)},b=async j=>{u(j)},R=async j=>{c(j),i(null)},v=async j=>{i(j),u(null)},S=async()=>{var j;Vt(1,"",100,(j=t.studyCourse)==null?void 0:j.id).then(T=>{A(T.results)})},L=async j=>{var f;const{data:T}=await w.custom({url:"",method:"post",meta:{operation:"createStudyCourseStudent",variables:{studyCourseId:{value:j.studyCourseId,type:"Int",required:!1},firstName:{value:j.firstName,type:"String",required:!0},middleName:{value:j.middleName,type:"String",required:!0},lastName:{value:j.lastName,type:"String",required:!0},email:{value:j.email,type:"String",required:!1},phones:{value:j.phones,type:"[String]",required:!1},registrationNumber:{value:j.registrationNumber,type:"String",required:!0},gender:{value:j.gender,type:"String",required:!0},regionId:{value:j.regionId,type:"Int",required:!1},districtId:{value:j.districtId,type:"Int",required:!1},wardId:{value:j.wardId,type:"Int",required:!1},dob:{value:j.dob,type:"String",required:!1},groupId:{value:parseInt(((f=j.groupId)==null?void 0:f.toString())??"0"),type:"Int",required:!1}},fields:["success","message"]}}).catch(p=>(console.error(p),x.error("Error occured while creating student"),{data:null})).then(p=>p);T&&(T.success?(x.success(T.message),q.resetFields()):(M(T.message),x.error(T.message)))};return s.useEffect(()=>{S()},[t.editting,t.studyCourse]),e.jsxs(e.Fragment,{children:[I.length>0&&e.jsx(Ie.Alert,{message:"Info",description:I,closable:!0}),e.jsxs(a,{layout:"horizontal",form:q,onFinish:j=>{var T;j.studyCourseId=parseInt((T=t.studyCourse)==null?void 0:T.id),j.dob=h,j.regionId=parseInt(n),j.districtId=parseInt(l),j.wardId=parseInt(m),L(j)},requiredMark:!0,children:[e.jsx(a.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(a.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(a.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10,marginTop:5},children:e.jsx(X,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(P,{size:"small",onClick:()=>x("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(a.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(K,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(a.Item,{name:"phones",label:"Phones Number",rules:[{required:!1,type:"string",message:"Please input Phones Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Phones Numbers ..."})}),e.jsx(a.Item,{name:"groupId",label:"Group/Stream",style:{marginTop:20},rules:[{required:k.length>0,type:"string",message:"Please choose Group/Stream"}],children:e.jsx(H,{placeholder:"Please Choose Group/Stream ...",style:{width:220},onChange:N,size:"large",dropdownStyle:{zIndex:9999},children:k.map(j=>e.jsx(Xe,{value:j.id,children:j.name}))})}),e.jsxs(je,{direction:"horizontal",size:"small",children:[e.jsx(a.Item,{name:"dob",label:"Date of Birth",style:{marginTop:20},rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(st,{onChange:E,size:"large",disabledDate:j=>j&&j>Ye().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(a.Item,{name:"gender",label:"Gender",style:{marginTop:20},rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:d,children:e.jsxs(H,{placeholder:"Please Choose Gender ...",style:{width:220},onChange:N,size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(Xe,{value:"female",children:"Female"}),e.jsx(Xe,{value:"male",children:"Male"})]})})]}),e.jsxs(je,{direction:"horizontal",size:"small",children:[e.jsx(lt,{onChange:R,regionId:n,label:"Region",name:"regionId",size:"middle"}),e.jsx(rt,{size:"middle",regionId:parseInt(n),districtId:l,onChange:v,label:"District",name:"districtId"})]}),e.jsx(je,{direction:"horizontal",size:"small",children:e.jsx(at,{size:"middle",districtId:parseInt(l),wardId:m,onChange:b,label:"Ward",name:"wardId"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},ma=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,xa=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(!1),[m,u]=s.useState(""),d=async o=>{c(!0),i(!0);const{data:h}=await w.custom({url:"",method:"post",meta:{operation:"createStudyCourseStudentsByUploading",variables:{studyCourseId:{value:parseInt(t.studyCourse.id),type:"Int",required:!0},files:{value:o.files,type:"[Upload]",required:!0}},fields:["success","message"]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(C=>C);h&&(h.success?x(h.message):x.error(h.message),u(h.message)),c(!1),i(!0)};return s.useEffect(()=>{},[t.randKey]),l&&!n?e.jsx(e.Fragment,{children:e.jsx(Ct,{type:"info",message:e.jsx(e.Fragment,{children:e.jsxs("p",{children:[m,e.jsx(P,{style:{marginLeft:20},onClick:()=>{t.form.resetFields(),i(!1),c(!1)},children:"Upload Another File"})]})})})}):e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n&&!l,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:o=>{d(o)},requiredMark:!0,children:[e.jsx(a.Item,{label:"Students Excel File",children:e.jsx(a.Item,{name:"files",valuePropName:"fileList",getValueFromEvent:ma,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload students excel file"}],children:e.jsxs(St.Dragger,{name:"files",accept:".xls, .xlsx",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(nt,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsxs("span",{children:["Download Uploading Excel Format Template",e.jsx("span",{style:{marginLeft:10},children:e.jsxs("a",{href:ge.course_student_registration_template_file,target:"_blank",children:[e.jsx(vt,{}),"Download"]})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Register"})})]})})})},Rt=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!0),[m,u]=s.useState(1),[d]=a.useForm(),[o,h]=s.useState(0),[C,k]=s.useState(0),[A,q]=s.useState(!0),I=async E=>{Yn(E,t.module.id,t.memberType).then(N=>{N&&(N.success?(x.success(N.message),c(n.filter(b=>b.id.toString()!==E.id.toString())),t.onAdd(N.schoolModuleMember)):x.error(N.message))})},M=async(E,N="")=>{i(!0),Gn(E,N,t.module.id,t.memberType).then(b=>{b&&(k(b.total),h(b.pages),u(b.page),q(b.hasNext),c([...n,...b.results]))}),i(!1)};return s.useEffect(()=>{M(1)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(B,{span:10,children:e.jsx(a,{layout:"vertical",form:d,onFinish:E=>{n.length=0,c([]),M(1,E.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search Member(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:14,children:e.jsx(P,{icon:e.jsx(ie,{}),size:"large",onClick:()=>d.submit()})})]}),e.jsx(oe,{spinning:l,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(ft,{dataLength:C,next:()=>M(m),hasMore:A,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(oe,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(de,{itemLayout:"horizontal",dataSource:n,renderItem:E=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(de.Item,{style:{margin:0,padding:0},actions:[e.jsx(se,{title:"Are you sure to add this member?",onConfirm:()=>I(E),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(P,{size:"large",icon:e.jsx(Oe,{})})})],children:e.jsx(de.Item.Meta,{avatar:e.jsx(ts,{src:E.user.pic}),title:e.jsxs("a",{children:[e.jsx("span",{children:E.user.fullName}),E.registrationNumber&&e.jsx("span",{style:{marginLeft:5},children:e.jsx(le,{color:"green",children:E.registrationNumber})})]}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:E.email})})})},"adding-module-member-"+E.id)})})})})})]})},Yt=t=>{var p,F;const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(!1),[d,o]=s.useState(1),[h,C]=s.useState(0),[k,A]=s.useState(20),[q,I]=s.useState(""),[M,E]=s.useState(!1),[N,b]=s.useState(!0),[R]=a.useForm(),S=!fe.useBreakpoint().lg,L=async()=>{f(1,"",k)},j=async r=>{Kn(r).then(g=>{g&&(g.success?(x.success(g.message),c(n.filter(U=>U.id!==r))):x.error(g.message))})},T=[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(r,g)=>e.jsx("span",{children:e.jsx("a",{children:g.schoolMember.fullName??g.schoolMember.user.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(r,g)=>e.jsx("span",{children:g.schoolMember.registrationNumber})},{title:"Date Joined",dataIndex:"created",render:(r,g)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(g.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(r,g)=>e.jsx("a",{children:g!=null&&g.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(r,g)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsx(J,{children:e.jsx(J.Item,{icon:e.jsx(ue,{}),children:e.jsx(X,{title:"Delete a Module Member",children:e.jsx(se,{title:"Are you sure to delete this ",onConfirm:()=>j(g==null?void 0:g.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(g!=null&&g.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],f=async(r,g="",U=20)=>{var $;On(r,g,U,(($=t.module)==null?void 0:$.id)??0,t.memberType??"").then(Y=>{Y&&(o(Y.page),C(Y.total),E(Y.hasNext),c(Y.results))}),b(!1)};return s.useEffect(()=>{f(d)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:S?24:16,children:e.jsx(a,{layout:"vertical",form:R,onFinish:r=>{o(1),n.length=0,f(1,r.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(B,{span:S?24:8,style:{display:"flex",justifyContent:"flex-end"},children:[t.memberType==="Student"&&e.jsx(P,{size:"large",icon:e.jsx(ce,{}),onClick:()=>u(!0),children:"Enroll Student(s)"}),t.memberType==="Teacher"&&e.jsx(P,{size:"large",icon:e.jsx(ce,{}),onClick:()=>u(!0),children:"Enroll Teacher(s)/Lecturer(s)"})]})]}),e.jsx(me,{loading:N,columns:T,dataSource:n,scroll:{x:!0,y:"calc(100vh - 350px)"},pagination:{onChange:(r,g)=>{A(g),f(r,q,g)},total:h,pageSize:k,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(Se,{anchor:"left",open:l,noOverFlow:!0,onClose:r=>i(r),width:"80vw",title:"Adding "+((p=t.module)==null?void 0:p.name)+" Module Members",children:e.jsx(Rt,{module:t.module,randKey:Math.random(),onAdd:L,memberType:t.memberType})}),e.jsx(Se,{anchor:"left",open:m,noOverFlow:!0,onClose:r=>u(r),width:"80vw",title:"Enrolling "+((F=t.module)==null?void 0:F.name)+" Module Members",children:e.jsx(Rt,{module:t.module,randKey:Math.random(),onAdd:L,memberType:t.memberType})})]})},ga=t=>{const[n,c]=s.useState([]),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(!1),[h,C]=s.useState(0),[k,A]=s.useState(20),[q,I]=s.useState(""),[M,E]=s.useState(!0),[N]=a.useForm(),R=!fe.useBreakpoint().lg,v=async T=>{const{data:f}=await w.custom({url:"",method:"post",meta:{operation:"studyCourseStudentEnroll",variables:{studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0},studentId:{value:T,type:"Int",required:!0}},fields:["success","message",{studyCourseStudent:_n}]}}).catch(()=>(x.error("Error in Bulk Enrolling of Students"),{data:null})).then(p=>p);f&&(f.success?(x.success(f.message),u(!1),o(!1),i([]),j(1,"",20),t.onAdd(f.studyCourseStudent)):x.error(f.message))},S=async()=>{const{data:T}=await w.custom({url:"",method:"post",meta:{operation:"createStudyCourseStudentsBulk",variables:{studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0},students:{value:l,type:"[Int]",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error in Bulk Enrolling of Students"),{data:null})).then(f=>f);T&&(T.success?(x.success(T.message),u(!1),o(!1),i([]),j(1,"",20),t.onAddAll()):x.error(T.message))},L=[{title:e.jsx(e.Fragment,{children:e.jsx(Le,{checked:d,onChange:T=>{T.target.checked?(u(!0),o(!0),i(n.map(f=>parseInt(f.id.toString())))):(u(!1),l.length=0,i([]),o(!1))}})}),dataIndex:"checkConfirm",fixed:!0,render:(T,f,p)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Le,{defaultChecked:m,checked:m||l.includes(parseInt(f.id)),onChange:F=>{const r=parseInt(f.id);F.target.checked?i([r,...l]):i(l.filter(g=>g!==r))}})})},{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(T,f,p)=>e.jsx("span",{children:e.jsx("a",{children:f.fullName?f.fullName:f.user.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(T,f,p)=>e.jsx("span",{children:f.registrationNumber})},{title:"Email",dataIndex:"email",fixed:!0,render:(T,f,p)=>e.jsx(e.Fragment,{children:e.jsxs(je,{direction:"vertical",children:[e.jsx(le,{color:"green",children:f.email?f.email:f.user.email?f.user.email:""}),e.jsx(le,{color:"green",children:f.phone?f.phone:f.user.phone})]})})},{title:"Gender",dataIndex:"gender",fixed:!0,render:(T,f,p)=>e.jsx("span",{children:f.gender?f.gender:f.user.gender})},{title:"Status",dataIndex:"isActive",render:(T,f,p)=>e.jsx("a",{children:f!=null&&f.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(T,f,p)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(se,{title:"Adding Student "+(f.fullName?f.fullName:f.user.fullName),onConfirm:()=>v(parseInt(f.id)),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(f!=null&&f.canManage),overlayStyle:{zIndex:9999},children:e.jsx(P,{size:"large",icon:e.jsx(ce,{})})})})}],j=async(T,f="",p=20,F=[])=>{const{data:r}=await w.custom({url:"",method:"get",meta:{operation:"studyCourseStudentsToEnroll",variables:{page:{value:T,type:"Int",required:!0},key:{value:f,type:"String",required:!1},pageSize:{value:p,type:"Int",required:!1},studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:We}]}}).catch(()=>(x.error("Error fetching students"),{data:null})).then(g=>g);r&&(C(r.total),c([...r.results])),E(!1)};return s.useEffect(()=>{j(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:18,children:e.jsx(a,{layout:"horizontal",form:N,onFinish:T=>{I(T.key),n.length=0,j(1,T.key,k,T.roles)},children:e.jsxs(ne,{children:[e.jsx(B,{span:R?24:16,children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(B,{children:e.jsx(P,{size:"large",icon:e.jsx(ie,{}),onClick:()=>N.submit()})})]})})}),l.length>0&&e.jsx(e.Fragment,{children:e.jsx(B,{span:6,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{size:"large",icon:e.jsx(ce,{}),onClick:S,children:"Add Selected"})})})]}),e.jsx(me,{loading:M,columns:L,dataSource:n,pagination:{onChange:(T,f)=>{A(f),j(T,q,f)},total:h,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0,y:"calc(100vh - 280px)"}})]})},ja=t=>{var p;const[n,c]=s.useState([]),[l,i]=s.useState([]),[m,u]=s.useState(null),[d,o]=s.useState(!1),[h,C]=s.useState(0),[k,A]=s.useState(20),[q,I]=s.useState(""),[M,E]=s.useState(!0),[N]=a.useForm(),R=!fe.useBreakpoint().lg,v=[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(F,r,g)=>e.jsx("span",{children:e.jsx("a",{children:r.schoolMember.fullName?r.schoolMember.fullName:r.schoolMember.user.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(F,r,g)=>e.jsx("span",{children:r.schoolMember.registrationNumber})},{title:"Group/Stream",dataIndex:"group",fixed:!0,render:(F,r,g)=>{var U;return e.jsx("span",{children:(U=r==null?void 0:r.group)==null?void 0:U.name})}},{title:"Email",dataIndex:"email",fixed:!0,render:(F,r,g)=>e.jsx(e.Fragment,{children:e.jsxs(je,{direction:"vertical",children:[e.jsx(le,{children:r.schoolMember.email?r.schoolMember.email:r.schoolMember.user.email?r.schoolMember.user.email:""}),e.jsx(le,{children:r.schoolMember.phone?r.schoolMember.phone:r.schoolMember.user.phone})]})})},{title:"Gender",dataIndex:"gender",fixed:!0,render:(F,r,g)=>e.jsx("span",{children:r.schoolMember.gender?r.schoolMember.gender:r.schoolMember.user.gender})},{title:"Date Joined",dataIndex:"created",render:(F,r,g)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(r.created).toLocaleString()})})},{title:"Authed",dataIndex:"isAuthed",render:(F,r,g)=>{var U,$;return e.jsx("a",{children:($=(U=r.schoolMember)==null?void 0:U.user)!=null&&$.isAuthed?e.jsx(le,{color:"green",children:"Yes"}):e.jsx(le,{color:"red",children:"Not"})})}},{title:"Status",dataIndex:"isActive",render:(F,r,g)=>e.jsx("a",{children:r!=null&&r.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(F,r,g)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsx(J,{children:e.jsx(J.Item,{icon:e.jsx(ue,{}),children:e.jsx(X,{title:"Delete Student",color:"red",children:e.jsx(se,{title:"Are you sure to delete ",onConfirm:()=>L(r==null?void 0:r.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(r!=null&&r.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],S=async()=>{Vt(1,"",20,parseInt(t.studyCourse.id.toString())).then(F=>{F&&i(F.results)})},L=async F=>{Bn(F).then(r=>{r&&(r.success?(x.success(r.message),c(n.filter(g=>g.id!==F))):x.error(r.message))})},j=async(F,r="",g=20,U=[],$=0)=>{E(!0),Un(F,r,g,U,parseInt(t.studyCourse.id.toString()),$).then(Y=>{Y&&(C(Y.total),c([...Y.results])),E(!1)})},T=async F=>{c([F,...n])},f=async()=>{j(1,"",20)};return s.useEffect(()=>{S(),j(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:12,children:e.jsx(a,{layout:"horizontal",form:N,onFinish:F=>{I(F.key),n.length=0,j(1,F.key,k,F.roles)},children:e.jsxs(ne,{children:[e.jsx(B,{span:R?24:16,children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(B,{children:e.jsx(P,{size:"large",icon:e.jsx(ie,{}),onClick:()=>N.submit()})})]})})}),e.jsx(B,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{size:"large",icon:e.jsx(ce,{}),onClick:()=>o(!0),children:"Add Student(s)"})})]}),l.length>0&&e.jsxs("div",{children:[e.jsxs(P,{type:m===null?"primary":"default",onClick:()=>{u(null),j(1,"",20)},children:[m===null&&e.jsx(e.Fragment,{children:"All"}),m!==null&&e.jsx(e.Fragment,{children:e.jsx(le,{children:"All"})})]}),l.map(F=>e.jsxs(P,{type:(m==null?void 0:m.id)===F.id?"primary":"default",onClick:()=>{u(F),j(1,"",20,[],F.id)},children:[(m==null?void 0:m.id)===F.id&&e.jsxs(e.Fragment,{children:[F.name," - ",F.totalStudents," Students"]}),(m==null?void 0:m.id)!==F.id&&e.jsxs(e.Fragment,{children:[e.jsx(le,{children:F.name}),e.jsxs(le,{color:"green",children:[F.totalStudents," Students"]})]})]},F.id))]}),e.jsx(me,{loading:M,columns:v,dataSource:n,pagination:{onChange:(F,r)=>{A(r),j(F,q,r)},total:h,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"calc(100vh - 290px)"}}),e.jsx(Se,{title:"Enrolling "+((p=t.studyCourse)==null?void 0:p.course.name)+" Students",anchor:"left",open:d,noOverFlow:!0,onClose:F=>o(F),width:"70vw",children:e.jsx(ga,{studyCourse:t.studyCourse,randKey:Math.random(),onAdd:T,onAddAll:f})})]})},ya=t=>{var Pe,De,Ee,ze;const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,A]=s.useState(!0),[q]=a.useForm(),[I]=a.useForm(),[M]=a.useForm(),[E]=a.useForm(),b=!fe.useBreakpoint().lg,R=Ue(),[v,S]=s.useState(!1),[L,j]=s.useState(!1),[T,f]=s.useState(!1),[p,F]=s.useState(!1),[r,g]=s.useState(!1),[U,$]=s.useState(!1),[Y,G]=s.useState(!1),Z=z=>{c(z),f(!0)},xe=z=>{c(z),F(!0)},ye=z=>{c(z),j(!0)},ve=async z=>{Wn(z).then(y=>{y&&(y.success?(x.success(y.message),I.resetFields(),S(!1),i([y.module,...l])):x.error(y.message))})},_=async z=>{Vn(z).then(y=>{y&&(y.success?(x.success(y.message),M.resetFields(),j(!1),i(l.map(Q=>Q.id.toString()===z.id.toString()?y.module:Q))):x.error(y.message))})},D=async z=>{Jn(z).then(y=>{y&&(y.success?(x.success(y.message),i(l.filter(Q=>Q.id!==z))):x.error(y.message))})},te=async z=>{Qn(z).then(y=>{y&&(y.success?(x.success(y.message),i(l.map(Q=>Q.id===y.module.id?y.module:Q))):x.error(y.message))})},ee=async z=>{wn(z).then(y=>{y&&(y.success?(x.success(y.message),i(l.map(Q=>Q.id===y.module.id?y.module:Q))):x.error(y.message))})},he=async(z,y="",Q=20)=>{var pe,Te;A(!0),((pe=t==null?void 0:t.studyCourse)==null?void 0:pe.id)??parseInt(R.studyCourseId)?$n(((Te=t==null?void 0:t.studyCourse)==null?void 0:Te.id)??parseInt(R.studyCourseId),z,y,Q).then(be=>{be&&(u(be.total),i([...be.results]))}):Hn(z,y,Q).then(be=>{be&&(u(be.total),i([...be.results]))}),A(!1)};s.useEffect(()=>{he(1,"",20)},[]);const Re=[{title:"Name",dataIndex:"name",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:e.jsx("a",{children:y.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:e.jsx("a",{children:y.code})})},{title:"Course",dataIndex:"course",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:e.jsx("a",{children:y.studyCourse.course.name})})},{title:"Year",dataIndex:"year",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.studyCourse.year})},{title:"Level",dataIndex:"level",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.studyCourse.levelDisplay})},{title:"Semester",dataIndex:"semester",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.studyCourse.semesterDisplay})},{title:"Periods/Week",dataIndex:"periodsPerWeek",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.periodsPerWeek})},{title:"Students",dataIndex:"totalStudents",fixed:!0,render:(z,y,Q)=>e.jsx("a",{onClick:()=>xe(y),children:e.jsx("span",{children:y.totalStudents})})},{title:"Lecturers",dataIndex:"totalTeachers",fixed:!0,render:(z,y,Q)=>e.jsx("a",{onClick:()=>Z(y),children:e.jsx("span",{children:y.totalTeachers})})},{title:"Assistants",dataIndex:"totalAssistants",fixed:!0,render:(z,y,Q)=>e.jsx("span",{children:y.totalAssistants})},{title:"Has Drive",dataIndex:"hasDrive",render:(z,y,Q)=>y.hasDrive?e.jsx(X,{title:"Click to View Drive",children:e.jsx(Pt,{style:{color:"green"}})}):e.jsx(X,{title:"Click to Auto Create Drive For "+y.name,placement:"left",children:e.jsx(se,{placement:"topLeft",title:"Click to Auto Create Drive For "+y.name,onConfirm:()=>te(y),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(Nt,{style:{color:"red"}})})})},{title:"Has Class",dataIndex:"hasClass",render:(z,y,Q)=>y.hasClass?e.jsx(X,{title:"Click to View Class",children:e.jsx(Pt,{style:{color:"green"}})}):e.jsx(X,{title:"Click to Auto Create Class For "+y.name,placement:"left",children:e.jsx(se,{placement:"topLeft",title:"Click to Auto Create Drive For "+y.name,onConfirm:()=>ee(y),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(Nt,{style:{color:"red"}})})})},{title:"Created",dataIndex:"created",render:(z,y,Q)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(y.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(z,y,Q)=>e.jsx("a",{children:y!=null&&y.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(z,y,Q)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsxs(J,{children:[y.canDelete?e.jsx(J.Item,{icon:e.jsx(ue,{}),children:e.jsx(se,{placement:"top",title:"Deleting "+y.name+", Are you sure?",onConfirm:()=>D(y==null?void 0:y.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})})}):e.jsx(e.Fragment,{}),e.jsx(J.Item,{icon:e.jsx(Ne,{}),onClick:()=>ye(y),children:e.jsx("a",{children:"Edit"})},"module-edit-"+y.id),e.jsx(J.Item,{icon:e.jsx(Be,{}),onClick:()=>Z(y),children:e.jsx("a",{children:"Lecture(s)"})},"module-lectures-"+y.id),e.jsx(J.Item,{icon:e.jsx(Be,{}),onClick:()=>xe(y),children:e.jsx("a",{children:"Student(s)"})},"module-students-"+y.id)]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:pe=>pe.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:b?24:12,children:e.jsx(a,{layout:"vertical",form:q,onFinish:z=>{C(z.key),l.length=0,he(1,z.key,d)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),((Pe=t.studyCourse)==null?void 0:Pe.canManage)&&e.jsxs(B,{span:b?24:12,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Click to View "+t.studyCourse.course.name+" Students",children:e.jsx(P,{icon:e.jsx(Ge,{}),size:"large",onClick:()=>G(!0),children:"View Students"})}),e.jsx(X,{title:"Register Students by Uploading Excel File",children:e.jsx(P,{icon:e.jsx(ce,{}),size:"large",onClick:()=>$(!0),children:"Add Student"})}),e.jsx(X,{title:"Register Students by Uploading Excel File",children:e.jsx(P,{icon:e.jsx($t,{}),size:"large",onClick:()=>g(!0),children:"Upload Students"})}),e.jsx(X,{title:"Add New Study Course Module",children:e.jsx(P,{icon:e.jsx(ce,{}),size:"large",onClick:()=>S(!0),children:"Add Module"})})]})]}),e.jsx(me,{loading:k,columns:Re,dataSource:l,pagination:{onChange:(z,y)=>{o(y),he(z,h,y)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Adding Study Course Module",open:v,onClose:z=>S(z),width:"30vw",children:e.jsx(oa,{form:I,onFinish:ve,randKey:Math.random(),studyCourse:t.studyCourse})}),e.jsx(re,{title:"Edit "+(n==null?void 0:n.name)+" Informations",open:L,onClose:z=>j(z),width:"40vw",children:e.jsx(ca,{studyCourse:t.studyCourse,module:n,onFinish:_,form:M,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.name)+" Lecture(s)",open:T,width:"80vw",onClose:z=>f(z),children:e.jsx(Yt,{memberType:"Teacher",module:n})}),e.jsx(re,{title:(n==null?void 0:n.name)+" Student(s)",open:p,onClose:z=>F(z),width:"80vw",children:e.jsx(Yt,{memberType:"Student",module:n,height:75})}),e.jsx(re,{title:"Uploading "+((De=t.studyCourse)==null?void 0:De.course.name)+" Student(s) by Excel",open:r,onClose:z=>g(z),width:"40vw",children:e.jsx(xa,{form:E,studyCourse:t.studyCourse,randKey:Math.random()})}),e.jsx(re,{title:"Registering "+((Ee=t.studyCourse)==null?void 0:Ee.course.name)+" Student(s)",open:U,onClose:z=>$(z),width:"40vw",children:e.jsx(ha,{studyCourse:t.studyCourse})}),e.jsx(Se,{title:((ze=t.studyCourse)==null?void 0:ze.course.name)+" Students",anchor:"left",open:Y,noOverFlow:!0,onClose:z=>G(z),width:"80vw",children:e.jsx(ja,{studyCourse:t.studyCourse,randKey:Math.random()})})]})},pa=()=>{const[t,n]=s.useState(!1),[c,l]=s.useState(),i=Ue(),m=async u=>{n(!0);const{data:d}=await w.custom({url:"",method:"get",meta:{operation:"studyCourse",variables:{id:{value:u,type:"Int",required:!0}},fields:["id","year","level","semester","levelDisplay","semesterDisplay","isActive","canDelete","canEdit","canManage",{course:["id","name"]}]}});l(d),n(!1)};return s.useEffect(()=>{document.title=ge.system_name+": Modules",i.studyCourseId!==void 0&&m(parseInt(i.studyCourseId))},[i.studyCourseId]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),c&&e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager/study/courses",children:"Study Courses"})}),e.jsx(V.Item,{children:c?e.jsx(e.Fragment,{children:e.jsx(ae,{to:"/schoolmanager/modules",children:"Modules"})}):e.jsx(e.Fragment,{children:"Modules"})}),c&&e.jsx(e.Fragment,{children:e.jsxs(V.Item,{children:[c.course.name,", ",c.levelDisplay," ,",c.semesterDisplay,", ",c.year]})})]})}),e.jsx(ya,{height:77,control:!1,studyCourse:c})]})},fa=()=>(s.useEffect(()=>{document.title=ge.system_name+": Programmes"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Programmes (High Education Level)"})]})}),e.jsx(jr,{height:80,control:!1})]})),Sa=t=>{const[n,c]=s.useState([]),l=async(i,m="")=>{const{data:u}=await w.custom({url:"",method:"get",meta:{operation:"systemRolePermissions",variables:{page:{value:i,type:"Int",required:!0},key:{value:m,type:"String",required:!1},roleId:{value:t.role.id,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","created","updated","isActive","canEdit","canDelete","canManage",{permission:["id","name","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}]}});c([...u.results])};return s.useEffect(()=>{l(1)},[t.randKey,t.role]),e.jsx(e.Fragment,{children:e.jsx(de,{dataSource:n,renderItem:i=>e.jsx(de.Item,{children:i.permission.name})})})},va=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(0),[h,C]=s.useState(!0),[k,A]=s.useState(20),[q,I]=s.useState(""),[M]=a.useForm();fe.useBreakpoint().lg;const[N,b]=s.useState(!1),R=f=>{c(f),b(!0)},v=f=>{c(f),u(!0)},S=[{title:"Name",dataIndex:"name",fixed:!0,render:(f,p,F)=>e.jsx("span",{children:e.jsx("a",{onClick:()=>v(p),children:p.role.name})})},{title:"Date Created",dataIndex:"created",render:(f,p,F)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(p.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(f,p,F)=>e.jsx("a",{children:p!=null&&p.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,p,F)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsxs(J,{children:[e.jsx(J.Item,{icon:e.jsx(Ge,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>R(p),children:"Manage Permissions"})}),e.jsx(J.Item,{icon:e.jsx(Ge,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>v(p),children:"View Permissions"})}),e.jsx(J.Item,{icon:e.jsx(ue,{}),children:e.jsx(se,{placement:"topLeft",title:`Are you sure you want to delete ${p.role.name} Role?`,onConfirm:()=>L(parseInt(p.id)),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Remove"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:r=>r.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],L=async f=>{Xn(f).then(p=>{p&&(p.success?(x.success(p.message),i(l.filter(F=>F.id.toString()!==f.toString()))):x.error(p.message))})},j=async(f,p="",F=20)=>{C(!0),Wt(f,p,F).then(r=>{r&&(o(r.total),i([...r.results]))}),C(!1)},T=async()=>{Zn().then(f=>{f&&(f.success?(x.success(f.message),j(1)):x.error(f.message))})};return s.useEffect(()=>{j(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:12,children:e.jsx(a,{layout:"vertical",form:M,onFinish:f=>{I(f.key),l.length=0,j(1,f.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:12,children:e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Sync Default School Roles",children:e.jsx(P,{icon:e.jsx(ct,{}),size:"large",onClick:T,children:"Sync Default Roles"})})})})]}),e.jsx(me,{loading:h,columns:S,dataSource:l,pagination:{onChange:(f,p)=>{A(p),j(f,q,p)},total:d,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Manage Role Permissions For "+(n==null?void 0:n.role.name),width:"50vw",open:N,onClose:f=>b(f),children:e.jsx(yr,{role:n==null?void 0:n.role,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.role.name)+" Permissions",width:"50vw",open:m,onClose:f=>u(f),children:e.jsx(Sa,{role:n==null?void 0:n.role,randKey:Math.random()})})]})},Ca=()=>(s.useEffect(()=>{document.title=ge.system_name+": Roles"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Roles"})]})}),e.jsx(va,{})]})),ba=()=>(s.useEffect(()=>{document.title=ge.system_name+": Settings"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Settings"})]})}),e.jsx(pr,{})]})),{Option:He}=H;function*Ia(t,n){let c=t;for(;c<n;)yield c++}const Fa=t=>{const[n,c]=s.useState(!0),[l,i]=s.useState([]),m=async(u,d="")=>{c(!0);const{data:o}=await w.custom({url:"",method:"get",meta:{operation:"schoolCourses",variables:{page:{value:u,type:"Int",required:!0},key:{value:d,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:yt}]}}).catch(()=>(x.error("Error occured while fetching courses"),{data:null})).then(h=>h);o&&i([...o.results]),c(!1)};return s.useEffect(()=>{m(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:u=>{t.onFinish(u)},requiredMark:!0,children:[e.jsx(a.Item,{name:"course_id",label:"Course",rules:[{required:!0,type:"string",message:"Please choose Course..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Course",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,d)=>d.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:l.map((u,d)=>e.jsx(He,{value:u.id,children:u.name}))})}),e.jsx(a.Item,{name:"year",label:"Year",rules:[{required:!0,type:"number",message:"Please choose Year..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Year",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,d)=>d.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:Array.from(Ia(new Date().getFullYear(),new Date().getFullYear()+10)).map((u,d)=>e.jsx(He,{value:u,children:u}))})}),e.jsx(a.Item,{name:"level",label:"Level",rules:[{required:!0,type:"number",message:"Please choose Level..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Level",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,d)=>d.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First Year"},{value:2,name:"Second Year"},{value:3,name:"Third year"},{value:4,name:"Fourth year"},{value:5,name:"Fifth year"}].map((u,d)=>e.jsx(He,{value:u.value,children:u.name}))})}),e.jsx(a.Item,{name:"semester",label:"Semester",rules:[{required:!0,type:"number",message:"Please choose Semester..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Semester",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,d)=>d.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First"},{value:2,name:"Second"},{value:3,name:"Third"}].map((u,d)=>e.jsx(He,{value:u.value,children:u.name}))})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Option:Je}=H;function*ka(t,n){let c=t;for(;c<n;)yield c++}const Ma=t=>{const[n,c]=s.useState(t.studyCourse.isActive),[l,i]=s.useState(!0),[m,u]=s.useState([]),d=[{value:1,name:"First Year"},{value:2,name:"Second Year"},{value:3,name:"Third year"},{value:4,name:"Fourth year"},{value:5,name:"Fifth year"}],o=async(h,C="")=>{i(!0);const{data:k}=await w.custom({url:"",method:"get",meta:{operation:"schoolCourses",variables:{page:{value:h,type:"Int",required:!0},key:{value:C,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:yt}]}}).catch(()=>(x.error("Error occured while fetching courses"),{data:null})).then(A=>A);k&&u([...k.results]),i(!1)};return s.useEffect(()=>{o(1),t.form.setFieldsValue({course_id:t.studyCourse.course.id,year:t.studyCourse.year,level:parseInt(t.studyCourse.level),semester:t.studyCourse.semester,is_active:t.studyCourse.isActive})},[t.form,t.studyCourse,t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:l,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:h=>{h.id=parseInt(t.studyCourse.id),h.is_active=n,t.onFinish(h)},requiredMark:!0,children:[e.jsx(a.Item,{name:"course_id",label:"Course",rules:[{required:!0,type:"string",message:"Please choose Course..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Course",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,C)=>C.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((h,C)=>e.jsx(Je,{value:h.id,children:h.name}))})}),e.jsx(a.Item,{name:"year",label:"Year",rules:[{required:!0,type:"number",message:"Please choose Year..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Year",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,C)=>C.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:Array.from(ka(new Date().getFullYear(),new Date().getFullYear()+10)).map((h,C)=>e.jsx(Je,{value:h,children:h}))})}),e.jsx(a.Item,{name:"level",label:"Level",rules:[{required:!0,type:"number",message:"Please choose Level..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Level",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,C)=>C.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:d.map((h,C)=>e.jsx(Je,{value:h.value,children:h.name}))})}),e.jsx(a.Item,{name:"semester",label:"Semester",rules:[{required:!0,type:"number",message:"Please choose Semester..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Semester",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,C)=>C.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First"},{value:2,name:"Second"},{value:3,name:"Third"}].map((h,C)=>e.jsx(Je,{value:h.value,children:h.name}))})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Le,{checked:n,onChange:()=>c(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Option:dt}=H;function*La(t,n){let c=t;for(;c<n;)yield c++}const Aa=t=>{const[n,c]=s.useState(!0),[l,i]=s.useState([]),m=async d=>{const{data:o}=await w.custom({url:"",method:"post",meta:{operation:"createSchoolStudyCourseBulk",variables:{year:{value:parseInt(d.year),type:"Int",required:!0},level:{value:d.level,type:"Int",required:!0},semester:{value:d.semester,type:"Int",required:!0}},fields:["success","message",{studyCourses:Qe}]}}).catch(()=>(x.error("Error occured while creating study course"),{data:null})).then(h=>h);o&&(o.success?(x.success(o.message),t.form.resetFields(),t.onFinish(o.studyCourses)):x.error(o.message))},u=async(d,o="")=>{c(!0);const{data:h}=await w.custom({url:"",method:"get",meta:{operation:"schoolCourses",variables:{page:{value:d,type:"Int",required:!0},key:{value:o,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:yt}]}}).catch(()=>(x.error("Error occured while fetching courses"),{data:null})).then(C=>C);h&&i([...h.results]),c(!1)};return s.useEffect(()=>{u(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:d=>{m(d)},requiredMark:!0,children:[e.jsxs(Ze,{sx:{marginBottom:2},children:[e.jsxs(Fr,{severity:"info",sx:{marginBottom:2},children:[e.jsx(Pr,{children:"Info"}),e.jsx("strong",{children:"Important Note:"})," All listed courses will be added to the study course as per the selected year, level and semester."]}),e.jsx(Ze,{sx:{maxHeight:"200px",overflowY:"scroll"},children:e.jsx(de,{bordered:!0,children:l.map((d,o)=>e.jsx(de.Item,{children:d.name},o))})})]}),e.jsx(a.Item,{name:"year",label:"Year",rules:[{required:!0,type:"number",message:"Please choose Year..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Year",optionFilterProp:"children",onChange:d=>{},onSearch:d=>{},filterOption:(d,o)=>o.children.toLowerCase().includes(d.toLowerCase()),dropdownStyle:{zIndex:9999},children:Array.from(La(new Date().getFullYear(),new Date().getFullYear()+10)).map((d,o)=>e.jsx(dt,{value:d,children:d}))})}),e.jsx(a.Item,{name:"level",label:"Level",rules:[{required:!0,type:"number",message:"Please choose Level..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Level",optionFilterProp:"children",onChange:d=>{},onSearch:d=>{},filterOption:(d,o)=>o.children.toLowerCase().includes(d.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First Year"},{value:2,name:"Second Year"},{value:3,name:"Third year"},{value:4,name:"Fourth year"},{value:5,name:"Fifth year"}].map((d,o)=>e.jsx(dt,{value:d.value,children:d.name}))})}),e.jsx(a.Item,{name:"semester",label:"Semester",rules:[{required:!0,type:"number",message:"Please choose Semester..."}],children:e.jsx(H,{showSearch:!0,size:"large",placeholder:"Select a Semester",optionFilterProp:"children",onChange:d=>{},onSearch:d=>{},filterOption:(d,o)=>o.children.toLowerCase().includes(d.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First"},{value:2,name:"Second"},{value:3,name:"Third"}].map((d,o)=>e.jsx(dt,{value:d.value,children:d.name}))})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:Ea}=K,Na=t=>{const[n,c]=s.useState(!1),[l]=a.useForm(),i=async m=>{var d;c(!0);const{data:u}=await w.custom({url:"",method:"post",meta:{operation:"createStudyCourseGroup",variables:{studyCourseId:{value:parseInt(((d=t==null?void 0:t.studyCourse)==null?void 0:d.id.toString())??"0"),type:"Int",required:!0},name:{value:m.name,type:"String",required:!0},description:{value:m.description,type:"String",required:!1}},fields:["success","message",{studyCourseGroup:pt}]}}).catch(()=>(x.error("Error occured while fetching departments"),{data:null})).then(o=>o);u&&(u.success?(x.success(u.message),t.onFinish(u.studyCourseGroup),l.resetFields()):x.error(u.message)),c(!1)};return s.useEffect(()=>{},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:l,onFinish:m=>{i(m)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Ea,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:Pa}=K,Da=t=>{var m,u;const[n,c]=s.useState(!1),[l]=a.useForm(),i=async d=>{var h;c(!0);const{data:o}=await w.custom({url:"",method:"post",meta:{operation:"updateStudyCourseGroup",variables:{id:{value:parseInt(((h=t==null?void 0:t.studyCourseGroup)==null?void 0:h.id.toString())??"0"),type:"Int",required:!0},name:{value:d.name,type:"String",required:!0},description:{value:d.description,type:"String",required:!1}},fields:["success","message",{studyCourseGroup:pt}]}}).catch(()=>(x.error("Error occured while updating study course group"),{data:null})).then(C=>C);o&&(o.success?(x.success(o.message),t.onFinish(o.studyCourseGroup),l.resetFields()):x.error(o.message)),c(!1)};return s.useEffect(()=>{t.studyCourseGroup&&l.setFieldsValue({name:t.studyCourseGroup.name,description:t.studyCourseGroup.description})},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(oe,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:l,onFinish:d=>{i(d)},requiredMark:!0,initialValues:{name:(m=t.studyCourseGroup)==null?void 0:m.name,description:(u=t.studyCourseGroup)==null?void 0:u.description},children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Pa,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},za=t=>{var q;const[n,c]=s.useState(!0),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(null),[h,C]=s.useState(!1),k=async(I,M="")=>{c(!0);const{data:E}=await w.custom({url:"",method:"get",meta:{operation:"studyCourseGroups",variables:{page:{value:I,type:"Int",required:!0},key:{value:M,type:"String",required:!1},studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:pt}]}}).catch(N=>(console.error(N),x.error("Error occured while fetching study course groups"),{data:null})).then(N=>N);E&&i([...E.results]),c(!1)},A=async I=>{const{data:M}=await w.custom({url:"",method:"post",meta:{operation:"deleteStudyCourseGroup",variables:{id:{value:parseInt(I.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error occured while deleting study course group"),{data:null})).then(E=>E);M&&M.success&&(x.success(M.message),i(l.filter(E=>E.id!==I)))};return s.useEffect(()=>{k(1)},[t.form,t.studyCourse,t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:e.jsx(P,{icon:e.jsx(ce,{}),onClick:()=>u(!0),children:"Add Group/Stream"})}),e.jsx("div",{children:e.jsx(de,{bordered:!0,dataSource:l,renderItem:I=>e.jsx(de.Item,{actions:[e.jsx(P,{icon:e.jsx(Ne,{}),disabled:!I.canEdit,onClick:()=>{o(I),C(!0)},children:"Edit"}),e.jsx(se,{title:"Are you sure you want to delete this group/stream?",overlayStyle:{zIndex:999999},onConfirm:()=>A(I.id),okText:"Yes",cancelText:"No",children:e.jsx(P,{icon:e.jsx(ue,{}),disabled:!I.canDelete,children:"Delete"})})],children:e.jsx(de.Item.Meta,{title:I.name,description:I.description})})})}),e.jsx(re,{title:"Add Group/Stream to "+((q=t.studyCourse)==null?void 0:q.name),open:m,width:"30vw",onClose:I=>u(I),children:e.jsx(Na,{studyCourse:t.studyCourse,onFinish:I=>{i([I,...l])}})}),e.jsx(re,{title:"Updating Group/Stream to "+(d==null?void 0:d.name),open:h,width:"30vw",onClose:I=>C(I),children:e.jsx(Da,{studyCourseGroup:d,onFinish:I=>{i(l.map(M=>M.id===I.id?I:M)),C(!1)}})})]})},Ta=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(0),[d,o]=s.useState(!0),[h,C]=s.useState(20),[k,A]=s.useState(""),[q]=a.useForm(),[I]=a.useForm(),[M]=a.useForm(),[E,N]=s.useState(!1);fe.useBreakpoint().lg;const[R,v]=s.useState(!1),[S,L]=s.useState(!1),[j,T]=s.useState(!1),f=Y=>{c(Y),N(!0)},p=Y=>{c(Y),T(!0)},F=async Y=>{const{data:G}=await w.custom({url:"",method:"post",meta:{operation:"createSchoolStudyCourse",variables:{courseId:{value:parseInt(Y.course_id),type:"Int",required:!0},year:{value:parseInt(Y.year),type:"Int",required:!0},level:{value:Y.level,type:"Int",required:!0},semester:{value:Y.semester,type:"Int",required:!0}},fields:["success","message",{studyCourse:Qe}]}}).catch(()=>(x.error("Error occured while creating study course"),{data:null})).then(Z=>Z);G&&(G.success?(x.success(G.message),I.resetFields(),v(!1),i([G.studyCourse,...l])):x.error(G.message))},r=async Y=>{const{data:G}=await w.custom({url:"",method:"post",meta:{operation:"updateSchoolStudyCourse",variables:{id:{value:Y.id,type:"Int",required:!0},courseId:{value:parseInt(Y.course_id),type:"Int",required:!0},year:{value:parseInt(Y.year),type:"Int",required:!0},level:{value:Y.level,type:"Int",required:!0},semester:{value:Y.semester,type:"Int",required:!0},isActive:{value:Y.is_active,type:"Boolean",required:!0}},fields:["success","message",{studyCourse:Qe}]}}).catch(()=>(x.error("Error occured while updating study course"),{data:null})).then(Z=>Z);G&&(G.success?(x.success(G.message),M.resetFields(),T(!1),i(l.map(Z=>parseInt(Z.id.toString())===parseInt(Y.id.toString())?G.studyCourse:Z))):x.error(G.message))},g=async Y=>{const{data:G}=await w.custom({url:"",method:"post",meta:{operation:"deleteSchoolStudyCourse",variables:{id:{value:parseInt(Y.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error occured while deleting study course"),{data:null})).then(Z=>Z);G&&(G.success?(x.success(G.message),i(l.filter(Z=>Z.id!==Y))):x.error(G.message))},U=async(Y,G="",Z=20)=>{const{data:xe}=await w.custom({url:"",method:"get",meta:{operation:"schoolStudyCourses",variables:{page:{value:Y,type:"Int",required:!0},key:{value:G,type:"String",required:!1},pageSize:{value:Z,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Qe}]}}).catch(()=>(x.error("Error occured while fetching study courses"),{data:null})).then(ye=>ye);xe&&(u(xe.total),i([...xe.results])),o(!1)};s.useEffect(()=>{U(1,"",20)},[]);const $=[{title:"Course",dataIndex:"course",fixed:!0,render:(Y,G,Z)=>e.jsx("span",{children:e.jsx("a",{children:G.course.name})})},{title:"Year",dataIndex:"year",fixed:!0,render:(Y,G,Z)=>e.jsx("span",{children:G.year})},{title:"Groups/Streams",dataIndex:"totalGroups",fixed:!0,render:(Y,G,Z)=>e.jsx("span",{children:G.totalGroups>0?G.totalGroups:"One Main Group/Stream"})},{title:"Max Students",dataIndex:"maxStudents",fixed:!0,render:(Y,G,Z)=>e.jsx("span",{children:G.maxStudents})},{title:"Available Students",dataIndex:"availableStudents",fixed:!0,render:(Y,G,Z)=>e.jsx("span",{children:G.availableStudents})},{title:"Level",dataIndex:"level",fixed:!0,render:(Y,G,Z)=>e.jsx("span",{children:G.levelDisplay})},{title:"Semester",dataIndex:"semester",fixed:!0,render:(Y,G,Z)=>e.jsx("span",{children:G.semesterDisplay})},{title:"Created",dataIndex:"created",render:(Y,G,Z)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(G.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(Y,G,Z)=>e.jsx("a",{children:G!=null&&G.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(Y,G,Z)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Deleting Study Course",color:"red",placement:"left",children:e.jsx(se,{title:"Are you sure to delete this Study Course?",onConfirm:()=>g(G==null?void 0:G.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(G!=null&&G.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(P,{icon:e.jsx(ue,{}),disabled:!(G!=null&&G.canDelete)})})}),e.jsx(X,{title:"Edit "+(G==null?void 0:G.name)+" Faculty",placement:"left",color:"green",children:e.jsx(P,{icon:e.jsx(Ne,{}),disabled:!(G!=null&&G.canEdit),onClick:()=>p(G)})}),e.jsx(X,{title:"View Study Course Groups/Streams",placement:"right",color:"green",children:e.jsx(P,{icon:e.jsx(ur,{}),disabled:!(G!=null&&G.canManage),onClick:()=>f(G)})}),e.jsx(X,{title:"View Study Course Modules",placement:"right",color:"green",children:e.jsx(ae,{to:"/schoolmanager/modules/"+G.id,children:e.jsx(P,{icon:e.jsx(Ge,{}),disabled:!(G!=null&&G.canManage)})})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:10,children:e.jsx(a,{layout:"vertical",form:q,onFinish:Y=>{A(Y.key),l.length=0,U(1,Y.key,h)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(B,{span:14,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Bulk Add New Study Course",children:e.jsx(P,{icon:e.jsx(ce,{}),size:"large",onClick:()=>L(!0),children:"Bulk Add Study Course"})}),e.jsx(X,{title:"Add New Study Course",children:e.jsx(P,{icon:e.jsx(ce,{}),size:"large",onClick:()=>v(!0),children:"Add Study Course"})})]})]}),e.jsx(me,{loading:d,columns:$,dataSource:l,pagination:{onChange:(Y,G)=>{C(G),U(Y,k,G)},total:m,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Bulk Adding Study Course",open:S,onClose:Y=>L(Y),width:"30vw",children:e.jsx(Aa,{form:I,onFinish:Y=>{i([...Y,...l]),L(!1)},randKey:Math.random()})}),e.jsx(re,{title:"Adding Study Course",open:R,onClose:Y=>v(Y),width:"30vw",children:e.jsx(Fa,{form:I,onFinish:F,randKey:Math.random()})}),e.jsx(re,{title:"Edit "+(n==null?void 0:n.course.name)+" Informations",open:j,onClose:Y=>T(Y),width:"40vw",children:e.jsx(Ma,{studyCourse:n,onFinish:r,form:M,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.course.name)+" Groups/Streams",open:E,onClose:Y=>N(Y),width:"40vw",children:e.jsx(za,{studyCourse:n})})]})},qa=()=>(s.useEffect(()=>{document.title=ge.system_name+": Study Courses"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Study Courses"})]})}),e.jsx(Ta,{height:77})]})),Ra=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!0),[d,o]=s.useState(1),[h]=a.useForm(),[C,k]=s.useState(0),A=async I=>{er(I).then(M=>{M.success?(x.success(M.message),i(l.filter(E=>E.id.toString()!==I.toString())),t.onAdd(M.schoolSubject),c(void 0)):x.error(M.message)})},q=async(I=d,M="",E=25)=>{u(!0),tr(I,M,E).then(N=>{N&&(k(N.pages),o(N.page),i([...N.results]))}),u(!1)};return s.useEffect(()=>{q(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(a,{layout:"vertical",form:h,onFinish:I=>{l.length=0,i([]),q(1,I.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search Subject(s)...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(oe,{spinning:m,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(de,{itemLayout:"horizontal",dataSource:l,renderItem:I=>e.jsx(de.Item,{actions:[e.jsx(se,{placement:"topLeft",title:"Are you sure to add this subject?",onConfirm:()=>A(I.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(P,{icon:e.jsx(Oe,{})})})],children:e.jsx(de.Item.Meta,{title:e.jsx(e.Fragment,{children:e.jsxs("a",{children:[I.name,e.jsx(le,{color:"green",style:{marginLeft:10},children:I.schoolType.name})]})}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:I.description})})})},"file-"+I.id)})}),e.jsx(Ze,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:1},children:e.jsx(ss,{count:C,color:"secondary",onChange:(I,M)=>{q(M)}})})]})]})},Ya=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,A]=s.useState(!0),[q]=a.useForm(),M=!fe.useBreakpoint().lg,E=async v=>{c([v,...n])},N=async v=>{const{data:S}=await w.custom({url:"",method:"post",meta:{operation:"deleteSchoolSubject",variables:{id:{value:parseInt(v.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error deleting subject"),{data:null})).then(L=>L);S&&(S.success?(x.success(S.message),c(n.filter(L=>L.id!==v))):x.error(S.message))},b=[{title:"Name",dataIndex:"name",fixed:!0,render:(v,S,L)=>e.jsx("span",{children:e.jsx("a",{children:S.subject.name})})},{title:"School Type",dataIndex:"schoolType",fixed:!0,render:(v,S,L)=>e.jsx("span",{children:e.jsx(le,{color:"green",children:S.subject.schoolType.name})})},{title:"Date Created",dataIndex:"created",render:(v,S,L)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(S.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(v,S,L)=>e.jsx("a",{children:S!=null&&S.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,S,L)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{trigger:["click"],overlay:e.jsx(J,{children:e.jsx(J.Item,{icon:e.jsx(ue,{}),children:e.jsx(X,{title:"Delete/Remove Subject",placement:"left",color:S!=null&&S.canDelete?"green":"red",children:e.jsx(se,{title:"Are you sure to delete this ",onConfirm:()=>N(S==null?void 0:S.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(S!=null&&S.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(P,{type:"text",disabled:!(S!=null&&S.canDelete),children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:j=>j.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],R=async(v,S="",L=20)=>{const{data:j}=await w.custom({url:"",method:"get",meta:{operation:"schoolSubjects",variables:{page:{value:v,type:"Int",required:!0},key:{value:S,type:"String",required:!1},pageSize:{value:L,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:sr}]}}).catch(()=>(x.error("Error getting subjects"),{data:null})).then(T=>T);j&&(u(j.total),c([...j.results])),A(!1)};return s.useEffect(()=>{R(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:M?24:20,children:e.jsx(a,{layout:"vertical",form:q,onFinish:v=>{C(v.key),n.length=0,R(1,v.key,d)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:M?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{size:"large",icon:e.jsx(ce,{}),onClick:()=>i(!0),children:"Add Subject"})})]}),e.jsx(me,{loading:k,columns:b,dataSource:n,pagination:{onChange:(v,S)=>{o(S),R(v,h,S)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:"Adding School Subjects",anchor:"right",width:"35vw",onClose:()=>i(!1),open:l,noOverFlow:!0,children:e.jsx(Ra,{randKey:Math.random(),onAdd:E})})]})},Ga=()=>(s.useEffect(()=>{document.title=ge.system_name+": Subjects"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Subjects"})]})}),e.jsx(Ya,{})]})),Oa=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(1),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,A]=s.useState(!1),[q,I]=s.useState(!0),[M]=a.useForm(),[E]=a.useForm(),[N,b]=s.useState(!1),R=async f=>{nr(f).then(p=>{p&&(p.success?(x.success(p.message),c([p.loginReedemCode,...n]),E.resetFields()):x.error(p.message))})},v=async f=>{lr(f).then(p=>{p&&(p.success?x.success(p.message):x.error(p.message))})},S=async f=>{ar(f).then(p=>{p&&(p.success?(x.success(p.message),c(n.filter(F=>F.id!==f))):x.error(p.message))})},L=()=>{x("Canceled")},j=[{title:"Reedem Code",dataIndex:"code",fixed:!0,render:(f,p,F)=>e.jsx("span",{children:e.jsx("a",{children:p.code})})},{title:"User",dataIndex:"user",render:(f,p,F)=>{var r,g,U;return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:(p==null?void 0:p.user)&&e.jsxs("span",{children:["Full Name: ",(r=p==null?void 0:p.user)==null?void 0:r.firstName," ",(g=p==null?void 0:p.user)==null?void 0:g.middleName," ",(U=p==null?void 0:p.user)==null?void 0:U.lastName]})}),e.jsx("span",{children:(p==null?void 0:p.email)&&e.jsxs(le,{children:["Email: ",p==null?void 0:p.email]})}),e.jsx("span",{children:(p==null?void 0:p.registrationNumber)&&e.jsxs(le,{children:["Reg#: ",p==null?void 0:p.registrationNumber]})})]})}},{title:"Phone Number",dataIndex:"phone",fixed:!0,render:(f,p,F)=>e.jsx("span",{children:e.jsx("a",{children:p.phone})})},{title:"Is Used",dataIndex:"isUsed",render:(f,p,F)=>e.jsx("a",{children:p!=null&&p.isUsed?e.jsx("span",{style:{color:"green"},children:"Used"}):e.jsx("span",{style:{color:"red"},children:"Not Used"})})},{title:"Status",dataIndex:"isActive",render:(f,p,F)=>e.jsx("a",{children:p!=null&&p.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,p,F)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(se,{title:"Resend this Reedem Code?",onConfirm:()=>v(p==null?void 0:p.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(p!=null&&p.canManage),overlayStyle:{zIndex:9999},children:e.jsx(P,{size:"large",icon:e.jsx(kr,{}),disabled:!(p!=null&&p.canDelete)})}),e.jsx(se,{title:"Are you sure to delete this Reedem Code?",onConfirm:()=>S(p==null?void 0:p.id),onCancel:()=>L,okText:"Yes",cancelText:"No",disabled:!(p!=null&&p.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(P,{size:"large",icon:e.jsx(ue,{}),disabled:!(p!=null&&p.canDelete)})})]})}],T=async(f,p="",F=20)=>{rr(f,p,F).then(r=>{i(r.page),u(r.total),A(r.hasNext),c(r.results)}),I(!1)};return s.useEffect(()=>{T(l)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:10,children:e.jsx(a,{layout:"vertical",form:M,onFinish:f=>{i(1),n.length=0,T(1,f.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ie,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:14,style:{display:"flex",justifyContent:"end"},children:e.jsx(P,{icon:e.jsx(Oe,{}),size:"large",onClick:()=>b(!0),children:"Reedem"})})]}),e.jsx(me,{loading:q,columns:j,dataSource:n,scroll:{x:!0},pagination:{onChange:(f,p)=>{o(p),T(f,h,p)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(re,{title:"Creating Reedem Code",open:N,onClose:f=>b(f),children:e.jsxs(e.Fragment,{children:[e.jsxs(a,{layout:"vertical",form:E,onFinish:f=>{R(f)},children:[e.jsx(a.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,type:"string",message:"Please input Phone Number"}],children:e.jsx(K,{size:"large",placeholder:"Phone Number ...",prefix:e.jsx(wt,{}),autoComplete:"off"})}),e.jsx(a.Item,{name:"email",label:"Email Address",children:e.jsx(K,{size:"large",placeholder:"Email Address ...",prefix:e.jsx(Xt,{}),autoComplete:"off",allowClear:!0})}),e.jsx(a.Item,{name:"registrationNumber",label:"Registration Number",children:e.jsx(K,{size:"large",placeholder:"Registration Number ...",prefix:e.jsx(mr,{}),autoComplete:"off",allowClear:!0})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"end"},children:e.jsx(P,{size:"large",onClick:()=>E.submit(),children:"Reedem"})})]})})]})},Ka=()=>(s.useEffect(()=>{document.title=ge.system_name+": Login Reedems"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(Fe,{children:e.jsxs(V,{children:[e.jsx(V.Item,{children:e.jsx(ae,{to:"/",children:"Home"})}),e.jsx(V.Item,{children:e.jsx(ae,{to:"/schoolmanager",children:"School Manager"})}),e.jsx(V.Item,{children:"Login Reedems"})]})}),e.jsx(Oa,{height:80})]})),uo=t=>{const{page:n}=t;return n==="SchoolLoginReedemPage"?e.jsx(Ka,{}):n==="SchoolSubjectsPage"?e.jsx(Ga,{}):n==="SchoolStudyCoursesPage"?e.jsx(qa,{}):n==="SchoolSettingsPage"?e.jsx(ba,{}):n==="SchoolRolesPage"?e.jsx(Ca,{}):n==="SchoolProgrammesPage"?e.jsx(fa,{}):n==="SchoolModulesPage"?e.jsx(pa,{}):n==="SchoolMembersPage"?e.jsx(aa,{}):n==="SchoolFeeEducationLevelsPage"?e.jsx(Yl,{}):n==="SchoolFeesPage"?e.jsx(Dl,{}):n==="SchoolFacultiesPage"?e.jsx(Ml,{}):n==="SchoolExaminationsPage"?e.jsx(vl,{}):n==="SchoolDepartmentsPage"?e.jsx(Sl,{}):n==="SchoolCoursesPage"?e.jsx(hl,{}):n==="SchoolEducationLevelsPage"?e.jsx(al,{}):n==="SchoolManagerPage"?e.jsx(Rr,{}):e.jsx("div",{children:"Page not found ..."})};export{uo as SchoolManagerPages};
