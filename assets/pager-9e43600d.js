import{r as a,aT as v,j as e,aW as q,aP as M,a1 as D,aY as P,av as L,ce as W,g as w,_ as i,cl as z,aZ as A,a8 as O,af as ae,cd as ne,cn as Y,cL as H,aN as F,cz as T}from"./index-3fd7f13b.js";import{P as K}from"./index-e19e8fa9.js";import{I as U}from"./index-4f2a380d.js";import{S as V}from"./SearchOutlined-ecf9dac0.js";import{D as Z}from"./DeleteOutlined-59a1eb9c.js";import{D as $}from"./index-8b6b3568.js";import{G as J}from"./index-c712b740.js";import{A as X}from"./index-1914b305.js";import{C as R}from"./index-04e1a8e1.js";import{A as ee,R as _}from"./Icon-c0542e63.js";import{C as B}from"./Collapse-33f10c7f.js";import{S as te}from"./SettingOutlined-17423f91.js";import{T as se}from"./index-bb42f71b.js";import{S as re}from"./schoool_examinations_component-0052bc9f.js";import"./index-da5d94d5.js";import"./ActionButton-48d88ba2.js";import"./UpOutlined-7082c42f.js";import"./InputNumber-be03144d.js";import"./DeleteOutlined-25685737.js";import"./InfoCircleFilled-b90f3a64.js";import"./InfoCircleFilled-baaa675e.js";import"./Skeleton-b232d1c4.js";import"./DotChartOutlined-f39c986e.js";import"./index-f7d1c807.js";import"./ckeditor-3f84d6fc.js";import"./index-6d461898.js";import"./index-a1333c14.js";import"./index-f6743604.js";import"./localeData-47498326.js";import"./SwapRightOutlined-c4e52b1e.js";import"./SinglePicker-f4348261.js";import"./UserAddOutlined-061c79a2.js";import"./index-7d6f4d39.js";import"./defineProperty-66303050.js";import"./useNotification-a00a699f.js";import"./DialogWrap-00743730.js";import"./useMutateObserver-b266d449.js";import"./Image-cf12dd1b.js";import"./Upload-37847211.js";import"./Rate-756f2bfe.js";import"./index-b611dc1e.js";import"./index-25197a99.js";import"./CheckOutlined-60076e80.js";import"./CloseOutlined-8ffd71c9.js";import"./EditOutlined-dae09423.js";import"./EditOutlined-401a1613.js";import"./MoreOutlined-dd08292b.js";const oe=n=>{const[o,g]=a.useState([]),[j,E]=a.useState(0),[C,m]=a.useState(20),[N,h]=a.useState(""),[f,d]=a.useState(!0),[I]=v.useForm(),[u]=v.useForm();a.useState(!1);const[c,l]=a.useState(0),x=[{title:"Full Name",dataIndex:"name",fixed:!0,render:(s,t)=>e.jsx("span",{children:e.jsx("a",{children:t.member.fullName})})},{title:"Registration Number",dataIndex:"registrationNumber",fixed:!0,render:(s,t)=>e.jsx("span",{children:t.member.registrationNumber})},{title:"",dataIndex:"action",render:(s,t)=>e.jsx(e.Fragment,{children:e.jsx(K,{placement:"topRight",overlayStyle:{zIndex:9999},title:e.jsxs("div",{style:{width:"300px"},children:[e.jsxs("p",{style:{fontSize:18},children:["Are you sure to add Examination Score for"," ",e.jsx("b",{children:t.member.fullName})]}),e.jsx("div",{style:{marginTop:10},children:e.jsx(v,{layout:"vertical",form:u,onFinish:r=>{},requiredMark:!0,children:e.jsx(v.Item,{name:"score_value",label:"Score",rules:[{required:!0,type:"number",message:"Please input score value!"},{validator:(r,p)=>p<0||p>100?Promise.reject("Score value must be between 0 and 100"):Promise.resolve()}],children:e.jsx(U,{size:"large",defaultValue:0,style:{width:"100%"},onChange:r=>{l(r??0)}})})})})]}),onConfirm:()=>b(t.id,c),onCancel:()=>{},okButtonProps:{disabled:c<0||c>100},okText:"Add",cancelText:"No",onVisibleChange:r=>{r&&(l(0),u.resetFields())},children:e.jsx(L,{icon:e.jsx(W,{}),style:{float:"right"},danger:!0})})})}],b=async(s,t)=>{var p;const{data:r}=await w.custom({url:"",method:"post",meta:{operation:"createSchoolExaminationEducationLevelSubjectStudentRecord",variables:{schoolExaminationEducationLevelSubjectId:{value:parseInt(((p=n.subject)==null?void 0:p.id.toString())??"0"),type:"Int",required:!0},schoolEducationLevelStudentId:{value:parseInt(s.toString()),type:"Int",required:!0},score:{value:parseFloat(t.toString()),type:"Float",required:!0}},fields:["success","message",{schoolExaminationEducationLevelSubjectStudent:["id",{schoolEducationLevelStudent:["id",{member:["id","fullName","registrationNumber"]}]},"score","grade","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(y=>(i.remove(),i.error("Something Went Wrong ...."),{data:null})).then(y=>y);r!=null&&r.success?(i.success("Score Added Successfully"),g(o.filter(y=>y.id!==s)),n.onAdd(r.schoolExaminationEducationLevelSubjectStudent)):i.error(r==null?void 0:r.message)},S=async(s,t="",r=20)=>{var y,k,G;const{data:p}=await w.custom({url:"",method:"get",meta:{operation:"schoolEducationLevelSubjectResultsStudentsTo",variables:{page:{value:s,type:"Int",required:!0},key:{value:t,type:"String",required:!1},pageSize:{value:r,type:"Int",required:!1},schoolExaminationEducationLevelSubjectId:{value:parseInt(((y=n.subject)==null?void 0:y.id.toString())??"0"),type:"Int",required:!0},schoolEducationLevelId:{value:parseInt(((G=(k=n.level)==null?void 0:k.schoolEducationLevel)==null?void 0:G.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{member:["id","firstName","middleName","lastName","fullName","registrationNumber"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(Q=>(i.remove(),i.error("Something Went Wrong ...."),{data:null})).then(Q=>Q);p&&(E(p.total),g([...p.results])),d(!1)};return a.useEffect(()=>{S(1,"",20)},[n.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(q,{style:{marginTop:10},children:e.jsx(M,{span:16,children:e.jsx(v,{layout:"vertical",form:I,onFinish:s=>{h(s.key),o.length=0,S(1,s.key)},children:e.jsx(v.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(V,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(P,{loading:f,columns:x,dataSource:o,pagination:{onChange:(s,t)=>{m(t),S(s,N,t)},total:j,pageSize:C,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}})]})},ie=n=>{const[o,g]=a.useState([]),[j,E]=a.useState(0),[C,m]=a.useState(20),[N,h]=a.useState(""),[f,d]=a.useState(!0),[I]=v.useForm(),[u,c]=a.useState(!1),l=[{title:"Full Name",dataIndex:"name",fixed:!0,render:(s,t)=>e.jsx("span",{children:e.jsx("a",{children:t.schoolEducationLevelStudent.member.fullName})})},{title:"Registration Number",dataIndex:"registrationNumber",fixed:!0,render:(s,t)=>e.jsx("span",{children:e.jsx("a",{children:t.schoolEducationLevelStudent.registrationNumber})})},{title:"Score",dataIndex:"score",fixed:!0,render:(s,t)=>e.jsx("span",{children:e.jsx("a",{children:t.score})})},{title:"Grade",dataIndex:"grade",fixed:!0,render:(s,t)=>e.jsx("span",{children:e.jsx("a",{children:t.grade})})},{title:"",dataIndex:"action",render:(s,t)=>e.jsx(e.Fragment,{children:e.jsx(K,{title:"Are you sure to Delete",onConfirm:()=>x(t.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(L,{icon:e.jsx(Z,{}),style:{float:"right"},danger:!0})})})}],x=async s=>{const{data:t}=await w.custom({url:"",method:"post",meta:{operation:"deleteSchoolExaminationEducationLevelSubjectStudent",variables:{id:{value:parseInt(s.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(r=>(i.remove(),i.error("Something Went Wrong ...."),{data:null})).then(r=>r);t&&(t.success?(i.success(t.message),g(o.filter(r=>r.id!==s))):i.error(t.message)),d(!1)},b=async(s,t="",r=20)=>{var y;const{data:p}=await w.custom({url:"",method:"get",meta:{operation:"schoolExaminationEducationLevelSubjectStudents",variables:{page:{value:s,type:"Int",required:!0},key:{value:t,type:"String",required:!1},pageSize:{value:r,type:"Int",required:!1},schoolExaminationEducationLevelSubjectId:{value:parseInt(((y=n.subject)==null?void 0:y.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{schoolEducationLevelStudent:["id",{member:["id","fullName","registrationNumber"]}]},"score","grade","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(k=>(i.remove(),i.error("Something Went Wrong ...."),{data:null})).then(k=>k);p&&(E(p.total),g(p.results)),d(!1)},S=async s=>{g([s,...o])};return a.useEffect(()=>{b(1,"",20)},[n.randKey,n.subject]),e.jsxs(e.Fragment,{children:[e.jsxs(q,{style:{marginTop:10},children:[e.jsx(M,{span:16,children:e.jsx(v,{layout:"vertical",form:I,onFinish:s=>{h(s.key),o.length=0,b(1,s.key)},children:e.jsx(v.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(V,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(L,{size:"large",icon:e.jsx(W,{}),onClick:()=>c(!0),danger:!0,children:"Add"})})]}),e.jsx(P,{loading:f,columns:l,dataSource:o,pagination:{onChange:(s,t)=>{m(t),b(s,N,t)},total:j,pageSize:C,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"80vh"}}),e.jsx(z,{title:"Adding Students Scores",open:u,width:"40vw",onClose:s=>c(s),children:e.jsx(oe,{level:n.level,subject:n.subject,onAdd:S})})]})},le=n=>{const[o,g]=a.useState(),[j,E]=a.useState([]),[C,m]=a.useState(0);a.useState(20),a.useState("");const[N,h]=a.useState(!0),[f,d]=a.useState(!1);v.useForm(),J.useBreakpoint().lg;const u=async l=>{g(l),d(!0)},c=async(l,x="",b=20)=>{var s;const{data:S}=await w.custom({url:"",method:"get",meta:{operation:"schoolExaminationEducationLevelSubjects",variables:{page:{value:l,type:"Int",required:!0},key:{value:x,type:"String",required:!1},pageSize:{value:b,type:"Int",required:!1},schoolExaminationEducationLevelId:{value:parseInt(((s=n.level)==null?void 0:s.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{schoolEducationLevelSubject:["id",{schoolSubject:["id",{subject:["id","name"]}]}]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(t=>(i.remove(),i.error("Something Went Wrong ...."),{data:null})).then(t=>t);S&&(m(S.total),E([...S.results])),h(!1)};return a.useEffect(()=>{c(1,"",20)},[n.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[j.length===0&&e.jsx(X,{description:"No Subject Found ..."}),j.map((l,x)=>e.jsx("a",{onClick:()=>u(l),children:e.jsx(A,{color:"red",style:{padding:5},children:e.jsx("span",{style:{fontSize:18},children:l.schoolEducationLevelSubject.schoolSubject.subject.name})})}))]}),e.jsx($,{title:"View "+(o==null?void 0:o.schoolEducationLevelSubject.schoolSubject.subject.name)+" Results",anchor:"right",width:"50vw",onClose:l=>d(l),open:f,noOverFlow:!0,children:e.jsx(ie,{level:n.level,subject:o})})]})},de=n=>{const[o,g]=a.useState([]),[j,E]=a.useState([]),[C,m]=a.useState(0);a.useState(20),a.useState("");const[N,h]=a.useState(!0);a.useState(!1),v.useForm(),J.useBreakpoint().lg;const d=async(u,c="",l=20)=>{var b;const{data:x}=await w.custom({url:"",method:"get",meta:{operation:"schoolExaminationEducationLevelResults",variables:{schoolExaminationEducationLevelId:{value:parseInt(((b=n.level)==null?void 0:b.id.toString())??"0"),type:"Int",required:!0}},fields:["subjects","results"]}}).catch(()=>(i.remove(),i.error("Something Went Wrong ...."),{data:null})).then(S=>S);if(x){m(x.total),g([...x.subjects]);const S=[];x.subjects.map(s=>S.push({name:s})),g([...S]),E([...x.results])}h(!1)},I=[{fixed:!0,title:"Full Name",dataIndex:"name",key:"name",render:(u,c)=>e.jsx("span",{style:{fontWeight:"bolder"},children:c.student})},{fixed:!0,title:"Reg #.",dataIndex:"regno",key:"regno",render:(u,c)=>e.jsx("span",{style:{fontWeight:"bolder"},children:c.registration_number})},{title:"SUBJECTS",dataIndex:"subjects",key:"subjects",children:o.map(u=>({title:u.name,dataIndex:u.name,key:u.name,render:(c,l)=>{const x=l.results.find(b=>b.subject===u.name);return e.jsx(q,{children:e.jsxs(M,{span:24,style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:x==null?void 0:x.score}),e.jsx(A,{color:"green",children:x==null?void 0:x.grade})]})})}}))}];return a.useEffect(()=>{d(1,"",20)},[n.randKey]),e.jsx(e.Fragment,{children:e.jsx(P,{size:"small",columns:I,dataSource:j,scroll:{y:"80vh"}})})},{Panel:ue}=B,ce=n=>{const[o,g]=a.useState(!0),[j,E]=a.useState(),[C,m]=a.useState([]),[N,h]=a.useState(!1),f=async(d,I="",u=20)=>{var l;const{data:c}=await w.custom({url:"",method:"get",meta:{operation:"schoolExaminationEducationLevels",variables:{schoolExaminationId:{value:parseInt((l=n.examination)==null?void 0:l.id.toString()),type:"Int",required:!0},page:{value:d,type:"Int",required:!0},key:{value:I,type:"String",required:!1},pageSize:{value:u,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{schoolEducationLevel:["id",{educationLevel:["id","name"]}]},{schoolExamination:["id","name"]},"score","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(i.remove(),i.error("Something Went Wrong ..."),{data:null})).then(x=>x);c&&m([...c.results]),g(!1)};return a.useEffect(()=>{f(1,"",20)},[n.randKey,n.examination]),e.jsxs(e.Fragment,{children:[e.jsx(O,{spinning:o,children:e.jsx(q,{children:e.jsxs(M,{span:24,children:[C.length===0&&e.jsx(R,{children:e.jsxs("h3",{children:[e.jsx(ee,{type:"info-circle"})," No Data"]})}),e.jsx(R,{children:e.jsx(B,{defaultActiveKey:[],onChange:()=>{},expandIconPosition:"left",children:C.map((d,I)=>e.jsx(ue,{header:e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:18},children:d.schoolEducationLevel.educationLevel.name})}),extra:e.jsxs(e.Fragment,{children:[e.jsx(ae,{title:"Click to View All "+d.schoolEducationLevel.educationLevel.name+" Subjects Students Results",color:"green",placement:"left",children:e.jsx(L,{danger:!0,type:"link",icon:e.jsx(ne,{}),onClick:u=>{u.stopPropagation(),E(d),h(!0)},style:{marginRight:5}})}),e.jsx(L,{type:"link",icon:e.jsx(te,{}),onClick:u=>{u.stopPropagation()}})]}),children:e.jsx(le,{level:d})},"level"+I))})})]})})}),e.jsx(z,{title:"View All Subjects Examination Results",open:N,width:"94vw",onClose:d=>h(d),children:e.jsx(de,{level:j})})]})},me=n=>{const[o,g]=a.useState([]),[j,E]=a.useState(0),[C,m]=a.useState(20),[N,h]=a.useState(""),[f,d]=a.useState(!0),[I]=v.useForm(),[u]=v.useForm();a.useState(!1);const[c,l]=a.useState(0),x=[{title:"Full Name",dataIndex:"name",fixed:!0,render:(s,t)=>e.jsx("span",{children:e.jsx("a",{children:t.schoolMember.fullName})})},{title:"Registration Number",dataIndex:"registrationNumber",fixed:!0,render:(s,t)=>e.jsx("span",{children:t.schoolMember.registrationNumber})},{title:"",dataIndex:"action",render:(s,t)=>e.jsx(e.Fragment,{children:e.jsx(K,{placement:"topRight",overlayStyle:{zIndex:9999},title:e.jsxs("div",{style:{width:"300px"},children:[e.jsxs("p",{style:{fontSize:18},children:["Are you sure to add Examination Score for"," ",e.jsx("b",{children:t.schoolMember.fullName})]}),e.jsx("div",{style:{marginTop:10},children:e.jsx(v,{layout:"vertical",form:u,onFinish:r=>{},requiredMark:!0,children:e.jsx(v.Item,{name:"score_value",label:"Score",rules:[{required:!0,type:"number",message:"Please input score value!"},{validator:(r,p)=>p<0||p>100?Promise.reject("Score value must be between 0 and 100"):Promise.resolve()}],children:e.jsx(U,{size:"large",defaultValue:0,style:{width:"100%"},onChange:r=>{l(r??0)}})})})})]}),onConfirm:()=>b(t.id,c),onCancel:()=>{},okButtonProps:{disabled:c<0||c>100},okText:"Add",cancelText:"No",onVisibleChange:r=>{r&&(l(0),u.resetFields())},children:e.jsx(L,{icon:e.jsx(W,{}),style:{float:"right"},danger:!0})})})}],b=async(s,t)=>{var p;const{data:r}=await w.custom({url:"",method:"post",meta:{operation:"createSchoolExaminationStudyCourseModuleStudentRecord",variables:{schoolExaminationStudyCourseModuleId:{value:parseInt(((p=n.module)==null?void 0:p.id.toString())??"0"),type:"Int",required:!0},moduleMemberId:{value:parseInt(s.toString()),type:"Int",required:!0},score:{value:parseFloat(t.toString()),type:"Float",required:!0}},fields:["success","message",{schoolExaminationStudyCourseModuleStudent:["id","score","grade","isActive","created","updated","canEdit","canDelete","canManage",{studyCourseStudent:["id",{schoolMember:["id","registrationNumber","fullName","firstName","middleName","lastName","email","phone","gender","title"]}]}]}]}}).catch(y=>(console.error(y),i.remove(),i.error("Something Went Wrong ...."),{data:null})).then(y=>y);r!=null&&r.success?(i.success("Score Added Successfully"),g(o.filter(y=>y.id!==s)),n.onAdd(r.schoolExaminationStudyCourseModuleStudent)):i.error(r==null?void 0:r.message)},S=async(s,t="",r=20)=>{var y;const{data:p}=await w.custom({url:"",method:"get",meta:{operation:"schoolExaminationStudyCourseModuleStudentsToAddResults",variables:{page:{value:s,type:"Int",required:!0},key:{value:t,type:"String",required:!1},pageSize:{value:r,type:"Int",required:!1},moduleId:{value:parseInt(((y=n.module)==null?void 0:y.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{schoolMember:["id","firstName","middleName","lastName","fullName","registrationNumber"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(k=>(console.error(k),i.remove(),i.error("Something Went Wrong ...."),{data:null})).then(k=>k);p&&(E(p.total),g([...p.results])),d(!1)};return a.useEffect(()=>{S(1,"",20)},[n.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(q,{style:{marginTop:10},children:e.jsx(M,{span:16,children:e.jsx(v,{layout:"vertical",form:I,onFinish:s=>{h(s.key),o.length=0,S(1,s.key)},children:e.jsx(v.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(V,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(P,{loading:f,columns:x,dataSource:o,pagination:{onChange:(s,t)=>{m(t),S(s,N,t)},total:j,pageSize:C,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}})]})},he=n=>{const[o,g]=a.useState([]),[j,E]=a.useState(0),[C,m]=a.useState(20),[N,h]=a.useState(""),[f,d]=a.useState(!0),[I]=v.useForm(),[u,c]=a.useState(!1),l=[{title:"Full Name",dataIndex:"name",fixed:!0,render:(s,t)=>e.jsx("span",{children:e.jsx("a",{children:t.studyCourseStudent.schoolMember.fullName})})},{title:"Registration Number",dataIndex:"registrationNumber",fixed:!0,render:(s,t)=>e.jsx("span",{children:e.jsx("a",{children:t.studyCourseStudent.schoolMember.registrationNumber})})},{title:"Score",dataIndex:"score",fixed:!0,render:(s,t)=>e.jsx("span",{children:e.jsx("a",{children:t.score})})},{title:"Grade",dataIndex:"grade",fixed:!0,render:(s,t)=>e.jsx("span",{children:e.jsx("a",{children:t.grade})})},{title:"",dataIndex:"action",render:(s,t)=>e.jsx(e.Fragment,{children:e.jsx(K,{title:"Are you sure to Delete",onConfirm:()=>x(t.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(L,{icon:e.jsx(Z,{}),style:{float:"right"},danger:!0})})})}],x=async s=>{const{data:t}=await w.custom({url:"",method:"post",meta:{operation:"deleteSchoolExaminationStudyCourseModuleStudent",variables:{schoolExaminationStudyCourseModuleStudentId:{value:parseInt(s.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(r=>(i.remove(),i.error("Something Went Wrong ...."),{data:null})).then(r=>r);t&&(t.success?(i.success(t.message),g(o.filter(r=>r.id!==s))):i.error(t.message)),d(!1)},b=async(s,t="",r=20)=>{var y;const{data:p}=await w.custom({url:"",method:"get",meta:{operation:"schoolExaminationStudyCourseModuleStudentsResults",variables:{page:{value:s,type:"Int",required:!0},key:{value:t,type:"String",required:!1},pageSize:{value:r,type:"Int",required:!1},schoolExaminationStudyCourseModuleId:{value:parseInt(((y=n.module)==null?void 0:y.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","score","grade","isActive","created","updated","canEdit","canDelete","canManage",{studyCourseStudent:["id",{schoolMember:["id","registrationNumber","fullName","firstName","middleName","lastName","email","phone","gender","title"]}]}]}]}}).catch(k=>(i.remove(),i.error("Something Went Wrong ...."),{data:null})).then(k=>k);p&&(E(p.total),g(p.results)),d(!1)},S=async s=>{g([s,...o])};return a.useEffect(()=>{b(1,"",20)},[n.randKey,n.module]),e.jsxs(e.Fragment,{children:[e.jsxs(q,{style:{marginTop:10},children:[e.jsx(M,{span:16,children:e.jsx(v,{layout:"vertical",form:I,onFinish:s=>{h(s.key),o.length=0,b(1,s.key)},children:e.jsx(v.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(V,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(M,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(L,{size:"large",icon:e.jsx(W,{}),onClick:()=>c(!0),danger:!0,children:"Add"})})]}),e.jsx(P,{loading:f,columns:l,dataSource:o,pagination:{onChange:(s,t)=>{m(t),b(s,N,t)},total:j,pageSize:C,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"80vh"}}),e.jsx(z,{title:"Adding Students Scores",open:u,width:"40vw",onClose:s=>c(s),children:e.jsx(me,{studyCourse:n.studyCourse,module:n.module,onAdd:S})})]})},xe=n=>{const[o,g]=a.useState(),[j,E]=a.useState([]),[C,m]=a.useState(0);a.useState(20),a.useState("");const[N,h]=a.useState(!0),[f,d]=a.useState(!1);v.useForm(),J.useBreakpoint().lg;const u=async l=>{g(l),d(!0)},c=async(l,x="",b=20)=>{var s;const{data:S}=await w.custom({url:"",method:"get",meta:{operation:"schoolExaminationStudyCourseModules",variables:{page:{value:l,type:"Int",required:!0},key:{value:x,type:"String",required:!1},pageSize:{value:b,type:"Int",required:!1},schoolExaminationStudyCourseId:{value:parseInt(((s=n.studyCourse)==null?void 0:s.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","isActive","created","updated","canEdit","canDelete","canManage",{schoolExaminationStudyCourse:["id"]},{module:["id","name","code","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}]}}).catch(t=>(console.error(t),i.remove(),i.error("Something Went Wrong ...."),{data:null})).then(t=>t);S&&(m(S.total),E([...S.results])),h(!1)};return a.useEffect(()=>{c(1,"",20)},[n.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[j.length===0&&e.jsx(X,{description:"No Module Found ..."}),j.map((l,x)=>e.jsx("a",{onClick:()=>u(l),children:e.jsx(A,{color:"red",style:{padding:5},children:e.jsxs("span",{style:{fontSize:18},children:[l.module.name,e.jsx(A,{color:"red",style:{marginLeft:5},children:l.module.code})]})})}))]}),e.jsx($,{title:"View "+(o==null?void 0:o.module.name)+" Results",anchor:"right",width:"50vw",onClose:l=>d(l),open:f,noOverFlow:!0,children:e.jsx(he,{studyCourse:n.studyCourse,module:o})})]})},{Panel:ge}=B,pe=n=>{const[o,g]=a.useState(!0);a.useState();const[j,E]=a.useState([]),[C,m]=a.useState(!1),N=async(h,f="",d=20)=>{var u;const{data:I}=await w.custom({url:"",method:"get",meta:{operation:"schoolExaminationStudyCourses",variables:{schoolExaminationId:{value:parseInt((u=n.examination)==null?void 0:u.id.toString()),type:"Int",required:!0},page:{value:h,type:"Int",required:!0},key:{value:f,type:"String",required:!1},pageSize:{value:d,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","score","isActive","created","updated","canEdit","canDelete","canManage",{studyCourse:["id","year","yearDisplay","level","levelDisplay","semester","semesterDisplay","isActive","created","updated","canEdit","canDelete","canManage",{course:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}]}]}}).catch(c=>(console.error(c),i.remove(),i.error("Something Went Wrong ..."),{data:null})).then(c=>c);I&&E([...I.results]),g(!1)};return a.useEffect(()=>{N(1,"",20)},[n.randKey,n.examination]),e.jsxs(e.Fragment,{children:[e.jsx(O,{spinning:o,children:e.jsx(q,{children:e.jsxs(M,{span:24,children:[j.length===0&&e.jsx(R,{children:e.jsxs("h3",{children:[e.jsx(ee,{type:"info-circle"})," No Data"]})}),e.jsx(R,{children:e.jsx(B,{defaultActiveKey:[],onChange:()=>{},expandIconPosition:"left",children:j.map((h,f)=>e.jsx(ge,{header:e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:18},children:[h.studyCourse.course.name," ",e.jsx(_,{})," ",h.studyCourse.year," ",e.jsx(_,{})," ",h.studyCourse.levelDisplay,e.jsx(_,{})," ",h.studyCourse.semesterDisplay]})}),extra:e.jsx(e.Fragment,{children:e.jsx(L,{type:"link",icon:e.jsx(te,{}),onClick:d=>{d.stopPropagation()}})}),children:e.jsx(xe,{studyCourse:h})},"level"+f))})})]})})}),e.jsx(z,{title:"View All Subjects Examination Results",open:C,width:"94vw",onClose:h=>m(h),children:e.jsx(e.Fragment,{})})]})},{TabPane:Se}=se,je=n=>{const[o,g]=a.useState(!0),[j,E]=a.useState([]),C=async(m,N="",h=20)=>{g(!0);const{data:f}=await w.custom({url:"",method:"get",meta:{operation:"schoolExaminations",variables:{page:{value:m,type:"Int",required:!0},key:{value:N,type:"String",required:!1},pageSize:{value:h,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","year","startDate","endDate","level",{school:["id","name"]},{examinationType:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(i.error("Error occured while fetching Examinations"),{data:null})).then(d=>d);f&&E([...f.results]),g(!1)};return a.useEffect(()=>{C(1,"",20)},[n.randKey]),e.jsx(e.Fragment,{children:e.jsx(O,{spinning:o,children:e.jsx(q,{children:e.jsxs(M,{span:24,children:[j.length===0&&e.jsx(R,{children:e.jsx("h3",{children:"No Examinations Found"})}),e.jsx(R,{children:e.jsx(se,{tabPosition:"left",children:j.map(m=>e.jsxs(Se,{tab:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:m.name}),e.jsx(A,{color:"red",style:{marginLeft:5},children:m.year})]}),children:[e.jsxs("h3",{children:[m.name,e.jsx(A,{color:"red",style:{marginLeft:5},children:m.year})]}),m.level===0&&e.jsx(ce,{examination:m}),m.level===1&&e.jsx(pe,{examination:m})]},"examination-"+m.id))})})]})})})})},ye=()=>(a.useEffect(()=>{document.title=Y.system_name+": Examinations Results Dashboard"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(H,{children:e.jsxs(F,{children:[e.jsx(F.Item,{children:e.jsx(T,{to:"/",children:"Home"})}),e.jsx(F.Item,{children:e.jsx(T,{to:"/examinations_results",children:"Examinations Results"})}),e.jsx(F.Item,{children:"Dashboard"})]})}),e.jsx(je,{})]})),fe=()=>(a.useEffect(()=>{document.title=Y.system_name+": Manage Examinations"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsx(H,{children:e.jsxs(F,{children:[e.jsx(F.Item,{children:e.jsx(T,{to:"/",children:"Home"})}),e.jsx(F.Item,{children:e.jsx(T,{to:"/examinations_results",children:"Examinations Results"})}),e.jsx(F.Item,{children:"Manage Examinations"})]})}),e.jsx(re,{})]})),xt=n=>{const{page:o}=n;return o==="ManageExaminationsPage"?e.jsx(fe,{}):o==="ExaminationsResultsDashBoardPage"?e.jsx(ye,{}):e.jsx("div",{children:"Page not found ..."})};export{xt as ExaminationsResultsPages};
