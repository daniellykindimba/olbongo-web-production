import{cP as X,r as s,j as e,a8 as he,aT as g,S as Z,a1 as O,aW as _,aP as k,av as T,g as q,eL as me,_ as l,eM as pe,aX as ae,ce as V,aY as w,eN as Se,af as B,eO as ve,cl as H,eP as Ce,cd as ie,eQ as Ee,eR as Ie,cm as de,aR as be,aU as $}from"./index-47bff2d7.js";import{d as ye,C as ge}from"./ckeditor-452887d4.js";import{D as oe}from"./index-cbcf128d.js";import{P as N}from"./index-b23d56c7.js";import{I as se}from"./index-09c7fb1f.js";import{S as Y}from"./SearchOutlined-5e2c6731.js";import{G as je}from"./index-69244360.js";import{U as fe}from"./UserAddOutlined-dfb42884.js";import{D as re}from"./DeleteOutlined-5cf805d3.js";import{D as le}from"./index-bdbd856a.js";import{l as ce}from"./index-e5763ad9.js";import{C as Le}from"./CheckOutlined-6fd62381.js";import{C as Ae}from"./CloseOutlined-aac1827e.js";import{E as ke}from"./EditOutlined-8df976c4.js";import{M as Te}from"./MoreOutlined-19ed2f05.js";const{Option:ue}=Z;let R=[];for(let r=0;r<5;r++)R.push(X().year()+r),R.push(X().year()-r);R=R.sort((r,u)=>r-u);R=R.filter((r,u)=>R.indexOf(r)===u);const Fe=r=>{const[u,E]=s.useState(!0),[S,v]=s.useState([]),[I,F]=s.useState(""),b=async h=>{const{data:i}=await q.custom({url:"",method:"post",meta:{operation:"createSchoolExamination",variables:{examinationTypeId:{value:h.examination_type_id,type:"Int",required:!0},name:{value:h.name,type:"String",required:!0},description:{value:h.description,type:"String",required:!1},startDate:{value:h.start_date,type:"String",required:!1},endDate:{value:h.end_date,type:"String",required:!1},year:{value:h.year,type:"Int",required:!0}},fields:["success","message",{schoolExamination:me}]}}).catch(()=>(l.remove(),l.error("Error occured while Creating School Examination"),{data:null})).then(y=>y);l.remove(),i&&(i.success?(l.success(i.message),r.onFinish(i.schoolExamination)):l.error(i.message))},M=async(h,i="")=>{E(!0);const{data:y}=await q.custom({url:"",method:"get",meta:{operation:"examinationsTypes",variables:{page:{value:h,type:"Int",required:!0},key:{value:i,type:"String",required:!1},strictSchool:{value:!0,type:"Boolean",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:pe}]}}).catch(()=>(l.remove(),l.error("Error occured while Examinations Types"),{data:null})).then(p=>p);y&&v([...y.results]),E(!1)};return s.useEffect(()=>{M(1)},[r.randKey]),e.jsx(e.Fragment,{children:e.jsx(he,{spinning:u,children:e.jsxs(g,{layout:"vertical",form:r.form,onFinish:h=>{h.description=I,b(h)},requiredMark:!0,children:[e.jsx(g.Item,{name:"examination_type_id",label:"Examination Type",rules:[{required:!0,type:"integer",message:"Please choose Examination Type..."}],children:e.jsx(Z,{size:"large",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,i)=>i.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:S.map((h,i)=>e.jsx(ue,{value:parseInt(h.id.toString()),children:h.name}))})}),e.jsx(g.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(g.Item,{name:"year",label:"Year",rules:[{required:!0,type:"integer",message:"Please choose Year..."}],children:e.jsx(Z,{size:"large",showSearch:!0,placeholder:"Select a Year",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,i)=>i.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:R.map((h,i)=>e.jsx(ue,{value:h,children:h}))})}),e.jsxs(_,{children:[e.jsx(k,{span:12,children:e.jsx(g.Item,{name:"start_date",label:"Start Date",rules:[{required:!1,type:"date",message:"Please input Start Date"}],children:e.jsx(oe,{onChange:()=>{},style:{width:"100%"},popupStyle:{zIndex:9999}})})}),e.jsx(k,{span:12,children:e.jsx(g.Item,{name:"end_date",label:"End Date",rules:[{required:!1,type:"date",message:"Please input End Date"}],children:e.jsx(oe,{onChange:()=>{},style:{width:"100%"},popupStyle:{zIndex:9999}})})})]}),e.jsxs("div",{style:{marginBottom:10},children:[e.jsx("h3",{children:"Description"}),e.jsx(ye.CKEditor,{editor:ge,data:I,onReady:h=>{h.editing.view.change(i=>{i.setStyle("min-height","100px",h.editing.view.document.getRoot())})},onChange:(h,i)=>{const y=i.getData();F(y)},onBlur:(h,i)=>{},onFocus:(h,i)=>{},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},Me=r=>{const[u,E]=s.useState([]),[S,v]=s.useState(0),[I,F]=s.useState(20),[b,M]=s.useState(""),[h,i]=s.useState(!0),[y]=g.useForm(),[p,D]=s.useState(0),A=d=>{D(d)},j=async(d,a=!1)=>{var o;Se(d,a,p??0,((o=r.schoolExamination)==null?void 0:o.id)??0).then(f=>{f&&(f.success?(l.success(f.message),f.schoolExaminationEducationLevel?(E(u.filter(L=>L.id!==d)),r.onAdd(f.schoolExaminationEducationLevel)):(x(1,"",20),r.onAddAll())):l.error(f.message))})},m=[{title:"Name",dataIndex:"name",fixed:!0,render:(d,a,o)=>e.jsx("span",{children:e.jsx("a",{children:a.educationLevel.name})})},{title:"",dataIndex:"action",render:(d,a,o)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{placement:"left",title:e.jsx(e.Fragment,{children:e.jsxs(ae,{direction:"vertical",children:[e.jsxs("span",{children:["Are you sure to add ",a.educationLevel.name," ?"]}),e.jsx("div",{style:{height:"10px"}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Average Pass Score"}),e.jsx("span",{children:e.jsx(se,{size:"large",style:{width:"100%"},defaultValue:0,onChange:A})})]})}),disabled:!a.canManage,onConfirm:()=>j(a.id),onCancel:()=>{},okButtonProps:{disabled:p==null||p<0||p>100},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(B,{title:"Click to Add",placement:"left",color:"green",children:e.jsx(T,{size:"large",icon:e.jsx(V,{}),disabled:!a.canManage,danger:!0})})})})}],x=async(d,a="",o=20)=>{var f;i(!0),ve(d,a,o,((f=r.schoolExamination)==null?void 0:f.id)??0).then(L=>{L&&(v(L.total),E([...L.results]))}),i(!1)};return s.useEffect(()=>{x(1,"",20)},[r.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(_,{style:{marginTop:10},children:[e.jsx(k,{span:12,children:e.jsx(g,{layout:"vertical",form:y,onFinish:d=>{M(d.key),u.length=0,x(1,d.key,I)},children:e.jsx(g.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(Y,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(k,{span:4,children:e.jsx(T,{icon:e.jsx(Y,{}),size:"large"})}),e.jsx(k,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{placement:"left",title:e.jsx(e.Fragment,{children:e.jsxs(ae,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to add All?"}),e.jsx("div",{style:{height:"10px"}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Average Pass Score"}),e.jsx("span",{children:e.jsx(se,{size:"large",style:{width:"100%"},defaultValue:0,onChange:A})})]})}),onConfirm:()=>j(0,!0),onCancel:()=>{},okButtonProps:{disabled:p==null||p<0||p>100},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{size:"large",icon:e.jsx(V,{}),danger:!0,children:"Add All"})})})]}),e.jsx(w,{loading:h,columns:m,dataSource:u,pagination:{onChange:(d,a)=>{F(a),x(d,b,a)},total:S,pageSize:I,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})]})},De=r=>{const[u,E]=s.useState([]),[S,v]=s.useState(0),[I,F]=s.useState(20),[b,M]=s.useState(""),[h,i]=s.useState(!0),[y]=g.useForm(),p=[{title:"Subject Name",dataIndex:"name",fixed:!0,render:(j,m)=>e.jsx("span",{children:e.jsx("a",{children:m.schoolSubject.subject.name})})},{title:"",dataIndex:"action",render:(j,m)=>e.jsx(e.Fragment,{children:e.jsx(N,{title:"Add "+(m==null?void 0:m.schoolSubject.subject.name),onConfirm:()=>D(!1,m==null?void 0:m.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{icon:e.jsx(V,{}),style:{float:"right"},danger:!0})})})}],D=async(j=!1,m)=>{var d;const{data:x}=await q.custom({url:"",method:"post",meta:{operation:"addSchoolExaminationEducationLevelSubject",variables:{schoolExaminationEducationLevelId:{value:parseInt(((d=r.level)==null?void 0:d.id.toString())??"0"),type:"Int",required:!0},schoolEducationLevelSubjectId:{value:parseInt(m.toString()),type:"Int",required:!1},all:{value:j,type:"Boolean",required:!1}},fields:["success","message",{schoolExaminationEducationLevelSubject:["id"]}]}}).catch(a=>(l.remove(),l.error("Something Went Wrong ...."),{data:null})).then(a=>a);x!=null&&x.success?(l.success(x==null?void 0:x.message),u.length=0,E([]),A(1,b,I),r.onAdd()):l.error(x==null?void 0:x.message)},A=async(j,m="",x=20)=>{var a;const{data:d}=await q.custom({url:"",method:"get",meta:{operation:"schoolEducationLevelSubjectsForExaminationToAdd",variables:{page:{value:j,type:"Int",required:!0},key:{value:m,type:"String",required:!1},pageSize:{value:x,type:"Int",required:!1},schoolExaminationEducationLevelId:{value:parseInt(((a=r.level)==null?void 0:a.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{schoolSubject:["id",{subject:["id","name"]}]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(o=>(l.remove(),l.error("Something Went Wrong ...."),{data:null})).then(o=>o);d&&(v(d.total),E([...d.results])),i(!1)};return s.useEffect(()=>{A(1,"",20)},[r.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(_,{style:{marginTop:10},children:[e.jsx(k,{span:16,children:e.jsx(g,{layout:"vertical",form:y,onFinish:j=>{M(j.key),u.length=0,A(1,j.key)},children:e.jsx(g.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(Y,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(k,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{title:"Are you sure to add all subjects",onConfirm:()=>D(!0,0),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{size:"large",danger:!0,children:"Add All"})})})]}),e.jsx(w,{loading:h,columns:p,dataSource:u,pagination:{onChange:(j,m)=>{F(m),A(j,b,m)},total:S,pageSize:I,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}})]})},ze=r=>{const[u,E]=s.useState([]),[S,v]=s.useState(0),[I,F]=s.useState(20),[b,M]=s.useState(""),[h,i]=s.useState(!0),[y,p]=s.useState(!1),[D]=g.useForm();je.useBreakpoint().lg;const j=[{title:"Subject Name",dataIndex:"name",fixed:!0,render:(a,o,f)=>e.jsx("span",{children:e.jsx("a",{children:o.schoolEducationLevelSubject.schoolSubject.subject.name})})},{title:"",dataIndex:"action",render:(a,o,f)=>e.jsx(e.Fragment,{children:e.jsx(N,{title:"Delete this Subject",placement:"topLeft",onConfirm:()=>m(o==null?void 0:o.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{danger:!0,size:"small",icon:e.jsx(re,{}),style:{float:"right"}})})})}],m=async a=>{const{data:o}=await q.custom({url:"",method:"post",meta:{operation:"removeSchoolExaminationEducationLevelSubject",variables:{schoolExaminationEducationLevelSubjectId:{value:parseInt(a.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(f=>(l.remove(),l.error("Something Went Wrong ...."),{data:null})).then(f=>f);o&&(o.success?(l.success(o.message),x(1,"",20)):l.error(o.message))},x=async(a,o="",f=20)=>{var P;const{data:L}=await q.custom({url:"",method:"get",meta:{operation:"schoolExaminationEducationLevelSubjects",variables:{page:{value:a,type:"Int",required:!0},key:{value:o,type:"String",required:!1},pageSize:{value:f,type:"Int",required:!1},schoolExaminationEducationLevelId:{value:parseInt(((P=r.level)==null?void 0:P.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{schoolEducationLevelSubject:["id",{schoolSubject:["id",{subject:["id","name"]}]}]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(K=>(l.remove(),l.error("Something Went Wrong ...."),{data:null})).then(K=>K);L&&(v(L.total),E([...L.results])),i(!1)},d=async()=>{x(1,b,I)};return s.useEffect(()=>{x(1,"",20)},[r.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(_,{style:{marginTop:10},children:[e.jsx(k,{span:16,children:e.jsx(g,{layout:"vertical",form:D,onFinish:a=>{M(a.key),u.length=0,x(1,a.key)},children:e.jsx(g.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(Y,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(k,{span:8,children:e.jsx(T,{danger:!0,size:"large",icon:e.jsx(fe,{}),onClick:()=>p(!0),style:{float:"right"},children:"Add Subject"})})]}),e.jsx(w,{loading:h,columns:j,dataSource:u,pagination:{onChange:(a,o)=>{F(o),x(a,b,o)},total:S,pageSize:I,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}}),e.jsx(H,{title:"Adding Subjects",open:y,width:"40vw",onClose:a=>p(a),children:e.jsx(De,{level:r.level,onAdd:d})})]})},qe=r=>{var U,Q,J;const[u,E]=s.useState(),[S,v]=s.useState([]),[I,F]=s.useState(20),[b,M]=s.useState(""),[h,i]=s.useState(0),[y,p]=s.useState(!0),[D]=g.useForm(),[A,j]=s.useState(!1),[m,x]=s.useState(!1),[d,a]=s.useState(0),o=async c=>{E(c),x(!0)},f=c=>{a(c)},L=async()=>{W(1,"",20)},P=async c=>{v([c,...S])},K=async c=>{Ee(c,d??0).then(t=>{t&&(t.success?(l.success(t.message),v(S.map(n=>n.id===c?t.schoolExaminationEducationLevel:n))):l.error(t.message))})},ee=async c=>{Ie(c).then(t=>{t&&(t.success?(l.success(t.message),v(S.filter(n=>n.id!==c))):l.error(t.message))})},W=async(c,t="",n=20)=>{var C;p(!0),Ce(c,t,n,((C=r.schoolExamination)==null?void 0:C.id)??0).then(z=>{z&&(i(z.total),v([...z.results]))}),p(!1)};s.useEffect(()=>{W(1,"",20)},[r.randKey,r.schoolExamination]);const te=[{title:"Education Level",dataIndex:"educationLevel",fixed:!0,render:(c,t,n)=>e.jsx("span",{children:e.jsx(B,{title:"Click to View Results",color:"green",placement:"top",children:e.jsx("a",{children:t.schoolEducationLevel.educationLevel.name})})})},{title:"Av. Pass Score",dataIndex:"score",fixed:!0,render:(c,t,n)=>e.jsx("span",{children:e.jsx(N,{title:e.jsx(e.Fragment,{children:e.jsxs(ae,{direction:"vertical",children:[e.jsx("span",{children:"Updating Average Score ?"}),e.jsx("div",{style:{height:"10px"}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Average Pass Score"}),e.jsx("span",{children:e.jsx(se,{size:"large",style:{width:"100%"},defaultValue:t.score,onChange:f})})]})}),onVisibleChange:C=>{C&&a(t.score)},onConfirm:()=>K(t.id),onCancel:()=>{},okButtonProps:{disabled:d==null||d<0||d>100},okText:"Update",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(B,{title:"Tap to Edit",color:"green",children:e.jsx("a",{children:t.score})})})})},{title:"Created",dataIndex:"created",render:(c,t,n)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(t.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(c,t,n)=>e.jsx("a",{children:t!=null&&t.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(c,t,n)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(B,{title:"View Education Level Applicable Subjects",color:"green",placement:"left",children:e.jsx(T,{size:"small",style:{marginRight:3},icon:e.jsx(ie,{}),disabled:!(t!=null&&t.canManage),onClick:()=>o(t),danger:!0})}),e.jsx(N,{title:"Are you sure to remove this Education Level?",onConfirm:()=>ee(t==null?void 0:t.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(t!=null&&t.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(T,{size:"small",icon:e.jsx(re,{}),disabled:!(t!=null&&t.canDelete),danger:!0})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(_,{style:{marginTop:10},children:[e.jsx(k,{span:16,children:e.jsx(g,{layout:"vertical",form:D,onFinish:c=>{M(c.key),S.length=0,W(1,c.key)},children:e.jsx(g.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(Y,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(k,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(B,{title:"Add New Education Level",color:"green",children:e.jsx(T,{icon:e.jsx(V,{}),size:"large",danger:!0,onClick:()=>j(!0),children:"Add"})})})]}),e.jsx(w,{loading:y,columns:te,dataSource:S,pagination:{onChange:(c,t)=>{F(t),W(c,b,t)},total:h,pageSize:I,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0,y:"calc(100vh - 300px)"}}),e.jsx(le,{title:"Adding Education Levels",width:"35vw",anchor:"right",onClose:c=>j(c),open:A,noOverFlow:!0,children:e.jsx(Me,{schoolExamination:r.schoolExamination,onAdd:P,onAddAll:L,randKey:Math.random()})}),e.jsx(le,{title:((Q=(U=u==null?void 0:u.schoolEducationLevel)==null?void 0:U.educationLevel)==null?void 0:Q.name)+" => "+((J=u==null?void 0:u.schoolExamination)==null?void 0:J.name)+" => Subjects",destroyOnClose:!0,width:"45vw",anchor:"right",onClose:c=>x(c),open:m,noOverFlow:!0,children:e.jsx(ze,{level:u})})]})},{Option:xe}=Z;let G=[];for(let r=0;r<5;r++)G.push(X().year()+r),G.push(X().year()-r);G=G.sort((r,u)=>r-u);G=G.filter((r,u)=>G.indexOf(r)===u);const Ne=r=>{const[u,E]=s.useState(!0),[S,v]=s.useState([]),[I]=g.useForm(),[F,b]=s.useState(""),M=async i=>{const{data:y}=await q.custom({url:"",method:"post",meta:{operation:"updateSchoolExamination",variables:{id:{value:parseInt(i.id.toString()),type:"Int",required:!0},examinationTypeId:{value:i.examination_type_id,type:"Int",required:!0},name:{value:i.name,type:"String",required:!0},description:{value:i.description,type:"String",required:!1},startDate:{value:i.start_date,type:"String",required:!1},endDate:{value:i.end_date,type:"String",required:!1},year:{value:i.year,type:"Int",required:!1}},fields:["success","message",{schoolExamination:me}]}}).catch(p=>(console.error(p),l.error("Error occured while Creating School Examination"),{data:null})).then(p=>p);y&&(y.success?(l.success(y.message),r.onFinish(y.schoolExamination)):l.error(y.message))},h=async(i,y="")=>{E(!0);const{data:p}=await q.custom({url:"",method:"get",meta:{operation:"examinationsTypes",variables:{page:{value:i,type:"Int",required:!0},key:{value:y,type:"String",required:!1},strictSchool:{value:!0,type:"Boolean",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:pe}]}}).catch(()=>(l.error("Error occured while Examinations Types"),{data:null})).then(D=>D);p&&v([...p.results]),E(!1)};return s.useEffect(()=>{h(1)},[r.randKey]),e.jsx(e.Fragment,{children:e.jsx(he,{spinning:u,children:e.jsxs(g,{layout:"vertical",form:I,onFinish:i=>{i.id=r.examination.id,i.description=F,M(i)},requiredMark:!0,initialValues:{id:r.examination.id,name:r.examination.name,description:r.examination.description,start_date:X(r.examination.startDate),end_date:X(r.examination.endDate),examination_type_id:parseInt(r.examination.examinationType.id.toString()),year:r.examination.year},children:[e.jsx(g.Item,{name:"examination_type_id",label:"Examination Type",rules:[{required:!0,type:"integer",message:"Please choose Examination Type..."}],children:e.jsx(Z,{size:"large",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onChange:i=>{},onSearch:i=>{},filterOption:(i,y)=>y.children.toLowerCase().includes(i.toLowerCase()),dropdownStyle:{zIndex:9999},children:S.map((i,y)=>e.jsx(xe,{value:parseInt(i.id.toString()),children:i.name}))})}),e.jsx(g.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(O,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(g.Item,{name:"year",label:"Year",rules:[{required:!0,type:"integer",message:"Please choose Year..."}],children:e.jsx(Z,{size:"large",showSearch:!0,placeholder:"Select a Year",optionFilterProp:"children",onChange:i=>{},onSearch:i=>{},filterOption:(i,y)=>y.children.toLowerCase().includes(i.toLowerCase()),dropdownStyle:{zIndex:9999},children:G.map((i,y)=>e.jsx(xe,{value:i,children:i}))})}),e.jsxs(_,{children:[e.jsx(k,{span:12,children:e.jsx(g.Item,{name:"start_date",label:"Start Date",rules:[{required:!1,type:"date",message:"Please input Start Date"}],children:e.jsx(oe,{onChange:()=>{},style:{width:"100%"},popupStyle:{zIndex:9999}})})}),e.jsx(k,{span:12,children:e.jsx(g.Item,{name:"end_date",label:"End Date",rules:[{required:!1,type:"date",message:"Please input End Date"}],children:e.jsx(oe,{onChange:()=>{},style:{width:"100%"},popupStyle:{zIndex:9999}})})})]}),e.jsxs("div",{style:{marginBottom:10},children:[e.jsx("h3",{children:"Description"}),e.jsx(ye.CKEditor,{editor:ge,data:F,onReady:i=>{i.editing.view.change(y=>{y.setStyle("min-height","100px",i.editing.view.document.getRoot())})},onChange:(i,y)=>{const p=y.getData();b(p)},onBlur:(i,y)=>{},onFocus:(i,y)=>{},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(T,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},Pe=r=>{const[u,E]=s.useState([]),[S,v]=s.useState(0),[I,F]=s.useState(20),[b,M]=s.useState(""),[h,i]=s.useState(!0),[y]=g.useForm(),[p,D]=s.useState(0),A=d=>{D(d)},j=async(d,a=!1)=>{var f;const{data:o}=await q.custom({url:"",method:"post",meta:{operation:"createSchoolExaminationStudyCourse",variables:{all:{value:a,type:"Boolean",required:!1},schoolExaminationId:{value:parseInt(((f=r.schoolExamination)==null?void 0:f.id.toString())??"0"),type:"Int",required:!1},studyCourseId:{value:parseInt(d.toString()),type:"Int",required:!1},score:{value:p,type:"Float",required:!0}},fields:["success","message",{schoolExaminationStudyCourse:["id","created","updated","isActive","canEdit","canDelete","canManage",{studyCourse:["id","year","levelDisplay","level","semester","semesterDisplay",{course:["id","name"]}]}]}]}}).catch(()=>(l.remove(),l.error("Something went wrong"),{data:null})).then(L=>L);o?o.success?(l.success(o.message),a?r.onAddAll():r.onAdd(o.schoolExaminationStudyCourse)):l.error(o.message):l.error("Something went wrong")},m=[{title:"Course Name",dataIndex:"courseName",fixed:!0,render:(d,a,o)=>e.jsx("span",{children:e.jsx("a",{children:a.course.name})})},{title:"Year",dataIndex:"year",fixed:!0,render:(d,a,o)=>e.jsx("span",{children:e.jsx("a",{children:a.year})})},{title:"Semester",dataIndex:"semeter",fixed:!0,render:(d,a,o)=>e.jsx("span",{children:e.jsx("a",{children:a.semesterDisplay})})},{title:"Level",dataIndex:"level",fixed:!0,render:(d,a,o)=>e.jsx("span",{children:e.jsx("a",{children:a.levelDisplay})})},{title:"",dataIndex:"action",render:(d,a,o)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{placement:"left",title:e.jsx(e.Fragment,{children:e.jsxs(ae,{direction:"vertical",children:[e.jsxs("span",{children:["Are you sure to add ",a.course.name," ?"]}),e.jsx("div",{style:{height:"10px"}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Average Pass Score"}),e.jsx("span",{children:e.jsx(se,{size:"large",style:{width:"100%"},defaultValue:0,onChange:A})})]})}),disabled:!a.canManage,onConfirm:()=>j(a.id),onCancel:()=>{},okButtonProps:{disabled:p==null||p<0||p>100},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(B,{title:"Click to Add",placement:"left",color:"green",children:e.jsx(T,{size:"large",icon:e.jsx(V,{}),disabled:!a.canManage,danger:!0})})})})}],x=async(d,a="",o=20)=>{var L;i(!0);const{data:f}=await q.custom({url:"",method:"get",meta:{operation:"schoolExaminationStudyCoursesToAdd",variables:{schoolExaminationId:{value:parseInt(((L=r.schoolExamination)==null?void 0:L.id.toString())??"0"),type:"Int",required:!0},page:{value:d,type:"Int",required:!0},key:{value:a,type:"String",required:!1},pageSize:{value:o,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","year","levelDisplay","level","semester","semesterDisplay","canEdit","canDelete","canManage",{course:["id","name"]}]}]}}).catch(P=>(console.error(P),l.remove(),l.error("Something Went Wrong ..."),{data:null})).then(P=>P);console.log(f),f&&(E(f.results),v(f.total)),i(!1)};return s.useEffect(()=>{x(1,"",20)},[r.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(_,{style:{marginTop:10},children:[e.jsx(k,{span:12,children:e.jsx(g,{layout:"vertical",form:y,onFinish:d=>{M(d.key),u.length=0,x(1,d.key,I)},children:e.jsx(g.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(Y,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(k,{span:4,children:e.jsx(T,{icon:e.jsx(Y,{}),size:"large"})}),e.jsx(k,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{placement:"left",title:e.jsx(e.Fragment,{children:e.jsxs(ae,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to add All?"}),e.jsx("div",{style:{height:"10px"}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Average Pass Score"}),e.jsx("span",{children:e.jsx(se,{size:"large",style:{width:"100%"},defaultValue:0,onChange:A})})]})}),onConfirm:()=>j(0,!0),onCancel:()=>{},okButtonProps:{disabled:p==null||p<0||p>100},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{size:"large",icon:e.jsx(V,{}),danger:!0,children:"Add All"})})})]}),e.jsx(w,{loading:h,columns:m,dataSource:u,pagination:{onChange:(d,a)=>{F(a),x(d,b,a)},total:S,pageSize:I,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})]})},Ke=r=>{const[u,E]=s.useState([]),[S,v]=s.useState(0),[I,F]=s.useState(20),[b,M]=s.useState(""),[h,i]=s.useState(!0),[y]=g.useForm(),p=[{title:"Module Name",dataIndex:"name",fixed:!0,render:(j,m)=>e.jsx("span",{children:e.jsx("a",{children:m.name})})},{title:"Module code",dataIndex:"code",fixed:!0,render:(j,m)=>e.jsx("span",{children:e.jsx("a",{children:m.code})})},{title:"",dataIndex:"action",render:(j,m)=>e.jsx(e.Fragment,{children:e.jsx(N,{title:"Add "+(m==null?void 0:m.name),onConfirm:()=>D(!1,m==null?void 0:m.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{icon:e.jsx(V,{}),style:{float:"right"},danger:!0})})})}],D=async(j=!1,m)=>{var d;const{data:x}=await q.custom({url:"",method:"post",meta:{operation:"addSchoolExaminationStudyCourseModule",variables:{schoolExaminationStudyCourseId:{value:parseInt(((d=r.studyCourse)==null?void 0:d.id.toString())??"0"),type:"Int",required:!0},moduleId:{value:parseInt(m.toString()),type:"Int",required:!1},all:{value:j,type:"Boolean",required:!1}},fields:["success","message",{schoolExaminationStudyCourseModule:["id"]}]}}).catch(a=>(l.remove(),l.error("Something Went Wrong ...."),{data:null})).then(a=>a);x!=null&&x.success?(l.success(x==null?void 0:x.message),u.length=0,E([]),A(1,b,I),r.onAdd()):l.error(x==null?void 0:x.message)},A=async(j,m="",x=20)=>{var a;const{data:d}=await q.custom({url:"",method:"get",meta:{operation:"schoolExaminationStudyCourseModulesToAdd",variables:{page:{value:j,type:"Int",required:!0},key:{value:m,type:"String",required:!1},pageSize:{value:x,type:"Int",required:!1},schoolExaminationStudyCourseId:{value:parseInt(((a=r.studyCourse)==null?void 0:a.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(o=>(l.remove(),l.error("Something Went Wrong ...."),{data:null})).then(o=>o);d&&(v(d.total),E(d.results)),i(!1)};return s.useEffect(()=>{A(1,"",20)},[r.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(_,{style:{marginTop:10},children:[e.jsx(k,{span:16,children:e.jsx(g,{layout:"vertical",form:y,onFinish:j=>{M(j.key),u.length=0,A(1,j.key)},children:e.jsx(g.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(Y,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(k,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{title:"Are you sure to add all Modules",onConfirm:()=>D(!0,0),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{size:"large",danger:!0,children:"Add All"})})})]}),e.jsx(w,{loading:h,columns:p,dataSource:u,pagination:{onChange:(j,m)=>{F(m),A(j,b,m)},total:S,pageSize:I,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}})]})},We=r=>{const[u,E]=s.useState([]),[S,v]=s.useState(0),[I,F]=s.useState(20),[b,M]=s.useState(""),[h,i]=s.useState(!0),[y,p]=s.useState(!1),[D]=g.useForm();je.useBreakpoint().lg;const j=[{title:"Module Name",dataIndex:"name",fixed:!0,render:(a,o,f)=>e.jsx("span",{children:e.jsx("a",{children:o.module.name})})},{title:"Module Code",dataIndex:"code",fixed:!0,render:(a,o,f)=>e.jsx("span",{children:e.jsx("a",{children:o.module.code})})},{title:"",dataIndex:"action",render:(a,o,f)=>e.jsx(e.Fragment,{children:e.jsx(N,{title:"Delete this Subject",placement:"topLeft",onConfirm:()=>m(o==null?void 0:o.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(T,{danger:!0,size:"small",icon:e.jsx(re,{}),style:{float:"right"}})})})}],m=async a=>{const{data:o}=await q.custom({url:"",method:"post",meta:{operation:"removeSchoolExaminationStudyCourseModule",variables:{schoolExaminationStudyCourseModuleId:{value:parseInt(a.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(f=>(l.remove(),l.error("Something Went Wrong ...."),{data:null})).then(f=>f);o&&(o.success?(l.success(o.message),x(1,"",20)):l.error(o.message))},x=async(a,o="",f=20)=>{var P;const{data:L}=await q.custom({url:"",method:"get",meta:{operation:"schoolExaminationStudyCourseModules",variables:{page:{value:a,type:"Int",required:!0},key:{value:o,type:"String",required:!1},pageSize:{value:f,type:"Int",required:!1},schoolExaminationStudyCourseId:{value:parseInt(((P=r.studyCourse)==null?void 0:P.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{module:["id","name","code"]},{schoolExaminationStudyCourse:["id"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(K=>(console.error(K),l.remove(),l.error("Something Went Wrong ...."),{data:null})).then(K=>K);L&&(v(L.total),E([...L.results])),i(!1)},d=async()=>{x(1,b,I)};return s.useEffect(()=>{x(1,"",20)},[r.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(_,{style:{marginTop:10},children:[e.jsx(k,{span:16,children:e.jsx(g,{layout:"vertical",form:D,onFinish:a=>{M(a.key),u.length=0,x(1,a.key)},children:e.jsx(g.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(Y,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(k,{span:8,children:e.jsx(T,{danger:!0,size:"large",icon:e.jsx(fe,{}),onClick:()=>p(!0),style:{float:"right"},children:"Add Module"})})]}),e.jsx(w,{loading:h,columns:j,dataSource:u,pagination:{onChange:(a,o)=>{F(o),x(a,b,o)},total:S,pageSize:I,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}}),e.jsx(H,{title:"Adding Modules",open:y,width:"40vw",onClose:a=>p(a),children:e.jsx(Ke,{studyCourse:r.studyCourse,onAdd:d})})]})},Ye=r=>{var U,Q,J;const[u,E]=s.useState(),[S,v]=s.useState([]),[I,F]=s.useState(20),[b,M]=s.useState(""),[h,i]=s.useState(0),[y,p]=s.useState(!0),[D]=g.useForm(),[A,j]=s.useState(!1),[m,x]=s.useState(!1),[d,a]=s.useState(0),o=async c=>{E(c),x(!0)},f=c=>{a(c)},L=async()=>{W(1,"",20)},P=async c=>{v([c,...S])},K=async c=>{const{data:t}=await q.custom({url:"",method:"post",meta:{operation:"updateScoreSchoolExaminationStudyCourse",variables:{schoolExaminationStudyCourseId:{value:parseInt(c.toString()),type:"Int",required:!0},score:{value:d,type:"Float",required:!0}},fields:["success","message",{schoolExaminationStudyCourse:["id","score","created","updated","isActive","canEdit","canDelete","canManage",{schoolExamination:["id","name"]},{studyCourse:["id","year","levelDisplay","level","semester","semesterDisplay",{course:["id","name"]}]}]}]}}).catch(()=>(l.remove(),l.error("Something Went Wrong ..."),{data:null})).then(n=>n);t&&(t.success?(l.success(t.message),v(S.map(n=>n.id===t.schoolExaminationStudyCourse.id?t.schoolExaminationStudyCourse:n))):l.error(t.message))},ee=async c=>{const{data:t}=await q.custom({url:"",method:"post",meta:{operation:"deleteSchoolExaminationStudyCourse",variables:{schoolExaminationStudyCourseId:{value:parseInt(c.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(l.remove(),l.error("Something Went Wrong ..."),{data:null})).then(n=>n);t&&(t.success?(l.success(t.message),v(S.filter(n=>n.id!==c))):l.error(t.message))},W=async(c,t="",n=20)=>{var z;p(!0);const{data:C}=await q.custom({url:"",method:"get",meta:{operation:"schoolExaminationStudyCourses",variables:{schoolExaminationId:{value:parseInt(((z=r.schoolExamination)==null?void 0:z.id.toString())??"0"),type:"Int",required:!0},page:{value:c,type:"Int",required:!0},key:{value:t,type:"String",required:!1},pageSize:{value:n,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","score","created","updated","isActive","canEdit","canDelete","canManage",{schoolExamination:["id","name"]},{studyCourse:["id","year","levelDisplay","level","semester","semesterDisplay",{course:["id","name"]}]}]}]}}).catch(ne=>(console.error(ne),l.remove(),l.error("Something Went Wrong ...1"),{data:null})).then(ne=>ne);C&&(v(C.results),i(C.total)),p(!1)};s.useEffect(()=>{W(1,"",20)},[r.randKey,r.schoolExamination]);const te=[{title:"Course Name",dataIndex:"courseName",fixed:!0,render:(c,t,n)=>e.jsx("span",{children:e.jsx("a",{children:t.studyCourse.course.name})})},{title:"Year",dataIndex:"year",fixed:!0,render:(c,t,n)=>e.jsx("span",{children:e.jsx("a",{children:t.studyCourse.year})})},{title:"Semester",dataIndex:"semeter",fixed:!0,render:(c,t,n)=>e.jsx("span",{children:e.jsx("a",{children:t.studyCourse.semesterDisplay})})},{title:"Level",dataIndex:"level",fixed:!0,render:(c,t,n)=>e.jsx("span",{children:e.jsx("a",{children:t.studyCourse.levelDisplay})})},{title:"Av. Score",dataIndex:"score",fixed:!0,render:(c,t,n)=>e.jsx("span",{children:e.jsx(N,{title:e.jsx(e.Fragment,{children:e.jsxs(ce.Space,{direction:"vertical",children:[e.jsx("span",{children:"Updating Average Score ?"}),e.jsx("div",{style:{height:"10px"}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Average Pass Score"}),e.jsx("span",{children:e.jsx(ce.InputNumber,{size:"large",style:{width:"100%"},defaultValue:t.score,onChange:f})})]})}),onVisibleChange:C=>{C&&a(t.score)},onConfirm:()=>K(t.id),onCancel:()=>{},okButtonProps:{disabled:d==null||d<0||d>100},okText:"Update",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(B,{title:"Tap to Edit",color:"green",children:e.jsx("a",{children:t.score})})})})},{title:"Created",dataIndex:"created",render:(c,t,n)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(t.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(c,t,n)=>e.jsx("a",{children:t!=null&&t.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(c,t,n)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(B,{title:"View Modules",color:"green",placement:"left",children:e.jsx(T,{size:"small",style:{marginRight:3},icon:e.jsx(ie,{}),disabled:!(t!=null&&t.canManage),onClick:()=>o(t),danger:!0})}),e.jsx(N,{title:"Are you sure to remove this study course?",onConfirm:()=>ee(t==null?void 0:t.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(t!=null&&t.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(T,{size:"small",icon:e.jsx(re,{}),disabled:!(t!=null&&t.canDelete),danger:!0})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(_,{style:{marginTop:10},children:[e.jsx(k,{span:16,children:e.jsx(g,{layout:"vertical",form:D,onFinish:c=>{M(c.key),S.length=0,W(1,c.key)},children:e.jsx(g.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(Y,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(k,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(B,{title:"Add New Education Level",color:"green",children:e.jsx(T,{icon:e.jsx(V,{}),size:"large",danger:!0,onClick:()=>j(!0),children:"Add"})})})]}),e.jsx(w,{loading:y,columns:te,dataSource:S,pagination:{onChange:(c,t)=>{F(t),W(c,b,t)},total:h,pageSize:I,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0,y:"calc(100vh - 300px)"}}),e.jsx(le,{title:"Adding Study Courses to School Examination",width:"60vw",anchor:"right",onClose:c=>j(c),open:A,noOverFlow:!0,children:e.jsx(Pe,{schoolExamination:r.schoolExamination,onAdd:P,onAddAll:L,randKey:Math.random()})}),e.jsx(le,{title:((Q=(U=u==null?void 0:u.studyCourse)==null?void 0:U.course)==null?void 0:Q.name)+" => "+((J=u==null?void 0:u.schoolExamination)==null?void 0:J.name)+" => Modules",destroyOnClose:!0,width:"45vw",anchor:"right",onClose:c=>x(c),open:m,noOverFlow:!0,children:e.jsx(We,{studyCourse:u})})]})},tt=r=>{const[u,E]=s.useState(),[S,v]=s.useState([]),[I,F]=s.useState(0),[b,M]=s.useState(!0),[h,i]=s.useState(20),[y,p]=s.useState(""),[D]=g.useForm(),[A]=g.useForm(),[j,m]=s.useState(!1),[x,d]=s.useState(!1),[a,o]=s.useState(!1),[f,L]=s.useState(!1),P=t=>{E(t),d(!0)},K=t=>{E(t),o(!0)},ee=t=>{E(t),L(!0)},W=async t=>{v([t,...S]),A.resetFields(),m(!1)},te=async t=>{v(S.map(n=>n.id===t.id?t:n)),d(!1)},U=async(t,n)=>{const{data:C}=await q.custom({url:"",method:"post",meta:{operation:"publishUnpublishSchoolExamination",variables:{examinationId:{value:t,type:"Int",required:!0},published:{value:n,type:"Boolean",required:!0}},fields:["success","message"]}}).catch(z=>(console.error(z),l.error("Error occured while publishing/unpublishing Examination"),{data:null})).then(z=>z);C&&(C.success?(l.success(C.message),v(S.map(z=>(parseInt(z.id.toString())===parseInt(t.toString())&&(z.published=n),z)))):l.error(C.message))},Q=async t=>{const{data:n}=await q.custom({url:"",method:"post",meta:{operation:"deleteSchoolExamination",variables:{schoolExaminationId:{value:t,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(l.error("Error occured while deleting Examination"),{data:null})).then(C=>C);n&&(n.success?(l.success(n.message),v(S.filter(C=>C.id.toString()!==t.toString()))):l.error(n.message))},J=[{title:"Name",dataIndex:"name",fixed:!0,render:(t,n,C)=>e.jsx("span",{children:e.jsx("a",{children:n.name})})},{title:"Year",dataIndex:"year",fixed:!0,render:(t,n,C)=>e.jsx("span",{children:e.jsx("a",{children:n.year})})},{title:"Exam Type",dataIndex:"examinationType",fixed:!0,render:(t,n,C)=>e.jsx("span",{children:n.examinationType.name})},{title:"Start Date",dataIndex:"startDate",fixed:!0,render:(t,n,C)=>e.jsx("span",{children:de(n.startDate).format("YYYY-MM-DD")})},{title:"End Date",dataIndex:"endDate",fixed:!0,render:(t,n,C)=>e.jsx("span",{children:de(n.endDate).format("YYYY-MM-DD")})},{title:"Date Created",dataIndex:"created",render:(t,n,C)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(n.created).toLocaleString()})})},{title:"Published",dataIndex:"published",render:(t,n,C)=>e.jsx("a",{children:n!=null&&n.published?e.jsx("span",{style:{color:"green"},children:"Published"}):e.jsx("span",{style:{color:"red"},children:"Not Published"})})},{title:"Status",dataIndex:"isActive",render:(t,n,C)=>e.jsx("a",{children:n!=null&&n.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(t,n,C)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(be,{trigger:["click"],overlay:e.jsxs($,{children:[e.jsx($.Item,{icon:e.jsx(re,{style:{color:"red"}}),children:e.jsx(N,{placement:"topLeft",title:`Are you sure you want to delete ${n.name} Examination?`,onConfirm:()=>Q(parseInt(n.id)),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})}),e.jsx($.Item,{icon:n.published?e.jsx(Le,{style:{color:"red"}}):e.jsx(Ae,{style:{color:"green"}}),disabled:!n.canPublish,children:e.jsx(N,{placement:"topLeft",title:n.published?`Are you sure you want to unpublish ${n.name} Examination?`:`Are you sure you want to publish ${n.name} Examination?`,onConfirm:()=>U(parseInt(n.id),!n.published),disabled:!n.canPublish,okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:n.published?"Unpublish":"Publish"})})}),e.jsx($.Item,{icon:e.jsx(ke,{style:{color:"red"}}),disabled:!n.canEdit,onClick:()=>P(n),children:e.jsx("a",{rel:"noopener noreferrer",children:"Edit"})}),n.level==0&&e.jsx($.Item,{icon:e.jsx(ie,{style:{color:"red"}}),disabled:!n.canManage,onClick:()=>K(n),children:e.jsx("a",{rel:"noopener noreferrer",children:"Education Levels"})}),n.level==1&&e.jsx($.Item,{icon:e.jsx(ie,{style:{color:"red"}}),disabled:!n.canManage,onClick:()=>ee(n),children:e.jsx("a",{rel:"noopener noreferrer",children:"Study Courses"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:z=>z.preventDefault(),children:e.jsx(Te,{style:{color:"red",fontSize:28,fontWeight:"bold"}})})})})}],c=async(t,n="",C=20)=>{M(!0);const{data:z}=await q.custom({url:"",method:"get",meta:{operation:"schoolExaminations",variables:{page:{value:t,type:"Int",required:!0},key:{value:n,type:"String",required:!1},pageSize:{value:C,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","year","startDate","endDate",{school:["id","name"]},{examinationType:["id","name"]},"published","canPublish","level","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(l.error("Error occured while fetching Examinations"),{data:null})).then(ne=>ne);z&&(F(z.total),v([...z.results])),M(!1)};return s.useEffect(()=>{c(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(_,{style:{marginTop:10},children:[e.jsx(k,{span:12,children:e.jsx(g,{layout:"vertical",form:D,onFinish:t=>{p(t.key),S.length=0,c(1,t.key)},children:e.jsx(g.Item,{name:"key",children:e.jsx(O,{size:"large",placeholder:"Search ...",prefix:e.jsx(Y,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(k,{span:12,children:e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(B,{title:"Create Examination",children:e.jsx(T,{icon:e.jsx(V,{}),size:"large",onClick:()=>m(!0),danger:!0,children:"Add"})})})})]}),e.jsx(w,{loading:b,columns:J,dataSource:S,pagination:{onChange:(t,n)=>{i(n),c(t,y,n)},total:I,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(H,{title:"Creating Examination",open:j,onClose:t=>m(t),width:"50vw",children:e.jsx(Fe,{form:A,onFinish:W})}),e.jsx(H,{title:"Editting Examination",open:x,onClose:t=>d(t),width:"50vw",children:e.jsx(Ne,{onFinish:te,examination:u})}),e.jsx(H,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"green"},children:u==null?void 0:u.name}),e.jsx("span",{children:" Education Levels"})]}),open:a,onClose:t=>o(t),width:"80vw",children:e.jsx(qe,{schoolExamination:u,randKey:Math.random()})}),e.jsx(H,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"green"},children:u==null?void 0:u.name}),e.jsx("span",{children:" Study Courses"})]}),open:f,onClose:t=>L(t),width:"80vw",children:e.jsx(Ye,{schoolExamination:u,randKey:Math.random()})})]})};export{tt as S};
