import{r as o,aO as D,aY as e,cu as se,Q as ie,cY as Me,ak as ee,cm as W,aT as ge,aM as lt,aP as be,cZ as Ot,ao as N,cR as ct,a5 as Et,b_ as d,c_ as _t,c$ as ke,bZ as _,c7 as G,aI as O,cq as ue,aJ as Be,aS as B,aK as V,S as ae,c3 as Ce,d0 as dt,d1 as ut,d2 as Ze,b$ as qe,d3 as ht,aQ as Ft,bY as re,d4 as qt,d5 as Lt,cE as X,d6 as $e,d7 as Nt,d8 as At,d9 as Yt,c2 as zt,cF as Z,aV as ce,a6 as Re,aU as Vt,c9 as mt,cV as Wt,cI as Ut,da as ft,cP as Rt,c8 as Ht,db as Bt,bX as $t}from"./index-3b25761c.js";import{l as le}from"./index-1bad78d3.js";import{d as Gt,a as de,b as Jt,c as Ve}from"./data_objects-8a5fc783.js";import{C as xe,T as gt}from"./index-0bcbf38d.js";import{A as pt}from"./index-bba2b9d5.js";import{A as Le}from"./Alert-31134f7b.js";import{M as fe}from"./index-2ea61cd2.js";import{T as xt}from"./index-9cee797a.js";import{d as Ge,C as Je}from"./ckeditor-84a50c95.js";import{D as Qe}from"./index-0ffbf4a9.js";import{I as Pe}from"./index-55838eed.js";import{D as Xe}from"./index-a115c268.js";import{U as Qt}from"./index-e69daef3.js";import{I as Xt}from"./index-4364922b.js";import{C as Kt}from"./darasa_card-629f31e5.js";import{P as Ke}from"./index-6e5f775c.js";import{D as H}from"./index-dfcc642a.js";import{I as vt}from"./index.es-6293ff9d.js";import{t as et}from"./text_truncate-315d9efa.js";import{G as Zt}from"./index-57fa16be.js";import{S as He}from"./Skeleton-f7cf79cd.js";import{B as ea}from"./book_payment_form-3101c478.js";import{A as ta}from"./index-11d43e8c.js";import{E as aa}from"./edit_class_virtual_form-5f0c2c37.js";import{L as We}from"./index-086e93a6.js";const ra=n=>{const[t,a]=o.useState([]),[r,s]=o.useState(!0),[i,l]=o.useState(1),[u,h]=o.useState(0),[x,p]=o.useState(0),[g,y]=o.useState(24),[j,S]=o.useState(""),[P,F]=o.useState(!0),[z,T]=o.useState(!1),[c]=D.useForm(),v=async f=>{const{data:C}=await _.custom({url:"",method:"post",meta:{operation:"removeDarasaArchive",variables:{id:{value:f,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error removing from archive"),{data:null})).then(b=>b);C&&(C.success?(d.success(C.message),a(t.filter(b=>b.id!==f))):d.error(C.message)),fe.destroyAll()},L=f=>{fe.confirm({title:"Confirm",icon:e.jsx(ke,{}),content:"Removing Class From Archive ....",okText:"Restore",cancelText:"Cancel",onOk:()=>v(f)})},I=async(f,C=24,b="")=>{const{data:M}=await _.custom({url:"",method:"get",meta:{operation:"madarasaArchives",variables:{page:{value:f,type:"Int",required:!0},key:{value:b,type:"String",required:!1},pageSize:{value:C,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Gt}]}}).catch(Y=>(console.error(Y),d.error("Error fetching archives"),{data:null})).then(Y=>Y);M&&(h(M.total),l(M.page),p(M.pages),F(M.hasNext),T(M.hasPrev),a(M.results)),s(!1)};return o.useEffect(()=>{I(1)},[]),e.jsxs(e.Fragment,{children:[e.jsx(se,{container:!0,children:e.jsx(se,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6,children:e.jsx(D,{layout:"vertical",form:c,onFinish:f=>{l(0),I(0,g,f.key)},children:e.jsx(D.Item,{name:"key",children:e.jsx(ie,{size:"large",placeholder:"Search Classes Archives...",prefix:e.jsx(Me,{}),autoComplete:"off",allowClear:!0,disabled:r})})})})}),e.jsx(ee,{spinning:r,children:e.jsx(W,{children:t.length>0?e.jsx(se,{container:!0,children:t.map(f=>e.jsx(se,{item:!0,xs:12,sm:6,md:4,lg:4,children:e.jsxs(xe,{hoverable:f.isActive,style:{marginRight:10},children:[e.jsx(ge,{style:{right:0,position:"absolute"},children:e.jsx(lt,{trigger:["click"],overlay:e.jsx(be,{children:e.jsx(be.Item,{icon:e.jsx(Ot,{}),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>L(f.id),children:"Restore"})},"class-archive-"+f.id)}),overlayStyle:{zIndex:9999},children:e.jsx(N,{type:"link",size:"large",className:"ant-dropdown-link",onClick:C=>C.preventDefault(),style:{zIndex:1},children:e.jsx(ct,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx(Et.Ribbon,{text:f.darasa.code,placement:"start",color:"orange",children:e.jsx("a",{onClick:()=>{d("Drive To Connect")},children:e.jsxs(ge,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(pt,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(_t,{}),src:f.darasa.icon}),e.jsx("span",{style:{fontSize:20},children:f.darasa.name})]})})})]})}))}):e.jsx(Le,{severity:"info",sx:{fontSize:18},children:r?e.jsx(e.Fragment,{children:"Loading ..."}):e.jsx(e.Fragment,{children:"No Class Found in Archives"})})})}),(P||z)&&!r&&e.jsx(W,{children:e.jsx(le.Pagination,{showSizeChanger:!0,onShowSizeChange:(f,C)=>{l(f),y(C),I(f,C||g,j)},defaultCurrent:i,total:u,onChange:(f,C)=>{l(f),y(C||g),I(f,C||g,j)}})})]})},na=()=>(o.useEffect(()=>{document.title=G.system_name+": Classes Archives"},[]),e.jsxs(W,{children:[e.jsxs(O,{children:[e.jsx(O.Item,{children:e.jsx(ue,{to:"/oclass",children:"Home"})}),e.jsx(O.Item,{children:"Classes Archives"})]}),e.jsx(W,{sx:{mt:2},children:e.jsx(ra,{})})]})),{Title:Ie,Text:Oe}=xt,yt=n=>{const[t,a]=o.useState(),[r,s]=o.useState(!0),i=async l=>{const{data:u}=await _.custom({url:"",method:"get",meta:{operation:"darasa",variables:{id:{value:l,type:"Int",required:!0}},fields:de}}).catch(()=>(d.error("Error fetching darasa"),{data:null}));u&&a(u),s(!1)};return o.useEffect(()=>{i(n.id)},[n.id]),e.jsxs(ee,{spinning:r,children:[e.jsx(Ie,{level:5,children:"Class Name"}),e.jsx(Oe,{children:t==null?void 0:t.name}),e.jsx(Ie,{level:5,children:"Class Code"}),e.jsx(Oe,{children:t==null?void 0:t.code}),e.jsx(Ie,{level:5,children:"Class Description"}),e.jsx(Oe,{children:t==null?void 0:t.description}),e.jsx(Ie,{level:5,children:"Class Author"}),e.jsx(Oe,{children:t==null?void 0:t.user.profile.fullName})]})},sa=n=>{const[t,a]=o.useState(!1),[r,s]=o.useState(""),[i,l]=o.useState(""),[u,h]=o.useState(!1),[x,p]=o.useState(!1),[g,y]=o.useState([]),[j,S]=o.useState(null),[P,F]=o.useState(!1),z={name:"file",action:G.base_url+"/api/upload/file/class/cover",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},onChange(c){d.dismiss(),c.file.status==="uploading"&&(d.loading("Uploading file...",{duration:0}),h(!0)),c.file.status==="done"?(d.dismiss(),c.file.response.status?(d.success(c.file.response.message),l(c.file.response.cover)):d.error(c.file.response.message),h(!1)):c.file.status==="error"&&d.error(`${c.file.name} file upload failed.`)}},T=async(c,v=25,L="")=>{var f;F(!0);const{data:I}=await _.custom({url:"",method:"get",meta:{operation:"darasaGalleriesPool",variables:{page:{value:c,type:"Int",required:!0},pageSize:{value:v,type:"Int",required:!0}},fields:["data"]}}).catch(()=>(d.error("Error getting galleries"),{data:null})).then(C=>C);I&&y((f=I==null?void 0:I.data)==null?void 0:f.results),F(!1)};return o.useEffect(()=>{T(1)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{padding:20,backgroundColor:"white",borderRadius:5,boxShadow:"0 0 10px rgba(0,0,0,0.1)",maxHeight:"85vh",overflowY:"auto",overflowX:"hidden"},children:e.jsxs(D,{layout:"vertical",form:n.form,onFinish:c=>{c.payable=t,c.description=r,c.cover=i,n.onFinish(c)},requiredMark:!0,autoComplete:"off",children:[e.jsx(D.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Name is required"}],children:e.jsx(ie,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(Ge.CKEditor,{editor:Je,data:r,onReady:c=>{c.editing.view.change(v=>{v.setStyle("min-height","150px",c.editing.view.document.getRoot())})},onChange:(c,v)=>{const L=v.getData();s(L)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(D.Item,{name:"payable",children:e.jsx(Be,{onChange:c=>a(c.target.checked),children:"Payable"})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(D.Item,{name:"price",label:"Cost",initialValue:0,rules:[{required:t,type:"number",validator:(c,v)=>v<=0?Promise.reject("Price cannot be less than 0"):Promise.resolve()}],children:e.jsx(Pe,{size:"large",style:{width:"100%"},precision:2})}),e.jsxs(B,{children:[e.jsx(V,{span:8,children:e.jsx(D.Item,{name:"duration",label:"Duration",initialValue:1,wrapperCol:{span:24},rules:[{required:t,type:"number",message:"Please enter duration"}],children:e.jsx(Pe,{size:"large",style:{width:"100%"}})})}),e.jsx(V,{span:12,children:e.jsx(D.Item,{label:"Duration Type",name:"duration_type",wrapperCol:{span:12},initialValue:"months",rules:[{required:t,type:"string",message:"Please select duration type"}],children:e.jsxs(ae,{size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx(ae.Option,{value:"days",children:"Days"}),e.jsx(ae.Option,{value:"months",children:"Months"}),e.jsx(ae.Option,{value:"years",children:"Years"})]})})})]}),e.jsx(D.Item,{label:"Start Date",name:"start_date",rules:[{required:!0,type:"object",message:"Please select Start Date"}],children:e.jsx(Xe,{size:"large",style:{width:"50%"},disabledDate:c=>c.add(1,"day")<Ce().endOf("day"),popupStyle:{zIndex:9999}})})]}),e.jsx(D.Item,{name:"cover",label:e.jsxs(e.Fragment,{children:["Cover Image",e.jsx(N,{onClick:()=>{l(""),S(null)},style:{display:i.length>0?"block":"none"},type:"link",danger:!0,children:"Clear"})]}),children:e.jsxs(ge,{direction:"horizontal",children:[e.jsx(Qt,{...z,listType:"picture",className:"upload-list-inline",accept:"image/*",multiple:!1,onRemove:()=>{l("")},showUploadList:{showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!1},children:e.jsx(N,{icon:e.jsx(dt,{}),onClick:()=>{l(""),S(null)},children:"Click to Upload"})}),e.jsx(N,{icon:e.jsx(ut,{}),onClick:()=>{l(""),p(!0)},style:{display:i.length>0||u?"none":"block"},children:"Pick from Gallery"})]})}),j&&e.jsx(ge,{direction:"vertical",style:{marginTop:10},children:e.jsx(Xt,{width:200,src:j.url})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",disabled:i.length===0,children:"Save"})})]})}),e.jsx(Qe,{anchor:"right",title:"Gallery",open:x,onClose:()=>p(!1),width:"30vw",children:e.jsx("span",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",maxHeight:"85vh",overflowY:"auto"},children:e.jsx(le.Spin,{spinning:P,children:e.jsx(B,{children:g.map((c,v)=>e.jsx(V,{span:12,style:{marginBottom:10,padding:2},children:e.jsx(le.Card,{style:{padding:10,borderRadius:5,cursor:"pointer",backgroundImage:`url(${c.url})`,backgroundSize:"cover",backgroundPosition:"center",width:"100%",height:150},onClick:()=>{l(c.path),S(c),p(!1)}})},v))})})})})]})},ia=n=>{const[t,a]=o.useState(n.darasa.payable),[r,s]=o.useState(n.darasa.description),[i,l]=o.useState(""),[u,h]=o.useState(!1),[x,p]=o.useState(!1),[g,y]=o.useState([]),[j,S]=o.useState(null),[P,F]=o.useState(!1),z={name:"file",action:G.base_url+"/api/upload/file/class/cover",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},onChange(c){d.dismiss(),c.file.status==="uploading"&&(d.loading("Uploading file...",{duration:0}),h(!0)),c.file.status==="done"?(d.dismiss(),c.file.response.status?(d.success(c.file.response.message),l(c.file.response.cover)):d.error(c.file.response.message),h(!1)):c.file.status==="error"&&d.error(`${c.file.name} file upload failed.`)}},T=async(c,v=25,L="")=>{var f;F(!0);const{data:I}=await _.custom({url:"",method:"get",meta:{operation:"darasaGalleriesPool",variables:{page:{value:c,type:"Int",required:!0},pageSize:{value:v,type:"Int",required:!0}},fields:["data"]}}).catch(()=>(d.error("Error getting galleries"),{data:null})).then(C=>C);I&&y((f=I==null?void 0:I.data)==null?void 0:f.results),F(!1)};return o.useEffect(()=>{T(1)},[]),o.useEffect(()=>{n.form.setFieldsValue({name:n.darasa.name,description:n.darasa.description,payable:n.darasa.payable,price:n.darasa.price,duration:n.darasa.duration,duration_type:n.darasa.durationType,start_date:Ze(n.darasa.startDate),end_date:Ze(n.darasa.endDate),cover:n.darasa.cover})},[n.darasa,n.form]),e.jsxs("div",{style:{padding:20,backgroundColor:"white",borderRadius:5,boxShadow:"0 0 10px rgba(0,0,0,0.1)",maxHeight:"85vh",overflowY:"auto",overflowX:"hidden"},children:[e.jsxs(D,{layout:"vertical",form:n.form,onFinish:c=>{c.id=parseInt(n.darasa.id),c.payable=t,c.description=r,c.cover=i,n.onFinish(c)},requiredMark:!1,children:[e.jsx(D.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Name is required"}],children:e.jsx(ie,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(Ge.CKEditor,{editor:Je,data:r,onReady:c=>{c.editing.view.change(v=>{v.setStyle("min-height","150px",c.editing.view.document.getRoot())})},onChange:(c,v)=>{const L=v.getData();s(L)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(D.Item,{name:"payable",children:e.jsx(Be,{defaultChecked:t,onChange:c=>a(c.target.checked),children:"Payable"})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(D.Item,{name:"price",label:"Cost",initialValue:0,rules:[{required:t,type:"number",validator:(c,v)=>v<=0?Promise.reject("Price cannot be less than 0"):Promise.resolve()}],children:e.jsx(Pe,{size:"large",style:{width:"100%"},precision:2})}),e.jsxs(B,{children:[e.jsx(V,{span:8,children:e.jsx(D.Item,{name:"duration",label:"Duration",initialValue:1,wrapperCol:{span:24},rules:[{required:t,type:"number",message:"Please enter duration"}],children:e.jsx(Pe,{size:"large",style:{width:"100%"}})})}),e.jsx(V,{span:12,children:e.jsx(D.Item,{label:"Duration Type",name:"duration_type",wrapperCol:{span:12},initialValue:"months",rules:[{required:t,type:"string",message:"Please select duration type"}],children:e.jsxs(ae,{size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx(ae.Option,{value:"days",children:"Days"}),e.jsx(ae.Option,{value:"months",children:"Months"}),e.jsx(ae.Option,{value:"years",children:"Years"})]})})})]}),e.jsx(D.Item,{label:"Start Date",name:"start_date",rules:[{required:!0,type:"object",message:"Please select Start Date"}],children:e.jsx(Xe,{size:"large",style:{width:"50%"},disabledDate:c=>c.add(1,"day")<Ce().endOf("day"),popupStyle:{zIndex:9999}})})]}),e.jsx(D.Item,{name:"cover",label:e.jsxs(e.Fragment,{children:["Cover Image",e.jsx(N,{onClick:()=>{l(""),S(null)},style:{display:i.length>0?"block":"none"},type:"link",danger:!0,children:"Clear"})]}),children:e.jsxs(le.Space,{direction:"horizontal",children:[e.jsx(le.Upload,{...z,listType:"picture",className:"upload-list-inline",accept:"image/*",multiple:!1,onRemove:()=>{l("")},showUploadList:{showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!1},children:e.jsx(N,{icon:e.jsx(dt,{}),onClick:()=>{l(""),S(null)},children:"Click to Upload"})}),e.jsx(N,{icon:e.jsx(ut,{}),onClick:()=>{l(""),p(!0)},style:{display:i.length>0||u?"none":"block"},children:"Pick from Gallery"})]})}),j&&e.jsx(le.Space,{direction:"vertical",style:{marginTop:10},children:e.jsx(le.Image,{width:200,src:j.url})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]}),e.jsx(Qe,{anchor:"right",title:"Gallery",open:x,onClose:()=>p(!1),width:"30vw",children:e.jsx("span",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",maxHeight:"85vh",overflowY:"auto"},children:e.jsx(ee,{spinning:P,children:e.jsx(B,{children:g.map((c,v)=>e.jsx(V,{span:12,style:{marginBottom:10,padding:2},children:e.jsx(le.Card,{style:{padding:10,borderRadius:5,cursor:"pointer",backgroundImage:`url(${c.url})`,backgroundSize:"cover",backgroundPosition:"center",width:"100%",height:150},onClick:()=>{l(c.path),S(c),p(!1)}})},v))})})})})]})},{Paragraph:oa}=xt,Ne=n=>{const[t,a]=o.useState(!1),[r,s]=o.useState([]),[i,l]=o.useState(),[u,h]=o.useState(),[x,p]=o.useState(!0),[g,y]=o.useState(1),[j,S]=o.useState(0),[P,F]=o.useState(24),[z,T]=o.useState(!0),[c,v]=o.useState(!1),[L]=D.useForm(),[I,f]=o.useState(!1),[C,b]=o.useState(!1);qe();const[M]=D.useForm(),[Y,K]=o.useState(!1),[we,ve]=o.useState(!1),U=m=>{l(m),ve(!0)},J=m=>{l(m),b(!0)},te=m=>{h(m),K(!0)},Ye=async m=>{const{data:k}=await _.custom({url:"",method:"post",meta:{operation:"connectClass",variables:{id:{value:m,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error connecting darasa"),{data:null})).then(A=>A);k&&(k.success?(K(!1),h(null),d(k.message),s(r.filter(A=>A.id!==m))):d.error(k.message))},w=async m=>{const{data:k}=await _.custom({url:"",method:"post",meta:{operation:"addDarasaArchive",variables:{id:{value:m,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error adding darasa to archive"),{data:null})).then(A=>A);k&&(k.success?(d.success(k.message),s(r.filter(A=>A.id!==m))):d.error(k.message)),fe.destroyAll()},E=m=>{fe.confirm({title:"Confirm",icon:e.jsx(ke,{}),content:"Adding Class To Archive ....",okText:"Add",cancelText:"Cancel",onOk:()=>w(m)})},R=async m=>{const{data:k}=await _.custom({url:"",method:"post",meta:{operation:"createDarasa",variables:{name:{value:m.name,type:"String",required:!0},description:{value:m.description,type:"String",required:!0},payable:{value:m.payable,type:"Boolean",required:!1},price:{value:m.price,type:"Float",required:!1},duration:{value:m.duration,type:"Int",required:!1},durationType:{value:m.duration_type,type:"String",required:!1},startDate:{value:m.start_date,type:"String",required:!1},cover:{value:m.cover,type:"String",required:!1}},fields:["success","message",{darasa:de}]}}).catch(()=>(d.error("Error creating darasa"),{data:null})).then(A=>A);k&&(k.success?(d.success(k.message),f(!1),s([k.darasa,...r])):d.error(k.message))},he=async m=>{const{data:k}=await _.custom({url:"",method:"post",meta:{operation:"updateDarasa",variables:{id:{value:m.id,type:"Int",required:!0},name:{value:m.name,type:"String",required:!0},description:{value:m.description,type:"String",required:!0},payable:{value:m.payable,type:"Boolean",required:!1},price:{value:m.price,type:"Float",required:!1},duration:{value:m.duration,type:"Int",required:!1},durationType:{value:m.duration_type,type:"String",required:!1},startDate:{value:m.start_date,type:"String",required:!1},cover:{value:m.cover,type:"String",required:!1}},fields:["success","message",{darasa:de}]}}).catch(()=>(d.error("Error updating darasa"),{data:null})).then(A=>A);k&&(k.success?(d.success(k.message),b(!1),s(r.map(A=>A.id.toString()===m.id.toString()?k.darasa:A))):d.error(k.message))},ze=()=>{M.resetFields(),f(!0)},Dt=async m=>{const{data:k}=await _.custom({url:"",method:"post",meta:{operation:"disconnectClass",variables:{classId:{value:m,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error disconnecting darasa"),{data:null})).then(A=>A);k&&(k.success?(d.success(k.message),s(r.filter(A=>A.id!==m))):d.error(k.message))},kt=m=>{fe.confirm({title:"Disconnecting Class",icon:e.jsx(ke,{}),content:"Are you sure ...",okText:"Disconnect",cancelText:"Cancel",onOk:()=>Dt(m)})},Pt=async m=>{const{data:k}=await _.custom({url:"",method:"post",meta:{operation:"deleteDarasa",variables:{id:{value:m,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error deleting darasa"),{data:null})).then(A=>A);k&&(k.success?(d.success(k.message),s(r.filter(A=>A.id!==m))):d.error(k.message))},Mt=m=>{fe.confirm({title:"Deleting Class",icon:e.jsx(ke,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>Pt(m)})},Te=async(m,k=24,A="")=>{p(!0);const{data:ye}=await _.custom({url:"",method:"get",meta:{operation:"myMadarasa",variables:{page:{value:m,type:"Int",required:!0},key:{value:A,type:"String",required:!1},pageSize:{value:k,type:"Int",required:!0},where:{value:{mode:n.mode},type:"JSON",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:de}]}}).catch(()=>(d.error("Error getting darasas"),{data:null})).then(It=>It);ye&&(S(ye.total),y(ye.page),T(ye.hasNext),v(ye.hasPrev),s(ye.results)),p(!1)},Tt=async()=>{const{data:m}=await _.custom({url:"",method:"get",meta:{operation:"darasaAuth",variables:{},fields:["auth"]}}).catch(()=>(d.error("Error getting darasa auth"),{data:null})).then(k=>k);m&&a(m.auth.create_classes)};return o.useEffect(()=>(Tt(),Te(1),document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),e.jsxs(e.Fragment,{children:[e.jsxs(se,{container:!0,children:[e.jsx(se,{item:!0,xs:12,sm:6,md:4,lg:4,children:e.jsx(D,{layout:"vertical",form:L,onFinish:m=>{y(1),Te(1,P,m.key)},children:e.jsx(D.Item,{name:"key",children:e.jsx(ie,{size:"large",placeholder:"Search Classes...",prefix:e.jsx(Me,{}),autoComplete:"off",allowClear:!0,disabled:x})})})}),e.jsx(se,{item:!0,xs:12,sm:6,md:8,lg:8,sx:{display:"flex",justifyContent:"flex-end",paddingBottom:{xs:2,sm:0,md:0,lg:0}},children:n.mode!=="connect"&&e.jsx(N,{size:"large",icon:e.jsx(ht,{}),onClick:()=>ze(),disabled:!t||x,children:"Create Class"})})]}),e.jsx("div",{style:{maxHeight:"78vh",minHeight:"78vh",overflow:"auto"},children:e.jsx(ee,{spinning:x,children:r.length>0?e.jsx(se,{container:!0,children:r.map(m=>e.jsx(se,{item:!0,xs:12,sm:6,md:4,lg:4,children:e.jsx(Kt,{darasa:m,size:"large",showEditModal:J,showModalDarasaConnect:te,handleDarasaDisconnect:kt,handleDarasaDelete:Mt,handleAddingToArchive:E,handleShareModal:U},m.id)},m.id))}):e.jsx(Le,{severity:"info",sx:{fontSize:18},children:x?e.jsx(e.Fragment,{children:"Loading ..."}):e.jsx(e.Fragment,{children:"No Classes Found"})})})}),!x&&e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(Ft,{showSizeChanger:!0,onShowSizeChange:(m,k)=>{y(m),F(k),Te(m,k)},defaultCurrent:g,total:j,onChange:(m,k)=>{y(m),F(k||P),Te(m,k||P)}})}),e.jsx(re,{title:"Creating Class",open:I,destroyOnClose:!0,width:"40vw",onClose:m=>f(m),children:e.jsx(sa,{form:M,onFinish:R})}),e.jsx(re,{title:"Editting Class",width:"40vw",open:C,onClose:m=>b(m),children:e.jsx(ia,{darasa:i,form:M,onFinish:he})}),e.jsx(re,{title:"Connecting "+(u==null?void 0:u.name),open:Y,onClose:m=>K(m),children:e.jsxs(e.Fragment,{children:[e.jsx(yt,{id:u==null?void 0:u.id}),e.jsx(N,{onClick:()=>Ye(u==null?void 0:u.id),style:{position:"absolute",bottom:0,right:0,margin:10},children:"Connect"})]})}),e.jsx(re,{title:"Share Class",open:we,width:"40vw",onClose:m=>ve(m),children:e.jsx(xe,{title:"Click Copy icon to copy share link",children:e.jsx(oa,{copyable:{icon:[e.jsx(qt,{},"copy-icon"),e.jsx(Lt,{},"copied-icon")],tooltips:["click here","you clicked!!"],onCopy:()=>{d.success("Link Successfully Copied")}},style:{textAlign:"center",fontSize:20},children:G.site_url+"/oclass/class/session/"+(i==null?void 0:i.id)+"/"+(i==null?void 0:i.code)})})})]})},la=()=>(o.useEffect(()=>{document.title=G.system_name+": Classes"},[]),e.jsxs(W,{children:[e.jsxs(O,{children:[e.jsx(O.Item,{children:e.jsx(ue,{to:"/oclass",children:"Home"})}),e.jsx(O.Item,{children:"Connect Classes"})]}),e.jsx(W,{sx:{mt:2},children:e.jsx(Ne,{mode:"connect"})})]})),ca=()=>(o.useEffect(()=>{document.title=G.system_name+": Classes"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(O,{children:[e.jsx(O.Item,{children:e.jsx(ue,{to:"/oclass",children:"Home"})}),e.jsx(O.Item,{children:"Classes"})]}),e.jsx(W,{sx:{mt:2},children:e.jsx(Ne,{mode:"all"})})]})),{TabPane:Q}=gt,da=o.lazy(()=>X(()=>import("./class_announcements-c5db0709.js"),["assets/class_announcements-c5db0709.js","assets/index-3b25761c.js","assets/index-5e5904d3.css","assets/ckeditor-84a50c95.js","assets/ckeditor-a633987d.js","assets/text_truncate-315d9efa.js","assets/data_objects-8a5fc783.js","assets/data_objects-ddf513ee.js","assets/index-086e93a6.js","assets/index-2ea61cd2.js","assets/InfoCircleFilled-28f92d26.js","assets/ActionButton-4004263b.js","assets/DialogWrap-c72cf114.js","assets/index-6faacfa0.js","assets/fade-4de01c07.js"]).then(n=>({default:n.ClassAnnouncements}))),ua=o.lazy(()=>X(()=>import("./class_drives-746883e9.js"),["assets/class_drives-746883e9.js","assets/index-3b25761c.js","assets/index-5e5904d3.css","assets/data_objects-ddf513ee.js","assets/data_objects-8a5fc783.js","assets/Skeleton-f7cf79cd.js","assets/index-086e93a6.js","assets/index-6e5f775c.js","assets/index-3c7b2ccc.js","assets/ActionButton-4004263b.js","assets/index-9cee797a.js","assets/transButton-cd447730.js","assets/index-22d44a8b.js","assets/index-0bcbf38d.js","assets/index-bba2b9d5.js","assets/Alert-31134f7b.js","assets/index-2ea61cd2.js","assets/InfoCircleFilled-28f92d26.js","assets/DialogWrap-c72cf114.js","assets/index-6faacfa0.js","assets/fade-4de01c07.js"]).then(n=>({default:n.ClassDrives}))),ha=o.lazy(()=>X(()=>import("./class_assignments-1d9d28fb.js"),["assets/class_assignments-1d9d28fb.js","assets/index-3b25761c.js","assets/index-5e5904d3.css","assets/edit_assignment-dd4a82d3.js","assets/data_objects-8a5fc783.js","assets/data_objects-ddf513ee.js","assets/index-086e93a6.js","assets/index-bba2b9d5.js","assets/index-3c7b2ccc.js","assets/index-5f714100.js","assets/InfoCircleFilled-28f92d26.js","assets/index-e69daef3.js","assets/Upload-42d17e48.js","assets/fade-4de01c07.js","assets/index-2ea61cd2.js","assets/ActionButton-4004263b.js","assets/DialogWrap-c72cf114.js","assets/index-6faacfa0.js","assets/ckeditor-a633987d.js","assets/ckeditor-84a50c95.js","assets/index-a115c268.js","assets/index-d42cc587.js","assets/index-be032cea.js","assets/localeData-323d4f89.js","assets/SinglePicker-45749b9c.js"]).then(n=>({default:n.ClassAssignments}))),ma=o.lazy(()=>X(()=>import("./class_files-603aabb4.js"),["assets/class_files-603aabb4.js","assets/index-3b25761c.js","assets/index-5e5904d3.css","assets/file_item_component-8a5ca4ae.js","assets/index-80a795f5.js","assets/defineProperty-617dcc0b.js","assets/index-0ffbf4a9.js","assets/data_objects-ddf513ee.js","assets/index-57fa16be.js","assets/index-0bcbf38d.js","assets/Skeleton-f7cf79cd.js","assets/index-6e5f775c.js","assets/index-3c7b2ccc.js","assets/ActionButton-4004263b.js","assets/index-9cee797a.js","assets/transButton-cd447730.js","assets/index-22d44a8b.js","assets/index.esm-fcd1caf1.js","assets/iconBase-bda8ed31.js","assets/index-086e93a6.js","assets/index-bba2b9d5.js","assets/index-4364922b.js","assets/Image-0014e045.js","assets/DialogWrap-c72cf114.js","assets/index-6faacfa0.js","assets/fade-4de01c07.js","assets/file_item_component-3ade1005.css"]).then(n=>({default:n.ClassFiles}))),fa=o.lazy(()=>X(()=>import("./class_resources_links-7e7cd63c.js"),["assets/class_resources_links-7e7cd63c.js","assets/index-3b25761c.js","assets/index-5e5904d3.css","assets/data_objects-8a5fc783.js","assets/data_objects-ddf513ee.js","assets/index-086e93a6.js","assets/index-2ea61cd2.js","assets/InfoCircleFilled-28f92d26.js","assets/ActionButton-4004263b.js","assets/DialogWrap-c72cf114.js","assets/index-6faacfa0.js","assets/fade-4de01c07.js"]).then(n=>({default:n.ClassResurcesLinks}))),ga=o.lazy(()=>X(()=>import("./class_students-04042a18.js"),["assets/class_students-04042a18.js","assets/index-3b25761c.js","assets/index-5e5904d3.css","assets/data_objects-8a5fc783.js","assets/data_objects-ddf513ee.js","assets/Skeleton-f7cf79cd.js","assets/index-086e93a6.js","assets/index-6e5f775c.js","assets/index-3c7b2ccc.js","assets/ActionButton-4004263b.js","assets/index-bba2b9d5.js","assets/index-9cee797a.js","assets/transButton-cd447730.js","assets/index-22d44a8b.js","assets/index-0bcbf38d.js","assets/Alert-31134f7b.js","assets/index-2ea61cd2.js","assets/InfoCircleFilled-28f92d26.js","assets/DialogWrap-c72cf114.js","assets/index-6faacfa0.js","assets/fade-4de01c07.js"]).then(n=>({default:n.ClassStudents}))),pa=o.lazy(()=>X(()=>import("./class_videos-72491247.js"),["assets/class_videos-72491247.js","assets/index-3b25761c.js","assets/index-5e5904d3.css","assets/data_objects-8a5fc783.js","assets/data_objects-ddf513ee.js","assets/ckeditor-84a50c95.js","assets/index-e69daef3.js","assets/Upload-42d17e48.js","assets/fade-4de01c07.js","assets/index-80a795f5.js","assets/defineProperty-617dcc0b.js","assets/index-0ffbf4a9.js","assets/index-1bad78d3.js","assets/useNotification-beaad861.js","assets/DialogWrap-c72cf114.js","assets/index-be032cea.js","assets/localeData-323d4f89.js","assets/SinglePicker-45749b9c.js","assets/index-0bcbf38d.js","assets/Skeleton-f7cf79cd.js","assets/useMutateObserver-0dc1868a.js","assets/index-145766ec.js","assets/InputNumber-9a89f098.js","assets/Image-0014e045.js","assets/index-fec725b3.js","assets/index-22d44a8b.js","assets/Alert-31134f7b.js","assets/index-2ea61cd2.js","assets/InfoCircleFilled-28f92d26.js","assets/ActionButton-4004263b.js","assets/index-6faacfa0.js"]).then(n=>({default:n.ClassVideos}))),xa=o.lazy(()=>X(()=>import("./class_virtual_session-be1a2a64.js"),["assets/class_virtual_session-be1a2a64.js","assets/index-3b25761c.js","assets/index-5e5904d3.css","assets/ckeditor-84a50c95.js","assets/index-a115c268.js","assets/index-d42cc587.js","assets/index-be032cea.js","assets/localeData-323d4f89.js","assets/SinglePicker-45749b9c.js","assets/index-55838eed.js","assets/InputNumber-9a89f098.js","assets/edit_class_virtual_form-5f0c2c37.js","assets/ckeditor-a633987d.js","assets/data_objects-8a5fc783.js","assets/data_objects-ddf513ee.js","assets/index-086e93a6.js","assets/index-0bcbf38d.js","assets/Skeleton-f7cf79cd.js","assets/index-bba2b9d5.js","assets/index-3c7b2ccc.js","assets/index-2ea61cd2.js","assets/InfoCircleFilled-28f92d26.js","assets/ActionButton-4004263b.js","assets/DialogWrap-c72cf114.js","assets/index-6faacfa0.js","assets/fade-4de01c07.js","assets/index-1bad78d3.js","assets/defineProperty-617dcc0b.js","assets/useNotification-beaad861.js","assets/useMutateObserver-0dc1868a.js","assets/index-145766ec.js","assets/Image-0014e045.js","assets/Upload-42d17e48.js","assets/index-fec725b3.js","assets/index-22d44a8b.js","assets/Alert-31134f7b.js","assets/index-9cee797a.js","assets/transButton-cd447730.js","assets/index-0ffbf4a9.js","assets/index-e69daef3.js","assets/index-4364922b.js","assets/darasa_card-629f31e5.js","assets/remove_html_tags-be9c976e.js","assets/index-6e5f775c.js","assets/index-dfcc642a.js","assets/index.es-6293ff9d.js","assets/text_truncate-315d9efa.js","assets/index-57fa16be.js","assets/book_payment_form-3101c478.js","assets/index-5f714100.js","assets/index-11d43e8c.js"]).then(n=>({default:n.ClassVirtualSessions}))),va=o.lazy(()=>X(()=>import("./feeds-53e05446.js"),["assets/feeds-53e05446.js","assets/index-3b25761c.js","assets/index-5e5904d3.css","assets/index.es-6293ff9d.js","assets/ckeditor-84a50c95.js","assets/data_objects-8a5fc783.js","assets/data_objects-ddf513ee.js","assets/index-086e93a6.js","assets/index-6e5f775c.js","assets/index-3c7b2ccc.js","assets/ActionButton-4004263b.js","assets/index-bba2b9d5.js","assets/index-4364922b.js","assets/Image-0014e045.js","assets/DialogWrap-c72cf114.js","assets/index-6faacfa0.js","assets/fade-4de01c07.js","assets/index-ace72789.js","assets/index-e69daef3.js","assets/Upload-42d17e48.js","assets/index-0ffbf4a9.js","assets/index-9cee797a.js","assets/transButton-cd447730.js","assets/index-22d44a8b.js","assets/index-2ea61cd2.js","assets/InfoCircleFilled-28f92d26.js","assets/feeds-eb3240d6.css"]).then(n=>({default:n.PostsComponent}))),ya=o.lazy(()=>X(()=>import("./class_topics-9747a2ef.js"),["assets/class_topics-9747a2ef.js","assets/index-3b25761c.js","assets/index-5e5904d3.css","assets/ckeditor-84a50c95.js","assets/data_objects-8a5fc783.js","assets/data_objects-ddf513ee.js","assets/index-a115c268.js","assets/index-d42cc587.js","assets/index-be032cea.js","assets/localeData-323d4f89.js","assets/SinglePicker-45749b9c.js","assets/index-55838eed.js","assets/InputNumber-9a89f098.js","assets/iconBase-bda8ed31.js","assets/index-57fa16be.js","assets/index-0bcbf38d.js","assets/Skeleton-f7cf79cd.js","assets/Collapse-07ebfd39.js","assets/index-145766ec.js","assets/index-2ea61cd2.js","assets/InfoCircleFilled-28f92d26.js","assets/ActionButton-4004263b.js","assets/DialogWrap-c72cf114.js","assets/index-6faacfa0.js","assets/fade-4de01c07.js"]).then(n=>({default:n.ClassTopics}))),ja=o.lazy(()=>X(()=>import("./class_payments-ec2c44fc.js"),["assets/class_payments-ec2c44fc.js","assets/index-3b25761c.js","assets/index-5e5904d3.css","assets/data_objects-8a5fc783.js","assets/data_objects-ddf513ee.js","assets/Skeleton-f7cf79cd.js","assets/index-086e93a6.js","assets/index-bba2b9d5.js","assets/index-3c7b2ccc.js"]).then(n=>({default:n.ClassPayments}))),ba=o.lazy(()=>X(()=>import("./class_disbursements-282d0364.js"),["assets/class_disbursements-282d0364.js","assets/index-3b25761c.js","assets/index-5e5904d3.css","assets/data_objects-8a5fc783.js","assets/data_objects-ddf513ee.js","assets/index-0ffbf4a9.js","assets/index-c6ffd5c1.js","assets/Skeleton-f7cf79cd.js","assets/index-086e93a6.js","assets/index-bba2b9d5.js","assets/index-3c7b2ccc.js"]).then(n=>({default:n.ClassDisbursement}))),Ca=n=>{const[t,a]=o.useState(),[r,s]=o.useState(!0),[i,l]=o.useState("1"),{push:u}=qe(),h=$e(),x=async(g,y)=>{const{data:j}=await _.custom({url:"",method:"post",meta:{operation:"publishDarasa",variables:{id:{value:parseInt(g.toString()),type:"Int",required:!0},publish:{value:y,type:"Boolean",required:!0}},fields:["success","message",{darasa:de}]}}).catch(()=>(d.remove(),d.error("Error publishing class"),{data:null})).then(S=>S);d.remove(),j&&j.success?(a(j.darasa),d.success(j.message)):d.error(j.message)},p=async g=>{const{data:y}=await _.custom({url:"",method:"get",meta:{operation:"darasa",variables:{id:{value:parseInt(g.toString()),type:"Int",required:!0}},fields:de}}).catch(()=>(d.error("Error fetching darasa"),{data:null})).then(j=>j);y&&(a(y),s(!1))};return o.useEffect(()=>{p(h.id),localStorage.getItem("currentClass")===h.id.toString()?l(localStorage.getItem("classCurrentTabIndex")??"1"):(localStorage.setItem("currentClass",h.id.toString()),l("1"))},[h.id]),e.jsx(e.Fragment,{children:e.jsxs(ee,{spinning:r,children:[e.jsx("div",{style:{marginTop:5,marginBottom:5},children:e.jsxs(O,{children:[e.jsx(O.Item,{children:e.jsx("a",{onClick:()=>u("/oclass"),children:"Home"})}),e.jsx(O.Item,{children:e.jsx("a",{onClick:()=>u("/oclass"),children:"Classes"})}),e.jsxs(O.Item,{children:["Class Session",e.jsx(Nt,{}),t!=null&&t.name?e.jsxs("span",{style:{color:"orange"},children:[t==null?void 0:t.name," - ","{"+(t==null?void 0:t.code)+"}"]}):e.jsx(e.Fragment,{})]})]})}),(t==null?void 0:t.isBlocked)&&e.jsx(Le,{severity:"warning",sx:{fontSize:18},children:"You have been blocked from this class, please contact the class owner for more information."}),!(t!=null&&t.isBlocked)&&e.jsx("div",{style:{marginTop:10,background:"white",padding:10},children:e.jsxs(gt,{type:"card",tabBarExtraContent:e.jsxs(e.Fragment,{children:[(t==null?void 0:t.canManage)&&e.jsx(Ke,{title:e.jsx(W,{sx:{fontSize:20},children:t!=null&&t.published?"Are you sure you want to unpublish this class?":"Are you sure you want to publish this class?"}),description:e.jsx(W,{sx:{fontSize:18,width:"20vw"},children:t!=null&&t.published?"This class will be unpublished and students will not be able to see it. and it will be unlisted from Market Place":"This class will be published and students will be able to see it. And it will be listed in Market Place"}),onConfirm:()=>{console.log("publishing class"),x(t==null?void 0:t.id,!(t!=null&&t.published))},okText:t!=null&&t.published?"Yes, Unpublish":"Yes, Publish",cancelText:"No",children:e.jsx(N,{icon:t!=null&&t.published?e.jsx(At,{}):e.jsx(Yt,{}),disabled:!(t!=null&&t.canManage),children:t!=null&&t.published?"Unpublish":"Publish"})}),e.jsx(N,{icon:e.jsx(zt,{}),disabled:!(t!=null&&t.canManage),children:"Configs"})]}),activeKey:i,onTabClick:g=>{l(g.toString()),localStorage.setItem("classCurrentTabIndex",g)},children:[e.jsx(Q,{tab:"Class Feeds",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(va,{id:h.id,canManage:t==null?void 0:t.canManage})})},"1"),e.jsx(Q,{tab:"Files",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(ma,{id:h.id,canManage:t==null?void 0:t.canManage})})},"2"),e.jsx(Q,{tab:"Connected Drives",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(ua,{id:h.id,canManage:t==null?void 0:t.canManage})})},"3"),e.jsx(Q,{tab:"Topics",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(ya,{id:h.id,canManage:t==null?void 0:t.canManage})})},"12"),e.jsx(Q,{tab:"Resources Links",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(fa,{id:h.id,canManage:t==null?void 0:t.canManage})})},"4"),e.jsx(Q,{tab:"Videos",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(pa,{id:h.id,canManage:t==null?void 0:t.canManage})})},"5"),e.jsx(Q,{tab:"Virtual Sessions",disabled:!1,children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(xa,{id:h.id,canManage:t==null?void 0:t.canManage})})},"6"),e.jsx(Q,{tab:"Assignments",disabled:!1,children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(ha,{id:h.id,canManage:t==null?void 0:t.canManage})})},"7"),e.jsx(Q,{tab:"Announcements",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(da,{id:h.id,canManage:t==null?void 0:t.canManage})})},"8"),e.jsx(Q,{tab:"Students",children:e.jsx(ga,{id:h.id,canManage:t==null?void 0:t.canManage})},"9"),(t==null?void 0:t.payable)&&(t==null?void 0:t.canManage)&&e.jsxs(e.Fragment,{children:[e.jsx(Q,{tab:"Payments",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(ja,{id:h.id,canManage:t==null?void 0:t.canManage})})},"10"),e.jsx(Q,{tab:"Disbursements",children:e.jsx(o.Suspense,{fallback:e.jsx(Z,{}),children:e.jsx(ba,{id:h.id,canManage:t==null?void 0:t.canManage})})},"11")]})]})})]})})},jt=n=>{const[t,a]=o.useState(!1),[r,s]=o.useState(!1),[i,l]=o.useState(""),[u,h]=o.useState([]),[x,p]=o.useState(""),[g]=D.useForm(),[y,j]=o.useState(!1),S=async T=>{const{data:c}=await _.custom({url:"",method:"post",meta:{operation:"createDarasaOrder",variables:{darasaId:{value:parseInt(T.darasa_id.toString()),type:"Int",required:!0},phone:{value:T.phone,type:"String",required:!0}},fields:["success","message"]}}).catch(v=>(console.error(v),d.remove(),d.error("Error Creating Darasa Order"),{data:null})).then(v=>v);console.log(c),c&&(c.success?(j(!0),d.success(c.message)):(j(!1),d.error(c.message)))},P=async()=>{const{data:T}=await _.custom({url:"",method:"get",meta:{operation:"paymentSupportedTelecomCarriers",variables:{},fields:[{results:["id","name"]}]}}).catch(()=>(d.remove(),d.error("Error getting supported carriers"),{data:null})).then(c=>c);if(T){const c=T.results,v=[];c.forEach(L=>{v.push(L.name)}),h(v)}},F=async T=>{a(!0);const{data:c}=await _.custom({url:"",method:"post",meta:{operation:"validateMobilePhoneNumber",variables:{phone:{value:T,type:"String",required:!0}},fields:["success","message","carrier","formattedPhone"]}}).catch(()=>(d.remove(),d.error("Error Validating Mobile Phone Number"),{data:null})).then(v=>v);return c&&(s(c.success),c.success||(l(c.message),p(c.carrier))),a(!1),c},z=()=>e.jsxs("div",{children:[e.jsxs(H,{title:"",column:1,children:[e.jsx(H.Item,{label:"Class Name",children:n.darasa.name}),e.jsx(H.Item,{label:"Class Code",children:n.darasa.code}),e.jsx(H.Item,{label:"Cost",children:e.jsxs("span",{style:{fontSize:22},children:[n.darasa.price.toLocaleString(),"/= Tsh"]})})]}),e.jsxs(D,{layout:"vertical",form:g,requiredMark:!0,autoComplete:"off",onFinish:async T=>{console.log(T),T.darasa_id=n.darasa.id,S(T)},children:[e.jsx(D.Item,{name:"phone",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Mobile Phone Number"}),x.length>0&&e.jsx(ce,{color:"green",style:{marginLeft:10},children:x}),t&&e.jsx(ee,{spinning:t})]}),rules:[{required:!0,type:"string",message:"Required"},{validator:async(T,c)=>{if(c.length>=10){if(!t){const v=await F(c).then(L=>L);if(v!=null&&v.success)p(v.carrier),s(!0);else return p(""),Promise.reject(v==null?void 0:v.message)}}else s(!1)}}],children:e.jsx(ie,{size:"large",placeholder:"Mobile Phone Number ..."})}),u.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{children:"Supported Payment Merchants"}),e.jsx("span",{children:u.map(T=>e.jsx(ce,{color:"red",children:T}))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",disabled:!r,children:"Pay"})})]})]});return o.useEffect(()=>{P()},[n.randKey]),y?e.jsx(e.Fragment,{children:e.jsx("h2",{children:"Payment Request Sent, Please check your phone and confirm the payment to proceed"})}):z()},wa=()=>{const[n,t]=o.useState(!0),[a,r]=o.useState(!1),[s,i]=o.useState(),[l,u]=o.useState(!1),h=$e(),x=async g=>{t(!0);const{data:y}=await _.custom({url:"",method:"post",meta:{operation:"checkDarasaConnected",variables:{id:{value:parseInt(g.toString()),type:"Int",required:!0}},fields:["success","message",{darasa:de}]}}).catch(()=>({data:null})).then(j=>j);t(!1),y&&(r(y.success),i(y.darasa))},p=async g=>{const{data:y}=await _.custom({url:"",method:"post",meta:{operation:"connectDarasa",variables:{id:{value:parseInt(g.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>({data:null})).then(j=>j);y?(r(y.success),i(y.darasa),d.success(y.message),y.success&&x(h.id)):d.error(y.message)};return o.useEffect(()=>{document.title=G.system_name+": Class Session",x(h.id)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginTop:0},children:[n&&e.jsx(e.Fragment,{children:e.jsx(B,{children:e.jsx(V,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(ee,{tip:"Checking Connection",size:"large",style:{color:"red"},children:e.jsx("div",{className:"content",style:{height:"50vh",width:"100vh"}})})})})}),a&&e.jsx(Ca,{}),!a&&!n&&e.jsxs(e.Fragment,{children:[e.jsx(xe,{children:e.jsxs(H,{title:"Class Info's",children:[e.jsx(H.Item,{label:"Class Name/Title",children:s==null?void 0:s.name}),e.jsx(H.Item,{label:"Class Code",children:s==null?void 0:s.code}),e.jsx(H.Item,{label:"Created By",children:e.jsx("a",{children:s==null?void 0:s.user.fullName})}),(s==null?void 0:s.startDate)&&e.jsx(H.Item,{label:"Start Date",children:Ce(s==null?void 0:s.startDate).format("YYYY-MM-DD")}),(s==null?void 0:s.endDate)&&e.jsx(H.Item,{label:"End Date",children:Ce(s==null?void 0:s.endDate).format("YYYY-MM-DD")}),(s==null?void 0:s.payable)&&e.jsxs(H.Item,{label:"Price",children:[s==null?void 0:s.price.toLocaleString(),"/= Tsh"]})]})}),e.jsx(B,{children:e.jsxs(V,{span:24,style:{display:"flex",justifyContent:"center"},children:[(s==null?void 0:s.payable)&&e.jsx(N,{size:"large",onClick:()=>u(!0),children:"Pay for This Class"}),!(s!=null&&s.payable)&&e.jsx(Ke,{title:"Are you sure to Connect/Join to this Class",onConfirm:()=>p(h.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{size:"large",children:"Connect/Join"})})]})})]})]}),e.jsx(re,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Purchasing"}),e.jsx("span",{style:{marginLeft:10,fontWeight:"bolder"},children:s==null?void 0:s.name})]}),width:"35vw",open:l,onClose:g=>u(g),children:e.jsx(jt,{darasa:s,randKey:Math.random()})})]})},Sa=()=>(o.useEffect(()=>{document.title=G.system_name+": Connected Classes"},[]),e.jsxs(W,{children:[e.jsxs(O,{children:[e.jsx(O.Item,{children:e.jsx(ue,{to:"/oclass",children:"Home"})}),e.jsx(O.Item,{children:"Connected Classes"})]}),e.jsx(W,{sx:{mt:2},children:e.jsx(Ne,{mode:"connected"})})]})),{Meta:Da}=xe,ka=n=>{const[t,a]=o.useState([]),[r,s]=o.useState(),[i,l]=o.useState(!1),[u,h]=o.useState(!1),[x,p]=o.useState(!0),[g,y]=o.useState(1),[j,S]=o.useState(0),[P,F]=o.useState(!0),[z]=D.useForm(),c=!Zt.useBreakpoint().lg,v=f=>{s(f),h(!0)},L=f=>{s(f),l(!0)},I=async(f,C="",b=!1)=>{const{data:M}=await _.custom({url:"",method:"get",meta:{operation:"madarasaToBuy",variables:{page:{value:f,type:"Int",required:!0},key:{value:C,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:de}]}}).catch(()=>(d.remove(),d.error("Error getting darasas"),{data:null})).then(Y=>Y);M&&(S(M.total),y(M.page),F(M.hasNext),a(M.results)),p(!1)};return o.useEffect(()=>{I(g)},[]),x?e.jsx(e.Fragment,{children:e.jsx(He,{loading:x,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(B,{style:{display:"flex",justifyContent:"center"},children:e.jsx(V,{span:c?24:10,children:e.jsx(D,{layout:"vertical",form:z,onFinish:f=>{y(0),I(0,f.key,!0)},children:e.jsx(D.Item,{name:"key",children:e.jsx(ie,{size:"large",placeholder:"Search Classes...",prefix:e.jsx(Me,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(vt,{dataLength:j,next:()=>I(g),hasMore:P,loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(ee,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:t.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:t.length>0?e.jsx(B,{align:"top",children:t.map(f=>e.jsx(V,{span:c?24:8,children:e.jsxs(xe,{hoverable:f.isActive,style:{marginRight:10,marginBottom:10},actions:[e.jsx(N,{size:"large",onClick:()=>L(f),children:"Read More"}),e.jsx(N,{size:"large",onClick:()=>v(f),disabled:!f.canPurchase,children:"Buy Now"})],children:[e.jsx("div",{style:{height:window.innerHeight/3,background:"url("+f.cover+")",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",marginBottom:10,borderRadius:5}}),e.jsx(Da,{title:e.jsx(e.Fragment,{children:e.jsxs(ge,{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("h2",{children:[e.jsx(Re,{title:f.name,children:et(f.name,20)}),e.jsx(ce,{color:"red",style:{marginLeft:10},children:f.code})]}),e.jsxs("span",{style:{fontSize:24},children:[f.price,"/="]})]})}),description:e.jsx(e.Fragment,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:et(f.description,100)}})})})]})}))}):e.jsx(Le,{severity:"info",sx:{fontSize:18},children:"No Classes Found"})}),e.jsx(Qe,{title:r==null?void 0:r.name,width:"50vw",anchor:"right",onClose:f=>l(f),open:i,children:e.jsxs(H,{title:"",column:1,children:[e.jsx(H.Item,{label:"Class Name",children:r==null?void 0:r.name}),e.jsx(H.Item,{label:"Class Code#",children:r==null?void 0:r.code}),e.jsxs(H.Item,{label:"Cost",children:[r==null?void 0:r.price," Tsh"]}),e.jsx(H.Item,{label:"Description",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:r==null?void 0:r.description}})}),e.jsx(H.Item,{label:"",children:e.jsx(N,{size:"large",onClick:()=>v(r),disabled:!(r!=null&&r.canPurchase),children:"Buy Now"})})]})}),e.jsx(re,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Purchasing"}),e.jsx("span",{style:{marginLeft:10,fontWeight:"bolder"},children:r==null?void 0:r.name})]}),width:"35vw",open:u,onClose:f=>h(f),children:e.jsx(jt,{darasa:r,randKey:Math.random()})})]})},Pa=()=>(o.useEffect(()=>{document.title=G.system_name+": Classes Marketplace"},[]),e.jsxs(W,{children:[e.jsxs(O,{children:[e.jsx(O.Item,{children:e.jsx(ue,{to:"/oclass",children:"Home"})}),e.jsx(O.Item,{children:"Classes Marketplace"})]}),e.jsx(W,{sx:{mt:2},children:e.jsx(ka,{randKey:Math.random()})})]})),Ma=()=>(o.useEffect(()=>{document.title=G.system_name+": My Classes"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(O,{children:[e.jsx(O.Item,{children:e.jsx(ue,{to:"/oclass",children:"Home"})}),e.jsx(O.Item,{children:"My Classes"})]}),e.jsx(W,{sx:{mt:2},children:e.jsx(Ne,{mode:"my"})})]})),Ta=n=>{const[t,a]=o.useState(!1),[r,s]=o.useState(0),[i,l]=o.useState(0),[u,h]=o.useState(1),[x,p]=o.useState(25),[g,y]=o.useState(""),[j,S]=o.useState([]),[P,F]=o.useState(),[z]=D.useForm(),[T,c]=o.useState(!1);qe();const v=async C=>{F(C),c(!0)},L=async(C,b="",M=25)=>{a(!0);const{data:Y}=await _.custom({url:"",method:"get",meta:{operation:"myDarasaPurchases",variables:{page:{value:C,type:"Int",required:!0},key:{value:b,type:"String",required:!1},pageSize:{value:M,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Jt}]}}).catch(K=>(console.log(K),d.error("Error getting Bills"),{data:null})).then(K=>K);Y&&(s(Y.total),l(Y.pages),h(Y.page),S(Y.results)),a(!1)},I=async C=>{const{data:b}=await _.custom({url:"",method:"post",meta:{operation:"deleteDarasaOrder",variables:{id:{value:C,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error deleting Order"),{data:null})).then(M=>M);b&&S(j.filter(M=>M.id!==C))},f=[{title:"Bill#",dataIndex:"billNumber",fixed:!0,render:(C,b,M)=>{var Y;return e.jsx("span",{children:e.jsx("a",{children:(Y=b==null?void 0:b.bill)==null?void 0:Y.billNumber})})}},{title:"Class Name",dataIndex:"bookTitle",fixed:!0,render:(C,b,M)=>{var Y;return e.jsx("span",{children:e.jsx("a",{children:(Y=b==null?void 0:b.darasa)==null?void 0:Y.name})})}},{title:"Bill Amount",dataIndex:"billAmount",fixed:!0,render:(C,b,M)=>e.jsxs("span",{children:[b.price," Tsh"]})},{title:"Paid",dataIndex:"isPaid",fixed:!0,render:(C,b,M)=>e.jsx("span",{children:b.isPaid?e.jsx(ce,{color:"green",children:"Yes"}):e.jsx(ce,{color:"red",children:"No"})})},{title:"Created",dataIndex:"created",render:(C,b,M)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(b.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(C,b,M)=>e.jsx("a",{children:b!=null&&b.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(C,b,M)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[!b.isPaid&&e.jsx(Ke,{title:"Are you sure to delete this Order?",onConfirm:()=>I(b.id),okText:"Yes",cancelText:"No",disabled:!(b!=null&&b.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(mt,{}),disabled:!(b!=null&&b.canDelete),size:"large"})}),b.isPaid&&e.jsx(Re,{title:"Print Receipt",children:e.jsx(N,{icon:e.jsx(Wt,{}),size:"large"})}),!b.isPaid&&e.jsx(Re,{title:"View Order Details",children:e.jsx(N,{icon:e.jsx(Ut,{}),size:"large",onClick:()=>v(b)})})]})}];return o.useEffect(()=>{L(u,"",25)},[n.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ta,{offsetTop:75,children:e.jsx(B,{style:{display:"flex",justifyContent:"center",marginTop:20},children:e.jsx(V,{span:10,children:e.jsx(D,{layout:"vertical",form:z,onFinish:C=>{L(1,C.key,25)},children:e.jsx(D.Item,{name:"key",children:e.jsx(ie,{size:"large",placeholder:"Search Bill(s)...",prefix:e.jsx(Me,{}),autoComplete:"off",allowClear:!0})})})})})}),e.jsx(B,{children:e.jsx(V,{span:24,children:e.jsx(Vt,{loading:t,columns:f,dataSource:j,pagination:{onChange:(C,b)=>{p(b),L(C,g,b)},total:r,pageSize:x,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})})}),e.jsx(re,{title:"Order Details & Payment",open:T,width:"50vw",onClose:C=>c(C),children:e.jsx(ea,{book:P==null?void 0:P.darasa})})]})},Ia=()=>(o.useEffect(()=>{document.title=G.system_name+": Classes Orders"},[]),e.jsx("div",{style:{marginTop:10},children:e.jsx(Ta,{randKey:Math.random()})}));function pe(n){if(n===null||n===!0||n===!1)return NaN;var t=Number(n);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function $(n,t){if(t.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+t.length+" present")}function ne(n){$(1,arguments);var t=Object.prototype.toString.call(n);return n instanceof Date||ft(n)==="object"&&t==="[object Date]"?new Date(n.getTime()):typeof n=="number"||t==="[object Number]"?new Date(n):((typeof n=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Oa(n,t){$(2,arguments);var a=ne(n).getTime(),r=pe(t);return new Date(a+r)}var Ea={};function Ae(){return Ea}function _a(n){var t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),n.getTime()-t.getTime()}function Fa(n){return $(1,arguments),n instanceof Date||ft(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function qa(n){if($(1,arguments),!Fa(n)&&typeof n!="number")return!1;var t=ne(n);return!isNaN(Number(t))}function La(n,t){$(2,arguments);var a=pe(t);return Oa(n,-a)}var Na=864e5;function Aa(n){$(1,arguments);var t=ne(n),a=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),s=a-r;return Math.floor(s/Na)+1}function _e(n){$(1,arguments);var t=1,a=ne(n),r=a.getUTCDay(),s=(r<t?7:0)+r-t;return a.setUTCDate(a.getUTCDate()-s),a.setUTCHours(0,0,0,0),a}function bt(n){$(1,arguments);var t=ne(n),a=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(a+1,0,4),r.setUTCHours(0,0,0,0);var s=_e(r),i=new Date(0);i.setUTCFullYear(a,0,4),i.setUTCHours(0,0,0,0);var l=_e(i);return t.getTime()>=s.getTime()?a+1:t.getTime()>=l.getTime()?a:a-1}function Ya(n){$(1,arguments);var t=bt(n),a=new Date(0);a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0);var r=_e(a);return r}var za=6048e5;function Va(n){$(1,arguments);var t=ne(n),a=_e(t).getTime()-Ya(t).getTime();return Math.round(a/za)+1}function Fe(n,t){var a,r,s,i,l,u,h,x;$(1,arguments);var p=Ae(),g=pe((a=(r=(s=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:p.weekStartsOn)!==null&&r!==void 0?r:(h=p.locale)===null||h===void 0||(x=h.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&a!==void 0?a:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var y=ne(n),j=y.getUTCDay(),S=(j<g?7:0)+j-g;return y.setUTCDate(y.getUTCDate()-S),y.setUTCHours(0,0,0,0),y}function Ct(n,t){var a,r,s,i,l,u,h,x;$(1,arguments);var p=ne(n),g=p.getUTCFullYear(),y=Ae(),j=pe((a=(r=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:y.firstWeekContainsDate)!==null&&r!==void 0?r:(h=y.locale)===null||h===void 0||(x=h.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(j>=1&&j<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=new Date(0);S.setUTCFullYear(g+1,0,j),S.setUTCHours(0,0,0,0);var P=Fe(S,t),F=new Date(0);F.setUTCFullYear(g,0,j),F.setUTCHours(0,0,0,0);var z=Fe(F,t);return p.getTime()>=P.getTime()?g+1:p.getTime()>=z.getTime()?g:g-1}function Wa(n,t){var a,r,s,i,l,u,h,x;$(1,arguments);var p=Ae(),g=pe((a=(r=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&r!==void 0?r:(h=p.locale)===null||h===void 0||(x=h.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&a!==void 0?a:1),y=Ct(n,t),j=new Date(0);j.setUTCFullYear(y,0,g),j.setUTCHours(0,0,0,0);var S=Fe(j,t);return S}var Ua=6048e5;function Ra(n,t){$(1,arguments);var a=ne(n),r=Fe(a,t).getTime()-Wa(a,t).getTime();return Math.round(r/Ua)+1}function q(n,t){for(var a=n<0?"-":"",r=Math.abs(n).toString();r.length<t;)r="0"+r;return a+r}var Ha={y:function(t,a){var r=t.getUTCFullYear(),s=r>0?r:1-r;return q(a==="yy"?s%100:s,a.length)},M:function(t,a){var r=t.getUTCMonth();return a==="M"?String(r+1):q(r+1,2)},d:function(t,a){return q(t.getUTCDate(),a.length)},a:function(t,a){var r=t.getUTCHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,a){return q(t.getUTCHours()%12||12,a.length)},H:function(t,a){return q(t.getUTCHours(),a.length)},m:function(t,a){return q(t.getUTCMinutes(),a.length)},s:function(t,a){return q(t.getUTCSeconds(),a.length)},S:function(t,a){var r=a.length,s=t.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return q(i,a.length)}};const oe=Ha;var je={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ba={G:function(t,a,r){var s=t.getUTCFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(t,a,r){if(a==="yo"){var s=t.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return oe.y(t,a)},Y:function(t,a,r,s){var i=Ct(t,s),l=i>0?i:1-i;if(a==="YY"){var u=l%100;return q(u,2)}return a==="Yo"?r.ordinalNumber(l,{unit:"year"}):q(l,a.length)},R:function(t,a){var r=bt(t);return q(r,a.length)},u:function(t,a){var r=t.getUTCFullYear();return q(r,a.length)},Q:function(t,a,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(a){case"Q":return String(s);case"QQ":return q(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,a,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(a){case"q":return String(s);case"qq":return q(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,a,r){var s=t.getUTCMonth();switch(a){case"M":case"MM":return oe.M(t,a);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(t,a,r){var s=t.getUTCMonth();switch(a){case"L":return String(s+1);case"LL":return q(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(t,a,r,s){var i=Ra(t,s);return a==="wo"?r.ordinalNumber(i,{unit:"week"}):q(i,a.length)},I:function(t,a,r){var s=Va(t);return a==="Io"?r.ordinalNumber(s,{unit:"week"}):q(s,a.length)},d:function(t,a,r){return a==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):oe.d(t,a)},D:function(t,a,r){var s=Aa(t);return a==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):q(s,a.length)},E:function(t,a,r){var s=t.getUTCDay();switch(a){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(t,a,r,s){var i=t.getUTCDay(),l=(i-s.weekStartsOn+8)%7||7;switch(a){case"e":return String(l);case"ee":return q(l,2);case"eo":return r.ordinalNumber(l,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,a,r,s){var i=t.getUTCDay(),l=(i-s.weekStartsOn+8)%7||7;switch(a){case"c":return String(l);case"cc":return q(l,a.length);case"co":return r.ordinalNumber(l,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,a,r){var s=t.getUTCDay(),i=s===0?7:s;switch(a){case"i":return String(i);case"ii":return q(i,a.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(t,a,r){var s=t.getUTCHours(),i=s/12>=1?"pm":"am";switch(a){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,a,r){var s=t.getUTCHours(),i;switch(s===12?i=je.noon:s===0?i=je.midnight:i=s/12>=1?"pm":"am",a){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,a,r){var s=t.getUTCHours(),i;switch(s>=17?i=je.evening:s>=12?i=je.afternoon:s>=4?i=je.morning:i=je.night,a){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,a,r){if(a==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return oe.h(t,a)},H:function(t,a,r){return a==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):oe.H(t,a)},K:function(t,a,r){var s=t.getUTCHours()%12;return a==="Ko"?r.ordinalNumber(s,{unit:"hour"}):q(s,a.length)},k:function(t,a,r){var s=t.getUTCHours();return s===0&&(s=24),a==="ko"?r.ordinalNumber(s,{unit:"hour"}):q(s,a.length)},m:function(t,a,r){return a==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):oe.m(t,a)},s:function(t,a,r){return a==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):oe.s(t,a)},S:function(t,a){return oe.S(t,a)},X:function(t,a,r,s){var i=s._originalDate||t,l=i.getTimezoneOffset();if(l===0)return"Z";switch(a){case"X":return at(l);case"XXXX":case"XX":return me(l);case"XXXXX":case"XXX":default:return me(l,":")}},x:function(t,a,r,s){var i=s._originalDate||t,l=i.getTimezoneOffset();switch(a){case"x":return at(l);case"xxxx":case"xx":return me(l);case"xxxxx":case"xxx":default:return me(l,":")}},O:function(t,a,r,s){var i=s._originalDate||t,l=i.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+tt(l,":");case"OOOO":default:return"GMT"+me(l,":")}},z:function(t,a,r,s){var i=s._originalDate||t,l=i.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+tt(l,":");case"zzzz":default:return"GMT"+me(l,":")}},t:function(t,a,r,s){var i=s._originalDate||t,l=Math.floor(i.getTime()/1e3);return q(l,a.length)},T:function(t,a,r,s){var i=s._originalDate||t,l=i.getTime();return q(l,a.length)}};function tt(n,t){var a=n>0?"-":"+",r=Math.abs(n),s=Math.floor(r/60),i=r%60;if(i===0)return a+String(s);var l=t||"";return a+String(s)+l+q(i,2)}function at(n,t){if(n%60===0){var a=n>0?"-":"+";return a+q(Math.abs(n)/60,2)}return me(n,t)}function me(n,t){var a=t||"",r=n>0?"-":"+",s=Math.abs(n),i=q(Math.floor(s/60),2),l=q(s%60,2);return r+i+a+l}const $a=Ba;var rt=function(t,a){switch(t){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});case"PPPP":default:return a.date({width:"full"})}},wt=function(t,a){switch(t){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});case"pppp":default:return a.time({width:"full"})}},Ga=function(t,a){var r=t.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return rt(t,a);var l;switch(s){case"P":l=a.dateTime({width:"short"});break;case"PP":l=a.dateTime({width:"medium"});break;case"PPP":l=a.dateTime({width:"long"});break;case"PPPP":default:l=a.dateTime({width:"full"});break}return l.replace("{{date}}",rt(s,a)).replace("{{time}}",wt(i,a))},Ja={p:wt,P:Ga};const Qa=Ja;var Xa=["D","DD"],Ka=["YY","YYYY"];function Za(n){return Xa.indexOf(n)!==-1}function er(n){return Ka.indexOf(n)!==-1}function nt(n,t,a){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var tr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ar=function(t,a,r){var s,i=tr[t];return typeof i=="string"?s=i:a===1?s=i.one:s=i.other.replace("{{count}}",a.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};const rr=ar;function Ue(n){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=t.width?String(t.width):n.defaultWidth,r=n.formats[a]||n.formats[n.defaultWidth];return r}}var nr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},sr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ir={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},or={date:Ue({formats:nr,defaultWidth:"full"}),time:Ue({formats:sr,defaultWidth:"full"}),dateTime:Ue({formats:ir,defaultWidth:"full"})};const lr=or;var cr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},dr=function(t,a,r,s){return cr[t]};const ur=dr;function Se(n){return function(t,a){var r=a!=null&&a.context?String(a.context):"standalone",s;if(r==="formatting"&&n.formattingValues){var i=n.defaultFormattingWidth||n.defaultWidth,l=a!=null&&a.width?String(a.width):i;s=n.formattingValues[l]||n.formattingValues[i]}else{var u=n.defaultWidth,h=a!=null&&a.width?String(a.width):n.defaultWidth;s=n.values[h]||n.values[u]}var x=n.argumentCallback?n.argumentCallback(t):t;return s[x]}}var hr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},mr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},gr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},pr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vr=function(t,a){var r=Number(t),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},yr={ordinalNumber:vr,era:Se({values:hr,defaultWidth:"wide"}),quarter:Se({values:mr,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Se({values:fr,defaultWidth:"wide"}),day:Se({values:gr,defaultWidth:"wide"}),dayPeriod:Se({values:pr,defaultWidth:"wide",formattingValues:xr,defaultFormattingWidth:"wide"})};const jr=yr;function De(n){return function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=a.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],i=t.match(s);if(!i)return null;var l=i[0],u=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],h=Array.isArray(u)?Cr(u,function(g){return g.test(l)}):br(u,function(g){return g.test(l)}),x;x=n.valueCallback?n.valueCallback(h):h,x=a.valueCallback?a.valueCallback(x):x;var p=t.slice(l.length);return{value:x,rest:p}}}function br(n,t){for(var a in n)if(n.hasOwnProperty(a)&&t(n[a]))return a}function Cr(n,t){for(var a=0;a<n.length;a++)if(t(n[a]))return a}function wr(n){return function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(n.matchPattern);if(!r)return null;var s=r[0],i=t.match(n.parsePattern);if(!i)return null;var l=n.valueCallback?n.valueCallback(i[0]):i[0];l=a.valueCallback?a.valueCallback(l):l;var u=t.slice(s.length);return{value:l,rest:u}}}var Sr=/^(\d+)(th|st|nd|rd)?/i,Dr=/\d+/i,kr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Pr={any:[/^b/i,/^(a|c)/i]},Mr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Tr={any:[/1/i,/2/i,/3/i,/4/i]},Ir={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Or={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Er={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_r={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Fr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},qr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Lr={ordinalNumber:wr({matchPattern:Sr,parsePattern:Dr,valueCallback:function(t){return parseInt(t,10)}}),era:De({matchPatterns:kr,defaultMatchWidth:"wide",parsePatterns:Pr,defaultParseWidth:"any"}),quarter:De({matchPatterns:Mr,defaultMatchWidth:"wide",parsePatterns:Tr,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:De({matchPatterns:Ir,defaultMatchWidth:"wide",parsePatterns:Or,defaultParseWidth:"any"}),day:De({matchPatterns:Er,defaultMatchWidth:"wide",parsePatterns:_r,defaultParseWidth:"any"}),dayPeriod:De({matchPatterns:Fr,defaultMatchWidth:"any",parsePatterns:qr,defaultParseWidth:"any"})};const Nr=Lr;var Ar={code:"en-US",formatDistance:rr,formatLong:lr,formatRelative:ur,localize:jr,match:Nr,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Yr=Ar;var zr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Vr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Wr=/^'([^]*?)'?$/,Ur=/''/g,Rr=/[a-zA-Z]/;function st(n,t,a){var r,s,i,l,u,h,x,p,g,y,j,S,P,F,z,T,c,v;$(2,arguments);var L=String(t),I=Ae(),f=(r=(s=a==null?void 0:a.locale)!==null&&s!==void 0?s:I.locale)!==null&&r!==void 0?r:Yr,C=pe((i=(l=(u=(h=a==null?void 0:a.firstWeekContainsDate)!==null&&h!==void 0?h:a==null||(x=a.locale)===null||x===void 0||(p=x.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&u!==void 0?u:I.firstWeekContainsDate)!==null&&l!==void 0?l:(g=I.locale)===null||g===void 0||(y=g.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=pe((j=(S=(P=(F=a==null?void 0:a.weekStartsOn)!==null&&F!==void 0?F:a==null||(z=a.locale)===null||z===void 0||(T=z.options)===null||T===void 0?void 0:T.weekStartsOn)!==null&&P!==void 0?P:I.weekStartsOn)!==null&&S!==void 0?S:(c=I.locale)===null||c===void 0||(v=c.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&j!==void 0?j:0);if(!(b>=0&&b<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!f.localize)throw new RangeError("locale must contain localize property");if(!f.formatLong)throw new RangeError("locale must contain formatLong property");var M=ne(n);if(!qa(M))throw new RangeError("Invalid time value");var Y=_a(M),K=La(M,Y),we={firstWeekContainsDate:C,weekStartsOn:b,locale:f,_originalDate:M},ve=L.match(Vr).map(function(U){var J=U[0];if(J==="p"||J==="P"){var te=Qa[J];return te(U,f.formatLong)}return U}).join("").match(zr).map(function(U){if(U==="''")return"'";var J=U[0];if(J==="'")return Hr(U);var te=$a[J];if(te)return!(a!=null&&a.useAdditionalWeekYearTokens)&&er(U)&&nt(U,t,String(n)),!(a!=null&&a.useAdditionalDayOfYearTokens)&&Za(U)&&nt(U,t,String(n)),te(K,U,f.localize,we);if(J.match(Rr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+J+"`");return U}).join("");return ve}function Hr(n){var t=n.match(Wr);return t?t[1].replace(Ur,"'"):n}const{Option:Br}=ae,it=[{value:"",label:"Select Duration Type"},{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"}],$r=n=>{const[t,a]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(D,{layout:"vertical",form:n.form,onFinish:r=>{r.description=t,n.onFinish(r),a("")},requiredMark:!1,children:[e.jsx(D.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(ie,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(D.Item,{name:"startDate",label:"start Date",rules:[{required:!0,type:"date",message:"Please select date"}],children:e.jsx(Xe,{showTime:{format:"HH:mm"},disabledDate:r=>{const s=Ce().format("YYYY-MM-DD");return r&&r<Ce(s,"YYYY-MM-DD")},style:{width:"100%"},popupStyle:{zIndex:9999}})}),e.jsxs(B,{children:[e.jsx(V,{span:12,children:e.jsx(D.Item,{name:"duration",label:"Duration",style:{width:"100%"},rules:[{required:!0,type:"integer",message:"Enter Duration"}],children:e.jsx(Pe,{min:1,defaultValue:1,style:{width:"100%"},size:"large"})})}),e.jsx(V,{span:12,children:e.jsx(D.Item,{name:"durationType",label:"Duration Type",style:{width:"100%"},rules:[{required:!0,type:"string",message:"Please select duration type"}],children:e.jsx(ae,{defaultValue:it[0].value,size:"large",style:{width:"100%"},dropdownStyle:{zIndex:9999},children:it.map(r=>e.jsx(Br,{children:r.label},r.value))})})})]}),e.jsx(D.Item,{name:"isPublic",label:"Availability",rules:[{required:!1,type:"boolean"}],children:e.jsx(Be,{defaultChecked:!0,disabled:!0,checked:!0,value:!0,children:"Public Available"})}),e.jsx("h3",{children:"Description"}),e.jsx(Ge.CKEditor,{editor:Je,data:t,onReady:r=>{r.editing.view.change(s=>{s.setStyle("min-height","100px",r.editing.view.document.getRoot())})},onChange:(r,s)=>{const i=s.getData();a(i)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Gr=n=>{const[t,a]=o.useState(!1),[r,s]=o.useState([]),[i,l]=o.useState(),[u,h]=o.useState(),[x,p]=o.useState(!0),[g,y]=o.useState(1),[j,S]=o.useState(0),[P,F]=o.useState(!0),[z]=D.useForm(),[T,c]=o.useState(!1),{push:v}=qe(),[L]=D.useForm(),[I,f]=o.useState(!1),[C,b]=o.useState(!1),M=w=>{l(w),b(!0)},Y=async w=>{const{data:E}=await _.custom({url:"",method:"post",meta:{operation:"connectClass",variables:{id:{value:w,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error connecting to class"),{data:null})).then(R=>R);E&&(E.success?(f(!1),h(null),d(E.message),s(r.filter(R=>R.id!==w))):d.error(E.message))},K=async w=>{const{data:E}=await _.custom({url:"",method:"post",meta:{operation:"createVirtualClass",variables:{name:{value:w.name,type:"String",required:!0},description:{value:w.description,type:"String",required:!0},duration:{value:w.duration,type:"Int",required:!0},durationType:{value:w.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:w.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:Ve}]}}).catch(()=>(d.error("Error creating class"),{data:null})).then(R=>R);E&&(E.success?(d.success(E.message),c(!1),s([E.virtual,...r])):d.error(E.message))},we=async w=>{const{data:E}=await _.custom({url:"",method:"post",meta:{operation:"editVirtualClass",variables:{id:{value:w.id,type:"Int",required:!0},name:{value:w.name,type:"String",required:!0},description:{value:w.description,type:"String",required:!0},duration:{value:w.duration,type:"Int",required:!0},durationType:{value:w.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:w.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:Ve}]}}).catch(()=>(d.error("Error editing class"),{data:null})).then(R=>R);E&&(E.success?(d.success(E.message),s(r.map(R=>R.id===E.virtual.id?E.virtual:R)),b(!1)):d.error(E.message))},ve=()=>{L.resetFields(),c(!0)},U=async w=>{const{data:E}=await _.custom({url:"",method:"post",meta:{operation:"deleteVirtualClass",variables:{id:{value:w,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error deleting class"),{data:null})).then(R=>R);E&&(E.success?(d.success(E.message),s(r.filter(R=>R.id!==w))):d.error(E.message))},J=w=>{fe.confirm({title:"Deleting Virtual Class",icon:e.jsx(ke,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>U(w)})},te=async(w,E="",R=!1)=>{const{data:he}=await _.custom({url:"",method:"get",meta:{operation:"publicVirtualClasses",variables:{page:{value:w,type:"Int",required:!0},key:{value:E,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Ve}]}}).catch(()=>(d.error("Error fetching classes"),{data:null})).then(ze=>ze);he&&(S(he.total),y(he.page),F(he.hasNext),s(he.results)),p(!1)},Ye=async()=>{const{data:w}=await _.custom({url:"",method:"get",meta:{operation:"darasaAuth",variables:{},fields:["auth"]}}).catch(()=>(d.error("Error getting darasa auth"),{data:null})).then(E=>E);w&&a(w.auth.create_virtual_classes)};return o.useEffect(()=>{Ye(),te(g)},[]),x?e.jsx(e.Fragment,{children:e.jsx(He,{loading:x,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(B,{children:[e.jsx(V,{span:12,children:e.jsx(D,{layout:"vertical",form:z,onFinish:w=>{y(0),te(0,w.key,!0)},children:e.jsx(D.Item,{name:"key",children:e.jsx(ie,{size:"large",placeholder:"Search Public Virtual Classes...",prefix:e.jsx(Me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(V,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{icon:e.jsx(ht,{}),size:"large",onClick:()=>ve(),disabled:!t,children:"Create Virtual Class"})})]}),e.jsx(vt,{dataLength:j,next:()=>te(g),hasMore:P,loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(ee,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:r.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(We,{loading:!1,itemLayout:"horizontal",loadMore:!1,dataSource:r,renderItem:w=>e.jsx(xe,{children:e.jsx(We.Item,{actions:[e.jsx(lt,{trigger:["click"],overlay:e.jsxs(be,{children:[e.jsx(be.Item,{icon:e.jsx(Rt,{}),disabled:!w.canJoin,onClick:()=>v("/oclass/virtual/class/session/"+w.id+"/"+w.token),children:e.jsx("a",{children:"Join"})}),w.canDelete?e.jsx(be.Item,{disabled:!w.canDelete,icon:e.jsx(mt,{}),onClick:()=>J(w.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}):e.jsx(e.Fragment,{}),e.jsx(be.Item,{icon:e.jsx(Ht,{}),disabled:!w.canEdit,onClick:()=>M(w),children:e.jsx("a",{children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:E=>E.preventDefault(),children:e.jsx(ct,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(He,{avatar:!0,title:!1,loading:!1,active:!0,children:e.jsx(We.Item.Meta,{avatar:e.jsx(pt,{}),title:e.jsx("a",{onClick:()=>w.canJoin?v("/oclass/virtual/class/session/"+w.id+"/"+w.token):d("You can't join this class"),children:w.name}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:w.description}),e.jsxs("p",{children:[e.jsxs(ce,{color:"green",children:["Start At:"," ",e.jsx("span",{style:{marginLeft:10},children:st(new Date(w.startDate),"MMMM do, yyyy H:mma")})]}),e.jsxs(ce,{color:"green",children:["End In:",e.jsx("span",{style:{marginLeft:10},children:st(new Date(w.endDate),"MMMM do, yyyy H:mma")})]}),w.canJoin?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx(ce,{color:"red",children:"Not Joinable"})})]})]})})})})})})}),e.jsx(re,{title:"Creating Public Virtual Class",width:"40vw",open:T,onClose:w=>c(w),children:e.jsx($r,{form:L,onFinish:K})}),e.jsx(re,{title:"Connecting "+(u==null?void 0:u.name),open:I,width:"40vw",onClose:w=>f(w),children:e.jsxs(e.Fragment,{children:[e.jsx(yt,{id:u==null?void 0:u.id}),e.jsx(N,{onClick:()=>Y(u==null?void 0:u.id),style:{position:"absolute",bottom:0,right:0,marginBottom:10},children:"Connect"})]})}),e.jsx(re,{title:"Editting "+(i==null?void 0:i.name),width:"40vw",open:C,onClose:w=>b(w),children:e.jsx(aa,{form:L,darasa:i,onFinish:we})})]})},Jr=()=>(o.useEffect(()=>{document.title=G.system_name+": Online Public Virtual Classes"},[]),e.jsxs(W,{children:[e.jsxs(O,{children:[e.jsx(O.Item,{children:e.jsx(ue,{to:"/oclass",children:"Home"})}),e.jsx(O.Item,{children:"Online Public Virtual Classes"})]}),e.jsx(W,{sx:{mt:2},children:e.jsx(Gr,{mode:"connected"})})]})),St="meet.jit.si";var Qr=globalThis&&globalThis.__awaiter||function(n,t,a,r){function s(i){return i instanceof a?i:new a(function(l){l(i)})}return new(a||(a=Promise))(function(i,l){function u(p){try{x(r.next(p))}catch(g){l(g)}}function h(p){try{x(r.throw(p))}catch(g){l(g)}}function x(p){p.done?i(p.value):s(p.value).then(u,h)}x((r=r.apply(n,t||[])).next())})};const Xr=(n,t,a)=>Qr(void 0,void 0,void 0,function*(){return new Promise((r,s)=>{if(window.JitsiMeetExternalAPI)return r(window.JitsiMeetExternalAPI);const i=document.createElement("script"),l=t?`?release=${t}`:"",u=a?`${a}/`:"";i.async=!0,i.src=`https://${n}/${u}external_api.js${l}`,i.onload=()=>r(window.JitsiMeetExternalAPI),i.onerror=()=>s(new Error(`Script load error: ${i.src}`)),document.head.appendChild(i)})});let Ee;const Kr=(n=St,t,a)=>Ee||(Ee=Xr(n,t,a),Ee),Zr=n=>{const t=n.split("/");if(!(t.length<=1))return t[0]};let en=0;const ot=n=>`${n}-${en++}`,tn=({domain:n=St,roomName:t,configOverwrite:a,interfaceConfigOverwrite:r,jwt:s,invitees:i,devices:l,userInfo:u,release:h,lang:x,spinner:p,onApiReady:g,onReadyToClose:y,getIFrameRef:j})=>{const[S,P]=o.useState(!0),[F,z]=o.useState(!1),T=o.useRef(),c=o.useRef(),v=o.useRef(null),L=o.useMemo(()=>ot("jitsiMeeting"),[ot]);o.useEffect(()=>{Kr(n,h,Zr(t)).then(C=>{T.current=C,z(!0)}).catch(C=>console.error(C.message))},[]);const I=o.useCallback(C=>{c.current=new C(n,{roomName:t,configOverwrite:a,interfaceConfigOverwrite:r,jwt:s,invitees:i,devices:l,userInfo:u,release:h,lang:x,parentNode:v.current}),P(!1),c.current&&(typeof g=="function"&&g(c.current),c.current.on("readyToClose",()=>{typeof y=="function"&&y()}),v.current&&typeof j=="function"&&j(v.current))},[c,v,g,y,j,n,t,a,r,s,i,l,u,h,x]);o.useEffect(()=>{F&&!c.current&&T.current&&I(T.current)},[F,I]);const f=o.useCallback(()=>!p||!S||c.current?null:e.jsx(p,{},void 0),[p,c.current]);return e.jsxs(e.Fragment,{children:[f(),e.jsx("div",{id:L,ref:v},L)]},void 0)};globalThis&&globalThis.__rest;const an={app_name:"Oclass",api_url:"https://olbongo.co.tz",conference_url:"video.olbongo.co.tz"},rn=n=>{const[t,a]=o.useState(),[r,s]=o.useState(!1),[i,l]=o.useState(!0),[u,h]=o.useState(!0),{push:x}=Bt(),{data:p}=$t(),g=$e(),y=async()=>{const{data:S}=await _.custom({url:"",method:"get",meta:{operation:"virtual",variables:{id:{value:parseInt(g.id),type:"Int",required:!0}},fields:["id","name","description","startDate","duration","durationType","token",{darasa:["id","name","code","description"]},{author:["id","firstName","middleName","lastName","fullName","pic","email"]},"created","canEdit","canDelete","canManage","updated","isActive"]}}).catch(P=>(d.error("Error fetching virtual class"),{data:null})).then(P=>P);S&&a(S),l(!1)},j=e.jsxs(O,{children:[e.jsx(O.Item,{children:e.jsx("a",{onClick:()=>x("/oclass"),children:"Home"})}),e.jsx(O.Item,{children:e.jsx("a",{onClick:()=>x("/oclass/public/virtual/classes"),children:"Virtual Sessions/Classes"})}),e.jsx(O.Item,{children:t==null?void 0:t.name})]});return o.useEffect(()=>{y()},[]),i?e.jsxs(e.Fragment,{children:[j,e.jsx(B,{align:"middle",children:e.jsx(V,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(ee,{size:"large"})})})]}):r?e.jsxs(e.Fragment,{children:[j,e.jsx("div",{children:e.jsxs(B,{align:"middle",children:[e.jsx(V,{span:8}),e.jsx(V,{span:8,children:e.jsx(xe,{title:t==null?void 0:t.name,bordered:!1,actions:[e.jsx(N,{onClick:()=>window.location.reload(),children:"Re-join"})],children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(t==null?void 0:t.description)??""}})})})]})})]}):e.jsxs(e.Fragment,{children:[j,u&&e.jsxs(B,{align:"middle",children:[e.jsx(V,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(ge,{direction:"vertical",children:e.jsx(ee,{size:"large"})})}),e.jsx(V,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(ge,{direction:"vertical",children:"Preparing Virtual Conference Connection"})})]}),t&&e.jsx(tn,{domain:an.conference_url,roomName:t.id.toString()+t.token,configOverwrite:{speakerStats:{disabled:!0,disableSearch:!1,order:["role","name","hasLeft"]},breakoutRooms:{hideAddRoomButton:!0,hideAutoAssignButton:!0,hideJoinRoomButton:!0},disableInviteFunctions:!0,hideConferenceSubject:!0,disablePolls:!0,autoKnockLobby:!0,enableLobbyChat:!0,disableModeratorIndicator:!1,disableReactionsModeration:!1,openSharedDocumentOnJoin:!1,startWithAudioMuted:!0,startScreenSharing:!1,enableEmailInStats:!1,enableWelcomePage:!1,readOnlyName:!0,notifications:[],screenshotCapture:{enabled:!0,mode:"recording"},prejoinConfig:{enabled:!0,hideDisplayName:!0,hideExtraJoinButtons:["no-audio","by-phone"]},p2p:{enabled:!0},e2ee:{labels:{labelTooltip:"Tooltip",description:"Description",label:"E2EE",warning:"Warning"},externallyManagedKey:!1}},interfaceConfigOverwrite:{DISABLE_JOIN_LEAVE_NOTIFICATIONS:!1},userInfo:{displayName:p==null?void 0:p.fullName,email:p==null?void 0:p.email},onApiReady:S=>{h(!1),S.addListener("videoConferenceJoined",()=>{}),S.addListener("videoConferenceLeft",()=>{}),S.addListener("participantJoined",P=>{}),S.addListener("participantLeft",P=>{}),S.addListener("onMessageReceived",P=>{}),S.addListener("onMessageSent",P=>{}),S.addListener("onChatMessage",P=>{}),S.addListener("onChatMessageReceived",P=>{}),S.addListener("onChatMessageSent",P=>{})},onReadyToClose:()=>{s(!0)},getIFrameRef:S=>{S.style.height="88vh"}})]})},nn=()=>(o.useEffect(()=>{document.title=G.system_name+": Virtual Class Session"},[]),e.jsxs(W,{children:[e.jsxs(O,{children:[e.jsx(O.Item,{children:e.jsx(ue,{to:"/oclass",children:"Home"})}),e.jsx(O.Item,{children:"Online Virtual Classes"})]}),e.jsx(W,{sx:{mt:2},children:e.jsx(rn,{mode:"connected"})})]})),sn=n=>{const{page:t}=n;return t==="VirtualClassSessionPage"?e.jsx(nn,{}):t==="PublicVirtualClassesPage"?e.jsx(Jr,{}):t==="OclassOrdersPage"?e.jsx(Ia,{}):t==="MyClassesPage"?e.jsx(Ma,{}):t==="OclassMarketplacePage"?e.jsx(Pa,{}):t==="ConnectedClassesPage"?e.jsx(Sa,{}):t==="ClassSessionPage"?e.jsx(wa,{}):t==="ClassesPage"?e.jsx(ca,{}):t==="ClassesConnectPage"?e.jsx(la,{}):t==="DarasaArchivesPage"?e.jsx(na,{}):e.jsx("div",{children:"Page not found ..."})},En=Object.freeze(Object.defineProperty({__proto__:null,DarasaPages:sn},Symbol.toStringTag,{value:"Module"}));export{st as f,En as p};
