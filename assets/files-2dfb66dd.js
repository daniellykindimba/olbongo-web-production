import{bk as X,bj as ee,bl as te,db as fe,de as I,bo as y,dc as M,r,bm as oe,bn as se,j as t,w as P,bp as ae,c as S,l as he,aE as xe,J as me,R as be,d as W,B as O,aZ as N,e5 as ve,C as H,I as V,e as J,y as E,z as Ce,M as A,D as ye,g as K,e6 as je,_ as Q}from"./index-c92f9f6b.js";import{F as Fe}from"./file_item_component-e91df2a0.js";import{U as Be,a as Te}from"./upload_folder-60870f77.js";import{F as ze}from"./files_component-18e22fb5.js";import"./index-8dba23b7.js";import"./index-c439524c.js";import"./toConsumableArray-bbf3d55f.js";import"./index.esm-2a6d2955.js";import"./iconBase-1d410209.js";import"./index-fb8c891a.js";import"./index-742844e5.js";import"./index-f6c51ccc.js";import"./index-9cea7caf.js";function Re(e){return ee("MuiToggleButton",e)}const Se=X("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge"]),Y=Se,$e=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],we=e=>{const{classes:o,fullWidth:a,selected:l,disabled:c,size:u,color:m}=e,n={root:["root",l&&"selected",c&&"disabled",a&&"fullWidth",`size${I(u)}`,m]};return ae(n,Re,o)},ke=te(fe,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[o.root,o[`size${I(a.size)}`]]}})(({theme:e,ownerState:o})=>{let a=o.color==="standard"?e.palette.text.primary:e.palette[o.color].main,l;return e.vars&&(a=o.color==="standard"?e.vars.palette.text.primary:e.vars.palette[o.color].main,l=o.color==="standard"?e.vars.palette.text.primaryChannel:e.vars.palette[o.color].mainChannel),y({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},o.fullWidth&&{width:"100%"},{[`&.${Y.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:M(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Y.selected}`]:{color:a,backgroundColor:e.vars?`rgba(${l} / ${e.vars.palette.action.selectedOpacity})`:M(a,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${l} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:M(a,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${l} / ${e.vars.palette.action.selectedOpacity})`:M(a,e.palette.action.selectedOpacity)}}}},o.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},o.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)})}),Ue=r.forwardRef(function(o,a){const l=oe({props:o,name:"MuiToggleButton"}),{children:c,className:u,color:m="standard",disabled:n=!1,disableFocusRipple:j=!1,fullWidth:p=!1,onChange:g,onClick:v,selected:$,size:d="medium",value:C}=l,F=se(l,$e),f=y({},l,{color:m,disabled:n,disableFocusRipple:j,fullWidth:p,size:d}),B=we(f),U=i=>{v&&(v(i,C),i.defaultPrevented)||g&&g(i,C)};return t.jsx(ke,y({className:P(B.root,u),disabled:n,focusRipple:!j,ref:a,onClick:U,onChange:g,value:C,ownerState:f,"aria-pressed":$},F,{children:c}))}),Z=Ue;function Me(e,o){return o===void 0||e===void 0?!1:Array.isArray(o)?o.indexOf(e)>=0:e===o}function We(e){return ee("MuiToggleButtonGroup",e)}const Oe=X("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical"]),x=Oe,Ie=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],Ge=e=>{const{classes:o,orientation:a,fullWidth:l,disabled:c}=e,u={root:["root",a==="vertical"&&"vertical",l&&"fullWidth"],grouped:["grouped",`grouped${I(a)}`,c&&"disabled"]};return ae(u,We,o)},Le=te("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[{[`& .${x.grouped}`]:o.grouped},{[`& .${x.grouped}`]:o[`grouped${I(a.orientation)}`]},o.root,a.orientation==="vertical"&&o.vertical,a.fullWidth&&o.fullWidth]}})(({ownerState:e,theme:o})=>y({display:"inline-flex",borderRadius:(o.vars||o).shape.borderRadius},e.orientation==="vertical"&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${x.grouped}`]:y({},e.orientation==="horizontal"?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${x.selected} + .${x.grouped}.${x.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${x.selected} + .${x.grouped}.${x.selected}`]:{borderTop:0,marginTop:0}})})),Ne=r.forwardRef(function(o,a){const l=oe({props:o,name:"MuiToggleButtonGroup"}),{children:c,className:u,color:m="standard",disabled:n=!1,exclusive:j=!1,fullWidth:p=!1,onChange:g,orientation:v="horizontal",size:$="medium",value:d}=l,C=se(l,Ie),F=y({},l,{disabled:n,fullWidth:p,orientation:v,size:$}),f=Ge(F),B=(i,b)=>{if(!g)return;const w=d&&d.indexOf(b);let T;d&&w>=0?(T=d.slice(),T.splice(w,1)):T=d?d.concat(b):[b],g(i,T)},U=(i,b)=>{g&&g(i,d===b?null:b)};return t.jsx(Le,y({role:"group",className:P(f.root,u),ref:a,ownerState:F},C,{children:r.Children.map(c,i=>r.isValidElement(i)?r.cloneElement(i,{className:P(f.grouped,i.props.className),onChange:j?U:B,selected:i.props.selected===void 0?Me(i.props.value,d):i.props.selected,size:i.props.size||$,fullWidth:p,color:i.props.color||m,disabled:i.props.disabled||n}):null)}))}),Ee=Ne,ot=e=>{const[o,a]=r.useState(!1),[l,c]=r.useState([]),[u,m]=r.useState(!0),[n,j]=r.useState(1),[p,g]=r.useState(e.min?5:20),[v]=S.useForm();S.useForm();const[$,d]=r.useState(0),[C,F]=r.useState(0),[f,B]=r.useState(""),[U,i]=r.useState(!0);he();const[b,w]=r.useState(!1),[T,G]=r.useState(!1),[re,le]=r.useState(!1),[L,Ae]=r.useState(),[ie,ne]=r.useState(!1),[_,de]=r.useState("files"),z=!xe.useBreakpoint().lg,D=()=>{w(!0)},q=s=>{c([...s,...l])},k=async(s,h="",pe=25)=>{m(!0);const{data:R}=await K.custom({url:"",method:"get",meta:{operation:"files",variables:{page:{value:s,type:"Int",required:!0},key:{value:h,type:"String",required:!1},pageSize:{value:pe,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:je}]}}).catch(()=>(Q.error("Error getting files"),{data:null})).then(ge=>ge);R&&(F(R.total),d(R.pages),j(R.page),i(R.hasNext),c(R.results)),m(!1)},ce=(s,h)=>{g(h),k(n,f,h)},ue=async()=>{const{data:s}=await K.custom({url:"",method:"get",meta:{operation:"odriveAuthorization",variables:{},fields:["auth"]}}).catch(()=>(Q.error("Error getting Odrive Authorization"),{data:null})).then(h=>h);s&&a(s.auth.upload_files)};return r.useEffect(()=>{ue(),k(n,f,p)},[]),t.jsxs(t.Fragment,{children:[!e.min&&t.jsx(me,{offsetTop:63,children:t.jsxs(be,{children:[z&&t.jsxs(t.Fragment,{children:[t.jsxs(W,{span:24,style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:[t.jsx(O,{size:"large",icon:t.jsx(N,{}),disabled:!o,onClick:()=>D(),children:"Upload File(s)"}),t.jsx(O,{size:"large",icon:t.jsx(ve,{}),disabled:!o,onClick:()=>G(!0),children:"Upload Folder"})]}),t.jsx(W,{span:24,children:t.jsx(H,{bodyStyle:{paddingTop:10,paddingBottom:0},children:t.jsx(S,{layout:"vertical",form:v,onFinish:s=>{B(s.key),k(1,s.key,p)},children:t.jsx(S.Item,{name:"key",children:t.jsx(V,{size:"large",placeholder:"Search file(s)...",prefix:t.jsx(J,{}),autoComplete:"off",allowClear:!0})})})})})]}),!z&&t.jsxs(t.Fragment,{children:[t.jsx(W,{span:12,children:t.jsx(H,{bodyStyle:{paddingTop:10,paddingBottom:0},children:t.jsx(S,{layout:"vertical",form:v,onFinish:s=>{B(s.key),k(1,s.key,p)},children:t.jsx(S.Item,{name:"key",children:t.jsx(V,{size:"large",placeholder:"Search file(s)...",prefix:t.jsx(J,{}),autoComplete:"off",allowClear:!0})})})})}),t.jsxs(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:[t.jsx(O,{size:"large",icon:t.jsx(N,{}),disabled:!o,onClick:()=>D(),children:"Upload File(s)"}),t.jsx(O,{size:"large",icon:t.jsx(N,{}),disabled:!o,onClick:()=>G(!0),children:"Upload Folder"})]})]})]})}),!e.min&&t.jsxs(E,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:2,marginTop:2},children:[t.jsx(E,{sx:{marginRight:2,fontSize:24},children:"Filter By:"}),t.jsxs(Ee,{color:"primary",value:_,exclusive:!0,onChange:(s,h)=>{h!==null&&de(h)},"aria-label":"Alignment",sx:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[t.jsx(Z,{value:"files",sx:{"&.Mui-selected":{backgroundColor:"red",color:"white",fontWeight:"bold","&:hover":{backgroundColor:"red",color:"white",fontWeight:"bold"}},fontWeight:"bold"},children:"Files"}),t.jsx(Z,{value:"folders",sx:{"&.Mui-selected":{backgroundColor:"red",color:"white",fontWeight:"bold","&:hover":{backgroundColor:"red",color:"white",fontWeight:"bold"}},fontWeight:"bold"},children:"Folders"})]})]}),_==="files"&&t.jsxs(t.Fragment,{children:[t.jsx(E,{sx:{maxHeight:"calc(100vh - 330px)",overflowY:"auto"},children:t.jsx("div",{style:{marginTop:e.min?0:20},children:t.jsx(ze,{loading:u,data:l,min:e.min??!1})})}),!e.min&&t.jsx(t.Fragment,{children:!u&&t.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:10,marginTop:20},children:t.jsx(Ce,{showSizeChanger:!0,showQuickJumper:!0,defaultCurrent:n,current:n,total:C,pageSize:p,onShowSizeChange:ce,onChange:s=>k(s,f,p)})})})]}),t.jsx(A,{title:"Uploading Files",open:b,onClose:s=>w(s),width:z?"100vw":"50vw",children:t.jsx(Be,{onFinish:s=>q(s),mode:"file"})}),t.jsx(A,{title:"Uploading Folder",open:T,onClose:s=>G(s),width:z?"100vw":"50vw",children:t.jsx(Te,{onFinish:s=>q(s),mode:"file"})}),t.jsx(ye,{title:"File Informations",anchor:"right",width:z?"100vw":"35vw",onClose:s=>le(s),open:re,children:t.jsx(Fe,{id:L==null?void 0:L.id})}),t.jsx(A,{title:"Share File",open:ie,onClose:s=>ne(s),width:z?"100vw":"50vw",children:t.jsx("span",{})})]})};export{ot as Files};
