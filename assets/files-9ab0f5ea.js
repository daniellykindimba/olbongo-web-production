import{bg as ee,bf as oe,bk as se,bl as be,bp as L,bj as C,bm as O,r as a,bn as te,bh as re,j as e,w as E,bq as ae,c as S,l as ye,aB as je,H as Ce,R as Fe,d as I,B as w,aW as A,dn as ke,C as V,I as K,e as J,y as q,z as Be,M as D,D as Te,W as le,S as ie,bR as ne,A as b,g as Q,dp as ze,_ as Y}from"./index-0218b022.js";import{F as Re}from"./file_item_component-abbfb25a.js";import{U as Se,a as we}from"./upload_folder-664e6ba3.js";import{F as $e}from"./files_component-498a758c.js";import"./index-27724231.js";import"./index-ab36f351.js";import"./toConsumableArray-d4f18d80.js";import"./addEventListener-a1a8dbaa.js";import"./index.esm-d9d36c7b.js";import"./iconBase-fea8a0f2.js";import"./index-1de60405.js";import"./index-bc50efac.js";import"./Tree-c957e1a9.js";import"./index-13ee89b5.js";import"./index-53281e87.js";function Ue(o){return oe("MuiToggleButton",o)}const We=ee("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge"]),X=We,Me=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],Oe=o=>{const{classes:s,fullWidth:r,selected:l,disabled:c,size:u,color:m}=o,n={root:["root",l&&"selected",c&&"disabled",r&&"fullWidth",`size${L(u)}`,m]};return ae(n,Ue,s)},Ie=se(be,{name:"MuiToggleButton",slot:"Root",overridesResolver:(o,s)=>{const{ownerState:r}=o;return[s.root,s[`size${L(r.size)}`]]}})(({theme:o,ownerState:s})=>{let r=s.color==="standard"?o.palette.text.primary:o.palette[s.color].main,l;return o.vars&&(r=s.color==="standard"?o.vars.palette.text.primary:o.vars.palette[s.color].main,l=s.color==="standard"?o.vars.palette.text.primaryChannel:o.vars.palette[s.color].mainChannel),C({},o.typography.button,{borderRadius:(o.vars||o).shape.borderRadius,padding:11,border:`1px solid ${(o.vars||o).palette.divider}`,color:(o.vars||o).palette.action.active},s.fullWidth&&{width:"100%"},{[`&.${X.disabled}`]:{color:(o.vars||o).palette.action.disabled,border:`1px solid ${(o.vars||o).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:o.vars?`rgba(${o.vars.palette.text.primaryChannel} / ${o.vars.palette.action.hoverOpacity})`:O(o.palette.text.primary,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${X.selected}`]:{color:r,backgroundColor:o.vars?`rgba(${l} / ${o.vars.palette.action.selectedOpacity})`:O(r,o.palette.action.selectedOpacity),"&:hover":{backgroundColor:o.vars?`rgba(${l} / calc(${o.vars.palette.action.selectedOpacity} + ${o.vars.palette.action.hoverOpacity}))`:O(r,o.palette.action.selectedOpacity+o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:o.vars?`rgba(${l} / ${o.vars.palette.action.selectedOpacity})`:O(r,o.palette.action.selectedOpacity)}}}},s.size==="small"&&{padding:7,fontSize:o.typography.pxToRem(13)},s.size==="large"&&{padding:15,fontSize:o.typography.pxToRem(15)})}),qe=a.forwardRef(function(s,r){const l=te({props:s,name:"MuiToggleButton"}),{children:c,className:u,color:m="standard",disabled:n=!1,disableFocusRipple:F=!1,fullWidth:p=!1,onChange:g,onClick:y,selected:$,size:d="medium",value:j}=l,k=re(l,Me),f=C({},l,{color:m,disabled:n,disableFocusRipple:F,fullWidth:p,size:d}),B=Oe(f),M=i=>{y&&(y(i,j),i.defaultPrevented)||g&&g(i,j)};return e.jsx(Ie,C({className:E(B.root,u),disabled:n,focusRipple:!F,ref:r,onClick:M,onChange:g,value:j,ownerState:f,"aria-pressed":$},k,{children:c}))}),Z=qe;function Le(o,s){return s===void 0||o===void 0?!1:Array.isArray(s)?s.indexOf(o)>=0:o===s}function Ge(o){return oe("MuiToggleButtonGroup",o)}const Ne=ee("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical"]),x=Ne,Pe=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],Ae=o=>{const{classes:s,orientation:r,fullWidth:l,disabled:c}=o,u={root:["root",r==="vertical"&&"vertical",l&&"fullWidth"],grouped:["grouped",`grouped${L(r)}`,c&&"disabled"]};return ae(u,Ge,s)},De=se("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(o,s)=>{const{ownerState:r}=o;return[{[`& .${x.grouped}`]:s.grouped},{[`& .${x.grouped}`]:s[`grouped${L(r.orientation)}`]},s.root,r.orientation==="vertical"&&s.vertical,r.fullWidth&&s.fullWidth]}})(({ownerState:o,theme:s})=>C({display:"inline-flex",borderRadius:(s.vars||s).shape.borderRadius},o.orientation==="vertical"&&{flexDirection:"column"},o.fullWidth&&{width:"100%"},{[`& .${x.grouped}`]:C({},o.orientation==="horizontal"?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${x.selected} + .${x.grouped}.${x.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${x.selected} + .${x.grouped}.${x.selected}`]:{borderTop:0,marginTop:0}})})),Ee=a.forwardRef(function(s,r){const l=te({props:s,name:"MuiToggleButtonGroup"}),{children:c,className:u,color:m="standard",disabled:n=!1,exclusive:F=!1,fullWidth:p=!1,onChange:g,orientation:y="horizontal",size:$="medium",value:d}=l,j=re(l,Pe),k=C({},l,{disabled:n,fullWidth:p,orientation:y,size:$}),f=Ae(k),B=(i,v)=>{if(!g)return;const U=d&&d.indexOf(v);let T;d&&U>=0?(T=d.slice(),T.splice(U,1)):T=d?d.concat(v):[v],g(i,T)},M=(i,v)=>{g&&g(i,d===v?null:v)};return e.jsx(De,C({role:"group",className:E(f.root,u),ref:r,ownerState:k},j,{children:a.Children.map(c,i=>a.isValidElement(i)?a.cloneElement(i,{className:E(f.grouped,i.props.className),onChange:F?M:B,selected:i.props.selected===void 0?Le(i.props.value,d):i.props.selected,size:i.props.size||$,fullWidth:p,color:i.props.color||m,disabled:i.props.disabled||n}):null)}))}),_e=Ee,de=[{label:"Documents",key:"1",icon:e.jsx(b,{shape:"square",src:"/svgs/document.svg"})},{label:"Spreadsheets",key:"2",icon:e.jsx(b,{shape:"square",src:"/svgs/excel_sheet.svg"})},{label:"Presentations",key:"3",icon:e.jsx(b,{shape:"square",src:"/svgs/presentation.svg"})},{label:"PDFs",key:"4",icon:e.jsx(b,{shape:"square",src:"/svgs/pdf.svg"})},{label:"Videos",key:"5",icon:e.jsx(b,{shape:"square",src:"/svgs/video.svg"})},{label:"Images & Photos",key:"6",icon:e.jsx(b,{shape:"square",src:"/svgs/image.svg"})},{label:"Audio",key:"7",icon:e.jsx(b,{shape:"square",src:"/svgs/audio.svg"})},{label:"Others",key:"8",icon:e.jsx(b,{shape:"square",src:"/svgs/list.svg"})}],po=o=>{const[s,r]=a.useState(!1),[l,c]=a.useState([]),[u,m]=a.useState(!0),[n,F]=a.useState(1),[p,g]=a.useState(o.min?5:20),[y]=S.useForm();S.useForm();const[$,d]=a.useState(0),[j,k]=a.useState(0),[f,B]=a.useState(""),[M,i]=a.useState(!0);ye();const[v,U]=a.useState(!1),[T,G]=a.useState(!1),[ce,ue]=a.useState(!1),[N,Ke]=a.useState(),[pe,ge]=a.useState(!1),[P,fe]=a.useState("files"),z=!je.useBreakpoint().lg,_=()=>{U(!0)},H=t=>{c([...t,...l])},W=async(t,h="",me=25)=>{m(!0);const{data:R}=await Q.custom({url:"",method:"get",meta:{operation:"files",variables:{page:{value:t,type:"Int",required:!0},key:{value:h,type:"String",required:!1},pageSize:{value:me,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:ze}]}}).catch(()=>(Y.error("Error getting files"),{data:null})).then(ve=>ve);R&&(k(R.total),d(R.pages),F(R.page),i(R.hasNext),c(R.results)),m(!1)},he=(t,h)=>{g(h),W(n,f,h)},xe=async()=>{const{data:t}=await Q.custom({url:"",method:"get",meta:{operation:"odriveAuthorization",variables:{},fields:["auth"]}}).catch(()=>(Y.error("Error getting Odrive Authorization"),{data:null})).then(h=>h);t&&r(t.auth.upload_files)};return a.useEffect(()=>{xe(),W(n,f,p)},[]),e.jsxs(e.Fragment,{children:[!o.min&&e.jsx(Ce,{offsetTop:63,children:e.jsxs(Fe,{children:[z&&e.jsxs(e.Fragment,{children:[e.jsxs(I,{span:24,style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:[e.jsx(w,{size:"large",icon:e.jsx(A,{}),disabled:!s,onClick:()=>_(),children:"Upload File(s)"}),e.jsx(w,{size:"large",icon:e.jsx(ke,{}),disabled:!s,onClick:()=>G(!0),children:"Upload Folder"})]}),e.jsx(I,{span:24,children:e.jsx(V,{bodyStyle:{paddingTop:10,paddingBottom:0},children:e.jsx(S,{layout:"vertical",form:y,onFinish:t=>{B(t.key),W(1,t.key,p)},children:e.jsx(S.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(J,{}),autoComplete:"off",allowClear:!0})})})})})]}),!z&&e.jsxs(e.Fragment,{children:[e.jsx(I,{span:12,children:e.jsx(V,{bodyStyle:{paddingTop:10,paddingBottom:0},children:e.jsx(S,{layout:"vertical",form:y,onFinish:t=>{B(t.key),W(1,t.key,p)},children:e.jsx(S.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(J,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(I,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(w,{size:"large",icon:e.jsx(A,{}),disabled:!s,onClick:()=>_(),children:"Upload File(s)"}),e.jsx(w,{size:"large",icon:e.jsx(A,{}),disabled:!s,onClick:()=>G(!0),children:"Upload Folder"})]})]})]})}),!o.min&&e.jsxs(q,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:2,marginTop:2},children:[e.jsx(q,{sx:{marginRight:2,fontSize:24},children:"Filter By:"}),e.jsxs(_e,{color:"primary",value:P,exclusive:!0,onChange:(t,h)=>{h!==null&&fe(h)},"aria-label":"Alignment",sx:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[e.jsx(Z,{value:"files",sx:{"&.Mui-selected":{backgroundColor:"red",color:"white",fontWeight:"bold","&:hover":{backgroundColor:"red",color:"white",fontWeight:"bold"}},fontWeight:"bold"},children:"Files"}),e.jsx(Z,{value:"folders",sx:{"&.Mui-selected":{backgroundColor:"red",color:"white",fontWeight:"bold","&:hover":{backgroundColor:"red",color:"white",fontWeight:"bold"}},fontWeight:"bold"},children:"Folders"})]}),P==="files"&&e.jsxs(e.Fragment,{children:[e.jsx(q,{sx:{height:"45px",width:2,backgroundColor:"red",marginLeft:2,marginRight:2}}),e.jsx(He,{}),e.jsx(Ve,{})]})]}),P==="files"&&e.jsxs(e.Fragment,{children:[e.jsx(q,{sx:{maxHeight:"calc(100vh - 330px)",overflowY:"auto"},children:e.jsx("div",{style:{marginTop:o.min?0:20},children:e.jsx($e,{loading:u,data:l,min:o.min??!1})})}),!o.min&&e.jsx(e.Fragment,{children:!u&&e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:10,marginTop:20},children:e.jsx(Be,{showSizeChanger:!0,showQuickJumper:!0,defaultCurrent:n,current:n,total:j,pageSize:p,onShowSizeChange:he,onChange:t=>W(t,f,p)})})})]}),e.jsx(D,{title:"Uploading Files",open:v,onClose:t=>U(t),width:z?"100vw":"50vw",children:e.jsx(Se,{onFinish:t=>H(t),mode:"file"})}),e.jsx(D,{title:"Uploading Folder",open:T,onClose:t=>G(t),width:z?"100vw":"50vw",children:e.jsx(we,{onFinish:t=>H(t),mode:"file"})}),e.jsx(Te,{title:"File Informations",anchor:"right",width:z?"100vw":"35vw",onClose:t=>ue(t),open:ce,children:e.jsx(Re,{id:N==null?void 0:N.id})}),e.jsx(D,{title:"Share File",open:pe,onClose:t=>ge(t),width:z?"100vw":"50vw",children:e.jsx("span",{})})]})},He=()=>e.jsx(le,{menu:{items:de,onClick:()=>{console.log("clicked")}},trigger:["click"],children:e.jsx(w,{size:"large",children:e.jsxs(ie,{children:["Type",e.jsx(ne,{})]})})}),Ve=()=>e.jsx(le,{menu:{items:de,onClick:()=>{console.log("clicked")}},trigger:["click"],children:e.jsx(w,{size:"large",children:e.jsxs(ie,{children:["People",e.jsx(ne,{})]})})});export{po as Files};
