import{bK as ps,bJ as fs,bH as Ss,cs as vs,r as s,bG as Cs,b8 as bs,j as e,w as Is,bT as Fs,bU as ks,bX as Ms,cD as xt,c7 as xe,a_ as ge,aR as B,aZ as ne,dw as Ls,aV as a,a0 as K,cT as ae,aw as E,a7 as ie,dc as Ge,b0 as le,cP as As,dx as Es,_ as x,dy as Ns,dz as Ps,dA as zs,cF as de,a$ as he,aT as ke,aW as H,c9 as ce,af as w,cK as Le,dB as Ts,dC as Ds,dD as qs,dE as Rs,dF as Ys,S as $,dG as Gs,g as Q,dH as Os,dI as Ks,c3 as Re,dJ as _s,dK as Bs,c4 as tt,cI as gt,dL as Us,dM as Xe,d9 as dt,cX as Yt,aU as Ws,b$ as re,dN as Vs,aQ as Me,cH as Ye,dO as $s,d8 as Gt,c8 as Ee,cg as Ot,dP as Hs,dQ as Js,dR as Qs,c as jt,aX as Kt,dS as ws,dT as Xs,dU as _t,dV as Zs,dW as en,dl as Bt,dm as Ut,dX as tn,dY as sn,dZ as nn,d_ as rn,d$ as ln,e0 as an,e1 as on,e2 as dn,e3 as Je,e4 as cn,e5 as un,e6 as hn,aP as Z,cq as fe,e7 as Wt,e8 as Vt,e9 as mn,ea as xn,eb as gn,ec as jn,ed as yn,ee as $t,ef as pn,eg as fn,eh as Sn,ei as vn,ej as Cn,ek as bn,el as In,em as Ht,en as Fn,eo as kn,ep as Mn,eq as Ln,er as An,u as Be,es as En,et as Nn,eu as Pn,B as Ze,ev as zn,ew as Tn,ex as Dn,dh as Jt,di as Qt,cZ as wt,c1 as qn,dd as Rn,ey as Ue,ez as At,R as Yn,df as _e,eA as Gn,eB as On,eC as Kn,eD as Xt,eE as Zt,eF as _n,eG as Bn,eH as Un,eI as Wn,eJ as Vn,eK as $n,eL as Hn,eM as Jn,eN as Qn,eO as wn,eP as Xn,ds as Et,eQ as Nt,eR as Zn,eS as er,eT as tr,eU as sr,eV as nr,eW as yt,eX as Qe,eY as pt,c6 as rr,eZ as lr,e_ as ar,e$ as ir,dj as or,f0 as dr,dk as cr,f1 as ur,f2 as hr,f3 as mr}from"./index-ccfcd4da.js";import{S as xr}from"./school_switcher_component-025f893f.js";import{I as ft}from"./index.es-ebd7e939.js";import{P as se}from"./index-27f5ca3f.js";import{L as oe}from"./index-885f566c.js";import{D as Se}from"./index-36291a54.js";import{G as pe}from"./index-efb9c68a.js";import{l as Fe}from"./index-0a57a0d3.js";import{D as st}from"./index-12434ef6.js";import{S as gr}from"./index-e57195d9.js";import{U as St}from"./index-200f56a0.js";import{C as et}from"./index-e733c2fd.js";import{A as vt}from"./index-8ddfcaf4.js";import{I as Ke}from"./index-e9b3f5aa.js";import{S as jr}from"./schoool_examinations_component-7bd9d977.js";import{A as es}from"./index-3bfb9ed3.js";import{a as ts,P as yr,R as pr,S as fr}from"./school_settings_component-c392d7cf.js";import{T as Sr}from"./index-48da9d12.js";import{I as vr}from"./index-08a49527.js";import{D as Ie}from"./index-440571f1.js";import{n as Cr}from"./index-a428051c.js";import{A as br}from"./index-7945450f.js";import{F as Ir}from"./index-b84643af.js";import{A as Fr}from"./Alert-a74bd568.js";import"./index-afc6ce50.js";import"./ActionButton-3b8e0c74.js";import"./defineProperty-396cb65c.js";import"./useNotification-bc6f4548.js";import"./DialogWrap-1d0538d4.js";import"./index-98406364.js";import"./localeData-8c06fba4.js";import"./SinglePicker-5ae69ed8.js";import"./index-5c2e1e93.js";import"./useMutateObserver-ca2a7753.js";import"./index-477d9320.js";import"./InputNumber-df6a3867.js";import"./Image-eeb38737.js";import"./Upload-a74f9032.js";import"./Rate-1c034551.js";import"./index-ba1d69b2.js";import"./index-a75cd6c4.js";import"./index-0da323dc.js";import"./fade-dd39912a.js";import"./Skeleton-a2d4f426.js";import"./InfoCircleFilled-f916d949.js";import"./ckeditor-6faf30fb.js";import"./transButton-719ccb9d.js";import"./index-7da8bd4f.js";import"./context-b6ad5cc5.js";function kr(t){return ps("MuiAlertTitle",t)}fs("MuiAlertTitle",["root"]);const Mr=["className"],Lr=t=>{const{classes:n}=t;return ks({root:["root"]},kr,n)},Ar=Ss(vs,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(t,n)=>n.root})(({theme:t})=>({fontWeight:t.typography.fontWeightMedium,marginTop:-2})),Er=s.forwardRef(function(n,c){const l=Cs({props:n,name:"MuiAlertTitle"}),{className:i}=l,m=bs(l,Mr),u=l,d=Lr(u);return e.jsx(Ar,Is({gutterBottom:!0,component:"div",ownerState:u,ref:c,className:Fs(d.root,i)},m))}),Nr=Er,Pr=Ms(e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOutlined"),zr=s.lazy(()=>xt(()=>import("./school_analytics-3bb2bcfa.js"),["assets/school_analytics-3bb2bcfa.js","assets/index-ccfcd4da.js","assets/index-5e5904d3.css","assets/analytic_card_component-5910d238.js","assets/Skeleton-a2d4f426.js","assets/index-b8a04bf2.js","assets/transButton-719ccb9d.js","assets/index-a75cd6c4.js"]).then(t=>({default:t.SchoolAnalytics}))),Tr=s.lazy(()=>xt(()=>import("./students_registration_bar_chart-9646d623.js"),["assets/students_registration_bar_chart-9646d623.js","assets/index-ccfcd4da.js","assets/index-5e5904d3.css","assets/index-d664ae32.js","assets/index-e733c2fd.js","assets/Skeleton-a2d4f426.js","assets/index-5c2e1e93.js"]).then(t=>({default:t.StudentsRegistrationLineChart}))),Dr=s.lazy(()=>xt(()=>import("./students_teachers_bar_chart-264e3d37.js"),["assets/students_teachers_bar_chart-264e3d37.js","assets/index-ccfcd4da.js","assets/index-5e5904d3.css","assets/index-d664ae32.js","assets/index-e733c2fd.js","assets/Skeleton-a2d4f426.js","assets/index-5c2e1e93.js"]).then(t=>({default:t.StudentsTeachersBarChart}))),qr=()=>{const[t,n]=s.useState(!0),[c,l]=s.useState(),[i,m]=s.useState([]),[u,d]=s.useState([]),o=async()=>{n(!0),Ls().then(h=>{n(!1),h&&(d(h.operatingTypes.map(C=>C.schoolType.code)),m(h.operatingTypes),l(h.data))})};return s.useEffect(()=>{document.title=xe.system_name+": School Manager",o()},[]),!t&&!c?e.jsx(ge,{direction:"horizontal",style:{width:"100%",height:"88vh",justifyContent:"center"},children:e.jsxs(B,{children:[e.jsx(ne,{children:e.jsx("h2",{children:"Your are not Connected to any Operation School"})}),e.jsx(ne,{style:{display:"flex",justifyContent:"center"},children:e.jsx(xr,{randKey:Math.random()})})]})}):e.jsxs("div",{style:{marginTop:10},children:[e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(zr,{operatingTypes:i,operationalSchool:c,operatingTypesCodes:u})}),e.jsxs(ne,{children:[e.jsx(B,{span:12,children:e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Tr,{})})}),e.jsx(B,{span:12,children:e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Dr,{})})})]})]})},Rr=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!0),[m,u]=s.useState(1),[d]=a.useForm(),[o,h]=s.useState(0),[C,k]=s.useState(0),[z,Y]=s.useState(!0),F=async L=>{Es(parseInt(L.toString())).then(A=>{A&&(A.success?(x.success(A.message),c(n.filter(I=>I.id.toString()!==L.toString())),t.onAdd(A.schoolEducationLevel)):x.error(A.message))})},b=async(L,A="")=>{Ns(L,A).then(I=>{I&&(k(I.total),h(I.pages),u(I.page),Y(I.hasNext),c([...n,...I.results]))}),i(!1)};return s.useEffect(()=>{b(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(a,{layout:"vertical",form:d,onFinish:L=>{n.length=0,c([]),b(1,L.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search Level(s)...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ne,{children:e.jsx(B,{span:24,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(se,{title:"Adding all education levels",description:"Are you sure to add all education levels?",overlayStyle:{zIndex:9999},onConfirm:()=>{n.forEach(L=>{F(L.id)})},disabled:n.length===0,children:e.jsx(E,{disabled:n.length===0,children:"Add All"})})})}),e.jsx(ie,{spinning:l,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(ft,{dataLength:C,next:()=>b(m),hasMore:z,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(ie,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(oe,{itemLayout:"horizontal",dataSource:n,renderItem:L=>e.jsxs("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:[e.jsx(oe.Item,{style:{marginBottom:1,padding:0},actions:[e.jsx(se,{title:"Are you sure to add this Education Level?",onConfirm:()=>F(L.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(E,{icon:e.jsx(Ge,{}),onClick:()=>{}})})],children:e.jsx(oe.Item.Meta,{title:e.jsxs("a",{children:[L.name,e.jsx(le,{color:"green",children:L.schoolType.name})]}),description:e.jsx(e.Fragment,{})})},"file-"+L.id),e.jsx(As,{})]})})})})})]})},Yr=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(1),[m,u]=s.useState(!1),[d,o]=s.useState(0),[h,C]=s.useState(!0),[k]=a.useForm(),z=async(F,b="",L=25)=>{C(!0),Ps(F,b,L,parseInt(t.educationLevel.id.toString())).then(A=>{A&&(o(A.total),i(A.page),u(A.hasNext),c([...n,...A.results]))}),C(!1)},Y=async F=>{zs(F,parseInt(t.educationLevel.id.toString())).then(b=>{b&&(b.success?(x.success(b.message),c(n.filter(L=>L.id!==F)),t.onAdd(b.schoolEducationLevelCombination)):x.error(b.message))})};return s.useEffect(()=>{z(1,"",25)},[t.randKey,t.educationLevel]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(a,{layout:"vertical",form:k,onFinish:F=>{z(1,F.key,25)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search Subject(s)...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(ie,{spinning:h,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(ft,{dataLength:d,next:()=>z(l),hasMore:m,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(ie,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(oe,{itemLayout:"horizontal",dataSource:n,renderItem:F=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(oe.Item,{style:{margin:0,padding:0},actions:[e.jsx(se,{title:"Are you sure to add this Combination?",onConfirm:()=>Y(F.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(E,{icon:e.jsx(Ge,{}),onClick:()=>{}})})],children:e.jsx(oe.Item.Meta,{title:e.jsxs("a",{children:[F.name,e.jsx("span",{style:{marginLeft:10},children:F.subjects.map(b=>e.jsx(le,{color:"green",children:b.name}))})]}),description:e.jsx(e.Fragment,{})})},"combination-"+F.id)})})})})})]})},Gr=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,z]=s.useState(!0),[Y]=a.useForm(),b=!pe.useBreakpoint().lg,L=async g=>{c([g,...n])},A=[{title:"Name",dataIndex:"name",fixed:!0,render:(g,S)=>e.jsx("span",{children:e.jsx("a",{children:S.combination.name})})},{title:"Subjects",dataIndex:"subjects",fixed:!0,render:(g,S)=>{var D,p;return e.jsx("span",{children:(p=(D=S==null?void 0:S.combination)==null?void 0:D.subjects)==null?void 0:p.map(T=>e.jsx(le,{color:"green",children:T.name}))})}},{title:"Date Created",dataIndex:"created",render:(g,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(S.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(g,S)=>e.jsx("a",{children:S!=null&&S.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(g,S)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsx(H,{children:e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(w,{title:"Delete Combination",children:e.jsx(se,{title:"Are you sure to delete this ",onConfirm:()=>I(S==null?void 0:S.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(S!=null&&S.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",href:"",rel:"noopener noreferrer",download:!0,children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:D=>D.preventDefault(),children:e.jsx(Le,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],I=async g=>{Ts(g).then(S=>{S&&(S.success?(x.success(S.message),c(n.filter(D=>D.id!==g))):x.error(S.message))})},q=async(g,S="",D=20)=>{var p;z(!0),Ds(g,S,D,parseInt(((p=t.schoolEducationLevel)==null?void 0:p.id.toString())??"0")).then(T=>{T&&(u(T.total),c([...T.results]))}),z(!1)};return s.useEffect(()=>{q(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:16,children:e.jsx(a,{layout:"vertical",form:Y,onFinish:g=>{C(g.key),n.length=0,q(1,g.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:b?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{size:"large",icon:e.jsx(de,{}),onClick:()=>i(!0),children:"Add Combination"})})]}),e.jsx(he,{loading:k,columns:A,dataSource:n,pagination:{onChange:(g,S)=>{o(S),q(g,h,S)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:"Adding School Education Level Combinations",anchor:"right",width:"35vw",onClose:g=>i(g),open:l,noOverFlow:!0,children:e.jsx(Yr,{randKey:Math.random(),onAdd:L,educationLevel:t.schoolEducationLevel})})]})},{TextArea:Or}=K,Kr=t=>{const[n]=a.useForm(),c=async l=>{qs(l,t.educationLevel.id).then(i=>{i&&(i.success?(x.success(i.message),t.onAdd(i.schoolEducationLevelGroup),n.resetFields()):x.error(i.message))})};return e.jsx(e.Fragment,{children:e.jsxs(a,{layout:"vertical",form:n,onFinish:l=>{c(l)},requiredMark:!1,children:[e.jsx("span",{children:t.educationLevel.educationLevel.name}),e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(Or,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},_r=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,z]=s.useState(!0),[Y]=a.useForm(),b=!pe.useBreakpoint().lg,L=async g=>{c([g,...n])},A=async g=>{Ys(g).then(S=>{S&&(S.success?(x.success(S.message),c(n.filter(D=>D.id!==g))):x.error(S.message))})},I=[{title:"Name",dataIndex:"name",fixed:!0,render:(g,S)=>e.jsx("span",{children:e.jsx("a",{children:S.name})})},{title:"Date Created",dataIndex:"created",render:(g,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(S.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(g,S)=>e.jsx("a",{children:S!=null&&S.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(g,S)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlayStyle:{zIndex:9999},overlay:e.jsx(H,{children:e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(w,{title:"Delete Group",children:e.jsx(se,{title:"Are you sure to delete this ",onConfirm:()=>A(S==null?void 0:S.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(S!=null&&S.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})})})}),children:e.jsx("a",{className:"ant-dropdown-link",onClick:D=>D.preventDefault(),children:e.jsx(Le,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],q=async(g,S="",D=20)=>{var p;z(!0),Rs(g,S,D,parseInt(((p=t.schoolEducationLevel)==null?void 0:p.id.toString())??"0")).then(T=>{T&&(u(T.total),c([...T.results]))}),z(!1)};return s.useEffect(()=>{q(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:16,children:e.jsx(a,{layout:"vertical",form:Y,onFinish:g=>{C(g.key),n.length=0,q(1,g.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:b?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{size:"large",icon:e.jsx(de,{}),onClick:()=>i(!0),children:"Add Group"})})]}),e.jsx(he,{loading:k,columns:I,dataSource:n,pagination:{onChange:(g,S)=>{o(S),q(g,h,S)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:"Adding School Education Level Group",anchor:"right",onClose:g=>i(g),open:l,noOverFlow:!0,width:"35vw",children:e.jsx(Kr,{randKey:Math.random(),onAdd:L,educationLevel:t.schoolEducationLevel})})]})},{Option:Br}=$,nt=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(null),d=async o=>{i(!0),Gs(o,t.regionId??0).then(h=>{h&&c(h.results)}),i(!1)};return s.useEffect(()=>{t.regionId&&(u(null),d(""))},[t.regionId]),e.jsx(e.Fragment,{children:e.jsx(a.Item,{name:t.name??"districtId",label:t.label??"District",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"District")+"!"}],children:e.jsx($,{loading:l,size:t.size??"large",value:m||t.districtId,disabled:!t.regionId,placeholder:"Please Choose "+(t.label??"District ...")+"!",style:{width:220},showSearch:!1,optionFilterProp:"children",filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),onSearch:o=>{o.length>3?d(o):d("")},onChange:o=>{o&&(u(o),t.onChange(parseInt(o)))},dropdownStyle:{zIndex:9999},children:n.map(o=>e.jsx(Br,{value:parseInt(o.id.toString()),children:o.name}))})})})},{Option:Ur}=$,ss=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(null),d=async o=>{i(!0);const{data:h}=await Q.custom({url:"",method:"get",meta:{operation:"schoolEducationLevelGroups",variables:{key:{value:o,type:"String",required:!1},schoolEducationLevelId:{value:t.educationLevelId,type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});c(h.results),i(!1)};return s.useEffect(()=>{t.educationLevelId&&d("")},[t.educationLevelId]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:l,children:e.jsx(a.Item,{name:t.name??"groupId",label:t.label??"Education Level Group",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"Ward")+"!"}],children:e.jsx($,{size:"large",value:m||t.groupId,disabled:!t.educationLevelId,placeholder:"Please Choose School Education Level Group ...",style:{width:450},showSearch:!1,optionFilterProp:"children",filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),onSearch:o=>{o.length>3?d(o):d("")},onChange:o=>{o&&(u(o),t.onChange(parseInt(o)))},dropdownStyle:{zIndex:9999},children:n.map(o=>e.jsx(Ur,{value:parseInt(o.id.toString()),children:o.name}))})})})})},{Option:Wr}=$,rt=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(null),[m,u]=s.useState(!0),d=async o=>{u(!0),Os(o).then(h=>{h&&c(h.results),u(!1)})};return s.useEffect(()=>{d("")},[]),e.jsx(e.Fragment,{children:e.jsx(a.Item,{name:t.name??"regionId",label:t.label??"Region",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"Region")+"!"}],children:e.jsx($,{loading:m,placeholder:"Please Choose "+(t.label??"Region ...")+"!",style:{width:220},size:t.size??"large",showSearch:!0,value:l||t.regionId,onChange:o=>{i(o),t.onChange(parseInt(o))},optionFilterProp:"children",filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),onSearch:o=>{o.length>3?d(o):d("")},dropdownStyle:{zIndex:9999},children:n.map(o=>e.jsx(Wr,{value:parseInt(o.id.toString()),children:o.name}))})})})},{Option:Vr}=$,lt=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(null),d=async o=>{i(!0),Ks(o,t.districtId).then(h=>{h&&c(h.results)}),i(!1)};return s.useEffect(()=>{t.districtId&&(u(null),d(""))},[t.districtId]),e.jsx(e.Fragment,{children:e.jsx(a.Item,{name:t.name??"wardId",label:t.label??"Ward",rules:[{required:t.required??!1,type:"integer",message:"Please Choose "+(t.label??"Ward")+"!"}],children:e.jsx($,{loading:l,size:t.size??"large",value:m||t.wardId,disabled:!t.districtId,placeholder:"Please Choose "+(t.label??"Ward ...")+"!",style:{width:220},showSearch:!1,optionFilterProp:"children",filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),onSearch:o=>{o.length>3?d(o):d("")},onChange:o=>{u(o),t.onChange(parseInt(o))},dropdownStyle:{zIndex:9999},children:n.map(o=>e.jsx(Vr,{value:parseInt(o.id.toString()),children:o.name}))})})})},{Option:ct}=$,ns=[];for(let t=2022;t<new Date().getFullYear()+5;t++)ns.push(e.jsx(ct,{children:t.toString()},t));const Pt=t=>{var f,M;const[n,c]=s.useState(null),[l,i]=s.useState(null),[m,u]=s.useState(null),[d,o]=s.useState(null),[h,C]=s.useState(null),[k,z]=s.useState(null),[Y,F]=s.useState(null),[b]=a.useForm(),[L,A]=s.useState(""),I=async r=>{F(r.format("YYYY-MM-DD"))},q=async r=>{z(r)},g=async r=>{b.setFieldsValue({year:parseInt(r.toString())}),C(parseInt(r.toString()))},S=async r=>{o(r)},D=async r=>{u(r)},p=async r=>{c(r)},T=async r=>{i(r)},v=async r=>{var U;const{data:j}=await Q.custom({url:"",method:"post",meta:{operation:"createSchoolEducationLevelStudent",variables:{schoolEducationLevelStudentId:{value:parseInt(((U=r.schoolEducationLevelStudentId)==null?void 0:U.toString())??"0"),type:"Int",required:!1},schoolEducationLevelId:{value:parseInt(t.educationLevel.id.toString()),type:"Int",required:!0},firstName:{value:r.firstName,type:"String",required:!0},middleName:{value:r.middleName,type:"String",required:!0},lastName:{value:r.lastName,type:"String",required:!0},email:{value:r.email,type:"String",required:!1},phones:{value:r.phones,type:"[String]",required:!1},registrationNumber:{value:r.registrationNumber,type:"String",required:!0},year:{value:parseInt(r.year.toString()),type:"Int",required:!0},gender:{value:r.gender,type:"String",required:!0},groupId:{value:r.groupId,type:"Int",required:!1},regionId:{value:r.regionId,type:"Int",required:!1},districtId:{value:r.districtId,type:"Int",required:!1},wardId:{value:r.wardId,type:"Int",required:!1},dob:{value:r.dob,type:"String",required:!1}},fields:["success","message",{schoolEducationLevelStudent:_s}]}}).catch(()=>(x.error("Error occured while creating student"),{data:null})).then(V=>V);j&&(j.success?(x.success(j.message),t.onAdd(j.schoolEducationLevelStudent,t.editting),b.resetFields()):(A(j.message),x.error(j.message)))};return s.useEffect(()=>{var r,j,U,V,R,G,X,me,je,ve,_,N,te,ee,ue,qe,Ne,Pe,Ae,ze,P,y,J,ye,Te,be,We,Ve;o((j=(r=t.student)==null?void 0:r.group)==null?void 0:j.id),C((U=t.student)==null?void 0:U.year),z((V=t.student)==null?void 0:V.member.gender),c((G=(R=t.student)==null?void 0:R.region)==null?void 0:G.id),i((me=(X=t.student)==null?void 0:X.district)==null?void 0:me.id),u((ve=(je=t.student)==null?void 0:je.ward)==null?void 0:ve.id),b.setFieldsValue({firstName:(_=t.student)==null?void 0:_.member.firstName,middleName:(N=t.student)==null?void 0:N.member.middleName,lastName:(te=t.student)==null?void 0:te.member.lastName,email:(ee=t.student)==null?void 0:ee.member.email,registrationNumber:(ue=t.student)==null?void 0:ue.member.registrationNumber,year:(qe=t.student)==null?void 0:qe.year,gender:(Ne=t.student)==null?void 0:Ne.member.gender,groupId:(Ae=(Pe=t.student)==null?void 0:Pe.group)==null?void 0:Ae.id,regionId:(P=(ze=t.student)==null?void 0:ze.region)==null?void 0:P.id,districtId:(J=(y=t.student)==null?void 0:y.district)==null?void 0:J.id,wardId:(Te=(ye=t.student)==null?void 0:ye.ward)==null?void 0:Te.id}),(be=t.student)!=null&&be.member.dob&&(F(Re((We=t.student)==null?void 0:We.member.dob)),b.setFieldsValue({dob:Re((Ve=t.student)==null?void 0:Ve.member.dob)}))},[t.editting,t.student,t.educationLevel]),e.jsxs(e.Fragment,{children:[L.length>0&&e.jsx(Fe.Alert,{message:"Error",description:L,closable:!0}),e.jsxs(a,{layout:"vertical",form:b,onFinish:r=>{var j;t.editting&&(r.schoolEducationLevelStudentId=(j=t.student)==null?void 0:j.id),r.groupId=parseInt(d),r.year=h,r.dob=Y,r.regionId=parseInt(n),r.districtId=parseInt(l),r.wardId=parseInt(m),v(r)},requiredMark:!0,children:[e.jsx(a.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(a.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(a.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10},children:e.jsx(w,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(E,{type:"dashed",onClick:()=>x("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(a.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(K,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(a.Item,{name:"phones",label:"Phones Number",rules:[{required:!1,type:"string",message:"Please input Phones Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Phones Numbers ..."})}),e.jsxs(ge,{direction:"horizontal",children:[e.jsx(a.Item,{name:"dob",label:"Date of Birth",rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(st,{onChange:I,disabledDate:r=>r&&r>Re().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(a.Item,{name:"gender",label:"Gender",rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:k,children:e.jsxs($,{placeholder:"Please Choose Gender ...",style:{width:220},onChange:q,dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(ct,{value:"female",children:"Female"}),e.jsx(ct,{value:"male",children:"Male"})]})}),e.jsx(a.Item,{name:"year",label:"Study Year",rules:[{required:!0,type:"integer",message:"Please choose Year"}],initialValue:h?parseInt(h.toString()):new Date().getFullYear(),children:e.jsx($,{value:h?parseInt(h.toString()):new Date().getFullYear(),placeholder:"Please Choose Year ...",style:{width:220},onChange:g,dropdownStyle:{zIndex:9999},children:ns})})]}),e.jsxs(ge,{direction:"horizontal",children:[e.jsx(rt,{onChange:p,regionId:n,name:"region",label:"Region",size:"middle",required:!0}),e.jsx(nt,{regionId:parseInt(n),districtId:l,onChange:T,name:"district",label:"District",size:"middle",required:!0}),e.jsx(lt,{districtId:parseInt(l),wardId:m,onChange:D,name:"ward",label:"Ward",size:"middle",required:!1})]}),e.jsx(ss,{educationLevelId:parseInt(t.educationLevel.id),groupId:(M=(f=t.student)==null?void 0:f.group)==null?void 0:M.id,onChange:S,name:"group",label:"School Education Level Group",size:"middle",required:!1}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},{Option:it}=$,ut=[];for(let t=2022;t<new Date().getFullYear()+5;t++)ut.push(t);const $r=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(new Date().getFullYear()),[m,u]=s.useState(!0),[d]=a.useForm(),[o,h]=s.useState([]),[C,k]=s.useState(""),z=b=>{u(b)},Y=async(b,L="",A=20)=>{var q;const{data:I}=await Q.custom({url:"",method:"get",meta:{operation:"schoolEducationLevelsToMigrate",variables:{schoolEducationLevelId:{value:parseInt(((q=t.schoolEducationLevel)==null?void 0:q.id.toString())??"0"),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Bs}]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(g=>g);I&&h(I.results)},F=async b=>{var A;c(!0);const{data:L}=await Q.custom({url:"",method:"post",meta:{operation:"studentsMigration",variables:{schoolEducationLevelId:{value:parseInt(((A=t.schoolEducationLevel)==null?void 0:A.id.toString())??"0"),type:"Int",required:!0},schoolEducationLevelToId:{value:b.school_education_level_to_id,type:"Int",required:!0},yearFrom:{value:b.yearFrom,type:"Int",required:!0},yearTo:{value:b.yearTo,type:"Int",required:!0},honor:{value:b.honor,type:"Boolean",required:!0}},fields:["success","message"]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(I=>I);L&&(L.success?(x.success(L.message),d.resetFields(),t.onFinish(b.yearTo)):(k(L.message),x.error(L.message))),c(!1)};return s.useEffect(()=>{d.resetFields(),Y(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:10},children:[e.jsx(Fe.Alert,{message:"Info",description:"Only Active Members(Students) will be migration"}),C.length>0&&e.jsx(Fe.Alert,{message:"Error",description:C,closable:!0})]}),e.jsx(ie,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:d,onFinish:b=>{F(b)},requiredMark:!0,children:[e.jsx(a.Item,{name:"school_education_level_to_id",label:"School Education Level to Migrate From",rules:[{required:!0,type:"integer",message:"Please choose ..."}],children:e.jsx($,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:"",onChange:b=>{},dropdownStyle:{zIndex:9999},children:o.map(b=>e.jsx(it,{value:parseInt(b.id.toString()),children:b.educationLevel.name},b.id.toString()))})}),e.jsx(a.Item,{name:"yearFrom",label:"Year to Migrate From",initialValue:l,rules:[{required:!0,type:"integer",message:"Please choose ..."}],children:e.jsx($,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:new Date().getFullYear(),onChange:b=>i(b),dropdownStyle:{zIndex:9999},children:ut.map(b=>e.jsx(it,{value:b,children:b.toString()},b.toString()))})}),e.jsx(a.Item,{name:"yearTo",label:"Year to Migrate To",rules:[{required:!0,type:"integer",message:"Please choose ..."}],children:e.jsx($,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:"",onChange:b=>{},dropdownStyle:{zIndex:9999},children:ut.filter(b=>b>l).map(b=>e.jsx(it,{value:b,children:b.toString()},b.toString()))})}),e.jsx(a.Item,{name:"honor",label:"Honor Education Examinations Results",initialValue:m,rules:[{required:!0,type:"boolean",message:"Please choose ..."}],children:e.jsx(gr,{defaultChecked:!0,onChange:z})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})]})},{Option:rs}=$,ls=[e.jsx(rs,{value:"",children:"Please choose Academic Year"})];for(let t=2022;t<new Date().getFullYear()+5;t++)ls.push(e.jsx(rs,{value:t,children:t.toString()},t.toString()));const Hr=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,Jr=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(""),m=d=>{t.form.setFieldsValue({groupId:d})},u=async d=>{c(!0),i(""),Us(d).then(o=>{o&&(o.success?(x(o.message),t.onFinish()):(i(o.message),x.error(o.message)))}),c(!1)};return s.useEffect(()=>{},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:10},children:[e.jsx(Fe.Alert,{message:"Info",description:"Please for a successfully upload, please use the template provided below, make sure the columns names remains the same"}),l.length>0&&e.jsx(Fe.Alert,{message:"Error",description:l,closable:!0})]}),e.jsx(ie,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:d=>{d.school_education_level_id=t.educationLevel.id,u(d)},requiredMark:!0,children:[e.jsx(ss,{educationLevelId:parseInt(t.educationLevel.id),onChange:m,name:"groupId",label:"Education Level Group"}),e.jsx(a.Item,{name:"year",label:"Academic Year",rules:[{required:!0,type:"integer",message:"Please select academic year"}],children:e.jsx($,{size:"large",style:{width:"100%"},placeholder:"Please Select Academic Year",onChange:d=>{},dropdownStyle:{zIndex:9999},children:ls})}),e.jsx(a.Item,{label:"Students Excel File",children:e.jsx(a.Item,{name:"files",valuePropName:"fileList",getValueFromEvent:Hr,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload students excel file"}],children:e.jsxs(St.Dragger,{name:"files",accept:".xls, .xlsx",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(tt,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsxs("span",{children:["Download Uploading Excel Format Template",e.jsx("span",{style:{marginLeft:10},children:e.jsxs("a",{href:xe.student_registration_template_file,target:"_blank",children:[e.jsx(gt,{}),"Download"]})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Register"})})]})})]})},{Option:as}=$,ht=[e.jsx(as,{value:null,children:"Please Select Year"},"default")];for(let t=2022;t<new Date().getFullYear()+5;t++)ht.push(e.jsx(as,{value:t,children:t.toString()},t));const Qr=t=>{const[n,c]=s.useState(null),[l,i]=s.useState(null),m=async o=>{c(o)},u=async o=>{i(o)},d=async(o,h)=>{const{data:C}=await Q.custom({url:"",method:"post",meta:{operation:"studentsLoginAuthorize",variables:{authorizationType:{value:o,type:"Int",required:!0},schoolEducationLevelId:{value:parseInt(t.schoolEducationLevel.id),type:"Int",required:!0},year:{value:h,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(k=>k);C&&(C.success?(x.success(C.message),t.onFinish()):x.error(C.message))};return s.useEffect(()=>{},[]),e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{fontSize:20},children:"Platform supports Two mode of Default Login Authorizations to Students"}),e.jsxs(et,{actions:[e.jsx(se,{title:e.jsx(e.Fragment,{children:e.jsxs(ge,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Authorize Login?"}),e.jsx("span",{style:{height:10}}),e.jsx("span",{children:e.jsx($,{value:n||null,placeholder:"Please Choose Year ...",style:{width:220},onChange:m,allowClear:!0,onClear:()=>c(null),dropdownStyle:{zIndex:9999},children:ht})})]})}),onConfirm:()=>d(1,n),onCancel:()=>{},okButtonProps:{disabled:n===null},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(E,{icon:e.jsx(Xe,{}),children:"Authorize"})})],children:[e.jsxs("span",{style:{fontSize:18},children:["By Using Registration Number of Students as Default ",e.jsx("b",{children:"Username"})," ","and",e.jsx("b",{children:"Password"})]}),e.jsx("span",{style:{display:"block",color:"red"},children:"This action will be applicable only to those students with no Login Access to the Platform"})]}),e.jsxs(et,{actions:[e.jsx(se,{title:e.jsx(e.Fragment,{children:e.jsxs(ge,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Authorize Login?"}),e.jsx("span",{style:{height:10}}),e.jsx("span",{children:e.jsx($,{value:l||null,placeholder:"Please Choose Year ...",style:{width:220},onChange:u,allowClear:!0,onClear:()=>i(null),dropdownStyle:{zIndex:9999},children:ht})})]})}),onConfirm:()=>d(2,l),onCancel:()=>{},okButtonProps:{disabled:l===null},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(E,{icon:e.jsx(Xe,{}),children:"Authorize"})})],style:{marginTop:50},children:[e.jsxs("span",{style:{fontSize:18},children:["By Using Email/Phone of Students as Default ",e.jsx("b",{children:"Username"}),", While Default",e.jsx("b",{children:"Password"})," will be Randomly Generated"]}),e.jsx("span",{style:{display:"block",color:"red"},children:"This action will be applicable only to those students with no Login Access to the Platform"})]})]})},{Option:wr}=$,is=[];for(let t=2022;t<new Date().getFullYear()+5;t++)is.push(e.jsx(wr,{children:t.toString()},t.toString()));const Xr=t=>{var Pe,Ae,ze;const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(!1),[h,C]=s.useState(0),[k,z]=s.useState(20),[Y,F]=s.useState(""),[b,L]=s.useState(!0),[A]=a.useForm(),[I]=a.useForm(),[q]=a.useForm(),[g,S]=s.useState(!1),[D,p]=s.useState(new Date().getFullYear()),[T,v]=s.useState(!1),[f,M]=s.useState(!1),[r,j]=s.useState([]),[U,V]=s.useState(!1),R=async P=>{c(P),V(!0)},G=async()=>{M(!0)},X=P=>{c(P),S(!0)},me=async(P,y=!1)=>{y?(i(l.map(J=>J.id===P.id?P:J)),S(!1)):i([P,...l])},je=async(P,y)=>{Js(P,y).then(J=>{J&&(J.success?(x.success(J.message),i(l.filter(ye=>ye.id!==P))):x.error(J.message))})},ve=async P=>{Qs(P).then(y=>{y&&(y.success?(x.success(y.message),i(l.filter(J=>J.id!==P))):x.error(y.message))})},_=async()=>{ue(1,"",20,D)},N=P=>{P.target.checked&&j(r.concat(parseInt(P.target.value))),P.target.checked||j(r.filter(y=>y!==parseInt(P.target.value)))},te=e.jsx(H,{items:[{key:"1",label:e.jsx(se,{title:"Are you sure to delete All Students?",onConfirm:()=>x("Deleting"),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsxs("a",{children:[e.jsx(ce,{color:"red",style:{color:"red"}}),e.jsx("span",{style:{marginLeft:3},children:"Delete All"})]})})},{key:"2",label:e.jsx(se,{title:"Are you sure to delete All Selected Students?",onConfirm:()=>x("Deleting Selected"),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsxs("a",{children:[e.jsx(ce,{color:"red",style:{color:"red"}}),e.jsx("span",{style:{marginLeft:3},children:"Delete Selected"})]})})}]}),ee=[{title:e.jsx(e.Fragment,{children:e.jsx(ke,{overlay:te,overlayStyle:{zIndex:9999},children:e.jsx("a",{onClick:P=>P.preventDefault(),children:e.jsxs(ge,{children:["Action(s)",e.jsx(Vs,{})]})})})}),dataIndex:"year",fixed:!0,render:(P,y,J)=>e.jsx("span",{children:e.jsx(Me,{onChange:N,value:y.id,defaultChecked:r.filter(ye=>ye===y.id).length>0})})},{title:"Year",dataIndex:"year",fixed:!0,render:(P,y,J)=>e.jsx("span",{children:y.year})},{title:"Reg#",dataIndex:"registrationNumber",fixed:!0,render:(P,y,J)=>e.jsx("span",{children:e.jsx("a",{children:y.member.registrationNumber})})},{title:"First Name",dataIndex:"firstName",fixed:!0,render:(P,y,J)=>e.jsx("span",{children:y.member.firstName})},{title:"Middle Name",dataIndex:"middleName",fixed:!0,render:(P,y,J)=>e.jsx("span",{children:y.member.middleName})},{title:"Last Name",dataIndex:"lastName",fixed:!0,render:(P,y,J)=>e.jsx("span",{children:y.member.lastName})},{title:"Group",dataIndex:"group",fixed:!0,render:(P,y,J)=>{var ye;return e.jsx("span",{children:y.group?(ye=y.group)==null?void 0:ye.name:"No Group"})}},{title:"Gender",dataIndex:"gender",fixed:!0,render:(P,y,J)=>e.jsx("span",{children:y.member.gender})},{title:"Phone",dataIndex:"phone",fixed:!0,render:(P,y,J)=>e.jsxs(e.Fragment,{children:[y.member.phone&&e.jsx("span",{children:y.member.phone}),!y.member.phone&&e.jsxs(e.Fragment,{children:[e.jsx(le,{color:"red",children:"No Phone Number"}),e.jsx(w,{title:"View/Add Phone Number",color:"green",children:e.jsx(E,{icon:e.jsx(Ye,{}),onClick:()=>R(y)})})]})]})},{title:"Email",dataIndex:"email",fixed:!0,render:(P,y,J)=>e.jsxs(e.Fragment,{children:[y.member.email&&e.jsx("span",{children:y.member.email}),!y.member.email&&e.jsxs(e.Fragment,{children:[e.jsx(le,{color:"red",children:"No Email Address"}),e.jsx(w,{title:"View/Add Email Address",color:"green",children:e.jsx(E,{icon:e.jsx(Ye,{}),onClick:()=>R(y)})})]})]})},{title:"Authed",dataIndex:"isAuthed",render:(P,y,J)=>e.jsx("a",{children:y.member.user?e.jsx(e.Fragment,{children:y!=null&&y.member.isAuthed?e.jsx(le,{color:"green",children:"Authed"}):e.jsx(le,{color:"red",children:"Not Authed"})}):e.jsx(le,{color:"red",children:"Not Authed"})})},{title:"Status",dataIndex:"isActive",render:(P,y,J)=>e.jsx("a",{children:y!=null&&y.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(P,y,J)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlayStyle:{zIndex:9999},overlay:e.jsxs(H,{children:[y!=null&&y.isActive?e.jsx(H.Item,{icon:e.jsx($s,{}),children:e.jsx(w,{title:"Blocking Student",placement:"left",color:"red",children:e.jsx(se,{title:"Are you sure to Block Student ",onConfirm:()=>je(y==null?void 0:y.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(y!=null&&y.canManage),overlayStyle:{zIndex:9999},children:e.jsx(E,{type:"text",disabled:!(y!=null&&y.canManage),children:"Block"})})})}):e.jsx(H.Item,{icon:e.jsx(Gt,{}),children:e.jsx(w,{title:"Unblocking Student",placement:"left",color:"green",children:e.jsx(se,{title:"Are you sure to Unblock Student ",onConfirm:()=>je(y==null?void 0:y.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(y!=null&&y.canManage),overlayStyle:{zIndex:9999},children:e.jsx(E,{type:"text",disabled:!(y!=null&&y.canManage),children:"Unblock"})})})}),e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(w,{title:"Delete Student",placement:"left",children:e.jsx(se,{title:"Are you sure to delete Student ",onConfirm:()=>ve(y==null?void 0:y.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(y!=null&&y.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})})}),e.jsx(H.Item,{icon:e.jsx(Ee,{}),disabled:!(y!=null&&y.canEdit),onClick:()=>X(y),children:e.jsx(w,{title:"Edit Student Informations",placement:"left",children:e.jsx("a",{rel:"noopener noreferrer",children:"Edit"})})}),e.jsx(H.Item,{icon:e.jsx(Ot,{}),disabled:!(y!=null&&y.canManage),onClick:()=>x("Credentials"),children:e.jsx(w,{title:"Recreate Credentials",placement:"left",children:e.jsx("a",{rel:"noopener noreferrer",children:"Reset Credentials"})})})]}),children:e.jsx("a",{className:"ant-dropdown-link",onClick:ye=>ye.preventDefault(),children:e.jsx(Le,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],ue=async(P,y="",J=20,ye=new Date().getFullYear())=>{var Te;Hs(P,y,J,ye,((Te=t.schoolEducationLevel)==null?void 0:Te.id)??0).then(be=>{be&&(C(be.total),i([...be.results]))}),L(!1)},qe=async()=>{ue(1,"",20,D),I.resetFields()},Ne=async P=>{p(P),q.setFieldsValue({year:P}),ue(1,"",20,P)};return s.useEffect(()=>{q.resetFields(),p(new Date().getFullYear()),ue(1,"",20,D)},[t.randKey,t.schoolEducationLevel]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsxs(B,{span:24,style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:[e.jsx(E,{size:"large",disabled:l.length===0,icon:e.jsx(Xe,{}),onClick:()=>o(!0),children:"Auth"}),e.jsx(E,{size:"large",icon:e.jsx(de,{}),onClick:()=>u(!0),children:"Add Student"}),e.jsx(E,{size:"large",icon:e.jsx(dt,{}),onClick:G,children:"From Another School"}),e.jsx(E,{size:"large",icon:e.jsx(dt,{}),onClick:G,children:"Students Migration From"}),e.jsx(E,{size:"large",icon:e.jsx(Yt,{}),onClick:()=>v(!0),children:"Upload Student"})]}),e.jsx(B,{span:2,children:e.jsx(a,{layout:"vertical",form:q,onFinish:P=>{},children:e.jsx(a.Item,{name:"year",children:e.jsx($,{size:"large",style:{width:"100%"},placeholder:"Please Select Year",defaultValue:D,value:D,onChange:P=>{p(parseInt(P.toString())),ue(1,"",20,parseInt(P.toString()))},dropdownStyle:{zIndex:9999},children:is})})})}),e.jsx(B,{span:12,children:e.jsx(a,{layout:"vertical",form:A,onFinish:P=>{F(P.key),l.length=0,ue(1,P.key,k,D)},children:e.jsxs(ne,{children:[e.jsx(B,{span:22,children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(B,{span:2,children:e.jsx(E,{icon:e.jsx(ae,{}),size:"large",onClick:()=>A.submit()})})]})})})]}),l.length===0&&e.jsx(Ws,{image:"/images/nodata.png",imageStyle:{height:180},description:e.jsx("span",{style:{fontSize:20},children:"There are not Students Registered, please you can use the registration menues above to Register Students"})}),l.length>0&&e.jsx(he,{loading:b,columns:ee,dataSource:l,pagination:{onChange:(P,y)=>{z(y),ue(P,Y,y,D)},total:h,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0,y:"calc(100vh - 298px)"}}),e.jsx(Se,{title:"Registering a Student for "+((Pe=t.schoolEducationLevel)==null?void 0:Pe.educationLevel.name),anchor:"right",onClose:P=>u(P),open:m,noOverFlow:!0,width:"80vw",children:e.jsx(Pt,{editting:!1,randKey:Math.random(),onAdd:me,educationLevel:t.schoolEducationLevel})}),e.jsx(Se,{title:"Edit Student Informations",anchor:"right",onClose:P=>S(P),open:g,noOverFlow:!0,width:"70vw",children:e.jsx(Pt,{editting:!0,student:n,randKey:Math.random(),onAdd:me,educationLevel:t.schoolEducationLevel})}),e.jsx(re,{title:`Upload Student for ${(Ae=t.schoolEducationLevel)==null?void 0:Ae.educationLevel.name}`,open:T,onClose:P=>v(P),children:e.jsx(Jr,{educationLevel:t.schoolEducationLevel,randKey:Math.random(),onFinish:qe,form:I}),width:"50vw"}),e.jsx(re,{title:"Students Login Authorization",open:d,onClose:P=>o(P),children:e.jsx(Qr,{schoolEducationLevel:t.schoolEducationLevel,onFinish:_}),width:"50vw"}),e.jsx(re,{title:((ze=t.schoolEducationLevel)==null?void 0:ze.educationLevel.name)+" Students Migrations",open:f,onClose:P=>M(P),children:e.jsx($r,{randKey:Math.random(),schoolEducationLevel:t.schoolEducationLevel,onFinish:Ne}),width:"50vw"}),e.jsx(re,{title:(n==null?void 0:n.member.firstName)+" "+(n==null?void 0:n.member.middleName)+" "+(n==null?void 0:n.member.lastName)+" Contacts",open:U,onClose:P=>V(P),children:e.jsx(vt,{type:"info",description:"Contacts"}),width:"50vw"})]})},Zr=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!0),[m,u]=s.useState(1),[d]=a.useForm(),[o,h]=s.useState(0),[C,k]=s.useState(0),[z,Y]=s.useState(!0),[F,b]=s.useState(2);jt();const L=async(I,q)=>{ws(I,q,F).then(g=>{g.success?(x.success(g.message),c(n.filter(S=>S.id.toString()!==I.toString())),t.onAdd(g.schoolEducationLevelSubject)):x.error(g.message)})},A=async(I,q="")=>{i(!0),Xs(I,q,t.schoolEducationLevel.id).then(g=>{g&&(k(g.total),h(g.pages),u(g.page),Y(g.hasNext),c([...g.results]))}),i(!1)};return s.useEffect(()=>{n.length=0,c([]),A(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(a,{layout:"vertical",form:d,onFinish:I=>{n.length=0,c([]),A(1,I.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search Subject(s)...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(ie,{spinning:l,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"78vh",overflowY:"auto"},children:e.jsx(oe,{itemLayout:"horizontal",dataSource:n,renderItem:I=>{var q;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(oe.Item,{style:{margin:0,padding:0},actions:[e.jsx(se,{title:e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Are you sure you want to add"," ",e.jsx("b",{children:I.subject.name})," to"," ",e.jsx("b",{children:(q=t.schoolEducationLevel)==null?void 0:q.educationLevel.name}),"?"]}),e.jsx("div",{style:{marginTop:5},children:e.jsx(a,{layout:"vertical",children:e.jsx(a.Item,{label:"Max Number of Periods Per Week",children:e.jsx(Ke,{size:"large",min:1,max:7,defaultValue:2,style:{width:"100%"},onChange:g=>{b(g)}})})})})]}),onConfirm:()=>L(I.id,t.schoolEducationLevel.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(E,{icon:e.jsx(Ge,{}),onClick:()=>{}})})],children:e.jsx(oe.Item.Meta,{title:e.jsxs("a",{children:[I.subject.name,e.jsx("span",{style:{marginLeft:10},children:e.jsx(le,{color:"green",children:I.subject.schoolType.name})})]}),description:e.jsx(e.Fragment,{})})},"subject-"+I.id)})}})}),e.jsx("div",{style:{marginTop:10,marginBottom:10,display:"flex",justifyContent:"center"},children:e.jsx(Kt,{current:m,total:C,pageSize:10,onChange:I=>{A(I)},style:{textAlign:"center"}})})]})]})},el=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState([]),[m,u]=s.useState([]),d=async()=>{const{data:h}=await Q.custom({url:"",method:"post",meta:{operation:"createAlternateSubjects",variables:{educationLevelSubjectId:{value:parseInt(t.subject.id),type:"Int",required:!0},choices:{value:m,type:"[Int]",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error occured while Creating Alternate subjects"),{data:null})).then(C=>C);h&&(h.success?(x.success(h.message),o(),u([]),t.onFinish()):x.error(h.message))},o=async()=>{const{data:h}=await Q.custom({url:"",method:"get",meta:{operation:"alternateSubjectsChoices",variables:{subjectId:{value:parseInt(t.subject.id),type:"Int",required:!0}},fields:["choices"]}}).catch(()=>(x.error("Error occured while Examinations Types"),{data:null})).then(C=>C);h&&i(h.choices)};return s.useEffect(()=>{o()},[t.randKey]),e.jsx(e.Fragment,{children:e.jsxs(ie,{spinning:n,children:[e.jsx(oe,{dataSource:l,renderItem:h=>e.jsx(oe.Item,{children:e.jsx(ne,{children:e.jsxs(B,{span:24,children:[h.disabled&&e.jsx(Me,{disabled:h.disabled,checked:h.disabled,children:e.jsx("span",{style:{marginLeft:5},children:h.name})}),!h.disabled&&e.jsx(Me,{onChange:C=>{C.target.checked?u([...m,h.value]):u(m.filter(k=>k!==h.value))},children:e.jsx("span",{style:{marginLeft:5},children:h.name})})]})})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{size:"large",disabled:m.length===0,onClick:()=>d(),children:"Save"})})]})})},tl=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(0),[m,u]=s.useState(20),[d,o]=s.useState(""),[h,C]=s.useState(!0),[k]=a.useForm(),Y=!pe.useBreakpoint().lg,F=async A=>{var I;en(A,parseInt(((I=t.schoolEducationLevelSubject)==null?void 0:I.id.toString())??"0")).then(q=>{q&&(q.success?(x.success(q.message),c(n.filter(g=>g.id!==A)),t.onAdd(q.schoolEducationLevelSubjectTeacher)):x.error(q.message))})},b=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(A,I,q)=>e.jsx("span",{children:e.jsx("a",{children:I.user.fullName})})},{title:"",dataIndex:"action",render:(A,I,q)=>{var g;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(w,{title:"Adding "+((g=t.schoolEducationLevelSubject)==null?void 0:g.schoolSubject.subject.name)+" Teacher",placement:"bottom",children:e.jsx(E,{icon:e.jsx(_t,{}),onClick:()=>F(I==null?void 0:I.id),children:"Add"})})})}}],L=async(A,I="",q=20)=>{var g;C(!0),Zs(A,parseInt(((g=t.schoolEducationLevelSubject)==null?void 0:g.id.toString())??"0"),I,q).then(S=>{S&&(i(S.total),c([...S.results])),C(!1)})};return s.useEffect(()=>{L(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{style:{marginTop:10},children:e.jsx(B,{span:16,children:e.jsx(a,{layout:"vertical",form:k,onFinish:A=>{o(A.key),n.length=0,L(1,A.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(he,{loading:h,columns:b,dataSource:n,pagination:{onChange:(A,I)=>{u(I),L(A,d,I)},total:l,pageSize:m,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}})]})},sl=t=>{var S;const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,z]=s.useState(!0),[Y]=a.useForm(),b=!pe.useBreakpoint().lg,L=async D=>{c([D,...n])},A=async D=>{sn(D).then(p=>{p&&(p.success?(x.success(p.message),c(n.filter(T=>T.id!==D))):x.error(p.message))})},I=async(D,p)=>{nn(D,p).then(T=>{T&&(T.success?(x.success(T.message),c(n.map(v=>v.id===D?T.schoolEducationLevelSubjectTeacher:v))):x.error(T.message))})},q=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(D,p,T)=>e.jsx("span",{children:e.jsx("a",{children:p.schoolMember.user.fullName})})},{title:"Date Created",dataIndex:"created",render:(D,p,T)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(p.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(D,p,T)=>e.jsx("a",{children:p!=null&&p.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(D,p,T)=>{var v,f,M,r,j;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Remove "}),e.jsx("span",{style:{fontWeight:"bolder"},children:p.schoolMember.user.fullName}),e.jsx("span",{children:" as "}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:3},children:(v=t.schoolEducationLevelSubject)==null?void 0:v.schoolSubject.subject.name}),e.jsx("span",{style:{marginLeft:3},children:"Teacher"})]}),onConfirm:()=>A(p==null?void 0:p.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(p!=null&&p.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Remove"})})}),p!=null&&p.isActive?e.jsx(H.Item,{icon:e.jsx(Bt,{}),children:e.jsx(se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Lock "}),e.jsx("span",{style:{fontWeight:"bolder"},children:p.schoolMember.user.fullName}),e.jsx("span",{children:" as "}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:3},children:(f=t.schoolEducationLevelSubject)==null?void 0:f.schoolSubject.subject.name}),e.jsx("span",{style:{marginLeft:3},children:"Teacher"})]}),onConfirm:()=>I(p==null?void 0:p.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(p!=null&&p.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Block"})})}):e.jsx(H.Item,{icon:e.jsx(Ut,{}),children:e.jsx(se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Unblock "}),e.jsx("span",{style:{fontWeight:"bolder"},children:p.schoolMember.user.fullName}),e.jsx("span",{children:" as "}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:3},children:(j=(r=(M=t.schoolEducationLevelSubject)==null?void 0:M.schoolSubject)==null?void 0:r.subject)==null?void 0:j.name}),e.jsx("span",{style:{marginLeft:3},children:"Teacher"})]}),onConfirm:()=>I(p==null?void 0:p.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(p!=null&&p.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Unblock"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Le,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}}],g=async(D,p="",T=20)=>{var v;z(!0),tn(D,p,T,((v=t.schoolEducationLevelSubject)==null?void 0:v.id)??0).then(f=>{f&&(u(f.total),c([...f.results]))}),z(!1)};return s.useEffect(()=>{g(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:16,children:e.jsx(a,{layout:"vertical",form:Y,onFinish:D=>{C(D.key),n.length=0,g(1,D.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:b?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{size:"large",icon:e.jsx(de,{}),onClick:()=>i(!0),children:"Add Teacher"})})]}),e.jsx(he,{loading:k,columns:q,dataSource:n,pagination:{onChange:(D,p)=>{o(p),g(D,h,p)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}}),e.jsx(re,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{marginRight:3},children:"Adding"}),e.jsx("span",{style:{fontWeight:"bolder"},children:(S=t.schoolEducationLevelSubject)==null?void 0:S.schoolSubject.subject.name}),e.jsx("span",{style:{marginLeft:3},children:"Teachers"})]}),width:"40vw",open:l,onClose:D=>i(D),children:e.jsx(tl,{schoolEducationLevelSubject:t.schoolEducationLevelSubject,randKey:Math.random(),onAdd:L})})]})},nl=t=>{var R,G,X,me,je,ve;const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(!1),[h,C]=s.useState(0),[k,z]=s.useState(20),[Y,F]=s.useState(""),[b,L]=s.useState(!0),[A]=a.useForm(),[I,q]=s.useState(!1),[g,S]=s.useState(0),p=!pe.useBreakpoint().lg,T=async _=>{c(_),q(!0)},v=async _=>{c(_),o(!0)},f=async _=>{i([_,...l])},M=async _=>{on(_).then(N=>{N.success?(x.success(N.message),i(l.filter(te=>te.id!==_))):x.error(N.message)})},r=async(_,N)=>{dn(_,N).then(te=>{te.success?(x.success(te.message),i(l.map(ee=>ee.id===_?te.schoolEducationLevelSubject:ee))):x.error(te.message)})},j=[{title:"Name",dataIndex:"name",fixed:!0,render:(_,N,te)=>{var ee;return e.jsxs("span",{children:[N.schoolSubject.subject.name,(N==null?void 0:N.combination)&&e.jsx(le,{style:{marginLeft:10},color:"red",children:(ee=N==null?void 0:N.combination)==null?void 0:ee.name})]})}},{title:"Subject Type",dataIndex:"subjecttype",fixed:!0,render:(_,N,te)=>e.jsx("span",{children:N.subjectTypeDisplay})},{title:"Teachers",dataIndex:"teachers",fixed:!0,render:(_,N,te)=>{var ee;return e.jsx("span",{children:e.jsx(w,{title:((ee=t.schoolEducationLevel)==null?void 0:ee.educationLevel.name)+"  "+N.schoolSubject.subject.name+" Teachers",children:e.jsx("a",{onClick:()=>v(N),children:N.totalTeachers})})})}},{title:"Max Periods/Week",dataIndex:"maxPeriodsPerWeek",render:(_,N,te)=>e.jsx(e.Fragment,{children:e.jsx(Fe.Popconfirm,{title:"Ajust Max Periods",description:e.jsx(e.Fragment,{children:e.jsx(a,{layout:"vertical",children:e.jsx(a.Item,{label:"Max Number of Periods Per Week "+g,children:e.jsx(Ke,{defaultValue:g,onChange:ee=>S(ee),style:{width:"100%"}})})})}),onConfirm:()=>{rn(N.id,g===0||g===null?N.maxPeriodsPerWeek:g).then(ee=>{ee&&ee.success&&i(l.map(ue=>ue.id===ee.schoolEducationLevelSubject.id?ee.schoolEducationLevelSubject:ue))})},onCancel:()=>{},okButtonProps:{disabled:g===0||g===null},onOpenChange:ee=>{S(ee?N.maxPeriodsPerWeek:0)},okText:"Update",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(le,{style:{cursor:"pointer"},children:N.maxPeriodsPerWeek})})})},{title:"Date Created",dataIndex:"created",render:(_,N,te)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(N.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(_,N,te)=>e.jsx(e.Fragment,{children:N!=null&&N.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(_,N,te)=>{var ee;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(w,{title:"Delete Subject",children:e.jsx(Fe.Popconfirm,{title:"Are you sure to delete this ",onConfirm:()=>M(N==null?void 0:N.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(N!=null&&N.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})})}),e.jsx(H.Item,{icon:e.jsx(_t,{}),onClick:()=>v(N),children:e.jsx(w,{title:((ee=t.schoolEducationLevel)==null?void 0:ee.educationLevel.name)+"  "+N.schoolSubject.subject.name+" Teachers",children:e.jsx("a",{children:"Teachers"})})}),N!=null&&N.isActive?e.jsx(H.Item,{icon:e.jsx(Bt,{}),children:e.jsx(Fe.Popconfirm,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Block "}),e.jsx("span",{style:{fontWeight:"bolder"},children:N.schoolSubject.subject.name})]}),onConfirm:()=>r(N==null?void 0:N.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(N!=null&&N.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Block"})})}):e.jsx(H.Item,{icon:e.jsx(Ut,{}),children:e.jsx(Fe.Popconfirm,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Unblock "}),e.jsx("span",{style:{fontWeight:"bolder"},children:N.schoolSubject.subject.name})]}),onConfirm:()=>r(N==null?void 0:N.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(N!=null&&N.canManage),overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Block"})})}),e.jsx(H.Item,{icon:e.jsx(ln,{}),onClick:()=>T(N),children:e.jsx(w,{title:"Create Alternate Subjects",children:e.jsx("a",{children:"Create Alternate Subjects"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:ue=>ue.preventDefault(),children:e.jsx(Le,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}}],U=async(_,N="",te=20)=>{var ee;an(_,N,te,parseInt(((ee=t.schoolEducationLevel)==null?void 0:ee.id.toString())??"0")).then(ue=>{C(ue.total),i([...ue.results])}),L(!1)},V=async()=>{U(1,"",20)};return s.useEffect(()=>{U(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:16,children:e.jsx(a,{layout:"vertical",form:A,onFinish:_=>{F(_.key),l.length=0,U(1,_.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),["osc","pr"].some(_=>{var N,te;return _===((te=(N=t.schoolEducationLevel)==null?void 0:N.educationLevel)==null?void 0:te.schoolType.code.toLowerCase())})&&e.jsx(B,{span:p?24:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{size:"large",icon:e.jsx(de,{}),onClick:()=>u(!0),children:"Add Subject"})})]}),e.jsx(he,{loading:b,columns:j,dataSource:l,pagination:{onChange:(_,N)=>{z(N),U(_,Y,N)},total:h,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"50vh"}}),e.jsx(Se,{title:"Adding "+((R=t.schoolEducationLevel)==null?void 0:R.educationLevel.name)+" Subjects",anchor:"right",open:m,noOverFlow:!0,onClose:_=>u(_),width:"35vw",children:e.jsx(Zr,{randKey:Math.random(),onAdd:f,schoolEducationLevel:t.schoolEducationLevel})}),e.jsx(Se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{marginRight:5},children:(X=(G=n==null?void 0:n.schoolSubject)==null?void 0:G.subject)==null?void 0:X.name}),((me=n==null?void 0:n.combination)==null?void 0:me.name)&&e.jsx(le,{style:{marginLeft:5},color:"red",children:(je=n==null?void 0:n.combination)==null?void 0:je.name}),"Teachers"]}),ancho:"right",width:"45vw",onClose:_=>o(_),open:d,noOverFlow:!0,children:e.jsx(sl,{schoolEducationLevelSubject:n,randKey:Math.random()})}),e.jsx(re,{title:"Alternate "+((ve=n==null?void 0:n.schoolSubject)==null?void 0:ve.subject.name)+" Subject Creator",width:"35vw",open:I,onclose:_=>q(_),children:e.jsx(el,{subject:n,onFinish:V})})]})},rl=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(0),[h,C]=s.useState(20),[k,z]=s.useState(""),[Y,F]=s.useState(!0),[b]=a.useForm(),A=!pe.useBreakpoint().lg,[I,q]=s.useState(!1),[g,S]=s.useState(!1),[D,p]=s.useState(!1),[T,v]=s.useState(!1),[f,M]=s.useState(1),r=_=>{M(_)},j=_=>{c(_),p(!0)},U=_=>{c(_),v(!0)},V=_=>{c(_),S(!0)},R=_=>{c(_),q(!0)},G=async _=>{i([_,...l])},X=async _=>{un(_).then(N=>{N&&(N.success?(x.success(N.message),i(l.filter(te=>te.id!==_))):x.error(N.message))})},me=async _=>{hn(_,f).then(N=>{N&&(N.success?(x.success(N.message),i(l.map(te=>te.id===_?N.schoolEducationLevel:te))):x.error(N.message))})},je=[{title:"Name",dataIndex:"name",fixed:!0,render:(_,N,te)=>e.jsx("span",{children:e.jsx("a",{children:N.educationLevel.name})})},{title:"School Type",dataIndex:"schoolType",fixed:!0,render:(_,N,te)=>e.jsx("span",{children:e.jsx(le,{color:"green",children:N.educationLevel.schoolType.name})})},{title:"Level Index",dataIndex:"levelIndex",fixed:!0,render:(_,N,te)=>e.jsx("span",{children:e.jsx(se,{disabled:!0,title:e.jsx(e.Fragment,{children:e.jsxs(ge,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Update Education Level Index?"}),e.jsx("div",{style:{height:"10px"}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Education Level Index"}),e.jsx("span",{children:e.jsx(Ke,{min:1,max:10,defaultValue:N.levelIndex,onChange:r,style:{width:"100%"}})})]})}),onVisibleChange:ee=>{ee||M(N.levelIndex)},onConfirm:()=>me(N.id),onCancel:()=>{},okText:"Update",cancelText:"No",okButtonProps:{disabled:f<1||f>10},overlayStyle:{zIndex:9999},children:e.jsx("a",{children:e.jsx(le,{color:"green",children:N.levelIndex})})})})},{title:"Date Created",dataIndex:"created",render:(_,N,te)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(N.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(_,N,te)=>e.jsx("a",{children:N!=null&&N.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(_,N,te)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(se,{title:"Are you sure to delete this task?",onConfirm:()=>X(N.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!N.canDelete,overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})}),["osc","pr"].some(ee=>ee===N.educationLevel.schoolType.code.toLowerCase())&&e.jsx(H.Item,{icon:e.jsx(Je,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>R(N),children:"Groups"})}),["asc"].some(ee=>ee===N.educationLevel.schoolType.code)&&e.jsx(H.Item,{icon:e.jsx(Je,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>V(N),children:"Combinations"})}),e.jsx(H.Item,{icon:e.jsx(Je,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>U(N),children:"Students"})}),["osc","pr"].some(ee=>ee===N.educationLevel.schoolType.code.toLowerCase())&&e.jsx(H.Item,{icon:e.jsx(ce,{}),onClick:()=>j(N),children:e.jsx("a",{children:"Subjects"})}),["asc"].some(ee=>ee===N.educationLevel.schoolType.code.toLowerCase())&&e.jsx(H.Item,{icon:e.jsx(ce,{}),onClick:()=>j(N),children:e.jsx("a",{children:"Subjects"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:ee=>ee.preventDefault(),children:e.jsx(Le,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],ve=async(_,N="",te=20)=>{F(!0),cn(_,N,te).then(ee=>{ee&&(o(ee.total),i([...ee.results]))}),F(!1)};return s.useEffect(()=>{ve(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:A?24:20,children:e.jsx(a,{layout:"vertical",form:b,onFinish:_=>{z(_.key),l.length=0,ve(1,_.key,h)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:A?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{icon:e.jsx(de,{}),size:"large",onClick:()=>u(!0),children:"Add Education Level"})})]}),e.jsx(he,{loading:Y,columns:je,dataSource:l,pagination:{onChange:(_,N)=>{C(N),ve(_,k,N)},total:d,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:"Adding Education levels",onClose:_=>u(_),open:m,noOverFlow:!0,anchor:"right",width:"30vw",children:e.jsx(Rr,{randKey:Math.random(),onAdd:G})}),e.jsx(re,{title:"Education Level Groups",open:I,onClose:_=>q(_),width:"50vw",children:e.jsx(_r,{schoolEducationLevel:n,height:55})}),e.jsx(re,{title:"Education Combinations",open:g,onClose:_=>S(_),width:"50vw",children:e.jsx(Gr,{schoolEducationLevel:n,height:55})}),e.jsx(Se,{title:`${n==null?void 0:n.educationLevel.name} Students`,open:T,noOverFlow:!0,anchor:"right",width:"90vw",onClose:_=>v(_),children:e.jsx(Xr,{schoolEducationLevel:n,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.educationLevel.name)+" Subjects",open:D,width:"70vw",onClose:_=>p(_),children:e.jsx(nl,{schoolEducationLevel:n,height:55,randKey:Math.random()})})]})},ll=()=>(s.useEffect(()=>{document.title=xe.system_name+": Education Levels"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Education Levels"})]}),e.jsx(rl,{})]})),{TextArea:al}=K,{Option:zt}=$,il=t=>{const[n,c]=s.useState(!0),[l,i]=s.useState(!0),[m,u]=s.useState([]),[d,o]=s.useState([]),h=async(k,z="")=>{c(!0);const{data:Y}=await Q.custom({url:"",method:"get",meta:{operation:"schoolDepartments",variables:{page:{value:k,type:"Int",required:!0},key:{value:z,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Wt}]}}).catch(()=>(x.error("Error occured while fetching departments"),{data:null})).then(F=>F);Y&&u([...Y.results]),c(!1)},C=async(k,z="")=>{i(!0);const{data:Y}=await Q.custom({url:"",method:"get",meta:{operation:"systemProgrammes",variables:{page:{value:k,type:"Int",required:!0},key:{value:z,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Vt}]}}).catch(()=>(x.error("Error occured while fetching programmes"),{data:null})).then(F=>F);Y&&o([...Y.results]),i(!1)};return s.useEffect(()=>{h(1),C(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:k=>{t.onFinish(k)},requiredMark:!0,children:[e.jsx(a.Item,{name:"department_id",label:"Department",rules:[{required:!0,type:"string",message:"Please choose Department..."}],children:e.jsx($,{showSearch:!0,placeholder:"Select a Department",optionFilterProp:"children",onChange:k=>{},onSearch:k=>{},filterOption:(k,z)=>z.children.toLowerCase().includes(k.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((k,z)=>e.jsx(zt,{value:k.id,children:k.name}))})}),e.jsx(a.Item,{name:"programme_id",label:"Programme",rules:[{required:!0,type:"string",message:"Please choose Programme..."}],children:e.jsx($,{showSearch:!0,placeholder:"Select a Programme",optionFilterProp:"children",onChange:k=>{},onSearch:k=>{},filterOption:(k,z)=>z.children.toLowerCase().includes(k.toLowerCase()),dropdownStyle:{zIndex:9999},children:d.map((k,z)=>e.jsx(zt,{value:k.id,children:k.name}))})}),e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(al,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:ol}=K,{Option:Tt}=$,dl=t=>{const[n,c]=s.useState(t.course.isActive),[l,i]=s.useState(!0),[m,u]=s.useState([]),[d,o]=s.useState([]),h=async(k,z="")=>{i(!0);const{data:Y}=await Q.custom({url:"",method:"get",meta:{operation:"schoolDepartments",variables:{page:{value:k,type:"Int",required:!0},key:{value:z,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Wt}]}}).catch(()=>(x.error("Error occured while fetching departments"),{data:null})).then(F=>F);Y&&u([...Y.results]),i(!1)},C=async(k,z="")=>{const{data:Y}=await Q.custom({url:"",method:"get",meta:{operation:"systemProgrammes",variables:{page:{value:k,type:"Int",required:!0},key:{value:z,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Vt}]}}).catch(()=>(x.error("Error occured while fetching programmes"),{data:null})).then(F=>F);Y&&o([...Y.results])};return s.useEffect(()=>{h(1),C(1),t.form.setFieldsValue({department_id:t.course.department.id,programme_id:t.course.programme.id,name:t.course.name,description:t.course.description,is_active:t.course.isActive})},[t.form,t.course,t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:l,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:k=>{k.is_active=n,k.id=parseInt(t.course.id),t.onFinish(k)},requiredMark:!0,children:[e.jsx(a.Item,{name:"department_id",label:"Department",rules:[{required:!0,type:"string",message:"Please choose Department..."}],children:e.jsx($,{showSearch:!0,placeholder:"Select a Department",optionFilterProp:"children",onChange:k=>{},onSearch:k=>{},filterOption:(k,z)=>z.children.toLowerCase().includes(k.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((k,z)=>e.jsx(Tt,{value:k.id,children:k.name}))})}),e.jsx(a.Item,{name:"programme_id",label:"Programme",rules:[{required:!0,type:"string",message:"Please choose Programme..."}],children:e.jsx($,{showSearch:!0,placeholder:"Select a Programme",optionFilterProp:"children",onChange:k=>{},onSearch:k=>{},filterOption:(k,z)=>z.children.toLowerCase().includes(k.toLowerCase()),dropdownStyle:{zIndex:9999},children:d.map((k,z)=>e.jsx(Tt,{value:k.id,children:k.name}))})}),e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(ol,{rows:4,maxLength:6})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Me,{checked:n,onChange:()=>c(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},cl=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(20),[d,o]=s.useState(""),[h,C]=s.useState(0),[k,z]=s.useState(!0),[Y]=a.useForm(),[F]=a.useForm(),[b]=a.useForm(),A=!pe.useBreakpoint().lg,[I,q]=s.useState(!1),[g,S]=s.useState(!1),D=r=>{c(r),S(!0)},p=async r=>{mn(r).then(j=>{j&&(j.success?(x.success(j.message),F.resetFields(),q(!1),i([j.course,...l])):x.error(j.message))})},T=async r=>{xn(r).then(j=>{j&&(j.success?(x.success(j.message),b.resetFields(),S(!1),i(l.map(U=>parseInt(U.id.toString())===parseInt(r.id.toString())?j.course:U))):x.error(j.message))})},v=async r=>{jn(r).then(j=>{j&&(j.success?(x.success(j.message),i(l.filter(U=>U.id!==r))):x.error(j.message))})},f=async(r,j="",U=20)=>{z(!0),gn(r,j,U).then(V=>{V&&(C(V.total),i([...V.results]))}),z(!1)};s.useEffect(()=>{f(1,"",20)},[]);const M=[{title:"Name",dataIndex:"name",fixed:!0,render:(r,j,U)=>e.jsx("span",{children:e.jsx("a",{children:j.name})})},{title:"Programme",dataIndex:"programme",fixed:!0,render:(r,j,U)=>e.jsx("span",{children:j.programme.name})},{title:"Department",dataIndex:"department",fixed:!0,render:(r,j,U)=>e.jsx("span",{children:j.department.name})},{title:"Created",dataIndex:"created",render:(r,j,U)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(j.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(r,j,U)=>e.jsx("a",{children:j!=null&&j.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(r,j,U)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(se,{title:"Are you sure to delete this Faculty?",onConfirm:()=>v(j==null?void 0:j.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(j!=null&&j.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(E,{icon:e.jsx(ce,{}),disabled:!(j!=null&&j.canDelete)})}),e.jsx(w,{title:"Edit "+(j==null?void 0:j.name)+" Faculty",color:"green",children:e.jsx(E,{icon:e.jsx(Ee,{}),disabled:!(j!=null&&j.canEdit),onClick:()=>D(j)})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:A?24:20,children:e.jsx(a,{layout:"vertical",form:Y,onFinish:r=>{o(r.key),l.length=0,f(1,r.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:A?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(w,{title:"Add New Course",children:e.jsx(E,{icon:e.jsx(de,{}),size:"large",onClick:()=>q(!0),children:"Add Course"})})})]}),e.jsx(he,{loading:k,columns:M,dataSource:l,pagination:{onChange:(r,j)=>{u(j),f(r,d,j)},total:h,pageSize:m,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{open:I,onClose:r=>q(r),width:"30vw",title:"Adding Course",children:e.jsx(il,{form:F,onFinish:p,randKey:Math.random()})}),e.jsx(re,{open:g,onClose:r=>S(r),width:"30vw",title:"Edit Course",children:e.jsx(dl,{course:n,onFinish:T,form:b,randKey:Math.random()})})]})},ul=()=>(s.useEffect(()=>{document.title=xe.system_name+": Courses"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Courses"})]}),e.jsx(cl,{height:80,control:!1})]})),{TextArea:hl}=K,{Option:ml}=$,xl=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(!0),[m,u]=s.useState([]),d=async h=>{c(!0),yn(h).then(C=>{c(!1),C&&(C.success?(x.success(C.message),t.form.resetFields(),t.onFinish(C.department)):x.error(C.message))})},o=async(h,C="")=>{i(!0);const{data:k}=await Q.custom({url:"",method:"get",meta:{operation:"schoolFaculties",variables:{page:{value:h,type:"Int",required:!0},key:{value:C,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:$t}]}}).catch(()=>(x.error("Error occured while fetching faculties"),{data:null})).then(z=>z);k&&u([...k.results]),i(!1)};return s.useEffect(()=>{o(1)},[t.randKey]),e.jsx("div",{style:{maxHeight:"100%",overflowY:"auto",overflowX:"hidden"},children:e.jsx(ie,{spinning:l,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:h=>{d(h)},requiredMark:!0,children:[e.jsx(a.Item,{name:"faculty_id",label:"Faculty",rules:[{required:!0,type:"string",message:"Please choose Faculty..."}],children:e.jsx($,{showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,C)=>C.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((h,C)=>e.jsx(ml,{value:h.id,children:h.name}))})}),e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(hl,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Save"})})]})})})},{TextArea:gl}=K,{Option:jl}=$,yl=t=>{const[n,c]=s.useState(t.department.isActive),[l,i]=s.useState(!0),[m,u]=s.useState([]),d=async(o,h="")=>{i(!0);const{data:C}=await Q.custom({url:"",method:"get",meta:{operation:"schoolFaculties",variables:{page:{value:o,type:"Int",required:!0},key:{value:h,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:$t}]}}).catch(()=>(x.error("Error occured while fetching faculties"),{data:null})).then(k=>k);C&&u([...C.results]),i(!1)};return s.useEffect(()=>{d(1),t.form.setFieldsValue({faculty_id:t.department.faculty.id,name:t.department.name,description:t.department.description,is_active:t.department.isActive})},[t.form,t.department,t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:l,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:o=>{o.is_active=n,o.id=parseInt(t.department.id),t.onFinish(o)},requiredMark:!0,children:[e.jsx(a.Item,{name:"faculty_id",label:"Faculty",rules:[{required:!0,type:"string",message:"Please choose Faculty..."}],children:e.jsx($,{showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onChange:o=>{},onSearch:o=>{},filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((o,h)=>e.jsx(jl,{value:o.id,children:o.name}))})}),e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(gl,{rows:4,maxLength:6})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Me,{checked:n,onChange:()=>c(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},pl=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,z]=s.useState(!0),[Y]=a.useForm(),[F]=a.useForm(),[b]=a.useForm();pe.useBreakpoint().lg;const[A,I]=s.useState(!1),[q,g]=s.useState(!1),S=M=>{c(M),g(!0)},D=async M=>{pn(M).then(r=>{r&&(r.success?(x.success(r.message),b.resetFields(),g(!1),i(l.map(j=>parseInt(j.id.toString())===parseInt(M.id.toString())?r.department:j))):x.error(r.message))})},p=async M=>{Sn(M).then(r=>{r&&(r.success?(x.success(r.message),i(l.filter(j=>j.id!==M))):x.error(r.message))})},T=()=>{x("Canceled")},v=async(M,r="",j=20)=>{z(!0),fn(M,r,j).then(U=>{U&&(u(U.total),i([...U.results]))}),z(!1)};s.useEffect(()=>{v(1,"",20)},[]);const f=[{title:"Name",dataIndex:"name",fixed:!0,render:(M,r,j)=>e.jsx("span",{children:e.jsx("a",{children:r.name})})},{title:"Faculty",dataIndex:"faculty",fixed:!0,render:(M,r,j)=>e.jsx("span",{children:r.faculty.name})},{title:"Created",dataIndex:"created",render:(M,r,j)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(r.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(M,r,j)=>e.jsx("a",{children:r!=null&&r.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(M,r,j)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(se,{title:"Are you sure to delete this Faculty?",onConfirm:()=>p(r==null?void 0:r.id),onCancel:()=>T,okText:"Yes",cancelText:"No",disabled:!(r!=null&&r.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(E,{icon:e.jsx(ce,{}),disabled:!(r!=null&&r.canDelete)})}),e.jsx(w,{title:"Edit "+(r==null?void 0:r.name)+" Faculty",color:"green",children:e.jsx(E,{icon:e.jsx(Ee,{}),disabled:!(r!=null&&r.canEdit),onClick:()=>S(r)})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:12,children:e.jsx(a,{layout:"vertical",form:Y,onFinish:M=>{C(M.key),l.length=0,v(1,M.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(w,{title:"Add New Department",children:e.jsx(E,{icon:e.jsx(de,{}),size:"large",onClick:()=>I(!0),children:"Add Department"})})})]}),e.jsx(he,{loading:k,columns:f,dataSource:l,pagination:{onChange:(M,r)=>{o(r),v(M,h,r)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{open:A,onClose:M=>I(M),title:"Adding Department",width:"30vw",children:e.jsx(xl,{form:F,onFinish:M=>{i([M,...l]),I(!1)},randKey:Math.random()})}),e.jsx(re,{open:q,onClose:M=>g(M),title:"Edit Department",width:"30vw",children:e.jsx(yl,{department:n,form:b,onFinish:D,randKey:Math.random()})})]})},fl=()=>(s.useEffect(()=>{document.title=xe.system_name+": Departments"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Departments"})]}),e.jsx(pl,{height:77})]})),Sl=()=>(s.useEffect(()=>{document.title=xe.system_name+": Examinations"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Examinations"})]}),e.jsx(jr,{})]})),{TextArea:vl}=K,Cl=t=>{const[n,c]=s.useState(!1),l=async i=>{c(!0),vn(i).then(m=>{m&&(m.success?(x.success(m.message),t==null||t.form.resetFields(),t==null||t.onFinish(m.faculty)):x.error(m.message))}),c(!1)};return e.jsx(e.Fragment,{children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:i=>{l(i)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(vl,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Save"})})]})})},{TextArea:bl}=K,Il=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(t.faculty.isActive),m=async u=>{c(!0),Cn(u).then(d=>{d&&(c(!1),d.success?(x.success(d.message),t.form.resetFields(),t.onFinish(d.faculty)):x.error(d.message))})};return s.useEffect(()=>{t.form.setFieldsValue({name:t.faculty.name,description:t.faculty.description,is_active:t.faculty.isActive})},[t.form,t.faculty]),e.jsx(e.Fragment,{children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:u=>{u.is_active=l,u.id=parseInt(t.faculty.id),m(u)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(bl,{rows:4,maxLength:6})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Me,{checked:l,onChange:()=>i(!l),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Save"})})]})})},Fl=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(20),[d,o]=s.useState(""),[h,C]=s.useState(0),[k,z]=s.useState(!0),[Y]=a.useForm(),[F]=a.useForm(),[b]=a.useForm(),A=!pe.useBreakpoint().lg,[I,q]=s.useState(!1),[g,S]=s.useState(!1),D=M=>{c(M),S(!0)},p=async M=>{In(M).then(r=>{r&&(r.success?(x.success(r.message),i(l.filter(j=>j.id!==M))):x.error(r.message))})},T=()=>{x("Canceled")},v=async(M,r="",j=20)=>{z(!0),bn(M,r,j).then(U=>{U&&(C(U.total),i([...U.results]))}),z(!1)};s.useEffect(()=>{v(1,"",20)},[]);const f=[{title:"Name",dataIndex:"name",fixed:!0,render:(M,r,j)=>e.jsx("span",{children:e.jsx("a",{children:r.name})})},{title:"Created",dataIndex:"created",render:(M,r,j)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(r.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(M,r,j)=>e.jsx("a",{children:r!=null&&r.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(M,r,j)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(se,{title:"Are you sure to delete this Faculty?",onConfirm:()=>p(r==null?void 0:r.id),onCancel:()=>T,okText:"Yes",cancelText:"No",disabled:!(r!=null&&r.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(E,{icon:e.jsx(ce,{}),disabled:!(r!=null&&r.canDelete)})}),e.jsx(w,{title:"Edit "+(r==null?void 0:r.name)+" Faculty",color:"green",children:e.jsx(E,{icon:e.jsx(Ee,{}),disabled:!(r!=null&&r.canEdit),onClick:()=>D(r)})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:A?24:20,children:e.jsx(a,{layout:"vertical",form:Y,onFinish:M=>{o(M.key),l.length=0,v(1,M.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:A?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(w,{title:"Add New Faculty",children:e.jsx(E,{icon:e.jsx(de,{}),size:"large",onClick:()=>q(!0),children:"Add Faculty"})})})]}),e.jsx(he,{loading:k,columns:f,dataSource:l,pagination:{onChange:(M,r)=>{u(r),v(M,d,r)},total:h,pageSize:m,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{open:I,onClose:M=>q(M),width:"30vw",title:"Adding Faculty",children:e.jsx(Cl,{form:F,onFinish:M=>{i([M,...l]),q(!1)}})}),e.jsx(re,{open:g,onClose:M=>S(M),width:"30vw",title:"Edit Faculty",children:e.jsx(Il,{faculty:n,form:b,onFinish:M=>{i(l.map(r=>parseInt(r.id.toString())===parseInt(M.id.toString())?M:r)),S(!1)}})})]})},kl=()=>(s.useEffect(()=>{document.title=xe.system_name+": Faculties"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Faculties"})]}),e.jsx(Fl,{height:77})]})),{TextArea:Ml}=K,Ll=t=>{const[n,c]=s.useState(!1),l=async i=>{const{data:m}=await Q.custom({url:"",method:"post",meta:{operation:"createSchoolFee",variables:{name:{value:i.name,type:"String",required:!0},description:{value:i.description,type:"String",required:!1}},fields:["success","message",{schoolFee:Ht}]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(u=>u);m&&(m.success?(x.success(m.message),t.onFinish(m.schoolFee)):x.error(m.message))};return s.useEffect(()=>{},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:i=>{l(i)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Ml,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:Al}=K,El=t=>{var i,m;const[n,c]=s.useState(!1),l=async u=>{var o;const{data:d}=await Q.custom({url:"",method:"post",meta:{operation:"updateSchoolFee",variables:{schoolFeeId:{value:(o=t.schoolFee)==null?void 0:o.id,type:"Int",required:!0},name:{value:u.name,type:"String",required:!0},description:{value:u.description,type:"String",required:!1}},fields:["success","message",{schoolFee:Ht}]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(h=>h);d&&(d.success?(x.success(d.message),t.onFinish(d.schoolFee)):x.error(d.message)),c(!1)};return s.useEffect(()=>{var u,d;t.form.setFieldsValue({name:(u=t.schoolFee)==null?void 0:u.name,description:(d=t.schoolFee)==null?void 0:d.description})},[t.form,t.randKey,(i=t.schoolFee)==null?void 0:i.description,(m=t.schoolFee)==null?void 0:m.name]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:u=>{l(u)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Al,{rows:4,maxLength:6})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},Nl=()=>{const[t,n]=s.useState(),[c,l]=s.useState([]),[i,m]=s.useState(!1),[u,d]=s.useState(0),[o,h]=s.useState(20),[C,k]=s.useState(""),[z,Y]=s.useState(!0),[F]=a.useForm(),[b]=a.useForm(),[L]=a.useForm(),I=!pe.useBreakpoint().lg,{push:q}=jt(),[g,S]=s.useState(!1),D=r=>{S(!0),n(r)},p=[{title:"Name",dataIndex:"name",fixed:!0,render:(r,j)=>e.jsx("span",{children:e.jsx("a",{onClick:()=>q("/schoolmanager/school/fees/"+j.id+"/education/levels/"),children:j.name})})},{title:"Date Created",dataIndex:"created",render:(r,j)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(j.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(r,j)=>e.jsx("a",{children:j!=null&&j.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(r,j)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(Je,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>q("/schoolmanager/school/fees/"+j.id+"/education/levels/"),children:"Education Levels Fees"})}),e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(se,{title:"Are you sure to delete this School Fee?",disabled:!(j!=null&&j.canDelete),onConfirm:()=>T(j.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(H.Item,{icon:e.jsx(Ee,{}),disabled:!j.canEdit,onClick:()=>D(j),children:e.jsx("a",{rel:"noopener noreferrer",children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Le,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],T=async r=>{Fn(r).then(j=>{j&&(j.success?(x.success(j.message),l(c.filter(U=>U.id!==r))):x.error(j.message))})},v=async(r,j="",U=20)=>{Y(!0),kn(r,j,U).then(V=>{V&&(d(V.total),l([...V.results]))}),Y(!1)},f=async r=>{l(c.map(j=>j.id===(t==null?void 0:t.id)?r:j)),L.resetFields(),S(!1)},M=async r=>{l([r,...c]),b.resetFields(),m(!1)};return s.useEffect(()=>{v(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:I?24:20,children:e.jsx(a,{layout:"vertical",form:F,onFinish:r=>{k(r.key),c.length=0,v(1,r.key,o)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:I?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{icon:e.jsx(de,{}),size:"large",onClick:()=>m(!0),children:"Create Fee"})})]}),e.jsx(he,{loading:z,columns:p,dataSource:c,pagination:{onChange:(r,j)=>{h(j),v(r,C,j)},total:u,pageSize:o,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Creating School Fee",open:i,width:"40vw",onClose:r=>m(r),children:e.jsx(Ll,{form:b,onFinish:M})}),e.jsx(re,{title:"Editting "+(t==null?void 0:t.name),width:"40vw",open:g,onClose:r=>S(r),children:e.jsx(El,{form:L,schoolFee:t,randKey:Math.random(),onFinish:f})})]})},Pl=()=>(s.useEffect(()=>{document.title=xe.system_name+": School Fees"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"School Fees"})]}),e.jsx(Nl,{})]})),{Option:zl}=$,os=[];for(let t=2022;t<new Date().getFullYear()+5;t++)os.push(e.jsx(zl,{children:t.toString()},t));const Tl=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(0),[m,u]=s.useState(20),[d,o]=s.useState(""),[h,C]=s.useState(!0),[k]=a.useForm(),Y=!pe.useBreakpoint().lg,[F,b]=s.useState(new Date().getFullYear()),[L,A]=s.useState(0),I=p=>{b(p)},q=p=>{A(p)},g=[{title:"Name",dataIndex:"name",fixed:!0,render:(p,T,v)=>e.jsx("span",{children:e.jsx("a",{children:T.educationLevel.name})})},{title:"",dataIndex:"action",render:(p,T,v)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(se,{arrowPointAtCenter:!1,title:e.jsx(e.Fragment,{children:e.jsxs(ge,{direction:"vertical",children:[e.jsxs("span",{children:["Are you sure to Add ",T.educationLevel.name,' ?"']}),e.jsx("div",{style:{height:15}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Fee Amount"}),e.jsx("span",{children:e.jsx(Ke,{size:"large",min:0,defaultValue:0,value:L,onChange:q,style:{width:"100%"}})}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Academic Year"}),e.jsx("span",{children:e.jsx($,{size:"large",value:F?parseInt(F.toString()):new Date().getFullYear(),placeholder:"Please Choose Year ...",style:{width:"100%"},onChange:I,dropdownStyle:{zIndex:9999},children:os})})]})}),onConfirm:()=>S(T.id),onCancel:()=>{},onVisibleChange:f=>{f&&(b(new Date().getFullYear()),A(0))},okText:"Yes",cancelText:"No",okButtonProps:{disabled:L<=0},overlayStyle:{zIndex:9999},children:e.jsx(E,{icon:e.jsx(de,{}),children:"Add"})})})}],S=async p=>{var T;Mn(p,F,L,((T=t.fee)==null?void 0:T.id)??0).then(v=>{v&&(v.success?(x.success(v.message),c(n.filter(f=>f.id!==p)),t.onFinish(v.schoolEducationLevelFee)):x.error(v.message))})},D=async(p,T="",v=20)=>{var f;C(!0),Ln(p,T,v,((f=t.fee)==null?void 0:f.id)??0).then(M=>{M&&(i(M.total),c([...M.results]))}),C(!1)};return s.useEffect(()=>{D(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{style:{marginTop:10},children:e.jsx(B,{span:Y?24:20,children:e.jsx(a,{layout:"vertical",form:k,onFinish:p=>{o(p.key),n.length=0,D(1,p.key,m)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(he,{loading:h,columns:g,dataSource:n,pagination:{onChange:(p,T)=>{u(T),D(p,d,T)},total:l,pageSize:m,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})]})},Dl=t=>{var i,m;const[n,c]=s.useState(!1),l=async u=>{var o;const{data:d}=await Q.custom({url:"",method:"post",meta:{operation:"updateSchoolEducationLevelFee",variables:{schoolEducationLevelFeeId:{value:(o=t.schoolEducationLevelFee)==null?void 0:o.id,type:"Int",required:!0},amount:{value:u.amount,type:"Float",required:!0},vatIncluded:{value:u.vatIncluded,type:"Boolean",required:!0}},fields:["success","message",{schoolEducationLevelFee:An}]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(h=>h);d&&(d.success?(x.success(d.message),t.onFinish(d.schoolEducationLevelFee)):x.error(d.message)),c(!1)};return s.useEffect(()=>{var u,d;t.form.setFieldsValue({amount:(u=t.schoolEducationLevelFee)==null?void 0:u.amount,vatIncluded:(d=t.schoolEducationLevelFee)==null?void 0:d.vatIncluded})},[t.form,t.randKey,(i=t.schoolEducationLevelFee)==null?void 0:i.amount,(m=t.schoolEducationLevelFee)==null?void 0:m.vatIncluded]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:u=>{l(u)},requiredMark:!0,children:[e.jsx(a.Item,{name:"amount",label:"Amount",rules:[{required:!0,type:"number",min:0,message:"Please input Fee Amount"}],children:e.jsx(Ke,{min:0,defaultValue:0,style:{width:"100%"}})}),e.jsx(a.Item,{name:"vatIncluded",valuePropName:"checked",initialValue:!0,rules:[{required:!0,type:"boolean",message:"Please check"}],children:e.jsx(Me,{children:"VAT Included"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},ql=t=>{var j,U;const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(0),[h,C]=s.useState(20),[k,z]=s.useState(""),[Y,F]=s.useState(!0),[b]=a.useForm(),[L]=a.useForm(),[A]=a.useForm(),[I,q]=s.useState(!1),S=!pe.useBreakpoint().lg,D=Be(),p=async V=>{c(V),q(!0)},T=[{title:"Education Level",dataIndex:"educationLevel",fixed:!0,render:(V,R)=>{var G,X;return e.jsx("span",{children:e.jsx("a",{children:(X=(G=R.schoolEducationLevel)==null?void 0:G.educationLevel)==null?void 0:X.name})})}},{title:"Year",dataIndex:"year",fixed:!0,render:(V,R)=>e.jsx("span",{children:R.year})},{title:"Amount",dataIndex:"amount",fixed:!0,render:(V,R)=>e.jsx("span",{children:parseFloat(R.amount).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")})},{title:"VAT Included",dataIndex:"vatIncluded",fixed:!0,render:(V,R)=>e.jsx("span",{children:R.vatIncluded?"Yes":"No"})},{title:"Date Created",dataIndex:"created",render:(V,R)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(R.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(V,R)=>e.jsx("a",{children:R!=null&&R.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(V,R)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(se,{title:"Are you sure to delete this School Fee?",disabled:!(R!=null&&R.canDelete),onConfirm:()=>v(R.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(H.Item,{icon:e.jsx(Ee,{}),disabled:!R.canEdit,onClick:()=>p(R),children:e.jsx("a",{rel:"noopener noreferrer",children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:G=>G.preventDefault(),children:e.jsx(Le,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],v=async V=>{En(V).then(R=>{R&&(R.success?(x.success(R.message),i(l.filter(G=>G.id!==V))):x.error(R.message))})},f=async(V,R="",G=20)=>{F(!0),Nn(V,R,G,D.schoolFeeId).then(X=>{X&&(o(X.total),i([...X.results]))}),F(!1)},M=async V=>{i(l.map(R=>R.id===(n==null?void 0:n.id)?V:R)),L.resetFields(),q(!1)},r=async V=>{i([V,...l]),A.resetFields(),u(!1)};return s.useEffect(()=>{f(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:S?24:12,children:e.jsx(a,{layout:"vertical",form:b,onFinish:V=>{z(V.key),l.length=0,f(1,V.key,h)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:S?24:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{icon:e.jsx(de,{}),size:"large",disabled:!t.canAdd,onClick:()=>u(!0),children:"Add Education Level Fee"})})]}),e.jsx(he,{loading:Y,columns:T,dataSource:l,pagination:{onChange:(V,R)=>{C(R),f(V,k,R)},total:d,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Adding"}),e.jsx("span",{style:{marginLeft:5,color:"green"},children:(j=t.fee)==null?void 0:j.name}),e.jsx("span",{style:{marginLeft:5},children:"Education Levels Fees"})]}),width:"30vw",anchor:"right",onClose:()=>u(!1),open:m,noOverFlow:!0,children:e.jsx(Tl,{fee:t.fee,randKey:Math.random(),onFinish:r})}),e.jsx(re,{title:((U=t.fee)==null?void 0:U.name)+" "+(n==null?void 0:n.schoolEducationLevel.educationLevel.name)+" Fee Editting",width:"40vw",open:I,onClose:V=>q(V),children:e.jsx(Dl,{form:L,schoolEducationLevelFee:n,randKey:Math.random(),onFinish:M})})]})},Rl=()=>{const[t,n]=s.useState(!1),[c,l]=s.useState(),i=Be(),m=async()=>{n(!0);const{data:u}=await Q.custom({url:"",method:"get",meta:{operation:"schoolFee",variables:{id:{value:parseInt(i.schoolFeeId),type:"Int",required:!0}},fields:["id",{school:["id","name"]},"name","description","isActive","created","updated","canEdit","canDelete","canManage"]}}).catch(d=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(d=>d);u&&l(u),n(!1)};return s.useEffect(()=>{document.title=xe.system_name+": Education Levels",m()},[i.schoolFeeId]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:e.jsxs(fe,{to:"/schoolmanager/school/fees",children:["School Fees",c&&e.jsx("span",{style:{marginLeft:10},children:e.jsx(le,{color:"green",children:c?c.name:"School Fee"})}),e.jsx(ie,{spinning:t})]})}),e.jsx(Z.Item,{children:"Education Levels Fees"})]}),e.jsx(ql,{fee:c,canAdd:(c==null?void 0:c.canManage)&&!t})]})},Yl=t=>{const[n,c]=s.useState([]),[l,i]=s.useState([]),[m,u]=s.useState(!1),d=async(o,h="")=>{const{data:C}=await Q.custom({url:"",method:"get",meta:{operation:"schoolRolesMemberNotAssigned",variables:{page:{value:o,type:"Int",required:!0},key:{value:h,type:"String",required:!1},memberId:{value:parseInt(t.member.id),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Pn}]}}).catch(()=>(x.error("Error occured while fetching roles"),{data:null})).then(k=>k);C&&c([...C.results])};return s.useEffect(()=>{d(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("h3",{children:[e.jsx("b",{children:"Full Name"}),": ",t.member.firstName," ",t.member.middleName," ",t.member.lastName]}),e.jsxs("h3",{children:[e.jsx("b",{children:"Email Address"}),": ",t.member.email]})]}),e.jsxs(a,{layout:"vertical",form:t.form,onFinish:o=>{o.roles=l.map(h=>parseInt(h.role.id.toString())),o.is_adminstrator=m,t.onFinish(o,t.member)},requiredMark:!0,children:[e.jsx(a.Item,{name:"registration_number",label:"Registration Number",rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(a.Item,{name:"is_adminstrator",rules:[{required:!1,type:"boolean"}],children:e.jsx(Me,{onChange:()=>{u(!m)},defaultChecked:m,children:"Is Adminstrator"})}),e.jsx(oe,{bordered:!0,dataSource:n,renderItem:o=>e.jsx(oe.Item,{children:e.jsx(Me,{onChange:h=>{h.target.checked?i([...l,o]):i(l.filter(C=>C.role.id!==o.role.id))},defaultChecked:l.includes(o),children:o.role.name})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:45},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},Gl=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!0),[d,o]=s.useState(1),[h,C]=s.useState(""),[k]=a.useForm(),[z]=a.useForm(),[Y,F]=s.useState(0),[b,L]=s.useState(!1),A=g=>{L(!0),c(g)},I=async(g,S)=>{zn(g,S).then(D=>{D&&(D.success?(x.success(D.message),i(l.filter(p=>p.id.toString()!==S.id.toString())),t.onAdd(D.member),L(!1),c(void 0),k.resetFields()):x.error(D.message))})},q=async(g,S="")=>{u(!0),Tn(g,S).then(D=>{D&&(F(D.pages),o(D.page),i([...D.results]))}),u(!1)};return s.useEffect(()=>{q(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(a,{layout:"vertical",form:z,onFinish:g=>{C(g.key),q(1,g.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search Member(s)...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(ie,{spinning:m,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"79vh",minHeight:"79vh",overflowY:"auto"},children:e.jsx(oe,{itemLayout:"horizontal",dataSource:l,renderItem:g=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(oe.Item,{style:{margin:0,padding:0},actions:[e.jsx(E,{icon:e.jsx(Ge,{}),onClick:()=>A(g)})],children:e.jsx(oe.Item.Meta,{avatar:e.jsx(es,{src:g.pic}),title:e.jsx("a",{children:g.fullName}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:g.email})})})},"file-"+g.id)})})}),e.jsx(Ze,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:2},children:e.jsx(ts,{count:Y,color:"secondary",onChange:(g,S)=>{q(S,h)}})})]}),e.jsx(re,{title:"Member Informations",open:b,onClose:g=>L(g),width:"40vw",children:e.jsx(Yl,{member:n,form:k,onFinish:I,randKey:Math.random()})})]})},{Option:ds}=$,cs=[e.jsx(ds,{value:null,children:"Please Select Year"},"default")];for(let t=2022;t<new Date().getFullYear()+5;t++)cs.push(e.jsx(ds,{value:t,children:t.toString()},t));const Ol=t=>{const[n,c]=s.useState(null),[l,i]=s.useState(!1),[m,u]=s.useState(!1),[d,o]=s.useState(""),[h,C]=s.useState(!1),k=async Y=>{c(Y)},z=async Y=>{i(!0),Dn(Y).then(F=>{F&&(o(F.message),F.success?(C(!0),x.success(F.message)):(C(!1),x.error(F.message)))}),i(!1),u(!0)};return s.useEffect(()=>{},[]),!l&&m?e.jsx(e.Fragment,{children:e.jsx(vt,{message:d,type:h?"success":"error",style:{fontSize:24},onClose:()=>{o(""),i(!1),C(!1),u(!1)},closable:!0})}):e.jsx(e.Fragment,{children:e.jsxs(ie,{spinning:l,children:[e.jsx("p",{style:{fontSize:20},children:"Platform supports Login Authorizations to School Members"}),e.jsxs(et,{actions:[e.jsx(se,{title:e.jsx(e.Fragment,{children:e.jsxs(ge,{direction:"vertical",children:[e.jsx("span",{children:"Are you sure to Authorize Login?"}),e.jsx("span",{style:{height:10}}),e.jsx("span",{style:{fontWeight:"bolder"},children:"Members Registration Year"}),e.jsx("span",{children:e.jsx($,{size:"large",value:n||null,placeholder:"Please Choose Year ...",style:{width:220},onChange:k,allowClear:!0,onClear:()=>c(null),dropdownStyle:{zIndex:9999},children:cs})})]})}),onConfirm:()=>z(n),onCancel:()=>{},okButtonProps:{disabled:n===null},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(E,{size:"large",icon:e.jsx(Xe,{}),children:"Authorize"})})],style:{marginTop:50},children:[e.jsxs("span",{style:{fontSize:18},children:["By Using Email/Phone/Registration Number of Member as Default"," ",e.jsx("b",{children:"Username"}),", While Default",e.jsx("b",{children:"Password"})," will be ",e.jsx("b",{children:"Randomly Generated"})," or same"," ",e.jsx("b",{children:"Registration Number"})]}),e.jsx("span",{style:{display:"block",color:"red",fontSize:20,marginTop:10},children:"This action will be applicable only to those Members with no Login Access/Authorization to the Platform"})]})]})})},Kl=t=>{const[n]=a.useForm(),[c,l]=s.useState(!1),i=async(m,u)=>{l(!0);const{data:d}=await Q.custom({url:"",method:"post",meta:{operation:"resetMemberCredential",variables:{memberId:{value:parseInt(t.member.id.toString()),type:"Int",required:!0},phone:{value:m,type:"String",required:!0},email:{value:u,type:"String",required:!1}},fields:["success","message"]}}).catch(()=>(x.error("Error occured while resetting member credential ..."),{data:null})).then(o=>o);l(!1),d&&(d.success&&t.resetting(!1),t.resettingFeedback(d.success,d.message))};return s.useEffect(()=>{},[c]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:c,children:e.jsxs(a,{layout:"vertical",form:t.form?t.form:n,onFinish:m=>{i(m.phone,m.email)},requiredMark:!0,children:[e.jsx(a.Item,{name:"phone",label:"Mobile Phone",rules:[{required:!0,type:"string",message:"Please Mobile Phone number"}],children:e.jsx(K,{prefix:e.jsx(Jt,{}),size:"large",placeholder:"Mobile Phone Number ...",onChange:m=>{t.resetPhoneChange(m.target.value)}})}),e.jsx(a.Item,{name:"email",label:"Email Addres",rules:[{required:!1,type:"string",message:"Please Email Address ..."}],children:e.jsx(K,{prefix:e.jsx(Qt,{}),size:"large",placeholder:"Email Address ..."})})]})})})},{Option:Dt}=$,_l=t=>{const[n,c]=s.useState(null),[l,i]=s.useState(null),[m,u]=s.useState(null),[d,o]=s.useState(null),[h,C]=s.useState(null),[k,z]=s.useState(""),[Y]=a.useForm();jt();const F=async g=>{C(g.format("YYYY-MM-DD"))},b=async g=>{o(g)},L=async g=>{u(g)},A=async g=>{c(g)},I=async g=>{i(g)},q=async g=>{const{data:S}=await Q.custom({url:"",method:"post",meta:{operation:"registerSchoolMember",variables:{firstName:{value:g.firstName,type:"String",required:!0},middleName:{value:g.middleName,type:"String",required:!0},lastName:{value:g.lastName,type:"String",required:!0},email:{value:g.email,type:"String",required:!1},phone:{value:g.phone,type:"String",required:!0},registrationNumber:{value:g.registrationNumber,type:"String",required:!0},gender:{value:g.gender,type:"String",required:!0},regionId:{value:g.regionId,type:"Int",required:!1},districtId:{value:g.districtId,type:"Int",required:!1},wardId:{value:g.wardId,type:"Int",required:!1},dob:{value:g.dob,type:"String",required:!1}},fields:["success","message",{schoolMember:Ue}]}}).catch(()=>(x.error("Error occured while creating School Member"),{data:null})).then(D=>D);S&&(S.success?(x.success(S.message),t.onAdd(S.schoolMember),Y.resetFields()):(z(S.message),x.error(S.message)))};return s.useEffect(()=>{},[t.randKey]),e.jsxs("div",{style:{height:"100%",overflowY:"auto",overflowX:"hidden",marginBottom:"20px",padding:"10px"},children:[k.length>0&&e.jsx(Fe.Alert,{message:"Error",description:k,type:"error",closable:!0}),e.jsxs(a,{layout:"vertical",form:Y,onFinish:g=>{g.regionId=n,g.districtId=l,g.wardId=m,q(g)},requiredMark:!0,children:[e.jsx(a.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(a.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(a.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10},children:e.jsx(w,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(E,{type:"dashed",onClick:()=>x("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(a.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(K,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(a.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,type:"string",message:"Please input Phones Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Phone Number ..."})}),e.jsxs(ge,{direction:"horizontal",children:[e.jsx(a.Item,{name:"dob",label:"Date of Birth",rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(st,{size:"large",onChange:F,disabledDate:g=>g&&g>Re().subtract(3,"years"),defaultValue:wt(new Date).subtract(3,"years"),popupStyle:{zIndex:9999}})}),e.jsx(a.Item,{name:"gender",label:"Gender",rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:d,children:e.jsxs($,{placeholder:"Please Choose Gender ...",style:{width:220},onChange:b,size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(Dt,{value:"female",children:"Female"}),e.jsx(Dt,{value:"male",children:"Male"})]})})]}),e.jsxs(ge,{direction:"horizontal",children:[e.jsx(ge,{direction:"vertical",children:e.jsx(rt,{onChange:A,regionId:n,size:"large"})}),e.jsx(ge,{direction:"vertical",children:e.jsx(nt,{regionId:parseInt(n),districtId:l,onChange:I,size:"large"})})]}),e.jsx(ge,{direction:"horizontal",children:e.jsx(ge,{direction:"vertical",children:e.jsx(lt,{districtId:parseInt(l),wardId:m,onChange:L,size:"large"})})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:30,marginBottom:30},children:[e.jsx(E,{size:"large",onClick:()=>{Y.resetFields()},danger:!0,style:{float:"left"},icon:e.jsx(qn,{}),children:"Clear"}),e.jsx(E,{size:"large",htmlType:"submit",danger:!0,style:{float:"right"},icon:e.jsx(Rn,{}),children:"Save"})]})]})]})},{Option:mt}=$,Bl=[];for(let t=2022;t<new Date().getFullYear()+5;t++)Bl.push(e.jsx(mt,{children:t.toString()},t));const Ul=t=>{const[n,c]=s.useState(null),[l,i]=s.useState(null),[m,u]=s.useState(null),[d,o]=s.useState(null),[h,C]=s.useState(null),[k]=a.useForm(),z=async I=>{C(I.format("YYYY-MM-DD"))},Y=async I=>{o(I)},F=async I=>{u(I)},b=async I=>{c(I),i(null),u(null),k.resetFields(["districtId","wardId"])},L=async I=>{i(I),u(null),k.resetFields(["wardId"])},A=async I=>{var g;const{data:q}=await Q.custom({url:"",method:"post",meta:{operation:"updateSchoolMemberInformation",variables:{id:{value:parseInt(((g=t==null?void 0:t.member)==null?void 0:g.id.toString())??"0"),type:"Int",required:!0},firstName:{value:I.firstName,type:"String",required:!0},middleName:{value:I.middleName,type:"String",required:!0},lastName:{value:I.lastName,type:"String",required:!0},email:{value:I.email,type:"String",required:!1},phone:{value:I.phone,type:"String",required:!1},registrationNumber:{value:I.registrationNumber,type:"String",required:!0},gender:{value:I.gender,type:"String",required:!0},regionId:{value:I.regionId,type:"Int",required:!1},districtId:{value:I.districtId,type:"Int",required:!1},wardId:{value:I.wardId,type:"Int",required:!1},dob:{value:I.dob,type:"String",required:!1}},fields:["success","message",{schoolMember:Ue}]}}).catch(()=>(x.error("Error occured while updating member Informations"),{data:null})).then(S=>S);q&&(q.success?(x.success(q.message),t.onFinish(q.schoolMember,t.editting),k.resetFields()):x.error(q.message))};return s.useEffect(()=>{var I,q,g,S,D,p,T,v,f,M,r,j,U,V,R,G,X,me,je,ve,_,N,te;o((I=t.member)==null?void 0:I.gender),c((g=(q=t.member)==null?void 0:q.region)==null?void 0:g.id),i((D=(S=t.member)==null?void 0:S.district)==null?void 0:D.id),u((T=(p=t.member)==null?void 0:p.ward)==null?void 0:T.id),k.setFieldsValue({firstName:(v=t.member)==null?void 0:v.firstName,middleName:(f=t.member)==null?void 0:f.middleName,lastName:(M=t.member)==null?void 0:M.lastName,email:(r=t.member)==null?void 0:r.email,phone:(j=t.member)==null?void 0:j.phone,registrationNumber:(U=t.member)==null?void 0:U.registrationNumber,gender:(V=t.member)==null?void 0:V.gender,regionId:parseInt(((G=(R=t.member)==null?void 0:R.region)==null?void 0:G.id.toString())??"0"),districtId:parseInt(((me=(X=t.member)==null?void 0:X.district)==null?void 0:me.id.toString())??"0"),wardId:parseInt(((ve=(je=t.member)==null?void 0:je.ward)==null?void 0:ve.id.toString())??"0")}),(_=t.member)!=null&&_.dob&&(C(Re((N=t.member)==null?void 0:N.dob)),k.setFieldsValue({dob:wt((te=t.member)==null?void 0:te.dob)}))},[t.member]),e.jsx(e.Fragment,{children:e.jsxs(a,{layout:"vertical",form:k,onFinish:I=>{I.dob=h,A(I)},requiredMark:!0,children:[e.jsx(a.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(a.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(a.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10},children:e.jsx(w,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(E,{type:"dashed",onClick:()=>x("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(a.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(K,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(a.Item,{name:"phone",label:"Phones Number",rules:[{required:!1,type:"string",message:"Please input Phones Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Phones Numbers ..."})}),e.jsxs(ne,{children:[e.jsx(B,{span:24,children:e.jsxs(ge,{direction:"horizontal",children:[e.jsx(a.Item,{name:"dob",label:"Date of Birth",rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(st,{onChange:z,disabledDate:I=>I&&I>Re().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(a.Item,{name:"gender",label:"Gender",rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:d,children:e.jsxs($,{size:"large",placeholder:"Please Choose Gender ...",style:{width:220},onChange:Y,dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(mt,{value:"female",children:"Female"}),e.jsx(mt,{value:"male",children:"Male"})]})})]})}),e.jsxs(B,{span:24,children:[e.jsx(rt,{onChange:b,regionId:parseInt(n),name:"regionId",label:"Region",size:"middle",required:!1}),e.jsx(nt,{regionId:parseInt(n),districtId:parseInt(l),onChange:L,name:"districtId",label:"District",size:"middle",required:!1}),e.jsx(lt,{districtId:parseInt(l),wardId:parseInt(m),onChange:F,name:"wardId",label:"Ward",size:"middle",required:!1})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Wl=t=>{const[n,c]=s.useState([]),[l,i]=s.useState([]),[m,u]=s.useState([]),[d,o]=s.useState([]),h=async(F,b="")=>{const{data:L}=await Q.custom({url:"",method:"get",meta:{operation:"systemRoleRecords",variables:{page:{value:F,type:"Int",required:!0},key:{value:b,type:"String",required:!1},userId:{value:parseInt(t.user.id),type:"Int",required:!0},schoolId:{value:parseInt(t.school.id),type:"Int",required:!0},custom:{value:!1,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["key","title","description","chosen"]}]}}),A=[];L.results.forEach(I=>{I.chosen&&A.push(I.key)}),c([...L.results]),i(A)},C=async F=>{const{data:b}=await Q.custom({url:"",method:"post",meta:{operation:"addUserRoles",variables:{userId:{value:parseInt(t.user.id),type:"Int",required:!0},roles:{value:F,type:"[Int]",required:!0}},fields:["success","message"]}});b.success?x.success(b.message):x.error(b.message)},k=async F=>{const{data:b}=await Q.custom({url:"",method:"post",meta:{operation:"removeUserRoles",variables:{userId:{value:parseInt(t.user.id),type:"Int",required:!0},roles:{value:F,type:"[Int]",required:!0}},fields:["success","message"]}});b.success?x.success(b.message):x.error(b.message)},z=F=>{i(F),d.length>0&&C(d),m.length>0&&k(m)},Y=(F,b)=>{o(F),u(b)};return s.useEffect(()=>{h(1)},[t.randKey,t.user]),e.jsx(e.Fragment,{children:e.jsx(Sr,{titles:["Not Assigned Roles","Assigned Roles"],dataSource:n,showSearch:!0,listStyle:{width:"100vw",height:"65vh"},operations:["Add","Remove"],targetKeys:l,onChange:(F,b,L)=>z(F.map(A=>A.toString())),onSelectChange:()=>Y,onSearch:(F,b)=>{},render:F=>F.title})})},Vl=t=>{const[n,c]=s.useState([]),l=async(m,u="")=>{const{data:d}=await Q.custom({url:"",method:"get",meta:{operation:"userRoles",variables:{page:{value:m,type:"Int",required:!0},key:{value:u,type:"String",required:!1},userId:{value:parseInt(t.user.id),type:"Int",required:!0},schoolId:{value:parseInt(t.school.id),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","created","updated","isActive","canEdit","canDelete","canManage",{role:["id","name","code","description","created","updated","isActive","canEdit","canDelete","canManage"]}]}]}});c([...d.results])},i=async m=>{const{data:u}=await Q.custom({url:"",method:"post",meta:{operation:"removeUserRole",variables:{roleId:{value:m.role.id,type:"Int",required:!0},userId:{value:parseInt(t.user.id),type:"Int",required:!0}},fields:["success","message"]}});u.success?(x.success(u.message),c(n.filter(d=>d.id!==m.id))):x.error(u.message)};return s.useEffect(()=>{l(1)},[t.randKey,t.user]),e.jsx(e.Fragment,{children:e.jsx(oe,{dataSource:n,renderItem:m=>e.jsx(oe.Item,{actions:[e.jsx(se,{placement:"topLeft",title:"Remove "+m.role.name,onConfirm:()=>i(m),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(E,{icon:e.jsx(ce,{}),children:"Remove"})})],children:m.role.name})})})},$l=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,Hl=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(!1),[m]=a.useForm(),u=async d=>{const{data:o}=await Q.custom({url:"",method:"post",meta:{operation:"uploadSchoolMemberProfilePhoto",variables:{id:{value:parseInt(t.member.id),type:"Int",required:!0},photo:{value:d.file,type:"Upload",required:!0}},fields:["success","message",{schoolMember:Ue}]}}).catch(h=>(console.error(h),x.error("Error occured while uploading profile picture"),{data:null})).then(h=>h);o&&(o.success?(x.success(o.message),t.onChange(o.schoolMember),c(!1)):x.error(o.message))};return s.useEffect(()=>{},[]),e.jsxs(e.Fragment,{children:[e.jsx(E,{block:!0,type:"primary",onClick:()=>c(!0),children:"Update Profile Picture"}),e.jsx(re,{title:"Change Profile Picture",open:n,width:"40vw",onClose:d=>c(d),children:e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:l,children:e.jsxs(a,{layout:"vertical",form:m,onFinish:d=>{u(d)},requiredMark:!0,autoComplete:"off",children:[e.jsx(a.Item,{label:"Pick Files ("+xe.supported_image_extensions.join()+")",children:e.jsx(a.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:$l,noStyle:!0,rules:[{required:!0,type:"array",message:"Please Upload Profile Picture"}],children:e.jsxs(St.Dragger,{name:"file",accept:xe.supported_file_extensions.join(),multiple:!0,beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(tt,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",loading:l,children:"Change"})})]})})})})]})},Jl=t=>{var u,d,o,h,C,k,z;const[n,c]=s.useState(!1),[l,i]=s.useState(null),m=async()=>{c(!0);const{data:Y}=await Q.custom({url:"",method:"get",meta:{operation:"schoolMember",variables:{id:{value:parseInt(t.member.id),type:"Int",required:!0}},fields:Ue}}).catch(F=>(console.error(F),x.error("Error occured while getting school member"),{data:null})).then(F=>F);Y&&i(Y),c(!1)};return s.useEffect(()=>{i(t.member),m()},[]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(ne,{children:[e.jsxs(B,{span:4,children:[e.jsx(vr,{width:"100%",height:"280px",src:l==null?void 0:l.dp}),e.jsx("div",{style:{marginTop:10},children:e.jsx(Hl,{member:t.member,onChange:Y=>{i(Y)}})})]}),e.jsx(B,{span:20,children:e.jsxs("div",{style:{padding:10,marginLeft:10,border:"1px solid #e8e8e8",borderRadius:5},children:[e.jsxs(Ie,{title:"Member Basic Informations",children:[e.jsx(Ie.Item,{label:"Title",children:t.member.title}),e.jsx(Ie.Item,{label:"First Name",children:t.member.firstName}),e.jsx(Ie.Item,{label:"Middle Name",children:t.member.middleName}),e.jsx(Ie.Item,{label:"Last Name",children:t.member.lastName}),e.jsx(Ie.Item,{label:"Gender",children:t.member.gender}),e.jsx(Ie.Item,{label:"DOB",children:t.member.dob}),e.jsx(Ie.Item,{label:"Age",children:((u=t==null?void 0:t.member)==null?void 0:u.age)&&e.jsxs(e.Fragment,{children:[t.member.age," years"]})})]}),e.jsxs(Ie,{title:"Member Contact Informations",children:[e.jsx(Ie.Item,{label:"Mobile Phone Number",children:t.member.phone}),e.jsx(Ie.Item,{label:"Email Address",children:t.member.email}),e.jsx(Ie.Item,{label:"Region",children:(o=(d=t.member)==null?void 0:d.region)==null?void 0:o.name}),e.jsx(Ie.Item,{label:"District",children:(C=(h=t.member)==null?void 0:h.district)==null?void 0:C.name}),e.jsx(Ie.Item,{label:"Ward",children:(z=(k=t.member)==null?void 0:k.ward)==null?void 0:z.name}),e.jsx(Ie.Item,{label:"Address",children:t.member.address})]})]})})]})})})},{TextArea:Ql}=K,{Option:wl}=$,Xl=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,Zl=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState([]),[m]=a.useForm(),u=async o=>{c(!0);const{data:h}=await Q.custom({url:"",method:"post",meta:{operation:"createSchoolMemberContract",variables:{schoolMemberId:{value:parseInt(t.member.id),type:"Int",required:!0},contractNumber:{value:o.contractNumber,type:"String",required:!0},startDate:{value:o.contractStartDate,type:"String",required:!0},endDate:{value:o.contractEndDate,type:"String",required:!0},contractType:{value:o.contractType,type:"String",required:!0},description:{value:o.contractDescription,type:"String",required:!1},contractDocument:{value:o.file,type:"Upload",required:!0}},fields:["success","message"]}}).catch(C=>(console.error(C),x.error("Error occured while adding contract"),{data:null})).then(C=>C);console.log(h),c(!1)},d=async()=>{const{data:o}=await Q.custom({url:"",method:"get",meta:{operation:"schoolMemberContractTypes",variables:{},fields:["data"]}}).catch(()=>(x.error("Error occured while fetching contract types"),{data:null})).then(h=>h);o&&i(o.data)};return s.useEffect(()=>{d()},[]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:m,onFinish:o=>{u(o)},requiredMark:!0,children:[e.jsx(a.Item,{name:"contractNumber",label:"Contract Number",rules:[{required:!0,type:"string",message:"Please input Contract Number"}],children:e.jsx(K,{})}),e.jsx(a.Item,{name:"contractStartDate",label:"Contract Start Date",rules:[{required:!0,type:"date",message:"Please input Contract Start Date"}],children:e.jsx(Fe.DatePicker,{style:{width:"50%"},popupStyle:{zIndex:9999},onChange:()=>{}})}),e.jsx(a.Item,{name:"contractEndDate",label:"Contract End Date",rules:[{required:!0,type:"date",message:"Please input Contract End Date"}],children:e.jsx(Fe.DatePicker,{style:{width:"50%"},popupStyle:{zIndex:9999},onChange:()=>{},disabledDate:o=>o&&o<m.getFieldValue("contractStartDate")})}),e.jsx(a.Item,{name:"contractType",label:"Contract Type",rules:[{required:!0,type:"string",message:"Please choose Contract Type..."}],children:e.jsx($,{showSearch:!0,placeholder:"Select a Contract Type",optionFilterProp:"children",onChange:o=>{},onSearch:o=>{},filterOption:(o,h)=>h.children.toLowerCase().includes(o.toLowerCase()),dropdownStyle:{zIndex:9999},children:l.map((o,h)=>e.jsx(wl,{value:o,children:o}))})}),e.jsx(a.Item,{name:"contractDescription",label:"Contract Description",rules:[{required:!1,type:"string",message:"Please input Contract Description"}],children:e.jsx(Ql,{rows:4})}),e.jsx(a.Item,{label:"Pick Files (pdf)",children:e.jsx(a.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:Xl,noStyle:!0,rules:[{required:!0,type:"array",message:"Please Upload Contract File"}],children:e.jsxs(Fe.Upload.Dragger,{name:"file",accept:"application/pdf",multiple:!1,beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(tt,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Search:ea}=K,ta=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(0),[m,u]=s.useState(0),[d,o]=s.useState(""),[h,C]=s.useState(null),[k,z]=s.useState(!1),Y=async L=>{const{data:A}=await Q.custom({url:"",method:"post",meta:{operation:"deleteSchoolMemberContract",variables:{id:{value:L,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error occured while deleting school member contract"),{data:null})).then(I=>I);A&&(x.success(A.message),C(h.filter(I=>I.id!==L)))},F=async(L,A)=>{const{data:I}=await Q.custom({url:"",method:"post",meta:{operation:"blockUnblockSchoolMemberContract",variables:{id:{value:parseInt(L.toString()),type:"Int",required:!0},blocked:{value:A,type:"Boolean",required:!0}},fields:["success","message",{schoolMemberContract:At}]}}).catch(()=>(x.error("Error occured while blocking/unblocking school member contract"),{data:null})).then(q=>q);I?(x.success(I.message,{position:"top-left"}),C(h.map(q=>q.id.toString()===L.toString()?I.schoolMemberContract:q))):x.error("Error occured while blocking/unblocking school member contract",{position:"bottom-right"})},b=async(L=1,A=25,I="")=>{c(!0);const{data:q}=await Q.custom({url:"",method:"get",meta:{operation:"schoolMemberContracts",variables:{schoolMemberId:{value:parseInt(t.member.id),type:"Int",required:!0},page:{value:L,type:"Int",required:!0},pageSize:{value:A,type:"Int",required:!0},key:{value:I,type:"String",required:!1}},fields:["total","pages","page","hasNext","hasPrev",{results:At}]}}).catch(()=>(x.error("Error occured while getting school member contracts"),{data:null})).then(g=>g);q&&(i(q.total),u(q.pages),C(q.results)),c(!1)};return s.useEffect(()=>{b(1,25,"")},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(B,{span:8,children:e.jsx(ea,{placeholder:"input search text",onSearch:L=>{o(L),b(1,25,L)},style:{width:"100%"}})}),e.jsx(B,{span:16,children:e.jsx(E,{type:"primary",style:{float:"right"},icon:e.jsx(de,{}),onClick:()=>z(!0),disabled:n||!t.member.canManage,children:"Add Contract"})})]}),e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(he,{dataSource:h,columns:[{title:"Contract #",dataIndex:"contractNumber",key:"contractNumber"},{title:"Contract Type",dataIndex:"contractType",key:"contractType"},{title:"Start Date",dataIndex:"contractStartDate",key:"contractStartDate"},{title:"End Date",dataIndex:"contractEndDate",key:"contractEndDate"},{title:"Status",dataIndex:"status",key:"status",render:(L,A)=>e.jsx(e.Fragment,{children:A.isActive?e.jsx(w,{title:"Active",placement:"top",children:e.jsx(le,{color:"green",children:"Active"})}):e.jsx(w,{title:"Blocked",placement:"top",children:e.jsx(le,{color:"red",children:"Blocked"})})})},{title:"",dataIndex:"actions",key:"actions",render:(L,A)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(se,{title:"Delete Contract?",description:"Are you sure to delete this Contract?",onConfirm:()=>Y(A.id),okText:"Yes",cancelText:"No",children:e.jsx(E,{type:"primary",icon:e.jsx(ce,{}),disabled:!A.canDelete})}),A.isActive?e.jsx(w,{title:"Block Contract",placement:"top",children:e.jsx(E,{type:"primary",style:{marginLeft:10},icon:e.jsx(Gt,{}),onClick:()=>{F(A.id,!1)}})}):e.jsx(w,{title:"Unblock Contract",placement:"top",children:e.jsx(E,{type:"primary",style:{marginLeft:10},icon:e.jsx(Pr,{}),onClick:()=>{F(A.id,!0)}})}),e.jsx(w,{title:"Download Contract Document",placement:"top",children:e.jsx(E,{type:"primary",style:{marginLeft:10},icon:e.jsx(gt,{}),onClick:()=>{window.open(A.contractDocument,"_blank")}})})]})}]})})}),e.jsx(ne,{children:e.jsx(B,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(Kt,{defaultCurrent:1,total:l,onChange:(L,A)=>{b(L,A,d)}})})}),e.jsx(re,{title:"Add Contract",open:k,width:"40vw",onClose:L=>z(L),children:e.jsx(Zl,{member:t.member})})]})},sa=t=>{const[n,c]=s.useState(null),l=i=>i.charAt(0).toUpperCase()+i.slice(1);return s.useEffect(()=>{c(JSON.parse(t.member.availability))},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(B,{span:4,children:e.jsx("b",{children:"Day"})}),e.jsx(B,{span:2,children:e.jsx("b",{children:"Morning"})}),e.jsx(B,{span:2,children:e.jsx("b",{children:"After Noon"})}),e.jsx(B,{span:2,children:e.jsx("b",{children:"Evening"})}),e.jsx(B,{span:4,style:{textAlign:"right"},children:e.jsx("b",{children:"Time Range"})})]}),n&&Object.keys(n).map(i=>e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:4,children:i.charAt(0).toUpperCase()+i.slice(1)}),e.jsx(B,{span:2,children:e.jsx(se,{title:n[i].morning?"Available on "+l(i):"Not Available on "+l(i),description:e.jsx("div",{style:{width:"245px"},children:n[i].morning?"Are you sure you want to make this member unavailable in the morning?":"Are you sure you want to make this member available in the morning?"}),onConfirm:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(le,{color:n[i].morning?"green":"red",style:{cursor:"pointer"},children:n[i].morning?"Yes":"No"})})}),e.jsx(B,{span:2,children:e.jsx(se,{title:n[i].afternoon?"Available on "+l(i):"Not Available on "+l(i),description:e.jsx("div",{style:{width:"245px"},children:n[i].afternoon?"Are you sure you want to make this member unavailable in the morning?":"Are you sure you want to make this member available in the morning?"}),onConfirm:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(le,{color:n[i].afternoon?"green":"red",style:{cursor:"pointer"},children:n[i].afternoon?"Yes":"No"})})}),e.jsx(B,{span:2,children:e.jsx(se,{title:n[i].evening?"Available on "+l(i):"Not Available on "+l(i),description:e.jsx("div",{style:{width:"245px"},children:n[i].evening?"Are you sure you want to make this member unavailable in the morning?":"Are you sure you want to make this member available in the morning?"}),onConfirm:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(le,{color:n[i].evening?"green":"red",style:{cursor:"pointer"},children:n[i].evening?"Yes":"No"})})}),e.jsxs(B,{span:4,children:[n[i].time.map(m=>e.jsx("span",{children:m})),e.jsx(E,{size:"small",type:"primary",icon:e.jsx(Ee,{}),style:{float:"right"}})]})]}))]})},na=Yn.createContext({name:"Default"}),ra=t=>{var Ct,bt,It,Ft,kt;const[n,c]=Cr.useNotification(),[l,i]=s.useState(),[m,u]=s.useState([]),[d,o]=s.useState([]),[h,C]=s.useState(!1),[k,z]=s.useState(0),[Y,F]=s.useState(20),[b,L]=s.useState(""),[A,I]=s.useState(!0),[q]=a.useForm(),[g]=a.useForm(),D=!pe.useBreakpoint().lg,[p,T]=s.useState(!1),[v,f]=s.useState(!1),[M,r]=s.useState(!1),[j,U]=s.useState(!1),[V,R]=s.useState(!1),[G,X]=s.useState(!1),[me,je]=s.useState(!1),[ve,_]=s.useState(),[N,te]=s.useState(!1),[ee,ue]=s.useState(!1),[qe,Ne]=s.useState(!1),[Pe,Ae]=s.useState(!1),ze=W=>{i(W),Ae(!0)},P=W=>{i(W),Ne(!0)},y=W=>{i(W),T(!0)},J=W=>{i(W),je(!0)},ye=(W,O)=>{W?n.success({message:"Member Credential Reset",description:O,placement:"bottomRight"}):n.error({message:"Member Credential Reset",description:O,placement:"bottomRight"})},Te=W=>{ue(W),te(!1),_(void 0),g.resetFields()},be=W=>{te(!0),i(W)},We=W=>{_(W)},Ve=W=>{i(W),r(!0)},us=W=>{i(W),f(!0)},hs=async W=>{u([W,...m])},ms=W=>{u([W,...m]),X(!1)},xs=async W=>{On(W).then(O=>{O&&(O.success?(x.success(O.message),u(m.filter(Ce=>Ce.id!==W))):x.error(O.message))})},at=async(W,O="",Ce=20,De=[])=>{I(!0),Kn(W,O,Ce,De,t.status??"").then(Oe=>{Oe&&(z(Oe.total),u(Oe.results)),I(!1)})},gs=async(W,O="",Ce=20)=>{Xt(W,O,Ce).then(De=>{De&&(z(De.total),o([...De.results]))})},js=s.useMemo(()=>({name:"School Members"}),[]),ys=async W=>{u(m.map(O=>O.id===W.id?W:O)),T(!1)};return s.useEffect(()=>(at(1,"",20),gs(1,"",20),document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[t.status]),e.jsx(e.Fragment,{children:e.jsxs(na.Provider,{value:js,children:[c,e.jsx(br,{offsetTop:68,children:e.jsx(et,{size:"small",style:{marginBottom:"10px"},children:e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:D?24:10,children:e.jsx(a,{layout:"horizontal",form:q,onFinish:W=>{L(W.key),m.length=0,at(1,W.key,Y,W.roles)},children:e.jsxs(ne,{children:[e.jsx(B,{span:D?24:16,children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(B,{span:6,children:e.jsx(a.Item,{name:"roles",children:e.jsx($,{size:"large",mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"Please select Member Role(s)",onChange:()=>{},dropdownStyle:{zIndex:9999},children:d.map(W=>e.jsx($.Option,{value:W.id,children:W.role.name},W.id))})})}),e.jsx(B,{children:e.jsx(E,{htmlType:"submit",size:"large",icon:e.jsx(ae,{}),onClick:()=>q.submit()})})]})})}),e.jsxs(B,{span:D?24:14,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(E,{size:"large",icon:e.jsx(de,{}),onClick:()=>R(!0),children:"Authorize Member"}),e.jsx(E,{size:"large",icon:e.jsx(de,{}),onClick:()=>X(!0),children:"Register Member"}),e.jsx(E,{size:"large",icon:e.jsx(de,{}),onClick:()=>C(!0),children:"Enroll Member(s)"})]})]})})}),e.jsx(he,{loading:A,columns:[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(W,O)=>e.jsx("span",{children:e.jsx("a",{children:O.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(W,O)=>e.jsx("span",{children:O.registrationNumber})},{title:"Email",dataIndex:"email",render:(W,O)=>e.jsx("span",{children:O.email?O.email:O.user.email})},{title:"Username",dataIndex:"username",render:(W,O)=>{var Ce;return e.jsx("span",{children:(Ce=O==null?void 0:O.user)==null?void 0:Ce.username})}},{title:"Phone",dataIndex:"phone",render:(W,O)=>e.jsx("span",{children:O.phone?O.phone:O.user.phone})},{title:"Gender",dataIndex:"gender",render:(W,O)=>e.jsx("span",{children:O.gender?O.gender:O.user.gender})},{title:"Region/District/Ward",dataIndex:"region_district_ward",render:(W,O)=>{var Ce,De,Oe,Mt,Lt;return e.jsxs("span",{children:[(Ce=O==null?void 0:O.region)==null?void 0:Ce.name,((De=O==null?void 0:O.district)==null?void 0:De.name)&&e.jsxs(e.Fragment,{children:["/",(Oe=O==null?void 0:O.district)==null?void 0:Oe.name]}),((Mt=O==null?void 0:O.ward)==null?void 0:Mt.name)&&e.jsxs(e.Fragment,{children:["/",(Lt=O==null?void 0:O.ward)==null?void 0:Lt.name]})]})}},{title:"Date Joined",dataIndex:"created",render:(W,O)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(O.created).toLocaleString()})})},{title:"Authed",dataIndex:"isAuthed",render:(W,O)=>{var Ce;return e.jsx("a",{children:(Ce=O==null?void 0:O.user)!=null&&Ce.isAuthed?e.jsx(le,{color:"green",children:"Yes"}):e.jsx(le,{color:"red",children:"Not"})})}},{title:"Status",dataIndex:"isActive",render:(W,O)=>e.jsx("a",{children:O!=null&&O.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"Action(s)",dataIndex:"action",fixed:"right",render:(W,O)=>{var Ce;return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(_e,{style:{color:"red"}}),disabled:!O.canEdit,children:e.jsx(w,{title:"Click to view Member Profile",placement:"left",color:"green",children:e.jsx(E,{type:"link",rel:"noopener noreferrer",onClick:()=>J(O),children:"Profile"})})}),O.contractApplicable&&e.jsx(H.Item,{icon:e.jsx(Ye,{style:{color:"red"}}),disabled:!O.canManage,children:e.jsx(w,{title:"Click to view Member Contracts",placement:"left",color:"green",children:e.jsx(E,{type:"link",rel:"noopener noreferrer",onClick:()=>P(O),children:"Contracts"})})}),e.jsx(H.Item,{icon:e.jsx(Ee,{style:{color:"red"}}),disabled:!O.canEdit,children:e.jsx(w,{title:"Click to Edit Member Informations",placement:"left",color:"green",children:e.jsx(E,{type:"link",rel:"noopener noreferrer",onClick:()=>y(O),children:"Edit"})})}),e.jsx(H.Item,{icon:e.jsx(ce,{style:{color:"red"}}),children:e.jsx(w,{title:"Delete Member",placement:"left",color:"red",children:e.jsx(se,{title:"Are you sure to delete this ",placement:"topRight",onConfirm:()=>xs(O==null?void 0:O.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(O!=null&&O.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(E,{type:"link",disabled:!(O!=null&&O.canDelete),children:"Delete"})})})}),O.canConfigureAvailability&&e.jsx(H.Item,{icon:e.jsx(Gn,{style:{color:"red"}}),children:e.jsx(E,{type:"link",onClick:()=>ze(O),children:"Manage Availability"})}),O.user&&e.jsxs(e.Fragment,{children:[e.jsx(H.Item,{icon:e.jsx(_e,{style:{color:"red"}}),children:e.jsx(E,{type:"link",onClick:()=>us(O),children:"Roles"})}),e.jsx(H.Item,{icon:e.jsx(_e,{style:{color:"red"}}),children:e.jsx(E,{type:"link",onClick:()=>Ve(O),children:"Manage Roles"})}),((Ce=O==null?void 0:O.user)==null?void 0:Ce.isAuthed)&&e.jsx(H.Item,{icon:e.jsx(Ot,{style:{color:"red"}}),children:e.jsx(w,{title:"Click to Reset Member Credentials",placement:"left",color:"green",children:e.jsx(E,{type:"link",onClick:()=>be(O),children:"Reset Credentials"})})})]})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:De=>De.preventDefault(),children:e.jsx(Le,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}}],dataSource:m,pagination:{onChange:(W,O)=>{F(O),at(W,b,O)},total:k,pageSize:Y,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"calc(100vh - 350px)"}}),e.jsx(Se,{title:"Adding School Members",anchor:"right",open:h,noOverFlow:!0,onClose:W=>C(W),width:"35vw",children:e.jsx(Gl,{randKey:Math.random(),onAdd:hs})}),e.jsx(re,{title:"Resetting Password",open:N,onClose:W=>te(W),width:"30vw",children:e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Resetting Credentials for  ",e.jsx("b",{children:l==null?void 0:l.fullName})]}),e.jsx("p",{children:"Are you sure to reset this user's credentials?"}),e.jsx(Kl,{member:l==null?void 0:l.user,form:g,resetPhoneChange:We,randKey:Math.random(),resetting:Te,resettingFeedback:ye}),e.jsxs(Ir,{justify:"space-between",children:[e.jsx(E,{onClick:()=>{te(!1),i(void 0)},children:"Close"}),e.jsx(E,{disabled:g.getFieldValue("phone")?g.getFieldValue("phone").length<10||ee:!0,onClick:()=>{g.submit()},children:"Reset"})]})]})}),e.jsx(re,{title:((Ct=l==null?void 0:l.user)==null?void 0:Ct.fullName)+" Roles",open:v,onClose:W=>f(W),width:"60vw",children:e.jsx(Vl,{user:l==null?void 0:l.user,school:l==null?void 0:l.school,randKey:Math.random()})}),e.jsx(re,{title:"Manage "+((bt=l==null?void 0:l.user)==null?void 0:bt.fullName)+" Roles",open:M,width:"40vw",onClose:W=>r(W),children:e.jsx(Wl,{user:l==null?void 0:l.user,school:l==null?void 0:l.school,randKey:Math.random()})}),e.jsx(re,{title:"Member Registration By Excel Uploading",open:j,width:"40vw",onClose:W=>U(W),children:e.jsx("span",{children:"member registration by excel uploading"})}),e.jsx(re,{title:"Members Authorization",open:V,width:"40vw",onClose:W=>R(W),children:e.jsx(Ol,{})}),e.jsx(re,{title:"Edit Member",open:p,width:"40vw",onClose:W=>T(W),children:e.jsx(Ul,{member:l,onFinish:ys})}),e.jsx(re,{title:"Managing "+((It=l==null?void 0:l.user)==null?void 0:It.fullName)+" Availability",open:Pe,width:"70vw",onClose:W=>Ae(W),children:e.jsx(sa,{member:l})}),e.jsx(Se,{title:"Registering School Members",anchor:"right",open:G,onClose:W=>X(W),width:"35vw",noOverFlow:!0,children:e.jsx(_l,{onAdd:ms})}),e.jsx(Se,{title:e.jsx(e.Fragment,{children:e.jsxs("span",{children:[e.jsx("b",{children:(Ft=l==null?void 0:l.user)==null?void 0:Ft.fullName})," Profile"]})}),anchor:"right",open:me,noOverFlow:!0,onClose:W=>je(W),width:"85vw",children:e.jsx(Jl,{member:l})}),e.jsx(Se,{title:e.jsx(e.Fragment,{children:e.jsxs("span",{children:[e.jsx("b",{children:(kt=l==null?void 0:l.user)==null?void 0:kt.fullName})," Contracts"]})}),anchor:"right",open:qe,noOverFlow:!0,onClose:W=>Ne(W),width:"60vw",children:e.jsx(ta,{member:l})})]})})},la=()=>{const{status:t}=Be();return s.useEffect(()=>{document.title=t==="active"?xe.system_name+": Active Members":t==="blocked"?xe.system_name+": Blocked Members":xe.system_name+": All Members"},[t]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Members"}),e.jsx(Z.Item,{children:t==="active"?"Active Members":t==="blocked"?"Blocked Members":"All Members"})]}),e.jsx(ra,{status:t})]})},{TextArea:aa}=K,ia=t=>{const[n,c]=s.useState(!0),[l,i]=s.useState(!0);return s.useEffect(()=>{},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs("h3",{children:["Course: ",t.studyCourse.course.name]}),e.jsxs("h3",{children:["Year: ",t.studyCourse.year]}),e.jsxs("h3",{children:["Level: ",t.studyCourse.levelDisplay]}),e.jsxs("h3",{children:["Semester: ",t.studyCourse.semesterDisplay]}),e.jsxs(a,{layout:"vertical",form:t.form,onFinish:m=>{m.study_course_id=t.studyCourse.id,m.create_class=n,m.create_drive=l,t.onFinish(m)},initialValues:{periods_per_week:2},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx(K,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(a.Item,{name:"periods_per_week",label:"Periods Per Week",rules:[{required:!0,type:"number",message:"Please input Periods Per Week"},{min:1,type:"number",message:"Periods Per Week must be greater than 0"}],children:e.jsx(Fe.InputNumber,{size:"large",placeholder:"Enter Periods Per Week ..."})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Me,{checked:n,onChange:()=>c(!n),children:"Auto Create Class"})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Me,{checked:l,onChange:()=>i(!l),children:"Auto Create Drive"})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(aa,{rows:2,placeholder:"Please input Description ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},{TextArea:oa}=K,da=t=>{var l,i,m,u,d,o,h,C,k;const[n,c]=s.useState(t.module.isActive);return s.useEffect(()=>{t.form.setFieldsValue({name:t.module.name,code:t.module.code,description:t.module.description,periods_per_week:t.module.periodsPerWeek,is_active:t.module.isActive})},[t.randKey,t.module,t.form]),e.jsxs(e.Fragment,{children:[e.jsxs("h3",{children:["Course: ",(m=(i=(l=t.module)==null?void 0:l.studyCourse)==null?void 0:i.course)==null?void 0:m.name]}),e.jsxs("h3",{children:["Year: ",(d=(u=t.module)==null?void 0:u.studyCourse)==null?void 0:d.year]}),e.jsxs("h3",{children:["Level: ",(h=(o=t.module)==null?void 0:o.studyCourse)==null?void 0:h.levelDisplay]}),e.jsxs("h3",{children:["Semester: ",(k=(C=t.module)==null?void 0:C.studyCourse)==null?void 0:k.semesterDisplay]}),e.jsxs(a,{layout:"vertical",form:t.form,onFinish:z=>{z.id=parseInt(t.module.id),z.study_course_id=t.module.studyCourse.id,z.is_active=n,t.onFinish(z)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx(K,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(oa,{rows:2,placeholder:"Please input Description ..."})}),e.jsx(a.Item,{name:"periods_per_week",label:"Periods Per Week",rules:[{required:!0,type:"number",message:"Please input Periods Per Week"},{min:1,type:"number",message:"Periods Per Week must be greater than 0"}],children:e.jsx(Ke,{size:"large",placeholder:"Enter Periods Per Week ..."})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Me,{checked:n,onChange:()=>c(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},{Option:we}=$,ca=[];for(let t=2022;t<new Date().getFullYear()+5;t++)ca.push(e.jsx(we,{children:t.toString()},t));const ua=t=>{const[n,c]=s.useState(null),[l,i]=s.useState(null),[m,u]=s.useState(null),[d,o]=s.useState(null),[h,C]=s.useState(null),[k,z]=s.useState([]),[Y]=a.useForm(),[F,b]=s.useState(""),L=async p=>{C(p.format("YYYY-MM-DD"))},A=async p=>{o(p)},I=async p=>{u(p)},q=async p=>{c(p),i(null)},g=async p=>{i(p),u(null)},S=async()=>{var p;Zt(1,"",100,(p=t.studyCourse)==null?void 0:p.id).then(T=>{z(T.results)})},D=async p=>{var v;const{data:T}=await Q.custom({url:"",method:"post",meta:{operation:"createStudyCourseStudent",variables:{studyCourseId:{value:p.studyCourseId,type:"Int",required:!1},firstName:{value:p.firstName,type:"String",required:!0},middleName:{value:p.middleName,type:"String",required:!0},lastName:{value:p.lastName,type:"String",required:!0},email:{value:p.email,type:"String",required:!1},phones:{value:p.phones,type:"[String]",required:!1},registrationNumber:{value:p.registrationNumber,type:"String",required:!0},gender:{value:p.gender,type:"String",required:!0},regionId:{value:p.regionId,type:"Int",required:!1},districtId:{value:p.districtId,type:"Int",required:!1},wardId:{value:p.wardId,type:"Int",required:!1},dob:{value:p.dob,type:"String",required:!1},groupId:{value:parseInt(((v=p.groupId)==null?void 0:v.toString())??"0"),type:"Int",required:!1}},fields:["success","message"]}}).catch(f=>(console.error(f),x.error("Error occured while creating student"),{data:null})).then(f=>f);T&&(T.success?(x.success(T.message),Y.resetFields()):(b(T.message),x.error(T.message)))};return s.useEffect(()=>{S()},[t.editting,t.studyCourse]),e.jsxs(e.Fragment,{children:[F.length>0&&e.jsx(Fe.Alert,{message:"Info",description:F,closable:!0}),e.jsxs(a,{layout:"horizontal",form:Y,onFinish:p=>{var T;p.studyCourseId=parseInt((T=t.studyCourse)==null?void 0:T.id),p.dob=h,p.regionId=parseInt(n),p.districtId=parseInt(l),p.wardId=parseInt(m),D(p)},requiredMark:!0,children:[e.jsx(a.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(a.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(a.Item,{name:"registrationNumber",label:e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{children:"Registration Number"}),e.jsx("span",{style:{marginLeft:10,marginTop:5},children:e.jsx(w,{title:"Click to Auto Generate Student Registration Number according to the configured Format",children:e.jsx(E,{size:"small",onClick:()=>x("comming soon"),children:"Auto Generate"})})})]})}),rules:[{required:!0,type:"string",message:"Please input Registration Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Registration Number ..."})}),e.jsx(a.Item,{name:"email",label:"Email Address",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(K,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(a.Item,{name:"phones",label:"Phones Number",rules:[{required:!1,type:"string",message:"Please input Phones Number"}],children:e.jsx(K,{size:"large",placeholder:"Enter Phones Numbers ..."})}),e.jsx(a.Item,{name:"groupId",label:"Group/Stream",style:{marginTop:20},rules:[{required:k.length>0,type:"string",message:"Please choose Group/Stream"}],children:e.jsx($,{placeholder:"Please Choose Group/Stream ...",style:{width:220},onChange:A,size:"large",dropdownStyle:{zIndex:9999},children:k.map(p=>e.jsx(we,{value:p.id,children:p.name}))})}),e.jsxs(ge,{direction:"horizontal",size:"small",children:[e.jsx(a.Item,{name:"dob",label:"Date of Birth",style:{marginTop:20},rules:[{required:!1,type:"date",message:"Please input Date of Birth"}],children:e.jsx(st,{onChange:L,size:"large",disabledDate:p=>p&&p>Re().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(a.Item,{name:"gender",label:"Gender",style:{marginTop:20},rules:[{required:!0,type:"string",message:"Please choose Gender"}],initialValue:d,children:e.jsxs($,{placeholder:"Please Choose Gender ...",style:{width:220},onChange:A,size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx("option",{value:"others",children:"Others"}),e.jsx(we,{value:"female",children:"Female"}),e.jsx(we,{value:"male",children:"Male"})]})})]}),e.jsxs(ge,{direction:"horizontal",size:"small",children:[e.jsx(rt,{onChange:q,regionId:n,label:"Region",name:"regionId",size:"middle"}),e.jsx(nt,{size:"middle",regionId:parseInt(n),districtId:l,onChange:g,label:"District",name:"districtId"})]}),e.jsx(ge,{direction:"horizontal",size:"small",children:e.jsx(lt,{size:"middle",districtId:parseInt(l),wardId:m,onChange:I,label:"Ward",name:"wardId"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})]})},ha=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,ma=t=>{const[n,c]=s.useState(!1),[l,i]=s.useState(!1),[m,u]=s.useState(""),d=async o=>{c(!0),i(!0);const{data:h}=await Q.custom({url:"",method:"post",meta:{operation:"createStudyCourseStudentsByUploading",variables:{studyCourseId:{value:parseInt(t.studyCourse.id),type:"Int",required:!0},files:{value:o.files,type:"[Upload]",required:!0}},fields:["success","message"]}}).catch(()=>(x.remove(),x.error("Something Went Wrong ..."),{data:null})).then(C=>C);h&&(h.success?x(h.message):x.error(h.message),u(h.message)),c(!1),i(!0)};return s.useEffect(()=>{},[t.randKey]),l&&!n?e.jsx(e.Fragment,{children:e.jsx(vt,{type:"info",message:e.jsx(e.Fragment,{children:e.jsxs("p",{children:[m,e.jsx(E,{style:{marginLeft:20},onClick:()=>{t.form.resetFields(),i(!1),c(!1)},children:"Upload Another File"})]})})})}):e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n&&!l,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:o=>{d(o)},requiredMark:!0,children:[e.jsx(a.Item,{label:"Students Excel File",children:e.jsx(a.Item,{name:"files",valuePropName:"fileList",getValueFromEvent:ha,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload students excel file"}],children:e.jsxs(St.Dragger,{name:"files",accept:".xls, .xlsx",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(tt,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsxs("span",{children:["Download Uploading Excel Format Template",e.jsx("span",{style:{marginLeft:10},children:e.jsxs("a",{href:xe.course_student_registration_template_file,target:"_blank",children:[e.jsx(gt,{}),"Download"]})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",loading:n,children:"Register"})})]})})})},qt=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!0),[m,u]=s.useState(1),[d]=a.useForm(),[o,h]=s.useState(0),[C,k]=s.useState(0),[z,Y]=s.useState(!0),F=async L=>{_n(L,t.module.id,t.memberType).then(A=>{A&&(A.success?(x.success(A.message),c(n.filter(I=>I.id.toString()!==L.id.toString())),t.onAdd(A.schoolModuleMember)):x.error(A.message))})},b=async(L,A="")=>{i(!0),Bn(L,A,t.module.id,t.memberType).then(I=>{I&&(k(I.total),h(I.pages),u(I.page),Y(I.hasNext),c([...n,...I.results]))}),i(!1)};return s.useEffect(()=>{b(1)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(B,{span:10,children:e.jsx(a,{layout:"vertical",form:d,onFinish:L=>{n.length=0,c([]),b(1,L.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search Member(s)...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:14,children:e.jsx(E,{icon:e.jsx(ae,{}),size:"large",onClick:()=>d.submit()})})]}),e.jsx(ie,{spinning:l,children:e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(ft,{dataLength:C,next:()=>b(m),hasMore:z,scrollableTarget:"scrollableAdminstratorDiv",loader:e.jsx(e.Fragment,{children:n.length>0?e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:e.jsx(ie,{})}):e.jsx(e.Fragment,{})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:n.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(oe,{itemLayout:"horizontal",dataSource:n,renderItem:L=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(oe.Item,{style:{margin:0,padding:0},actions:[e.jsx(se,{title:"Are you sure to add this member?",onConfirm:()=>F(L),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(E,{size:"large",icon:e.jsx(Ge,{})})})],children:e.jsx(oe.Item.Meta,{avatar:e.jsx(es,{src:L.user.pic}),title:e.jsxs("a",{children:[e.jsx("span",{children:L.user.fullName}),L.registrationNumber&&e.jsx("span",{style:{marginLeft:5},children:e.jsx(le,{color:"green",children:L.registrationNumber})})]}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:L.email})})})},"adding-module-member-"+L.id)})})})})})]})},Rt=t=>{var f,M;const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(!1),[d,o]=s.useState(1),[h,C]=s.useState(0),[k,z]=s.useState(20),[Y,F]=s.useState(""),[b,L]=s.useState(!1),[A,I]=s.useState(!0),[q]=a.useForm(),S=!pe.useBreakpoint().lg,D=async()=>{v(1,"",k)},p=async r=>{Wn(r).then(j=>{j&&(j.success?(x.success(j.message),c(n.filter(U=>U.id!==r))):x.error(j.message))})},T=[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(r,j)=>e.jsx("span",{children:e.jsx("a",{children:j.schoolMember.fullName??j.schoolMember.user.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(r,j)=>e.jsx("span",{children:j.schoolMember.registrationNumber})},{title:"Date Joined",dataIndex:"created",render:(r,j)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(j.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(r,j)=>e.jsx("a",{children:j!=null&&j.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(r,j)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsx(H,{children:e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(w,{title:"Delete a Module Member",children:e.jsx(se,{title:"Are you sure to delete this ",onConfirm:()=>p(j==null?void 0:j.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(j!=null&&j.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Le,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],v=async(r,j="",U=20)=>{var V;Un(r,j,U,((V=t.module)==null?void 0:V.id)??0,t.memberType??"").then(R=>{R&&(o(R.page),C(R.total),L(R.hasNext),c(R.results))}),I(!1)};return s.useEffect(()=>{v(d)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:S?24:16,children:e.jsx(a,{layout:"vertical",form:q,onFinish:r=>{o(1),n.length=0,v(1,r.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(B,{span:S?24:8,style:{display:"flex",justifyContent:"flex-end"},children:[t.memberType==="Student"&&e.jsx(E,{size:"large",icon:e.jsx(de,{}),onClick:()=>u(!0),children:"Enroll Student(s)"}),t.memberType==="Teacher"&&e.jsx(E,{size:"large",icon:e.jsx(de,{}),onClick:()=>u(!0),children:"Enroll Teacher(s)/Lecturer(s)"})]})]}),e.jsx(he,{loading:A,columns:T,dataSource:n,scroll:{x:!0,y:"calc(100vh - 350px)"},pagination:{onChange:(r,j)=>{z(j),v(r,Y,j)},total:h,pageSize:k,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(Se,{anchor:"left",open:l,noOverFlow:!0,onClose:r=>i(r),width:"80vw",title:"Adding "+((f=t.module)==null?void 0:f.name)+" Module Members",children:e.jsx(qt,{module:t.module,randKey:Math.random(),onAdd:D,memberType:t.memberType})}),e.jsx(Se,{anchor:"left",open:m,noOverFlow:!0,onClose:r=>u(r),width:"80vw",title:"Enrolling "+((M=t.module)==null?void 0:M.name)+" Module Members",children:e.jsx(qt,{module:t.module,randKey:Math.random(),onAdd:D,memberType:t.memberType})})]})},xa=t=>{const[n,c]=s.useState([]),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(!1),[h,C]=s.useState(0),[k,z]=s.useState(20),[Y,F]=s.useState(""),[b,L]=s.useState(!0),[A]=a.useForm(),q=!pe.useBreakpoint().lg,g=async T=>{const{data:v}=await Q.custom({url:"",method:"post",meta:{operation:"studyCourseStudentEnroll",variables:{studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0},studentId:{value:T,type:"Int",required:!0}},fields:["success","message",{studyCourseStudent:Vn}]}}).catch(()=>(x.error("Error in Bulk Enrolling of Students"),{data:null})).then(f=>f);v&&(v.success?(x.success(v.message),u(!1),o(!1),i([]),p(1,"",20),t.onAdd(v.studyCourseStudent)):x.error(v.message))},S=async()=>{const{data:T}=await Q.custom({url:"",method:"post",meta:{operation:"createStudyCourseStudentsBulk",variables:{studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0},students:{value:l,type:"[Int]",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error in Bulk Enrolling of Students"),{data:null})).then(v=>v);T&&(T.success?(x.success(T.message),u(!1),o(!1),i([]),p(1,"",20),t.onAddAll()):x.error(T.message))},D=[{title:e.jsx(e.Fragment,{children:e.jsx(Me,{checked:d,onChange:T=>{T.target.checked?(u(!0),o(!0),i(n.map(v=>parseInt(v.id.toString())))):(u(!1),l.length=0,i([]),o(!1))}})}),dataIndex:"checkConfirm",fixed:!0,render:(T,v,f)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Me,{defaultChecked:m,checked:m||l.includes(parseInt(v.id)),onChange:M=>{const r=parseInt(v.id);M.target.checked?i([r,...l]):i(l.filter(j=>j!==r))}})})},{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(T,v,f)=>e.jsx("span",{children:e.jsx("a",{children:v.fullName?v.fullName:v.user.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(T,v,f)=>e.jsx("span",{children:v.registrationNumber})},{title:"Email",dataIndex:"email",fixed:!0,render:(T,v,f)=>e.jsx(e.Fragment,{children:e.jsxs(ge,{direction:"vertical",children:[e.jsx(le,{color:"green",children:v.email?v.email:v.user.email?v.user.email:""}),e.jsx(le,{color:"green",children:v.phone?v.phone:v.user.phone})]})})},{title:"Gender",dataIndex:"gender",fixed:!0,render:(T,v,f)=>e.jsx("span",{children:v.gender?v.gender:v.user.gender})},{title:"Status",dataIndex:"isActive",render:(T,v,f)=>e.jsx("a",{children:v!=null&&v.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(T,v,f)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(se,{title:"Adding Student "+(v.fullName?v.fullName:v.user.fullName),onConfirm:()=>g(parseInt(v.id)),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(v!=null&&v.canManage),overlayStyle:{zIndex:9999},children:e.jsx(E,{size:"large",icon:e.jsx(de,{})})})})}],p=async(T,v="",f=20,M=[])=>{const{data:r}=await Q.custom({url:"",method:"get",meta:{operation:"studyCourseStudentsToEnroll",variables:{page:{value:T,type:"Int",required:!0},key:{value:v,type:"String",required:!1},pageSize:{value:f,type:"Int",required:!1},studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Ue}]}}).catch(()=>(x.error("Error fetching students"),{data:null})).then(j=>j);r&&(C(r.total),c([...r.results])),L(!1)};return s.useEffect(()=>{p(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:18,children:e.jsx(a,{layout:"horizontal",form:A,onFinish:T=>{F(T.key),n.length=0,p(1,T.key,k,T.roles)},children:e.jsxs(ne,{children:[e.jsx(B,{span:q?24:16,children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(B,{children:e.jsx(E,{size:"large",icon:e.jsx(ae,{}),onClick:()=>A.submit()})})]})})}),l.length>0&&e.jsx(e.Fragment,{children:e.jsx(B,{span:6,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{size:"large",icon:e.jsx(de,{}),onClick:S,children:"Add Selected"})})})]}),e.jsx(he,{loading:b,columns:D,dataSource:n,pagination:{onChange:(T,v)=>{z(v),p(T,Y,v)},total:h,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0,y:"calc(100vh - 280px)"}})]})},ga=t=>{var f;const[n,c]=s.useState([]),[l,i]=s.useState([]),[m,u]=s.useState(null),[d,o]=s.useState(!1),[h,C]=s.useState(0),[k,z]=s.useState(20),[Y,F]=s.useState(""),[b,L]=s.useState(!0),[A]=a.useForm(),q=!pe.useBreakpoint().lg,g=[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(M,r,j)=>e.jsx("span",{children:e.jsx("a",{children:r.schoolMember.fullName?r.schoolMember.fullName:r.schoolMember.user.fullName})})},{title:"REG #",dataIndex:"registration_number",fixed:!0,render:(M,r,j)=>e.jsx("span",{children:r.schoolMember.registrationNumber})},{title:"Group/Stream",dataIndex:"group",fixed:!0,render:(M,r,j)=>{var U;return e.jsx("span",{children:(U=r==null?void 0:r.group)==null?void 0:U.name})}},{title:"Email",dataIndex:"email",fixed:!0,render:(M,r,j)=>e.jsx(e.Fragment,{children:e.jsxs(ge,{direction:"vertical",children:[e.jsx(le,{children:r.schoolMember.email?r.schoolMember.email:r.schoolMember.user.email?r.schoolMember.user.email:""}),e.jsx(le,{children:r.schoolMember.phone?r.schoolMember.phone:r.schoolMember.user.phone})]})})},{title:"Gender",dataIndex:"gender",fixed:!0,render:(M,r,j)=>e.jsx("span",{children:r.schoolMember.gender?r.schoolMember.gender:r.schoolMember.user.gender})},{title:"Date Joined",dataIndex:"created",render:(M,r,j)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(r.created).toLocaleString()})})},{title:"Authed",dataIndex:"isAuthed",render:(M,r,j)=>{var U,V;return e.jsx("a",{children:(V=(U=r.schoolMember)==null?void 0:U.user)!=null&&V.isAuthed?e.jsx(le,{color:"green",children:"Yes"}):e.jsx(le,{color:"red",children:"Not"})})}},{title:"Status",dataIndex:"isActive",render:(M,r,j)=>e.jsx("a",{children:r!=null&&r.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(M,r,j)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsx(H,{children:e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(w,{title:"Delete Student",color:"red",children:e.jsx(se,{title:"Are you sure to delete ",onConfirm:()=>D(r==null?void 0:r.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(r!=null&&r.canDelete),overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Le,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],S=async()=>{Zt(1,"",20,parseInt(t.studyCourse.id.toString())).then(M=>{M&&i(M.results)})},D=async M=>{$n(M).then(r=>{r&&(r.success?(x.success(r.message),c(n.filter(j=>j.id!==M))):x.error(r.message))})},p=async(M,r="",j=20,U=[],V=0)=>{L(!0),Hn(M,r,j,U,parseInt(t.studyCourse.id.toString()),V).then(R=>{R&&(C(R.total),c([...R.results])),L(!1)})},T=async M=>{c([M,...n])},v=async()=>{p(1,"",20)};return s.useEffect(()=>{S(),p(1,"",20)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:12,children:e.jsx(a,{layout:"horizontal",form:A,onFinish:M=>{F(M.key),n.length=0,p(1,M.key,k,M.roles)},children:e.jsxs(ne,{children:[e.jsx(B,{span:q?24:16,children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(B,{children:e.jsx(E,{size:"large",icon:e.jsx(ae,{}),onClick:()=>A.submit()})})]})})}),e.jsx(B,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{size:"large",icon:e.jsx(de,{}),onClick:()=>o(!0),children:"Add Student(s)"})})]}),l.length>0&&e.jsxs("div",{children:[e.jsxs(E,{type:m===null?"primary":"default",onClick:()=>{u(null),p(1,"",20)},children:[m===null&&e.jsx(e.Fragment,{children:"All"}),m!==null&&e.jsx(e.Fragment,{children:e.jsx(le,{children:"All"})})]}),l.map(M=>e.jsxs(E,{type:(m==null?void 0:m.id)===M.id?"primary":"default",onClick:()=>{u(M),p(1,"",20,[],M.id)},children:[(m==null?void 0:m.id)===M.id&&e.jsxs(e.Fragment,{children:[M.name," - ",M.totalStudents," Students"]}),(m==null?void 0:m.id)!==M.id&&e.jsxs(e.Fragment,{children:[e.jsx(le,{children:M.name}),e.jsxs(le,{color:"green",children:[M.totalStudents," Students"]})]})]},M.id))]}),e.jsx(he,{loading:b,columns:g,dataSource:n,pagination:{onChange:(M,r)=>{z(r),p(M,Y,r)},total:h,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:"calc(100vh - 290px)"}}),e.jsx(Se,{title:"Enrolling "+((f=t.studyCourse)==null?void 0:f.course.name)+" Students",anchor:"left",open:d,noOverFlow:!0,onClose:M=>o(M),width:"70vw",children:e.jsx(xa,{studyCourse:t.studyCourse,randKey:Math.random(),onAdd:T,onAddAll:v})})]})},ja=t=>{var Ne,Pe,Ae,ze;const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,z]=s.useState(!0),[Y]=a.useForm(),[F]=a.useForm(),[b]=a.useForm(),[L]=a.useForm(),I=!pe.useBreakpoint().lg,q=Be(),[g,S]=s.useState(!1),[D,p]=s.useState(!1),[T,v]=s.useState(!1),[f,M]=s.useState(!1),[r,j]=s.useState(!1),[U,V]=s.useState(!1),[R,G]=s.useState(!1),X=P=>{c(P),v(!0)},me=P=>{c(P),M(!0)},je=P=>{c(P),p(!0)},ve=async P=>{Jn(P).then(y=>{y&&(y.success?(x.success(y.message),F.resetFields(),S(!1),i([y.module,...l])):x.error(y.message))})},_=async P=>{Qn(P).then(y=>{y&&(y.success?(x.success(y.message),b.resetFields(),p(!1),i(l.map(J=>J.id.toString()===P.id.toString()?y.module:J))):x.error(y.message))})},N=async P=>{Zn(P).then(y=>{y&&(y.success?(x.success(y.message),i(l.filter(J=>J.id!==P))):x.error(y.message))})},te=async P=>{er(P).then(y=>{y&&(y.success?(x.success(y.message),i(l.map(J=>J.id===y.module.id?y.module:J))):x.error(y.message))})},ee=async P=>{tr(P).then(y=>{y&&(y.success?(x.success(y.message),i(l.map(J=>J.id===y.module.id?y.module:J))):x.error(y.message))})},ue=async(P,y="",J=20)=>{var ye,Te;z(!0),((ye=t==null?void 0:t.studyCourse)==null?void 0:ye.id)??parseInt(q.studyCourseId)?wn(((Te=t==null?void 0:t.studyCourse)==null?void 0:Te.id)??parseInt(q.studyCourseId),P,y,J).then(be=>{be&&(u(be.total),i([...be.results]))}):Xn(P,y,J).then(be=>{be&&(u(be.total),i([...be.results]))}),z(!1)};s.useEffect(()=>{ue(1,"",20)},[]);const qe=[{title:"Name",dataIndex:"name",fixed:!0,render:(P,y,J)=>e.jsx("span",{children:e.jsx("a",{children:y.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(P,y,J)=>e.jsx("span",{children:e.jsx("a",{children:y.code})})},{title:"Course",dataIndex:"course",fixed:!0,render:(P,y,J)=>e.jsx("span",{children:e.jsx("a",{children:y.studyCourse.course.name})})},{title:"Year",dataIndex:"year",fixed:!0,render:(P,y,J)=>e.jsx("span",{children:y.studyCourse.year})},{title:"Level",dataIndex:"level",fixed:!0,render:(P,y,J)=>e.jsx("span",{children:y.studyCourse.levelDisplay})},{title:"Semester",dataIndex:"semester",fixed:!0,render:(P,y,J)=>e.jsx("span",{children:y.studyCourse.semesterDisplay})},{title:"Periods/Week",dataIndex:"periodsPerWeek",fixed:!0,render:(P,y,J)=>e.jsx("span",{children:y.periodsPerWeek})},{title:"Students",dataIndex:"totalStudents",fixed:!0,render:(P,y,J)=>e.jsx("a",{onClick:()=>me(y),children:e.jsx("span",{children:y.totalStudents})})},{title:"Lecturers",dataIndex:"totalTeachers",fixed:!0,render:(P,y,J)=>e.jsx("a",{onClick:()=>X(y),children:e.jsx("span",{children:y.totalTeachers})})},{title:"Assistants",dataIndex:"totalAssistants",fixed:!0,render:(P,y,J)=>e.jsx("span",{children:y.totalAssistants})},{title:"Has Drive",dataIndex:"hasDrive",render:(P,y,J)=>y.hasDrive?e.jsx(w,{title:"Click to View Drive",children:e.jsx(Et,{style:{color:"green"}})}):e.jsx(w,{title:"Click to Auto Create Drive For "+y.name,placement:"left",children:e.jsx(se,{placement:"topLeft",title:"Click to Auto Create Drive For "+y.name,onConfirm:()=>te(y),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(Nt,{style:{color:"red"}})})})},{title:"Has Class",dataIndex:"hasClass",render:(P,y,J)=>y.hasClass?e.jsx(w,{title:"Click to View Class",children:e.jsx(Et,{style:{color:"green"}})}):e.jsx(w,{title:"Click to Auto Create Class For "+y.name,placement:"left",children:e.jsx(se,{placement:"topLeft",title:"Click to Auto Create Drive For "+y.name,onConfirm:()=>ee(y),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(Nt,{style:{color:"red"}})})})},{title:"Created",dataIndex:"created",render:(P,y,J)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(y.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(P,y,J)=>e.jsx("a",{children:y!=null&&y.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(P,y,J)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsxs(H,{children:[y.canDelete?e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(se,{placement:"top",title:"Deleting "+y.name+", Are you sure?",onConfirm:()=>N(y==null?void 0:y.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})})}):e.jsx(e.Fragment,{}),e.jsx(H.Item,{icon:e.jsx(Ee,{}),onClick:()=>je(y),children:e.jsx("a",{children:"Edit"})},"module-edit-"+y.id),e.jsx(H.Item,{icon:e.jsx(_e,{}),onClick:()=>X(y),children:e.jsx("a",{children:"Lecture(s)"})},"module-lectures-"+y.id),e.jsx(H.Item,{icon:e.jsx(_e,{}),onClick:()=>me(y),children:e.jsx("a",{children:"Student(s)"})},"module-students-"+y.id)]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:ye=>ye.preventDefault(),children:e.jsx(Le,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:I?24:12,children:e.jsx(a,{layout:"vertical",form:Y,onFinish:P=>{C(P.key),l.length=0,ue(1,P.key,d)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),((Ne=t.studyCourse)==null?void 0:Ne.canManage)&&e.jsxs(B,{span:I?24:12,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(w,{title:"Click to View "+t.studyCourse.course.name+" Students",children:e.jsx(E,{icon:e.jsx(Ye,{}),size:"large",onClick:()=>G(!0),children:"View Students"})}),e.jsx(w,{title:"Register Students by Uploading Excel File",children:e.jsx(E,{icon:e.jsx(de,{}),size:"large",onClick:()=>V(!0),children:"Add Student"})}),e.jsx(w,{title:"Register Students by Uploading Excel File",children:e.jsx(E,{icon:e.jsx(Yt,{}),size:"large",onClick:()=>j(!0),children:"Upload Students"})}),e.jsx(w,{title:"Add New Study Course Module",children:e.jsx(E,{icon:e.jsx(de,{}),size:"large",onClick:()=>S(!0),children:"Add Module"})})]})]}),e.jsx(he,{loading:k,columns:qe,dataSource:l,pagination:{onChange:(P,y)=>{o(y),ue(P,h,y)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Adding Study Course Module",open:g,onClose:P=>S(P),width:"30vw",children:e.jsx(ia,{form:F,onFinish:ve,randKey:Math.random(),studyCourse:t.studyCourse})}),e.jsx(re,{title:"Edit "+(n==null?void 0:n.name)+" Informations",open:D,onClose:P=>p(P),width:"40vw",children:e.jsx(da,{studyCourse:t.studyCourse,module:n,onFinish:_,form:b,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.name)+" Lecture(s)",open:T,width:"80vw",onClose:P=>v(P),children:e.jsx(Rt,{memberType:"Teacher",module:n})}),e.jsx(re,{title:(n==null?void 0:n.name)+" Student(s)",open:f,onClose:P=>M(P),width:"80vw",children:e.jsx(Rt,{memberType:"Student",module:n,height:75})}),e.jsx(re,{title:"Uploading "+((Pe=t.studyCourse)==null?void 0:Pe.course.name)+" Student(s) by Excel",open:r,onClose:P=>j(P),width:"40vw",children:e.jsx(ma,{form:L,studyCourse:t.studyCourse,randKey:Math.random()})}),e.jsx(re,{title:"Registering "+((Ae=t.studyCourse)==null?void 0:Ae.course.name)+" Student(s)",open:U,onClose:P=>V(P),width:"40vw",children:e.jsx(ua,{studyCourse:t.studyCourse})}),e.jsx(Se,{title:((ze=t.studyCourse)==null?void 0:ze.course.name)+" Students",anchor:"left",open:R,noOverFlow:!0,onClose:P=>G(P),width:"80vw",children:e.jsx(ga,{studyCourse:t.studyCourse,randKey:Math.random()})})]})},ya=()=>{const[t,n]=s.useState(!1),[c,l]=s.useState(),i=Be(),m=async u=>{n(!0);const{data:d}=await Q.custom({url:"",method:"get",meta:{operation:"studyCourse",variables:{id:{value:u,type:"Int",required:!0}},fields:["id","year","level","semester","levelDisplay","semesterDisplay","isActive","canDelete","canEdit","canManage",{course:["id","name"]}]}});l(d),n(!1)};return s.useEffect(()=>{document.title=xe.system_name+": Modules",i.studyCourseId!==void 0&&m(parseInt(i.studyCourseId))},[i.studyCourseId]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),c&&e.jsx(Z.Item,{children:e.jsx(fe,{to:"/schoolmanager/study/courses",children:"Study Courses"})}),e.jsx(Z.Item,{children:c?e.jsx(e.Fragment,{children:e.jsx(fe,{to:"/schoolmanager/modules",children:"Modules"})}):e.jsx(e.Fragment,{children:"Modules"})}),c&&e.jsx(e.Fragment,{children:e.jsxs(Z.Item,{children:[c.course.name,", ",c.levelDisplay," ,",c.semesterDisplay,", ",c.year]})})]}),e.jsx(ja,{height:77,control:!1,studyCourse:c})]})},pa=()=>(s.useEffect(()=>{document.title=xe.system_name+": Programmes"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Programmes (High Education Level)"})]}),e.jsx(yr,{height:80,control:!1})]})),fa=t=>{const[n,c]=s.useState([]),l=async(i,m="")=>{const{data:u}=await Q.custom({url:"",method:"get",meta:{operation:"systemRolePermissions",variables:{page:{value:i,type:"Int",required:!0},key:{value:m,type:"String",required:!1},roleId:{value:t.role.id,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","created","updated","isActive","canEdit","canDelete","canManage",{permission:["id","name","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}]}});c([...u.results])};return s.useEffect(()=>{l(1)},[t.randKey,t.role]),e.jsx(e.Fragment,{children:e.jsx(oe,{dataSource:n,renderItem:i=>e.jsx(oe.Item,{children:i.permission.name})})})},Sa=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(0),[h,C]=s.useState(!0),[k,z]=s.useState(20),[Y,F]=s.useState(""),[b]=a.useForm();pe.useBreakpoint().lg;const[A,I]=s.useState(!1),q=v=>{c(v),I(!0)},g=v=>{c(v),u(!0)},S=[{title:"Name",dataIndex:"name",fixed:!0,render:(v,f,M)=>e.jsx("span",{children:e.jsx("a",{onClick:()=>g(f),children:f.role.name})})},{title:"Date Created",dataIndex:"created",render:(v,f,M)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(f.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(v,f,M)=>e.jsx("a",{children:f!=null&&f.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,f,M)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsxs(H,{children:[e.jsx(H.Item,{icon:e.jsx(Ye,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>q(f),children:"Manage Permissions"})}),e.jsx(H.Item,{icon:e.jsx(Ye,{}),children:e.jsx("a",{rel:"noopener noreferrer",onClick:()=>g(f),children:"View Permissions"})}),e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(se,{placement:"topLeft",title:`Are you sure you want to delete ${f.role.name} Role?`,onConfirm:()=>D(parseInt(f.id)),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Remove"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:r=>r.preventDefault(),children:e.jsx(Le,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],D=async v=>{sr(v).then(f=>{f&&(f.success?(x.success(f.message),i(l.filter(M=>M.id.toString()!==v.toString()))):x.error(f.message))})},p=async(v,f="",M=20)=>{C(!0),Xt(v,f,M).then(r=>{r&&(o(r.total),i([...r.results]))}),C(!1)},T=async()=>{nr().then(v=>{v&&(v.success?(x.success(v.message),p(1)):x.error(v.message))})};return s.useEffect(()=>{p(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:12,children:e.jsx(a,{layout:"vertical",form:b,onFinish:v=>{F(v.key),l.length=0,p(1,v.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:12,children:e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(w,{title:"Sync Default School Roles",children:e.jsx(E,{icon:e.jsx(dt,{}),size:"large",onClick:T,children:"Sync Default Roles"})})})})]}),e.jsx(he,{loading:h,columns:S,dataSource:l,pagination:{onChange:(v,f)=>{z(f),p(v,Y,f)},total:d,pageSize:k,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Manage Role Permissions For "+(n==null?void 0:n.role.name),width:"50vw",open:A,onClose:v=>I(v),children:e.jsx(pr,{role:n==null?void 0:n.role,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.role.name)+" Permissions",width:"50vw",open:m,onClose:v=>u(v),children:e.jsx(fa,{role:n==null?void 0:n.role,randKey:Math.random()})})]})},va=()=>(s.useEffect(()=>{document.title=xe.system_name+": Roles"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Roles"})]}),e.jsx(Sa,{})]})),Ca=()=>(s.useEffect(()=>{document.title=xe.system_name+": Settings"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Settings"})]}),e.jsx(fr,{})]})),{Option:$e}=$;function*ba(t,n){let c=t;for(;c<n;)yield c++}const Ia=t=>{const[n,c]=s.useState(!0),[l,i]=s.useState([]),m=async(u,d="")=>{c(!0);const{data:o}=await Q.custom({url:"",method:"get",meta:{operation:"schoolCourses",variables:{page:{value:u,type:"Int",required:!0},key:{value:d,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:yt}]}}).catch(()=>(x.error("Error occured while fetching courses"),{data:null})).then(h=>h);o&&i([...o.results]),c(!1)};return s.useEffect(()=>{m(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:u=>{t.onFinish(u)},requiredMark:!0,children:[e.jsx(a.Item,{name:"course_id",label:"Course",rules:[{required:!0,type:"string",message:"Please choose Course..."}],children:e.jsx($,{showSearch:!0,size:"large",placeholder:"Select a Course",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,d)=>d.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:l.map((u,d)=>e.jsx($e,{value:u.id,children:u.name}))})}),e.jsx(a.Item,{name:"year",label:"Year",rules:[{required:!0,type:"number",message:"Please choose Year..."}],children:e.jsx($,{showSearch:!0,size:"large",placeholder:"Select a Year",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,d)=>d.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:Array.from(ba(new Date().getFullYear(),new Date().getFullYear()+10)).map((u,d)=>e.jsx($e,{value:u,children:u}))})}),e.jsx(a.Item,{name:"level",label:"Level",rules:[{required:!0,type:"number",message:"Please choose Level..."}],children:e.jsx($,{showSearch:!0,size:"large",placeholder:"Select a Level",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,d)=>d.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First Year"},{value:2,name:"Second Year"},{value:3,name:"Third year"},{value:4,name:"Fourth year"},{value:5,name:"Fifth year"}].map((u,d)=>e.jsx($e,{value:u.value,children:u.name}))})}),e.jsx(a.Item,{name:"semester",label:"Semester",rules:[{required:!0,type:"number",message:"Please choose Semester..."}],children:e.jsx($,{showSearch:!0,size:"large",placeholder:"Select a Semester",optionFilterProp:"children",onChange:u=>{},onSearch:u=>{},filterOption:(u,d)=>d.children.toLowerCase().includes(u.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First"},{value:2,name:"Second"},{value:3,name:"Third"}].map((u,d)=>e.jsx($e,{value:u.value,children:u.name}))})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Option:He}=$;function*Fa(t,n){let c=t;for(;c<n;)yield c++}const ka=t=>{const[n,c]=s.useState(t.studyCourse.isActive),[l,i]=s.useState(!0),[m,u]=s.useState([]),d=[{value:1,name:"First Year"},{value:2,name:"Second Year"},{value:3,name:"Third year"},{value:4,name:"Fourth year"},{value:5,name:"Fifth year"}],o=async(h,C="")=>{i(!0);const{data:k}=await Q.custom({url:"",method:"get",meta:{operation:"schoolCourses",variables:{page:{value:h,type:"Int",required:!0},key:{value:C,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:yt}]}}).catch(()=>(x.error("Error occured while fetching courses"),{data:null})).then(z=>z);k&&u([...k.results]),i(!1)};return s.useEffect(()=>{o(1),t.form.setFieldsValue({course_id:t.studyCourse.course.id,year:t.studyCourse.year,level:parseInt(t.studyCourse.level),semester:t.studyCourse.semester,is_active:t.studyCourse.isActive})},[t.form,t.studyCourse,t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:l,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:h=>{h.id=parseInt(t.studyCourse.id),h.is_active=n,t.onFinish(h)},requiredMark:!0,children:[e.jsx(a.Item,{name:"course_id",label:"Course",rules:[{required:!0,type:"string",message:"Please choose Course..."}],children:e.jsx($,{showSearch:!0,size:"large",placeholder:"Select a Course",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,C)=>C.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:m.map((h,C)=>e.jsx(He,{value:h.id,children:h.name}))})}),e.jsx(a.Item,{name:"year",label:"Year",rules:[{required:!0,type:"number",message:"Please choose Year..."}],children:e.jsx($,{showSearch:!0,size:"large",placeholder:"Select a Year",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,C)=>C.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:Array.from(Fa(new Date().getFullYear(),new Date().getFullYear()+10)).map((h,C)=>e.jsx(He,{value:h,children:h}))})}),e.jsx(a.Item,{name:"level",label:"Level",rules:[{required:!0,type:"number",message:"Please choose Level..."}],children:e.jsx($,{showSearch:!0,size:"large",placeholder:"Select a Level",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,C)=>C.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:d.map((h,C)=>e.jsx(He,{value:h.value,children:h.name}))})}),e.jsx(a.Item,{name:"semester",label:"Semester",rules:[{required:!0,type:"number",message:"Please choose Semester..."}],children:e.jsx($,{showSearch:!0,size:"large",placeholder:"Select a Semester",optionFilterProp:"children",onChange:h=>{},onSearch:h=>{},filterOption:(h,C)=>C.children.toLowerCase().includes(h.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First"},{value:2,name:"Second"},{value:3,name:"Third"}].map((h,C)=>e.jsx(He,{value:h.value,children:h.name}))})}),e.jsx(a.Item,{name:"is_active",children:e.jsx(Me,{checked:n,onChange:()=>c(!n),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{Option:ot}=$;function*Ma(t,n){let c=t;for(;c<n;)yield c++}const La=t=>{const[n,c]=s.useState(!0),[l,i]=s.useState([]),m=async d=>{const{data:o}=await Q.custom({url:"",method:"post",meta:{operation:"createSchoolStudyCourseBulk",variables:{year:{value:parseInt(d.year),type:"Int",required:!0},level:{value:d.level,type:"Int",required:!0},semester:{value:d.semester,type:"Int",required:!0}},fields:["success","message",{studyCourses:Qe}]}}).catch(()=>(x.error("Error occured while creating study course"),{data:null})).then(h=>h);o&&(o.success?(x.success(o.message),t.form.resetFields(),t.onFinish(o.studyCourses)):x.error(o.message))},u=async(d,o="")=>{c(!0);const{data:h}=await Q.custom({url:"",method:"get",meta:{operation:"schoolCourses",variables:{page:{value:d,type:"Int",required:!0},key:{value:o,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:yt}]}}).catch(()=>(x.error("Error occured while fetching courses"),{data:null})).then(C=>C);h&&i([...h.results]),c(!1)};return s.useEffect(()=>{u(1)},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:t.form,onFinish:d=>{m(d)},requiredMark:!0,children:[e.jsxs(Ze,{sx:{marginBottom:2},children:[e.jsxs(Fr,{severity:"info",sx:{marginBottom:2},children:[e.jsx(Nr,{children:"Info"}),e.jsx("strong",{children:"Important Note:"})," All listed courses will be added to the study course as per the selected year, level and semester."]}),e.jsx(Ze,{sx:{maxHeight:"200px",overflowY:"scroll"},children:e.jsx(oe,{bordered:!0,children:l.map((d,o)=>e.jsx(oe.Item,{children:d.name},o))})})]}),e.jsx(a.Item,{name:"year",label:"Year",rules:[{required:!0,type:"number",message:"Please choose Year..."}],children:e.jsx($,{showSearch:!0,size:"large",placeholder:"Select a Year",optionFilterProp:"children",onChange:d=>{},onSearch:d=>{},filterOption:(d,o)=>o.children.toLowerCase().includes(d.toLowerCase()),dropdownStyle:{zIndex:9999},children:Array.from(Ma(new Date().getFullYear(),new Date().getFullYear()+10)).map((d,o)=>e.jsx(ot,{value:d,children:d}))})}),e.jsx(a.Item,{name:"level",label:"Level",rules:[{required:!0,type:"number",message:"Please choose Level..."}],children:e.jsx($,{showSearch:!0,size:"large",placeholder:"Select a Level",optionFilterProp:"children",onChange:d=>{},onSearch:d=>{},filterOption:(d,o)=>o.children.toLowerCase().includes(d.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First Year"},{value:2,name:"Second Year"},{value:3,name:"Third year"},{value:4,name:"Fourth year"},{value:5,name:"Fifth year"}].map((d,o)=>e.jsx(ot,{value:d.value,children:d.name}))})}),e.jsx(a.Item,{name:"semester",label:"Semester",rules:[{required:!0,type:"number",message:"Please choose Semester..."}],children:e.jsx($,{showSearch:!0,size:"large",placeholder:"Select a Semester",optionFilterProp:"children",onChange:d=>{},onSearch:d=>{},filterOption:(d,o)=>o.children.toLowerCase().includes(d.toLowerCase()),dropdownStyle:{zIndex:9999},children:[{value:1,name:"First"},{value:2,name:"Second"},{value:3,name:"Third"}].map((d,o)=>e.jsx(ot,{value:d.value,children:d.name}))})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:Aa}=K,Ea=t=>{const[n,c]=s.useState(!1),[l]=a.useForm(),i=async m=>{var d;c(!0);const{data:u}=await Q.custom({url:"",method:"post",meta:{operation:"createStudyCourseGroup",variables:{studyCourseId:{value:parseInt(((d=t==null?void 0:t.studyCourse)==null?void 0:d.id.toString())??"0"),type:"Int",required:!0},name:{value:m.name,type:"String",required:!0},description:{value:m.description,type:"String",required:!1}},fields:["success","message",{studyCourseGroup:pt}]}}).catch(()=>(x.error("Error occured while fetching departments"),{data:null})).then(o=>o);u&&(u.success?(x.success(u.message),t.onFinish(u.studyCourseGroup),l.resetFields()):x.error(u.message)),c(!1)};return s.useEffect(()=>{},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:l,onFinish:m=>{i(m)},requiredMark:!0,children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Aa,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},{TextArea:Na}=K,Pa=t=>{var m,u;const[n,c]=s.useState(!1),[l]=a.useForm(),i=async d=>{var h;c(!0);const{data:o}=await Q.custom({url:"",method:"post",meta:{operation:"updateStudyCourseGroup",variables:{id:{value:parseInt(((h=t==null?void 0:t.studyCourseGroup)==null?void 0:h.id.toString())??"0"),type:"Int",required:!0},name:{value:d.name,type:"String",required:!0},description:{value:d.description,type:"String",required:!1}},fields:["success","message",{studyCourseGroup:pt}]}}).catch(()=>(x.error("Error occured while updating study course group"),{data:null})).then(C=>C);o&&(o.success?(x.success(o.message),t.onFinish(o.studyCourseGroup),l.resetFields()):x.error(o.message)),c(!1)};return s.useEffect(()=>{t.studyCourseGroup&&l.setFieldsValue({name:t.studyCourseGroup.name,description:t.studyCourseGroup.description})},[t.randKey]),e.jsx(e.Fragment,{children:e.jsx(ie,{spinning:n,children:e.jsxs(a,{layout:"vertical",form:l,onFinish:d=>{i(d)},requiredMark:!0,initialValues:{name:(m=t.studyCourseGroup)==null?void 0:m.name,description:(u=t.studyCourseGroup)==null?void 0:u.description},children:[e.jsx(a.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(K,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description"}],children:e.jsx(Na,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})})},za=t=>{var Y;const[n,c]=s.useState(!0),[l,i]=s.useState([]),[m,u]=s.useState(!1),[d,o]=s.useState(null),[h,C]=s.useState(!1),k=async(F,b="")=>{c(!0);const{data:L}=await Q.custom({url:"",method:"get",meta:{operation:"studyCourseGroups",variables:{page:{value:F,type:"Int",required:!0},key:{value:b,type:"String",required:!1},studyCourseId:{value:parseInt(t.studyCourse.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:pt}]}}).catch(A=>(console.error(A),x.error("Error occured while fetching study course groups"),{data:null})).then(A=>A);L&&i([...L.results]),c(!1)},z=async F=>{const{data:b}=await Q.custom({url:"",method:"post",meta:{operation:"deleteStudyCourseGroup",variables:{id:{value:parseInt(F.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error occured while deleting study course group"),{data:null})).then(L=>L);b&&b.success&&(x.success(b.message),i(l.filter(L=>L.id!==F)))};return s.useEffect(()=>{k(1)},[t.form,t.studyCourse,t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:e.jsx(E,{icon:e.jsx(de,{}),onClick:()=>u(!0),children:"Add Group/Stream"})}),e.jsx("div",{children:e.jsx(oe,{bordered:!0,dataSource:l,renderItem:F=>e.jsx(oe.Item,{actions:[e.jsx(E,{icon:e.jsx(Ee,{}),disabled:!F.canEdit,onClick:()=>{o(F),C(!0)},children:"Edit"}),e.jsx(se,{title:"Are you sure you want to delete this group/stream?",overlayStyle:{zIndex:999999},onConfirm:()=>z(F.id),okText:"Yes",cancelText:"No",children:e.jsx(E,{icon:e.jsx(ce,{}),disabled:!F.canDelete,children:"Delete"})})],children:e.jsx(oe.Item.Meta,{title:F.name,description:F.description})})})}),e.jsx(re,{title:"Add Group/Stream to "+((Y=t.studyCourse)==null?void 0:Y.name),open:m,width:"30vw",onClose:F=>u(F),children:e.jsx(Ea,{studyCourse:t.studyCourse,onFinish:F=>{i([F,...l])}})}),e.jsx(re,{title:"Updating Group/Stream to "+(d==null?void 0:d.name),open:h,width:"30vw",onClose:F=>C(F),children:e.jsx(Pa,{studyCourseGroup:d,onFinish:F=>{i(l.map(b=>b.id===F.id?F:b)),C(!1)}})})]})},Ta=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(0),[d,o]=s.useState(!0),[h,C]=s.useState(20),[k,z]=s.useState(""),[Y]=a.useForm(),[F]=a.useForm(),[b]=a.useForm(),[L,A]=s.useState(!1);pe.useBreakpoint().lg;const[q,g]=s.useState(!1),[S,D]=s.useState(!1),[p,T]=s.useState(!1),v=R=>{c(R),A(!0)},f=R=>{c(R),T(!0)},M=async R=>{const{data:G}=await Q.custom({url:"",method:"post",meta:{operation:"createSchoolStudyCourse",variables:{courseId:{value:parseInt(R.course_id),type:"Int",required:!0},year:{value:parseInt(R.year),type:"Int",required:!0},level:{value:R.level,type:"Int",required:!0},semester:{value:R.semester,type:"Int",required:!0}},fields:["success","message",{studyCourse:Qe}]}}).catch(()=>(x.error("Error occured while creating study course"),{data:null})).then(X=>X);G&&(G.success?(x.success(G.message),F.resetFields(),g(!1),i([G.studyCourse,...l])):x.error(G.message))},r=async R=>{const{data:G}=await Q.custom({url:"",method:"post",meta:{operation:"updateSchoolStudyCourse",variables:{id:{value:R.id,type:"Int",required:!0},courseId:{value:parseInt(R.course_id),type:"Int",required:!0},year:{value:parseInt(R.year),type:"Int",required:!0},level:{value:R.level,type:"Int",required:!0},semester:{value:R.semester,type:"Int",required:!0},isActive:{value:R.is_active,type:"Boolean",required:!0}},fields:["success","message",{studyCourse:Qe}]}}).catch(()=>(x.error("Error occured while updating study course"),{data:null})).then(X=>X);G&&(G.success?(x.success(G.message),b.resetFields(),T(!1),i(l.map(X=>parseInt(X.id.toString())===parseInt(R.id.toString())?G.studyCourse:X))):x.error(G.message))},j=async R=>{const{data:G}=await Q.custom({url:"",method:"post",meta:{operation:"deleteSchoolStudyCourse",variables:{id:{value:parseInt(R.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error occured while deleting study course"),{data:null})).then(X=>X);G&&(G.success?(x.success(G.message),i(l.filter(X=>X.id!==R))):x.error(G.message))},U=async(R,G="",X=20)=>{const{data:me}=await Q.custom({url:"",method:"get",meta:{operation:"schoolStudyCourses",variables:{page:{value:R,type:"Int",required:!0},key:{value:G,type:"String",required:!1},pageSize:{value:X,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Qe}]}}).catch(()=>(x.error("Error occured while fetching study courses"),{data:null})).then(je=>je);me&&(u(me.total),i([...me.results])),o(!1)};s.useEffect(()=>{U(1,"",20)},[]);const V=[{title:"Course",dataIndex:"course",fixed:!0,render:(R,G,X)=>e.jsx("span",{children:e.jsx("a",{children:G.course.name})})},{title:"Year",dataIndex:"year",fixed:!0,render:(R,G,X)=>e.jsx("span",{children:G.year})},{title:"Groups/Streams",dataIndex:"totalGroups",fixed:!0,render:(R,G,X)=>e.jsx("span",{children:G.totalGroups>0?G.totalGroups:"One Main Group/Stream"})},{title:"Max Students",dataIndex:"maxStudents",fixed:!0,render:(R,G,X)=>e.jsx("span",{children:G.maxStudents})},{title:"Available Students",dataIndex:"availableStudents",fixed:!0,render:(R,G,X)=>e.jsx("span",{children:G.availableStudents})},{title:"Level",dataIndex:"level",fixed:!0,render:(R,G,X)=>e.jsx("span",{children:G.levelDisplay})},{title:"Semester",dataIndex:"semester",fixed:!0,render:(R,G,X)=>e.jsx("span",{children:G.semesterDisplay})},{title:"Created",dataIndex:"created",render:(R,G,X)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(G.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(R,G,X)=>e.jsx("a",{children:G!=null&&G.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(R,G,X)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(w,{title:"Deleting Study Course",color:"red",placement:"left",children:e.jsx(se,{title:"Are you sure to delete this Study Course?",onConfirm:()=>j(G==null?void 0:G.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(G!=null&&G.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(E,{icon:e.jsx(ce,{}),disabled:!(G!=null&&G.canDelete)})})}),e.jsx(w,{title:"Edit "+(G==null?void 0:G.name)+" Faculty",placement:"left",color:"green",children:e.jsx(E,{icon:e.jsx(Ee,{}),disabled:!(G!=null&&G.canEdit),onClick:()=>f(G)})}),e.jsx(w,{title:"View Study Course Groups/Streams",placement:"right",color:"green",children:e.jsx(E,{icon:e.jsx(rr,{}),disabled:!(G!=null&&G.canManage),onClick:()=>v(G)})}),e.jsx(w,{title:"View Study Course Modules",placement:"right",color:"green",children:e.jsx(fe,{to:"/schoolmanager/modules/"+G.id,children:e.jsx(E,{icon:e.jsx(Ye,{}),disabled:!(G!=null&&G.canManage)})})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:10,children:e.jsx(a,{layout:"vertical",form:Y,onFinish:R=>{z(R.key),l.length=0,U(1,R.key,h)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(B,{span:14,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(w,{title:"Bulk Add New Study Course",children:e.jsx(E,{icon:e.jsx(de,{}),size:"large",onClick:()=>D(!0),children:"Bulk Add Study Course"})}),e.jsx(w,{title:"Add New Study Course",children:e.jsx(E,{icon:e.jsx(de,{}),size:"large",onClick:()=>g(!0),children:"Add Study Course"})})]})]}),e.jsx(he,{loading:d,columns:V,dataSource:l,pagination:{onChange:(R,G)=>{C(G),U(R,k,G)},total:m,pageSize:h,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(re,{title:"Bulk Adding Study Course",open:S,onClose:R=>D(R),width:"30vw",children:e.jsx(La,{form:F,onFinish:R=>{i([...R,...l]),D(!1)},randKey:Math.random()})}),e.jsx(re,{title:"Adding Study Course",open:q,onClose:R=>g(R),width:"30vw",children:e.jsx(Ia,{form:F,onFinish:M,randKey:Math.random()})}),e.jsx(re,{title:"Edit "+(n==null?void 0:n.course.name)+" Informations",open:p,onClose:R=>T(R),width:"40vw",children:e.jsx(ka,{studyCourse:n,onFinish:r,form:b,randKey:Math.random()})}),e.jsx(re,{title:(n==null?void 0:n.course.name)+" Groups/Streams",open:L,onClose:R=>A(R),width:"40vw",children:e.jsx(za,{studyCourse:n})})]})},Da=()=>(s.useEffect(()=>{document.title=xe.system_name+": Study Courses"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Study Courses"})]}),e.jsx(Ta,{height:77})]})),qa=t=>{const[n,c]=s.useState(),[l,i]=s.useState([]),[m,u]=s.useState(!0),[d,o]=s.useState(1),[h]=a.useForm(),[C,k]=s.useState(0),z=async F=>{lr(F).then(b=>{b.success?(x.success(b.message),i(l.filter(L=>L.id.toString()!==F.toString())),t.onAdd(b.schoolSubject),c(void 0)):x.error(b.message)})},Y=async(F=d,b="",L=25)=>{u(!0),ar(F,b,L).then(A=>{A&&(k(A.pages),o(A.page),i([...A.results]))}),u(!1)};return s.useEffect(()=>{Y(1)},[t.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx(B,{span:24,children:e.jsx(a,{layout:"vertical",form:h,onFinish:F=>{l.length=0,i([]),Y(1,F.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search Subject(s)...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(ie,{spinning:m,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(oe,{itemLayout:"horizontal",dataSource:l,renderItem:F=>e.jsx(oe.Item,{actions:[e.jsx(se,{placement:"topLeft",title:"Are you sure to add this subject?",onConfirm:()=>z(F.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(E,{icon:e.jsx(Ge,{})})})],children:e.jsx(oe.Item.Meta,{title:e.jsx(e.Fragment,{children:e.jsxs("a",{children:[F.name,e.jsx(le,{color:"green",style:{marginLeft:10},children:F.schoolType.name})]})}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:F.description})})})},"file-"+F.id)})}),e.jsx(Ze,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:1},children:e.jsx(ts,{count:C,color:"secondary",onChange:(F,b)=>{Y(b)}})})]})]})},Ra=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(!1),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,z]=s.useState(!0),[Y]=a.useForm(),b=!pe.useBreakpoint().lg,L=async g=>{c([g,...n])},A=async g=>{const{data:S}=await Q.custom({url:"",method:"post",meta:{operation:"deleteSchoolSubject",variables:{id:{value:parseInt(g.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(x.error("Error deleting subject"),{data:null})).then(D=>D);S&&(S.success?(x.success(S.message),c(n.filter(D=>D.id!==g))):x.error(S.message))},I=[{title:"Name",dataIndex:"name",fixed:!0,render:(g,S,D)=>e.jsx("span",{children:e.jsx("a",{children:S.subject.name})})},{title:"School Type",dataIndex:"schoolType",fixed:!0,render:(g,S,D)=>e.jsx("span",{children:e.jsx(le,{color:"green",children:S.subject.schoolType.name})})},{title:"Date Created",dataIndex:"created",render:(g,S,D)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(S.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(g,S,D)=>e.jsx("a",{children:S!=null&&S.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(g,S,D)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ke,{trigger:["click"],overlay:e.jsx(H,{children:e.jsx(H.Item,{icon:e.jsx(ce,{}),children:e.jsx(w,{title:"Delete/Remove Subject",placement:"left",color:S!=null&&S.canDelete?"green":"red",children:e.jsx(se,{title:"Are you sure to delete this ",onConfirm:()=>A(S==null?void 0:S.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(S!=null&&S.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(E,{type:"text",disabled:!(S!=null&&S.canDelete),children:"Delete"})})})})}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:p=>p.preventDefault(),children:e.jsx(Le,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],q=async(g,S="",D=20)=>{const{data:p}=await Q.custom({url:"",method:"get",meta:{operation:"schoolSubjects",variables:{page:{value:g,type:"Int",required:!0},key:{value:S,type:"String",required:!1},pageSize:{value:D,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:ir}]}}).catch(()=>(x.error("Error getting subjects"),{data:null})).then(T=>T);p&&(u(p.total),c([...p.results])),z(!1)};return s.useEffect(()=>{q(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:b?24:20,children:e.jsx(a,{layout:"vertical",form:Y,onFinish:g=>{C(g.key),n.length=0,q(1,g.key,d)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:b?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{size:"large",icon:e.jsx(de,{}),onClick:()=>i(!0),children:"Add Subject"})})]}),e.jsx(he,{loading:k,columns:I,dataSource:n,pagination:{onChange:(g,S)=>{o(S),q(g,h,S)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}}),e.jsx(Se,{title:"Adding School Subjects",anchor:"right",width:"35vw",onClose:()=>i(!1),open:l,noOverFlow:!0,children:e.jsx(qa,{randKey:Math.random(),onAdd:L})})]})},Ya=()=>(s.useEffect(()=>{document.title=xe.system_name+": Subjects"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Subjects"})]}),e.jsx(Ra,{})]})),Ga=t=>{const[n,c]=s.useState([]),[l,i]=s.useState(1),[m,u]=s.useState(0),[d,o]=s.useState(20),[h,C]=s.useState(""),[k,z]=s.useState(!1),[Y,F]=s.useState(!0),[b]=a.useForm(),[L]=a.useForm(),[A,I]=s.useState(!1),q=async v=>{dr(v).then(f=>{f&&(f.success?(x.success(f.message),c([f.loginReedemCode,...n]),L.resetFields()):x.error(f.message))})},g=async v=>{hr(v).then(f=>{f&&(f.success?x.success(f.message):x.error(f.message))})},S=async v=>{mr(v).then(f=>{f&&(f.success?(x.success(f.message),c(n.filter(M=>M.id!==v))):x.error(f.message))})},D=()=>{x("Canceled")},p=[{title:"Reedem Code",dataIndex:"code",fixed:!0,render:(v,f,M)=>e.jsx("span",{children:e.jsx("a",{children:f.code})})},{title:"User",dataIndex:"user",render:(v,f,M)=>{var r,j,U;return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:(f==null?void 0:f.user)&&e.jsxs("span",{children:["Full Name: ",(r=f==null?void 0:f.user)==null?void 0:r.firstName," ",(j=f==null?void 0:f.user)==null?void 0:j.middleName," ",(U=f==null?void 0:f.user)==null?void 0:U.lastName]})}),e.jsx("span",{children:(f==null?void 0:f.email)&&e.jsxs(le,{children:["Email: ",f==null?void 0:f.email]})}),e.jsx("span",{children:(f==null?void 0:f.registrationNumber)&&e.jsxs(le,{children:["Reg#: ",f==null?void 0:f.registrationNumber]})})]})}},{title:"Phone Number",dataIndex:"phone",fixed:!0,render:(v,f,M)=>e.jsx("span",{children:e.jsx("a",{children:f.phone})})},{title:"Is Used",dataIndex:"isUsed",render:(v,f,M)=>e.jsx("a",{children:f!=null&&f.isUsed?e.jsx("span",{style:{color:"green"},children:"Used"}):e.jsx("span",{style:{color:"red"},children:"Not Used"})})},{title:"Status",dataIndex:"isActive",render:(v,f,M)=>e.jsx("a",{children:f!=null&&f.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,f,M)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(se,{title:"Resend this Reedem Code?",onConfirm:()=>g(f==null?void 0:f.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(f!=null&&f.canManage),overlayStyle:{zIndex:9999},children:e.jsx(E,{size:"large",icon:e.jsx(cr,{}),disabled:!(f!=null&&f.canDelete)})}),e.jsx(se,{title:"Are you sure to delete this Reedem Code?",onConfirm:()=>S(f==null?void 0:f.id),onCancel:()=>D,okText:"Yes",cancelText:"No",disabled:!(f!=null&&f.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(E,{size:"large",icon:e.jsx(ce,{}),disabled:!(f!=null&&f.canDelete)})})]})}],T=async(v,f="",M=20)=>{ur(v,f,M).then(r=>{i(r.page),u(r.total),z(r.hasNext),c(r.results)}),F(!1)};return s.useEffect(()=>{T(l)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ne,{style:{marginTop:10},children:[e.jsx(B,{span:10,children:e.jsx(a,{layout:"vertical",form:b,onFinish:v=>{i(1),n.length=0,T(1,v.key)},children:e.jsx(a.Item,{name:"key",children:e.jsx(K,{size:"large",placeholder:"Search ...",prefix:e.jsx(ae,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(B,{span:14,style:{display:"flex",justifyContent:"end"},children:e.jsx(E,{icon:e.jsx(Ge,{}),size:"large",onClick:()=>I(!0),children:"Reedem"})})]}),e.jsx(he,{loading:Y,columns:p,dataSource:n,scroll:{x:!0},pagination:{onChange:(v,f)=>{o(f),T(v,h,f)},total:m,pageSize:d,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(re,{title:"Creating Reedem Code",open:A,onClose:v=>I(v),children:e.jsxs(e.Fragment,{children:[e.jsxs(a,{layout:"vertical",form:L,onFinish:v=>{q(v)},children:[e.jsx(a.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,type:"string",message:"Please input Phone Number"}],children:e.jsx(K,{size:"large",placeholder:"Phone Number ...",prefix:e.jsx(Jt,{}),autoComplete:"off"})}),e.jsx(a.Item,{name:"email",label:"Email Address",children:e.jsx(K,{size:"large",placeholder:"Email Address ...",prefix:e.jsx(Qt,{}),autoComplete:"off",allowClear:!0})}),e.jsx(a.Item,{name:"registrationNumber",label:"Registration Number",children:e.jsx(K,{size:"large",placeholder:"Registration Number ...",prefix:e.jsx(or,{}),autoComplete:"off",allowClear:!0})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"end"},children:e.jsx(E,{size:"large",onClick:()=>L.submit(),children:"Reedem"})})]})})]})},Oa=()=>(s.useEffect(()=>{document.title=xe.system_name+": Login Reedems"},[]),e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(Z,{children:[e.jsx(Z.Item,{children:e.jsx(fe,{to:"/schoolmanager",children:"Home"})}),e.jsx(Z.Item,{children:"Login Reedems"})]}),e.jsx(Ga,{height:80})]})),qi=t=>{const{page:n}=t;return n==="SchoolLoginReedemPage"?e.jsx(Oa,{}):n==="SchoolSubjectsPage"?e.jsx(Ya,{}):n==="SchoolStudyCoursesPage"?e.jsx(Da,{}):n==="SchoolSettingsPage"?e.jsx(Ca,{}):n==="SchoolRolesPage"?e.jsx(va,{}):n==="SchoolProgrammesPage"?e.jsx(pa,{}):n==="SchoolModulesPage"?e.jsx(ya,{}):n==="SchoolMembersPage"?e.jsx(la,{}):n==="SchoolFeeEducationLevelsPage"?e.jsx(Rl,{}):n==="SchoolFeesPage"?e.jsx(Pl,{}):n==="SchoolFacultiesPage"?e.jsx(kl,{}):n==="SchoolExaminationsPage"?e.jsx(Sl,{}):n==="SchoolDepartmentsPage"?e.jsx(fl,{}):n==="SchoolCoursesPage"?e.jsx(ul,{}):n==="SchoolEducationLevelsPage"?e.jsx(ll,{}):n==="SchoolManagerPage"?e.jsx(qr,{}):e.jsx("div",{children:"Page not found ..."})};export{qi as SchoolManagerPages};
