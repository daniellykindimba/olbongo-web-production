import{r as t,bP as ke,aM as e,aC as i,M as D,aG as ee,ay as W,ae as N,bJ as k,bK as o,bL as ne,cF as re,cY as ve,aI as le,bI as te,bU as Se,bV as de,bH as Ae,R as Et,ac as Fe,bT as ue,aw as K,c8 as me,aJ as ae,cZ as Bt,ax as xe,cJ as we,c_ as Yt,$ as ye,co as je,aH as Be,aA as st,aD as be,cy as at,bM as Gt,cI as Qt,b$ as Jt,S as fe,c$ as Ot,cR as _t,d0 as Oe,cw as $t,d1 as Zt,d2 as Mt,cq as Ge,d3 as Xt,cW as es,cX as ts,d4 as ss,d5 as as,d6 as ns,d7 as is,d8 as Ze,d9 as Xe,bQ as Rt,da as Ut,db as rs,c4 as Dt}from"./index-2fc17c3b.js";import{D as Qe}from"./index-72c63eba.js";import{G as oe}from"./index-7067581d.js";import{P as X}from"./index-9c7bc008.js";import{S as Je}from"./Skeleton-94302138.js";import{C as _e}from"./index-f023b25a.js";import{D as et}from"./index-d62905de.js";import{S as ls}from"./index-5b522715.js";import{A as se}from"./analytic_card_component-90936126.js";import{T as Ke}from"./index-0b5f66ee.js";import{l as os}from"./index-c57ac89c.js";import{U as Ee}from"./index-eae8dd11.js";import{A as Re}from"./index-20752ece.js";import{M as $e}from"./index-6215977a.js";import{R as cs,P as ds,S as us,a as ms}from"./school_settings_component-f7a8faa8.js";import{L as Ce}from"./index-ca65b019.js";import{A as wt}from"./index-389401b2.js";import{D as Ue}from"./index-ce61678e.js";import{I as Pe}from"./index-8aa917b6.js";import{A as hs}from"./index.esm-25816442.js";import"./index-e8e9ceb4.js";import"./PickerPanel-be3ca01f.js";import"./localeData-6904e615.js";import"./RangePicker-7a53e9ae.js";import"./index-651f824b.js";import"./ActionButton-e92b0465.js";import"./index-79fec706.js";import"./index-9abc7cc3.js";import"./transButton-b0336faf.js";import"./extends-538408d9.js";import"./useNotification-c6a88f9b.js";import"./DialogWrap-b6ee72d4.js";import"./MutateObserver-517aa91f.js";import"./index-812618d0.js";import"./InputNumber-5bec0d4b.js";import"./Image-e05734f9.js";import"./Upload-7e9943b4.js";import"./fade-7be4fa1b.js";import"./InfoCircleFilled-c05f8e68.js";import"./index-93153875.js";import"./index-df7607b8.js";import"./iconBase-6bf168e2.js";const{TextArea:xs}=D,ps=a=>{const s=async u=>{var h;const{data:r}=await k.custom({url:"",method:"post",meta:{operation:"updateExaminationType",variables:{examinationTypeId:{value:(h=a.examinationType)==null?void 0:h.id,type:"Int",required:!0},name:{value:u.name,type:"String",required:!0},code:{value:u.code,type:"String",required:!0},description:{value:u.description,type:"String",required:!1},startDate:{value:u.start_date,type:"String",required:!1},endDate:{value:u.end_date,type:"String",required:!1}},fields:["success","message",{examinationType:["id","name","code","description","description","startDate","endDate","created","updated","isActive","canEdit","canDelete","canManage"]}]}}).catch(g=>(o.error("Error in updating Examination Type"),{data:null})).then(g=>g);r&&(r.success?(o.success("Examination Type updated successfully"),a.onFinish(r.examinationType)):o.error(r.message))};return t.useEffect(()=>{var u,r,h,g,b;a.form.setFieldsValue({name:(u=a.examinationType)==null?void 0:u.name,code:(r=a.examinationType)==null?void 0:r.code,start_date:ke(((h=a.examinationType)==null?void 0:h.startDate)??new Date),end_date:ke(((g=a.examinationType)==null?void 0:g.endDate)??new Date),description:(b=a.examinationType)==null?void 0:b.description})},[a.randKey]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:u=>{u.start_date=ke(u.start_date).format("YYYY-MM-DD"),u.end_date=ke(u.end_date).format("YYYY-MM-DD"),s(u)},requiredMark:!0,autoComplete:"off",initialValues:{remember:!1,email:"",password:""},children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input code"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs(ee,{children:[e.jsx(W,{span:12,children:e.jsx(i.Item,{name:"start_date",label:"Start Date",rules:[{required:!1,type:"date",message:"Please input Start Date"}],children:e.jsx(Qe,{style:{width:"100%"},popupStyle:{zIndex:9999}})})}),e.jsx(W,{span:12,children:e.jsx(i.Item,{name:"end_date",label:"End Date",rules:[{required:!1,type:"date",message:"Please input End Date"}],children:e.jsx(Qe,{style:{width:"100%"},popupStyle:{zIndex:9999}})})})]}),e.jsx(i.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(xs,{rows:4})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},gs=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(1),[q,F]=t.useState(0),[P,_]=t.useState(!1),[x,V]=t.useState(20),[B,T]=t.useState(""),[E,R]=t.useState(!0);ne();const[U]=i.useForm(),[z]=i.useForm();oe.useBreakpoint().lg;const[M,I]=t.useState(!1),v=y=>{u(y),I(!0)},d=async y=>{h(r.map(n=>n.id===y.id?y:n)),z.resetFields(),I(!1)},j=async()=>{const{data:y}=await k.custom({url:"",method:"post",meta:{operation:"syncExaminationsTypes",variables:{},fields:["success","message"]}});y.success?(o.success(y.message),r.length=0,A(1,"")):o.error(y.message)},f=async y=>{const{data:n}=await k.custom({url:"",method:"post",meta:{operation:"deleteExaminationType",variables:{examinationTypeId:{value:parseInt(y.toString()),type:"Int",required:!0}},fields:["success","message"]}});n.success?(o.success(n.message),h(r.filter(m=>m.id!==y))):o.error(n.message)},l=()=>{o("Canceled")},S=[{title:"Name",dataIndex:"name",fixed:!0,render:(y,n,m)=>e.jsx("span",{children:e.jsx("a",{children:n.name})})},{title:"Code",dataIndex:"Code",fixed:!0,render:(y,n,m)=>e.jsx("span",{children:n.code})},{title:"School Type",dataIndex:"schoolType",fixed:!0,render:(y,n,m)=>e.jsx("span",{children:n.schoolType.name})},{title:"Created",dataIndex:"created",render:(y,n,m)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(n.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(y,n,m)=>e.jsx("span",{children:n!=null&&n.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(y,n,m)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(N,{icon:e.jsx(Se,{}),disabled:!(n!=null&&n.canEdit),onClick:()=>v(n)}),e.jsx(X,{title:"Are you sure to delete this Examination Type?",onConfirm:()=>f(n==null?void 0:n.id),onCancel:()=>l,okText:"Yes",cancelText:"No",disabled:!(n!=null&&n.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(n!=null&&n.canDelete)})})]})}],A=async(y,n="",m=20)=>{const{data:O}=await k.custom({url:"",method:"get",meta:{operation:"examinationsTypes",variables:{page:{value:y,type:"Int",required:!0},key:{value:n,type:"String",required:!1},pageSize:{value:m,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description",{schoolType:["id","name"]},"startDate","endDate","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(p=>(o.error("Error occured while fetching examinations types"),{data:null})).then(p=>p);O&&(b(O.page),F(O.total),_(O.hasNext),h(O.results)),R(!1)};return t.useEffect(()=>{A(g,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:12,children:e.jsx(i,{layout:"vertical",form:U,onFinish:y=>{b(1),r.length=0,T(y.key),A(1,y.key,x)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(ve,{}),onClick:()=>j(),children:"Sync Examinations Types"})})]}),e.jsx(le,{loading:E,columns:S,dataSource:r,scroll:{x:!0},pagination:{onChange:(y,n)=>{V(n),A(y,B,n)},total:q,pageSize:x,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(te,{title:"Editting "+(s==null?void 0:s.name),open:M,onCancel:y=>I(y),children:e.jsx(ps,{form:z,onFinish:d,randKey:Math.random(),examinationType:s})})]})},he=({children:a})=>{const{data:s}=Ae(),u=()=>{((s==null?void 0:s.isStaff)===!1||(s==null?void 0:s.isAdmin)===!1)&&(window.location.pathname="/home")},[r,h]=Et.useState(!0),[g,b]=Et.useState(!1),q=async()=>{h(!0);const{data:F}=await k.custom({url:"",method:"get",meta:{operation:"controlAuthorized",variables:{},fields:["analytics"]}}).catch(P=>({data:null})).then(P=>P);F&&b(F.analytics.authorized),h(!1)};return t.useEffect(()=>{u(),q()},[]),!g&&!r?e.jsx(e.Fragment,{children:e.jsx("h1",{children:"Unauthorized"})}):e.jsx(Fe,{spinning:r,children:a})},ys=()=>(t.useEffect(()=>{document.title=ue.system_name+": Examinations Types"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Examinations Types"})]}),e.jsx(gs,{height:80})]})})),js=a=>{t.useState();const[s,u]=t.useState([]),[r,h]=t.useState(1),[g,b]=t.useState(0),[q,F]=t.useState(20),[P,_]=t.useState(""),[x,V]=t.useState(!1),[B,T]=t.useState(!0);ne();const[E]=i.useForm();i.useForm();const U=!oe.useBreakpoint().lg,[z,w]=t.useState(!1),M=async()=>{const{data:f}=await k.custom({url:"",method:"post",meta:{operation:"syncSchoolVenuesTypes",variables:{},fields:["success","message"]}});f.success?(o.success(f.message),s.length=0,j(1,"")):o.error(f.message)},I=async f=>{const{data:l}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchoolVenueType",variables:{schoolVenueTypeId:{value:parseInt(f.toString()),type:"Int",required:!0}},fields:["success","message"]}});l.success?(o.success(l.message),u(s.filter(S=>S.id!==f))):o.error(l.message)},v=()=>{o("Canceled")},d=[{title:"Name",dataIndex:"name",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:e.jsx("a",{children:l.name})})},{title:"Created",dataIndex:"created",render:(f,l,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(l.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(f,l,S)=>e.jsx("a",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,l,S)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to delete this Venue Type?",onConfirm:()=>I(l==null?void 0:l.id),onCancel:()=>v,okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(l!=null&&l.canDelete)})})})}],j=async(f,l="",S=20)=>{const{data:A}=await k.custom({url:"",method:"get",meta:{operation:"schoolVenueTypes",variables:{page:{value:f,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:S,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(A.page),b(A.total),V(A.hasNext),u(A.results),T(!1)};return t.useEffect(()=>{j(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:U?24:20,children:e.jsx(i,{layout:"vertical",form:E,onFinish:f=>{h(1),s.length=0,_(f.key),j(1,f.key,q)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:U?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(ve,{}),onClick:()=>M(),children:"Sync Mtaa"})})]}),e.jsx(le,{loading:B,columns:d,dataSource:s,scroll:{x:!0},pagination:{onChange:(f,l)=>{F(l),j(f,P,l)},total:g,pageSize:q,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(te,{title:"Edit Region Informations",width:"20%",open:z,onClose:f=>w(f),children:e.jsx(e.Fragment,{})})]})},fs=()=>(t.useEffect(()=>{document.title=ue.system_name+": School Venues Types"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"School Venues Types"})]}),e.jsx(js,{height:80})]})})),Ss=async()=>{const{data:a}=await k.custom({url:"",method:"get",meta:{operation:"systemSettings",variables:{},fields:["smsSenderName","staffOtpAuthorize","adminOtpAuthorize","teachersOtpAuthorize","studentsOtpAuthorize","parentsOtpAuthorize","concatenateUsernameWithSchoolRegno","allowUserPublicRegistration","maximumLoginAttemp","smsCostPerUnit","otpExpiresTime","allowSessionTimeoutFeature","tokenExpires","passwordComplexityMinLength","passwordComplexityMaxLength","passwordComplexityMinUppercase","passwordComplexityMinLowercase","passwordComplexityMinNumeric","passwordComplexityMinSpecial","passwordComplexityAllowCharacterRepetition","allowedPasswordBackCompare","blockInteractionTillPasswordChanged","passwordMustChangeAfterDays","notifyPasswordChangeBeforeDays","resetAccountLockoutAfterMinutes","accountLockoutDurationInMinutes","allowedPasswordReusePeriondInMonths","userStorageLimit","allowGoogleAuth","allowFacebookAuth","allowTwitterAuth","allowLinkedinAuth","allowGithubAuth"]}}).catch(s=>(console.error(s),{data:null})).then(s=>s);return a||null},Ye=a=>{switch(a){case"tokenExpires":return"in seconds";case"otpExpiresTime":return"in seconds";case"smsCostPerUnit":return"in Tsh";default:return""}},vs=a=>{const[s,u]=t.useState(!1),[r,h]=t.useState(!1),[g,b]=t.useState(),[q]=i.useForm(),F=async()=>{const{data:x}=await k.custom({url:"",method:"post",meta:{operation:"autoCreateSystemSettings",variables:{},fields:["success","message"]}}).catch(()=>(o.remove(),o.error("Error occured while Auto Creating System Settings"),{data:null})).then(V=>V);x&&(o.remove(),x.success?(o.success(x.message),P()):o.error(x.message))},P=async()=>{h(!0);const x=await Ss();if(x){u(!0);const V={teachersOtpAuthorize:x.teachersOtpAuthorize,studentsOtpAuthorize:x.studentsOtpAuthorize,parentsOtpAuthorize:x.parentsOtpAuthorize,concatenateUsernameWithSchoolRegno:x.concatenateUsernameWithSchoolRegno,allowUserPublicRegistration:x.allowUserPublicRegistration,maximumLoginAttemp:x.maximumLoginAttemp,smsCostPerUnit:x.smsCostPerUnit,otpExpiresTime:x.otpExpiresTime,tokenExpires:x.tokenExpires,staffOtpAuthorize:x.staffOtpAuthorize,adminOtpAuthorize:x.adminOtpAuthorize,passwordComplexityMinLength:x.passwordComplexityMinLength,passwordComplexityMaxLength:x.passwordComplexityMaxLength,passwordComplexityMinUppercase:x.passwordComplexityMinUppercase,passwordComplexityMinLowercase:x.passwordComplexityMinLowercase,passwordComplexityMinNumeric:x.passwordComplexityMinNumeric,passwordComplexityMinSpecial:x.passwordComplexityMinSpecial,allowedPasswordBackCompare:x.allowedPasswordBackCompare,allowSessionTimeoutFeature:x.allowSessionTimeoutFeature,blockInteractionTillPasswordChanged:x.blockInteractionTillPasswordChanged,passwordComplexityAllowCharacterRepetition:x.passwordComplexityAllowCharacterRepetition,passwordMustChangeAfterDays:x.passwordMustChangeAfterDays,notifyPasswordChangeBeforeDays:x.notifyPasswordChangeBeforeDays,resetAccountLockoutAfterMinutes:x.resetAccountLockoutAfterMinutes,accountLockoutDurationInMinutes:x.accountLockoutDurationInMinutes,allowedPasswordReusePeriondInMonths:x.allowedPasswordReusePeriondInMonths,smsSenderName:x.smsSenderName,userStorageLimit:x.userStorageLimit,allowGoogleAuth:x.allowGoogleAuth,allowTwitterAuth:x.allowTwitterAuth,allowLinkedinAuth:x.allowLinkedinAuth,allowFacebookAuth:x.allowFacebookAuth,allowGithubAuth:x.allowGithubAuth};b(V),q.setFieldsValue({teachersOtpAuthorize:x.teachersOtpAuthorize,studentsOtpAuthorize:x.studentsOtpAuthorize,parentsOtpAuthorize:x.parentsOtpAuthorize,concatenateUsernameWithSchoolRegno:x.concatenateUsernameWithSchoolRegno,allowUserPublicRegistration:x.allowUserPublicRegistration,maximumLoginAttemp:x.maximumLoginAttemp,smsCostPerUnit:x.smsCostPerUnit,otpExpiresTime:x.otpExpiresTime,tokenExpires:x.tokenExpires,staffOtpAuthorize:x.staffOtpAuthorize,adminOtpAuthorize:x.adminOtpAuthorize,passwordComplexityMinLength:x.passwordComplexityMinLength,passwordComplexityMaxLength:x.passwordComplexityMaxLength,passwordComplexityMinUppercase:x.passwordComplexityMinUppercase,passwordComplexityMinLowercase:x.passwordComplexityMinLowercase,passwordComplexityMinNumeric:x.passwordComplexityMinNumeric,passwordComplexityMinSpecial:x.passwordComplexityMinSpecial,allowedPasswordBackCompare:x.allowedPasswordBackCompare,allowSessionTimeoutFeature:x.allowSessionTimeoutFeature,blockInteractionTillPasswordChanged:x.blockInteractionTillPasswordChanged,passwordComplexityAllowCharacterRepetition:x.passwordComplexityAllowCharacterRepetition,passwordMustChangeAfterDays:x.passwordMustChangeAfterDays,notifyPasswordChangeBeforeDays:x.notifyPasswordChangeBeforeDays,resetAccountLockoutAfterMinutes:x.resetAccountLockoutAfterMinutes,accountLockoutDurationInMinutes:x.accountLockoutDurationInMinutes,allowedPasswordReusePeriondInMonths:x.allowedPasswordReusePeriondInMonths,userStorageLimit:x.userStorageLimit,smsSenderName:x.smsSenderName,allowGoogleAuth:x.allowGoogleAuth,allowTwitterAuth:x.allowTwitterAuth,allowLinkedinAuth:x.allowLinkedinAuth,allowFacebookAuth:x.allowFacebookAuth,allowGithubAuth:x.allowGithubAuth})}else u(!1);h(!1)},_=async x=>{const{data:V}=await k.custom({url:"",method:"post",meta:{operation:"updateSystemSettings",variables:{smsSenderName:{value:x.smsSenderName,type:"String",required:!1},teachersOtpAuthorize:{value:x.teachersOtpAuthorize,type:"Boolean",required:!1},studentsOtpAuthorize:{value:x.studentsOtpAuthorize,type:"Boolean",required:!1},parentsOtpAuthorize:{value:x.parentsOtpAuthorize,type:"Boolean",required:!1},concatenateUsernameWithSchoolRegno:{value:x.concatenateUsernameWithSchoolRegno,type:"Boolean",required:!1},allowUserPublicRegistration:{value:x.allowUserPublicRegistration,type:"Boolean",required:!1},maximumLoginAttemp:{value:x.maximumLoginAttemp?parseInt(x.maximumLoginAttemp.toString()):5,type:"Int",required:!1},smsCostPerUnit:{value:x.smsCostPerUnit?parseInt(x.smsCostPerUnit.toString()):0,type:"Float",required:!1},otpExpiresTime:{value:x.otpExpiresTime?parseInt(x.otpExpiresTime.toString()):120,type:"Float",required:!1},tokenExpires:{value:x.tokenExpires?parseInt(x.tokenExpires.toString()):60,type:"Int"},staffOtpAuthorize:{value:x.staffOtpAuthorize,type:"Boolean",required:!1},adminOtpAuthorize:{value:x.adminOtpAuthorize,type:"Boolean",required:!1},passwordComplexityMinLength:{value:parseInt(x.passwordComplexityMinLength.toString()),type:"Int",reqired:!1},passwordComplexityMaxLength:{value:parseInt(x.passwordComplexityMaxLength.toString()),type:"Int",reqired:!1},passwordComplexityMinUppercase:{value:parseInt(x.passwordComplexityMinUppercase.toString()),type:"Int",reqired:!1},passwordComplexityMinLowercase:{value:parseInt(x.passwordComplexityMinLowercase.toString()),type:"Int",reqired:!1},passwordComplexityMinNumeric:{value:parseInt(x.passwordComplexityMinNumeric.toString()),type:"Int",reqired:!1},passwordComplexityMinSpecial:{value:parseInt(x.passwordComplexityMinSpecial.toString()),type:"Int",reqired:!1},allowedPasswordBackCompare:{value:parseInt(x.allowedPasswordBackCompare.toString()),type:"Int",required:!1},allowSessionTimeoutFeature:{value:x.allowSessionTimeoutFeature,type:"Boolean",required:!1},blockInteractionTillPasswordChanged:{value:x.blockInteractionTillPasswordChanged,type:"Boolean",required:!1},passwordComplexityAllowCharacterRepetition:{value:x.passwordComplexityAllowCharacterRepetition,type:"Boolean",required:!1},passwordMustChangeAfterDays:{value:parseInt(x.passwordMustChangeAfterDays.toString()),type:"Int",required:!1},notifyPasswordChangeBeforeDays:{value:parseInt(x.notifyPasswordChangeBeforeDays.toString()),type:"Int",required:!1},resetAccountLockoutAfterMinutes:{value:parseInt(x.resetAccountLockoutAfterMinutes.toString()),type:"Int",required:!1},accountLockoutDurationInMinutes:{value:parseInt(x.accountLockoutDurationInMinutes.toString()),type:"Int",required:!1},allowedPasswordReusePeriondInMonths:{value:parseInt(x.allowedPasswordReusePeriondInMonths.toString()),type:"Int",required:!1},userStorageLimit:{value:parseInt(x.userStorageLimit.toString()),type:"Int",required:!1},allowGoogleAuth:{value:x.allowGoogleAuth,type:"Boolean",required:!1},allowTwitterAuth:{value:x.allowTwitterAuth,type:"Boolean",required:!1},allowLinkedinAuth:{value:x.allowLinkedinAuth,type:"Boolean",required:!1},allowFacebookAuth:{value:x.allowFacebookAuth,type:"Boolean",required:!1},allowGithubAuth:{value:x.allowGithubAuth,type:"Boolean",required:!1}},fields:["success","message"]}}).catch(()=>(o.remove(),o.error("Error occured while updating System Settings"),{data:null})).then(B=>B);o.remove(),V&&(V.success?o.success(V.message):o.error(V.message))};return t.useEffect(()=>{P()},[a.randKey]),e.jsx(e.Fragment,{children:e.jsx(Je,{loading:r,active:!0,children:s?e.jsx(e.Fragment,{children:e.jsxs(ee,{children:[e.jsx(W,{span:10,children:e.jsx(_e,{children:e.jsx(et,{column:1,title:"System Settings",children:Object.entries(g??{}).map(([x,V],B)=>typeof V=="boolean"?e.jsx(et.Item,{labelStyle:{fontWeight:"bolder"},label:x.split(/(?=[A-Z])/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "),children:V?e.jsx(e.Fragment,{children:e.jsx("span",{style:{color:"green"},children:"Enabled"})}):e.jsx(e.Fragment,{children:e.jsx("span",{style:{color:"red"},children:"Disabled"})})},B):e.jsx(et.Item,{labelStyle:{fontWeight:"bolder"},label:x.split(/(?=[A-Z])/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "),children:V}))})})}),e.jsx(W,{span:14,children:e.jsx("div",{style:{marginLeft:20},children:e.jsx(i,{layout:"horizontal",form:q,onFinish:x=>{_(x)},children:e.jsx(ee,{style:{display:"flex"},children:e.jsx(W,{span:24,children:e.jsxs(_e,{children:[Object.entries(g??{}).map(([x,V],B)=>typeof V=="boolean"?e.jsx(i.Item,{label:e.jsxs(e.Fragment,{children:[x.split(/(?=[A-Z])/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "),Ye(x)&&e.jsx(ae,{children:Ye(x)})]}),name:x,initialValue:V,children:e.jsx(ls,{checked:q.getFieldValue(x),onChange:T=>{q.submit(),b(q.getFieldsValue())}})},B):e.jsx(i.Item,{label:e.jsxs(e.Fragment,{children:[x.split(/(?=[A-Z])/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "),Ye(x)&&e.jsx(ae,{style:{marginLeft:5},color:"green",children:Ye(x)})]}),name:x,initialValue:V,children:e.jsx(D,{size:"large",value:q.getFieldValue(x),placeholder:"Enter "+x.split(/(?=[A-Z])/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "),onChange:T=>{q.submit(),b(q.getFieldsValue())}})})),e.jsx(i.Item,{children:e.jsx(N,{htmlType:"submit",size:"large",style:{marginTop:20,float:"right"},icon:e.jsx(Bt,{}),danger:!0,children:"Save"})})]})})})})})})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(N,{onClick:()=>F(),children:"Auto Create Settings"})})})})})},Cs=()=>(t.useEffect(()=>{document.title=ue.system_name+": System Settings"},[]),e.jsx(he,{children:e.jsxs(e.Fragment,{children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"System Settings"})]}),e.jsx(vs,{})]})})),{Title:bs,Text:Si}=Ke,Is=a=>{const[s,u]=t.useState(),[r,h]=t.useState(!0);ne(),oe.useBreakpoint().lg;const b=async()=>{const{data:q}=await k.custom({url:"",method:"get",meta:{operation:"darasaAnalytics",fields:["analytics"]}});u(q.analytics),h(!1)};return t.useEffect(()=>{b()},[]),e.jsx(e.Fragment,{children:e.jsxs(ee,{align:"top",children:[e.jsx(W,{span:24,children:e.jsx(bs,{level:5,children:"Oclass Analytics"})}),e.jsx(se,{title:"Classes",value:s==null?void 0:s.totalClasses,link:"",loading:r}),e.jsx(se,{title:"Active Classes",value:s==null?void 0:s.totalActiveClasses,link:"",loading:r}),e.jsx(se,{title:"Blocked Classes",value:s==null?void 0:s.totalBlockedClasses,link:"",loading:r}),e.jsx(se,{title:"Students",value:s==null?void 0:s.totalStudents,link:"",loading:r}),e.jsx(se,{title:"Active Students",value:s==null?void 0:s.totalActiveStudents,link:"",loading:r}),e.jsx(se,{title:"Blocked Students",value:s==null?void 0:s.totalBlockedStudents,link:"",loading:r}),e.jsx(se,{title:"Drives",value:s==null?void 0:s.totalClassesDrives,link:"",loading:r}),e.jsx(se,{title:"Active Drives",value:s==null?void 0:s.totalActiveClassesDrives,link:"",loading:r}),e.jsx(se,{title:"Blocked Drives",value:s==null?void 0:s.totalBlockedClassesDrives,link:"",loading:r}),e.jsx(se,{title:"Announcements",value:s==null?void 0:s.totalClassesAnnouncements,link:"",loading:r}),e.jsx(se,{title:"Active Announcements",value:s==null?void 0:s.totalActiveClassesAnnouncements,link:"",loading:r}),e.jsx(se,{title:"Blocked Announcements",value:s==null?void 0:s.totalBlockedClassesAnnouncements,link:"",loading:r}),e.jsx(se,{title:"Assignments",value:s==null?void 0:s.totalClassesAssignments,link:"",loading:r}),e.jsx(se,{title:"Active Assignments",value:s==null?void 0:s.totalActiveClassesAssignments,link:"",loading:r}),e.jsx(se,{title:"Blocked Assignments",value:s==null?void 0:s.totalBlockedClassesAssignments,link:"",loading:r}),e.jsx(se,{title:"Resources Links",value:s==null?void 0:s.totalClassesResourcesLinks,link:"",loading:r}),e.jsx(se,{title:"Active Resources Links",value:s==null?void 0:s.totalActiveClassesResourcesLinks,link:"",loading:r}),e.jsx(se,{title:"Blocked Resources Links",value:s==null?void 0:s.totalBlockedClassesResourcesLinks,link:"",loading:r})]})})},{Title:As}=Ke,ks=a=>{const[s,u]=t.useState(),[r,h]=t.useState(!0),g=async()=>{const{data:b}=await k.custom({url:"",method:"get",meta:{operation:"odriveAnalytics",fields:["analytics"]}});u(b.analytics),h(!1)};return t.useEffect(()=>{g()},[]),e.jsx(e.Fragment,{children:e.jsxs(ee,{align:"top",children:[e.jsx(W,{span:24,children:e.jsx(As,{level:5,children:"Odrive Analytics"})}),e.jsx(se,{title:"Drives",value:s==null?void 0:s.totalDrives,link:"",loading:r}),e.jsx(se,{title:"Active Drives",value:s==null?void 0:s.totalActiveDrives,link:"",loading:r}),e.jsx(se,{title:"Blocked Drives",value:s==null?void 0:s.totalBlockedDrives,link:"",loading:r}),e.jsx(se,{title:"Files",value:s==null?void 0:s.totalFiles,link:"",loading:r}),e.jsx(se,{title:"Active Files",value:s==null?void 0:s.totalActiveFiles,link:"",loading:r}),e.jsx(se,{title:"Blocked Files",value:s==null?void 0:s.totalBlockedFiles,link:"",loading:r}),e.jsx(se,{title:"Private Drives",value:s==null?void 0:s.totalPrivateDrives,link:"",loading:r}),e.jsx(se,{title:"Active Private Drives",value:s==null?void 0:s.totalActivePrivateDrives,link:"",loading:r}),e.jsx(se,{title:"Blocked Private Drives",value:s==null?void 0:s.totalBlockedPrivateDrives,link:"",loading:r}),e.jsx(se,{title:"Public Drives",value:s==null?void 0:s.totalPublicDrives,link:"",loading:r}),e.jsx(se,{title:"Active Public Drives",value:s==null?void 0:s.totalActivePublicDrives,link:"",loading:r}),e.jsx(se,{title:"Active Odrive Schools",value:s==null?void 0:s.totalActiveOdriveSchools,link:"",loading:r}),e.jsx(se,{title:"Blocked Odrives Schools",value:s==null?void 0:s.totalBlockedPublicDrives,link:"",loading:r}),e.jsx(se,{title:"Drives Members",value:s==null?void 0:s.totalDrivesMembers,link:"",loading:r}),e.jsx(se,{title:"Active Drives Members",value:s==null?void 0:s.totalActiveDrivesMembers,link:"",loading:r}),e.jsx(se,{title:"Blocked Drives Members",value:s==null?void 0:s.totalBlockedDrivesMembers,link:"",loading:r})]})})},{Title:Fs,Text:vi}=Ke,Ns=a=>{const[s,u]=t.useState(),[r,h]=t.useState(0),[g,b]=t.useState(!0);ne(),oe.useBreakpoint().lg;const F=async()=>{const{data:_}=await k.custom({url:"",method:"get",meta:{operation:"userAnalytics",fields:["analytics"]}});u(_.analytics),b(!1)},P=async()=>{const{data:_}=await k.custom({url:"",method:"get",meta:{operation:"globalOpesSmsBalance",fields:["data"]}});_&&h(parseInt(_.data.balance))};return t.useEffect(()=>{F(),P()},[]),e.jsx(e.Fragment,{children:e.jsxs(ee,{align:"top",children:[e.jsx(W,{span:24,children:e.jsx(Fs,{level:5,children:"Users/Members/School Analytics"})}),e.jsx(se,{title:"Schools",value:s==null?void 0:s.total_schools,link:"/control/schools",loading:g}),e.jsx(se,{title:"Active Users",value:s==null?void 0:s.total_active_users,link:"/control/users?status=1",loading:g}),e.jsx(se,{title:"Blocked Users",value:s==null?void 0:s.total_blocked_users,link:"/control/users?status=0",loading:g}),e.jsx(se,{title:"Active Admins",value:s==null?void 0:s.total_adminstrators,link:"/control/users?status=1&role=adminstrator",loading:g}),e.jsx(se,{title:"Blocked Admins",value:s==null?void 0:s.total_blocked_adminstrators,link:"/control/users?status=0&role=adminstrator",loading:g}),e.jsx(se,{title:"Active Staffs",value:s==null?void 0:s.total_staffs,link:"/control/users?status=1&role=staff",loading:g}),e.jsx(se,{title:"Blocked Staffs",value:s==null?void 0:s.total_blocked_staffs,link:"/control/users?status=0&role=staff",loading:g}),e.jsx(se,{title:"Messages Balance",value:r,link:"",loading:g})]})})},Ts=a=>e.jsxs(e.Fragment,{children:[e.jsx(Ns,{}),e.jsx(ks,{}),e.jsx(Is,{})]}),qs=()=>(Ae(),t.useEffect(()=>(document.title=ue.system_name+": Analytics",document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Analytics"})]}),e.jsx("div",{style:{maxHeight:"calc(100vh - 105px)",minHeight:"calc(100vh - 105px)",overflowY:"auto"},children:e.jsx(Ts,{})})]})})),{TextArea:Ps}=D,Es=a=>{const[s,u]=t.useState(!1),[r,h]=t.useState(),[g,b]=t.useState(!1),[q,F]=t.useState(!1),[P,_]=t.useState(!1),[x,V]=t.useState(!0);return e.jsx(e.Fragment,{children:e.jsx(os.Spin,{spinning:s,children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:B=>{B.is_public=q,B.is_custom=P,B.must_login=x,B.icon=r,u(!0),a.onFinish(B)},requiredMark:!1,initialValues:{remember:!1,email:"",password:""},children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{name:"url",label:"Path",rules:[{required:!0,type:"string",message:"Please input url"}],children:e.jsx(D,{size:"large",placeholder:"Enter Path..."})}),e.jsx(i.Item,{name:"must_login",rules:[{required:!1,type:"boolean"}],children:e.jsx(xe,{onChange:()=>{V(!x)},defaultChecked:x,children:"Must Login"})}),e.jsx(i.Item,{name:"is_public",rules:[{required:!1,type:"boolean"}],children:e.jsx(xe,{onChange:()=>{F(!q)},children:"Public Available"})}),e.jsx(i.Item,{name:"is_custom",rules:[{required:!1,type:"boolean"}],children:e.jsx(xe,{onChange:()=>{_(!P)},children:"Custom Application"})}),e.jsx(i.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(Ps,{rows:4})}),e.jsx(i.Item,{name:"icon",label:"Icon",style:{marginBottom:"12px"},children:e.jsx(Ee,{beforeUpload:()=>!1,maxCount:1,onChange:B=>{const T=B.file;r?r.uid!==T.uid&&(h(T),b(!0)):(h(T),b(!0))},onRemove:()=>{h(void 0),b(!1)},accept:"image/*",children:e.jsx(N,{icon:e.jsx(we,{}),children:"Click to Select"})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(N,{type:"primary",size:"large",htmlType:"submit",disabled:!g||s,loading:s,children:[s&&e.jsx(Yt,{color:"success"}),"Save"]})})]})})})},{TextArea:Ms}=D,Ds=a=>{const[s,u]=t.useState(),[r,h]=t.useState(!0),[g,b]=t.useState(!1);return t.useEffect(()=>{a.form.setFieldsValue({name:a.app.name,url:a.app.url,description:a.app.description,must_login:a.app.mustLogin,is_public:a.app.isPublic,is_custom:a.app.isCustom,is_active:a.app.isActive,icon:a.app.icon}),u(null)},[a.randKey]),e.jsx(e.Fragment,{children:e.jsx(Fe,{spinning:g,children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:q=>{q.id=parseInt(a.app.id),q.icon=s,b(!0),a.onFinish(q)},requiredMark:!1,initialValues:{remember:!1,email:"",password:""},children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{name:"url",label:"Path",rules:[{required:!0,type:"string",message:"Please input url"}],children:e.jsx(D,{size:"large",placeholder:"Enter Path..."})}),e.jsx(i.Item,{name:"must_login",valuePropName:"checked",rules:[{required:!1,type:"boolean"}],children:e.jsx(xe,{children:"Must Login"})}),e.jsx(i.Item,{name:"is_public",valuePropName:"checked",rules:[{required:!1,type:"boolean"}],children:e.jsx(xe,{children:"Public Available"})}),e.jsx(i.Item,{name:"is_custom",valuePropName:"checked",rules:[{required:!1,type:"boolean"}],children:e.jsx(xe,{children:"Custom Application"})}),e.jsx(i.Item,{name:"is_active",valuePropName:"checked",rules:[{required:!1,type:"boolean"}],children:e.jsx(xe,{children:"is Active"})}),e.jsx(i.Item,{name:"description",label:"Description",style:{marginBottom:"12px"},children:e.jsx(Ms,{rows:4})}),e.jsxs(i.Item,{name:"icon",label:"Icon:",style:{marginBottom:"12px"},children:[e.jsx(ye,{title:a.app.icon,children:e.jsx("span",{style:{color:"green",display:"block"},children:a.app.icon})}),e.jsx(Ee,{beforeUpload:()=>!1,maxCount:1,onChange:q=>{const F=q.file;s?s.uid!==F.uid&&(u(F),h(!0)):(u(F),h(!0))},onRemove:()=>{u(void 0),h(!1)},accept:"image/*",children:e.jsx(N,{icon:e.jsx(we,{}),children:"Click to Select"})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",loading:g,disabled:g,children:"Save"})})]})})})},zs=a=>{const[s,u]=t.useState([]),[r,h]=t.useState(),[g,b]=t.useState(!0);ne();const[q,F]=t.useState(!1),[P,_]=t.useState(!1),[x]=i.useForm(),[V]=i.useForm(),T=!oe.useBreakpoint().lg,E=j=>{h(j),_(!0)},R=()=>{F(!0)},U=()=>{F(!1)},z=async j=>{const{data:f}=await k.custom({url:"",method:"post",meta:{operation:"createApp",variables:{name:{value:j.name,type:"String",required:!0},description:{value:j.description,type:"String",required:!1},url:{value:j.url,type:"String",required:!0},icon:{value:j.icon,type:"Upload",required:!0},isPublic:{value:j.is_public,type:"Boolean",required:!1},isCustom:{value:j.is_custom,type:"Boolean",required:!1},mustLogin:{value:j.must_login,type:"Boolean",required:!1}},fields:["success","message",{app:["id","name","url","icon","description","created","updated","isActive","canDelete","canEdit","canManage","canAccess"]}]}});o.remove(),f.success?(o.success(f.message),u([f.app,...s]),x.resetFields(),F(!1)):o.error(f.message)},w=async j=>{const{data:f}=await k.custom({url:"",method:"post",meta:{operation:"updateApp",variables:{id:{value:j.id,type:"Int",required:!0},name:{value:j.name,type:"String",required:!0},description:{value:j.description,type:"String",required:!1},url:{value:j.url,type:"String",required:!0},icon:{value:j.icon,type:"Upload",required:!1},isPublic:{value:j.is_public,type:"Boolean",required:!1},isCustom:{value:j.is_custom,type:"Boolean",required:!1},mustLogin:{value:j.must_login,type:"Boolean",required:!1},isActive:{value:j.is_active,type:"Boolean",required:!1}},fields:["success","message",{app:["id","name","url","icon","description","created","updated","isActive","canDelete","canEdit","canManage","canAccess"]}]}});f.success?(o.success(f.message),u(s.map(l=>l.id.toString()===j.id.toString()?f.app:l)),V.resetFields(),_(!1)):o.error(f.message)},M=async()=>{const{data:j}=await k.custom({url:"",method:"post",meta:{operation:"syncDefaultApps",variables:{},fields:["success","message"]}});j.success?(o.success(j.message),d()):o.error(j.message)},I=async j=>{const{data:f}=await k.custom({url:"",method:"post",meta:{operation:"deleteApp",variables:{id:{value:j,type:"Int",required:!0}},fields:["success","message"]}});f.success?(o.success(f.message),u(s.filter(l=>l.id.toString()!==j.toString()))):o.error(f.message)},v=j=>{$e.confirm({title:"Deleting Application",icon:e.jsx(Qt,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>I(parseInt(j.toString()))})},d=async()=>{const{data:j}=await k.custom({url:"",method:"get",meta:{operation:"apps",variables:{control:{value:!0,type:"Boolean",required:!0}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","icon","url","isActive","mustLogin","isCustom","isPublic","created","updated","isActive","canEdit","canDelete","canManage","canAccess"]}]}});u(j.results),b(!1)};return t.useEffect(()=>{d()},[]),g?e.jsx(e.Fragment,{children:e.jsx(Je,{loading:g,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(W,{span:20}),e.jsxs(W,{span:4,style:{display:"flex",justifyContent:"flex-end",marginBottom:5,marginTop:5},children:[e.jsxs(N,{size:"large",onClick:()=>{x.resetFields(),R()},danger:!0,children:[e.jsx(je,{}),"Create App"]}),e.jsxs(N,{size:"large",onClick:()=>{M()},danger:!0,children:[e.jsx(je,{}),"Sync Default Apps"]})]})]}),e.jsx("div",{style:{maxHeight:"calc(100vh - 150px)",minHeight:"calc(100vh - 150px)",overflowY:"auto"},children:e.jsxs(ee,{align:"top",children:[s.length===0&&e.jsx(W,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx("h3",{children:"No Apps Found ..."})}),s.map(j=>e.jsx(W,{span:T?12:4,children:e.jsxs(_e,{hoverable:j.isActive,style:{marginRight:10,marginBottom:10},children:[e.jsx(Be,{style:{right:0,position:"absolute"},children:e.jsx(st,{trigger:["click"],overlay:e.jsxs(be,{children:[e.jsx(be.Item,{icon:e.jsx(Se,{}),onClick:()=>{E(j)},disabled:!(j!=null&&j.canDelete),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(be.Item,{icon:e.jsx(de,{}),onClick:()=>{v(j.id)},disabled:!(j!=null&&j.canDelete),children:e.jsxs("a",{target:"_blank",rel:"noopener noreferrer",children:["Delete ",j.canDelete]})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:f=>f.preventDefault(),children:e.jsx(at,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsxs(Be,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},onClick:()=>{},children:[e.jsx(Re,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(Gt,{}),src:j.icon}),j.name]})]})}))]})}),e.jsx(te,{title:"Creating An Application",open:q,onOk:U,width:"30vw",onClose:j=>F(j),children:e.jsx(Es,{form:x,onFinish:z})}),e.jsx(te,{title:"Edit Application",open:P,width:"30vw",onClose:j=>{_(j)},children:e.jsx(Ds,{app:r,form:V,onFinish:w,randKey:Math.random()})})]})},Ls=()=>{const{data:a}=Ae(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>(document.title=ue.system_name+": Applications",s(),document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),e.jsx(he,{children:e.jsxs(e.Fragment,{children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Applications"})]}),e.jsx(zs,{})]})})},Bs=a=>{const[s,u]=t.useState([]),[r,h]=t.useState(1),[g,b]=t.useState(0),[q,F]=t.useState(20),[P,_]=t.useState(""),[x,V]=t.useState(!1),[B,T]=t.useState(!0);ne();const[E]=i.useForm();i.useForm();const U=!oe.useBreakpoint().lg,z=[{title:"Name",dataIndex:"name",fixed:!0,render:(I,v,d)=>e.jsx("span",{children:e.jsx("a",{children:v.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(I,v,d)=>e.jsx("span",{children:e.jsx("a",{children:I})})},{title:"Created",dataIndex:"created",render:(I,v,d)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(v.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(I,v,d)=>e.jsx("a",{children:v!=null&&v.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(I,v,d)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"}})}],w=async(I,v="",d=20)=>{const{data:j}=await k.custom({url:"",method:"get",meta:{operation:"systemPermissions",variables:{page:{value:I,type:"Int",required:!0},key:{value:v,type:"String",required:!1},pageSize:{value:d,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(j.page),b(j.total),V(j.hasNext),u(j.results),T(!1)},M=async()=>{const{data:I}=await k.custom({url:"",method:"post",meta:{operation:"syncSystemPermissions",variables:{},fields:["success","message"]}});I.success?(o.success(I.message),s.length=0,u([]),w(1)):o.error(I.message)};return t.useEffect(()=>{w(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:U?24:20,children:e.jsx(i,{layout:"vertical",form:E,onFinish:I=>{h(1),s.length=0,_(I.key),w(1,I.key,q)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:U?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ye,{title:"Synchronize Default School Ownerships",children:e.jsx(N,{size:"large",icon:e.jsx(ve,{}),onClick:()=>M()})})})]}),e.jsx("div",{children:e.jsx(le,{loading:B,columns:z,dataSource:s,scroll:{x:!0},pagination:{onChange:(I,v)=>{F(v),w(I,P,v)},total:g,pageSize:q,position:["bottomCenter"],showQuickJumper:!0}})})]})},Os=()=>{const{data:a}=Ae(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{document.title=ue.system_name+": Permissions",s()},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Permissions"})]}),e.jsx(Bs,{height:80})]})})},_s=a=>e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:s=>{a.onFinish(s)},requiredMark:!1,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})}),Rs=a=>{const[s,u]=t.useState(a.role.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.role.name,isActive:a.role.isActive})},[a.form,a.role]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.role.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{name:"isActive",children:e.jsx(xe,{checked:s,onChange:()=>u(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Us=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(1),[q,F]=t.useState(0),[P,_]=t.useState(20),[x,V]=t.useState(""),[B,T]=t.useState(!1),[E,R]=t.useState(!0);ne();const[U]=i.useForm(),[z]=i.useForm();oe.useBreakpoint().lg;const[M,I]=t.useState(!1),[v,d]=t.useState(!1),[j,f]=t.useState(!1),l=G=>{u(G),I(!0)},S=G=>{u(G),f(!0)},A=()=>{f(!1)},y=async G=>{const{data:J}=await k.custom({url:"",method:"post",meta:{operation:"updateSystemRole",variables:{id:{value:G.id,type:"Int",required:!0},name:{value:G.name,type:"String",required:!0},isActive:{value:G.isActive,type:"Boolean",required:!0}},fields:["success","message",{schoolType:["id","name","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}});J.success?(o.success(J.message),z.resetFields(),f(!1),h(r.map(L=>parseInt(L.id.toString())===parseInt(G.id)?J.role:L))):o.error(J.message)},n=async G=>{const{data:J}=await k.custom({url:"",method:"post",meta:{operation:"createSystemRole",variables:{id:{value:G.id,type:"Int",required:!0},name:{value:G.name,type:"String",required:!0},isActive:{value:G.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","code","description","custom","created","updated","isActive","canDelete","canEdit","canManage"]}]}});J.success?(o.success(J.message),z.resetFields(),f(!1),h(r.map(L=>L.id===J.role.id?J.role:L))):o.error(J.message)},m=async G=>{const{data:J}=await k.custom({url:"",method:"post",meta:{operation:"deleteSystemRole",variables:{id:{value:parseInt(G.toString()),type:"Int",required:!0}},fields:["success","message"]}});J.success?(o.success(J.message),h(r.filter(L=>L.id!==G))):o.error(J.message)},O=()=>{o("Canceled")},p=[{title:"Name",dataIndex:"name",fixed:!0,render:(G,J,L)=>e.jsx("span",{children:e.jsx("a",{children:J.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(G,J,L)=>e.jsx("span",{children:e.jsx("a",{children:G})})},{title:"Custom Role",dataIndex:"custom",fixed:!0,render:(G,J,L)=>e.jsx("span",{children:J.custom?e.jsx(ae,{color:"red",children:"Custom"}):e.jsx(ae,{color:"green",children:"Not Custom"})})},{title:"Created",dataIndex:"created",render:(G,J,L)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(J.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(G,J,L)=>e.jsx("a",{children:J!=null&&J.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(G,J,L)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ye,{title:"Manage Role Permissions",placement:"left",children:e.jsx(N,{icon:e.jsx(Jt,{}),disabled:!(J!=null&&J.canManage),onClick:()=>l(J)})}),e.jsx(X,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>m(J==null?void 0:J.id),onCancel:()=>O,okText:"Yes",cancelText:"No",disabled:!(J!=null&&J.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(J!=null&&J.canDelete)})}),e.jsx(ye,{title:"Edit "+(J==null?void 0:J.name)+" Ownership",color:"green",placement:"left",children:e.jsx(N,{icon:e.jsx(Se,{}),disabled:!(J!=null&&J.canEdit),onClick:()=>S(J)})})]})}],c=async(G,J="",L=20)=>{const{data:C}=await k.custom({url:"",method:"get",meta:{operation:"systemRoles",variables:{page:{value:G,type:"Int",required:!0},key:{value:J,type:"String",required:!1},pageSize:{value:L,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","custom","isActive","created","updated","canEdit","canDelete","canManage"]}]}});b(C.page),F(C.total),T(C.hasNext),h(C.results),R(!1)},Z=async()=>{const{data:G}=await k.custom({url:"",method:"post",meta:{operation:"syncSystemRoles",variables:{},fields:["success","message"]}});G.success?(o.success(G.message),r.length=0,h([]),c(1)):o.error(G.message)};return t.useEffect(()=>{c(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:8,children:e.jsx(i,{layout:"vertical",form:U,onFinish:G=>{b(1),r.length=0,V(G.key),c(1,G.key,P)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ye,{title:"Synchronize Default Schools Roles",placement:"left",color:"green",children:e.jsx(N,{size:"large",icon:e.jsx(ve,{}),style:{marginRight:10},onClick:()=>Z()})})})]}),e.jsx("div",{children:e.jsx(le,{loading:E,columns:p,dataSource:r,scroll:{x:!0},pagination:{onChange:(G,J)=>{_(J),c(G,x,J)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(te,{title:"Edit System Role",width:"30vw",open:j,onOk:A,onClose:G=>f(G),children:e.jsx(Rs,{form:z,role:s,onFinish:y})}),e.jsx(te,{title:"Create System Role",width:"30vw",open:v,onCancel:G=>d(G),children:e.jsx(_s,{form:z,onFinish:n})}),e.jsx(te,{title:"Manage Role Permissions",width:"70vw",visible:M,onCancel:G=>I(G),children:e.jsx(cs,{role:s,randKey:Math.random()})})]})},ws=()=>{const{data:a}=Ae(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{document.title=ue.system_name+": Roles",s()},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Roles"})]}),e.jsx(Us,{height:80})]})})},Ks=a=>{const[s,u]=t.useState(a.district.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.district.name,isActive:a.district.isActive})},[a.form,a.district]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.district.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{name:"isActive",children:e.jsx(xe,{checked:s,onChange:()=>u(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Vs=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(1),[q,F]=t.useState(0),[P,_]=t.useState(20),[x,V]=t.useState(""),[B,T]=t.useState(!1),[E,R]=t.useState(!0);ne();const[U]=i.useForm(),[z]=i.useForm(),M=!oe.useBreakpoint().lg,[I,v]=t.useState(!1),d=y=>{u(y),v(!0)},j=async y=>{const{data:n}=await k.custom({url:"",method:"post",meta:{operation:"updateDistrict",variables:{id:{value:y.id,type:"Int",required:!0},name:{value:y.name,type:"String",required:!0},isActive:{value:y.isActive,type:"Boolean",required:!0}},fields:["success","message",{district:["id","name",{region:["id","name"]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}});n.success?(o.success(n.message),z.resetFields(),v(!1),h(r.map(m=>m.id===n.district.id?n.district:m))):o.error(n.message)},f=async y=>{const{data:n}=await k.custom({url:"",method:"post",meta:{operation:"deleteDistrict",variables:{id:{value:y,type:"Int",required:!0}},fields:["success","message"]}});n.success?(o.success(n.message),h(r.filter(m=>m.id!==y))):o.error(n.message)},l=()=>{o("Canceled")},S=[{title:"Name",dataIndex:"name",fixed:!0,render:(y,n,m)=>e.jsx("span",{children:e.jsx("a",{children:n.name})})},{title:"Region",dataIndex:"region",fixed:!0,render:(y,n,m)=>e.jsx("span",{children:e.jsx("a",{children:n.region.name})})},{title:"Created",dataIndex:"created",render:(y,n,m)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(n.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(y,n,m)=>e.jsx("a",{children:n!=null&&n.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(y,n,m)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this member?",onConfirm:()=>f(n==null?void 0:n.id),onCancel:()=>l,okText:"Yes",cancelText:"No",disabled:!(n!=null&&n.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(n!=null&&n.canDelete)})}),e.jsx(N,{disabled:!(n!=null&&n.canEdit),icon:e.jsx(Se,{}),onClick:()=>d(n)})]})}],A=async(y,n="",m=20)=>{const{data:O}=await k.custom({url:"",method:"get",meta:{operation:"districts",variables:{page:{value:y,type:"Int",required:!0},key:{value:n,type:"String",required:!1},pageSize:{value:m,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name",{region:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});b(O.page),F(O.total),T(O.hasNext),h(O.results),R(!1)};return t.useEffect(()=>{A(g)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(W,{span:M?24:20,children:e.jsx(i,{layout:"vertical",form:U,onFinish:y=>{b(1),r.length=0,A(1,y.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{children:e.jsx(le,{loading:E,columns:S,dataSource:r,scroll:{y:window.innerHeight-310},pagination:{onChange:(y,n)=>{_(n),A(y,x,n)},onShowSizeChange:(y,n)=>{_(n),A(1,x,n)},showSizeChanger:!0,total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(te,{title:"Edit District Informations",width:"30vw",open:I,onClose:y=>v(y),children:e.jsx(Ks,{form:z,district:s,onFinish:j})})]})},Hs=()=>{const{data:a}=Ae(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{document.title=ue.system_name+": Districts",s()},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Districts"})]}),e.jsx(Vs,{height:80})]})})},Ws=a=>{const[s]=i.useForm(),[u,r]=t.useState(a.level.isActive),h=async g=>{const{data:b}=await k.custom({url:"",method:"post",meta:{operation:"updateEducationLevel",variables:{id:{value:g.id,type:"Int",required:!0},name:{value:g.name,type:"String",required:!0},isActive:{value:g.isActive,type:"Boolean",required:!0}},fields:["success","message",{educationLevel:["id","name","code","index",{schoolType:["id","name","code"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});b.success?(o.success(b.message),s.resetFields(),a.onFinish(b.educationLevel)):o.error(b.message)};return t.useEffect(()=>{a.form.setFieldsValue({name:a.level.name,isActive:a.level.isActive})},[a.form,a.level]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:g=>{g.isActive=u,g.id=parseInt(a.level.id.toString()),h(g)},requiredMark:!1,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{name:"isActive",children:e.jsx(xe,{checked:u,onChange:()=>r(!u),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Ys=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(1),[q,F]=t.useState(0),[P,_]=t.useState(20),[x,V]=t.useState(""),[B,T]=t.useState(!1),[E,R]=t.useState(!0);ne();const[U]=i.useForm(),[z]=i.useForm();oe.useBreakpoint().lg,t.useState(!1);const[M,I]=t.useState(!1),v=y=>{u(y),I(!0)},d=async()=>{const{data:y}=await k.custom({url:"",method:"post",meta:{operation:"synchronizeEducationLevelsIndexes",variables:{},fields:["success","message"]}});y.success?o.success(y.message):o.error(y.message)},j=async y=>{h(r.map(n=>parseInt(n.id.toString())===parseInt(y.id.toString())?y:n)),I(!1)},f=async y=>{const{data:n}=await k.custom({url:"",method:"post",meta:{operation:"deleteEducationLevel",variables:{id:{value:parseInt(y.toString()),type:"Int",required:!0}},fields:["success","message"]}});n.success?(o.success(n.message),h(r.filter(m=>m.id!==y))):o.error(n.message)},l=()=>{o("Canceled")},S=[{title:"Name",dataIndex:"name",fixed:!0,render:(y,n,m)=>e.jsx("span",{children:e.jsx("a",{children:n.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(y,n,m)=>e.jsx("span",{children:e.jsx("a",{children:n.code})})},{title:"Index",dataIndex:"index",fixed:!0,render:(y,n,m)=>e.jsx("span",{children:e.jsx("a",{children:n.index})})},{title:"School Type",dataIndex:"schoolType",fixed:!0,render:(y,n,m)=>{var O;return e.jsx("span",{children:e.jsx("a",{children:(O=n.schoolType)==null?void 0:O.name})})}},{title:"Created",dataIndex:"created",render:(y,n,m)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(n.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(y,n,m)=>e.jsx("a",{children:n!=null&&n.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(y,n,m)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>f(n==null?void 0:n.id),onCancel:()=>l,okText:"Yes",cancelText:"No",disabled:!(n!=null&&n.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(n!=null&&n.canDelete),danger:!0})}),e.jsx(ye,{title:"Edit "+(n==null?void 0:n.name)+" Ownership",color:"green",children:e.jsx(N,{icon:e.jsx(Se,{}),disabled:!(n!=null&&n.canEdit),onClick:()=>v(n),danger:!0})})]})}],A=async(y,n="",m=20)=>{const{data:O}=await k.custom({url:"",method:"get",meta:{operation:"educationLevels",variables:{page:{value:y,type:"Int",required:!0},key:{value:n,type:"String",required:!1},pageSize:{value:m,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","index",{schoolType:["id","name","code"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});b(O.page),F(O.total),T(O.hasNext),h(O.results),R(!1)};return t.useEffect(()=>{A(g,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:8,children:e.jsx(i,{layout:"vertical",form:U,onFinish:y=>{b(1),r.length=0,V(y.key),A(1,y.key,P)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ye,{title:"Auto Correct All Education Levels Indexes over all Schools",color:"green",placement:"left",children:e.jsx(X,{title:"Synchronizing All Indexes of Education Levels over all Schools",placement:"left",onConfirm:d,onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(ve,{}),size:"large",children:"Sync Indexes"})})})})]}),e.jsx("div",{children:e.jsx(le,{loading:E,columns:S,dataSource:r,scroll:{x:!0},pagination:{onChange:(y,n)=>{_(n),A(y,x,n)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(te,{title:"Edit "+(s==null?void 0:s.name)+" Information",width:"20%",open:M,onClose:y=>I(y),children:e.jsx(Ws,{form:z,level:s,onFinish:j})})]})},Gs=()=>{const{data:a}=Ae(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{document.title=ue.system_name+": School Education Levels",s()},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"School Education Levels"})]}),e.jsx(Ys,{height:80})]})})},Qs=()=>(t.useEffect(()=>{document.title=ue.system_name+": Programmes"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Programmes(High Level Education)"})]}),e.jsx(ds,{height:80,control:!0})]})})),Js=a=>{const[s,u]=t.useState(a.region.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.region.name,isActive:a.region.isActive})},[a.form,a.region]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.region.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{name:"isActive",children:e.jsx(xe,{checked:s,onChange:()=>u(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},$s=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(1),[q,F]=t.useState(0),[P,_]=t.useState(20),[x,V]=t.useState(""),[B,T]=t.useState(!1),[E,R]=t.useState(!0);ne();const[U]=i.useForm(),[z]=i.useForm(),M=!oe.useBreakpoint().lg,[I,v]=t.useState(!1),d=n=>{u(n),v(!0)},j=async n=>{const{data:m}=await k.custom({url:"",method:"post",meta:{operation:"updateRegion",variables:{id:{value:n.id,type:"Int",required:!0},name:{value:n.name,type:"String",required:!0},isActive:{value:n.isActive,type:"Boolean",required:!0}},fields:["success","message",{region:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});m.success?(o.success(m.message),z.resetFields(),v(!1),h(r.map(O=>O.id===m.region.id?m.region:O))):o.error(m.message)},f=async()=>{const{data:n}=await k.custom({url:"",method:"post",meta:{operation:"syncMtaa",variables:{},fields:["success","message"]}});n.success?o.success(n.message):o.error(n.message)},l=async n=>{const{data:m}=await k.custom({url:"",method:"post",meta:{operation:"deleteRegion",variables:{id:{value:n,type:"Int",required:!0}},fields:["success","message"]}});m.success?(o.success(m.message),h(r.filter(O=>O.id!==n))):o.error(m.message)},S=()=>{o("Canceled")},A=[{title:"Name",dataIndex:"name",fixed:!0,render:(n,m,O)=>e.jsx("span",{children:e.jsx("a",{children:m.name})})},{title:"Created",dataIndex:"created",render:(n,m,O)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(m.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(n,m,O)=>e.jsx("a",{children:m!=null&&m.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(n,m,O)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this member?",onConfirm:()=>l(m==null?void 0:m.id),onCancel:()=>S,okText:"Yes",cancelText:"No",disabled:!(m!=null&&m.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(m!=null&&m.canDelete)})}),e.jsx(N,{disabled:!(m!=null&&m.canEdit),onClick:()=>d(m),icon:e.jsx(Se,{})})]})}],y=async(n,m="",O=20)=>{const{data:p}=await k.custom({url:"",method:"get",meta:{operation:"regions",variables:{page:{value:n,type:"Int",required:!0},key:{value:m,type:"String",required:!1},pageSize:{value:O,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});b(p.page),F(p.total),T(p.hasNext),h(p.results),R(!1)};return t.useEffect(()=>{y(g,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:M?24:20,children:e.jsx(i,{layout:"vertical",form:U,onFinish:n=>{b(1),r.length=0,y(1,n.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:M?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(ve,{}),onClick:()=>f(),children:"Sync Mtaa"})})]}),e.jsx("div",{children:e.jsx(le,{loading:E,columns:A,dataSource:r,scroll:{y:window.innerHeight-310},pagination:{onChange:(n,m)=>{_(m),y(n,x,m)},onShowSizeChange:(n,m)=>{_(m),y(n,x,m)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(te,{title:"Edit Region Informations",width:"30vw",open:I,onClose:n=>v(n),children:e.jsx(Js,{form:z,region:s,onFinish:j})})]})},Zs=()=>(t.useEffect(()=>{document.title=ue.system_name+": Regions"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Regions"})]}),e.jsx($s,{height:80})]})})),{Option:ze}=fe,{TextArea:Xs}=D,ea=a=>{var p,c,Z,G,J,L,C,Y,ie,Ie,Ve,He,Me,qe,We,H,Q,pe,ge,Ne,De,nt;const[s,u]=t.useState([]),[r,h]=t.useState([]),[g,b]=t.useState([]),[q,F]=t.useState([]),[P,_]=t.useState([]),[x,V]=t.useState(0),[B,T]=t.useState(0),[E,R]=t.useState(),[U,z]=t.useState(!1),[w,M]=t.useState(!1),[I,v]=t.useState(!1),[d,j]=t.useState([]),f=async($=1,ce="")=>{const{data:Te}=await k.custom({url:"",method:"get",meta:{operation:"ownerships",variables:{page:{value:$,type:"Int",required:!0},key:{value:ce,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(Te.results)},l=async($,ce="")=>{v(!0);const{data:Te}=await k.custom({url:"",method:"get",meta:{operation:"wards",variables:{key:{value:ce,type:"String",required:!1},district:{value:$,type:"Int",requiqred:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});b(Te.results),v(!1)},S=async($,ce="")=>{M(!0);const{data:Te}=await k.custom({url:"",method:"get",meta:{operation:"districts",variables:{key:{value:ce,type:"String",required:!1},region:{value:$,type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});F(Te.results),M(!1)},A=async($="")=>{const{data:ce}=await k.custom({url:"",method:"get",meta:{operation:"regions",variables:{key:{value:$,type:"String",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});_(ce.results),a.form.setFieldsValue({district:void 0,ward:void 0})},y=async $=>{V($),S($)},n=async $=>{T($),l($)},m=async($="")=>{const{data:ce}=await k.custom({url:"",method:"get",meta:{operation:"schoolsTypes",variables:{key:{value:$,type:"String",required:!1},excludeAssigned:{value:!0,type:"Boolean",required:!1},schoolId:{value:parseInt(a.school.id),type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});u(ce.results)},O=$=>{j($)};return t.useEffect(()=>{var $,ce,Te,it,rt,lt,ot,ct,dt,ut,mt,ht,xt,pt,gt,yt,jt,ft,St,vt,Ct,bt,It,At,kt,Ft,Nt,Tt,qt,Pt;m(),f(),A(),A((it=(Te=(ce=($=a.school)==null?void 0:$.ward)==null?void 0:ce.district)==null?void 0:Te.region)==null?void 0:it.name),y(parseInt((ot=(lt=(rt=a.school)==null?void 0:rt.ward)==null?void 0:lt.district)==null?void 0:ot.region.id)),M(!1),n(parseInt((dt=(ct=a.school)==null?void 0:ct.ward)==null?void 0:dt.district.id)),v(!1),a.form.setFieldsValue({name:(ut=a.school)==null?void 0:ut.name,serial_number:(mt=a.school)==null?void 0:mt.serialNumber,ownership_id:(xt=(ht=a.school)==null?void 0:ht.ownership)==null?void 0:xt.id,school_type_id:(gt=(pt=a.school)==null?void 0:pt.schoolType)==null?void 0:gt.id,region_id:(St=(ft=(jt=(yt=a.school)==null?void 0:yt.ward)==null?void 0:jt.district)==null?void 0:ft.region)==null?void 0:St.id,district_id:(bt=(Ct=(vt=a.school)==null?void 0:vt.ward)==null?void 0:Ct.district)==null?void 0:bt.id,ward_id:(At=(It=a.school)==null?void 0:It.ward)==null?void 0:At.id,longitude:(kt=a.school)==null?void 0:kt.longitude,latitude:(Ft=a.school)==null?void 0:Ft.latitude,bio:(Nt=a.school)==null?void 0:Nt.bio,logo:(Tt=a.school)==null?void 0:Tt.logo,is_universal:(qt=a.school)==null?void 0:qt.isUniversal,njiwa_account:(Pt=a.school)==null?void 0:Pt.hasNjiwaAccount})},[a.randKey]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:$=>{$.schoolTypes=d,$.id=a.school.id,$.is_active=a.school.isActive,a.onFinish($)},requiredMark:!1,initialValues:{name:(p=a.school)==null?void 0:p.name,serial_number:(c=a.school)==null?void 0:c.serialNumber,ownership_id:(G=(Z=a.school)==null?void 0:Z.ownership)==null?void 0:G.id,school_type_id:(L=(J=a.school)==null?void 0:J.schoolType)==null?void 0:L.id,region_id:(Ie=(ie=(Y=(C=a.school)==null?void 0:C.ward)==null?void 0:Y.district)==null?void 0:ie.region)==null?void 0:Ie.id,district_id:(Me=(He=(Ve=a.school)==null?void 0:Ve.ward)==null?void 0:He.district)==null?void 0:Me.id,ward_id:(We=(qe=a.school)==null?void 0:qe.ward)==null?void 0:We.id,longitude:(H=a.school)==null?void 0:H.longitude,latitude:(Q=a.school)==null?void 0:Q.latitude,bio:(pe=a.school)==null?void 0:pe.bio,logo:(ge=a.school)==null?void 0:ge.logo,is_universal:(Ne=a.school)==null?void 0:Ne.isUniversal,njiwa_account:(De=a.school)==null?void 0:De.hasNjiwaAccount},children:[e.jsxs(ee,{children:[e.jsxs(W,{span:11,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{name:"serial_number",label:"Serial Number",rules:[{required:!0,type:"string",message:"Please input Serial Number ..."}],children:e.jsx(D,{size:"large",placeholder:"Enter Serial Number ..."})}),e.jsx(i.Item,{label:"School Type",rules:[{required:!0,type:"string",message:"Please choose School Type"}],children:e.jsx(fe,{mode:"multiple",showSearch:!0,size:"large",placeholder:"Select a School Type",optionFilterProp:"children",onChange:O,onSearch:$=>{},filterOption:($,ce)=>ce.children.toLowerCase().includes($.toLowerCase()),dropdownStyle:{zIndex:9999},children:s.map(($,ce)=>e.jsx(ze,{value:$.id,children:$.name}))})}),e.jsx(i.Item,{name:"ownership_id",label:"School Ownership",rules:[{required:!0,type:"string",message:"Please choose Ownership"}],children:e.jsx(fe,{showSearch:!0,size:"large",placeholder:"Select a Ownership",optionFilterProp:"children",onChange:$=>{},onSearch:$=>{},filterOption:($,ce)=>ce.children.toLowerCase().includes($.toLowerCase()),dropdownStyle:{zIndex:9999},children:r.map(($,ce)=>e.jsx(ze,{value:$.id,children:$.name}))})}),e.jsx(i.Item,{name:"bio",label:"Biography",style:{marginBottom:"12px"},children:e.jsx(Xs,{rows:4})}),e.jsx(i.Item,{name:"logo",label:"Logo",style:{marginBottom:"12px"},children:e.jsx(Ee,{beforeUpload:()=>!1,maxCount:1,onChange:$=>{const ce=$.file;E?E.uid!==ce.uid&&(R(ce),z(!0)):(R(ce),z(!0))},onRemove:()=>{R(void 0),z(!1)},accept:"image/*",children:e.jsx(N,{icon:e.jsx(we,{}),size:"large",children:"Click to Select"})})})]}),e.jsxs(W,{span:11,offset:2,children:[e.jsx(i.Item,{name:"region_id",label:"Region",rules:[{required:!0,type:"string",message:"Please Choose Region ..."}],children:e.jsx(fe,{showSearch:!0,size:"large",placeholder:"Select a region",optionFilterProp:"children",onChange:$=>{y(parseInt($)),a.form.resetFields(["district_id","ward_id"]),a.form.setFieldsValue({district_id:void 0,ward_id:void 0}),F([]),b([])},onSearch:$=>{$.length>2&&A($)},filterOption:($,ce)=>ce.children.toLowerCase().includes($.toLowerCase()),dropdownStyle:{zIndex:9999},children:P.map(($,ce)=>e.jsx(ze,{value:$.id,children:$.name}))})}),e.jsx(i.Item,{name:"district_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"District"}),e.jsx(Fe,{spinning:w})]}),rules:[{required:!0,type:"string",message:"Please Choose District ..."}],children:e.jsx(fe,{showSearch:!0,size:"large",disabled:w||q.length===0,placeholder:"Select a district",optionFilterProp:"children",onChange:$=>{n(parseInt($)),a.form.setFieldsValue({ward:void 0}),b([])},onSearch:$=>{$.length>2&&x!==0&&S(x,$)},filterOption:($,ce)=>ce.children.toLowerCase().includes($.toLowerCase()),dropdownStyle:{zIndex:9999},children:q.map(($,ce)=>e.jsx(ze,{value:$.id,children:$.name}))})}),e.jsx(i.Item,{name:"ward_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Ward"}),e.jsx(Fe,{spinning:I})]}),children:e.jsx(fe,{showSearch:!0,size:"large",disabled:I||g.length===0,placeholder:"Select a ward",optionFilterProp:"children",onChange:$=>{},onSearch:$=>{$.length>2&&l(B,$)},filterOption:($,ce)=>ce.children.toLowerCase().includes($.toLowerCase()),dropdownStyle:{zIndex:9999},children:g.map(($,ce)=>e.jsx(ze,{value:$.id,children:$.name}))})}),e.jsx(i.Item,{name:"website",label:"Website",rules:[{required:!1,type:"url",message:"Please input Website Address ..."}],children:e.jsx(D,{size:"large",placeholder:"Enter Website Address ..."})}),e.jsx(i.Item,{name:"latitude",label:"Latitude",rules:[{required:!1,type:"string",message:"Please input Latitude ..."}],children:e.jsx(D,{size:"large",placeholder:"Enter Latitude..."})}),e.jsx(i.Item,{name:"longitude",label:"Longitude",rules:[{required:!1,type:"string",message:"Please input Longitude ..."}],children:e.jsx(D,{size:"large",placeholder:"Enter Longitude..."})}),e.jsx(i.Item,{name:"is_universal",valuePropName:"checked",children:e.jsx(xe,{children:"Universal"})}),e.jsx(i.Item,{name:"njiwa_account",valuePropName:"checked",children:e.jsx(xe,{disabled:(nt=a.school)==null?void 0:nt.hasNjiwaAccount,children:"Auto Create Njiwa Account"})})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},ta=a=>{const[s,u]=t.useState([]),[r,h]=t.useState(!0),[g,b]=t.useState(1);t.useState(25);const[q]=i.useForm(),[F,P]=t.useState(0),[_,x]=t.useState(0),[V,B]=t.useState(!0);ne(),t.useState(!1),t.useState(!1),t.useState();const T=async R=>{const{data:U}=await k.custom({url:"",method:"post",meta:{operation:"addSchoolAdminstrator",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0},userId:{value:parseInt(R.toString()),type:"Int",required:!0}},fields:["success","message",{member:["id",{school:["id","name"]},{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}});o.remove(),U.success?(o.success(U.message),u(s.filter(z=>z.id.toString()!==R.toString())),a.onAdd(U.member)):o.error(U.message),$e.destroyAll()},E=async(R,U="",z=!1)=>{const{data:w}=await k.custom({url:"",method:"get",meta:{operation:"notSchoolAdminstrators",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0},page:{value:R,type:"Int",required:!0},key:{value:U,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","firstName","middleName","lastName","fullName","email","pic","created","updated","isActive","canEdit","canDelete","canManage"]}]}});x(w.total),P(w.pages),b(w.page),B(w.hasNext),u([...s,...w.results]),h(!1)};return t.useEffect(()=>{s.length=0,u([]),E(1)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsx(W,{span:24,children:e.jsx(i,{layout:"vertical",form:q,onFinish:R=>{s.length=0,u([]),E(1,R.key,!0)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search Adminstrator(s)...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(Fe,{spinning:r,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"80vh",overflowY:"auto"},children:e.jsx(Ce,{itemLayout:"horizontal",dataSource:s,renderItem:R=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Ce.Item,{style:{margin:0,padding:0},actions:[e.jsx(X,{placement:"topLeft",title:"Adding "+R.fullName+" to "+a.school.name+"?",onConfirm:()=>T(R.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Ot,{})})})],children:e.jsx(Ce.Item.Meta,{avatar:e.jsx(Re,{src:R.pic}),title:e.jsx("a",{children:R.fullName}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:R.email})})})},"file-"+R.id)})})}),V&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(N,{type:"primary",onClick:()=>{E(g+1)},children:"Load More"})})]})]})},{Option:sa}=fe,aa=["female","male","others"],na=a=>{const[s,u]=t.useState(!1),[r,h]=t.useState(!1),[g,b]=t.useState(!1),[q,F]=t.useState(!1),[P,_]=t.useState(),[x]=i.useForm(),V=async B=>{F(!0);const{data:T}=await k.custom({url:"",method:"post",meta:{operation:"createSchoolAdminstratorPlain",variables:{schoolId:{value:parseInt(B.school_id),type:"Int",required:!0},firstName:{value:B.first_name,type:"String",required:!0},middleName:{value:B.middle_name,type:"String",required:!0},lastName:{value:B.last_name,type:"String",required:!0},phoneNumber:{value:B.phone_number,type:"String",required:!0},email:{value:B.email,type:"String",required:!1},gender:{value:B.gender,type:"String",required:!1}},fields:["success","message","memberExists","existSameSchool","existSameSchoolNotAuthenticated",{member:["id",{school:["id","name"]},{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}}).catch(E=>(o.error("Error in Creating School Adminstrator"),{data:null})).then(E=>E);T&&(T.success?(o.success(T.message),a.onFinish(T.member)):(o.error(T.message),_(T.message),u(T.memberExists),h(T.existSameSchool),b(T.existSameSchoolNotAuthenticated))),F(!1)};return t.useEffect(()=>{},[a.randKey]),e.jsxs(e.Fragment,{children:[P&&e.jsx(wt,{description:e.jsx(e.Fragment,{children:P}),type:"error",closable:!0}),e.jsxs(i,{layout:"vertical",form:x,onFinish:B=>{B.school_id=a.school.id,V(B)},requiredMark:!0,autoComplete:"off",initialValues:{remember:!1,email:"",password:""},children:[e.jsx(i.Item,{name:"first_name",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter First Name ..."})}),e.jsx(i.Item,{name:"middle_name",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(i.Item,{name:"last_name",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(i.Item,{label:"Gender",name:"gender",rules:[{required:!0,type:"string",message:"Please choose Gender..."}],children:e.jsx(fe,{size:"large",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onSearch:B=>{},filterOption:(B,T)=>T.children.toLowerCase().includes(B.toLowerCase()),dropdownStyle:{zIndex:9999},children:aa.map((B,T)=>e.jsx(sa,{value:B,children:B.charAt(0).toUpperCase()+B.slice(1)}))})}),e.jsx(i.Item,{name:"phone_number",label:"Mobile Phone Number",rules:[{required:!0,type:"string",message:"Please input Mobile Phone Number"}],children:e.jsx(D,{size:"large",placeholder:"Enter Mobile Phone Number ..."})}),e.jsx(i.Item,{name:"email",label:"Email Address",rules:[{required:!0,type:"string",message:"Please input Email Address ..."}],children:e.jsx(D,{size:"large",placeholder:"Enter First Name ..."})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(N,{type:"primary",size:"large",color:"red",onClick:()=>{x.resetFields()},danger:!0,children:"Clear"}),e.jsx(N,{size:"large",htmlType:"submit",disabled:q,loading:q,danger:!0,children:"Save"})]})]})]})},ia=a=>{const[s,u]=t.useState([]),[r,h]=t.useState(!0),[g,b]=t.useState(1),[q,F]=t.useState(25),[P,_]=t.useState(""),[x]=i.useForm(),[V,B]=t.useState(0),[T,E]=t.useState(0),[R,U]=t.useState(!0);ne();const[z,w]=t.useState(!1),[M,I]=t.useState(!1),v=()=>{w(!0)},d=A=>{u([A,...s])},j=async A=>{const{data:y}=await k.custom({url:"",method:"post",meta:{operation:"removeSchoolAdminstrator",variables:{id:{value:A,type:"Int",required:!0}},fields:["success","message"]}});y.success?(o.success(y.message),u(s.filter(n=>n.id.toString()!==A.toString()))):o.error(y.message),$e.destroyAll()},f=async A=>{const{data:y}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchoolMember",variables:{id:{value:A,type:"Int",required:!0}},fields:["success","message"]}});y.success?(o.success(y.message),u(s.filter(n=>n.id.toString()!==A.toString()))):o.error(y.message),$e.destroyAll()},l=async(A,y="",n=20)=>{const{data:m}=await k.custom({url:"",method:"get",meta:{operation:"schoolMembers",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0},adminstrator:{value:!0,type:"Boolean",required:!0},page:{value:A,type:"Int",required:!0},key:{value:y,type:"String",required:!1},pageSize:{value:n,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{school:["id","name"]},{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}});E(m.total),B(m.pages),b(m.page),U(m.hasNext),u([...s,...m.results]),h(!1)},S=A=>{u([A,...s]),I(!1)};return t.useEffect(()=>{s.length=0,u([]),l(1,"",20)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(W,{span:16,children:e.jsx(i,{layout:"vertical",form:x,onFinish:A=>{_(A.key),l(0,A.key,q)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search Adminstrator(s)...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(W,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(N,{size:"large",icon:e.jsx(je,{}),onClick:v,children:"Enroll"}),e.jsx(N,{size:"large",icon:e.jsx(je,{}),onClick:()=>I(!0),children:"Register New"})]})]}),e.jsxs(Fe,{spinning:r,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"65vh",overflowY:"auto"},children:e.jsx(Ce,{itemLayout:"horizontal",dataSource:s,renderItem:A=>{var y,n,m;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Ce.Item,{style:{margin:0,padding:0},actions:[e.jsx(st,{trigger:["click"],placement:"bottomRight",overlay:e.jsxs(be,{children:[e.jsx(be.Item,{disabled:!A.canDelete,icon:e.jsx(de,{}),children:e.jsx(X,{placement:"topRight",title:"Are you sure you want to delete this adminstrator?",onConfirm:()=>f(parseInt(A.id.toString())),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(be.Item,{icon:e.jsx(_t,{}),children:e.jsx(X,{placement:"topRight",title:"Are you sure you want to Remove Adminstrator Role?",onConfirm:()=>j(parseInt(A.id.toString())),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove Adminstrator Role"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:O=>O.preventDefault(),children:e.jsx(at,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(Ce.Item.Meta,{avatar:e.jsx(Re,{src:(y=A.user)==null?void 0:y.pic}),title:e.jsx("a",{children:(n=A.user)==null?void 0:n.fullName}),description:e.jsx(e.Fragment,{children:e.jsx("p",{children:(m=A.user)==null?void 0:m.email})})})},"file-"+A.id)})}})}),R&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(N,{type:"primary",onClick:()=>{l(g+1,P)},children:"Load More"})})]}),e.jsx(Ue,{title:"Adding School Adminstrators",width:"30vw",onClose:A=>w(A),open:z,anchor:"right",children:e.jsx(ta,{randKey:Math.random(),school:a.school,onAdd:d})}),e.jsx(Ue,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Registering School Adminstrators"}),e.jsx(ae,{color:"green",style:{marginLeft:10},children:a.school.name})]}),width:"40vw",onClose:A=>I(A),open:M,children:e.jsx(na,{school:a.school,randKey:Math.random(),onFinish:S})})]})},{Option:Le}=fe,{TextArea:ra}=D,la=a=>{const[s,u]=t.useState([]),[r,h]=t.useState([]),[g,b]=t.useState([]),[q,F]=t.useState([]),[P,_]=t.useState([]),[x,V]=t.useState(0),[B,T]=t.useState(0),[E,R]=t.useState(),[U,z]=t.useState(!1),[w,M]=t.useState(!1),[I,v]=t.useState(!1),[d,j]=t.useState([]),f=async(p=1,c="")=>{const{data:Z}=await k.custom({url:"",method:"get",meta:{operation:"ownerships",variables:{page:{value:p,type:"Int",required:!0},key:{value:c,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(Z.results)},l=async(p,c="")=>{v(!0);const{data:Z}=await k.custom({url:"",method:"get",meta:{operation:"wards",variables:{key:{value:c,type:"String",required:!1},district:{value:p,type:"Int",requiqred:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});b(Z.results),v(!1)},S=async(p,c="")=>{M(!0);const{data:Z}=await k.custom({url:"",method:"get",meta:{operation:"districts",variables:{key:{value:c,type:"String",required:!1},region:{value:p,type:"Int",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});F(Z.results),M(!1)},A=async(p="")=>{const{data:c}=await k.custom({url:"",method:"get",meta:{operation:"regions",variables:{key:{value:p,type:"String",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});_(c.results),a.form.setFieldsValue({district:void 0,ward:void 0})},y=async(p="")=>{const{data:c}=await k.custom({url:"",method:"get",meta:{operation:"schoolsTypes",variables:{key:{value:p,type:"String",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});u(c.results)},n=async p=>{V(p),S(p)},m=async p=>{T(p),l(p)},O=p=>{j(p)};return t.useEffect(()=>{y(),f(),A()},[]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:p=>{p.schoolTypes=d,a.onFinish(p)},requiredMark:!0,children:[e.jsxs(ee,{children:[e.jsxs(W,{span:11,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{name:"serial_number",label:"Serial Number",rules:[{required:!0,type:"string",message:"Please input Serial Number ..."}],children:e.jsx(D,{size:"large",placeholder:"Enter Serial Number ..."})}),e.jsx(i.Item,{label:"School Type",name:"schoolTypes",rules:[{required:!0,type:"array",message:"Please choose School Type"}],children:e.jsx(fe,{size:"large",mode:"multiple",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onChange:O,onSearch:p=>{},filterOption:(p,c)=>c.children.toLowerCase().includes(p.toLowerCase()),dropdownStyle:{zIndex:9999},children:s.map((p,c)=>e.jsx(Le,{value:p.id,children:p.name}))})}),e.jsx(i.Item,{name:"ownership_id",label:"School Ownership",rules:[{required:!0,type:"string",message:"Please choose Ownership"}],children:e.jsx(fe,{size:"large",showSearch:!0,placeholder:"Select a Ownership",optionFilterProp:"children",onChange:p=>{},onSearch:p=>{},filterOption:(p,c)=>c.children.toLowerCase().includes(p.toLowerCase()),dropdownStyle:{zIndex:9999},children:r.map((p,c)=>e.jsx(Le,{value:p.id,children:p.name}))})}),e.jsx(i.Item,{name:"bio",label:"Biography",style:{marginBottom:"12px"},children:e.jsx(ra,{rows:4})}),e.jsx(i.Item,{name:"logo",label:"Logo",style:{marginBottom:"12px"},children:e.jsx(Ee,{beforeUpload:()=>!1,maxCount:1,onChange:p=>{const c=p.file;E?E.uid!==c.uid&&(R(c),z(!0)):(R(c),z(!0))},onRemove:()=>{R(void 0),z(!1)},accept:"image/*",children:e.jsx(N,{icon:e.jsx(we,{}),children:"Click to Select"})})})]}),e.jsxs(W,{span:11,offset:2,children:[e.jsx(i.Item,{name:"region_id",label:"Region",rules:[{required:!0,type:"string",message:"Please Choose Region ..."}],children:e.jsx(fe,{size:"large",showSearch:!0,placeholder:"Select a region",optionFilterProp:"children",onChange:p=>{n(parseInt(p)),a.form.setFieldsValue({district:void 0,ward:void 0}),F([]),b([])},onSearch:p=>{p.length>2&&A(p)},filterOption:(p,c)=>c.children.toLowerCase().includes(p.toLowerCase()),dropdownStyle:{zIndex:9999},children:P.map((p,c)=>e.jsx(Le,{value:p.id,children:p.name}))})}),e.jsx(i.Item,{name:"district_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"District"}),e.jsx(Fe,{spinning:w})]}),rules:[{required:!0,type:"string",message:"Please Choose District ..."}],children:e.jsx(fe,{size:"large",showSearch:!0,disabled:w||q.length===0,placeholder:"Select a district",optionFilterProp:"children",onChange:p=>{m(parseInt(p)),a.form.setFieldsValue({ward:void 0}),b([])},onSearch:p=>{p.length>2&&x!==0&&S(x,p)},filterOption:(p,c)=>c.children.toLowerCase().includes(p.toLowerCase()),dropdownStyle:{zIndex:9999},children:q.map((p,c)=>e.jsx(Le,{value:p.id,children:p.name}))})}),e.jsx(i.Item,{name:"ward_id",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Ward"}),e.jsx(Fe,{spinning:I})]}),children:e.jsx(fe,{size:"large",showSearch:!0,disabled:I||g.length===0,placeholder:"Select a ward",optionFilterProp:"children",onChange:p=>{},onSearch:p=>{p.length>2&&l(B,p)},filterOption:(p,c)=>c.children.toLowerCase().includes(p.toLowerCase()),dropdownStyle:{zIndex:9999},children:g.map((p,c)=>e.jsx(Le,{value:p.id,children:p.name}))})}),e.jsx(i.Item,{name:"website",label:"Website",rules:[{required:!1,type:"url",message:"Please input Website Address ..."}],children:e.jsx(D,{size:"large",placeholder:"Enter Website Address ..."})}),e.jsx(i.Item,{name:"latitude",label:"Latitude",rules:[{required:!1,type:"string",message:"Please input Latitude ..."}],children:e.jsx(D,{size:"large",placeholder:"Enter Latitude..."})}),e.jsx(i.Item,{name:"longitude",label:"Longitude",rules:[{required:!1,type:"string",message:"Please input Longitude ..."}],children:e.jsx(D,{size:"large",placeholder:"Enter Longitude..."})}),e.jsx(i.Item,{name:"is_universal",valuePropName:"checked",children:e.jsx(xe,{children:"Universal"})}),e.jsx(i.Item,{name:"njiwa_account",valuePropName:"checked",children:e.jsx(xe,{children:"Auto Create Njiwa Account"})})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},oa=a=>{const[s]=i.useForm(),[u,r]=t.useState(),[h,g]=t.useState(!1),b=async q=>{const{data:F}=await k.custom({url:"",method:"post",meta:{operation:"createSchoolContract",variables:{contractNumber:{value:q.contract_number,type:"String",required:!0},contractValue:{value:q.contract_value,type:"Float",required:!0},startDate:{value:q.start_date,type:"String",required:!0},endDate:{value:q.end_date,type:"String",required:!0},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0},contractDocument:{value:u,type:"Upload",required:!0}},fields:["success","message"]}});F.success?(o.success(F.message),a.onFinish(),s.resetFields()):o.error(F.message)};return t.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:s,onFinish:q=>{b(q)},requiredMark:!0,children:[e.jsx(i.Item,{name:"contract_number",label:"Contract Number",rules:[{required:!0,type:"string",message:"Please input Contract Number ..."}],children:e.jsx(D,{size:"large",placeholder:"Enter Contract Number ..."})}),e.jsx(i.Item,{name:"contract_value",label:"Contract Value",rules:[{required:!0,type:"number",message:"Please input Contract Value ..."}],children:e.jsx(Pe,{min:0,defaultValue:0,onChange:()=>{},size:"large",style:{width:"100%"}})}),e.jsx(i.Item,{name:"start_date",label:"Contract Start Date",rules:[{required:!0,type:"object",message:"Please input Contract Start Date ..."}],children:e.jsx(Qe,{onChange:()=>{},popupStyle:{zIndex:9999}})}),e.jsx(i.Item,{name:"end_date",label:"Contract End Date",rules:[{required:!0,type:"object",message:"Please input Contract End Date ..."}],children:e.jsx(Qe,{onChange:()=>{},popupStyle:{zIndex:9999}})}),e.jsx(i.Item,{name:"contract_document",label:"Contract Document",style:{marginBottom:"12px"},rules:[{required:!h,type:"object",message:"Please Pick a Contract Document ..."}],children:e.jsx(Ee,{beforeUpload:()=>!1,maxCount:1,onChange:q=>{const F=q.file;u?u.uid!==F.uid&&(r(F),g(!0)):(r(F),g(!0))},onRemove:()=>{r(void 0),g(!1)},accept:".pdf",children:e.jsx(N,{icon:e.jsx(we,{}),children:"Click to Select"})})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20},children:[e.jsx(N,{size:"large",icon:e.jsx(Oe,{}),onClick:()=>{r(void 0),g(!1),s.resetFields()},danger:!0,children:"Reset"}),e.jsx(N,{size:"large",htmlType:"submit",icon:e.jsx(Oe,{}),danger:!0,children:"Save"})]})]})})},ca=a=>{const[s]=i.useForm(),[u,r]=t.useState([]),[h,g]=t.useState(),[b,q]=t.useState(!1),[F,P]=t.useState(1),[_,x]=t.useState(0),[V,B]=t.useState(!1);t.useState(!1);const[T,E]=t.useState(""),[R,U]=t.useState(!1),z=[{title:"Contract Number",dataIndex:"contractNumber",key:"contractNumber",render:(I,v)=>e.jsxs(e.Fragment,{children:[e.jsx("a",{children:I}),v.contractDocument&&e.jsx(ye,{title:"Click to Download Contract Document",children:e.jsx(N,{size:"small",style:{marginLeft:5},danger:!0,onClick:()=>{window.open(v.contractDocument)},children:e.jsx($t,{})})})]})},{title:"Start Date",dataIndex:"startDate",key:"startDate",render:I=>e.jsx(e.Fragment,{children:ke(I).format("lll")})},{title:"End Date",dataIndex:"endDate",key:"endDate",render:I=>e.jsx(e.Fragment,{children:ke(I).format("lll")})},{title:"Contract Value",dataIndex:"contractValue",key:"contractValue"},{title:"Created",dataIndex:"created",key:"created",render:I=>e.jsx(e.Fragment,{children:ke(I).format("lll")})},{title:"Created",dataIndex:"created",key:"created",render:I=>e.jsx(e.Fragment,{children:ke(I).format("lll")})},{title:"",dataIndex:"actions",key:"actions",render:(I,v)=>e.jsxs(e.Fragment,{children:[e.jsx(N,{size:"small",onClick:()=>{g(v)},danger:!0,icon:e.jsx(Se,{})}),e.jsx(X,{title:"Delete the contract?",placement:"topRight",onConfirm:()=>M(v.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{size:"small",danger:!0,icon:e.jsx(de,{})})})]})}],w=async(I,v="",d=20)=>{const{data:j}=await k.custom({url:"",method:"get",meta:{operation:"schoolContracts",variables:{page:{value:I,type:"Int",required:!0},pageSize:{value:d,type:"Int",required:!0},key:{value:v,type:"String",required:!1},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","contractNumber","contractValue","contractDocument","startDate","endDate","created","updated","isActive","canEdit","canDelete","canManage"]}]}});P(j.page),x(j.total),B(j.hasNext),r(j.results),q(!1)},M=async I=>{const{data:v}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchoolContract",variables:{id:{value:I,type:"Int",required:!0}},fields:["success","message"]}});v.success?(o.success(v.message),w(F,T)):o.error(v.message)};return t.useEffect(()=>{w(F,T)},[a.randKey,a.school]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:10,children:e.jsx(i,{layout:"vertical",form:s,onFinish:I=>{},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:14,style:{textAlign:"right"},children:e.jsx(N,{icon:e.jsx(je,{}),size:"large",onClick:()=>{U(!0)},danger:!0,children:"Add Contract"})})]}),e.jsx(le,{dataSource:u,columns:z}),e.jsx(Ue,{title:"Adding New Contract",anchor:"right",width:"35vw",onClose:I=>U(I),open:R,children:e.jsx(oa,{school:a.school,onFinish:()=>{U(!1),w(1,"")}})})]})},da=a=>{const[s]=i.useForm(),u=async r=>{const{data:h}=await k.custom({url:"",method:"post",meta:{operation:"createSchoolNjiwaAccountBilling",variables:{amount:{value:r.amount,type:"Float",required:!1},units:{value:0,type:"Int",required:!1},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0}},fields:["success","message",{bill:["id",{account:["id"]},"billNumber","amount","units","source",{creator:["id","fullName","firstName","middleName","lastName","email","phone"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(g=>({data:null})).then(g=>g);h&&(h.success?(o.success(h.message),a.onFinish(h.bill)):o.error(h.message))};return t.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:s,onFinish:r=>{u(r)},requiredMark:!0,children:[e.jsx(i.Item,{name:"amount",label:"Amount",rules:[{required:!0,type:"number",message:"Please input Amount"}],children:e.jsx(Pe,{min:1,style:{width:"50%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",htmlType:"submit",danger:!0,icon:e.jsx(Oe,{}),children:"Save"})})]})})},ua=a=>{const[s]=i.useForm(),u=async r=>{const{data:h}=await k.custom({url:"",method:"post",meta:{operation:"createSchoolNjiwaAccountBilling",variables:{amount:{value:0,type:"Float",required:!1},units:{value:r.units,type:"Int",required:!1},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0}},fields:["success","message",{bill:["id",{account:["id"]},"billNumber","amount","units","source",{creator:["id","fullName","firstName","middleName","lastName","email","phone"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(g=>({data:null})).then(g=>g);h&&(h.success?(o.success(h.message),a.onFinish(h.bill)):o.error(h.message))};return t.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:s,onFinish:r=>{u(r)},requiredMark:!0,children:[e.jsx(i.Item,{name:"units",label:"Unit",rules:[{required:!0,type:"number",message:"Please input Unit"}],children:e.jsx(Pe,{min:1,style:{width:"50%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",htmlType:"submit",danger:!0,icon:e.jsx(Oe,{}),children:"Save"})})]})})},{Title:zt,Text:Lt}=Ke,ma=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(!1),[q,F]=t.useState(!1),[P,_]=t.useState(!1),[x,V]=t.useState(!1),[B,T]=t.useState(!1),E=async(d,j="",f=20)=>{const{data:l}=await k.custom({url:"",method:"get",meta:{operation:"schoolNjiwaAccountBillings",variables:{page:{value:d,type:"Int",required:!0},key:{value:j,type:"String",required:!1},pageSize:{value:f,type:"Int",required:!1},schoolId:{value:parseInt(a.school.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{account:["id"]},"billNumber","amount","units","source","synced",{creator:["id","fullName","firstName","middleName","lastName","email","phone"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(S=>(o.error("Error occured while fetching Bills"),{data:null})).then(S=>S);l&&h([...l.results]),b(!1)},R=async()=>{T(!0);const{data:d}=await k.custom({url:"",method:"post",meta:{operation:"ressetNjiwaAccount",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0}},fields:["success","message"]}}).catch(j=>({data:null})).then(j=>j);d&&(d.success?(o.success(d.message),I(),E(1)):o.error(d.message)),T(!1)},U=async d=>{const{data:j}=await k.custom({url:"",method:"post",meta:{operation:"deleteNjiwaAccountBilling",variables:{billId:{value:parseInt(d.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(f=>({data:null})).then(f=>f);j&&(j.success?(o.success(j.message),I(),E(1)):o.error(j.message))},z=async()=>{V(!0);const{data:d}=await k.custom({url:"",method:"post",meta:{operation:"syncNjiwaAccount",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0}},fields:["success","message"]}}).catch(j=>({data:null})).then(j=>j);d&&(d.success?(o.success(d.message),I()):o.error(d.message)),V(!1)},w=async d=>{h([d,...r]),F(!1),I()},M=async d=>{h([d,...r]),_(!1),I()},I=async()=>{const{data:d}=await k.custom({url:"",method:"get",meta:{operation:"njiwaAccount",variables:{schoolId:{value:parseInt(a.school.id),type:"Int",required:!0}},fields:["id","balance","messageUnits"]}}).catch(j=>({data:null})).then(j=>j);d&&u(d)},v=[{title:"Bill Number",dataIndex:"bill_number",key:"billNumber",render:(d,j,f)=>e.jsxs("span",{children:[e.jsx("span",{style:{marginRight:3},children:j.billNumber}),j.synced&&e.jsx(ae,{color:"green",children:"Synced"}),!j.synced&&e.jsx(ae,{color:"red",children:"Not Synced"})]})},{title:"Amount",dataIndex:"amount",key:"amount",render:(d,j,f)=>e.jsx("span",{children:j.amount})},{title:"Units",dataIndex:"units",key:"units",render:(d,j,f)=>e.jsx("span",{children:j.units})},{title:"Paid",dataIndex:"isPaid",key:"isPaid",render:(d,j,f)=>e.jsx("span",{children:j.isPaid?"Yes":"No"})},{title:"Source",dataIndex:"source",key:"source",render:(d,j,f)=>e.jsx("span",{children:j.source})},{title:"",dataIndex:"actions",key:"actions",render:(d,j,f)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure delete this bill - > "+j.billNumber+"?",placement:"topRight",onConfirm:()=>U(j.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{danger:!0,icon:e.jsx(de,{})})}),!j.synced&&e.jsx(N,{danger:!0,icon:e.jsx(ve,{}),style:{marginLeft:5}})]})}];return t.useEffect(()=>{I(),E(1,"",20)},[a.randKey,a.school]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsxs(W,{span:24,style:{display:"flex",justifyContent:"space-between",marginBottom:5},children:[e.jsx("span",{children:e.jsx(X,{title:"Are you sure you want to reset the account?",onConfirm:()=>R(),onCancel:()=>{},okText:"Reset",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Zt,{}),danger:!0,loading:x,children:"Reset"})})}),e.jsxs("span",{children:[e.jsx(N,{icon:e.jsx(je,{}),danger:!0,onClick:()=>F(!0),children:"Balance"}),e.jsx(N,{icon:e.jsx(je,{}),danger:!0,onClick:()=>_(!0),children:"Units"}),e.jsx(N,{icon:e.jsx(ve,{}),danger:!0,onClick:z,loading:x,children:"Sync"})]})]})}),e.jsxs(ee,{children:[e.jsx(W,{span:8,children:e.jsx(Je,{loading:g,active:!0,children:e.jsx(_e,{hoverable:!0,style:{marginRight:10},onClick:()=>{},children:e.jsxs(Be,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(zt,{level:2,children:s==null?void 0:s.balance}),e.jsx(Lt,{children:"Balance"})]})})})}),e.jsx(W,{span:8,children:e.jsx(Je,{loading:g,active:!0,children:e.jsx(_e,{hoverable:!0,style:{marginRight:10},onClick:()=>{},children:e.jsxs(Be,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(zt,{level:2,children:s==null?void 0:s.messageUnits}),e.jsx(Lt,{children:"Units"})]})})})})]}),e.jsx(ee,{style:{marginTop:10},children:e.jsxs(W,{span:24,children:[e.jsx(le,{columns:v,dataSource:r}),","]})}),e.jsx(te,{title:"Add Balance",width:"40vw",open:q,onClose:d=>F(d),children:e.jsx(da,{school:a.school,onFinish:w})}),e.jsx(te,{title:"Add Units",width:"40vw",open:P,onClose:d=>_(d),children:e.jsx(ua,{school:a.school,onFinish:M})})]})},ha=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState([]),[q,F]=t.useState([]),[P,_]=t.useState(1),[x,V]=t.useState(0),[B,T]=t.useState(20),[E,R]=t.useState(""),[U,z]=t.useState(!1),[w,M]=t.useState(!0);ne();const[I,v]=t.useState(!1),[d,j]=t.useState(!1),[f,l]=t.useState(!1),[S]=i.useForm(),[A]=i.useForm(),[y,n]=t.useState(!1),[m,O]=t.useState(!1),[p,c]=t.useState(!1),Z=async H=>{u(H),c(!0)},G=H=>{u(H),O(!0)},J=H=>{u(H),n(!0)},L=H=>{u(H),l(!0)},C=H=>{u(H),j(!0)},Y=()=>{v(!0)},ie=async H=>{const{data:Q}=await k.custom({url:"",method:"post",meta:{operation:"createSchool",variables:{name:{value:H.name,type:"String",required:!0},serialNumber:{value:H.serial_number,type:"String",required:!0},ownershipId:{value:parseInt(H.ownership_id),type:"Int",required:!0},schoolTypes:{value:H.schoolTypes,type:"[String]",required:!0},regionId:{value:parseInt(H.region_id),type:"Int",required:!1},districtId:{value:parseInt(H.district_id),type:"Int",required:!1},wardId:{value:parseInt(H.ward_id),type:"Int",required:!1},bio:{value:H.bio,type:"String",required:!1},website:{value:H.website,type:"String",required:!1},longitude:{value:H.longitude,type:"Float",required:!1},latitude:{value:H.latitude,type:"Float",required:!1},isUniversal:{value:H.is_universal,type:"Boolean",required:!1},njiwaAccount:{value:H.njiwa_account,type:"Boolean",required:!1}},fields:["success","message",{school:["id","name","serialNumber","hasNjiwaAccount",{region:["id","name"]},{district:["id","name"]},{ownership:["id","name"]},{schoolType:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},"latitude","longitude","bio","logo","created","updated","isActive","isUniversal","canEdit","canDelete","canManage"]}]}});Q.success?(o.success(Q.message),h([Q.school,...r]),v(!1),S.resetFields()):o.error(Q.message)},Ie=async H=>{const{data:Q}=await k.custom({url:"",method:"post",meta:{operation:"updateSchool",variables:{id:{value:parseInt(H.id),type:"Int",required:!0},name:{value:H.name,type:"String",required:!0},serialNumber:{value:H.serial_number,type:"String",required:!0},ownershipId:{value:parseInt(H.ownership_id),type:"Int",required:!0},schoolTypes:{value:H.schoolTypes,type:"[String]",required:!0},regionId:{value:parseInt(H.region_id),type:"Int",required:!1},districtId:{value:parseInt(H.district_id),type:"Int",required:!1},wardId:{value:parseInt(H.ward_id),type:"Int",required:!1},bio:{value:H.bio,type:"String",required:!1},website:{value:H.website,type:"String",required:!1},longitude:{value:H.longitude,type:"Float",required:!1},latitude:{value:H.latitude,type:"Float",required:!1},isActive:{value:H.is_active,type:"Boolean",required:!1},isUniversal:{value:H.is_universal,type:"Boolean",required:!1},njiwaAccount:{value:H.njiwa_account,type:"Boolean",required:!1}},fields:["success","message",{school:["id","name","serialNumber","hasNjiwaAccount",{region:["id","name"]},{district:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{ownership:["id","name"]},{schoolType:["id","name"]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},"latitude","longitude","bio","logo","created","updated","isActive","isUniversal","canEdit","canDelete","canManage"]}]}});Q.success?(o.success(Q.message),h(r.map(pe=>pe.id===H.id?Q.school:pe)),S.resetFields(),j(!1)):o.error(Q.message)},Ve=async H=>{const{data:Q}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchool",variables:{id:{value:H,type:"Int",required:!0}},fields:["success","message"]}});Q.success?(o.success(Q.message),h(r.filter(pe=>parseInt(pe.id.toString())!==parseInt(H.toString())))):o.error(Q.message)},He=async(H,Q)=>{const{data:pe}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchoolOperatingType",variables:{schoolOperatingTypeId:{value:parseInt(H.toString()),type:"Int",required:!0}},fields:["success","message",{school:["id","name","serialNumber",{region:["id","name"]},{district:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{ownership:["id","name"]},{schoolType:["id","name"]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},"latitude","longitude","bio","logo","created","updated","isActive","isUniversal","canEdit","canDelete","canManage"]}]}});pe.success?(o.success(pe.message),h(r.map(ge=>ge.id===Q?pe.school:ge))):o.error(pe.message)},Me=async H=>{const{data:Q}=await k.custom({url:"",method:"post",meta:{operation:"createNjiwaAccount",variables:{schoolId:{value:parseInt(H.toString()),type:"Int",required:!0}},fields:["success","message",{school:["id","name","serialNumber","hasNjiwaAccount",{region:["id","name"]},{district:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{ownership:["id","name"]},{schoolType:["id","name"]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},"latitude","longitude","bio","logo","created","updated","isActive","isUniversal","canEdit","canDelete","canManage"]}]}});Q.success?(o.success(Q.message),h(r.map(pe=>pe.id===H?Q.school:pe))):o.error(Q.message)},qe=async(H,Q="",pe=20)=>{const{data:ge}=await k.custom({url:"",method:"get",meta:{operation:"schools",variables:{page:{value:H,type:"Int",required:!0},pageSize:{value:pe,type:"Int",required:!0},key:{value:Q,type:"String",required:!1},schoolTypes:{value:q,type:"[Int]",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","serialNumber","hasNjiwaAccount",{region:["id","name"]},{district:["id","name"]},{ward:["id","name",{district:["id","name",{region:["id","name"]}]}]},{ownership:["id","name"]},{schoolType:["id","name"]},{level:["id"]},{schoolOperatingTypes:["id",{schoolType:["id","name","code"]}]},"latitude","longitude","bio","logo","created","updated","isUniversal","contractEndDate","isActive","canEdit","canDelete","canManage"]}]}});_(ge.page),V(ge.total),z(ge.hasNext),h(ge.results),M(!1)},We=async(H,Q="",pe=20)=>{const{data:ge}=await k.custom({url:"",method:"get",meta:{operation:"schoolsTypes",variables:{page:{value:H,type:"Int",required:!0},pageSize:{value:pe,type:"Int",required:!0},key:{value:Q,type:"String",required:!1}},fields:["pages","total","page","hasNext","hasPrev",{results:["id","name","created","updated","isActive","canEdit","canDelete","canManage"]}]}});b(ge.results)};return t.useEffect(()=>{We(1,"",20),qe(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(W,{span:16,children:e.jsx(i,{layout:"vertical",form:A,onFinish:H=>{_(1),r.length=0,qe(1,H.key,B)},children:e.jsxs(ee,{style:{marginBottom:0},children:[e.jsx(W,{span:20,children:e.jsx(i.Item,{name:"key",style:{marginBottom:3},children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})}),e.jsx(W,{span:4,children:e.jsx(i.Item,{style:{marginBottom:3},children:e.jsxs(N,{size:"large",htmlType:"submit",onClick:()=>A.submit(),children:[e.jsx(re,{}),"Search"]})})}),e.jsx(W,{span:24,children:e.jsx(i.Item,{children:e.jsxs("div",{children:[g.map(H=>q.includes(parseInt(H.id.toString()))?e.jsx("a",{onClick:()=>{q.includes(parseInt(H.id.toString()))&&F(q.filter(Q=>Q!==parseInt(H.id.toString())))},children:e.jsx(ae.CheckableTag,{checked:!0,style:{padding:5},children:H.name})}):e.jsx("a",{onClick:()=>{q.includes(parseInt(H.id.toString()))||F([...q,parseInt(H.id.toString())])},children:e.jsx(ae,{style:{padding:5},children:H.name})})),q.length>0&&e.jsx("a",{onClick:()=>{F([]),A.submit()},children:e.jsx(ae,{style:{padding:5},icon:e.jsx(_t,{}),color:"red",children:"Clear All"})})]})})})]})})}),e.jsx(W,{span:8,style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs(N,{size:"large",onClick:Y,children:[e.jsx(je,{}),"Create School"]})})]}),e.jsx(le,{dataSource:r,columns:[{title:"Name",dataIndex:"name",key:"name",render:(H,Q,pe)=>e.jsxs(e.Fragment,{children:[e.jsx("a",{onClick:()=>{},children:Q.name}),e.jsx("span",{style:{marginLeft:10},children:Q.isUniversal?e.jsx(ae,{color:"red",children:"Universal"}):e.jsx(ae,{color:"green",children:"Not Universal"})})]})},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber"},{title:"Region",dataIndex:"region",key:"region",render:(H,Q,pe)=>{var ge,Ne,De;return e.jsx("span",{children:(De=(Ne=(ge=Q==null?void 0:Q.ward)==null?void 0:ge.district)==null?void 0:Ne.region)==null?void 0:De.name})}},{title:"District",dataIndex:"district",key:"district",render:(H,Q,pe)=>{var ge,Ne;return e.jsx("span",{children:(Ne=(ge=Q==null?void 0:Q.ward)==null?void 0:ge.district)==null?void 0:Ne.name})}},{title:"Ward",dataIndex:"ward",key:"ward",render:(H,Q,pe)=>{var ge;return e.jsx("span",{children:(ge=Q==null?void 0:Q.ward)==null?void 0:ge.name})}},{title:"School Type",dataIndex:"schoolType",key:"schoolType",render:(H,Q,pe)=>Q.schoolOperatingTypes.map(ge=>e.jsx(ye,{title:"Click to Remove "+ge.schoolType.name,placement:"bottom",children:e.jsx(X,{title:"Are you sure to delete this Operating Type?",onConfirm:()=>He(ge.id,Q.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{children:e.jsx(ae,{color:"green",children:ge.schoolType.name})})})}))},{title:"Ownership",dataIndex:"Ownership",key:"ownership",render:(H,Q,pe)=>e.jsx("span",{children:Q.ownership.name})},{title:"Has Njiwa",dataIndex:"hasNjiwaAccount",key:"hasNjiwaAccount",render:(H,Q,pe)=>e.jsx("span",{children:Q.hasNjiwaAccount?e.jsxs(e.Fragment,{children:[e.jsx(ae,{color:"green",children:"Yes"}),e.jsx(N,{size:"small",onClick:()=>G(Q),danger:!0,children:"Config"})]}):e.jsx(e.Fragment,{children:e.jsx(X,{title:"Are you sure to Activate Njiwa Account for this School? by default School Adminstrator will be granted access to Njiwa Module",onConfirm:()=>Me(Q.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{children:e.jsx(ae,{color:"red",children:"No"})})})})})},{title:"Contract End Date",dataIndex:"contractEndDate",key:"contractEndDate",render:(H,Q,pe)=>Q.contractEndDate?e.jsx("span",{children:ke(Q.contractEndDate).format("DD/MM/YYYY")}):e.jsx(N,{size:"small",onClick:()=>{Z(Q)},danger:!0,children:"Add a Contract"})},{title:"",dataIndex:"Action",key:"action",render:(H,Q,pe)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(st,{trigger:["click"],overlay:e.jsxs(be,{children:[e.jsx(be.Item,{disabled:!Q.canDelete,icon:e.jsx(de,{}),onClick:()=>{},children:e.jsx(X,{placement:"topLeft",title:"Deleting School: "+Q.name,onConfirm:()=>Ve(parseInt(Q.id)),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})})}),e.jsx(be.Item,{disabled:!Q.canEdit,icon:e.jsx(Se,{}),onClick:()=>C(Q),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(be.Item,{disabled:!Q.canEdit,icon:e.jsx(Mt,{}),onClick:()=>L(Q),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Adminstrators"})}),e.jsx(be.Item,{disabled:!Q.canManage,icon:e.jsx(Ge,{}),onClick:()=>Z(Q),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Contracts"})}),e.jsx(be.Item,{disabled:!Q.canManage,icon:e.jsx(Mt,{}),onClick:()=>J(Q),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"School Settings"})}),!Q.hasNjiwaAccount&&e.jsx(be.Item,{disabled:!Q.canManage,icon:e.jsx(Xt,{}),children:e.jsx(X,{title:"Are you sure to Activate Njiwa Account for this School? by default School Adminstrator will be granted access to Njiwa Module",onConfirm:()=>Me(Q.id),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{rel:"noopener noreferrer",children:"Register Njiwa Account"})})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:ge=>ge.preventDefault(),children:e.jsx(at,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})}],pagination:{onChange:(H,Q)=>{T(Q),qe(H,E,Q)},onShowSizeChange:(H,Q)=>{T(Q),qe(H,E,Q)},total:x,pageSize:B,position:["bottomCenter"],showQuickJumper:!0},scroll:{y:window.innerHeight-310}}),e.jsx(te,{title:"Registering School",width:"50%",destroyOnClose:!0,open:I,onClose:H=>v(H),children:e.jsx(la,{form:S,onFinish:ie})}),e.jsx(te,{title:"Edit School Informations",width:"50vw",open:d,onClose:H=>j(H),children:e.jsx(ea,{school:s,form:S,onFinish:Ie,randKey:Math.random()})}),e.jsx(te,{title:"School System Adminstrators",width:"50vw",open:f,onClose:H=>l(H),children:e.jsx(ia,{randKey:Math.random(),school:s})}),e.jsx(te,{title:"School Settings",width:"50%",open:y,onClose:H=>n(H),children:e.jsx(us,{school:s,full:!0,randKey:Math.random()})}),e.jsx(te,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"red"},children:s==null?void 0:s.name}),e.jsx("span",{style:{marginLeft:5},children:"Contracts"})]}),width:"70vw",open:m,onClose:H=>O(H),children:e.jsx(ma,{school:s,full:!0,randKey:Math.random()})}),e.jsx(te,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"red"},children:s==null?void 0:s.name}),e.jsx("span",{style:{marginLeft:5},children:"Contracts"})]}),width:"90vw",open:p,onClose:H=>c(H),children:e.jsx(ca,{school:s,randKey:Math.random()})})]})},xa=()=>(t.useEffect(()=>(document.title=ue.system_name+": Schools",document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),e.jsx(he,{children:e.jsxs(e.Fragment,{children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Schools"})]}),e.jsx(ha,{})]})})),Kt=a=>e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:s=>{a.onFinish(s)},requiredMark:!1,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})}),Vt=a=>{const[s,u]=t.useState(a.ward.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.ward.name,isActive:a.ward.isActive})},[a.form,a.ward]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.ward.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{name:"isActive",children:e.jsx(xe,{checked:s,onChange:()=>u(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},pa=a=>{t.useState();const[s,u]=t.useState([]),[r,h]=t.useState(1),[g,b]=t.useState(0),[q,F]=t.useState(20),[P,_]=t.useState(""),[x,V]=t.useState(!1),[B,T]=t.useState(!0);ne();const[E]=i.useForm();oe.useBreakpoint();const R=async w=>{const{data:M}=await k.custom({url:"",method:"post",meta:{operation:"addSchoolTypeCurriculum",variables:{schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0},curriculumId:{value:w,type:"Int",required:!0}},fields:["success","message",{schoolTypeCurriculum:["id",{schoolType:["id"]},{curriculum:["id","name","code","description"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});o.remove(),M.success?(o.success(M.message),a.onAdd(M.schoolTypeCurriculum),u(s.filter(I=>I.id!==w))):o.error(M.message)},U=[{title:"Name",dataIndex:"name",fixed:!0,render:(w,M)=>e.jsx("span",{children:e.jsx("a",{children:M.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(w,M)=>e.jsx("span",{children:e.jsx("a",{children:M.code})})},{title:"",dataIndex:"action",render:(w,M)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to Add this School Type Curriculum?",placement:"left",onConfirm:()=>R(M==null?void 0:M.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(M!=null&&M.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(je,{}),disabled:!(M!=null&&M.canManage)})})})}],z=async(w,M="",I=20)=>{const{data:v}=await k.custom({url:"",method:"get",meta:{operation:"schoolTypeCurriculumsToAdd",variables:{page:{value:w,type:"Int",required:!0},key:{value:M,type:"String",required:!1},pageSize:{value:I,type:"Int",required:!1},schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(v.page),b(v.total),V(v.hasNext),u(v.results),T(!1)};return t.useEffect(()=>{z(r,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(W,{span:24,children:e.jsx(i,{layout:"vertical",form:E,onFinish:w=>{h(1),s.length=0,z(1,w.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{children:e.jsx(le,{loading:B,columns:U,dataSource:s,scroll:{x:!0},pagination:{onChange:(w,M)=>{F(M),z(w,P,M)},total:g,pageSize:q,position:["bottomCenter"],showQuickJumper:!0}})})]})},ga=a=>{t.useState();const[s,u]=t.useState([]),[r,h]=t.useState(1),[g,b]=t.useState(0),[q,F]=t.useState(20),[P,_]=t.useState(""),[x,V]=t.useState(!1),[B,T]=t.useState(!0);ne();const[E]=i.useForm();oe.useBreakpoint().lg,t.useState(!1);const[U,z]=t.useState(!1),w=()=>{z(!0)},M=async f=>{const{data:l}=await k.custom({url:"",method:"post",meta:{operation:"removeSchoolTypeCurriculum",variables:{schoolTypeCurriculumId:{value:parseInt(f.toString()),type:"Int",required:!0}},fields:["success","message"]}});l.success?(o.success(l.message),u(s.filter(S=>S.id!==f))):o.error(l.message)},I=()=>{o("Canceled")},v=[{title:"Name",dataIndex:"name",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:e.jsx("a",{children:l.curriculum.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:e.jsx("a",{children:l.curriculum.code})})},{title:"Created",dataIndex:"created",render:(f,l,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(l.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(f,l,S)=>e.jsx("a",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,l,S)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to delete this School Type Curriculum?",onConfirm:()=>M(l==null?void 0:l.id),onCancel:()=>I,okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(l!=null&&l.canDelete)})})})}],d=async(f,l="",S=20)=>{const{data:A}=await k.custom({url:"",method:"get",meta:{operation:"schoolTypeCurriculums",variables:{page:{value:f,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:S,type:"Int",required:!1},schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{schoolType:["id"]},{curriculum:["id","name","code","description"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(A.page),b(A.total),V(A.hasNext),u(A.results),T(!1)},j=async f=>{u([f,...s])};return t.useEffect(()=>{d(r,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:12,children:e.jsx(i,{layout:"vertical",form:E,onFinish:f=>{h(1),s.length=0,d(1,f.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(je,{}),onClick:()=>w(),children:"Add"})})]}),e.jsx("div",{children:e.jsx(le,{loading:B,columns:v,dataSource:s,scroll:{x:!0,y:"50vh"},pagination:{onChange:(f,l)=>{F(l),d(f,P,l)},total:g,pageSize:q,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(Ue,{title:"Adding Curriculums",anchor:"right",width:"35vw",open:U,onClose:()=>{z(!1)},children:e.jsx(pa,{schoolType:a.schoolType,onAdd:j})})]})},{Option:ya}=fe,ja=a=>{const[s,u]=t.useState(!1),[r,h]=t.useState([]),[g]=i.useForm(),b=async F=>{const{data:P}=await k.custom({url:"",method:"post",meta:{operation:"createSchoolTypeGrade",variables:{schoolTypeId:{value:F.school_type_id,type:"Int",required:!0},gradeId:{value:F.grade_id,type:"Int",required:!0},minScore:{value:F.min_score,type:"Int",required:!0},maxScore:{value:F.max_score,type:"Int",required:!0}},fields:["success","message",{schoolTypeGrade:["id",{grade:["id","name"]},"minScore","maxScore","isActive","created","updated","canEdit","canDelete","canManage"]}]}});P.success?(o.success(P.message),g.resetFields(),q(1,"",20),a.onFinish(P.schoolTypeGrade)):o.error(P.message)},q=async(F,P="",_=20)=>{u(!0);const{data:x}=await k.custom({url:"",method:"get",meta:{operation:"schoolTypeGradesToAdd",variables:{page:{value:F,type:"Int",required:!0},key:{value:P,type:"String",required:!1},pageSize:{value:_,type:"Int",required:!1},schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(x.results),u(!1)};return t.useEffect(()=>{q(1,"",20)},[a.schoolType]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:g,onFinish:F=>{F.school_type_id=parseInt(a.schoolType.id.toString()),b(F)},requiredMark:!1,initialValues:{remember:!1,email:"",password:""},children:[e.jsx(i.Item,{name:"grade_id",label:"Grade",rules:[{required:!0,type:"number",message:"Please select Grade"}],children:e.jsx(fe,{size:"large",dropdownStyle:{zIndex:9999},children:r.map(F=>e.jsx(ya,{value:parseInt(F.id.toString()),children:F.name},F.id))})}),e.jsx(i.Item,{name:"min_score",label:"Min Score (%)",rules:[{required:!0,type:"number",message:"Please input Min Score"},{validator:(F,P)=>P&&P>g.getFieldValue("max_score")?Promise.reject("Min Score must be less than Max Score"):Promise.resolve()}],children:e.jsx(Pe,{size:"large",min:0,max:100,style:{width:"50%"}})}),e.jsx(i.Item,{name:"max_score",label:"Max Score (%)",rules:[{required:!0,type:"number",message:"Please input Max Score"},{validator:(F,P)=>P&&P<g.getFieldValue("min_score")?Promise.reject("Max Score must be greater than Min Score"):Promise.resolve()}],children:e.jsx(Pe,{size:"large",min:0,max:100,style:{width:"50%"}})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",htmlType:"submit",icon:e.jsx(Oe,{}),disabled:s,danger:!0,children:"Save"})})]})})},fa=a=>{const[s,u]=t.useState([]),[r,h]=t.useState(1),[g,b]=t.useState(0),[q,F]=t.useState(20),[P,_]=t.useState(""),[x,V]=t.useState(!1),[B,T]=t.useState(!0);ne();const[E]=i.useForm();oe.useBreakpoint().lg,t.useState(!1);const[U,z]=t.useState(!1),w=()=>{z(!0)},M=async f=>{const{data:l}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchoolTypeGrade",variables:{id:{value:parseInt(f.toString()),type:"Int",required:!0}},fields:["success","message"]}});l.success?(o.success(l.message),u(s.filter(S=>S.id!==f))):o.error(l.message)},I=()=>{o("Canceled")},v=[{title:"Name",dataIndex:"name",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:e.jsx("a",{children:l.grade.name})})},{title:"Min Score",dataIndex:"minScore",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:e.jsx("a",{children:l.minScore})})},{title:"Max Score",dataIndex:"maxScore",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:e.jsx("a",{children:l.maxScore})})},{title:"Created",dataIndex:"created",render:(f,l,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(l.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(f,l,S)=>e.jsx("a",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,l,S)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to delete this School Grade?",onConfirm:()=>M(l==null?void 0:l.id),onCancel:()=>I,okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(l!=null&&l.canDelete),danger:!0})})})}],d=async(f,l="",S=20)=>{const{data:A}=await k.custom({url:"",method:"get",meta:{operation:"schoolTypeGrades",variables:{page:{value:f,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:S,type:"Int",required:!1},schoolTypeId:{value:parseInt(a.schoolType.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{grade:["id","name"]},"minScore","maxScore","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(A.page),b(A.total),V(A.hasNext),u(A.results),T(!1)},j=async f=>{u([f,...s])};return t.useEffect(()=>{d(r,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:12,children:e.jsx(i,{layout:"vertical",form:E,onFinish:f=>{h(1),s.length=0,d(1,f.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(je,{}),onClick:()=>w(),danger:!0,children:"Add"})})]}),e.jsx("div",{children:e.jsx(le,{loading:B,columns:v,dataSource:s,scroll:{x:!0,y:"50vh"},pagination:{onChange:(f,l)=>{F(l),d(f,P,l)},total:g,pageSize:q,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(te,{title:"Adding Grade",width:"30vw",open:U,onClose:f=>z(f),children:e.jsx(ja,{schoolType:a.schoolType,onFinish:j})})]})},Sa=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(25),[q,F]=t.useState(""),[P,_]=t.useState(1),[x,V]=t.useState(0),[B,T]=t.useState(!1),[E,R]=t.useState(!0);ne();const[U]=i.useForm(),[z]=i.useForm();oe.useBreakpoint().lg;const[M,I]=t.useState(!1),[v,d]=t.useState(!1),[j,f]=t.useState(!1),[l,S]=t.useState(!1),A=C=>{u(C),S(!0)},y=C=>{u(C),f(!0)},n=C=>{u(C),d(!0)},m=async C=>{const{data:Y}=await k.custom({url:"",method:"post",meta:{operation:"updateSchoolsTypes",variables:{id:{value:C.id,type:"Int",required:!0},name:{value:C.name,type:"String",required:!0},isActive:{value:C.isActive,type:"Boolean",required:!0}},fields:["success","message",{schoolType:["id","name","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}});Y.success?(o.success(Y.message),z.resetFields(),d(!1),h(r.map(ie=>parseInt(ie.id.toString())===parseInt(C.id)?Y.schoolType:ie))):o.error(Y.message)},O=async C=>{const{data:Y}=await k.custom({url:"",method:"post",meta:{operation:"updateSchoolOwnership",variables:{id:{value:C.id,type:"Int",required:!0},name:{value:C.name,type:"String",required:!0},isActive:{value:C.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});Y.success?(o.success(Y.message),z.resetFields(),d(!1),h(r.map(ie=>ie.id===Y.schoolType.id?Y.level:ie))):o.error(Y.message)},p=async C=>{const{data:Y}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchoolsEducationLevel",variables:{id:{value:parseInt(C.toString()),type:"Int",required:!0}},fields:["success","message"]}});Y.success?(o.success(Y.message),h(r.filter(ie=>ie.id!==C))):o.error(Y.message)},c=()=>{o("Canceled")},Z=[{title:"Name",dataIndex:"name",fixed:!0,render:(C,Y,ie)=>e.jsx("span",{children:e.jsx("a",{children:Y.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(C,Y,ie)=>e.jsx("span",{children:e.jsx("a",{children:C})})},{title:"Grading System",dataIndex:"code",fixed:!0,render:(C,Y,ie)=>e.jsx("span",{children:e.jsxs(N,{onClick:()=>A(Y),danger:!0,children:[e.jsx(Ge,{}),"Configure"]})})},{title:"Created",dataIndex:"created",render:(C,Y,ie)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(Y.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(C,Y,ie)=>e.jsx("a",{children:Y!=null&&Y.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(C,Y,ie)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ye,{title:"View/Manage Application Curriculums",placement:"left",color:"green",children:e.jsx(N,{style:{marginRight:3},onClick:()=>y(Y),icon:e.jsx(Ge,{}),disabled:!(Y!=null&&Y.canManage),danger:!0})}),e.jsx(X,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>p(Y==null?void 0:Y.id),onCancel:()=>c,okText:"Yes",cancelText:"No",disabled:!(Y!=null&&Y.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(de,{}),disabled:!(Y!=null&&Y.canDelete),danger:!0})}),e.jsx(ye,{title:"Edit "+(Y==null?void 0:Y.name)+" Ownership",color:"green",placement:"left",children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(Se,{}),disabled:!(Y!=null&&Y.canEdit),onClick:()=>n(Y),danger:!0})})]})}],G=async(C,Y="",ie=25)=>{const{data:Ie}=await k.custom({url:"",method:"get",meta:{operation:"schoolsTypes",variables:{page:{value:C,type:"Int",required:!0},key:{value:Y,type:"String",required:!1},pageSize:{value:ie,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});_(Ie.page),V(Ie.total),T(Ie.hasNext),h([...Ie.results]),R(!1)},J=async()=>{const{data:C}=await k.custom({url:"",method:"post",meta:{operation:"syncSchoolsTypes",variables:{},fields:["success","message"]}});C.success?(o.success(C.message),r.length=0,h([]),G(1)):o.error(C.message)},L=async()=>{const{data:C}=await k.custom({url:"",method:"post",meta:{operation:"syncDefaultGrading",variables:{},fields:["success","message"]}});C.success?o.success(C.message):o.error(C.message)};return t.useEffect(()=>{G(P)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:8,children:e.jsx(i,{layout:"vertical",form:U,onFinish:C=>{_(1),r.length=0,G(1,C.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(W,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ye,{title:"Synchronize Defualt Grading",color:"green",children:e.jsx(N,{style:{marginRight:3},size:"large",icon:e.jsx(ve,{}),onClick:()=>L(),danger:!0,children:"Default Grading"})}),e.jsx(ye,{title:"Synchronize Default School Ownerships",color:"green",children:e.jsx(N,{size:"large",icon:e.jsx(ve,{}),onClick:()=>J(),danger:!0,children:"Types"})})]})]}),e.jsx(le,{loading:E,columns:Z,dataSource:r,scroll:{x:!0},pagination:{onChange:(C,Y)=>{b(Y),G(C,q,Y)},total:x,pageSize:g,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(te,{title:"Edit School Type Informations",width:"60vw",open:v,onClose:C=>d(C),children:e.jsx(Vt,{form:z,ward:s,onFinish:m})}),e.jsx(te,{title:"Create School Type Informations",width:"60vw",open:M,onClose:C=>I(C),children:e.jsx(Kt,{form:z,onFinish:O})}),e.jsx(te,{title:"Applicable Curriculums for "+(s==null?void 0:s.name),width:"60vw",open:j,onClose:C=>{f(C)},children:e.jsx(ga,{schoolType:s})}),e.jsx(te,{title:(s==null?void 0:s.name)+" Grading System",width:"60vw",open:l,onClose:C=>{S(C)},children:e.jsx(fa,{schoolType:s})})]})},va=()=>(t.useEffect(()=>{document.title=ue.system_name+": School Types"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Schools Types"})]}),e.jsx(Sa,{height:80})]})})),Ca=a=>{t.useState();const[s,u]=t.useState([]),[r,h]=t.useState(25),[g,b]=t.useState(""),[q,F]=t.useState(1),[P,_]=t.useState(0),[x,V]=t.useState(!1),[B,T]=t.useState(!0);ne();const[E]=i.useForm();i.useForm();const U=!oe.useBreakpoint().lg,[z,w]=t.useState(!1),[M,I]=t.useState(!1),v=async()=>{const{data:S}=await k.custom({url:"",method:"post",meta:{operation:"synchronizeGrades",variables:{},fields:["success","message"]}});S.success&&(o.success(S.message),l(1))},d=async S=>{const{data:A}=await k.custom({url:"",method:"post",meta:{operation:"deleteGrade",variables:{id:{value:parseInt(S.toString()),type:"Int",required:!0}},fields:["success","message"]}});A.success?(o.success(A.message),u(s.filter(y=>y.id!==S))):o.error(A.message)},j=()=>{o("Canceled")},f=[{title:"Name",dataIndex:"name",fixed:!0,render:(S,A,y)=>e.jsx("span",{children:e.jsx("a",{children:A.name})})},{title:"Created",dataIndex:"created",render:(S,A,y)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(A.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(S,A,y)=>e.jsx("a",{children:A!=null&&A.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(S,A,y)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>d(A==null?void 0:A.id),onCancel:()=>j,okText:"Yes",cancelText:"No",disabled:!(A!=null&&A.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(de,{}),disabled:!(A!=null&&A.canDelete),danger:!0})}),e.jsx(ye,{title:"Edit "+(A==null?void 0:A.name)+" Ownership",color:"green",placement:"left",children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(Se,{}),disabled:!(A!=null&&A.canEdit),onClick:()=>{},danger:!0})})]})}],l=async(S,A="",y=25)=>{const{data:n}=await k.custom({url:"",method:"get",meta:{operation:"grades",variables:{page:{value:S,type:"Int",required:!0},key:{value:A,type:"String",required:!1},pageSize:{value:y,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});F(n.page),_(n.total),V(n.hasNext),u([...n.results]),T(!1)};return t.useEffect(()=>{l(q)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:U?24:20,children:e.jsx(i,{layout:"vertical",form:E,onFinish:S=>{F(1),s.length=0,l(1,S.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:U?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ye,{title:"Synchronize Default Grades",children:e.jsx(N,{size:"large",icon:e.jsx(ve,{}),onClick:()=>v(),danger:!0})})})]}),e.jsx(le,{loading:B,columns:f,dataSource:s,scroll:{x:!0},pagination:{onChange:(S,A)=>{h(A),l(S,g,A)},total:P,pageSize:r,position:["bottomCenter"],showQuickJumper:!1}}),e.jsx(te,{title:"Edit Grade",width:"60vw",open:M,onClose:S=>I(S),children:e.jsx(e.Fragment,{})}),e.jsx(te,{title:"Create Grade",width:"60vw",open:z,onCancel:S=>w(S),children:e.jsx(e.Fragment,{})})]})},ba=()=>(t.useEffect(()=>{document.title=ue.system_name+": Grades"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Grades"})]}),e.jsx(Ca,{height:80})]})})),Ia=a=>{const[s]=i.useForm(),[u,r]=t.useState(a.ownership.isActive),h=async g=>{const{data:b}=await k.custom({url:"",method:"post",meta:{operation:"updateSchoolsOwnerships",variables:{id:{value:g.id,type:"Int",required:!0},name:{value:g.name,type:"String",required:!0},isActive:{value:g.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});b.success?(o.success(b.message),s.resetFields(),a.onFinish(b.ownership)):o.error(b.message)};return t.useEffect(()=>{a.form.setFieldsValue({name:a.ownership.name,isActive:a.ownership.isActive})},[a.form,a.ownership]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:g=>{g.isActive=u,g.id=parseInt(a.ownership.id),h(g)},requiredMark:!1,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{name:"isActive",children:e.jsx(xe,{checked:u,onChange:()=>r(!u),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Aa=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(1),[q,F]=t.useState(0),[P,_]=t.useState(!1),[x,V]=t.useState(20),[B,T]=t.useState(""),[E,R]=t.useState(!0);ne();const[U]=i.useForm(),[z]=i.useForm(),M=!oe.useBreakpoint().lg,[I,v]=t.useState(!1),[d,j]=t.useState(!1),f=p=>{u(p),j(!0)},l=async p=>{h(r.map(c=>parseInt(c.id.toString())===parseInt(p.id.toString())?p:c)),j(!1)},S=async p=>{const{data:c}=await k.custom({url:"",method:"post",meta:{operation:"updateSchoolOwnership",variables:{id:{value:p.id,type:"Int",required:!0},name:{value:p.name,type:"String",required:!0},isActive:{value:p.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});c.success?(o.success(c.message),z.resetFields(),j(!1),h(r.map(Z=>Z.id===c.ownership.id?c.ownership:Z))):o.error(c.message)},A=async p=>{const{data:c}=await k.custom({url:"",method:"post",meta:{operation:"deleteSchoolOwnership",variables:{id:{value:parseInt(p.toString()),type:"Int",required:!0}},fields:["success","message"]}});c.success?(o.success(c.message),h(r.filter(Z=>Z.id!==p))):o.error(c.message)},y=()=>{o("Canceled")},n=[{title:"Name",dataIndex:"name",fixed:!0,render:(p,c,Z)=>e.jsx("span",{children:e.jsx("a",{children:c.name})})},{title:"Created",dataIndex:"created",render:(p,c,Z)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(c.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(p,c,Z)=>e.jsx("a",{children:c!=null&&c.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(p,c,Z)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this School Ownership?",onConfirm:()=>A(c==null?void 0:c.id),onCancel:()=>y,okText:"Yes",cancelText:"No",disabled:!(c!=null&&c.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(c!=null&&c.canDelete),danger:!0})}),e.jsx(ye,{title:"Edit "+(c==null?void 0:c.name)+" Ownership",color:"green",children:e.jsx(N,{icon:e.jsx(Se,{}),disabled:!(c!=null&&c.canEdit),onClick:()=>f(c),danger:!0})})]})}],m=async(p,c="",Z=20)=>{const{data:G}=await k.custom({url:"",method:"get",meta:{operation:"ownerships",variables:{page:{value:p,type:"Int",required:!0},key:{value:c,type:"String",required:!1},pageSize:{value:Z,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});b(G.page),F(G.total),_(G.hasNext),h(G.results),R(!1)},O=async()=>{const{data:p}=await k.custom({url:"",method:"post",meta:{operation:"syncSchoolsOwnerships",variables:{},fields:["success","message"]}});p.success?(o.success(p.message),r.length=0,h([]),m(1)):o.error(p.message)};return t.useEffect(()=>{m(1,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:M?24:20,children:e.jsx(i,{layout:"vertical",form:U,onFinish:p=>{b(1),r.length=0,T(p.key),m(1,p.key,x)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(W,{span:M?24:4,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(ye,{title:"Synchronize Default School Ownerships",children:e.jsx(N,{size:"large",icon:e.jsx(ve,{}),onClick:()=>O()})}),e.jsx(ye,{title:"Create New School Ownership",children:e.jsx(N,{size:"large",icon:e.jsx(je,{}),onClick:()=>v(!0)})})]})]}),e.jsx("div",{children:e.jsx(le,{loading:E,columns:n,dataSource:r,scroll:{x:!0},pagination:{onChange:(p,c)=>{V(c),m(p,B,c)},total:q,pageSize:x,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(te,{title:"Edit School Ownership Informations",width:"30vw",open:d,onClose:p=>j(p),children:e.jsx(Ia,{form:z,ownership:s,onFinish:l})}),e.jsx(te,{title:"Create School Ownership Informations",width:"30vw",open:I,onClose:p=>v(p),children:e.jsx(Kt,{form:z,onFinish:S})})]})},ka=()=>(t.useEffect(()=>{document.title=ue.system_name+": School Ownerships"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"School Ownerships"})]}),e.jsx(Aa,{height:80})]})})),Fa=a=>{const[s,u]=t.useState(a.member.isAdmin),[r,h]=t.useState(a.member.isStaff);return t.useEffect(()=>{a.form.setFieldsValue({firstName:a.member.firstName,middleName:a.member.middleName,lastName:a.member.lastName,email:a.member.email,phone:a.member.phone,isAdmin:a.member.isAdmin,isStaff:a.member.isStaff})},[a.form,a.member]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:g=>{g.id=parseInt(a.member.id),g.isAdmin=s,g.isStaff=r,a.onFinish(g)},requiredMark:!0,children:[e.jsx(i.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter First Name ..."})}),e.jsx(i.Item,{name:"middleName",label:"Middle Name",rules:[{required:!1,type:"string",message:"Please input Middle Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(i.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(i.Item,{name:"email",label:"Email",rules:[{required:!1,type:"email",message:"Please input Email Address"}],children:e.jsx(D,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(i.Item,{name:"phone",label:"Mobile Phone Number",rules:[{required:!0,type:"string",message:"Please input Mobile Phone Number ..."}],children:e.jsx(D,{size:"large",placeholder:"Enter Mobile Phone Number ..."})}),e.jsx(i.Item,{name:"isAdmin",rules:[{required:!1,type:"boolean"}],children:e.jsx(xe,{defaultChecked:s,onChange:()=>{u(!s)},children:"Admin"})}),e.jsx(i.Item,{name:"isStaff",rules:[{required:!1,type:"boolean"}],children:e.jsx(xe,{defaultChecked:r,checked:r,onChange:()=>{h(!r)},children:"Staff"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Na=["id","firstName","lastName","email","middleName","fullName","phone","pic","username","isActive","isStaff","isAdmin","ldapAuth","created","updated","canEdit","canDelete","canManage"],Ta=a=>{const[s,u]=t.useState(!1),[r,h]=t.useState(!1),[g,b]=t.useState(!1),q=async F=>{const{data:P}=await k.custom({url:"",method:"post",meta:{operation:"createUserExtended",variables:{firstName:{value:F.firstName,type:"String",required:!0},middleName:{value:F.middleName,type:"String",required:!0},lastName:{value:F.lastName,type:"String",required:!0},username:{value:F.username,type:"String",required:!1},email:{value:F.email,type:"String",required:!g},phone:{value:F.phone,type:"String",required:!0},password:{value:F.password,type:"String",required:!g},passwordRepeat:{value:F.passwordRepeat,type:"String",required:!g},isAdmin:{value:F.isAdmin,type:"Boolean",required:!1},isStaff:{value:F.isStaff,type:"Boolean",required:!1},ldapAuth:{value:F.ldapAuth,type:"Boolean",required:!1}},fields:["success","message",{user:Na}]}});P.success?(o.success(P.message),a.onFinish(P.user)):o.error(P.message)};return t.useEffect(()=>{},[a.form]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:F=>{F.isAdmin=s,F.isStaff=r,F.ldapAuth=g,g||(F.username=F.email),q(F)},requiredMark:!0,children:[e.jsxs("div",{style:{maxHeight:"70vh",overflowY:"auto",padding:20},children:[e.jsx(i.Item,{name:"ldapAuth",rules:[{required:!1,type:"boolean"}],children:e.jsx(xe,{defaultChecked:g,onChange:()=>{b(!g)},children:"LDAP Authentication"})}),e.jsx(i.Item,{name:"firstName",label:"First Name",rules:[{required:!0,type:"string",message:"Please input First Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter First Name ..."})}),e.jsx(i.Item,{name:"middleName",label:"Middle Name",rules:[{required:!0,type:"string",message:"Please input Middle Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Middle Name ..."})}),e.jsx(i.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,type:"string",message:"Please input Last Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Last Name ..."})}),e.jsx(i.Item,{name:"email",label:e.jsxs(e.Fragment,{children:["Email Address",!g&&e.jsx(ae,{color:"green",children:"Username"})]}),rules:[{required:!g,type:"email",message:"Please input Email Address"}],children:e.jsx(D,{size:"large",placeholder:"Enter Email Address ..."})}),g&&e.jsx(i.Item,{name:"username",label:"Username",rules:[{required:g,type:"string",message:"Please input Username ..."}],children:e.jsx(D,{size:"large",placeholder:"Enter Username ..."})}),!g&&e.jsxs(e.Fragment,{children:[e.jsx(i.Item,{name:"password",label:"Password",rules:[{required:!g,type:"string",message:"Please input Password ..."}],children:e.jsx(D,{size:"large",type:"password",placeholder:"Enter Password ..."})}),e.jsx(i.Item,{name:"passwordRepeat",label:"Password Confirm",rules:[{required:!g,type:"string",message:"Please input Password Confirm ..."}],children:e.jsx(D,{size:"large",type:"password",placeholder:"Enter Password Confirm ..."})})]}),e.jsx(i.Item,{name:"phone",label:"Mobile Phone",rules:[{required:!0,type:"string",message:"Please input Mobile Phone"}],children:e.jsx(D,{size:"large",placeholder:"Enter Email Address ..."})}),e.jsx(i.Item,{name:"isAdmin",rules:[{required:!1,type:"boolean"}],children:e.jsx(xe,{defaultChecked:s,onChange:()=>{u(!s)},children:"Admin"})}),e.jsx(i.Item,{name:"isStaff",rules:[{required:!1,type:"boolean"}],children:e.jsx(xe,{defaultChecked:r||g,checked:r||g,onChange:()=>{h(!r)},children:"Staff"})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",htmlType:"submit",danger:!0,children:"Save"})})]})})},{Paragraph:qa}=Ke,Pa=a=>{var r,h,g,b,q;const[s]=i.useForm(),u=async F=>{const{data:P}=await k.custom({url:"",method:"post",meta:{operation:"createLdapCredentials",variables:{userId:{value:F.userId,type:"Int",required:!0},username:{value:F.username,type:"String",required:!1},password:{value:F.password,type:"String",required:!1},passwordConfirm:{value:F.passwordConfirm,type:"String",required:!1}},fields:["success","message"]}});P.success?(o.success(P.message),s.resetFields(),a.onFinish()):o.error(P.message)};return t.useEffect(()=>{},[a.member]),e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Copy the link below and send it to the user to create their LDAP credentials",e.jsx("span",{style:{color:"red"},children:"Link Expires in 24Hours"})]}),e.jsx(wt,{type:"info",message:e.jsx(e.Fragment,{children:e.jsx(qa,{copyable:!0,style:{fontSize:"22px"},children:window.location.origin+"/auth/ldap/"+ke().add("h",24).valueOf()+"/"+((r=a.member)==null?void 0:r.id)+"/login?fname="+((h=a.member)==null?void 0:h.firstName)+"&lname="+((g=a.member)==null?void 0:g.lastName)+"&mname="+((b=a.member)==null?void 0:b.middleName)+"&email="+((q=a.member)==null?void 0:q.email)})})}),e.jsx("div",{style:{marginTop:50},children:e.jsxs(i,{layout:"vertical",form:s,onFinish:F=>{var P;F.userId=parseInt(((P=a.member)==null?void 0:P.id)??"0"),u(F)},requiredMark:!0,children:[e.jsx(i.Item,{name:"username",label:"Username",rules:[{required:!0,type:"string",message:"Please input Username"}],children:e.jsx(D,{size:"large",placeholder:"Enter Username ..."})}),e.jsx(i.Item,{name:"password",label:"Password",rules:[{required:!0,type:"string",message:"Please input Password"}],children:e.jsx(D,{size:"large",type:"password",placeholder:"Enter Password ..."})}),e.jsx(i.Item,{name:"passwordConfirm",label:"Confirm Password",rules:[{required:!0,type:"string",message:"Please input Confirm Password"},({getFieldValue:F})=>({validator(P,_){return!_||F("password")===_?Promise.resolve():Promise.reject(new Error("The two passwords that you entered do not match!"))}})],children:e.jsx(D,{size:"large",type:"password",placeholder:"Enter Confirm Password ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})]})},tt=["id","firstName","lastName","email","middleName","fullName","phone","pic","username","isActive","isStaff","isAdmin","ldapAuth","authenticationType","created","updated","canEdit","canDelete","canManage"],Ea=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(1),[q,F]=t.useState(0),[P,_]=t.useState(20),[x,V]=t.useState(""),[B,T]=t.useState(!1),[E,R]=t.useState(!0);ne();const[U]=i.useForm(),[z]=i.useForm();oe.useBreakpoint().lg;const[M,I]=t.useState(!1),[v,d]=t.useState(!1),[j,f]=t.useState(!1),l=new URLSearchParams(window.location.search),S=l.get("status")||"0",A=l.get("role")||"user",y=L=>{u(L),f(!0)},n=L=>{u(L),I(!0)},m=async()=>{f(!1)},O=async L=>{const{data:C}=await k.custom({url:"",method:"post",meta:{operation:"updateUser",variables:{id:{value:L.id,type:"Int",required:!0},firstName:{value:L.firstName,type:"String",required:!1},middleName:{value:L.middleName,type:"String",required:!1},lastName:{value:L.lastName,type:"String",required:!1},email:{value:L.email,type:"String",required:!1},phone:{value:L.phone,type:"String",required:!1},isAdmin:{value:L.isAdmin,type:"Boolean",required:!1},isStaff:{value:L.isStaff,type:"Boolean",required:!1},ldapAuth:{value:L.ldapAuth,type:"Boolean",required:!1}},fields:["success","message",{user:tt}]}});C.success?(o.success(C.message),z.resetFields(),I(!1)):o.error(C.message)},p=async L=>{h([L,...r]),z.resetFields(),d(!1)},c=async L=>{const{data:C}=await k.custom({url:"",method:"post",meta:{operation:"deleteUser",variables:{id:{value:parseInt(L.toString()),type:"Int",required:!0}},fields:["success","message"]}});C.success?(o.success(C.message),h(r.filter(Y=>Y.id!==L))):o.error(C.message)},Z=async(L,C)=>{const{data:Y}=await k.custom({url:"",method:"post",meta:{operation:"blockUnblockUser",variables:{id:{value:parseInt(L.toString()),type:"Int",required:!0},block:{value:C,type:"Boolean",required:!0}},fields:["success","message",{user:tt}]}});Y.success?(o.success(Y.message),h(r.map(ie=>ie.id===L?Y.user:ie))):o.error(Y.message)},G=()=>{o("Canceled")},J=async(L,C="",Y=20)=>{const{data:ie}=await k.custom({url:"",method:"get",meta:{operation:"users",variables:{page:{value:L,type:"Int",required:!0},key:{value:C,type:"String",required:!1},pageSize:{value:Y,type:"Int",required:!1},where:{value:{is_staff:A==="staff",is_admin:A==="adminstrator",is_active:parseInt(S)===1},type:"JSON",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:tt}]}});b(ie.page),F(ie.total),T(ie.hasNext),h(ie.results),R(!1)};return t.useEffect(()=>{J(g)},[l.get("status"),l.get("role")]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:10,children:e.jsx(i,{layout:"vertical",form:U,onFinish:L=>{b(1),r.length=0,J(1,L.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:14,style:{display:"flex",justifyContent:"end"},children:e.jsx(N,{size:"large",icon:e.jsx(je,{}),onClick:()=>d(!0),danger:!0,children:"Create User"})})]}),e.jsx(le,{loading:E,columns:[{title:"Full Name",dataIndex:"full_name",fixed:!0,render:(L,C,Y)=>e.jsx("span",{children:e.jsx("a",{children:C.fullName})})},{title:"Username",dataIndex:"username",render:(L,C,Y)=>e.jsx("span",{children:e.jsx("a",{children:C.username})})},{title:"Email",dataIndex:"email",render:(L,C,Y)=>e.jsxs("span",{children:[C.email&&e.jsx(ae,{color:"green",children:C.email}),C.phone&&e.jsx(ae,{color:"green",children:C.phone})]})},{title:"LDAP Auth",dataIndex:"created",render:(L,C,Y)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:C.ldapAuth?e.jsx(ae,{color:"green",children:"Yes"}):e.jsx(ae,{color:"red",children:"No"})})})},{title:"Date Joined",dataIndex:"created",render:(L,C,Y)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(C.created).toLocaleString()})})},{title:"Authentication Type",dataIndex:"authenticationType",render:(L,C,Y)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:C.authenticationType})})},{title:"Status",dataIndex:"isActive",render:(L,C,Y)=>e.jsx("a",{children:C!=null&&C.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(L,C,Y)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[C.ldapAuth&&e.jsx(N,{icon:e.jsx(hs,{}),disabled:!(C!=null&&C.canEdit),onClick:()=>y(C),danger:!0}),e.jsx(X,{title:"Are you sure to delete this member?",placement:"left",onConfirm:()=>c(C==null?void 0:C.id),onCancel:()=>G,okText:"Yes",cancelText:"No",disabled:!(C!=null&&C.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(C!=null&&C.canDelete),danger:!0})}),e.jsx(N,{icon:e.jsx(Se,{}),disabled:!(C!=null&&C.canEdit),onClick:()=>n(C),danger:!0}),C.isActive?e.jsx(X,{title:"Blocking User???",placement:"left",onConfirm:()=>Z(C==null?void 0:C.id,!1),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(es,{}),disabled:!(C!=null&&C.canManage),danger:!0})}):e.jsx(X,{title:"Unblocking User???",placement:"left",onConfirm:()=>Z(C==null?void 0:C.id,!0),onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(ts,{}),disabled:!(C!=null&&C.canEdit),danger:!0})})]})}],dataSource:r,scroll:{y:window.innerHeight-310},pagination:{onChange:(L,C)=>{_(C),J(L,x,C)},onShowSizeChange:(L,C)=>{_(C),J(L,x,C)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(te,{title:"Create User Form",width:"50%",open:v,onClose:L=>d(L),children:e.jsx(Ta,{form:z,onFinish:p})}),e.jsx(te,{title:"Edit User Informations",width:"50%",visible:M,onClose:L=>I(L),children:e.jsx(Fa,{form:z,member:s,onFinish:O})}),e.jsx(te,{title:"Creating LDAP Credentials for User",width:"50vw",open:j,onClose:L=>f(L),children:e.jsx(Pa,{member:s,onFinish:m})})]})},Ma=()=>(t.useEffect(()=>(document.title=ue.system_name+": Users/Members",document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Users/Members"})]}),e.jsx(Ea,{height:80})]})})),Da=a=>{const[s,u]=t.useState([]),[r,h]=t.useState(1),[g,b]=t.useState(0),[q,F]=t.useState(20),[P,_]=t.useState(""),[x,V]=t.useState(!1),[B,T]=t.useState(!0);ne();const[E]=i.useForm(),[R]=i.useForm();oe.useBreakpoint().lg;const[z,w]=t.useState(!1),M=async l=>{const{data:S}=await k.custom({url:"",method:"post",meta:{operation:"createLoginReedemCode",variables:{phone:{value:l.phone,type:"String",required:!0},registrationNumber:{value:l.registrationNumber,type:"String",required:!1},email:{value:l.email,type:"String",required:!1}},fields:["success","message",{loginReedemCode:["id","code","phone","registrationNumber",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","isUsed","canDelete","canEdit","canManage"]}]}}).catch(()=>(o.error("Failed, creating Login Reedem Code"),{data:null})).then(A=>A);S&&(S.success?(o.success(S.message),u([S.loginReedemCode,...s]),R.resetFields()):o.error(S.message))},I=async l=>{const{data:S}=await k.custom({url:"",method:"post",meta:{operation:"resendLoginReedemCode",variables:{id:{value:l,type:"Int",required:!0}},fields:["success","message"]}}).catch(A=>(o.error("Failed, deleting Login Reedem Code"),{data:null})).then(A=>A);S&&(S.success?o.success(S.message):o.error(S.message))},v=async l=>{const{data:S}=await k.custom({url:"",method:"post",meta:{operation:"deleteLoginReedemCode",variables:{id:{value:l,type:"Int",required:!0}},fields:["success","message"]}}).catch(A=>(o.error("Failed, deleting Login Reedem Code"),{data:null})).then(A=>A);S&&(S.success?(o.success(S.message),u(s.filter(A=>A.id!==l))):o.error(S.message))},d=()=>{o("Canceled")},j=[{title:"Reedem Code",dataIndex:"code",fixed:!0,render:(l,S,A)=>e.jsx("span",{children:e.jsx("a",{children:S.code})})},{title:"User",dataIndex:"user",render:(l,S,A)=>{var y,n,m;return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:(S==null?void 0:S.user)&&e.jsxs("span",{children:["Full Name: ",(y=S==null?void 0:S.user)==null?void 0:y.firstName," ",(n=S==null?void 0:S.user)==null?void 0:n.middleName," ",(m=S==null?void 0:S.user)==null?void 0:m.lastName]})}),e.jsx("span",{children:(S==null?void 0:S.email)&&e.jsxs(ae,{children:["Email: ",S==null?void 0:S.email]})}),e.jsx("span",{children:(S==null?void 0:S.registrationNumber)&&e.jsxs(ae,{children:["Reg#: ",S==null?void 0:S.registrationNumber]})})]})}},{title:"Phone Number",dataIndex:"phone",fixed:!0,render:(l,S,A)=>e.jsx("span",{children:e.jsx("a",{children:S.phone})})},{title:"Is Used",dataIndex:"isUsed",render:(l,S,A)=>e.jsx("a",{children:S!=null&&S.isUsed?e.jsx("span",{style:{color:"green"},children:"Used"}):e.jsx("span",{style:{color:"red"},children:"Not Used"})})},{title:"Status",dataIndex:"isActive",render:(l,S,A)=>e.jsx("a",{children:S!=null&&S.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(l,S,A)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Resend this Reedem Code?",onConfirm:()=>I(S==null?void 0:S.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(S!=null&&S.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{size:"large",icon:e.jsx(is,{}),disabled:!(S!=null&&S.canDelete)})}),e.jsx(X,{title:"Are you sure to delete this Reedem Code?",onConfirm:()=>v(S==null?void 0:S.id),onCancel:()=>d,okText:"Yes",cancelText:"No",disabled:!(S!=null&&S.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{size:"large",icon:e.jsx(de,{}),disabled:!(S!=null&&S.canDelete)})})]})}],f=async(l,S="",A=20)=>{const{data:y}=await k.custom({url:"",method:"get",meta:{operation:"loginReedems",variables:{page:{value:l,type:"Int",required:!0},key:{value:S,type:"String",required:!1},pageSize:{value:A,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","code","phone",{user:["id","firstName","lastName","email","middleName","fullName","pic","isActive","isStaff","isAdmin"]},"created","updated","canEdit","canDelete","canManage","isActive","isUsed"]}]}});h(y.page),b(y.total),V(y.hasNext),u(y.results),T(!1)};return t.useEffect(()=>{f(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:10,children:e.jsx(i,{layout:"vertical",form:E,onFinish:l=>{h(1),s.length=0,f(1,l.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:14,style:{display:"flex",justifyContent:"end"},children:e.jsx(N,{icon:e.jsx(Ot,{}),size:"large",onClick:()=>w(!0),children:"Reedem"})})]}),e.jsx(le,{loading:B,columns:j,dataSource:s,scroll:{x:!0},pagination:{onChange:(l,S)=>{F(S),f(l,P,S)},total:g,pageSize:q,position:["bottomCenter"],showQuickJumper:!0}}),e.jsx(te,{title:"Creating Reedem Code",open:z,onClose:l=>w(l),width:"30vw",children:e.jsxs(e.Fragment,{children:[e.jsxs(i,{layout:"vertical",form:R,onFinish:l=>{M(l)},children:[e.jsx(i.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,type:"string",message:"Please input Phone Number"}],children:e.jsx(D,{size:"large",placeholder:"Phone Number ...",prefix:e.jsx(ss,{}),autoComplete:"off"})}),e.jsx(i.Item,{name:"email",label:"Email Address",children:e.jsx(D,{size:"large",placeholder:"Email Address ...",prefix:e.jsx(as,{}),autoComplete:"off",allowClear:!0})}),e.jsx(i.Item,{name:"registrationNumber",label:"Registration Number",children:e.jsx(D,{size:"large",placeholder:"Registration Number ...",prefix:e.jsx(ns,{}),autoComplete:"off",allowClear:!0})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"end"},children:e.jsx(N,{size:"large",onClick:()=>R.submit(),children:"Reedem"})})]})})]})},za=()=>(t.useEffect(()=>{document.title=ue.system_name+": Login Reedems"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Login Reedems"})]}),e.jsx(Da,{height:80})]})})),La=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(1),[q,F]=t.useState(0),[P,_]=t.useState(20),[x,V]=t.useState(""),[B,T]=t.useState(!1),[E,R]=t.useState(!0);ne();const[U]=i.useForm(),[z]=i.useForm(),M=!oe.useBreakpoint().lg,[I,v]=t.useState(!1),d=n=>{u(n),v(!0)},j=()=>{v(!1)},f=async n=>{const{data:m}=await k.custom({url:"",method:"post",meta:{operation:"updateWard",variables:{id:{value:n.id,type:"Int",required:!0},name:{value:n.name,type:"String",required:!0},isActive:{value:n.isActive,type:"Boolean",required:!0}},fields:["success","message",{ward:["id","name",{district:["id","name",{region:["id","name"]}]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}});m.success?(o.success(m.message),z.resetFields(),v(!1),h(r.map(O=>O.id===m.ward.id?m.ward:O))):o.error(m.message)},l=async n=>{const{data:m}=await k.custom({url:"",method:"post",meta:{operation:"deleteWard",variables:{id:{value:parseInt(n.toString()),type:"Int",required:!0}},fields:["success","message"]}});m.success?(o.success(m.message),h(r.filter(O=>O.id!==n))):o.error(m.message)},S=()=>{o("Canceled")},A=[{title:"Name",dataIndex:"name",fixed:!0,render:(n,m,O)=>e.jsx("span",{children:e.jsx("a",{children:m.name})})},{title:"District",dataIndex:"district",fixed:!0,render:(n,m,O)=>e.jsx("span",{children:e.jsx("a",{children:m.district.name})})},{title:"Region",dataIndex:"region",fixed:!0,render:(n,m,O)=>e.jsx("span",{children:e.jsx("a",{children:m.district.region.name})})},{title:"Created",dataIndex:"created",render:(n,m,O)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(m.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(n,m,O)=>e.jsx("a",{children:m!=null&&m.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(n,m,O)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this Ward?",onConfirm:()=>l(m==null?void 0:m.id),onCancel:()=>S,okText:"Yes",cancelText:"No",disabled:!(m!=null&&m.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(m!=null&&m.canDelete)})}),e.jsx(ye,{title:"Edit "+(m==null?void 0:m.name)+" Ward",color:"green",children:e.jsx(N,{icon:e.jsx(Se,{}),disabled:!(m!=null&&m.canEdit),onClick:()=>d(m)})})]})}],y=async(n,m="",O=20)=>{const{data:p}=await k.custom({url:"",method:"get",meta:{operation:"wards",variables:{page:{value:n,type:"Int",required:!0},key:{value:m,type:"String",required:!1},pageSize:{value:O,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name",{district:["id","name",{region:["id","name"]}]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});b(p.page),F(p.total),T(p.hasNext),h(p.results),R(!1)};return t.useEffect(()=>{y(g)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(W,{span:M?24:20,children:e.jsx(i,{layout:"vertical",form:U,onFinish:n=>{b(1),r.length=0,y(1,n.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{children:e.jsx(le,{loading:E,columns:A,dataSource:r,scroll:{y:window.innerHeight-310},pagination:{onChange:(n,m)=>{_(m),y(n,x,m)},onShowSizeChange:(n,m)=>{_(m),y(1,x,m)},showSizeChanger:!0,total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(te,{title:"Edit Ward Informations",width:"30vw",open:I,onCancel:j,children:e.jsx(Vt,{form:z,ward:s,onFinish:f})})]})},Ba=()=>(t.useEffect(()=>{document.title=ue.system_name+": Wards"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Wards"})]}),e.jsx(La,{height:80})]})})),Oa=a=>{t.useState();const[s,u]=t.useState([]),[r,h]=t.useState(1),[g,b]=t.useState(0),[q,F]=t.useState(20),[P,_]=t.useState(""),[x,V]=t.useState(!1),[B,T]=t.useState(!0);ne();const[E]=i.useForm();i.useForm();const U=!oe.useBreakpoint().lg,z=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(I,v,d)=>e.jsxs(Be,{direction:"vertical",children:[e.jsx("span",{children:v.fullName}),e.jsx("span",{children:v.email})]})},{title:"",dataIndex:"action",render:(I,v,d)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Are you sure to Add"}),e.jsx("span",{style:{fontWeight:"bolder",marginLeft:5},children:v.fullName}),e.jsx("span",{style:{marginLeft:5},children:"As Private Tutor?"})]}),onConfirm:()=>w(v.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(v!=null&&v.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(je,{}),disabled:!(v!=null&&v.canDelete)})})})}],w=async I=>{const{data:v}=await k.custom({url:"",method:"post",meta:{operation:"addPrivateTutor",variables:{userId:{value:parseInt(I.toString()),type:"Int",required:!0}},fields:["success","message",{privateTutor:["id",{user:["id","firstName","middleName","lastName","fullName","email","isActive","created","updated","canEdit","canDelete","canManage"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(o.remove(),o.error("Error occured while Adding Private Tutor"),{data:null})).then(d=>d);o.remove(),v&&(v.success?(o.success(v.message),a.onAdd(v.privateTutor)):o.error(v.message))},M=async(I,v="",d=20)=>{T(!0);const{data:j}=await k.custom({url:"",method:"get",meta:{operation:"notPrivateTutors",variables:{page:{value:I,type:"Int",required:!0},key:{value:v,type:"String",required:!1},pageSize:{value:d,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","firstName","middleName","lastName","fullName","email","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(o.remove(),o.error("Error occured while fetching examinations types"),{data:null})).then(f=>f);j&&(h(j.page),b(j.total),V(j.hasNext),u([...j.results])),T(!1)};return t.useEffect(()=>{M(r)},[a.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(W,{span:24,children:e.jsx(i,{layout:"vertical",form:E,onFinish:I=>{h(1),s.length=0,M(1,I.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(le,{loading:B,columns:z,dataSource:s,pagination:{onChange:(I,v)=>{F(v),M(I,P,v)},total:g,pageSize:q,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0,y:"68vh"}})]})},_a=a=>{t.useState();const[s,u]=t.useState([]),[r,h]=t.useState(1),[g,b]=t.useState(0),[q,F]=t.useState(20),[P,_]=t.useState(""),[x,V]=t.useState(!1),[B,T]=t.useState(!0);ne();const[E]=i.useForm();i.useForm(),oe.useBreakpoint().lg;const[U,z]=t.useState(!1),w=async f=>{u([f,...s])},M=async f=>{const{data:l}=await k.custom({url:"",method:"post",meta:{operation:"deletePrivateTutor",variables:{privateTutorId:{value:parseInt(f.toString()),type:"Int",required:!0}},fields:["success","message"]}});l.success?(o.success(l.message),u(s.filter(S=>S.id!==f))):o.error(l.message)},I=()=>{o("Canceled")},v=async(f,l)=>{const{data:S}=await k.custom({url:"",method:"post",meta:{operation:"blockUnblockPrivateTutor",variables:{privateTutorId:{value:parseInt(f.toString()),type:"Int",required:!0},blocked:{value:l,type:"Boolean",required:!0}},fields:["success","message",{privateTutor:["id",{user:["id","firstName","middleName","lastName","fullName","email","isActive","created","updated","canEdit","canDelete","canManage"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(l?o.error("Error occured while Unblocking Private Tutor"):o.error("Error occured while Blocking Private Tutor"),{data:null})).then(A=>A);S&&(S.success?(o.success(S.message),u(s.map(A=>A.id===f?S.privateTutor:A))):o.error(S.message))},d=[{title:"Full Name",dataIndex:"fullName",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:e.jsx("a",{children:l.user.fullName})})},{title:"Email",dataIndex:"email",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:l.user.email})},{title:"Created",dataIndex:"created",render:(f,l,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(l.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(f,l,S)=>e.jsx("span",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,l,S)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[l.isActive?e.jsx(X,{title:"Are you sure to Block this Private Tutor?",onConfirm:()=>v(l==null?void 0:l.id,!1),onCancel:()=>I,okText:"Block",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(Ze,{}),disabled:!(l!=null&&l.canDelete),danger:!0})}):e.jsx(X,{title:"Are you sure to Unblock this Private Tutor?",onConfirm:()=>v(l==null?void 0:l.id,!0),onCancel:()=>I,okText:"Unblock",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(Xe,{}),disabled:!(l!=null&&l.canDelete),danger:!0})}),e.jsx(X,{title:"Are you sure to delete this Private Tutor?",onConfirm:()=>M(l==null?void 0:l.id),onCancel:()=>I,okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(de,{}),disabled:!(l!=null&&l.canDelete),danger:!0})})]})}],j=async(f,l="",S=20)=>{const{data:A}=await k.custom({url:"",method:"get",meta:{operation:"privateTutors",variables:{page:{value:f,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:S,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{user:["id","firstName","middleName","lastName","fullName","email"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(y=>(o.error("Error occured while fetching examinations types"),{data:null})).then(y=>y);A&&(h(A.page),b(A.total),V(A.hasNext),u([...A.results])),T(!1)};return t.useEffect(()=>{j(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:8,children:e.jsx(i,{layout:"vertical",form:E,onFinish:f=>{h(1),s.length=0,j(1,f.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(je,{}),onClick:()=>z(!0),danger:!0,children:"Add Tutor"})})]}),e.jsx(le,{loading:B,columns:d,dataSource:s,pagination:{onChange:(f,l)=>{F(l),j(f,P,l)},onShowSizeChange:(f,l)=>{F(l),j(f,P,l)},total:g,pageSize:q,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:window.innerHeight-310}}),e.jsx(Ue,{title:"Adding Private Tutors",anchor:"right",width:"40vw",onClose:f=>z(f),open:U,children:e.jsx(Oa,{onAdd:w,randKey:Math.random()})})]})},Ra=()=>(t.useEffect(()=>{document.title=ue.system_name+": Private Tutors"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Private Tutors"})]}),e.jsx(_a,{height:80})]})})),Ua=a=>{const s=async u=>{const{data:r}=await k.custom({url:"",method:"post",meta:{operation:"createPaymentPackage",variables:{name:{value:u.name,type:"String",required:!0},code:{value:u.code,type:"String",required:!0},amount:{value:u.amount,type:"Float",required:!0},description:{value:u.description,type:"String",required:!1},vatIncluded:{value:u.vat_included,type:"Boolean",required:!0}},fields:["success","message",{paymentPackage:["id","name","code","description","amount","isActive","vatIncluded","created","updated","canEdit","canDelete","canManage"]}]}}).catch(h=>(o.error("Error in Creating Payment Package"),{data:null})).then(h=>h);r&&(r.success?(o.success("Payment Package Created Successfully"),a.onFinish(r.paymentPackage)):o.error(r.message))};return t.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:u=>{s(u)},requiredMark:!0,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code ..."}],children:e.jsx(D,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(i.Item,{name:"amount",label:"Amount",initialValue:0,rules:[{required:!0,type:"number",min:0}],children:e.jsx(Pe,{value:0,style:{width:"100%"},size:"large"})}),e.jsx(i.Item,{name:"vat_included",valuePropName:"checked",initialValue:!0,rules:[{required:!0,type:"boolean",message:"Please Check ..."}],children:e.jsx(xe,{children:"VAT Included"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",htmlType:"submit",icon:e.jsx(Bt,{}),danger:!0,children:"Save"})})]})})},wa=a=>{const s=async u=>{const{data:r}=await k.custom({url:"",method:"post",meta:{operation:"updatePaymentPackage",variables:{paymentPackageId:{value:u.payment_package_id,type:"Int",required:!0},name:{value:u.name,type:"String",required:!0},code:{value:u.code,type:"String",required:!0},amount:{value:u.amount,type:"Float",required:!0},description:{value:u.description,type:"String",required:!1},vatIncluded:{value:u.vat_included,type:"Boolean",required:!0}},fields:["success","message",{paymentPackage:["id","name","code","description","vatIncluded","amount","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(h=>(o.error("Error in Updating Payment Package"),{data:null})).then(h=>h);r&&(r.success?(o.success("Payment Package Created Successfully"),a.onFinish(r.paymentPackage)):o.error(r.message))};return t.useEffect(()=>{a.paymentPackage&&a.form.setFieldsValue({name:a.paymentPackage.name,code:a.paymentPackage.code,amount:a.paymentPackage.amount,description:a.paymentPackage.description,vat_included:a.paymentPackage.vatIncluded})},[a.randKey]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:u=>{u.payment_package_id=a.paymentPackage.id,s(u)},requiredMark:!0,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code ..."}],children:e.jsx(D,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(i.Item,{name:"amount",label:"Amount",initialValue:0,rules:[{required:!0,type:"number",min:0}],children:e.jsx(Pe,{value:0,style:{width:"100%"},size:"large"})}),e.jsx(i.Item,{name:"vat_included",valuePropName:"checked",initialValue:!0,rules:[{required:!0,type:"boolean",message:"Please Check ..."}],children:e.jsx(xe,{children:"VAT Included"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Update"})})]})})},Ht=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(1),[q,F]=t.useState(0),[P,_]=t.useState(20),[x,V]=t.useState(""),[B,T]=t.useState(!1),[E,R]=t.useState(!0);ne();const[U]=i.useForm(),[z]=i.useForm(),[w]=i.useForm();oe.useBreakpoint().lg;const[I,v]=t.useState(!1),[d,j]=t.useState(!1),f=p=>{u(p),j(!0)},l=async p=>{h(r.map(c=>c.id===p.id?p:c)),z.resetFields(),j(!1)},S=async p=>{h([p,...r]),w.resetFields(),v(!1)},A=async p=>{const{data:c}=await k.custom({url:"",method:"post",meta:{operation:"deletePaymentPackage",variables:{paymentPackageId:{value:parseInt(p.toString()),type:"Int",required:!0}},fields:["success","message"]}});c.success?(o.success(c.message),h(r.filter(Z=>Z.id!==p))):o.error(c.message)},y=()=>{o("Canceled")},n=async(p,c)=>{const{data:Z}=await k.custom({url:"",method:"post",meta:{operation:"blockUnblockPaymentPackage",variables:{paymentPackageId:{value:parseInt(p.toString()),type:"Int",required:!0},blocked:{value:c,type:"Boolean",required:!0}},fields:["success","message",{paymentPackage:["id","name","code","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(()=>(c?o.error("Error occured while Unblocking Payment Package"):o.error("Error occured while Blocking Payment Package"),{data:null})).then(G=>G);Z&&(Z.success?(o.success(Z.message),h(r.map(G=>G.id===p?Z.paymentPackage:G))):o.error(Z.message))},m=[{title:"Name",dataIndex:"name",fixed:!0,render:(p,c,Z)=>e.jsx("span",{children:e.jsx("a",{children:c.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(p,c,Z)=>e.jsx("span",{children:c.code})},{title:"Amount",dataIndex:"amount",fixed:!0,render:(p,c,Z)=>e.jsxs("span",{children:[c.amount,e.jsx("span",{style:{marginLeft:10},children:c.vatIncluded?e.jsx(ae,{color:"green",children:"+VAT"}):e.jsx(ae,{color:"red",children:"1VAT"})})]})},{title:"Created",dataIndex:"created",render:(p,c,Z)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(c.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(p,c,Z)=>e.jsx("span",{children:c!=null&&c.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(p,c,Z)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[c.isActive?e.jsx(X,{title:"Are you sure to Block this Payment Package?",onConfirm:()=>n(c==null?void 0:c.id,!1),onCancel:()=>y,okText:"Block",cancelText:"No",disabled:!(c!=null&&c.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(Ze,{}),disabled:!(c!=null&&c.canManage),danger:!0})}):e.jsx(X,{title:"Are you sure to Unblock this Payment Package?",onConfirm:()=>n(c==null?void 0:c.id,!0),onCancel:()=>y,okText:"Unblock",cancelText:"No",disabled:!(c!=null&&c.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(Xe,{}),disabled:!(c!=null&&c.canManage),danger:!0})}),e.jsx(X,{title:"Are you sure to delete this Payment Package?",onConfirm:()=>A(c==null?void 0:c.id),onCancel:()=>y,okText:"Yes",cancelText:"No",disabled:!(c!=null&&c.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{style:{marginRight:3},icon:e.jsx(de,{}),disabled:!(c!=null&&c.canDelete),danger:!0})}),e.jsx(N,{style:{marginRight:3},icon:e.jsx(Se,{}),disabled:!(c!=null&&c.canEdit),onClick:()=>f(c),danger:!0})]})}],O=async(p,c="",Z=20)=>{const{data:G}=await k.custom({url:"",method:"get",meta:{operation:"paymentPackages",variables:{page:{value:p,type:"Int",required:!0},key:{value:c,type:"String",required:!1},pageSize:{value:Z,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","code","amount","vatIncluded","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(J=>(o.error("Error occured while fetching Payment Packages"),{data:null})).then(J=>J);G&&(b(G.page),F(G.total),T(G.hasNext),h([...G.results])),R(!1)};return t.useEffect(()=>{O(g)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:8,children:e.jsx(i,{layout:"vertical",form:U,onFinish:p=>{b(1),r.length=0,O(1,p.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:16,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(je,{}),onClick:()=>v(!0),danger:!0,children:"Add Payment Package"})})]}),e.jsx(le,{loading:E,columns:m,dataSource:r,pagination:{onChange:(p,c)=>{_(c),O(p,x,c)},onShowSizeChange:(p,c)=>{_(c),O(p,x,c)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!1},scroll:{y:window.innerHeight-310}}),e.jsx(te,{title:"Adding Payment Package",width:"40vw",onClose:()=>v(!1),onOk:()=>v(!1),open:I,destroyOnClose:!0,children:e.jsx(Ua,{form:w,onFinish:S})}),e.jsx(te,{title:"Edit Payment Package",width:"40vw",onClose:p=>j(p),open:d,children:e.jsx(wa,{form:z,onFinish:l,paymentPackage:s,randKey:Math.random()})})]})},Ka=()=>(t.useEffect(()=>{document.title=ue.system_name+": Payment Packages"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Payment Packages"})]}),e.jsx(Ht,{height:80})]})})),Va=a=>{t.useState();const[s,u]=t.useState([]),[r,h]=t.useState(1),[g,b]=t.useState(0),[q,F]=t.useState(20),[P,_]=t.useState(""),[x,V]=t.useState(!1),[B,T]=t.useState(!0);ne();const[E]=i.useForm(),U=!oe.useBreakpoint().lg,z=async v=>{const{data:d}=await k.custom({url:"",method:"post",meta:{operation:"deleteOrder",variables:{orderId:{value:parseInt(v.toString()),type:"Int",required:!0}},fields:["success","message"]}});d.success?(o.success(d.message),u(s.filter(j=>j.id!==v))):o.error(d.message)},w=async(v,d)=>{const{data:j}=await k.custom({url:"",method:"post",meta:{operation:"blockUnblockOrder",variables:{orderId:{value:parseInt(v.toString()),type:"Int",required:!0},blocked:{value:d,type:"Boolean",required:!0}},fields:["success","message",{order:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(f=>(d?o.error("Error occured while Unblocking Payment Package"):o.error("Error occured while Blocking Payment Package"),{data:null})).then(f=>f);j&&(j.success?(o.success(j.message),u(s.map(f=>f.id===v?j.order:f))):o.error(j.message))},M=[{title:"Order#",dataIndex:"order_number",fixed:!0,render:(v,d,j)=>e.jsx("span",{children:e.jsx("a",{children:d.orderNumber})})},{title:"Client",dataIndex:"client",fixed:!0,render:(v,d,j)=>e.jsx("span",{children:d.user.fullName})},{title:"Amount",dataIndex:"amount",fixed:!0,render:(v,d,j)=>e.jsxs("span",{children:[d.amount,e.jsx("span",{style:{marginLeft:10},children:d.vatIncluded?e.jsx(ae,{color:"green",children:"+VAT"}):e.jsx(ae,{color:"red",children:"1VAT"})})]})},{title:"Created",dataIndex:"created",render:(v,d,j)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(d.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(v,d,j)=>e.jsx("span",{children:d!=null&&d.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,d,j)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[d.isActive?e.jsx(X,{title:"Are you sure to Block this Order?",onConfirm:()=>w(d==null?void 0:d.id,!1),onCancel:()=>{},okText:"Block",cancelText:"No",disabled:!(d!=null&&d.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Ze,{}),disabled:!(d!=null&&d.canManage)})}):e.jsx(X,{title:"Are you sure to Unblock this Order?",onConfirm:()=>w(d==null?void 0:d.id,!0),onCancel:()=>{},okText:"Unblock",cancelText:"No",disabled:!(d!=null&&d.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Xe,{}),disabled:!(d!=null&&d.canManage)})}),e.jsx(X,{title:"Are you sure to delete this Order?",onConfirm:()=>z(d==null?void 0:d.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(d!=null&&d.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(d!=null&&d.canDelete)})})]})}],I=async(v,d="",j=20)=>{const{data:f}=await k.custom({url:"",method:"get",meta:{operation:"orders",variables:{page:{value:v,type:"Int",required:!0},key:{value:d,type:"String",required:!1},pageSize:{value:j,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(l=>(o.error("Error occured while fetching Orders"),{data:null})).then(l=>l);f&&(h(f.page),b(f.total),V(f.hasNext),u([...f.results])),T(!1)};return t.useEffect(()=>{I(r)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(W,{span:U?24:20,children:e.jsx(i,{layout:"vertical",form:E,onFinish:v=>{h(1),s.length=0,I(1,v.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(le,{loading:B,columns:M,dataSource:s,pagination:{onChange:(v,d)=>{F(d),I(v,P,d)},total:g,pageSize:q,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})]})},Ha=()=>(t.useEffect(()=>{document.title=ue.system_name+": Orders"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Orders"})]}),e.jsx(Va,{height:80})]})})),Wa=a=>{t.useState();const[s,u]=t.useState([]),[r,h]=t.useState(1),[g,b]=t.useState(0),[q,F]=t.useState(20),[P,_]=t.useState(""),[x,V]=t.useState(!1),[B,T]=t.useState(!0);ne();const[E]=i.useForm(),U=!oe.useBreakpoint().lg,z=async v=>{const{data:d}=await k.custom({url:"",method:"post",meta:{operation:"deleteOrderPayment",variables:{orderPaymentId:{value:parseInt(v.toString()),type:"Int",required:!0}},fields:["success","message"]}});d.success?(o.success(d.message),u(s.filter(j=>j.id!==v))):o.error(d.message)},w=async(v,d)=>{const{data:j}=await k.custom({url:"",method:"post",meta:{operation:"blockUnblockOrderPayment",variables:{orderPaymentId:{value:parseInt(v.toString()),type:"Int",required:!0},blocked:{value:d,type:"Boolean",required:!0}},fields:["success","message",{orderPayment:["id","amount","paymentStatus","paymentDate","isActive","created","updated","canEdit","canDelete","canManage",{order:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}]}}).catch(f=>(d?o.error("Error occured while Unblocking Order Payment"):o.error("Error occured while Blocking Order Payment"),{data:null})).then(f=>f);j&&(j.success?(o.success(j.message),u(s.map(f=>f.id===v?j.order:f))):o.error(j.message))},M=[{title:"Order#",dataIndex:"order_number",fixed:!0,render:(v,d,j)=>e.jsx("span",{children:e.jsx("a",{children:d.orderNumber})})},{title:"Client",dataIndex:"client",fixed:!0,render:(v,d,j)=>e.jsx("span",{children:d.user.fullName})},{title:"Order Amount",dataIndex:"amount",fixed:!0,render:(v,d,j)=>e.jsxs("span",{children:[d.order.amount,e.jsx("span",{style:{marginLeft:10},children:d.vatIncluded?e.jsx(ae,{color:"green",children:"+VAT"}):e.jsx(ae,{color:"red",children:"1VAT"})})]})},{title:"Paid Amount",dataIndex:"paidAmount",fixed:!0,render:(v,d,j)=>e.jsx("span",{children:d.amount})},{title:"Receipt#",dataIndex:"receipt",fixed:!0,render:(v,d,j)=>e.jsx("span",{children:d.receiptNumber})},{title:"Payment Date",dataIndex:"paymentDate",render:(v,d,j)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(d.paymentDate).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(v,d,j)=>e.jsx("span",{children:d!=null&&d.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(v,d,j)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[d.isActive?e.jsx(X,{title:"Are you sure to Block this Order?",onConfirm:()=>w(d==null?void 0:d.id,!1),onCancel:()=>{},okText:"Block",cancelText:"No",disabled:!(d!=null&&d.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Ze,{}),disabled:!(d!=null&&d.canManage)})}):e.jsx(X,{title:"Are you sure to Unblock this Order?",onConfirm:()=>w(d==null?void 0:d.id,!0),onCancel:()=>{},okText:"Unblock",cancelText:"No",disabled:!(d!=null&&d.canManage),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(Xe,{}),disabled:!(d!=null&&d.canManage)})}),e.jsx(X,{title:"Are you sure to delete this Order?",onConfirm:()=>z(d==null?void 0:d.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(d!=null&&d.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(d!=null&&d.canDelete)})})]})}],I=async(v,d="",j=20)=>{const{data:f}=await k.custom({url:"",method:"get",meta:{operation:"ordersPayments",variables:{page:{value:v,type:"Int",required:!0},key:{value:d,type:"String",required:!1},pageSize:{value:j,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","amount","paymentStatus","paymentDate","isActive","created","updated","canEdit","canDelete","canManage",{order:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}]}}).catch(l=>(o.error("Error occured while fetching Orders Payments"),{data:null})).then(l=>l);f&&(h(f.page),b(f.total),V(f.hasNext),u([...f.results])),T(!1)};return t.useEffect(()=>{I(r)},[]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{style:{marginTop:10},children:e.jsx(W,{span:U?24:20,children:e.jsx(i,{layout:"vertical",form:E,onFinish:v=>{h(1),s.length=0,I(1,v.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(le,{loading:B,columns:M,dataSource:s,pagination:{onChange:(v,d)=>{F(d),I(v,P,d)},total:g,pageSize:q,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})]})},Ya=()=>(t.useEffect(()=>{document.title=ue.system_name+": Orders Payments"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Orders Payments"})]}),e.jsx(Wa,{height:80})]})})),Ga=()=>(t.useEffect(()=>{document.title=ue.system_name+": Order Payments"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Order Payments"})]}),e.jsx(Ht,{height:80})]})})),Qa=a=>{const[s,u]=t.useState(a.carrier.allowPayment),[r,h]=t.useState(a.carrier.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.carrier.name,allowPayment:a.carrier.allowPayment,isActive:a.carrier.isActive})},[a.form,a.carrier]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:g=>{g.isActive=r,g.allowPayment=s,g.id=parseInt(a.carrier.id),a.onFinish(g)},requiredMark:!1,autoComplete:"off",children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ...",autoComplete:"off"})}),e.jsx(i.Item,{name:"allowPayment",children:e.jsx(xe,{checked:s,onChange:()=>u(!s),children:"Allow Payment"})}),e.jsx(i.Item,{name:"isActive",children:e.jsx(xe,{checked:r,onChange:()=>h(!r),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Ja=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(1),[q,F]=t.useState(0),[P,_]=t.useState(20),[x,V]=t.useState(""),[B,T]=t.useState(!1),[E,R]=t.useState(!0);ne();const[U]=i.useForm(),[z]=i.useForm(),M=!oe.useBreakpoint().lg,[I,v]=t.useState(!1),d=n=>{u(n),v(!0)},j=async n=>{const{data:m}=await k.custom({url:"",method:"post",meta:{operation:"updateTelecomCarrier",variables:{id:{value:n.id,type:"Int",required:!0},name:{value:n.name,type:"String",required:!0},allowPayment:{value:n.allowPayment,type:"Boolean",required:!0},isActive:{value:n.isActive,type:"Boolean",required:!0}},fields:["success","message",{telecomCarrier:["id","name","allowPayment","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(O=>({data:null})).then(O=>O);m&&(m.success?(o.success(m.message),z.resetFields(),v(!1),h(r.map(O=>parseInt(O.id.toString())===parseInt(m.telecomCarrier.id.toString())?m.telecomCarrier:O))):o.error(m.message))},f=async()=>{const{data:n}=await k.custom({url:"",method:"post",meta:{operation:"syncTelecomCarriers",variables:{},fields:["success","message"]}});n.success?(o.success(n.message),y(1,"",20)):o.error(n.message)},l=async n=>{const{data:m}=await k.custom({url:"",method:"post",meta:{operation:"deleteTelecomCarrier",variables:{id:{value:n,type:"Int",required:!0}},fields:["success","message"]}});m.success?(o.success(m.message),h(r.filter(O=>O.id!==n))):m.message},S=()=>{o("Canceled")},A=[{title:"Name",dataIndex:"name",fixed:!0,render:(n,m,O)=>e.jsx("span",{children:e.jsx("a",{children:m.name})})},{title:"Allow Payment",dataIndex:"allowPayment",fixed:!0,render:(n,m,O)=>e.jsx("span",{children:m.allowPayment?e.jsx(ae,{color:"green",children:"Yes"}):e.jsx(ae,{color:"red",children:"NO"})})},{title:"Created",dataIndex:"created",render:(n,m,O)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(m.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(n,m,O)=>e.jsx("a",{children:m!=null&&m.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(n,m,O)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this Telecom Carrier?",onConfirm:()=>l(m==null?void 0:m.id),onCancel:()=>S,okText:"Yes",cancelText:"No",disabled:!(m!=null&&m.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(m!=null&&m.canDelete)})}),e.jsx(N,{disabled:!(m!=null&&m.canEdit),onClick:()=>d(m),icon:e.jsx(Se,{})})]})}],y=async(n,m="",O=20)=>{const{data:p}=await k.custom({url:"",method:"get",meta:{operation:"telecomCarriers",variables:{page:{value:n,type:"Int",required:!0},key:{value:m,type:"String",required:!1},pageSize:{value:O,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","allowPayment","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch(c=>(o.error(c.message),{data:null})).then(c=>c);p&&(b(p.page),F(p.total),T(p.hasNext),h(p.results)),R(!1)};return t.useEffect(()=>{y(g,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:M?24:20,children:e.jsx(i,{layout:"vertical",form:U,onFinish:n=>{b(1),r.length=0,y(1,n.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:M?24:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(ve,{}),onClick:()=>f(),children:"Sync Mtaa"})})]}),e.jsx("div",{children:e.jsx(le,{loading:E,columns:A,dataSource:r,scroll:{x:!0},pagination:{onChange:(n,m)=>{_(m),y(n,x,m)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(te,{title:"Edit Telecom Carrier Informations",width:"20%",open:I,onClose:n=>v(n),children:e.jsx(Qa,{form:z,carrier:s,onFinish:j})})]})},$a=()=>(t.useEffect(()=>{document.title=ue.system_name+": Telecom Carriers"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Telecom Carriers"})]}),e.jsx(Ja,{height:80})]})})),Za=a=>{const[s,u]=t.useState([]),[r,h]=t.useState(!0),[g,b]=t.useState(1);t.useState(25);const[q,F]=t.useState(""),[P]=i.useForm();t.useState(0),t.useState(0);const[_,x]=t.useState(!0);ne();const V=async T=>{var R,U;const{data:E}=await k.custom({url:"",method:"post",meta:{operation:"addCombinationSubject",variables:{combinationId:{value:parseInt((R=a.combination)!=null&&R.id?(U=a.combination)==null?void 0:U.id.toString():"0"),type:"Int",required:!0},subjectId:{value:parseInt(T?T.toString():"0"),type:"Int",required:!0}},fields:["success","message",{combination:["id","name","code","description",{subjects:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});o.remove(),E.success?(o.success(E.message),s.length=0,u([]),B(1,q),a.onAdd(E.combination)):o.error(E.message)},B=async(T,E="")=>{var U,z;const{data:R}=await k.custom({url:"",method:"get",meta:{operation:"combinationSubjectsToAdd",variables:{combinationId:{value:parseInt((U=a.combination)!=null&&U.id?(z=a.combination)==null?void 0:z.id.toString():"0"),type:"Int",required:!0},page:{value:T,type:"Int",required:!0},key:{value:E,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description",{schoolType:["id","name"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}});R.hasNext&&(x(R.hasNext),b(R.page+1),u([...s,...R.results])),h(!1)};return t.useEffect(()=>{s.length=0,u([]),B(1)},[a.randKey,a.combination]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsx(W,{span:24,children:e.jsx(i,{layout:"vertical",form:P,onFinish:T=>{F(T.key),s.length=0,u([]),B(1,T.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search Adminstrator(s)...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(Fe,{spinning:r,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"70vh",overflowY:"auto"},children:e.jsx(Ce,{itemLayout:"horizontal",dataSource:s,renderItem:T=>{var E;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Ce.Item,{style:{margin:0,padding:0},actions:[e.jsx(X,{placement:"topLeft",title:"Adding "+T.name+" to "+((E=a.combination)==null?void 0:E.name)+"?",onConfirm:()=>V(T.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(je,{})})})],children:e.jsx(Ce.Item.Meta,{title:e.jsxs("a",{children:[T.name,e.jsx(ae,{color:"green",style:{marginLeft:10},children:T.schoolType.name})]})})},"file-"+T.id)})}})}),_&&e.jsx("div",{style:{position:"absolute",bottom:0,width:"100%",textAlign:"center"},children:e.jsx(N,{type:"primary",onClick:()=>{B(g,q)},children:"Load More"})})]})]})},Xa=a=>{const[s,u]=t.useState([]),[r,h]=t.useState(!0),[g,b]=t.useState(1);t.useState(25);const[q,F]=t.useState(""),[P]=i.useForm();t.useState(0),t.useState(0);const[_,x]=t.useState(!0);ne();const V=async T=>{const{data:E}=await k.custom({url:"",method:"post",meta:{operation:"removeCombinationSubject",variables:{combinationSubjectId:{value:T,type:"Int",required:!0}},fields:["success","message",{combination:["id","name","code","description",{subjects:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});E.success?(o.success(E.message),s.length=0,u([]),B(1,q),a.onAdd(E.combination)):o.error(E.message)},B=async(T,E="")=>{var U,z;const{data:R}=await k.custom({url:"",method:"get",meta:{operation:"combinationSubjects",variables:{combinationId:{value:parseInt((U=a.combination)!=null&&U.id?(z=a.combination)==null?void 0:z.id.toString():"0"),type:"Int",required:!0},page:{value:T,type:"Int",required:!0},key:{value:E,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{combination:["id","name","code"]},{subject:["id","name",{schoolType:["id","name"]}]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}});x(R.hasNext),b(R.page+1),u([...s,...R.results]),h(!1)};return t.useEffect(()=>{s.length=0,u([]),B(1)},[a.randKey,a.combination]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsx(W,{span:24,children:e.jsx(i,{layout:"vertical",form:P,onFinish:T=>{F(T.key),s.length=0,u([]),B(1,T.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search Adminstrator(s)...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs(Fe,{spinning:r,children:[e.jsx("div",{id:"scrollableAdminstratorDiv",style:{maxHeight:"60vh",overflowY:"auto"},children:e.jsx(Ce,{itemLayout:"horizontal",dataSource:s,renderItem:T=>{var E;return e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Ce.Item,{style:{margin:0,padding:0},actions:[e.jsx(X,{placement:"topLeft",title:"Removing "+T.subject.name+" to "+((E=a.combination)==null?void 0:E.name)+"?",onConfirm:()=>V(T.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{})})})],children:e.jsx(Ce.Item.Meta,{title:e.jsxs("a",{children:[T.subject.name,e.jsx(ae,{color:"green",style:{marginLeft:10},children:T.subject.schoolType.name})]})})},"file-"+T.id)})}})}),_&&e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:10},children:e.jsx(N,{type:"primary",onClick:()=>{B(g,q)},children:"Load More"})})]})]})},en=a=>{const[s,u]=t.useState(a.combination.isActive),[r]=i.useForm(),h=async g=>{const{data:b}=await k.custom({url:"",method:"post",meta:{operation:"updateCombination",variables:{combinationId:{value:g.combination_id,type:"Int",required:!0},name:{value:g.name,type:"String",required:!0},code:{value:g.code,type:"String",required:!0},description:{value:g.description,type:"String",required:!1},isActive:{value:s,type:"Boolean",required:!1}},fields:["success","message",{combination:["id","name","code","description",{subjects:["id","name"]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}});b.success?(o.success(b.message),r.resetFields(),a.onFinish(b.combination)):o.error(b.message)};return t.useEffect(()=>{r.setFieldsValue({name:a.combination.name,code:a.combination.code,is_active:a.combination.isActive})},[a.combination]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:r,onFinish:g=>{g.is_active=s,g.combination_id=parseInt(a.combination.id.toString()),h(g)},requiredMark:!1,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx(D,{size:"large",placeholder:"Enter Code ..."})}),e.jsx(i.Item,{name:"is_active",children:e.jsx(xe,{checked:s,onChange:()=>u(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},tn=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(1),[q,F]=t.useState(0),[P,_]=t.useState(20),[x,V]=t.useState(""),[B,T]=t.useState(!1),[E,R]=t.useState(!0);ne();const[U]=i.useForm();i.useForm();const w=!oe.useBreakpoint().lg,[M,I]=t.useState(!1),[v,d]=t.useState(!1),[j,f]=t.useState(!1),l=L=>{u(L),d(!0)},S=L=>{u(L),f(!0)},A=L=>{u(L),I(!0)},y=async L=>{h(r.map(C=>C.id.toString()===L.id.toString()?L:C)),I(!1)},n=async()=>{const{data:L}=await k.custom({url:"",method:"post",meta:{operation:"syncCombinations",variables:{},fields:["success","message"]}});L.success?(o.success(L.message),c(g,"",20)):o.error(L.message)},m=async L=>{const{data:C}=await k.custom({url:"",method:"post",meta:{operation:"deleteRegion",variables:{id:{value:L,type:"Int",required:!0}},fields:["success","message"]}});C.success?(o.success(C.message),h(r.filter(Y=>Y.id!==L))):o.error(C.message)},O=()=>{o("Canceled")},p=[{title:"Name",dataIndex:"name",fixed:!0,render:(L,C,Y)=>e.jsx("span",{children:e.jsx("a",{children:C.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(L,C,Y)=>e.jsx("span",{children:e.jsx("a",{children:C.code})})},{title:"Subjects",dataIndex:"subjects",fixed:!0,render:(L,C,Y)=>{var ie;return e.jsxs("span",{children:[C.subjects.length===0&&e.jsx(ae,{color:"red",children:"No Subjects Added"}),C.subjects.length>0&&((ie=C==null?void 0:C.subjects)==null?void 0:ie.map(Ie=>e.jsx(ae,{color:"green",children:Ie.name},Ie.id))),e.jsx(ye,{title:"Click to add more subjects",color:"green",children:e.jsx(N,{icon:e.jsx(je,{}),onClick:()=>l(C)})}),e.jsx(ye,{title:"Click to View Subjects",color:"green",children:e.jsx(N,{icon:e.jsx(Ge,{}),onClick:()=>S(C)})})]})}},{title:"Created",dataIndex:"created",render:(L,C,Y)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(C.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(L,C,Y)=>e.jsx("a",{children:C!=null&&C.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(L,C,Y)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this member?",onConfirm:()=>m(C==null?void 0:C.id),onCancel:()=>O,okText:"Yes",cancelText:"No",disabled:!(C!=null&&C.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(C!=null&&C.canDelete),danger:!0})}),e.jsx(N,{disabled:!(C!=null&&C.canEdit),onClick:()=>A(C),icon:e.jsx(Se,{}),danger:!0})]})}],c=async(L,C="",Y=20)=>{const{data:ie}=await k.custom({url:"",method:"get",meta:{operation:"combinations",variables:{page:{value:L,type:"Int",required:!0},key:{value:C,type:"String",required:!1},pageSize:{value:Y,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description",{subjects:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});b(ie.page),F(ie.total),T(ie.hasNext),h(ie.results),R(!1)},Z=async L=>{h(r.map(C=>parseInt(C.id.toString())===parseInt(L.id.toString())?L:C))},G=()=>e.jsx(e.Fragment,{children:e.jsx(i,{layout:"vertical",form:U,onFinish:L=>{b(1),r.length=0,c(1,L.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),J=()=>e.jsx(e.Fragment,{children:e.jsx(N,{size:"large",icon:e.jsx(ve,{}),onClick:()=>n(),children:"Sync Combinations"})});return t.useEffect(()=>{c(g,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[w&&e.jsxs(e.Fragment,{children:[e.jsx(W,{span:24,style:{display:"flex",justifyContent:"flex-end"},children:J()}),e.jsx(W,{span:24,children:G()})]}),!w&&e.jsxs(e.Fragment,{children:[e.jsx(W,{span:12,children:G()}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:J()})]})]}),e.jsx("div",{children:e.jsx(le,{loading:E,columns:p,dataSource:r,scroll:{x:!0},pagination:{onChange:(L,C)=>{_(C),c(L,x,C)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(te,{title:"Editting "+(s==null?void 0:s.name)+" Informations",width:w?"100vw":"40vw",open:M,onClose:L=>I(L),children:e.jsx(en,{combination:s,onFinish:y})}),e.jsx(te,{title:"Adding Subjects to "+(s==null?void 0:s.name),width:w?"100vw":"40vw",destroyOnClose:!0,open:v,onClose:L=>d(L),children:e.jsx(Za,{combination:s,onAdd:Z})}),e.jsx(te,{title:(s==null?void 0:s.name)+" Subjects",width:w?"100vw":"40vw",open:j,onClose:L=>f(L),children:e.jsx(Xa,{combination:s,onAdd:Z})})]})},sn=()=>{const{data:a}=Ae(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{document.title=ue.system_name+": Combinations",s()},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/combinations",children:"Home"})}),e.jsx(K.Item,{children:"Combinations"})]}),e.jsx(tn,{height:80})]})})},{Option:an}=fe,{TextArea:nn}=D,rn=a=>Array.isArray(a)?a:a==null?void 0:a.fileList,ln=a=>{const[s,u]=t.useState([]),[r]=i.useForm(),h=async()=>{const{data:b}=await k.custom({url:"",method:"get",meta:{operation:"schoolTypes",variables:{showAll:{value:!0,type:"Boolean",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});u(b.results)},g=async b=>{const{data:q}=await k.custom({url:"",method:"post",meta:{operation:"createSubject",variables:{schoolTypeId:{value:b.school_type_id,type:"Int",required:!0},name:{value:b.name,type:"String",required:!0},description:{value:b.description,type:"String",required:!1},icon:{value:b.icon,type:"Upload",required:!1}},fields:["success","message",{subject:["id","name","description",{schoolType:["id","name","code"]},"icon","isActive","created","updated","canEdit","canDelete","canManage"]}]}});q.success?(o.success(q.message),a.onFinish(q.subject),r.resetFields()):o.error(q.message)};return t.useEffect(()=>{h()},[a.randKey]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:r,onFinish:b=>{g(b)},children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{label:"School Type",name:"school_type_id",rules:[{required:!0,type:"number",message:"Please choose School Type"}],children:e.jsx(fe,{size:"large",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onSearch:b=>{},filterOption:(b,q)=>q.children.toLowerCase().includes(b.toLowerCase()),dropdownStyle:{zIndex:9999},children:s.map((b,q)=>e.jsx(an,{value:parseInt(b.id.toString()),children:b.name}))})}),e.jsx(i.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description ..."}],children:e.jsx(nn,{rows:4,placeholder:"Enter Description ..."})}),e.jsx(i.Item,{label:"Subject Icon",name:"icon",valuePropName:"fileList",getValueFromEvent:rn,rules:[{required:!1,type:"array",message:"Please pick a Subject Icon"}],children:e.jsxs(Ee.Dragger,{name:"icon",accept:".jpg,.jpeg,.png,.gif,.svg",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(Rt,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},{Option:on}=fe,{TextArea:cn}=D,dn=a=>Array.isArray(a)?a:a==null?void 0:a.fileList,un=a=>{const[s,u]=t.useState([]);i.useForm();const r=async()=>{const{data:g}=await k.custom({url:"",method:"get",meta:{operation:"schoolTypes",variables:{showAll:{value:!0,type:"Boolean",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});u(g.results)},h=async g=>{const{data:b}=await k.custom({url:"",method:"post",meta:{operation:"updateSubject",variables:{subjectId:{value:parseInt(a.subject.id),type:"Int",required:!0},schoolTypeId:{value:g.school_type_id,type:"Int",required:!0},name:{value:g.name,type:"String",required:!0},description:{value:g.description,type:"String",required:!1},icon:{value:g.icon,type:"Upload",required:!1}},fields:["success","message",{subject:["id","name","description",{schoolType:["id","name","code"]},"icon","isActive","created","updated","canEdit","canDelete","canManage"]}]}});b.success?(o(b.message),a.onFinish(b.subject)):o.error(b.message)};return t.useEffect(()=>{r(),a.form.setFieldsValue({name:a.subject.name,school_type_id:parseInt(a.subject.schoolType.id),description:a.subject.description})},[a.form,a.subject]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:g=>{h(g)},requiredMark:!1,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{label:"School Type",name:"school_type_id",rules:[{required:!0,type:"number",message:"Please choose School Type"}],children:e.jsx(fe,{size:"large",showSearch:!0,placeholder:"Select a School Type",optionFilterProp:"children",onSearch:g=>{},filterOption:(g,b)=>b.children.toLowerCase().includes(g.toLowerCase()),dropdownStyle:{zIndex:9999},children:s.map((g,b)=>e.jsx(on,{value:parseInt(g.id.toString()),children:g.name}))})}),e.jsx(i.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please input Description ..."}],children:e.jsx(cn,{rows:4,placeholder:"Enter Description ..."})}),e.jsx(i.Item,{label:"Subject Icon",name:"icon",valuePropName:"fileList",getValueFromEvent:dn,rules:[{required:!1,type:"array",message:"Please pick a Subject Icon"}],children:e.jsxs(Ee.Dragger,{name:"icon",accept:".jpg,.jpeg,.png,.gif,.svg",beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(Rt,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},mn=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(1),[q,F]=t.useState(0),[P,_]=t.useState(20),[x,V]=t.useState(""),[B,T]=t.useState(!1),[E,R]=t.useState(!0);ne();const[U]=i.useForm(),[z]=i.useForm();oe.useBreakpoint().lg;const[M,I]=t.useState(!1),[v,d]=t.useState(!1),j=p=>{u(p),I(!0)},f=async p=>{h(r.map(c=>c.id===p.id?p:c)),u(void 0),I(!1)},l=async p=>{h([p,...r])},S=async()=>{const{data:p}=await k.custom({url:"",method:"post",meta:{operation:"syncSchoolsTypes",variables:{},fields:["success","message"]}});p.success?(o.success(p.message),O(g,"",20)):o.error(p.message)},A=async p=>{const{data:c}=await k.custom({url:"",method:"post",meta:{operation:"deleteSubject",variables:{subjectId:{value:parseInt(p.toString()),type:"Int",required:!0}},fields:["success","message"]}});c.success?(o.success(c.message),h(r.filter(Z=>Z.id!==p))):o.error(c.message)},y=()=>{o("Canceled")},n=p=>p.split(" ").map(J=>J.charAt(0)).join("").toUpperCase(),m=[{title:"Name",dataIndex:"name",fixed:!0,render:(p,c,Z)=>e.jsxs("span",{children:[c.icon&&e.jsxs(e.Fragment,{children:[e.jsx(Re,{size:"large",src:c.icon})," "]}),!c.icon&&e.jsx(Re,{size:"large",style:{backgroundColor:"#f56a00"},children:e.jsx(e.Fragment,{children:n(c.name)}),src:c.icon}),e.jsx("a",{style:{marginLeft:10},children:c.name})]})},{title:"School Type",dataIndex:"schooltype",fixed:!0,render:(p,c,Z)=>e.jsx("span",{children:e.jsxs("a",{children:[c.schoolType.name,e.jsx(ae,{color:"red",style:{marginLeft:5},children:c.schoolType.code})]})})},{title:"Created",dataIndex:"created",render:(p,c,Z)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(c.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(p,c,Z)=>e.jsx("a",{children:c!=null&&c.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(p,c,Z)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this member?",onConfirm:()=>A(c==null?void 0:c.id),onCancel:()=>y,okText:"Yes",cancelText:"No",disabled:!(c!=null&&c.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(c!=null&&c.canDelete)})}),e.jsx(N,{disabled:!(c!=null&&c.canEdit),onClick:()=>j(c),icon:e.jsx(Se,{})})]})}],O=async(p,c="",Z=20)=>{const{data:G}=await k.custom({url:"",method:"get",meta:{operation:"subjects",variables:{page:{value:p,type:"Int",required:!0},key:{value:c,type:"String",required:!1},pageSize:{value:Z,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description",{schoolType:["id","name","code"]},"icon","isActive","created","updated","canEdit","canDelete","canManage"]}]}});b(G.page),F(G.total),T(G.hasNext),h(G.results),R(!1)};return t.useEffect(()=>{O(g,"",20)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:12,children:e.jsx(i,{layout:"vertical",form:U,onFinish:p=>{b(1),r.length=0,O(1,p.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(N,{size:"large",icon:e.jsx(je,{}),onClick:()=>d(!0),children:"Add Subject"}),e.jsx(N,{size:"large",icon:e.jsx(ve,{}),onClick:()=>S(),children:"Sync Subjects"})]})]}),e.jsx("div",{children:e.jsx(le,{loading:E,columns:m,dataSource:r,scroll:{x:!0},pagination:{onChange:(p,c)=>{_(c),O(p,x,c)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!0}})}),e.jsx(te,{title:"Edit Subject Informations",width:"30vw",open:M,onClose:p=>I(p),children:e.jsx(un,{form:z,subject:s,onFinish:f})}),e.jsx(te,{title:"Creating a new Subject",width:"30vw",open:v,onClose:p=>d(p),children:e.jsx(ln,{onFinish:l,randKey:Math.random()})})]})},hn=()=>(t.useEffect(()=>{document.title=ue.system_name+": Subjects"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/subjects",children:"Home"})}),e.jsx(K.Item,{children:"Subjects"})]}),e.jsx(mn,{height:80})]})})),xn=a=>{t.useState();const[s,u]=t.useState([]),[r,h]=t.useState(1),[g,b]=t.useState(0),[q,F]=t.useState(20),[P,_]=t.useState(""),[x,V]=t.useState(!1),[B,T]=t.useState(!0);ne();const[E]=i.useForm();oe.useBreakpoint().lg;const U=async()=>{await k.custom({url:"",method:"post",meta:{operation:"syncCombinations",variables:{},fields:["success","message"]}})},z=[{title:"Receipient Phone",dataIndex:"receipientPhone",fixed:!0,render:(M,I,v)=>e.jsxs("span",{children:[e.jsx("a",{children:I.receipientPhoneNumber}),e.jsx(ae,{style:{marginLeft:5},children:I.carrier})]})},{title:"Channel",dataIndex:"channel",fixed:!0,render:(M,I,v)=>{var d,j;return e.jsx("span",{children:(j=(d=I==null?void 0:I.channelMessage)==null?void 0:d.channel)==null?void 0:j.name})}},{title:"Content",dataIndex:"content",fixed:!0,render:(M,I,v)=>e.jsx("span",{children:e.jsx("a",{children:I.messageContent})})},{title:"Status",dataIndex:"status",fixed:!0,render:(M,I,v)=>e.jsx("span",{children:e.jsx(ae,{color:I.statusColor,children:I.status})})},{title:"Created",dataIndex:"created",render:(M,I,v)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(I.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(M,I,v)=>e.jsx("a",{children:I!=null&&I.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(M,I,v)=>e.jsx("span",{})}],w=async(M,I="",v=20)=>{const{data:d}=await k.custom({url:"",method:"get",meta:{operation:"messagesDispatches",variables:{page:{value:M,type:"Int",required:!0},key:{value:I,type:"String",required:!1},pageSize:{value:v,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{channelMessage:["id","message","messageCount",{creator:["id","fullName","email","phone","firstName","middleName","lastName"]},{channel:["id","name","code"]}]},"receipientPhoneNumber","carrier","statusColor","sentAt","deliveredAt","failedAt","messageCount","messageContent","status","isActive","created","updated","canEdit","canDelete","canManage"]}]}});h(d.page),b(d.total),V(d.hasNext),u(d.results),T(!1)};return t.useEffect(()=>{w(r,"",50)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:12,children:e.jsx(i,{layout:"vertical",form:E,onFinish:M=>{h(1),s.length=0,w(1,M.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{size:"large",icon:e.jsx(ve,{}),onClick:()=>U(),children:"Sync CDR"})})]}),e.jsx("div",{children:e.jsx(le,{loading:B,columns:z,dataSource:s,scroll:{x:!0},pagination:{onChange:(M,I)=>{F(I),w(M,P,I)},total:g,pageSize:q,position:["bottomCenter"],showQuickJumper:!0}})})]})},pn=()=>(t.useEffect(()=>{document.title=ue.system_name+": Sms Sent"},[]),e.jsx(he,{children:e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control",children:"Home"})}),e.jsx(K.Item,{children:"Sms Sent"})]}),e.jsx(xn,{height:80})]})})),{TextArea:gn}=D,yn=a=>{const[s,u]=t.useState(a.syllabusType.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.syllabusType.name,description:a.syllabusType.description,isActive:a.syllabusType.isActive})},[a.form,a.syllabusType]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.syllabusType.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{name:"description",label:"Description",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(gn,{rows:4,placeholder:"Please write Description ..."})}),e.jsx(i.Item,{name:"isActive",children:e.jsx(xe,{checked:s,onChange:()=>u(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},jn=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(1),[q,F]=t.useState(0),[P,_]=t.useState(20),[x,V]=t.useState(""),[B,T]=t.useState(!1),[E,R]=t.useState(!0);ne();const[U]=i.useForm(),[z]=i.useForm();oe.useBreakpoint().lg;const[M,I]=t.useState(!1),v=y=>{u(y),I(!0)},d=async y=>{const{data:n}=await k.custom({url:"",method:"post",meta:{operation:"updateSyllabusType",variables:{id:{value:y.id,type:"Int",required:!0},name:{value:y.name,type:"String",required:!0},description:{value:y.description,type:"String",required:!1},isActive:{value:y.isActive,type:"Boolean",required:!1}},fields:["success","message",{syllabusType:["id","name","description","created","updated","isActive","canDelete","canEdit","canManage"]}]}});n.success?(o.success(n.message),z.resetFields(),I(!1),h(r.map(m=>m.id===n.syllabusType.id?n.syllabusType:m))):o.error(n.message)},j=async y=>{const{data:n}=await k.custom({url:"",method:"post",meta:{operation:"deleteSyllabusType",variables:{id:{value:y,type:"Int",required:!0}},fields:["success","message"]}});n.success?(o.success(n.message),h(r.filter(m=>m.id!==y))):o.error(n.message)},f=async()=>{const{data:y}=await k.custom({url:"",method:"post",meta:{operation:"synchronizeDefaultSyllabusTypes",variables:{},fields:["success","message"]}});y.success?(o.success(y.message),A(1)):o.error(y.message)},l=()=>{o("Canceled")},S=[{title:"Name",dataIndex:"name",fixed:!0,render:(y,n,m)=>e.jsx("span",{children:e.jsx("a",{children:n.name})})},{title:"Description",dataIndex:"description",fixed:!0,render:(y,n,m)=>e.jsx("span",{children:e.jsx("a",{children:n.description})})},{title:"Created",dataIndex:"created",render:(y,n,m)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(n.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(y,n,m)=>e.jsx("a",{children:n!=null&&n.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(y,n,m)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this Syllabus Type?",onConfirm:()=>j(n==null?void 0:n.id),onCancel:()=>l,okText:"Yes",cancelText:"No",disabled:!(n!=null&&n.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(n!=null&&n.canDelete)})}),e.jsx(N,{disabled:!(n!=null&&n.canEdit),icon:e.jsx(Se,{}),onClick:()=>v(n)})]})}],A=async(y,n="",m=20)=>{const{data:O}=await k.custom({url:"",method:"get",meta:{operation:"syllabusTypes",variables:{page:{value:y,type:"Int",required:!0},key:{value:n,type:"String",required:!1},pageSize:{value:m,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}});b(O.page),F(O.total),T(O.hasNext),h(O.results),R(!1)};return t.useEffect(()=>{A(g)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:12,children:e.jsx(i,{layout:"vertical",form:U,onFinish:y=>{b(1),r.length=0,A(1,y.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to sync default syllabus types?",placement:"left",onConfirm:()=>{f()},onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(ve,{}),size:"large",children:"Sync Default Syllabus Types"})})})]}),e.jsx("div",{children:e.jsx(le,{loading:E,columns:S,dataSource:r,scroll:{x:!0},pagination:{onChange:(y,n)=>{_(n),A(y,x,n)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(te,{title:"Edit Syllabus Type Informations",width:"45vw",open:M,onClose:y=>I(y),children:e.jsx(yn,{form:z,syllabusType:s,onFinish:d})})]})},fn=()=>(window.location.href.split("/").slice(3).join("/").split("?")[0],localStorage.getItem("sessionKey")||Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),""),Sn=()=>(t.useEffect(()=>{document.title=ue.system_name+": Syllabus Types",window.history.pushState({},"",fn())},[]),e.jsx(he,{children:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Syllabus Types"})]})}),e.jsx(jn,{height:80})]})})),{TextArea:vn}=D,Cn=a=>{const[s,u]=t.useState(a.curriculum.isActive);return t.useEffect(()=>{a.form.setFieldsValue({name:a.curriculum.name,description:a.curriculum.description,code:a.curriculum.code,isActive:a.curriculum.isActive})},[a.form,a.curriculum]),e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:a.form,onFinish:r=>{r.isActive=s,r.id=parseInt(a.curriculum.id),a.onFinish(r)},requiredMark:!1,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:e.jsx(D,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(i.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:e.jsx(D,{size:"large",disabled:!0,placeholder:"Enter Code ..."})}),e.jsx(i.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please write Description ..."}],children:e.jsx(vn,{rows:4,placeholder:"Please write Description ..."})}),e.jsx(i.Item,{name:"isActive",children:e.jsx(xe,{checked:s,onChange:()=>u(!s),children:"Active"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},bn=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(1),[q,F]=t.useState(0),[P,_]=t.useState(20),[x,V]=t.useState(""),[B,T]=t.useState(!1),[E,R]=t.useState(!0);ne();const[U]=i.useForm(),[z]=i.useForm();oe.useBreakpoint().lg;const[M,I]=t.useState(!1),v=y=>{u(y),I(!0)},d=async y=>{const{data:n}=await k.custom({url:"",method:"post",meta:{operation:"updateCurriculum",variables:{id:{value:y.id,type:"Int",required:!0},name:{value:y.name,type:"String",required:!0},code:{value:y.code,type:"String",required:!0},description:{value:y.description,type:"String",required:!1},isActive:{value:y.isActive,type:"Boolean",required:!1}},fields:["success","message",{curriculum:["id","name","description","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}});n.success?(o.success(n.message),z.resetFields(),I(!1),h(r.map(m=>m.id===n.curriculum.id?n.curriculum:m))):o.error(n.message)},j=async y=>{const{data:n}=await k.custom({url:"",method:"post",meta:{operation:"deleteCurriculum",variables:{id:{value:y,type:"Int",required:!0}},fields:["success","message"]}});n.success?(o.success(n.message),h(r.filter(m=>m.id!==y))):o.error(n.message)},f=async()=>{const{data:y}=await k.custom({url:"",method:"post",meta:{operation:"syncCurriculums",variables:{},fields:["success","message"]}});y.success?(o.success(y.message),A(1)):o.error(y.message)},l=()=>{o("Canceled")},S=[{title:"Name",dataIndex:"name",fixed:!0,render:(y,n,m)=>e.jsx("span",{children:e.jsx("a",{children:n.name})})},{title:"Code",dataIndex:"code",fixed:!0,render:(y,n,m)=>e.jsx("span",{children:e.jsx("a",{children:n.code})})},{title:"Description",dataIndex:"description",fixed:!0,render:(y,n,m)=>e.jsx("span",{children:e.jsx("a",{children:n.description})})},{title:"Created",dataIndex:"created",render:(y,n,m)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(n.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(y,n,m)=>e.jsx("a",{children:n!=null&&n.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(y,n,m)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this Curriculum?",onConfirm:()=>j(n==null?void 0:n.id),onCancel:()=>l,okText:"Yes",cancelText:"No",disabled:!(n!=null&&n.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(n!=null&&n.canDelete)})}),e.jsx(N,{disabled:!(n!=null&&n.canEdit),icon:e.jsx(Se,{}),onClick:()=>v(n)})]})}],A=async(y,n="",m=20)=>{const{data:O}=await k.custom({url:"",method:"get",meta:{operation:"curriculums",variables:{page:{value:y,type:"Int",required:!0},key:{value:n,type:"String",required:!1},pageSize:{value:m,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}});b(O.page),F(O.total),T(O.hasNext),h(O.results),R(!1)};return t.useEffect(()=>{A(g)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[e.jsx(W,{span:12,children:e.jsx(i,{layout:"vertical",form:U,onFinish:y=>{b(1),r.length=0,A(1,y.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to sync default Curriculums?",placement:"left",onConfirm:()=>{f()},onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(ve,{}),size:"large",children:"Sync Default Curriculums"})})})]}),e.jsx("div",{children:e.jsx(le,{loading:E,columns:S,dataSource:r,scroll:{x:!0},pagination:{onChange:(y,n)=>{_(n),A(y,x,n)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(te,{title:"Edit Curriculum Informations",width:"45vw",open:M,onClose:y=>I(y),children:e.jsx(Cn,{form:z,curriculum:s,onFinish:d})})]})},In=()=>{const{data:a}=Ae(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{document.title=ue.system_name+": Curriculums",s()},[]),e.jsx(he,{children:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Curriculums"})]})}),e.jsx(bn,{height:80})]})})},An=a=>{const[s]=i.useForm(),u=async r=>{const{data:h}=await k.custom({url:"",method:"post",meta:{operation:"createBannedWord",variables:{word:{value:r.word,type:"String",required:!0}},fields:["success","message",{bannedWord:["id","word","created","updated","isActive","canDelete","canEdit","canManage"]}]}});h.success?(o.success(h.message),s.resetFields(),a.onFinish(h.bannedWord)):o.error(h.message)};return e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:s,onFinish:r=>{u(r)},requiredMark:!1,children:[e.jsx(i.Item,{name:"word",label:"Banned Word",rules:[{required:!0,type:"string",message:"Please input Word"}],children:e.jsx(D,{size:"large",placeholder:"Enter Banned Word ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},kn=a=>{var r;const[s]=i.useForm();t.useEffect(()=>{a.word&&s.setFieldsValue({word:a.word.word})},[a.word]);const u=async h=>{var b;const{data:g}=await k.custom({url:"",method:"post",meta:{operation:"updateBannedWord",variables:{id:{value:(b=a.word)==null?void 0:b.id,type:"Int",required:!0},word:{value:h.word,type:"String",required:!0}},fields:["success","message",{bannedWord:["id","word","created","updated","isActive","canDelete","canEdit","canManage"]}]}});g.success?(o.success(g.message),s.resetFields(),a.onFinish(g.bannedWord)):o.error(g.message)};return e.jsx(e.Fragment,{children:e.jsxs(i,{layout:"vertical",form:s,onFinish:h=>{u(h)},requiredMark:!0,initialValues:{word:(r=a.word)==null?void 0:r.word},children:[e.jsx(i.Item,{name:"word",label:"Banned Word",rules:[{required:!0,type:"string",message:"Please input Word"}],children:e.jsx(D,{size:"large",placeholder:"Enter Banned Word ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Fn=a=>{const[s,u]=t.useState(),[r,h]=t.useState([]),[g,b]=t.useState(1),[q,F]=t.useState(0),[P,_]=t.useState(20),[x,V]=t.useState(""),[B,T]=t.useState(!1),[E,R]=t.useState(!0);ne();const[U]=i.useForm();i.useForm();const w=!oe.useBreakpoint().lg,[M,I]=t.useState(!1),[v,d]=t.useState(!1),j=p=>{u(p),I(!0)},f=async p=>{h([p,...r])},l=async p=>{h(r.map(c=>c.id===p.id?p:c)),I(!1)},S=async p=>{const{data:c}=await k.custom({url:"",method:"post",meta:{operation:"deleteBannedWord",variables:{id:{value:p,type:"Int",required:!0}},fields:["success","message"]}});c.success?(o.success(c.message),h(r.filter(Z=>Z.id!==p))):o.error(c.message)},A=async()=>{const{data:p}=await k.custom({url:"",method:"post",meta:{operation:"syncBannedWords",variables:{},fields:["success","message"]}});p.success?(o.success(p.message),n(1)):o.error(p.message)},y=()=>{o("Canceled")},n=async(p,c="",Z=20)=>{const{data:G}=await k.custom({url:"",method:"get",meta:{operation:"bannedWords",variables:{page:{value:p,type:"Int",required:!0},key:{value:c,type:"String",required:!1},pageSize:{value:Z,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","word","isActive","created","updated","canEdit","canDelete","canManage"]}]}});b(G.page),F(G.total),T(G.hasNext),h(G.results),R(!1)},m=()=>e.jsx(e.Fragment,{children:e.jsx(i,{layout:"vertical",form:U,onFinish:p=>{b(1),r.length=0,n(1,p.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),O=()=>e.jsxs(e.Fragment,{children:[e.jsx(N,{icon:e.jsx(je,{}),size:"large",onClick:()=>d(!0),children:"Add Word"}),e.jsx(X,{title:"Are you sure to sync default Banned Words?",placement:"left",onConfirm:()=>{A()},onCancel:()=>{},okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(ve,{}),size:"large",children:"Sync Default Banned Words"})})]});return t.useEffect(()=>{n(g)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[w&&e.jsxs(e.Fragment,{children:[e.jsx(W,{span:24,style:{display:"flex",justifyContent:"flex-end"},children:O()}),e.jsx(W,{span:24,children:m()})]}),!w&&e.jsxs(e.Fragment,{children:[e.jsx(W,{span:12,children:m()}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:O()})]})]}),e.jsx("div",{children:e.jsx(le,{loading:E,columns:[{title:"Word",dataIndex:"word",fixed:!0,render:(p,c,Z)=>e.jsx("span",{children:e.jsx("a",{children:c.word})})},{title:"Created",dataIndex:"created",render:(p,c,Z)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(c.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(p,c,Z)=>e.jsx("a",{children:c!=null&&c.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(p,c,Z)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(X,{title:"Are you sure to delete this Curriculum?",onConfirm:()=>S(c==null?void 0:c.id),onCancel:()=>y,okText:"Yes",cancelText:"No",disabled:!(c!=null&&c.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(c!=null&&c.canDelete)})}),e.jsx(N,{disabled:!(c!=null&&c.canEdit),icon:e.jsx(Se,{}),onClick:()=>j(c)})]})}],dataSource:r,scroll:{y:"calc(100vh - 20px"},pagination:{onChange:(p,c)=>{_(c),n(p,x,c)},total:q,pageSize:P,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(te,{title:"Edit Banned Word",width:"45vw",open:M,onClose:p=>I(p),children:e.jsx(kn,{word:s,onFinish:l})}),e.jsx(te,{title:"Create Banned Word",width:"35vw",open:v,onClose:p=>d(p),children:e.jsx(An,{onFinish:f})})]})},Nn=()=>{const{data:a}=Ae(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>(document.title=ue.system_name+": Banned Words",s(),document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),e.jsx(he,{children:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Curriculums"})]})}),e.jsx(Fn,{})]})})},Wt=[{user:Ut},...rs],Tn=a=>{const[s,u]=t.useState(!0),[r,h]=t.useState(1),[g,b]=t.useState(0);t.useState(25);const[q,F]=t.useState(0),[P,_]=t.useState([]),[x]=i.useForm(),V=async(T,E="",R=25)=>{const{data:U}=await k.custom({url:"",method:"get",meta:{operation:"notQuizzerManagers",variables:{page:{value:T,type:"Int",required:!0},key:{value:E,type:"String",required:!1},pageSize:{value:R,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Ut}]}});h(U.page),b(U.total),F(U.pages),_(U.results),u(!1)},B=async T=>{const{data:E}=await k.custom({url:"",method:"post",meta:{operation:"addQuizzerManager",variables:{id:{value:parseInt(T.toString()),type:"Int",required:!0}},fields:["success","message",{quizzerManager:Wt}]}});o.remove(),E.success?(o.success(E.message),_(P.filter(R=>R.id!==T)),a.onFinish(E.quizzerManager)):o.error(E.message)};return t.useEffect(()=>{V(1)},[]),e.jsxs(e.Fragment,{children:[e.jsx(i,{layout:"vertical",form:x,onFinish:T=>{V(1,T.key)},requiredMark:!1,children:e.jsx(i.Item,{name:"key",rules:[{required:!1,type:"string",message:"Search Users ..."}],children:e.jsx(D,{size:"large",placeholder:"Seach Users ..."})})}),e.jsx(Dt,{sx:{minHeight:"80svh",maxHeight:"80svh",overflowY:"scroll",overflowX:"hidden"},children:e.jsx(Ce,{bordered:!0,dataSource:P,renderItem:T=>e.jsx(Ce.Item,{actions:[e.jsx(N,{type:"primary",onClick:()=>B(T.id),children:"Add"})],children:T.fullName})})}),e.jsx(Dt,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:2,marginBottom:2},children:e.jsx(ms,{count:q,color:"secondary",onChange:(T,E)=>{V(E,x.getFieldValue("key"))}})})]})},qn=a=>{t.useState();const[s,u]=t.useState([]),[r,h]=t.useState(1),[g,b]=t.useState(0),[q,F]=t.useState(20),[P,_]=t.useState(""),[x,V]=t.useState(!1),[B,T]=t.useState(!0);ne();const[E]=i.useForm();i.useForm();const U=!oe.useBreakpoint().lg,[z,w]=t.useState(!1),M=async f=>{const{data:l}=await k.custom({url:"",method:"post",meta:{operation:"deleteQuizzerManager",variables:{id:{value:f,type:"Int",required:!0}},fields:["success","message"]}});l.success?(o.success(l.message),u(s.filter(S=>S.id!==f))):o.error(l.message)},I=[{title:"Manager Name",dataIndex:"managerName",fixed:!0,render:(f,l,S)=>e.jsx("span",{children:e.jsx("a",{children:l.user.fullName})})},{title:"Created",dataIndex:"created",render:(f,l,S)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:new Date(l.created).toLocaleString()})})},{title:"Status",dataIndex:"isActive",render:(f,l,S)=>e.jsx("a",{children:l!=null&&l.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,l,S)=>e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(X,{title:"Are you sure to delete this Manager?",onConfirm:()=>M(l==null?void 0:l.id),onCancel:()=>{},okText:"Yes",cancelText:"No",disabled:!(l!=null&&l.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(N,{icon:e.jsx(de,{}),disabled:!(l!=null&&l.canDelete)})})})}],v=async(f,l="",S=20)=>{T(!0);const{data:A}=await k.custom({url:"",method:"get",meta:{operation:"quizzerManagers",variables:{page:{value:f,type:"Int",required:!0},key:{value:l,type:"String",required:!1},pageSize:{value:S,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Wt}]}});h(A.page),b(A.total),V(A.hasNext),u(A.results),T(!1)},d=()=>e.jsx(e.Fragment,{children:e.jsx(i,{layout:"vertical",form:E,onFinish:f=>{v(1,f.key)},children:e.jsx(i.Item,{name:"key",children:e.jsx(D,{size:"large",placeholder:"Search ...",prefix:e.jsx(re,{}),autoComplete:"off",allowClear:!0})})})}),j=()=>e.jsx(e.Fragment,{children:e.jsx(N,{icon:e.jsx(je,{}),size:"large",onClick:()=>w(!0),children:"Add Manager"})});return t.useEffect(()=>{v(r)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(ee,{style:{marginTop:10},children:[U&&e.jsxs(e.Fragment,{children:[e.jsx(W,{span:24,style:{display:"flex",justifyContent:"flex-end"},children:j()}),e.jsx(W,{span:24,children:d()})]}),!U&&e.jsxs(e.Fragment,{children:[e.jsx(W,{span:12,children:d()}),e.jsx(W,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:j()})]})]}),e.jsx("div",{children:e.jsx(le,{loading:B,columns:I,dataSource:s,scroll:{x:!0},pagination:{onChange:(f,l)=>{F(l),v(f,P,l)},total:g,pageSize:q,position:["bottomCenter"],showQuickJumper:!1}})}),e.jsx(te,{title:"Adding Quizzer Manager",width:"35vw",open:z,onClose:f=>w(f),children:e.jsx(Tn,{onFinish:f=>{u([f,...s])}})})]})},Pn=()=>{const{data:a}=Ae(),s=()=>{((a==null?void 0:a.isStaff)===!1||(a==null?void 0:a.isAdmin)===!1)&&(window.location.pathname="/home")};return t.useEffect(()=>{document.title=ue.system_name+": Quizzer Managers",s()},[]),e.jsx(he,{children:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginTop:10,marginBottom:10},children:e.jsxs(K,{children:[e.jsx(K.Item,{children:e.jsx(me,{to:"/control/analytics",children:"Home"})}),e.jsx(K.Item,{children:"Quizzer Managers"})]})}),e.jsx(qn,{height:80})]})})},Ci=a=>{const{page:s}=a;return s==="BannedWordsPage"?e.jsx(Nn,{}):s==="CurriculumsPage"?e.jsx(In,{}):s==="SyllabusTypesPage"?e.jsx(Sn,{}):s==="SmsSentPage"?e.jsx(pn,{}):s==="SubjectsPage"?e.jsx(hn,{}):s==="CombinationsPage"?e.jsx(sn,{}):s==="TelecomCarriersPage"?e.jsx($a,{}):s==="OrderPaymentsPage"?e.jsx(Ga,{}):s==="OrdersPaymentsPage"?e.jsx(Ya,{}):s==="ExaminationsTypesPage"?e.jsx(ys,{}):s==="ControlSchoolVenuesTypesPage"?e.jsx(fs,{}):s==="SystemSettingsPage"?e.jsx(Cs,{}):s==="ControlAnalyticsPage"?e.jsx(qs,{}):s==="ControlApplicationsPage"?e.jsx(Ls,{}):s==="ControlPermissionsPage"?e.jsx(Os,{}):s==="ControlRolesPage"?e.jsx(ws,{}):s==="ControlDistrictsPage"?e.jsx(Hs,{}):s==="SchoolEducationLevelsPage"?e.jsx(Gs,{}):s==="ProgrammesPage"?e.jsx(Qs,{}):s==="ControlRegionsPage"?e.jsx(Zs,{}):s==="SchoolsPage"?e.jsx(xa,{}):s==="SchoolsTypesPage"?e.jsx(va,{}):s==="GradesPage"?e.jsx(ba,{}):s==="SchoolOwnershipsPage"?e.jsx(ka,{}):s==="ControlUsersPage"?e.jsx(Ma,{}):s==="ControlLoginReedemPage"?e.jsx(za,{}):s==="WardsPage"?e.jsx(Ba,{}):s==="PrivateTutorsPage"?e.jsx(Ra,{}):s==="PaymentPackagesPage"?e.jsx(Ka,{}):s==="OrdersPage"?e.jsx(Ha,{}):s==="QuizzerManagersPage"?e.jsx(Pn,{}):e.jsx("div",{children:"Page not found ..."})};export{Ci as ControlPages};
