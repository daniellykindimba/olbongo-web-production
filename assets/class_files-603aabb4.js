import{r as a,aO as d,b$ as D,aY as e,aS as N,aK as V,Q as L,cY as q,ak as E,ao as M,bZ as P,b_ as z}from"./index-3b25761c.js";import{a as H,F as O}from"./file_item_component-8a5ca4ae.js";import{D as R}from"./index-0ffbf4a9.js";import{f as T}from"./data_objects-ddf513ee.js";import{L as Y}from"./index-086e93a6.js";import"./index-80a795f5.js";import"./defineProperty-617dcc0b.js";import"./index-57fa16be.js";import"./index-0bcbf38d.js";import"./Skeleton-f7cf79cd.js";import"./index-6e5f775c.js";import"./index-3c7b2ccc.js";import"./ActionButton-4004263b.js";import"./index-9cee797a.js";import"./transButton-cd447730.js";import"./index-22d44a8b.js";import"./index.esm-fcd1caf1.js";import"./iconBase-bda8ed31.js";import"./index-bba2b9d5.js";import"./index-4364922b.js";import"./Image-0014e045.js";import"./DialogWrap-c72cf114.js";import"./index-6faacfa0.js";import"./fade-4de01c07.js";const he=l=>{const[o,n]=a.useState([]),[g,f]=a.useState(!0),[u,x]=a.useState(1),[F]=d.useForm(),[_,S]=a.useState(0),[A,I]=a.useState(0),[m,j]=a.useState(!0);D();const[w,h]=a.useState(!1),[p,v]=a.useState(),b=t=>{v(t),h(!0)},c=async(t,r="",s=!1)=>{if(m){const{data:i}=await P.custom({url:"",method:"get",meta:{operation:"darasaFiles",variables:{page:{value:parseInt(t.toString()),type:"Int",required:!0},key:{value:r,type:"String",required:!1},id:{value:parseInt(l.id===void 0?"0":l.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:T}]}}).catch(()=>(z.error("Error loading files"),{data:null})).then(k=>k);i&&(I(i.total),S(i.pages),x(i.page),j(i.hasNext),(r.length>0||r.length===0&&s)&&n(i.results),i.results.length>0&&!s&&n(o.concat(i.results))),f(!1)}},y=t=>{const r=o.map(s=>(s.id===t.id&&(s.imageVisible=!1),s));n(r)},C=t=>{const r=o.map(s=>(s.id===t.id&&(s.imageVisible=!0),s));n(r)};return a.useEffect(()=>{c(u)},[]),e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx(V,{span:20,children:e.jsx(d,{layout:"vertical",form:F,onFinish:t=>c(0,t.key,!0),children:e.jsx(d.Item,{name:"key",children:e.jsx(L,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(q,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(E,{spinning:g,children:[e.jsx(Y,{itemLayout:"horizontal",dataSource:o,renderItem:t=>e.jsx(H,{item:t,min:l.min??!1,handleMakeImageNotVisible:y,handleMakeImageVisible:C,handleShowFileInfoDrawer:b})}),m&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(M,{type:"primary",onClick:()=>c(u+1),disabled:!m,children:"Load More"})})]})}),e.jsx(R,{title:"File Informations",anchor:"right",width:"35vw",onClose:t=>h(t),open:w,children:e.jsx(O,{id:p==null?void 0:p.id})})]})};export{he as ClassFiles};
