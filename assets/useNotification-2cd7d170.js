import{r as a,fK as H,db as ve,fZ as Re,v as z,b as Z,fP as ae,fR as Ae,R as F,gB as Le,fT as de,fL as O,i as W,gC as be}from"./index-62ca8c71.js";var pe=a.forwardRef(function(e,i){var d=e.prefixCls,r=e.style,u=e.className,C=e.duration,k=C===void 0?4.5:C,R=e.eventKey,L=e.content,N=e.closable,_=e.closeIcon,b=_===void 0?"x":_,f=e.props,m=e.onClick,p=e.onNoticeClose,A=e.times,v=e.hovering,T=a.useState(!1),M=H(T,2),E=M[0],g=M[1],S=v||E,c=function(){p(R)},h=function(l){(l.key==="Enter"||l.code==="Enter"||l.keyCode===Ae.ENTER)&&c()};a.useEffect(function(){if(!S&&k>0){var o=setTimeout(function(){c()},k*1e3);return function(){clearTimeout(o)}}},[k,S,A]);var n=a.useMemo(function(){return ve(N)==="object"&&N!==null?N:N?{closeIcon:b}:{}},[N,b]),t=Re(n,!0),s="".concat(d,"-notice");return a.createElement("div",z({},f,{ref:i,className:Z(s,u,ae({},"".concat(s,"-closable"),N)),style:r,onMouseEnter:function(l){var y;g(!0),f==null||(y=f.onMouseEnter)===null||y===void 0||y.call(f,l)},onMouseLeave:function(l){var y;g(!1),f==null||(y=f.onMouseLeave)===null||y===void 0||y.call(f,l)},onClick:m}),a.createElement("div",{className:"".concat(s,"-content")},L),N&&a.createElement("a",z({tabIndex:0,className:"".concat(s,"-close"),onKeyDown:h,"aria-label":"Close"},t,{onClick:function(l){l.preventDefault(),l.stopPropagation(),c()}}),n.closeIcon))}),me=F.createContext({}),Ke=function(i){var d=i.children,r=i.classNames;return F.createElement(me.Provider,{value:{classNames:r}},d)},ce=8,le=3,ue=16,Me=function(i){var d={offset:ce,threshold:le,gap:ue};if(i&&ve(i)==="object"){var r,u,C;d.offset=(r=i.offset)!==null&&r!==void 0?r:ce,d.threshold=(u=i.threshold)!==null&&u!==void 0?u:le,d.gap=(C=i.gap)!==null&&C!==void 0?C:ue}return[!!i,d]},Pe=["className","style","classNames","styles"],_e=function(i){var d=i.configList,r=i.placement,u=i.prefixCls,C=i.className,k=i.style,R=i.motion,L=i.onAllNoticeRemoved,N=i.onNoticeClose,_=i.stack,b=a.useContext(me),f=b.classNames,m=a.useRef({}),p=a.useState(null),A=H(p,2),v=A[0],T=A[1],M=a.useState([]),E=H(M,2),g=E[0],S=E[1],c=d.map(function(x){return{config:x,key:String(x.key)}}),h=Me(_),n=H(h,2),t=n[0],s=n[1],o=s.offset,l=s.threshold,y=s.gap,I=t&&(g.length>0||c.length<=l),J=typeof R=="function"?R(r):R;return a.useEffect(function(){t&&g.length>1&&S(function(x){return x.filter(function(w){return c.some(function(G){var V=G.key;return w===V})})})},[g,c,t]),a.useEffect(function(){var x;if(t&&m.current[(x=c[c.length-1])===null||x===void 0?void 0:x.key]){var w;T(m.current[(w=c[c.length-1])===null||w===void 0?void 0:w.key])}},[c,t]),F.createElement(Le,z({key:r,className:Z(u,"".concat(u,"-").concat(r),f==null?void 0:f.list,C,ae(ae({},"".concat(u,"-stack"),!!t),"".concat(u,"-stack-expanded"),I)),style:k,keys:c,motionAppear:!0},J,{onAllRemoved:function(){L(r)}}),function(x,w){var G=x.config,V=x.className,ye=x.style,Ce=x.index,ie=G,X=ie.key,Ne=ie.times,P=String(X),K=G,ge=K.className,ke=K.style,U=K.classNames,Q=K.styles,he=de(K,Pe),Y=c.findIndex(function(B){return B.key===P}),q={};if(t){var j=c.length-1-(Y>-1?Y:Ce-1),re=r==="top"||r==="bottom"?"-50%":"0";if(j>0){var $,ee,te;q.height=I?($=m.current[P])===null||$===void 0?void 0:$.offsetHeight:v==null?void 0:v.offsetHeight;for(var se=0,ne=0;ne<j;ne++){var oe;se+=((oe=m.current[c[c.length-1-ne].key])===null||oe===void 0?void 0:oe.offsetHeight)+y}var xe=(I?se:j*o)*(r.startsWith("top")?1:-1),Ee=!I&&v!==null&&v!==void 0&&v.offsetWidth&&(ee=m.current[P])!==null&&ee!==void 0&&ee.offsetWidth?((v==null?void 0:v.offsetWidth)-o*2*(j<3?j:3))/((te=m.current[P])===null||te===void 0?void 0:te.offsetWidth):1;q.transform="translate3d(".concat(re,", ").concat(xe,"px, 0) scaleX(").concat(Ee,")")}else q.transform="translate3d(".concat(re,", 0, 0)")}return F.createElement("div",{ref:w,className:Z("".concat(u,"-notice-wrapper"),V,U==null?void 0:U.wrapper),style:O(O(O({},ye),q),Q==null?void 0:Q.wrapper),onMouseEnter:function(){return S(function(D){return D.includes(P)?D:[].concat(W(D),[P])})},onMouseLeave:function(){return S(function(D){return D.filter(function(Se){return Se!==P})})}},F.createElement(pe,z({},he,{ref:function(D){Y>-1?m.current[P]=D:delete m.current[P]},prefixCls:u,classNames:U,styles:Q,className:Z(ge,f==null?void 0:f.notice),style:ke,times:Ne,key:X,eventKey:X,onNoticeClose:N,hovering:t&&g.length>0})))})},Ie=a.forwardRef(function(e,i){var d=e.prefixCls,r=d===void 0?"rc-notification":d,u=e.container,C=e.motion,k=e.maxCount,R=e.className,L=e.style,N=e.onAllRemoved,_=e.stack,b=e.renderNotifications,f=a.useState([]),m=H(f,2),p=m[0],A=m[1],v=function(t){var s,o=p.find(function(l){return l.key===t});o==null||(s=o.onClose)===null||s===void 0||s.call(o),A(function(l){return l.filter(function(y){return y.key!==t})})};a.useImperativeHandle(i,function(){return{open:function(t){A(function(s){var o=W(s),l=o.findIndex(function(J){return J.key===t.key}),y=O({},t);if(l>=0){var I;y.times=(((I=s[l])===null||I===void 0?void 0:I.times)||0)+1,o[l]=y}else y.times=0,o.push(y);return k>0&&o.length>k&&(o=o.slice(-k)),o})},close:function(t){v(t)},destroy:function(){A([])}}});var T=a.useState({}),M=H(T,2),E=M[0],g=M[1];a.useEffect(function(){var n={};p.forEach(function(t){var s=t.placement,o=s===void 0?"topRight":s;o&&(n[o]=n[o]||[],n[o].push(t))}),Object.keys(E).forEach(function(t){n[t]=n[t]||[]}),g(n)},[p]);var S=function(t){g(function(s){var o=O({},s),l=o[t]||[];return l.length||delete o[t],o})},c=a.useRef(!1);if(a.useEffect(function(){Object.keys(E).length>0?c.current=!0:c.current&&(N==null||N(),c.current=!1)},[E]),!u)return null;var h=Object.keys(E);return be.createPortal(a.createElement(a.Fragment,null,h.map(function(n){var t=E[n],s=a.createElement(_e,{key:n,configList:t,placement:n,prefixCls:r,className:R==null?void 0:R(n),style:L==null?void 0:L(n),motion:C,onNoticeClose:v,onAllNoticeRemoved:S,stack:_});return b?b(s,{prefixCls:r,key:n}):s})),u)}),He=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Te=function(){return document.body},fe=0;function we(){for(var e={},i=arguments.length,d=new Array(i),r=0;r<i;r++)d[r]=arguments[r];return d.forEach(function(u){u&&Object.keys(u).forEach(function(C){var k=u[C];k!==void 0&&(e[C]=k)})}),e}function je(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=e.getContainer,d=i===void 0?Te:i,r=e.motion,u=e.prefixCls,C=e.maxCount,k=e.className,R=e.style,L=e.onAllRemoved,N=e.stack,_=e.renderNotifications,b=de(e,He),f=a.useState(),m=H(f,2),p=m[0],A=m[1],v=a.useRef(),T=a.createElement(Ie,{container:p,ref:v,prefixCls:u,motion:r,maxCount:C,className:k,style:R,onAllRemoved:L,stack:N,renderNotifications:_}),M=a.useState([]),E=H(M,2),g=E[0],S=E[1],c=a.useMemo(function(){return{open:function(n){var t=we(b,n);(t.key===null||t.key===void 0)&&(t.key="rc-notification-".concat(fe),fe+=1),S(function(s){return[].concat(W(s),[{type:"open",config:t}])})},close:function(n){S(function(t){return[].concat(W(t),[{type:"close",key:n}])})},destroy:function(){S(function(n){return[].concat(W(n),[{type:"destroy"}])})}}},[]);return a.useEffect(function(){A(d())}),a.useEffect(function(){v.current&&g.length&&(g.forEach(function(h){switch(h.type){case"open":v.current.open(h.config);break;case"close":v.current.close(h.key);break;case"destroy":v.current.destroy();break}}),S(function(h){return h.filter(function(n){return!g.includes(n)})}))},[g]),[c,T]}export{pe as N,Ke as a,je as u};
