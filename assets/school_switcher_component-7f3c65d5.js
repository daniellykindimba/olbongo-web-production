import{r as s,aZ as e,ap as g,cH as f,aW as x,b_ as u,b$ as m,al as j,aU as y,a7 as p,fc as h,bZ as w}from"./index-29a13d6d.js";import{L as S}from"./index-00135081.js";import{P as b}from"./index-46bc3d4d.js";const C=n=>{const[i,l]=s.useState(!0),[c,r]=s.useState([]),t=async o=>{const{data:a}=await u.custom({url:"",method:"post",meta:{operation:"makeSchoolOperational",variables:{schoolId:{value:parseInt(o.toString()),type:"Int",required:!0}},fields:["success","message"]}});a.success?(m.success(a.message),window.location.reload()):m.error(a.message)},d=async()=>{const{data:o}=await u.custom({url:"",method:"get",meta:{operation:"userOperationalSchools",variables:{},fields:["schools"]}});r(o.schools),l(!1)};return s.useEffect(()=>{d()},[n.randKey]),e.jsx("div",{children:e.jsx(S,{bordered:!0,loading:i,dataSource:c,renderItem:o=>e.jsxs(S.Item,{actions:[e.jsx(b,{placement:"topRight",title:"Are you sure to switch to "+o.name+"?",onConfirm:()=>t(o.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(g,{icon:e.jsx(f,{})})})],children:[o.name," - ",e.jsx(x,{color:"green",children:o.serialNumber})]})})})},I=n=>{const[i,l]=s.useState(!0),[c,r]=s.useState(!1),[t,d]=s.useState(),o=async()=>{const{data:a}=await u.custom({url:"",method:"get",meta:{operation:"operationalSchool",variables:{},fields:["school"]}});d(a.school),l(!1)};return s.useEffect(()=>{o()},[n.randKey]),e.jsxs("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:[e.jsx(j,{spinning:i,children:e.jsx(x,{color:"red",style:{padding:5},children:e.jsxs(y,{direction:"horizontal",style:{justifyContent:"center",marginRight:10,fontSize:16,fontWeight:"bolder",whiteSpace:"break-spaces",wordWrap:"break-word"},children:[e.jsx(p,{title:t==null?void 0:t.name,color:"green",children:(t==null?void 0:t.name)??"Operational School (Pick)"}),!(t!=null&&t.status)&&e.jsx(p,{title:"Click to Switch School",color:"green",placement:"top",children:e.jsx("a",{onClick:()=>r(!0),children:e.jsx(h,{})})}),(((t==null?void 0:t.status)&&(t==null?void 0:t.multiple))??!0)&&e.jsx(p,{title:"Click to Switch School",color:"green",placement:"top",children:e.jsx("a",{onClick:()=>r(!0),children:e.jsx(h,{})})})]})})}),e.jsx(w,{title:"Choose School to Operate With",width:"40vw",open:c,onClose:a=>r(a),children:e.jsx(C,{randKey:Math.random()})})]})};export{I as S};
