var aa=Object.defineProperty;var sa=(r,t,n)=>t in r?aa(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var wr=(r,t,n)=>(sa(r,typeof t!="symbol"?t+"":t,n),n);import{r as o,F as T,j as e,G as qe,I as ne,S as fe,s as ce,u as xe,C as ke,v as De,Z as be,$ as Y,am as ia,B as K,a1 as Oe,an as fr,K as g,A as Se,ao as Ye,ap as st,aq as an,ar as pe,as as ge,J as B,at as oa,au as Je,av as gt,aw as rt,ah as ze,ai as He,ag as zt,af as Xe,y as Z,z as X,ax as Le,ay as it,az as ue,aA as Ir,q as Ce,aB as Ht,aC as Ot,aD as sn,a0 as Ae,a9 as $e,aE as la,D as ca,H as ae,aF as ua,aG as da,aH as mr,aI as ha,aJ as ht,a5 as ee,Y as fa,aK as ma,ab as ft,aL as Ft,aM as Qt,aN as on,T as oe,x as Ve,aO as ln,aP as pa,aQ as ga,aR as ya,aS as xa,aT as Tr,a7 as Ue,a6 as yt,aU as Wt,aV as va,aW as cn,aX as Yt,aY as mt,X as Bt,aZ as It,a2 as Mt,a_ as ja,a$ as ba,b0 as Pr,b1 as Sa,b2 as Tt,b3 as un,b4 as Ca,b5 as pr,b6 as $t,ad as gr,ae as wa,b7 as Ia,b8 as Ta,b9 as Pa,ba as Zt,bb as ka,bc as Da,bd as dn,be as hn,bf as dt,bg as Oa,bh as fn,bi as Ma,bj as _a,bk as kr,bl as yr,bm as mn,bn as Dr,bo as pn,bp as Aa,bq as Ea,br as Fa,bs as Or,bt as xr,bu as gn,bv as Mr,O as yn,bw as Ra,bx as La,E as Na,by as vr,V as qa,t as Va,bz as Ua,bA as xn,bB as za,aa as me,N as Ha,ac as Wa}from"./index-e1c2324f.js";import{B as re}from"./Breadcrumb-86dedde2.js";import{t as ir}from"./text_truncate-315d9efa.js";import{I as jr}from"./index.es-a238e733.js";import{G as Ya}from"./iconBase-528f7f37.js";import{C as vn}from"./Collapse-fe5bcff7.js";import{a as Ba,T as jn}from"./Table-89b121d5.js";import{B as $a}from"./book_payment_form-5f3a7011.js";import"./index-83554738.js";const Ga=r=>{const[t,n]=o.useState([]),[a,s]=o.useState(!0),[i,c]=o.useState(1),[p,d]=o.useState(0),[b,I]=o.useState(0),[_,D]=o.useState(24),[R,x]=o.useState(""),[w,L]=o.useState(!0),[P,H]=o.useState(!1),[W]=T.useForm(),V=async l=>{const{data:m}=await B.custom({url:"",method:"post",meta:{operation:"removeDarasaArchive",variables:{id:{value:l,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error removing from archive"),{data:null})).then(f=>f);m&&(m.success?(g.success(m.message),n(t.filter(f=>f.id!==l))):g.error(m.message)),pe.destroyAll()},k=l=>{pe.confirm({title:"Confirm",icon:e.jsx(ge,{}),content:"Removing Class From Archive ....",okText:"Restore",cancelText:"Cancel",onOk:()=>V(l)})},y=async(l,m=24,f="")=>{const{data:u}=await B.custom({url:"",method:"get",meta:{operation:"madarasaArchives",variables:{page:{value:l,type:"Int",required:!0},key:{value:f,type:"String",required:!1},pageSize:{value:m,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:oa}]}}).catch(O=>(console.error(O),g.error("Error fetching archives"),{data:null})).then(O=>O);u&&(d(u.total),c(u.page),I(u.pages),L(u.hasNext),H(u.hasPrev),n(u.results)),s(!1)};return o.useEffect(()=>{y(1)},[]),e.jsxs(e.Fragment,{children:[e.jsx(qe,{container:!0,children:e.jsx(qe,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6,children:e.jsx(T,{layout:"vertical",form:W,onFinish:l=>{c(0),y(0,_,l.key)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Classes Archives...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0,disabled:a})})})})}),e.jsx(ce,{spinning:a,children:e.jsx(xe,{children:t.length>0?e.jsx(qe,{container:!0,children:t.map(l=>e.jsx(qe,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:e.jsxs(ke,{hoverable:l.isActive,style:{marginRight:10},children:[e.jsx(De,{style:{right:0,position:"absolute"},children:e.jsx(be,{trigger:["click"],overlay:e.jsx(Y,{children:e.jsx(Y.Item,{icon:e.jsx(ia,{}),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>k(l.id),children:"Restore"})},"class-archive-"+l.id)}),overlayStyle:{zIndex:9999},children:e.jsx(K,{type:"link",size:"large",className:"ant-dropdown-link",onClick:m=>m.preventDefault(),style:{zIndex:1},children:e.jsx(Oe,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx(fr.Ribbon,{text:l.darasa.code,placement:"start",color:"orange",children:e.jsx("a",{onClick:()=>{g("Drive To Connect")},children:e.jsxs(De,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Se,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(Ye,{}),src:l.darasa.icon}),e.jsx("span",{style:{fontSize:20},children:l.darasa.name})]})})})]})}))}):e.jsx(st,{severity:"info",sx:{fontSize:18},children:a?e.jsx(e.Fragment,{children:"Loading ..."}):e.jsx(e.Fragment,{children:"No Class Found in Archives"})})})}),(w||P)&&!a&&e.jsx(xe,{children:e.jsx(an.Pagination,{showSizeChanger:!0,onShowSizeChange:(l,m)=>{c(l),D(m),y(l,m||_,R)},defaultCurrent:i,total:p,onChange:(l,m)=>{c(l),D(m||_),y(l,m||_,R)}})})]})},Ka=()=>e.jsxs(xe,{children:[e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx(Je,{to:"/oclass",children:"Home"})}),e.jsx(re.Item,{children:"Classes Archives"})]}),e.jsx(xe,{sx:{mt:2},children:e.jsx(Ga,{})})]}),Xa=()=>e.jsx(Ka,{}),{Title:_t,Text:At}=gt,bn=r=>{const[t,n]=o.useState(),[a,s]=o.useState(!0),i=async c=>{const{data:p}=await B.custom({url:"",method:"get",meta:{operation:"darasa",variables:{id:{value:c,type:"Int",required:!0}},fields:rt}}).catch(()=>(g.error("Error fetching darasa"),{data:null}));p&&n(p),s(!1)};return o.useEffect(()=>{i(r.id)},[r.id]),e.jsxs(ce,{spinning:a,children:[e.jsx(_t,{level:5,children:"Class Name"}),e.jsx(At,{children:t==null?void 0:t.name}),e.jsx(_t,{level:5,children:"Class Code"}),e.jsx(At,{children:t==null?void 0:t.code}),e.jsx(_t,{level:5,children:"Class Description"}),e.jsx(At,{children:t==null?void 0:t.description}),e.jsx(_t,{level:5,children:"Class Author"}),e.jsx(At,{children:t==null?void 0:t.user.profile.fullName})]})},Ja=r=>{const[t,n]=o.useState(!1),[a,s]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:r.form,onFinish:i=>{i.payable=t,i.description=a,r.onFinish(i)},requiredMark:!0,autoComplete:"off",children:[e.jsx(T.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Name is required"}],children:e.jsx(ne,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(ze.CKEditor,{editor:He,data:a,onReady:i=>{i.editing.view.change(c=>{c.setStyle("min-height","150px",i.editing.view.document.getRoot())})},onChange:(i,c)=>{const p=c.getData();s(p)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(T.Item,{name:"payable",children:e.jsx(zt,{onChange:i=>n(i.target.checked),children:"Payable"})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(T.Item,{name:"price",label:"Cost",initialValue:0,rules:[{required:t,type:"number",validator:(i,c)=>c<=0?Promise.reject("Price cannot be less than 0"):Promise.resolve()}],children:e.jsx(Xe,{size:"large",style:{width:"100%"},precision:2})}),e.jsxs(Z,{children:[e.jsx(X,{span:8,children:e.jsx(T.Item,{name:"duration",label:"Duration",initialValue:1,wrapperCol:{span:24},rules:[{required:t,type:"number",message:"Please enter duration"}],children:e.jsx(Xe,{size:"large",style:{width:"100%"}})})}),e.jsx(X,{span:12,children:e.jsx(T.Item,{label:"Duration Type",name:"duration_type",wrapperCol:{span:12},initialValue:"months",rules:[{required:t,type:"string",message:"Please select duration type"}],children:e.jsxs(Le,{size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx(Le.Option,{value:"days",children:"Days"}),e.jsx(Le.Option,{value:"months",children:"Months"}),e.jsx(Le.Option,{value:"years",children:"Years"})]})})})]}),e.jsx(T.Item,{label:"Start Date",name:"start_date",rules:[{required:!0,type:"object",message:"Please select Start Date"}],children:e.jsx(it,{size:"large",style:{width:"50%"},disabledDate:i=>i.add(1,"day")<ue().endOf("day"),popupStyle:{zIndex:9999}})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Qa=r=>{const[t,n]=o.useState(r.darasa.payable),[a,s]=o.useState(r.darasa.description);return o.useEffect(()=>{r.form.setFieldsValue({name:r.darasa.name,description:r.darasa.description,payable:r.darasa.payable,price:r.darasa.price,duration:r.darasa.duration,duration_type:r.darasa.durationType,start_date:Ir(r.darasa.startDate),end_date:Ir(r.darasa.endDate)})},[r.darasa,r.form]),e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:r.form,onFinish:i=>{i.id=parseInt(r.darasa.id),i.payable=t,i.description=a,r.onFinish(i)},requiredMark:!1,children:[e.jsx(T.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Name is required"}],children:e.jsx(ne,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(ze.CKEditor,{editor:He,data:a,onReady:i=>{i.editing.view.change(c=>{c.setStyle("min-height","150px",i.editing.view.document.getRoot())})},onChange:(i,c)=>{const p=c.getData();s(p)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(T.Item,{name:"payable",children:e.jsx(zt,{defaultChecked:t,onChange:i=>n(i.target.checked),children:"Payable"})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(T.Item,{name:"price",label:"Cost",initialValue:0,rules:[{required:t,type:"number",validator:(i,c)=>c<=0?Promise.reject("Price cannot be less than 0"):Promise.resolve()}],children:e.jsx(Xe,{size:"large",style:{width:"100%"},precision:2})}),e.jsxs(Z,{children:[e.jsx(X,{span:8,children:e.jsx(T.Item,{name:"duration",label:"Duration",initialValue:1,wrapperCol:{span:24},rules:[{required:t,type:"number",message:"Please enter duration"}],children:e.jsx(Xe,{size:"large",style:{width:"100%"}})})}),e.jsx(X,{span:12,children:e.jsx(T.Item,{label:"Duration Type",name:"duration_type",wrapperCol:{span:12},initialValue:"months",rules:[{required:t,type:"string",message:"Please select duration type"}],children:e.jsxs(Le,{size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx(Le.Option,{value:"days",children:"Days"}),e.jsx(Le.Option,{value:"months",children:"Months"}),e.jsx(Le.Option,{value:"years",children:"Years"})]})})})]}),e.jsx(T.Item,{label:"Start Date",name:"start_date",rules:[{required:!0,type:"object",message:"Please select Start Date"}],children:e.jsx(it,{size:"large",style:{width:"50%"},disabledDate:i=>i.add(1,"day")<ue().endOf("day"),popupStyle:{zIndex:9999}})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},{Paragraph:Za}=gt,Gt=r=>{const[t,n]=o.useState(!1),[a,s]=o.useState([]),[i,c]=o.useState(),[p,d]=o.useState(),[b,I]=o.useState(!0),[_,D]=o.useState(1),[R,x]=o.useState(0),[w,L]=o.useState(24),[P,H]=o.useState(!0),[W,V]=o.useState(!1),[k]=T.useForm(),[y,l]=o.useState(!1),[m,f]=o.useState(!1),{push:u}=Ce(),[O]=T.useForm(),[$,G]=o.useState(!1),[M,q]=o.useState(!1),N=F=>{c(F),q(!0)},U=F=>{c(F),f(!0)},j=F=>{d(F),G(!0)},S=async F=>{const{data:J}=await B.custom({url:"",method:"post",meta:{operation:"connectClass",variables:{id:{value:F,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error connecting darasa"),{data:null})).then(se=>se);J&&(J.success?(G(!1),d(null),g(J.message),s(a.filter(se=>se.id!==F))):g.error(J.message))},A=async F=>{const{data:J}=await B.custom({url:"",method:"post",meta:{operation:"addDarasaArchive",variables:{id:{value:F,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error adding darasa to archive"),{data:null})).then(se=>se);J&&(J.success?(g.success(J.message),s(a.filter(se=>se.id!==F))):g.error(J.message)),pe.destroyAll()},C=F=>{pe.confirm({title:"Confirm",icon:e.jsx(ge,{}),content:"Adding Class To Archive ....",okText:"Add",cancelText:"Cancel",onOk:()=>A(F)})},h=async F=>{const{data:J}=await B.custom({url:"",method:"post",meta:{operation:"createDarasa",variables:{name:{value:F.name,type:"String",required:!0},description:{value:F.description,type:"String",required:!0},payable:{value:F.payable,type:"Boolean",required:!1},price:{value:F.price,type:"Float",required:!1},duration:{value:F.duration,type:"Int",required:!1},durationType:{value:F.duration_type,type:"String",required:!1},startDate:{value:F.start_date,type:"String",required:!1}},fields:["success","message",{darasa:rt}]}}).catch(()=>(g.error("Error creating darasa"),{data:null})).then(se=>se);J&&(J.success?(g.success(J.message),l(!1),s([J.darasa,...a])):g.error(J.message))},v=async F=>{const{data:J}=await B.custom({url:"",method:"post",meta:{operation:"updateDarasa",variables:{id:{value:F.id,type:"Int",required:!0},name:{value:F.name,type:"String",required:!0},description:{value:F.description,type:"String",required:!0},payable:{value:F.payable,type:"Boolean",required:!1},price:{value:F.price,type:"Float",required:!1},duration:{value:F.duration,type:"Int",required:!1},durationType:{value:F.duration_type,type:"String",required:!1},startDate:{value:F.start_date,type:"String",required:!1}},fields:["success","message",{darasa:rt}]}}).catch(()=>(g.error("Error updating darasa"),{data:null})).then(se=>se);J&&(J.success?(g.success(J.message),f(!1),s(a.map(se=>se.id===F.id?J.darasa:se))):g.error(J.message))},E=()=>{O.resetFields(),l(!0)},z=async F=>{const{data:J}=await B.custom({url:"",method:"post",meta:{operation:"disconnectClass",variables:{classId:{value:F,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error disconnecting darasa"),{data:null})).then(se=>se);J&&(J.success?(g.success(J.message),s(a.filter(se=>se.id!==F))):g.error(J.message))},te=F=>{pe.confirm({title:"Disconnecting Class",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Disconnect",cancelText:"Cancel",onOk:()=>z(F)})},de=async F=>{const{data:J}=await B.custom({url:"",method:"post",meta:{operation:"deleteDarasa",variables:{id:{value:F,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error deleting darasa"),{data:null})).then(se=>se);J&&(J.success?(g.success(J.message),s(a.filter(se=>se.id!==F))):g.error(J.message))},We=F=>{pe.confirm({title:"Deleting Class",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>de(F)})},_e=async(F,J=24,se="")=>{I(!0);const{data:Ne}=await B.custom({url:"",method:"get",meta:{operation:"myMadarasa",variables:{page:{value:F,type:"Int",required:!0},key:{value:se,type:"String",required:!1},pageSize:{value:J,type:"Int",required:!0},where:{value:{mode:r.mode},type:"JSON",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:rt}]}}).catch(()=>(g.error("Error getting darasas"),{data:null})).then(Qe=>Qe);Ne&&(x(Ne.total),D(Ne.page),H(Ne.hasNext),V(Ne.hasPrev),s(Ne.results)),I(!1)},ve=async()=>{const{data:F}=await B.custom({url:"",method:"get",meta:{operation:"darasaAuth",variables:{},fields:["auth"]}}).catch(()=>(g.error("Error getting darasa auth"),{data:null})).then(J=>J);F&&n(F.auth.create_classes)};return o.useEffect(()=>{ve(),_e(1)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(qe,{container:!0,children:[e.jsx(qe,{item:!0,xs:12,sm:6,md:4,lg:4,children:e.jsx(T,{layout:"vertical",form:k,onFinish:F=>{D(1),_e(1,w,F.key)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Classes...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0,disabled:b})})})}),e.jsx(qe,{item:!0,xs:12,sm:6,md:8,lg:8,sx:{display:"flex",justifyContent:"flex-end",paddingBottom:{xs:2,sm:0,md:0,lg:0}},children:r.mode!=="connect"&&e.jsx(K,{size:"large",icon:e.jsx(Ht,{}),onClick:()=>E(),disabled:!t||b,children:"Create Class"})})]}),e.jsx(ce,{spinning:b,children:a.length>0?e.jsx(qe,{container:!0,children:a.map(F=>e.jsx(qe,{item:!0,xs:12,sm:6,md:4,lg:4,children:e.jsxs(ke,{hoverable:F.isActive,style:{marginRight:10,marginBottom:5},children:[e.jsx(De,{style:{right:0,position:"absolute"},children:e.jsx(be,{trigger:["click"],overlay:e.jsxs(Y,{children:[F.isConnected?e.jsxs(e.Fragment,{children:[e.jsx(Y.Item,{icon:e.jsx(Ye,{}),disabled:!F.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>{F.isActive&&F.isConnected?u("/oclass/class/session/"+F.id+"/"+F.code):F.isActive&&!F.isConnected?j(F):g("Class is Blocked")},children:"Open"})}),e.jsx(Y.Item,{icon:e.jsx(Ot,{}),onClick:()=>U(F),disabled:!(F!=null&&F.canManage),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(Y.Item,{icon:e.jsx(sn,{}),onClick:()=>N(F),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Share"})}),e.jsx(Y.Item,{icon:e.jsx(Ae,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),F.isAuthor?e.jsx(e.Fragment,{}):e.jsx(Y.Item,{icon:e.jsx(Ae,{}),onClick:()=>te(F.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Disconnect"})}),e.jsx(Y.Item,{icon:e.jsx($e,{}),onClick:()=>We(F.id),disabled:!(F!=null&&F.canDelete),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}),e.jsx(Y.Item,{icon:e.jsx(la,{}),onClick:()=>C(F.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Archive"})},"drive-archive-"+F.id)]}):e.jsx(e.Fragment,{}),F.isConnected?e.jsx(e.Fragment,{}):e.jsx(Y.Item,{icon:e.jsx(Ye,{}),disabled:!F.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>u("/oclass/class/session/"+F.id+"/"+F.code),children:"Connect"})})]}),overlayStyle:{zIndex:9999},children:e.jsx(K,{type:"link",size:"large",className:"ant-dropdown-link",style:{zIndex:1},onClick:J=>J.preventDefault(),children:e.jsx(Oe,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx(fr.Ribbon,{text:F.code,placement:"start",color:"orange",children:e.jsx("a",{onClick:()=>u("/oclass/class/session/"+F.id+"/"+F.code),children:e.jsxs(De,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Se,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(Ye,{}),src:F.icon}),e.jsx("span",{style:{fontSize:20},children:F.name})]})})})]})},F.id))}):e.jsx(st,{severity:"info",sx:{fontSize:18},children:b?e.jsx(e.Fragment,{children:"Loading ..."}):e.jsx(e.Fragment,{children:"No Classes Found"})})}),(P||W)&&!b&&e.jsx(xe,{children:e.jsx(ca,{showSizeChanger:!0,onShowSizeChange:(F,J)=>{D(F),L(J),_e(F,J)},defaultCurrent:_,total:R,onChange:(F,J)=>{D(F),L(J||w),_e(F,J||w)}})}),e.jsx(ae,{title:"Creating Class",open:y,destroyOnClose:!0,width:"40vw",onClose:F=>l(F),children:e.jsx(Ja,{form:O,onFinish:h})}),e.jsx(ae,{title:"Editting Class",width:"40vw",open:m,onClose:F=>f(F),children:e.jsx(Qa,{darasa:i,form:O,onFinish:v})}),e.jsx(ae,{title:"Connecting "+(p==null?void 0:p.name),open:$,onClose:F=>G(F),children:e.jsxs(e.Fragment,{children:[e.jsx(bn,{id:p==null?void 0:p.id}),e.jsx(K,{onClick:()=>S(p==null?void 0:p.id),style:{position:"absolute",bottom:0,right:0,margin:10},children:"Connect"})]})}),e.jsx(ae,{title:"Share Class",open:M,width:"40vw",onClose:F=>q(F),children:e.jsx(ke,{title:"Click Copy icon to copy share link",children:e.jsx(Za,{copyable:{icon:[e.jsx(ua,{},"copy-icon"),e.jsx(da,{},"copied-icon")],tooltips:["click here","you clicked!!"],onCopy:()=>{g.success("Link Successfully Copied")}},style:{textAlign:"center",fontSize:20},children:mr.site_url+"/oclass/class/session/"+(i==null?void 0:i.id)+"/"+(i==null?void 0:i.code)})})})]})},es=()=>e.jsxs(xe,{children:[e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx(Je,{to:"/oclass",children:"Home"})}),e.jsx(re.Item,{children:"Connect Classes"})]}),e.jsx(xe,{sx:{mt:2},children:e.jsx(Gt,{mode:"connect"})})]}),ts=()=>e.jsx(es,{}),rs=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx(Je,{to:"/oclass",children:"Home"})}),e.jsx(re.Item,{children:"Classes"})]}),e.jsx(xe,{sx:{mt:2},children:e.jsx(Gt,{mode:"all"})})]}),ns=()=>e.jsx(rs,{}),as=r=>{const[t,n]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:r.form,onFinish:a=>{a.content=t,r.onFinish(a)},requiredMark:!1,children:[e.jsx(T.Item,{name:"title",label:"Title",rules:[{required:!0,type:"string",message:"Please enter title"}],children:e.jsx(ne,{size:"large",placeholder:"Write Content ..."})}),e.jsx("h3",{children:"Announcement Description"}),e.jsx(ze.CKEditor,{editor:He,data:t,onReady:a=>{a.editing.view.change(s=>{s.setStyle("min-height","300px",a.editing.view.document.getRoot())})},onChange:(a,s)=>{const i=s.getData();n(i)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},ss=r=>{const[t,n]=o.useState("");return o.useEffect(()=>{var a,s,i;(i=r.form)==null||i.setFieldsValue({title:(a=r.announcement)==null?void 0:a.title,content:(s=r.announcement)==null?void 0:s.content})},[r.form]),e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:r.form,onFinish:a=>{a.content=t,r.onFinish(a)},requiredMark:!1,children:[e.jsx(T.Item,{name:"title",label:"Title",rules:[{required:!0,type:"string",message:"Please enter title"}],children:e.jsx(ne,{size:"large",placeholder:"Write Content ..."})}),e.jsx("h3",{children:"Announcement Description"}),e.jsx(ha,{onChange:a=>n(a)}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},is=r=>{const[t,n]=o.useState(),[a,s]=o.useState([]),[i,c]=o.useState(!0),[p,d]=o.useState(1),[b]=T.useForm(),[I,_]=o.useState(0),[D,R]=o.useState(0),[x,w]=o.useState(!0);Ce();const[L,P]=o.useState(!1),[H,W]=o.useState(!1),[V]=T.useForm(),[k]=T.useForm(),[y,l]=o.useState(!1),m=N=>{n(N),l(!0)},f=N=>{n(N),W(!0)},u=()=>{P(!0)},O=async N=>{const{data:U}=await B.custom({url:"",method:"post",meta:{operation:"createDarasaAnnouncement",variables:{id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},title:{value:N.title,type:"String",required:!0},content:{value:N.content,type:"String",required:!0}},fields:["success","message",{announcement:Ft}]}}).catch(()=>(g.error("Error creating announcement"),{data:null})).then(j=>j);U&&(U.success?(g(U.message),s([U.announcement,...a]),V.resetFields(),P(!1)):g.error(U.message))},$=async N=>{const{data:U}=await B.custom({url:"",method:"post",meta:{operation:"updateDarasaAnnouncement",variables:{id:{value:t===void 0?"0":t.id,type:"Int",required:!0},title:{value:N.title,type:"String",required:!0},content:{value:N.content,type:"String",required:!0}},fields:["success","message",{announcement:Ft}]}});U.success?(g(U.message),s(a.map(j=>j.id===U.announcement.id?U.announcement:j)),k.resetFields(),W(!1)):g.error(U.message)},G=async(N,U="",j=!1)=>{const{data:S}=await B.custom({url:"",method:"get",meta:{operation:"darasaAnnouncements",variables:{page:{value:N,type:"Int",required:!0},key:{value:U,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Ft}]}});R(S.total),_(S.pages),d(S.page),w(S.hasNext),(U.length>0||U.length===0&&j)&&s(S.results),S.results.length>0&&!j&&s(a.concat(S.results)),c(!1)},M=async N=>{const{data:U}=await B.custom({url:"",method:"post",meta:{operation:"deleteDarasaAnnouncement",variables:{id:{value:N,type:"Int",required:!0}},fields:["success","message"]}});U.success?(g.success(U.message),s(a.filter(j=>j.id!==N))):g.error(U.message)},q=N=>{pe.confirm({title:"Deleting Announcent",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>M(N)})};return o.useEffect(()=>{G(p)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:20,children:e.jsx(T,{layout:"vertical",form:b,onFinish:N=>G(0,N.key,!0),children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Resources Links...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{size:"large",icon:e.jsx(ht,{}),onClick:u,disabled:!r.canManage,children:"Add Announcement"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(ce,{spinning:i,children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:a,renderItem:N=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(ee.Item,{style:{margin:0,padding:0},actions:[e.jsx(be,{trigger:["click"],overlay:e.jsxs(Y,{children:[e.jsx(Y.Item,{icon:e.jsx(fa,{}),onClick:()=>m(N),children:e.jsx("a",{children:"Read"})}),e.jsx(Y.Item,{icon:e.jsx($e,{}),disabled:!N.canDelete,onClick:()=>q(N.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}),e.jsx(Y.Item,{icon:e.jsx(Ot,{}),disabled:!N.canEdit,onClick:()=>f(N),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(Y.Item,{icon:e.jsx(Ae,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(Oe,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(ee.Item.Meta,{style:{borderBottom:"1px solid #f0f0f0"},avatar:e.jsx(ma,{}),title:e.jsx("a",{target:"_blank",rel:"noreferrer",children:N.title}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:ir(N.content.replace(/<[^>]+>/g,""),225)}),e.jsx("p",{children:e.jsx(ft,{date:new Date(N.created),locale:"en-US"})})]})})},"class-resource-link-"+N.id)},"class-resource-link-item-container-"+N.id)}),x&&e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:10},children:e.jsx(K,{type:"primary",onClick:()=>{G(p+1)},children:"Load More"})})]})}),e.jsx(ae,{title:"Adding Announcement",open:L,onClose:N=>P(N),width:"50vw",children:e.jsx(as,{form:V,onFinish:O})}),e.jsx(ae,{title:"Editting Announcement",open:H,onClose:N=>W(N),width:"50vw",children:e.jsx(ss,{announcement:t,form:k,onFinish:$})}),e.jsx(ae,{title:e.jsx("h3",{children:t==null?void 0:t.title}),open:y,onClose:N=>l(N),width:"75vw",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(t==null?void 0:t.content)??""},style:{marginTop:10}})})]})},os=r=>{const[t,n]=o.useState(!0),[a,s]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:r.form,onFinish:i=>{i.online=t,i.description=a,r.onFinish(i)},requiredMark:!1,children:[e.jsx(T.Item,{name:"title",label:"Title",rules:[{required:!0,type:"string",message:"Please input Title"}],children:e.jsx(ne,{size:"large",placeholder:"Enter Title ..."})}),e.jsx(T.Item,{name:"online",children:e.jsx(zt,{checked:t,onChange:()=>n(!t),children:"Online Submit Assignment Work"})}),e.jsx(T.Item,{name:"deadline",label:"Deadline",rules:[{required:!0,type:"date",message:"Please select Deadline"}],children:e.jsx(it,{size:"large",showTime:{format:"HH:mm"},disabledDate:i=>{const c=ue().format("YYYY-MM-DD");return i&&i<ue(c,"YYYY-MM-DD")},style:{width:"100%"},popupStyle:{zIndex:9999}})}),e.jsx("h3",{children:"Description"}),e.jsx(ze.CKEditor,{editor:He,data:a,onReady:i=>{i.editing.view.change(c=>{c.setStyle("min-height","150px",i.editing.view.document.getRoot())})},onChange:(i,c)=>{const p=c.getData();s(p)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{height:45}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},ls=r=>{const[t,n]=o.useState([]),[a,s]=o.useState(),[i,c]=o.useState(!0),[p,d]=o.useState(1),[b]=T.useForm(),[I,_]=o.useState(0),[D,R]=o.useState(0),[x,w]=o.useState(!0);Ce();const[L,P]=o.useState(!1),[H,W]=o.useState(!1),[V,k]=o.useState(!1),[y,l]=o.useState(!1),[m,f]=o.useState(!1),[u]=T.useForm(),[O]=T.useForm(),$=v=>{s(v),f(!0)},G=v=>{n(t.map(E=>E.id===v.id?v:E))},M=v=>{s(v),l(!0)},q=v=>{s(v),W(!0)},N=v=>{s(v),k(!0)},U=()=>{P(!0)},j=async v=>{const{data:E}=await B.custom({url:"",method:"post",meta:{operation:"createDarasaAssignment",variables:{id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},title:{value:v.title,type:"String",required:!0},description:{value:v.description,type:"String",required:!0},deadline:{value:v.deadline,type:"DateTime",required:!0},online:{value:v.online,type:"Boolean",required:!0}},fields:["success","message",{assignment:Tr}]}}).catch(()=>(g.error("Failed to create assignment"),{data:null})).then(z=>z);E&&(E.success?(g(E.message),n([E.assignment,...t]),u.resetFields(),P(!1)):g.error(E.message))},S=async v=>{const{data:E}=await B.custom({url:"",method:"post",meta:{operation:"updateDarasaAssignment",variables:{id:{value:a===void 0?0:a.id,type:"Int",required:!0},title:{value:v.title,type:"String",required:!0},description:{value:v.description,type:"String",required:!0},deadline:{value:v.deadline,type:"DateTime",required:!0},online:{value:v.online,type:"Boolean",required:!0}},fields:["success","message",{assignment:Ft}]}}).catch(()=>(g.error("Failed to update assignment"),{data:null})).then(z=>z);E&&(E.success?(g(E.message),n(t.map(z=>z.id===E.assignment.id?E.assignment:z)),O.resetFields(),k(!1)):g.error(E.message))},A=async(v,E="",z=!1)=>{const{data:te}=await B.custom({url:"",method:"get",meta:{operation:"darasaAssignments",variables:{page:{value:v,type:"Int",required:!0},key:{value:E,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Tr}]}}).catch(()=>(g.error("Failed to fetch assignments"),{data:null})).then(de=>de);te&&(R(te.total),_(te.pages),d(te.page),w(te.hasNext),(E.length>0||E.length===0&&z)&&n(te.results),te.results.length>0&&!z&&n(t.concat(te.results))),c(!1)},C=async v=>{const{data:E}=await B.custom({url:"",method:"post",meta:{operation:"deleteDarasaAssignment",variables:{id:{value:v,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Failed to delete assignment"),{data:null})).then(z=>z);E&&(E.success?(g.success(E.message),n(t.filter(z=>z.id!==v))):g.error(E.message))},h=v=>{pe.confirm({title:"Deleting Assignment",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>C(v)})};return o.useEffect(()=>{A(p)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:20,children:e.jsx(T,{layout:"vertical",form:b,onFinish:v=>A(0,v.key,!0),children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Assignments...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{icon:e.jsx(ht,{}),onClick:U,disabled:!r.canManage,size:"large",children:"Add Assignment"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(ce,{spinning:i,children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,renderItem:v=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(ee.Item,{style:{margin:0,padding:0},actions:[e.jsx(be,{trigger:["click"],overlay:e.jsxs(Y,{children:[e.jsx(Y.Item,{icon:e.jsx(Qt,{}),children:e.jsx("a",{target:"_blank",onClick:()=>g("on construction"),children:"View"})}),e.jsx(Y.Item,{icon:e.jsx(Qt,{}),children:e.jsx("a",{target:"_blank",onClick:()=>M(v),children:"Submissions"})}),e.jsx(Y.Item,{icon:e.jsx(Qt,{}),children:e.jsx("a",{target:"_blank",onClick:()=>q(v),children:"Attachements"})}),e.jsx(Y.Item,{icon:e.jsx(Ot,{}),disabled:!v.canDelete,onClick:()=>N(v),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(Y.Item,{icon:e.jsx($e,{}),disabled:!v.canEdit,onClick:()=>h(v.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}),e.jsx(Y.Item,{icon:e.jsx(Ae,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:E=>E.preventDefault(),children:e.jsx(Oe,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(ee.Item.Meta,{style:{borderBottom:"1px solid #e8e8e8",paddingBottom:10},avatar:e.jsx(on,{}),title:e.jsxs("a",{target:"_blank",rel:"noreferrer",children:[v.title,v.onlineSubmission&&e.jsx("span",{style:{marginLeft:20},children:e.jsx(oe,{color:"red",children:"Online Submission"})})]}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:v.description}}),e.jsxs("p",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{children:[e.jsxs(oe,{color:"cyan",children:[e.jsx("span",{style:{marginRight:5},children:"Created:"}),e.jsx(ft,{date:new Date(v.created),locale:"en-US"})]}),e.jsxs(oe,{color:"green",children:[e.jsx("span",{style:{marginRight:5},children:"Deadline:"}),e.jsx(ft,{date:new Date(v.deadline),locale:"en-US"})]}),e.jsx(Ve,{title:"Click to View Attachments",children:e.jsx("a",{onClick:()=>q(v),children:e.jsxs(oe,{color:"orange",children:[e.jsx("span",{style:{marginRight:5},children:"Attachments:"}),v.totalAttachments]})})})]}),e.jsxs("span",{children:[v.canSubmit&&!v.canManage&&e.jsx(Ve,{title:v.submitted?"Click to Re-submitt Your Assignment Work":"Click to Submitt Your Assignment Work",color:v.submitted?"green":"red",children:e.jsx("a",{onClick:()=>$(v),children:e.jsx(oe,{color:v.submitted?"green":"red",icon:e.jsx(ln,{}),children:e.jsxs("span",{style:{marginRight:5},children:[v.submitted?"Re-submitt":"Submitt"," ","Assignment Work:"]})})})}),v.canManage&&e.jsx(Ve,{title:"Click to View Students Submissions",color:"green",children:e.jsx("a",{onClick:()=>M(v),children:e.jsx(oe,{color:"green",children:e.jsx("span",{style:{marginRight:5},children:"Submissions"})})})})]})]})]})})},"class-assignment-link-"+v.id)},"class-resource-link-item-container-"+v.id)}),x&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{type:"primary",onClick:()=>{A(p+1)},children:"Load More"})})]})}),e.jsx(ae,{title:"Creating Assignment",open:L,onClose:v=>P(v),width:"50vw",children:e.jsx(os,{form:u,onFinish:j})}),e.jsx(ae,{title:"Edit Assignment",open:V,onClose:v=>k(v),width:"50vw",children:e.jsx(pa,{assignment:a,form:O,onFinish:S})}),e.jsx(ae,{title:"Assignment Attachements",open:H,onClose:v=>W(v),width:"50vw",children:e.jsx(ga,{assignment:a,canManage:r.canManage})}),e.jsx(ae,{title:"Assignment Submissions",open:y,onClose:v=>l(v),width:"50vw",children:e.jsx(ya,{assignment:a,canManage:r.canManage})}),e.jsx(ae,{title:"Assignment Work Submission",open:m,onClose:v=>f(v),width:"50vw",children:e.jsx(xa,{assignment:a,canManage:r.canManage,submitted:a==null?void 0:a.submitted,onFinish:G})})]})},cs=r=>{const[t,n]=o.useState([]),[a,s]=o.useState(!0),[i,c]=o.useState(1),[p,d]=o.useState(0),[b,I]=o.useState(!0),[_]=T.useForm();Ce();const D=async(x,w="",L=!1)=>{const{data:P}=await B.custom({url:"",method:"get",meta:{operation:"darasaDrivesToConnect",variables:{page:{value:x,type:"Int",required:!0},key:{value:w,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:va}]}}).catch(()=>(g.error("Error loading drives"),{data:null})).then(H=>H);P&&(d(P.total),c(P.page),I(P.hasNext),n(P.results)),s(!1)},R=async x=>{const{data:w}=await B.custom({url:"",method:"post",meta:{operation:"addDarasaDrive",variables:{drive:{value:x,type:"Int",required:!0},darasa:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["success","message",{darasaDrive:cn}]}}).catch(()=>(g.error("Error adding drive"),{data:null})).then(L=>L);w&&(w.success?(g.success(w.message),n(t.filter(L=>parseInt(L.id.toString())!==x)),r.handleAddingDrive(w.darasaDrive)):g.error(w.message))};return o.useEffect(()=>{D(i)},[r.random]),a?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:e.jsx(X,{span:24,children:e.jsx(T,{layout:"vertical",form:_,onFinish:x=>{c(0),D(0,x.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Drive(s)...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs("div",{id:"scrollableDrivesToAdd",style:{height:"65vh",overflow:"auto"},children:[e.jsx(ee,{bordered:!0,dataSource:t,renderItem:x=>e.jsxs(ee.Item,{actions:[e.jsx(yt,{title:"Are you sure to Add this Drive -"+x.name+" ?",onConfirm:()=>R(parseInt(x.id.toString())),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(K,{icon:e.jsx(Ht,{}),children:"Add"})})],children:[x.name,e.jsx(Wt,{}),e.jsx(gt.Text,{mark:!0,children:x.code})]})}),b&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{type:"primary",onClick:()=>{D(i+1)},children:"Load More"})})]})]})},us=r=>{const[t,n]=o.useState([]),[a,s]=o.useState(!0),[i,c]=o.useState(1),[p,d]=o.useState(0),[b,I]=o.useState(0),[_,D]=o.useState(!0),[R]=T.useForm(),{push:x}=Ce(),[w,L]=o.useState(!1),P=()=>{L(!0)},H=async(y,l="",m=!1)=>{const{data:f}=await B.custom({url:"",method:"get",meta:{operation:"darasaDrives",variables:{page:{value:y,type:"Int",required:!0},key:{value:l,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:cn}]}}).catch(()=>(g.error("Error fetching drives"),{data:null})).then(u=>u);f&&(I(f.total),d(f.pages),c(f.page),D(f.hasNext),n(f.results)),s(!1)},W=async y=>{n([y,...t])},V=async y=>{const{data:l}=await B.custom({url:"",method:"post",meta:{operation:"deleteDarasaDrive",variables:{id:{value:y,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error removing drive"),{data:null})).then(m=>m);l&&(l.success?(g.success(l.message),n(t.filter(m=>m.id!==y))):g.error(l.message))},k=y=>{pe.confirm({title:"Removing Drive",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Remove",cancelText:"Cancel",onOk:()=>V(y)})};return o.useEffect(()=>{H(i)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:20,children:e.jsx(T,{layout:"vertical",form:R,onFinish:y=>{c(0),H(0,y.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Drive(s)...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{icon:e.jsx(Yt,{}),onClick:P,disabled:!r.canManage,children:"Add Drive"})})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[t.length>0?e.jsx(qe,{container:!0,children:t.map(y=>e.jsx(qe,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(ke,{hoverable:y.drive.isActive,style:{marginRight:10},children:[e.jsx(De,{style:{right:0,position:"absolute"},children:e.jsx(be,{trigger:["click"],overlay:e.jsxs(Y,{children:[e.jsx(Y.Item,{icon:e.jsx(Ye,{}),disabled:!y.drive.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>{y.drive.isActive?x("/odrive/drive/"+y.drive.id+"/"+y.drive.code+"/files"):g("Drive is Blocked")},children:"View"})}),e.jsx(Y.Item,{icon:e.jsx(Ae,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(Y.Item,{icon:e.jsx(mt,{}),onClick:()=>k(y.id),disabled:!r.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:l=>l.preventDefault(),children:e.jsx(Oe,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx(fr.Ribbon,{text:y.drive.code,placement:"start",color:"orange",children:e.jsx("a",{onClick:()=>{y.drive.isActive?x("/odrive/drive/"+y.drive.id+"/"+y.drive.code+"/files"):g("Drive is Blocked")},children:e.jsxs(De,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Se,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(Ye,{}),src:y.drive.icon}),e.jsx(Ve,{title:y.drive.name,children:e.jsx("span",{style:{fontSize:20},children:y.drive.name.length>15?y.drive.name.substring(0,15)+"...":y.drive.name})})]})})})]})},y.id))}):e.jsxs(st,{severity:"info",children:["No drives found. Click on the ",e.jsx("b",{children:"Add Drive"})," button to add a drive"]}),_&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{type:"primary",onClick:()=>{H(i+1)},children:a?e.jsx(ce,{}):e.jsxs("span",{children:["Load More",e.jsxs("span",{style:{marginLeft:8},children:[i,"/",p]})]})})})]}),e.jsx(ae,{title:"Adding Drives",open:w,onClose:y=>L(y),width:"50vw",children:e.jsx(cs,{id:r.id,random:Math.random(),handleAddingDrive:W})})]})},ds=r=>{const[t,n]=o.useState([]),[a,s]=o.useState(!0),[i,c]=o.useState(1),[p]=T.useForm(),[d,b]=o.useState(0),[I,_]=o.useState(0),[D,R]=o.useState(!0),{push:x}=Ce(),[w,L]=o.useState(!1),[P,H]=o.useState(),W=l=>{H(l),L(!0)},V=async(l,m="",f=!1)=>{if(D){const{data:u}=await B.custom({url:"",method:"get",meta:{operation:"darasaFiles",variables:{page:{value:parseInt(l.toString()),type:"Int",required:!0},key:{value:m,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:ba}]}}).catch(()=>(g.error("Error loading files"),{data:null})).then(O=>O);u&&(_(u.total),b(u.pages),c(u.page),R(u.hasNext),(m.length>0||m.length===0&&f)&&n(u.results),u.results.length>0&&!f&&n(t.concat(u.results))),s(!1)}},k=l=>{const m=t.map(f=>(f.id===l.id&&(f.imageVisible=!1),f));n(m)},y=l=>{const m=t.map(f=>(f.id===l.id&&(f.imageVisible=!0),f));n(m)};return o.useEffect(()=>{V(i)},[]),e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:e.jsx(X,{span:20,children:e.jsx(T,{layout:"vertical",form:p,onFinish:l=>V(0,l.key,!0),children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(ce,{spinning:a,children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,renderItem:l=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(ee.Item,{style:{margin:0,padding:0},actions:[e.jsx(be,{trigger:["click"],overlay:e.jsxs(Y,{children:[e.jsx(Y.Item,{icon:e.jsx(Bt,{}),children:e.jsx("a",{target:"_blank",href:l.file,rel:"noopener noreferrer",download:!0,children:"Download"})}),e.jsx(Y.Item,{icon:e.jsx(sn,{}),onClick:()=>g("under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Share"})}),e.jsx(Y.Item,{icon:e.jsx(Ae,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:m=>m.preventDefault(),children:e.jsx(Oe,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(ee.Item.Meta,{avatar:e.jsx(Se,{src:l.icon}),title:l.isImage?e.jsxs(e.Fragment,{children:[e.jsx(Ve,{title:"Click to View Image",color:"red",placement:"top",children:e.jsx("a",{onClick:()=>y(l),children:l.title})}),e.jsx(K,{onClick:()=>W(l),style:{marginLeft:10},danger:!0,children:"Details Dialog"}),e.jsx(It,{style:{display:"none"},wrapperStyle:{zIndex:9999},src:l.file,preview:{visible:l.imageVisible,src:l.file,onVisibleChange:m=>{k(l)},style:{zIndex:9999}}})]}):e.jsx("a",{onClick:()=>W(l),children:l.title}),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:l.description}),l.tags.length>0&&e.jsx(Z,{style:{marginBottom:3},children:e.jsx(X,{children:l.tags.map(m=>e.jsx(Ve,{title:"File Tag",placement:"top",children:e.jsx(oe,{color:"orange",children:m.tag.name},"tag-"+m.id)}))})}),l.drive&&e.jsx(e.Fragment,{children:e.jsx(Z,{children:e.jsxs(X,{children:[e.jsxs(oe,{color:"green",children:["Drive: ",l.drive.name]}),e.jsx(Ve,{title:"Open Drive:"+l.drive.name,children:e.jsx(K,{icon:e.jsx(Ye,{}),onClick:()=>{x("/odrive/drive/"+l.drive.id+"/"+l.drive.code+"/files")}})})]})})}),e.jsxs("p",{children:[!l.isAuthor&&e.jsx(e.Fragment,{children:e.jsxs("span",{style:{color:"orange"},children:["Uploaded By:",e.jsx(Se,{size:"small",style:{marginLeft:5},src:l.author.pic}),l.author.fullName]})}),l.isAuthor&&e.jsx(e.Fragment,{children:e.jsx("span",{style:{color:"orange"},children:"Uploaded By:You"})}),e.jsxs("span",{style:{color:"orange",marginLeft:3},children:["|",e.jsx("span",{style:{marginLeft:2},children:l.size})]}),e.jsx(e.Fragment,{children:e.jsxs("span",{style:{marginLeft:3},children:["|",e.jsx(ft,{date:new Date(l.created),locale:"en-US"})]})})]})]})})},"file-"+l.id)})}),D&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{type:"primary",onClick:()=>V(i+1),disabled:!D,children:"Load More"})})]})}),e.jsx(Mt,{title:"File Informations",anchor:"right",width:"35vw",onClose:l=>L(l),open:w,children:e.jsx(ja,{id:P==null?void 0:P.id})})]})},hs=r=>e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:r.form,onFinish:t=>{r.onFinish(t)},requiredMark:!1,children:[e.jsx(T.Item,{name:"link",label:"Link",rules:[{required:!0,type:"url"}],children:e.jsx(ne,{size:"large",placeholder:"Enter Url Address ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})}),fs=r=>{const[t,n]=o.useState([]),[a,s]=o.useState(!0),[i,c]=o.useState(1),[p]=T.useForm(),[d,b]=o.useState(0),[I,_]=o.useState(0),[D,R]=o.useState(!0),[x,w]=o.useState(!1),[L]=T.useForm(),P=()=>{w(!0)},H=async y=>{const{data:l}=await B.custom({url:"",method:"post",meta:{operation:"createDarasaResourceLink",variables:{id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},link:{value:y.link,type:"String",required:!0}},fields:["success","message",{resource:Pr}]}}).catch(()=>(g.error("Error creating resource link"),{data:null})).then(m=>m);l&&(l.success?(g(l.message),n([l.resource,...t]),L.resetFields(),w(!1)):g.error(l.message))},W=async(y,l="",m=!1)=>{const{data:f}=await B.custom({url:"",method:"get",meta:{operation:"darasaResources",variables:{page:{value:y,type:"Int",required:!0},key:{value:l,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Pr}]}}).catch(()=>(g.error("Error fetching resources links"),{data:null})).then(u=>u);f&&(_(f.total),b(f.pages),c(f.page),R(f.hasNext),(l.length>0||l.length===0&&m)&&n(f.results),f.results.length>0&&!m&&n(t.concat(f.results))),s(!1)},V=async y=>{const{data:l}=await B.custom({url:"",method:"post",meta:{operation:"deleteDarasaResourceLink",variables:{id:{value:parseInt(y.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error deleting resource link"),{data:null})).then(m=>m);l&&(l.success?(g.success(l.message),n(t.filter(m=>m.id!==y))):g.error(l.message))},k=y=>{pe.confirm({title:"Deleting Resource Link",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>V(y)})};return o.useEffect(()=>{W(i)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:20,children:e.jsx(T,{layout:"vertical",form:p,onFinish:y=>W(0,y.key,!0),children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Resources Links...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{icon:e.jsx(ht,{}),onClick:P,disabled:!r.canManage,size:"large",children:"Add Resource"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(ce,{spinning:a,children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,renderItem:y=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(ee.Item,{style:{margin:0,padding:0},actions:[e.jsx(be,{trigger:["click"],overlay:e.jsxs(Y,{children:[e.jsx(Y.Item,{icon:e.jsx(Bt,{}),children:e.jsx("a",{target:"_blank",href:y.link,rel:"noopener noreferrer",children:"Open"})}),e.jsx(Y.Item,{icon:e.jsx($e,{}),disabled:!y.canDelete,onClick:()=>k(y.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}),e.jsx(Y.Item,{icon:e.jsx(Ae,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:l=>l.preventDefault(),children:e.jsx(Oe,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(ee.Item.Meta,{style:{borderBottom:"1px solid #e8e8e8"},avatar:e.jsx(ht,{}),title:e.jsx("a",{href:y.link,target:"_blank",rel:"noreferrer",children:y.link}),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{}),e.jsx("p",{children:e.jsx(ft,{date:new Date(y.created),locale:"en-US"})})]})})},"class-resource-link-"+y.id)},"class-resource-link-item-container-"+y.id)}),D&&e.jsx("div",{style:{textAlign:"center",marginTop:12},children:e.jsx("button",{onClick:()=>{W(i+1)},children:"Load More"})})]})}),e.jsx(ae,{title:"Adding Resource Link",open:x,onClose:y=>w(y),width:"50vw",children:e.jsx(hs,{form:L,onFinish:H})})]})},ms=r=>{const[t,n]=o.useState([]),[a,s]=o.useState(!0),[i,c]=o.useState(1),[p,d]=o.useState(0),[b,I]=o.useState(!0),[_]=T.useForm();Ce();const D=async(x,w="",L=!1)=>{const{data:P}=await B.custom({url:"",method:"get",meta:{operation:"darasaStudentsToAdd",variables:{page:{value:x,type:"Int",required:!0},key:{value:w,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Sa}]}}).catch(()=>(g.error("Error fetching students"),{data:null})).then(H=>H);P&&(d(P.total),c(P.page),I(P.hasNext),n(P.results)),s(!1)},R=async x=>{const{data:w}=await B.custom({url:"",method:"post",meta:{operation:"createDarasaStudent",variables:{darasa:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},student:{value:parseInt(x===void 0?"0":x.toString()),type:"Int",required:!0}},fields:["success","message",{student:Tt}]}}).catch(()=>(g.error("Error adding student"),{data:null})).then(L=>L);w&&(w.success?(g.success(w.message),n(t.filter(L=>L.id!==x)),r.handleAddingStudent(w.student)):g.error(w.message))};return o.useEffect(()=>{D(i)},[r.random]),a?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:e.jsx(X,{span:24,children:e.jsx(T,{layout:"vertical",form:_,onFinish:x=>{c(0),D(0,x.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search User(s)/Student(s) to Add ...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs("div",{id:"scrollableDrivesToAdd",style:{height:"65vh",overflow:"auto"},children:[e.jsx(ee,{dataSource:t,renderItem:x=>e.jsxs(ee.Item,{actions:[e.jsx(yt,{title:"Are you sure to Add  -"+x.fullName+" ?",onConfirm:()=>R(x.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(K,{icon:e.jsx(Ht,{}),children:"Add"})})],children:[e.jsx(Se,{src:x.pic,style:{marginRight:10}}),x.fullName,e.jsx(Wt,{}),e.jsx(gt.Text,{mark:!0,children:x.email})]})}),b&&e.jsx(K,{onClick:()=>{D(i+1)},type:"primary",style:{margin:"auto",display:"block"},children:"Load More"})]})]})},ps=r=>{const[t,n]=o.useState([]),[a,s]=o.useState(!0),[i,c]=o.useState(1),[p,d]=o.useState(0),[b,I]=o.useState(!0),[_]=T.useForm();Ce();const D=async(x,w="",L=!1)=>{const{data:P}=await B.custom({url:"",method:"get",meta:{operation:"blockedDarasaStudents",variables:{page:{value:x,type:"Int",required:!0},key:{value:w,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Tt}]}}).catch(()=>(g.error("Error fetching students"),{data:null})).then(H=>H);P&&(d(P.total),c(P.page),I(P.hasNext),n(P.results)),s(!1)},R=async(x,w)=>{const{data:L}=await B.custom({url:"",method:"post",meta:{operation:"blockUnblockDarasaStudent",variables:{id:{value:parseInt(x.toString()),type:"Int",required:!0},blocked:{value:w,type:"Boolean",required:!0}},fields:["success","message",{darasaStudent:Tt}]}}).catch(()=>(g.error("Error Unblocking student"),{data:null})).then(P=>P);L&&(L.success?(g.success(L.message),n(t.filter(P=>P.id!==x)),r.handleUnblockingStudent(L.darasaStudent)):g.error(L.message))};return o.useEffect(()=>{D(i)},[r.random]),a?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:e.jsx(X,{span:24,children:e.jsx(T,{layout:"vertical",form:_,onFinish:x=>{c(0),D(0,x.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Blocked Students ...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs("div",{id:"scrollableDrivesToAdd",style:{height:"65vh",overflow:"auto"},children:[e.jsx(ee,{dataSource:t,renderItem:x=>{var w,L,P;return e.jsxs(ee.Item,{actions:[e.jsx(yt,{title:"Are you sure to Unblock  -"+x.user.fullName+" ?",onConfirm:()=>R(x.id,!1),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(K,{icon:e.jsx(un,{}),children:"Unblock"})})],children:[e.jsx(Se,{src:(w=x==null?void 0:x.user)==null?void 0:w.pic,style:{marginRight:10}}),(L=x==null?void 0:x.user)==null?void 0:L.fullName,e.jsx(Wt,{}),e.jsx(gt.Text,{mark:!0,children:(P=x==null?void 0:x.user)==null?void 0:P.email})]})}}),b&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{onClick:()=>D(i+1),disabled:!b,children:"Load More"})})]})]})},gs=r=>{const[t,n]=o.useState([]),[a,s]=o.useState(!0),[i,c]=o.useState(1),[p,d]=o.useState(0),[b,I]=o.useState(0),[_,D]=o.useState(!0),[R]=T.useForm();Ce();const[x,w]=o.useState(!1),[L,P]=o.useState(!1),H=()=>{w(!0)},W=async(u,O="",$=!1)=>{const{data:G}=await B.custom({url:"",method:"get",meta:{operation:"darasaStudents",variables:{page:{value:u,type:"Int",required:!0},key:{value:O,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Tt}]}}).catch(()=>(g.error("Error fetching students"),{data:null})).then(M=>M);G&&(I(G.total),d(G.pages),c(G.page),D(G.hasNext),n(G.results)),s(!1)},V=async u=>{n([u,...t])},k=async u=>{const{data:O}=await B.custom({url:"",method:"post",meta:{operation:"deleteDarasaStudent",variables:{id:{value:parseInt(u.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error removing student"),{data:null})).then($=>$);O&&(O.success?(g.success(O.message),n(t.filter($=>$.id!==u))):g.error(O.message))},y=async(u,O)=>{const{data:$}=await B.custom({url:"",method:"post",meta:{operation:"blockUnblockDarasaStudent",variables:{id:{value:parseInt(u.toString()),type:"Int",required:!0},blocked:{value:O,type:"Boolean",required:!0}},fields:["success","message",{darasaStudent:Tt}]}}).catch(()=>(g.error("Error blocking/unblocking student"),{data:null})).then(G=>G);if($)if($.success){g.success($.message);const G=t.map(M=>M.id===u?$.darasaStudent:M);n(G)}else g.error($.message)},l=u=>{const O=t.map($=>$.id===u.id?u:$);n(O)},m=u=>{pe.confirm({title:"Removing Student",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Remove",cancelText:"Cancel",onOk:()=>k(u)})},f=(u,O)=>{pe.confirm({title:O?"Blocking Student":"Unblocking Student",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:O?"Block":"Unblock",cancelText:"Cancel",onOk:()=>y(u,O)})};return o.useEffect(()=>{W(i)},[]),a?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:12,children:e.jsx(T,{layout:"vertical",form:R,onFinish:u=>{c(0),W(0,u.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Student(s)...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(X,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(K,{size:"large",icon:e.jsx(Yt,{}),onClick:H,disabled:!r.canManage,children:"Add Student"}),e.jsx(K,{size:"large",icon:e.jsx(mt,{}),onClick:()=>P(!0),disabled:!r.canManage,children:"Blocked Students"})]})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[t.length>0?e.jsx(Z,{align:"top",children:t.map(u=>e.jsx(X,{span:6,children:e.jsxs(ke,{hoverable:u.isActive,style:{marginRight:10,borderColor:u.blocked?"red":"#f0f0f0"},children:[e.jsx(De,{style:{right:0,position:"absolute"},children:e.jsx(be,{trigger:["click"],overlay:e.jsxs(Y,{children:[e.jsx(Y.Item,{icon:e.jsx(Ye,{}),disabled:!u.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"View"})}),e.jsx(Y.Item,{icon:e.jsx(Ae,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(Y.Item,{icon:e.jsx(mt,{}),onClick:()=>m(u.id),disabled:!u.canDelete,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})}),u.blocked?e.jsx(Y.Item,{icon:e.jsx(un,{}),onClick:()=>f(u.id,!1),disabled:!u.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Unblock"})}):e.jsx(Y.Item,{icon:e.jsx(Ca,{}),onClick:()=>f(u.id,!0),disabled:!u.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Block"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:O=>O.preventDefault(),children:e.jsx(Oe,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx("a",{children:e.jsxs(De,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Se,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(Ye,{}),src:u.user.pic}),e.jsx("span",{style:{fontSize:20},children:u.user.fullName})]})})]})}))}):e.jsx(st,{severity:"info",children:"No Student found for this class. Please add some students"}),_&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{onClick:()=>{W(i+1)},disabled:!_,children:a?e.jsx(ce,{}):e.jsx(e.Fragment,{children:e.jsx("span",{children:"Load More"})})})})]}),e.jsx(ae,{title:"Adding Students",open:x,onClose:u=>w(u),width:"50vw",children:e.jsx(ms,{id:r.id,random:Math.random(),handleAddingStudent:V})}),e.jsx(ae,{title:"Blocked Students",open:L,onClose:u=>P(u),width:"50vw",children:e.jsx(ps,{id:r.id,random:Math.random(),handleUnblockingStudent:l})})]})},ys=r=>{const[t,n]=o.useState(!1),a=async s=>{var c;n(!0);const{data:i}=await B.custom({url:"",method:"post",meta:{operation:"createClassYoutubeVideo",variables:{classId:{value:parseInt((c=r.id)==null?void 0:c.toString()),type:"Int",required:!0},url:{value:s.url,type:"String",required:!0}},fields:["success","message",{video:pr}]}}).catch(()=>(g.error("Error Adding a Video"),{data:null})).then(p=>p);i&&(i.success?(g.success(i.message),r.handleAddingDrive(i.video)):g.error(i.message)),n(!1)};return e.jsx(e.Fragment,{children:e.jsx(ce,{spinning:t,children:e.jsxs(T,{layout:"vertical",onFinish:s=>{a(s)},requiredMark:!1,children:[e.jsx(T.Item,{name:"url",label:"Youtube Video URL",rules:[{required:!0,type:"url",message:"Please input Youtube URL ..."}],children:e.jsx(ne,{size:"large",placeholder:"Enter Youtube URL ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",loading:t,children:"Save"})})]})})})},_r=[".mp4"],xs=r=>Array.isArray(r)?r:r==null?void 0:r.fileList,vs=r=>{const[t,n]=o.useState(!1),[a]=T.useForm(),[s,i]=o.useState(""),c=$t(),p=async d=>{n(!0);const{data:b}=await B.custom({url:"",method:"post",meta:{operation:"uploadClassVideo",variables:{classId:{value:parseInt(c.id),type:"Int",required:!0},video:{value:d.video,type:"Upload",required:!0},title:{value:d.title,type:"String",required:!0},description:{value:d.description,type:"String",required:!1}},fields:["success","message",{video:pr}]}}).catch(()=>(g.error("Error uploading a Video File"),{data:null})).then(I=>I);b&&(b.success?(i(""),g.success(b.message),r.handleAddingVideo(b.video)):g.error(b.message)),n(!1)};return e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",onFinish:d=>{d.description=s,p(d)},requiredMark:!1,form:a,children:[e.jsx(T.Item,{label:"Pick a Video Files ("+_r.join()+")",children:e.jsx(T.Item,{name:"video",valuePropName:"fileList",getValueFromEvent:xs,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload students excel file"}],children:e.jsxs(gr.Dragger,{name:"file",accept:_r.join(),multiple:!1,beforeUpload:()=>!1,onChange:d=>{a.setFieldsValue({title:d.file.name})},onRemove:d=>{a.setFieldsValue({title:""})},children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(wa,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx(T.Item,{name:"title",label:"Video Title",rules:[{required:!0,type:"string",message:"Please input title"}],children:e.jsx(ne,{size:"large",placeholder:"Enter Title ..."})}),e.jsx("h3",{children:"Description"}),e.jsx(ze.CKEditor,{editor:He,data:s,onReady:d=>{d.editing.view.change(b=>{b.setStyle("min-height","100px",d.editing.view.document.getRoot())})},onChange:(d,b)=>{const I=b.getData();i(I)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})};class js extends o.Component{constructor(n){super(n);wr(this,"player");this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.load=this.load.bind(this),this.changeCurrentTime=this.changeCurrentTime.bind(this),this.seek=this.seek.bind(this),this.changePlaybackRateRate=this.changePlaybackRateRate.bind(this),this.changeVolume=this.changeVolume.bind(this),this.setMuted=this.setMuted.bind(this)}componentDidMount(){this.player.subscribeToStateChange(this.handleStateChange.bind(this)),this.props.updatePlayer(this.player,this.props.index)}setMuted(n){return()=>{this.player.muted=n}}handleStateChange(n){this.setState({player:n})}play(){g("playing"),this.player.play()}pause(){this.player.pause()}load(){this.player.load()}changeCurrentTime(n){return()=>{const{player:a}=this.player.getState();this.player.seek(a.currentTime+n)}}seek(n){return()=>{this.player.seek(n)}}changePlaybackRateRate(n){return()=>{const{player:a}=this.player.getState();this.player.playbackRate=a.playbackRate+n}}changeVolume(n){return()=>{const{player:a}=this.player.getState();this.player.volume=a.volume+n}}render(){return e.jsx("div",{children:e.jsx(Ia.Player,{ref:n=>{this.player=n},aspectRatio:"1110:680",preload:"auto",autoPlay:!1,children:e.jsx("source",{src:this.props.file})})})}}var Kt={},bs=function(t){return Ss(t)&&!Cs(t)};function Ss(r){return!!r&&typeof r=="object"}function Cs(r){var t=Object.prototype.toString.call(r);return t==="[object RegExp]"||t==="[object Date]"||Ts(r)}var ws=typeof Symbol=="function"&&Symbol.for,Is=ws?Symbol.for("react.element"):60103;function Ts(r){return r.$$typeof===Is}function Ps(r){return Array.isArray(r)?[]:{}}function Pt(r,t){return t.clone!==!1&&t.isMergeableObject(r)?pt(Ps(r),r,t):r}function ks(r,t,n){return r.concat(t).map(function(a){return Pt(a,n)})}function Ds(r,t){if(!t.customMerge)return pt;var n=t.customMerge(r);return typeof n=="function"?n:pt}function Os(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(t){return Object.propertyIsEnumerable.call(r,t)}):[]}function Ar(r){return Object.keys(r).concat(Os(r))}function Sn(r,t){try{return t in r}catch{return!1}}function Ms(r,t){return Sn(r,t)&&!(Object.hasOwnProperty.call(r,t)&&Object.propertyIsEnumerable.call(r,t))}function _s(r,t,n){var a={};return n.isMergeableObject(r)&&Ar(r).forEach(function(s){a[s]=Pt(r[s],n)}),Ar(t).forEach(function(s){Ms(r,s)||(Sn(r,s)&&n.isMergeableObject(t[s])?a[s]=Ds(s,n)(r[s],t[s],n):a[s]=Pt(t[s],n))}),a}function pt(r,t,n){n=n||{},n.arrayMerge=n.arrayMerge||ks,n.isMergeableObject=n.isMergeableObject||bs,n.cloneUnlessOtherwiseSpecified=Pt;var a=Array.isArray(t),s=Array.isArray(r),i=a===s;return i?a?n.arrayMerge(r,t,n):_s(r,t,n):Pt(t,n)}pt.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(a,s){return pt(a,s,n)},{})};var As=pt,Cn=As,Er=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Es(r,t){return!!(r===t||Er(r)&&Er(t))}function Fs(r,t){if(r.length!==t.length)return!1;for(var n=0;n<r.length;n++)if(!Es(r[n],t[n]))return!1;return!0}function Rs(r,t){t===void 0&&(t=Fs);var n,a=[],s,i=!1;function c(){for(var p=[],d=0;d<arguments.length;d++)p[d]=arguments[d];return i&&n===this&&t(p,a)||(s=r.apply(this,p),i=!0,n=this,a=p),s}return c}const Ls=Object.freeze(Object.defineProperty({__proto__:null,default:Rs},Symbol.toStringTag,{value:"Module"})),Ns=Ta(Ls);var qs=typeof Element<"u",Vs=typeof Map=="function",Us=typeof Set=="function",zs=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Rt(r,t){if(r===t)return!0;if(r&&t&&typeof r=="object"&&typeof t=="object"){if(r.constructor!==t.constructor)return!1;var n,a,s;if(Array.isArray(r)){if(n=r.length,n!=t.length)return!1;for(a=n;a--!==0;)if(!Rt(r[a],t[a]))return!1;return!0}var i;if(Vs&&r instanceof Map&&t instanceof Map){if(r.size!==t.size)return!1;for(i=r.entries();!(a=i.next()).done;)if(!t.has(a.value[0]))return!1;for(i=r.entries();!(a=i.next()).done;)if(!Rt(a.value[1],t.get(a.value[0])))return!1;return!0}if(Us&&r instanceof Set&&t instanceof Set){if(r.size!==t.size)return!1;for(i=r.entries();!(a=i.next()).done;)if(!t.has(a.value[0]))return!1;return!0}if(zs&&ArrayBuffer.isView(r)&&ArrayBuffer.isView(t)){if(n=r.length,n!=t.length)return!1;for(a=n;a--!==0;)if(r[a]!==t[a])return!1;return!0}if(r.constructor===RegExp)return r.source===t.source&&r.flags===t.flags;if(r.valueOf!==Object.prototype.valueOf&&typeof r.valueOf=="function"&&typeof t.valueOf=="function")return r.valueOf()===t.valueOf();if(r.toString!==Object.prototype.toString&&typeof r.toString=="function"&&typeof t.toString=="function")return r.toString()===t.toString();if(s=Object.keys(r),n=s.length,n!==Object.keys(t).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[a]))return!1;if(qs&&r instanceof Element)return!1;for(a=n;a--!==0;)if(!((s[a]==="_owner"||s[a]==="__v"||s[a]==="__o")&&r.$$typeof)&&!Rt(r[s[a]],t[s[a]]))return!1;return!0}return r!==r&&t!==t}var wn=function(t,n){try{return Rt(t,n)}catch(a){if((a.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw a}},nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.defaultProps=nt.propTypes=void 0;var Ge=Hs(Pa);function Hs(r){return r&&r.__esModule?r:{default:r}}var Ie=Ge.default.string,Te=Ge.default.bool,lt=Ge.default.number,er=Ge.default.array,vt=Ge.default.oneOfType,Fe=Ge.default.shape,Pe=Ge.default.object,he=Ge.default.func,Fr=Ge.default.node,Ws={url:vt([Ie,er,Pe]),playing:Te,loop:Te,controls:Te,volume:lt,muted:Te,playbackRate:lt,width:vt([Ie,lt]),height:vt([Ie,lt]),style:Pe,progressInterval:lt,playsinline:Te,pip:Te,stopOnUnmount:Te,light:vt([Te,Ie,Pe]),playIcon:Fr,previewTabIndex:lt,fallback:Fr,oEmbedUrl:Ie,wrapper:vt([Ie,he,Fe({render:he.isRequired})]),config:Fe({soundcloud:Fe({options:Pe}),youtube:Fe({playerVars:Pe,embedOptions:Pe,onUnstarted:he}),facebook:Fe({appId:Ie,version:Ie,playerId:Ie,attributes:Pe}),dailymotion:Fe({params:Pe}),vimeo:Fe({playerOptions:Pe,title:Ie}),file:Fe({attributes:Pe,tracks:er,forceVideo:Te,forceAudio:Te,forceHLS:Te,forceSafariHLS:Te,forceDisableHls:Te,forceDASH:Te,forceFLV:Te,hlsOptions:Pe,hlsVersion:Ie,dashVersion:Ie,flvVersion:Ie}),wistia:Fe({options:Pe,playerId:Ie,customControls:er}),mixcloud:Fe({options:Pe}),twitch:Fe({options:Pe,playerId:Ie}),vidyard:Fe({options:Pe})}),onReady:he,onStart:he,onPlay:he,onPause:he,onBuffer:he,onBufferEnd:he,onEnded:he,onError:he,onDuration:he,onSeek:he,onPlaybackRateChange:he,onPlaybackQualityChange:he,onProgress:he,onClickPreview:he,onEnablePIP:he,onDisablePIP:he};nt.propTypes=Ws;var ye=function(){},Ys={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:ye},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:ye,onStart:ye,onPlay:ye,onPause:ye,onBuffer:ye,onBufferEnd:ye,onEnded:ye,onError:ye,onDuration:ye,onSeek:ye,onPlaybackRateChange:ye,onPlaybackQualityChange:ye,onProgress:ye,onClickPreview:ye,onEnablePIP:ye,onDisablePIP:ye};nt.defaultProps=Ys;var we={},Bs=function(t,n,a){var s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");typeof n=="function"&&(a=n,n={}),n=n||{},a=a||function(){},i.type=n.type||"text/javascript",i.charset=n.charset||"utf8",i.async="async"in n?!!n.async:!0,i.src=t,n.attrs&&$s(i,n.attrs),n.text&&(i.text=""+n.text);var c="onload"in i?Rr:Gs;c(i,a),i.onload||Rr(i,a),s.appendChild(i)};function $s(r,t){for(var n in t)r.setAttribute(n,t[n])}function Rr(r,t){r.onload=function(){this.onerror=this.onload=null,t(null,r)},r.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),r)}}function Gs(r,t){r.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,t(null,r))}}Object.defineProperty(we,"__esModule",{value:!0});we.parseStartTime=ii;we.parseEndTime=oi;we.randomString=li;we.queryString=ci;we.getSDK=ui;we.getConfig=di;we.omit=hi;we.callPlayer=fi;we.isMediaStream=mi;we.isBlobUrl=pi;we.supportsWebKitPresentationMode=gi;var Ks=In(Bs),Xs=In(Cn);function In(r){return r&&r.__esModule?r:{default:r}}function Js(r,t){return ti(r)||ei(r,t)||Zs(r,t)||Qs()}function Qs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zs(r,t){if(r){if(typeof r=="string")return Lr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lr(r,t)}}function Lr(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=r[n];return a}function ei(r,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(r)))){var n=[],a=!0,s=!1,i=void 0;try{for(var c=r[Symbol.iterator](),p;!(a=(p=c.next()).done)&&(n.push(p.value),!(t&&n.length===t));a=!0);}catch(d){s=!0,i=d}finally{try{!a&&c.return!=null&&c.return()}finally{if(s)throw i}}return n}}function ti(r){if(Array.isArray(r))return r}var ri=/[?&#](?:start|t)=([0-9hms]+)/,ni=/[?&#]end=([0-9hms]+)/,or=/(\d+)(h|m|s)/g,ai=/^\d+$/;function Tn(r,t){if(!(r instanceof Array)){var n=r.match(t);if(n){var a=n[1];if(a.match(or))return si(a);if(ai.test(a))return parseInt(a)}}}function si(r){for(var t=0,n=or.exec(r);n!==null;){var a=n,s=Js(a,3),i=s[1],c=s[2];c==="h"&&(t+=parseInt(i,10)*60*60),c==="m"&&(t+=parseInt(i,10)*60),c==="s"&&(t+=parseInt(i,10)),n=or.exec(r)}return t}function ii(r){return Tn(r,ri)}function oi(r){return Tn(r,ni)}function li(){return Math.random().toString(36).substr(2,5)}function ci(r){return Object.keys(r).map(function(t){return"".concat(t,"=").concat(r[t])}).join("&")}function tr(r){return window[r]?window[r]:window.exports&&window.exports[r]?window.exports[r]:window.module&&window.module.exports&&window.module.exports[r]?window.module.exports[r]:null}var ct={};function ui(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){return!0},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:Ks.default,i=tr(t);return i&&a(i)?Promise.resolve(i):new Promise(function(c,p){if(ct[r]){ct[r].push({resolve:c,reject:p});return}ct[r]=[{resolve:c,reject:p}];var d=function(_){ct[r].forEach(function(D){return D.resolve(_)})};if(n){var b=window[n];window[n]=function(){b&&b(),d(tr(t))}}s(r,function(I){I?(ct[r].forEach(function(_){return _.reject(I)}),ct[r]=null):n||d(tr(t))})})}function di(r,t){return(0,Xs.default)(t.config,r.config)}function hi(r){for(var t,n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];for(var i=(t=[]).concat.apply(t,a),c={},p=Object.keys(r),d=0,b=p;d<b.length;d++){var I=b[d];i.indexOf(I)===-1&&(c[I]=r[I])}return c}function fi(r){var t;if(!this.player||!this.player[r]){var n="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(r,"%c – ");return this.player?this.player[r]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];return(t=this.player)[r].apply(t,s)}function mi(r){return typeof window<"u"&&typeof window.MediaStream<"u"&&r instanceof window.MediaStream}function pi(r){return/^blob:/.test(r)}function gi(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.createElement("video"),t=/iPhone|iPod/.test(navigator.userAgent)===!1;return r.webkitSupportsPresentationMode&&typeof r.webkitSetPresentationMode=="function"&&t}var Pn={};(function(r){function t(l){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(f){return typeof f}:t=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},t(l)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=d(o),a=c(wn),s=nt,i=we;function c(l){return l&&l.__esModule?l:{default:l}}function p(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return p=function(){return l},l}function d(l){if(l&&l.__esModule)return l;if(l===null||t(l)!=="object"&&typeof l!="function")return{default:l};var m=p();if(m&&m.has(l))return m.get(l);var f={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in l)if(Object.prototype.hasOwnProperty.call(l,O)){var $=u?Object.getOwnPropertyDescriptor(l,O):null;$&&($.get||$.set)?Object.defineProperty(f,O,$):f[O]=l[O]}return f.default=l,m&&m.set(l,f),f}function b(){return b=Object.assign||function(l){for(var m=1;m<arguments.length;m++){var f=arguments[m];for(var u in f)Object.prototype.hasOwnProperty.call(f,u)&&(l[u]=f[u])}return l},b.apply(this,arguments)}function I(l,m){if(!(l instanceof m))throw new TypeError("Cannot call a class as a function")}function _(l,m){for(var f=0;f<m.length;f++){var u=m[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,u.key,u)}}function D(l,m,f){return m&&_(l.prototype,m),f&&_(l,f),l}function R(l,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(m&&m.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),m&&x(l,m)}function x(l,m){return x=Object.setPrototypeOf||function(u,O){return u.__proto__=O,u},x(l,m)}function w(l){var m=H();return function(){var u=W(l),O;if(m){var $=W(this).constructor;O=Reflect.construct(u,arguments,$)}else O=u.apply(this,arguments);return L(this,O)}}function L(l,m){return m&&(t(m)==="object"||typeof m=="function")?m:P(l)}function P(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function W(l){return W=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},W(l)}function V(l,m,f){return m in l?Object.defineProperty(l,m,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[m]=f,l}var k=5e3,y=function(l){R(f,l);var m=w(f);function f(){var u;I(this,f);for(var O=arguments.length,$=new Array(O),G=0;G<O;G++)$[G]=arguments[G];return u=m.call.apply(m,[this].concat($)),V(P(u),"mounted",!1),V(P(u),"isReady",!1),V(P(u),"isPlaying",!1),V(P(u),"isLoading",!0),V(P(u),"loadOnReady",null),V(P(u),"startOnPlay",!0),V(P(u),"seekOnPlay",null),V(P(u),"onDurationCalled",!1),V(P(u),"handlePlayerMount",function(M){if(u.player){u.progress();return}u.player=M,u.player.load(u.props.url),u.progress()}),V(P(u),"getInternalPlayer",function(M){return u.player?u.player[M]:null}),V(P(u),"progress",function(){if(u.props.url&&u.player&&u.isReady){var M=u.getCurrentTime()||0,q=u.getSecondsLoaded(),N=u.getDuration();if(N){var U={playedSeconds:M,played:M/N};q!==null&&(U.loadedSeconds=q,U.loaded=q/N),(U.playedSeconds!==u.prevPlayed||U.loadedSeconds!==u.prevLoaded)&&u.props.onProgress(U),u.prevPlayed=U.playedSeconds,u.prevLoaded=U.loadedSeconds}}u.progressTimeout=setTimeout(u.progress,u.props.progressFrequency||u.props.progressInterval)}),V(P(u),"handleReady",function(){if(u.mounted){u.isReady=!0,u.isLoading=!1;var M=u.props,q=M.onReady,N=M.playing,U=M.volume,j=M.muted;q(),!j&&U!==null&&u.player.setVolume(U),u.loadOnReady?(u.player.load(u.loadOnReady,!0),u.loadOnReady=null):N&&u.player.play(),u.handleDurationCheck()}}),V(P(u),"handlePlay",function(){u.isPlaying=!0,u.isLoading=!1;var M=u.props,q=M.onStart,N=M.onPlay,U=M.playbackRate;u.startOnPlay&&(u.player.setPlaybackRate&&U!==1&&u.player.setPlaybackRate(U),q(),u.startOnPlay=!1),N(),u.seekOnPlay&&(u.seekTo(u.seekOnPlay),u.seekOnPlay=null),u.handleDurationCheck()}),V(P(u),"handlePause",function(M){u.isPlaying=!1,u.isLoading||u.props.onPause(M)}),V(P(u),"handleEnded",function(){var M=u.props,q=M.activePlayer,N=M.loop,U=M.onEnded;q.loopOnEnded&&N&&u.seekTo(0),N||(u.isPlaying=!1,U())}),V(P(u),"handleError",function(){var M;u.isLoading=!1,(M=u.props).onError.apply(M,arguments)}),V(P(u),"handleDurationCheck",function(){clearTimeout(u.durationCheckTimeout);var M=u.getDuration();M?u.onDurationCalled||(u.props.onDuration(M),u.onDurationCalled=!0):u.durationCheckTimeout=setTimeout(u.handleDurationCheck,100)}),V(P(u),"handleLoaded",function(){u.isLoading=!1}),u}return D(f,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}},{key:"componentDidUpdate",value:function(O){var $=this;if(this.player){var G=this.props,M=G.url,q=G.playing,N=G.volume,U=G.muted,j=G.playbackRate,S=G.pip,A=G.loop,C=G.activePlayer,h=G.disableDeferredLoading;if(!(0,a.default)(O.url,M)){if(this.isLoading&&!C.forceLoad&&!h&&!(0,i.isMediaStream)(M)){console.warn("ReactPlayer: the attempt to load ".concat(M," is being deferred until the player has loaded")),this.loadOnReady=M;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(M,this.isReady)}!O.playing&&q&&!this.isPlaying&&this.player.play(),O.playing&&!q&&this.isPlaying&&this.player.pause(),!O.pip&&S&&this.player.enablePIP&&this.player.enablePIP(),O.pip&&!S&&this.player.disablePIP&&this.player.disablePIP(),O.volume!==N&&N!==null&&this.player.setVolume(N),O.muted!==U&&(U?this.player.mute():(this.player.unmute(),N!==null&&setTimeout(function(){return $.player.setVolume(N)}))),O.playbackRate!==j&&this.player.setPlaybackRate&&this.player.setPlaybackRate(j),O.loop!==A&&this.player.setLoop&&this.player.setLoop(A)}}},{key:"getDuration",value:function(){return this.isReady?this.player.getDuration():null}},{key:"getCurrentTime",value:function(){return this.isReady?this.player.getCurrentTime():null}},{key:"getSecondsLoaded",value:function(){return this.isReady?this.player.getSecondsLoaded():null}},{key:"seekTo",value:function(O,$,G){var M=this;if(!this.isReady){O!==0&&(this.seekOnPlay=O,setTimeout(function(){M.seekOnPlay=null},k));return}var q=$?$==="fraction":O>0&&O<1;if(q){var N=this.player.getDuration();if(!N){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(N*O,G);return}this.player.seekTo(O,G)}},{key:"render",value:function(){var O=this.props.activePlayer;return O?n.default.createElement(O,b({},this.props,{onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError})):null}}]),f}(n.Component);r.default=y,V(y,"displayName","Player"),V(y,"propTypes",s.propTypes),V(y,"defaultProps",s.defaultProps)})(Pn);var rr={},Nr;function yi(){return Nr||(Nr=1,function(r){function t(k){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(l){return typeof l}:t=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},t(k)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(o);function a(){if(typeof WeakMap!="function")return null;var k=new WeakMap;return a=function(){return k},k}function s(k){if(k&&k.__esModule)return k;if(k===null||t(k)!=="object"&&typeof k!="function")return{default:k};var y=a();if(y&&y.has(k))return y.get(k);var l={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in k)if(Object.prototype.hasOwnProperty.call(k,f)){var u=m?Object.getOwnPropertyDescriptor(k,f):null;u&&(u.get||u.set)?Object.defineProperty(l,f,u):l[f]=k[f]}return l.default=k,y&&y.set(k,l),l}function i(k,y){var l=Object.keys(k);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(k);y&&(m=m.filter(function(f){return Object.getOwnPropertyDescriptor(k,f).enumerable})),l.push.apply(l,m)}return l}function c(k){for(var y=1;y<arguments.length;y++){var l=arguments[y]!=null?arguments[y]:{};y%2?i(Object(l),!0).forEach(function(m){P(k,m,l[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(l)):i(Object(l)).forEach(function(m){Object.defineProperty(k,m,Object.getOwnPropertyDescriptor(l,m))})}return k}function p(k,y){if(!(k instanceof y))throw new TypeError("Cannot call a class as a function")}function d(k,y){for(var l=0;l<y.length;l++){var m=y[l];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(k,m.key,m)}}function b(k,y,l){return y&&d(k.prototype,y),l&&d(k,l),k}function I(k,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(y&&y.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),y&&_(k,y)}function _(k,y){return _=Object.setPrototypeOf||function(m,f){return m.__proto__=f,m},_(k,y)}function D(k){var y=w();return function(){var m=L(k),f;if(y){var u=L(this).constructor;f=Reflect.construct(m,arguments,u)}else f=m.apply(this,arguments);return R(this,f)}}function R(k,y){return y&&(t(y)==="object"||typeof y=="function")?y:x(k)}function x(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function L(k){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},L(k)}function P(k,y,l){return y in k?Object.defineProperty(k,y,{value:l,enumerable:!0,configurable:!0,writable:!0}):k[y]=l,k}var H="64px",W={},V=function(k){I(l,k);var y=D(l);function l(){var m;p(this,l);for(var f=arguments.length,u=new Array(f),O=0;O<f;O++)u[O]=arguments[O];return m=y.call.apply(y,[this].concat(u)),P(x(m),"mounted",!1),P(x(m),"state",{image:null}),P(x(m),"handleKeyPress",function($){($.key==="Enter"||$.key===" ")&&m.props.onClick()}),m}return b(l,[{key:"componentDidMount",value:function(){this.mounted=!0,this.fetchImage(this.props)}},{key:"componentDidUpdate",value:function(f){var u=this.props,O=u.url,$=u.light;(f.url!==O||f.light!==$)&&this.fetchImage(this.props)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchImage",value:function(f){var u=this,O=f.url,$=f.light,G=f.oEmbedUrl;if(!n.default.isValidElement($)){if(typeof $=="string"){this.setState({image:$});return}if(W[O]){this.setState({image:W[O]});return}return this.setState({image:null}),window.fetch(G.replace("{url}",O)).then(function(M){return M.json()}).then(function(M){if(M.thumbnail_url&&u.mounted){var q=M.thumbnail_url.replace("height=100","height=480").replace("-d_295x166","-d_640");u.setState({image:q}),W[O]=q}})}}},{key:"render",value:function(){var f=this.props,u=f.light,O=f.onClick,$=f.playIcon,G=f.previewTabIndex,M=this.state.image,q=n.default.isValidElement(u),N={display:"flex",alignItems:"center",justifyContent:"center"},U={preview:c({width:"100%",height:"100%",backgroundImage:M&&!q?"url(".concat(M,")"):void 0,backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer"},N),shadow:c({background:"radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)",borderRadius:H,width:H,height:H,position:q?"absolute":void 0},N),playIcon:{borderStyle:"solid",borderWidth:"16px 0 16px 26px",borderColor:"transparent transparent transparent white",marginLeft:"7px"}},j=n.default.createElement("div",{style:U.shadow,className:"react-player__shadow"},n.default.createElement("div",{style:U.playIcon,className:"react-player__play-icon"}));return n.default.createElement("div",{style:U.preview,className:"react-player__preview",onClick:O,tabIndex:G,onKeyPress:this.handleKeyPress},q?u:null,$||j)}}]),l}(n.Component);r.default=V}(rr)),rr}Object.defineProperty(Kt,"__esModule",{value:!0});Kt.createReactPlayer=void 0;var tt=Dn(o),xi=Xt(Cn),nr=Xt(Ns),qr=Xt(wn),Ct=nt,vi=we,ji=Xt(Pn);function Xt(r){return r&&r.__esModule?r:{default:r}}function wt(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wt=function(n){return typeof n}:wt=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},wt(r)}function Vr(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,a)}return n}function Ur(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vr(Object(n),!0).forEach(function(a){le(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}function Lt(){return Lt=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},Lt.apply(this,arguments)}function ar(r){return wi(r)||Ci(r)||Si(r)||bi()}function bi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Si(r,t){if(r){if(typeof r=="string")return lr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lr(r,t)}}function Ci(r){if(typeof Symbol<"u"&&Symbol.iterator in Object(r))return Array.from(r)}function wi(r){if(Array.isArray(r))return lr(r)}function lr(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=r[n];return a}function Ii(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function zr(r,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function Ti(r,t,n){return t&&zr(r.prototype,t),n&&zr(r,n),r}function Pi(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&cr(r,t)}function cr(r,t){return cr=Object.setPrototypeOf||function(a,s){return a.__proto__=s,a},cr(r,t)}function ki(r){var t=Oi();return function(){var a=Nt(r),s;if(t){var i=Nt(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return Di(this,s)}}function Di(r,t){return t&&(wt(t)==="object"||typeof t=="function")?t:je(r)}function je(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Oi(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Nt(r){return Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Nt(r)}function le(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function kn(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return kn=function(){return r},r}function Dn(r){if(r&&r.__esModule)return r;if(r===null||wt(r)!=="object"&&typeof r!="function")return{default:r};var t=kn();if(t&&t.has(r))return t.get(r);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s)){var i=a?Object.getOwnPropertyDescriptor(r,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=r[s]}return n.default=r,t&&t.set(r,n),n}var Mi=(0,tt.lazy)(function(){return Promise.resolve().then(function(){return Dn(yi())})}),_i=typeof window<"u"&&window.document,Ai=typeof Zt<"u"&&Zt.window&&Zt.window.document,Ei=Object.keys(Ct.propTypes),Fi=_i||Ai?tt.Suspense:function(){return null},jt=[],Ri=function(t,n){var a,s;return s=a=function(i){Pi(p,i);var c=ki(p);function p(){var d;Ii(this,p);for(var b=arguments.length,I=new Array(b),_=0;_<b;_++)I[_]=arguments[_];return d=c.call.apply(c,[this].concat(I)),le(je(d),"state",{showPreview:!!d.props.light}),le(je(d),"references",{wrapper:function(R){d.wrapper=R},player:function(R){d.player=R}}),le(je(d),"handleClickPreview",function(D){d.setState({showPreview:!1}),d.props.onClickPreview(D)}),le(je(d),"showPreview",function(){d.setState({showPreview:!0})}),le(je(d),"getDuration",function(){return d.player?d.player.getDuration():null}),le(je(d),"getCurrentTime",function(){return d.player?d.player.getCurrentTime():null}),le(je(d),"getSecondsLoaded",function(){return d.player?d.player.getSecondsLoaded():null}),le(je(d),"getInternalPlayer",function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"player";return d.player?d.player.getInternalPlayer(D):null}),le(je(d),"seekTo",function(D,R,x){if(!d.player)return null;d.player.seekTo(D,R,x)}),le(je(d),"handleReady",function(){d.props.onReady(je(d))}),le(je(d),"getActivePlayer",(0,nr.default)(function(D){for(var R=0,x=[].concat(jt,ar(t));R<x.length;R++){var w=x[R];if(w.canPlay(D))return w}return n||null})),le(je(d),"getConfig",(0,nr.default)(function(D,R){var x=d.props.config;return xi.default.all([Ct.defaultProps.config,Ct.defaultProps.config[R]||{},x,x[R]||{}])})),le(je(d),"getAttributes",(0,nr.default)(function(D){return(0,vi.omit)(d.props,Ei)})),le(je(d),"renderActivePlayer",function(D){if(!D)return null;var R=d.getActivePlayer(D);if(!R)return null;var x=d.getConfig(D,R.key);return tt.default.createElement(ji.default,Lt({},d.props,{key:R.key,ref:d.references.player,config:x,activePlayer:R.lazyPlayer||R,onReady:d.handleReady}))}),d}return Ti(p,[{key:"shouldComponentUpdate",value:function(b,I){return!(0,qr.default)(this.props,b)||!(0,qr.default)(this.state,I)}},{key:"componentDidUpdate",value:function(b){var I=this.props.light;!b.light&&I&&this.setState({showPreview:!0}),b.light&&!I&&this.setState({showPreview:!1})}},{key:"renderPreview",value:function(b){if(!b)return null;var I=this.props,_=I.light,D=I.playIcon,R=I.previewTabIndex,x=I.oEmbedUrl;return tt.default.createElement(Mi,{url:b,light:_,playIcon:D,previewTabIndex:R,oEmbedUrl:x,onClick:this.handleClickPreview})}},{key:"render",value:function(){var b=this.props,I=b.url,_=b.style,D=b.width,R=b.height,x=b.fallback,w=b.wrapper,L=this.state.showPreview,P=this.getAttributes(I),H=typeof w=="string"?this.references.wrapper:void 0;return tt.default.createElement(w,Lt({ref:H,style:Ur(Ur({},_),{},{width:D,height:R})},P),tt.default.createElement(Fi,{fallback:x},L?this.renderPreview(I):this.renderActivePlayer(I)))}}]),p}(tt.Component),le(a,"displayName","ReactPlayer"),le(a,"propTypes",Ct.propTypes),le(a,"defaultProps",Ct.defaultProps),le(a,"addCustomPlayer",function(i){jt.push(i)}),le(a,"removeCustomPlayers",function(){jt.length=0}),le(a,"canPlay",function(i){for(var c=0,p=[].concat(jt,ar(t));c<p.length;c++){var d=p[c];if(d.canPlay(i))return!0}return!1}),le(a,"canEnablePIP",function(i){for(var c=0,p=[].concat(jt,ar(t));c<p.length;c++){var d=p[c];if(d.canEnablePIP&&d.canEnablePIP(i))return!0}return!1}),s};Kt.createReactPlayer=Ri;var On={},Q={};Object.defineProperty(Q,"__esModule",{value:!0});Q.canPlay=Q.FLV_EXTENSIONS=Q.DASH_EXTENSIONS=Q.HLS_EXTENSIONS=Q.VIDEO_EXTENSIONS=Q.AUDIO_EXTENSIONS=Q.MATCH_URL_KALTURA=Q.MATCH_URL_VIDYARD=Q.MATCH_URL_MIXCLOUD=Q.MATCH_URL_DAILYMOTION=Q.MATCH_URL_TWITCH_CHANNEL=Q.MATCH_URL_TWITCH_VIDEO=Q.MATCH_URL_WISTIA=Q.MATCH_URL_STREAMABLE=Q.MATCH_URL_FACEBOOK_WATCH=Q.MATCH_URL_FACEBOOK=Q.MATCH_URL_VIMEO=Q.MATCH_URL_SOUNDCLOUD=Q.MATCH_URL_YOUTUBE=void 0;var Hr=we;function Li(r,t){var n;if(typeof Symbol>"u"||r[Symbol.iterator]==null){if(Array.isArray(r)||(n=Ni(r))||t&&r&&typeof r.length=="number"){n&&(r=n);var a=0,s=function(){};return{s,n:function(){return a>=r.length?{done:!0}:{done:!1,value:r[a++]}},e:function(b){throw b},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,c=!1,p;return{s:function(){n=r[Symbol.iterator]()},n:function(){var b=n.next();return i=b.done,b},e:function(b){c=!0,p=b},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(c)throw p}}}}function Ni(r,t){if(r){if(typeof r=="string")return Wr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wr(r,t)}}function Wr(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=r[n];return a}var ur=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//;Q.MATCH_URL_YOUTUBE=ur;var Mn=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/;Q.MATCH_URL_SOUNDCLOUD=Mn;var _n=/vimeo\.com\/(?!progressive_redirect).+/;Q.MATCH_URL_VIMEO=_n;var An=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/;Q.MATCH_URL_FACEBOOK=An;var En=/^https?:\/\/fb\.watch\/.+$/;Q.MATCH_URL_FACEBOOK_WATCH=En;var Fn=/streamable\.com\/([a-z0-9]+)$/;Q.MATCH_URL_STREAMABLE=Fn;var Rn=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/;Q.MATCH_URL_WISTIA=Rn;var Ln=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/;Q.MATCH_URL_TWITCH_VIDEO=Ln;var Nn=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/;Q.MATCH_URL_TWITCH_CHANNEL=Nn;var qn=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/;Q.MATCH_URL_DAILYMOTION=qn;var Vn=/mixcloud\.com\/([^/]+\/[^/]+)/;Q.MATCH_URL_MIXCLOUD=Vn;var Un=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/;Q.MATCH_URL_VIDYARD=Un;var zn=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/;Q.MATCH_URL_KALTURA=zn;var br=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i;Q.AUDIO_EXTENSIONS=br;var Sr=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i;Q.VIDEO_EXTENSIONS=Sr;var Cr=/\.(m3u8)($|\?)/i;Q.HLS_EXTENSIONS=Cr;var Hn=/\.(mpd)($|\?)/i;Q.DASH_EXTENSIONS=Hn;var Wn=/\.(flv)($|\?)/i;Q.FLV_EXTENSIONS=Wn;var qi=function r(t){if(t instanceof Array){var n=Li(t),a;try{for(n.s();!(a=n.n()).done;){var s=a.value;if(typeof s=="string"&&r(s)||r(s.src))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}return(0,Hr.isMediaStream)(t)||(0,Hr.isBlobUrl)(t)?!0:br.test(t)||Sr.test(t)||Cr.test(t)||Hn.test(t)||Wn.test(t)},Vi={youtube:function(t){return t instanceof Array?t.every(function(n){return ur.test(n)}):ur.test(t)},soundcloud:function(t){return Mn.test(t)&&!br.test(t)},vimeo:function(t){return _n.test(t)&&!Sr.test(t)&&!Cr.test(t)},facebook:function(t){return An.test(t)||En.test(t)},streamable:function(t){return Fn.test(t)},wistia:function(t){return Rn.test(t)},twitch:function(t){return Ln.test(t)||Nn.test(t)},dailymotion:function(t){return qn.test(t)},mixcloud:function(t){return Vn.test(t)},vidyard:function(t){return Un.test(t)},kaltura:function(t){return zn.test(t)},file:qi};Q.canPlay=Vi;(function(r){function t(j){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(A){return typeof A}:t=function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},t(j)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=c(o),a=we,s=Q;function i(){if(typeof WeakMap!="function")return null;var j=new WeakMap;return i=function(){return j},j}function c(j){if(j&&j.__esModule)return j;if(j===null||t(j)!=="object"&&typeof j!="function")return{default:j};var S=i();if(S&&S.has(j))return S.get(j);var A={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in j)if(Object.prototype.hasOwnProperty.call(j,h)){var v=C?Object.getOwnPropertyDescriptor(j,h):null;v&&(v.get||v.set)?Object.defineProperty(A,h,v):A[h]=j[h]}return A.default=j,S&&S.set(j,A),A}function p(j,S){var A=Object.keys(j);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(j);S&&(C=C.filter(function(h){return Object.getOwnPropertyDescriptor(j,h).enumerable})),A.push.apply(A,C)}return A}function d(j){for(var S=1;S<arguments.length;S++){var A=arguments[S]!=null?arguments[S]:{};S%2?p(Object(A),!0).forEach(function(C){f(j,C,A[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(A)):p(Object(A)).forEach(function(C){Object.defineProperty(j,C,Object.getOwnPropertyDescriptor(A,C))})}return j}function b(j,S){return x(j)||R(j,S)||_(j,S)||I()}function I(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _(j,S){if(j){if(typeof j=="string")return D(j,S);var A=Object.prototype.toString.call(j).slice(8,-1);if(A==="Object"&&j.constructor&&(A=j.constructor.name),A==="Map"||A==="Set")return Array.from(j);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return D(j,S)}}function D(j,S){(S==null||S>j.length)&&(S=j.length);for(var A=0,C=new Array(S);A<S;A++)C[A]=j[A];return C}function R(j,S){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(j)))){var A=[],C=!0,h=!1,v=void 0;try{for(var E=j[Symbol.iterator](),z;!(C=(z=E.next()).done)&&(A.push(z.value),!(S&&A.length===S));C=!0);}catch(te){h=!0,v=te}finally{try{!C&&E.return!=null&&E.return()}finally{if(h)throw v}}return A}}function x(j){if(Array.isArray(j))return j}function w(j,S){if(!(j instanceof S))throw new TypeError("Cannot call a class as a function")}function L(j,S){for(var A=0;A<S.length;A++){var C=S[A];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(j,C.key,C)}}function P(j,S,A){return S&&L(j.prototype,S),A&&L(j,A),j}function H(j,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(S&&S.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),S&&W(j,S)}function W(j,S){return W=Object.setPrototypeOf||function(C,h){return C.__proto__=h,C},W(j,S)}function V(j){var S=l();return function(){var C=m(j),h;if(S){var v=m(this).constructor;h=Reflect.construct(C,arguments,v)}else h=C.apply(this,arguments);return k(this,h)}}function k(j,S){return S&&(t(S)==="object"||typeof S=="function")?S:y(j)}function y(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function l(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function m(j){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},m(j)}function f(j,S,A){return S in j?Object.defineProperty(j,S,{value:A,enumerable:!0,configurable:!0,writable:!0}):j[S]=A,j}var u="https://www.youtube.com/iframe_api",O="YT",$="onYouTubeIframeAPIReady",G=/[?&](?:list|channel)=([a-zA-Z0-9_-]+)/,M=/user\/([a-zA-Z0-9_-]+)\/?/,q=/youtube-nocookie\.com/,N="https://www.youtube-nocookie.com",U=function(j){H(A,j);var S=V(A);function A(){var C;w(this,A);for(var h=arguments.length,v=new Array(h),E=0;E<h;E++)v[E]=arguments[E];return C=S.call.apply(S,[this].concat(v)),f(y(C),"callPlayer",a.callPlayer),f(y(C),"parsePlaylist",function(z){if(z instanceof Array)return{listType:"playlist",playlist:z.map(C.getID).join(",")};if(G.test(z)){var te=z.match(G),de=b(te,2),We=de[1];return{listType:"playlist",list:We.replace(/^UC/,"UU")}}if(M.test(z)){var _e=z.match(M),ve=b(_e,2),F=ve[1];return{listType:"user_uploads",list:F}}return{}}),f(y(C),"onStateChange",function(z){var te=z.data,de=C.props,We=de.onPlay,_e=de.onPause,ve=de.onBuffer,F=de.onBufferEnd,J=de.onEnded,se=de.onReady,Ne=de.loop,Qe=de.config,ot=Qe.playerVars,xt=Qe.onUnstarted,Ee=window[O].PlayerState,Jn=Ee.UNSTARTED,Qn=Ee.PLAYING,Zn=Ee.PAUSED,ea=Ee.BUFFERING,ta=Ee.ENDED,ra=Ee.CUED;if(te===Jn&&xt(),te===Qn&&(We(),F()),te===Zn&&_e(),te===ea&&ve(),te===ta){var na=!!C.callPlayer("getPlaylist");Ne&&!na&&(ot.start?C.seekTo(ot.start):C.play()),J()}te===ra&&se()}),f(y(C),"mute",function(){C.callPlayer("mute")}),f(y(C),"unmute",function(){C.callPlayer("unMute")}),f(y(C),"ref",function(z){C.container=z}),C}return P(A,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"getID",value:function(h){return!h||h instanceof Array||G.test(h)?null:h.match(s.MATCH_URL_YOUTUBE)[1]}},{key:"load",value:function(h,v){var E=this,z=this.props,te=z.playing,de=z.muted,We=z.playsinline,_e=z.controls,ve=z.loop,F=z.config,J=z.onError,se=F.playerVars,Ne=F.embedOptions,Qe=this.getID(h);if(v){if(G.test(h)||M.test(h)||h instanceof Array){this.player.loadPlaylist(this.parsePlaylist(h));return}this.player.cueVideoById({videoId:Qe,startSeconds:(0,a.parseStartTime)(h)||se.start,endSeconds:(0,a.parseEndTime)(h)||se.end});return}(0,a.getSDK)(u,O,$,function(ot){return ot.loaded}).then(function(ot){E.container&&(E.player=new ot.Player(E.container,d({width:"100%",height:"100%",videoId:Qe,playerVars:d(d({autoplay:te?1:0,mute:de?1:0,controls:_e?1:0,start:(0,a.parseStartTime)(h),end:(0,a.parseEndTime)(h),origin:window.location.origin,playsinline:We?1:0},E.parsePlaylist(h)),se),events:{onReady:function(){ve&&E.player.setLoop(!0),E.props.onReady()},onPlaybackRateChange:function(Ee){return E.props.onPlaybackRateChange(Ee.data)},onPlaybackQualityChange:function(Ee){return E.props.onPlaybackQualityChange(Ee)},onStateChange:E.onStateChange,onError:function(Ee){return J(Ee.data)}},host:q.test(h)?N:void 0},Ne)))},J),Ne.events&&console.warn("Using `embedOptions.events` will likely break things. Use ReactPlayer’s callback props instead, eg onReady, onPlay, onPause")}},{key:"play",value:function(){this.callPlayer("playVideo")}},{key:"pause",value:function(){this.callPlayer("pauseVideo")}},{key:"stop",value:function(){document.body.contains(this.callPlayer("getIframe"))&&this.callPlayer("stopVideo")}},{key:"seekTo",value:function(h){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.callPlayer("seekTo",h),!v&&!this.props.playing&&this.pause()}},{key:"setVolume",value:function(h){this.callPlayer("setVolume",h*100)}},{key:"setPlaybackRate",value:function(h){this.callPlayer("setPlaybackRate",h)}},{key:"setLoop",value:function(h){this.callPlayer("setLoop",h)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return this.callPlayer("getVideoLoadedFraction")*this.getDuration()}},{key:"render",value:function(){var h=this.props.display,v={width:"100%",height:"100%",display:h};return n.default.createElement("div",{style:v},n.default.createElement("div",{ref:this.ref}))}}]),A}(n.Component);r.default=U,f(U,"displayName","YouTube"),f(U,"canPlay",s.canPlay.youtube)})(On);var Ui=Kt.createReactPlayer,Yr=On.default,zi=Ui([{key:"youtube",canPlay:Yr.canPlay,lazyPlayer:Yr}]);const Hi=ka(zi),Br=[],Wi=r=>{const[t,n]=o.useState([]),[a,s]=o.useState(),[i,c]=o.useState(!0),[p,d]=o.useState(1),[b,I]=o.useState(0),[_,D]=o.useState(0),[R,x]=o.useState(!0),[w]=T.useForm();Ce();const[L,P]=o.useState(!1),[H,W]=o.useState(!1),[V,k]=o.useState(0),[y,l]=o.useState(!1),m=o.useRef([]),f=async j=>{s(j),l(!0)},u=()=>{W(!0)},O=()=>{P(!0)},$=async(j,S="",A=!1)=>{const{data:C}=await B.custom({url:"",method:"get",meta:{operation:"darasaVideos",variables:{page:{value:j,type:"Int",required:!0},key:{value:S,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:pr}]}}).catch(()=>(g.error("Error loading videos"),{data:null})).then(h=>h);C&&(D(C.total),I(C.pages),d(C.page),x(C.hasNext),n(C.results.map(h=>({...h,isPlaying:!1})))),c(!1)},G=async j=>{n([j,...t]),W(!1)},M=(j,S)=>{Br[S]=j},q=(j,S)=>{V.toString()!==j.toString()&&k(j),n(t.map((A,C)=>A.id.toString()===j.toString()?{...A,isPlaying:S}:{...A,isPlaying:!1}))},N=async j=>{const{data:S}=await B.custom({url:"",method:"post",meta:{operation:"deleteClassVideo",variables:{id:{value:j,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error deleting video"),{data:null})).then(A=>A);S&&(S.success?(g.success(S.message),n(t.filter(A=>A.id!==j))):g.error(S.message))},U=j=>{pe.confirm({title:"Removing Video",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Remove",cancelText:"Cancel",onOk:()=>N(j)})};return o.useEffect(()=>{$(p)},[]),i?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:i,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:20,children:e.jsx(T,{layout:"vertical",form:w,onFinish:j=>{d(0),$(0,j.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Video(s)...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(be,{trigger:["click"],overlay:e.jsxs(Y,{children:[e.jsx(Y.Item,{disabled:!r.canManage,children:e.jsxs("a",{target:"_blank",rel:"noopener noreferrer",onClick:O,children:[e.jsx(ln,{}),e.jsx("span",{style:{marginLeft:10},children:"Upload Video"})]})}),e.jsx(Y.Item,{children:e.jsxs("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>u(),children:[e.jsx(ht,{}),e.jsx("span",{style:{marginLeft:10},children:"Youtube-Video"})]})})]}),placement:"bottomRight",overlayStyle:{zIndex:9999},children:e.jsx(K,{size:"large",icon:e.jsx(Yt,{}),children:"Add Video"})})})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[t.length>0?e.jsx(Z,{align:"top",children:t.map((j,S)=>e.jsx(X,{span:12,children:e.jsxs(ke,{hoverable:j.isActive,style:{marginRight:10},title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:j.title}),e.jsx(Da,{title:ue(j.created).format("LLLL"),placement:"top",children:e.jsxs(an.Tag,{color:"red",style:{float:"right"},children:["Published: ",ue(j.created).fromNow()]})}),e.jsx(De,{style:{right:0,position:"absolute",zIndex:"inherit"},children:e.jsx(be,{trigger:["click"],overlay:e.jsxs(Y,{children:[e.jsx(Y.Item,{icon:e.jsx(Ye,{}),disabled:!j.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>f(j),children:"View Info's"})}),e.jsx(Y.Item,{icon:e.jsx(Ae,{}),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(Y.Item,{icon:e.jsx(mt,{}),onClick:()=>U(j.id),disabled:!r.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:A=>A.preventDefault(),children:e.jsx(Oe,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})]}),children:[j.isYoutube&&e.jsx(Hi,{url:j.url,width:"100%"}),!j.isYoutube&&e.jsx("span",{onClick:()=>{q(j.id,!0),Br[S].pause()},children:e.jsx(js,{ref:m.current[S],index:S,file:j.video,videoId:j.id,updatePlaying:q,isPlaying:V.toString()===j.id.toString(),updatePlayer:M})})]})}))}):e.jsx(st,{severity:"info",children:"No Video found for this class, please add one"}),R&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{type:"primary",onClick:()=>{$(p+1)},children:"Load More"})})]}),e.jsx(ae,{title:"Uploading Video",open:L,onClose:j=>P(j),width:"50vw",children:e.jsx(vs,{id:r.id,random:Math.random(),handleAddingVideo:G})}),e.jsx(ae,{title:"Adding Youtube Video",open:H,onClose:j=>W(j),width:"50vw",children:e.jsx(ys,{id:r.id,random:Math.random(),handleAddingDrive:G})}),e.jsx(Mt,{title:"Video Info's",width:"40vw",anchor:"right",onClose:j=>l(j),open:y,children:e.jsx(e.Fragment,{children:a&&e.jsxs(e.Fragment,{children:[" ",e.jsx("div",{dangerouslySetInnerHTML:{__html:a.description}})]})})})]})};function at(r){if(r===null||r===!0||r===!1)return NaN;var t=Number(r);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Me(r,t){if(t.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+t.length+" present")}function Be(r){Me(1,arguments);var t=Object.prototype.toString.call(r);return r instanceof Date||dn(r)==="object"&&t==="[object Date]"?new Date(r.getTime()):typeof r=="number"||t==="[object Number]"?new Date(r):((typeof r=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Yi(r,t){Me(2,arguments);var n=Be(r).getTime(),a=at(t);return new Date(n+a)}var Bi={};function Jt(){return Bi}function $i(r){var t=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return t.setUTCFullYear(r.getFullYear()),r.getTime()-t.getTime()}function Gi(r){return Me(1,arguments),r instanceof Date||dn(r)==="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Ki(r){if(Me(1,arguments),!Gi(r)&&typeof r!="number")return!1;var t=Be(r);return!isNaN(Number(t))}function Xi(r,t){Me(2,arguments);var n=at(t);return Yi(r,-n)}var Ji=864e5;function Qi(r){Me(1,arguments);var t=Be(r),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var a=t.getTime(),s=n-a;return Math.floor(s/Ji)+1}function qt(r){Me(1,arguments);var t=1,n=Be(r),a=n.getUTCDay(),s=(a<t?7:0)+a-t;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function Yn(r){Me(1,arguments);var t=Be(r),n=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var s=qt(a),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var c=qt(i);return t.getTime()>=s.getTime()?n+1:t.getTime()>=c.getTime()?n:n-1}function Zi(r){Me(1,arguments);var t=Yn(r),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var a=qt(n);return a}var eo=6048e5;function to(r){Me(1,arguments);var t=Be(r),n=qt(t).getTime()-Zi(t).getTime();return Math.round(n/eo)+1}function Vt(r,t){var n,a,s,i,c,p,d,b;Me(1,arguments);var I=Jt(),_=at((n=(a=(s=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(c=t.locale)===null||c===void 0||(p=c.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&s!==void 0?s:I.weekStartsOn)!==null&&a!==void 0?a:(d=I.locale)===null||d===void 0||(b=d.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&n!==void 0?n:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var D=Be(r),R=D.getUTCDay(),x=(R<_?7:0)+R-_;return D.setUTCDate(D.getUTCDate()-x),D.setUTCHours(0,0,0,0),D}function Bn(r,t){var n,a,s,i,c,p,d,b;Me(1,arguments);var I=Be(r),_=I.getUTCFullYear(),D=Jt(),R=at((n=(a=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(c=t.locale)===null||c===void 0||(p=c.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&s!==void 0?s:D.firstWeekContainsDate)!==null&&a!==void 0?a:(d=D.locale)===null||d===void 0||(b=d.options)===null||b===void 0?void 0:b.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(R>=1&&R<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var x=new Date(0);x.setUTCFullYear(_+1,0,R),x.setUTCHours(0,0,0,0);var w=Vt(x,t),L=new Date(0);L.setUTCFullYear(_,0,R),L.setUTCHours(0,0,0,0);var P=Vt(L,t);return I.getTime()>=w.getTime()?_+1:I.getTime()>=P.getTime()?_:_-1}function ro(r,t){var n,a,s,i,c,p,d,b;Me(1,arguments);var I=Jt(),_=at((n=(a=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(c=t.locale)===null||c===void 0||(p=c.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&s!==void 0?s:I.firstWeekContainsDate)!==null&&a!==void 0?a:(d=I.locale)===null||d===void 0||(b=d.options)===null||b===void 0?void 0:b.firstWeekContainsDate)!==null&&n!==void 0?n:1),D=Bn(r,t),R=new Date(0);R.setUTCFullYear(D,0,_),R.setUTCHours(0,0,0,0);var x=Vt(R,t);return x}var no=6048e5;function ao(r,t){Me(1,arguments);var n=Be(r),a=Vt(n,t).getTime()-ro(n,t).getTime();return Math.round(a/no)+1}function ie(r,t){for(var n=r<0?"-":"",a=Math.abs(r).toString();a.length<t;)a="0"+a;return n+a}var so={y:function(t,n){var a=t.getUTCFullYear(),s=a>0?a:1-a;return ie(n==="yy"?s%100:s,n.length)},M:function(t,n){var a=t.getUTCMonth();return n==="M"?String(a+1):ie(a+1,2)},d:function(t,n){return ie(t.getUTCDate(),n.length)},a:function(t,n){var a=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h:function(t,n){return ie(t.getUTCHours()%12||12,n.length)},H:function(t,n){return ie(t.getUTCHours(),n.length)},m:function(t,n){return ie(t.getUTCMinutes(),n.length)},s:function(t,n){return ie(t.getUTCSeconds(),n.length)},S:function(t,n){var a=n.length,s=t.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,a-3));return ie(i,n.length)}};const Ke=so;var ut={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},io={G:function(t,n,a){var s=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return a.era(s,{width:"abbreviated"});case"GGGGG":return a.era(s,{width:"narrow"});case"GGGG":default:return a.era(s,{width:"wide"})}},y:function(t,n,a){if(n==="yo"){var s=t.getUTCFullYear(),i=s>0?s:1-s;return a.ordinalNumber(i,{unit:"year"})}return Ke.y(t,n)},Y:function(t,n,a,s){var i=Bn(t,s),c=i>0?i:1-i;if(n==="YY"){var p=c%100;return ie(p,2)}return n==="Yo"?a.ordinalNumber(c,{unit:"year"}):ie(c,n.length)},R:function(t,n){var a=Yn(t);return ie(a,n.length)},u:function(t,n){var a=t.getUTCFullYear();return ie(a,n.length)},Q:function(t,n,a){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return ie(s,2);case"Qo":return a.ordinalNumber(s,{unit:"quarter"});case"QQQ":return a.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,n,a){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return ie(s,2);case"qo":return a.ordinalNumber(s,{unit:"quarter"});case"qqq":return a.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,n,a){var s=t.getUTCMonth();switch(n){case"M":case"MM":return Ke.M(t,n);case"Mo":return a.ordinalNumber(s+1,{unit:"month"});case"MMM":return a.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(s,{width:"wide",context:"formatting"})}},L:function(t,n,a){var s=t.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return ie(s+1,2);case"Lo":return a.ordinalNumber(s+1,{unit:"month"});case"LLL":return a.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(s,{width:"wide",context:"standalone"})}},w:function(t,n,a,s){var i=ao(t,s);return n==="wo"?a.ordinalNumber(i,{unit:"week"}):ie(i,n.length)},I:function(t,n,a){var s=to(t);return n==="Io"?a.ordinalNumber(s,{unit:"week"}):ie(s,n.length)},d:function(t,n,a){return n==="do"?a.ordinalNumber(t.getUTCDate(),{unit:"date"}):Ke.d(t,n)},D:function(t,n,a){var s=Qi(t);return n==="Do"?a.ordinalNumber(s,{unit:"dayOfYear"}):ie(s,n.length)},E:function(t,n,a){var s=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return a.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(s,{width:"short",context:"formatting"});case"EEEE":default:return a.day(s,{width:"wide",context:"formatting"})}},e:function(t,n,a,s){var i=t.getUTCDay(),c=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(c);case"ee":return ie(c,2);case"eo":return a.ordinalNumber(c,{unit:"day"});case"eee":return a.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(i,{width:"short",context:"formatting"});case"eeee":default:return a.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,a,s){var i=t.getUTCDay(),c=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(c);case"cc":return ie(c,n.length);case"co":return a.ordinalNumber(c,{unit:"day"});case"ccc":return a.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(i,{width:"narrow",context:"standalone"});case"cccccc":return a.day(i,{width:"short",context:"standalone"});case"cccc":default:return a.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,a){var s=t.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return ie(i,n.length);case"io":return a.ordinalNumber(i,{unit:"day"});case"iii":return a.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(s,{width:"short",context:"formatting"});case"iiii":default:return a.day(s,{width:"wide",context:"formatting"})}},a:function(t,n,a){var s=t.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,a){var s=t.getUTCHours(),i;switch(s===12?i=ut.noon:s===0?i=ut.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,a){var s=t.getUTCHours(),i;switch(s>=17?i=ut.evening:s>=12?i=ut.afternoon:s>=4?i=ut.morning:i=ut.night,n){case"B":case"BB":case"BBB":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,a){if(n==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),a.ordinalNumber(s,{unit:"hour"})}return Ke.h(t,n)},H:function(t,n,a){return n==="Ho"?a.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Ke.H(t,n)},K:function(t,n,a){var s=t.getUTCHours()%12;return n==="Ko"?a.ordinalNumber(s,{unit:"hour"}):ie(s,n.length)},k:function(t,n,a){var s=t.getUTCHours();return s===0&&(s=24),n==="ko"?a.ordinalNumber(s,{unit:"hour"}):ie(s,n.length)},m:function(t,n,a){return n==="mo"?a.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Ke.m(t,n)},s:function(t,n,a){return n==="so"?a.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Ke.s(t,n)},S:function(t,n){return Ke.S(t,n)},X:function(t,n,a,s){var i=s._originalDate||t,c=i.getTimezoneOffset();if(c===0)return"Z";switch(n){case"X":return Gr(c);case"XXXX":case"XX":return Ze(c);case"XXXXX":case"XXX":default:return Ze(c,":")}},x:function(t,n,a,s){var i=s._originalDate||t,c=i.getTimezoneOffset();switch(n){case"x":return Gr(c);case"xxxx":case"xx":return Ze(c);case"xxxxx":case"xxx":default:return Ze(c,":")}},O:function(t,n,a,s){var i=s._originalDate||t,c=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+$r(c,":");case"OOOO":default:return"GMT"+Ze(c,":")}},z:function(t,n,a,s){var i=s._originalDate||t,c=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+$r(c,":");case"zzzz":default:return"GMT"+Ze(c,":")}},t:function(t,n,a,s){var i=s._originalDate||t,c=Math.floor(i.getTime()/1e3);return ie(c,n.length)},T:function(t,n,a,s){var i=s._originalDate||t,c=i.getTime();return ie(c,n.length)}};function $r(r,t){var n=r>0?"-":"+",a=Math.abs(r),s=Math.floor(a/60),i=a%60;if(i===0)return n+String(s);var c=t||"";return n+String(s)+c+ie(i,2)}function Gr(r,t){if(r%60===0){var n=r>0?"-":"+";return n+ie(Math.abs(r)/60,2)}return Ze(r,t)}function Ze(r,t){var n=t||"",a=r>0?"-":"+",s=Math.abs(r),i=ie(Math.floor(s/60),2),c=ie(s%60,2);return a+i+n+c}const oo=io;var Kr=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},$n=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},lo=function(t,n){var a=t.match(/(P+)(p+)?/)||[],s=a[1],i=a[2];if(!i)return Kr(t,n);var c;switch(s){case"P":c=n.dateTime({width:"short"});break;case"PP":c=n.dateTime({width:"medium"});break;case"PPP":c=n.dateTime({width:"long"});break;case"PPPP":default:c=n.dateTime({width:"full"});break}return c.replace("{{date}}",Kr(s,n)).replace("{{time}}",$n(i,n))},co={p:$n,P:lo};const uo=co;var ho=["D","DD"],fo=["YY","YYYY"];function mo(r){return ho.indexOf(r)!==-1}function po(r){return fo.indexOf(r)!==-1}function Xr(r,t,n){if(r==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var go={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},yo=function(t,n,a){var s,i=go[t];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+s:s+" ago":s};const xo=yo;function sr(r){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):r.defaultWidth,a=r.formats[n]||r.formats[r.defaultWidth];return a}}var vo={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jo={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},bo={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},So={date:sr({formats:vo,defaultWidth:"full"}),time:sr({formats:jo,defaultWidth:"full"}),dateTime:sr({formats:bo,defaultWidth:"full"})};const Co=So;var wo={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Io=function(t,n,a,s){return wo[t]};const To=Io;function bt(r){return function(t,n){var a=n!=null&&n.context?String(n.context):"standalone",s;if(a==="formatting"&&r.formattingValues){var i=r.defaultFormattingWidth||r.defaultWidth,c=n!=null&&n.width?String(n.width):i;s=r.formattingValues[c]||r.formattingValues[i]}else{var p=r.defaultWidth,d=n!=null&&n.width?String(n.width):r.defaultWidth;s=r.values[d]||r.values[p]}var b=r.argumentCallback?r.argumentCallback(t):t;return s[b]}}var Po={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ko={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Do={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Oo={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Mo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_o={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ao=function(t,n){var a=Number(t),s=a%100;if(s>20||s<10)switch(s%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Eo={ordinalNumber:Ao,era:bt({values:Po,defaultWidth:"wide"}),quarter:bt({values:ko,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:bt({values:Do,defaultWidth:"wide"}),day:bt({values:Oo,defaultWidth:"wide"}),dayPeriod:bt({values:Mo,defaultWidth:"wide",formattingValues:_o,defaultFormattingWidth:"wide"})};const Fo=Eo;function St(r){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.width,s=a&&r.matchPatterns[a]||r.matchPatterns[r.defaultMatchWidth],i=t.match(s);if(!i)return null;var c=i[0],p=a&&r.parsePatterns[a]||r.parsePatterns[r.defaultParseWidth],d=Array.isArray(p)?Lo(p,function(_){return _.test(c)}):Ro(p,function(_){return _.test(c)}),b;b=r.valueCallback?r.valueCallback(d):d,b=n.valueCallback?n.valueCallback(b):b;var I=t.slice(c.length);return{value:b,rest:I}}}function Ro(r,t){for(var n in r)if(r.hasOwnProperty(n)&&t(r[n]))return n}function Lo(r,t){for(var n=0;n<r.length;n++)if(t(r[n]))return n}function No(r){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.match(r.matchPattern);if(!a)return null;var s=a[0],i=t.match(r.parsePattern);if(!i)return null;var c=r.valueCallback?r.valueCallback(i[0]):i[0];c=n.valueCallback?n.valueCallback(c):c;var p=t.slice(s.length);return{value:c,rest:p}}}var qo=/^(\d+)(th|st|nd|rd)?/i,Vo=/\d+/i,Uo={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},zo={any:[/^b/i,/^(a|c)/i]},Ho={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Wo={any:[/1/i,/2/i,/3/i,/4/i]},Yo={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Bo={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$o={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Go={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ko={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Xo={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Jo={ordinalNumber:No({matchPattern:qo,parsePattern:Vo,valueCallback:function(t){return parseInt(t,10)}}),era:St({matchPatterns:Uo,defaultMatchWidth:"wide",parsePatterns:zo,defaultParseWidth:"any"}),quarter:St({matchPatterns:Ho,defaultMatchWidth:"wide",parsePatterns:Wo,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:St({matchPatterns:Yo,defaultMatchWidth:"wide",parsePatterns:Bo,defaultParseWidth:"any"}),day:St({matchPatterns:$o,defaultMatchWidth:"wide",parsePatterns:Go,defaultParseWidth:"any"}),dayPeriod:St({matchPatterns:Ko,defaultMatchWidth:"any",parsePatterns:Xo,defaultParseWidth:"any"})};const Qo=Jo;var Zo={code:"en-US",formatDistance:xo,formatLong:Co,formatRelative:To,localize:Fo,match:Qo,options:{weekStartsOn:0,firstWeekContainsDate:1}};const el=Zo;var tl=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rl=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,nl=/^'([^]*?)'?$/,al=/''/g,sl=/[a-zA-Z]/;function Ut(r,t,n){var a,s,i,c,p,d,b,I,_,D,R,x,w,L,P,H,W,V;Me(2,arguments);var k=String(t),y=Jt(),l=(a=(s=n==null?void 0:n.locale)!==null&&s!==void 0?s:y.locale)!==null&&a!==void 0?a:el,m=at((i=(c=(p=(d=n==null?void 0:n.firstWeekContainsDate)!==null&&d!==void 0?d:n==null||(b=n.locale)===null||b===void 0||(I=b.options)===null||I===void 0?void 0:I.firstWeekContainsDate)!==null&&p!==void 0?p:y.firstWeekContainsDate)!==null&&c!==void 0?c:(_=y.locale)===null||_===void 0||(D=_.options)===null||D===void 0?void 0:D.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=at((R=(x=(w=(L=n==null?void 0:n.weekStartsOn)!==null&&L!==void 0?L:n==null||(P=n.locale)===null||P===void 0||(H=P.options)===null||H===void 0?void 0:H.weekStartsOn)!==null&&w!==void 0?w:y.weekStartsOn)!==null&&x!==void 0?x:(W=y.locale)===null||W===void 0||(V=W.options)===null||V===void 0?void 0:V.weekStartsOn)!==null&&R!==void 0?R:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!l.localize)throw new RangeError("locale must contain localize property");if(!l.formatLong)throw new RangeError("locale must contain formatLong property");var u=Be(r);if(!Ki(u))throw new RangeError("Invalid time value");var O=$i(u),$=Xi(u,O),G={firstWeekContainsDate:m,weekStartsOn:f,locale:l,_originalDate:u},M=k.match(rl).map(function(q){var N=q[0];if(N==="p"||N==="P"){var U=uo[N];return U(q,l.formatLong)}return q}).join("").match(tl).map(function(q){if(q==="''")return"'";var N=q[0];if(N==="'")return il(q);var U=oo[N];if(U)return!(n!=null&&n.useAdditionalWeekYearTokens)&&po(q)&&Xr(q,t,String(r)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&mo(q)&&Xr(q,t,String(r)),U($,q,l.localize,G);if(N.match(sl))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return q}).join("");return M}function il(r){var t=r.match(nl);return t?t[1].replace(al,"'"):r}const{Option:ol}=Le,Jr=[{value:"",label:"Select Duration Type"},{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"}],ll=r=>{const[t,n]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:r.form,onFinish:a=>{a.description=t,r.onFinish(a),n("")},requiredMark:!1,children:[e.jsx(T.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(ne,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(T.Item,{name:"startDate",label:"start Date",rules:[{required:!0,type:"date",message:"Please select date"}],children:e.jsx(it,{showTime:{format:"HH:mm"},disabledDate:a=>{const s=ue().format("YYYY-MM-DD");return a&&a<ue(s,"YYYY-MM-DD")},style:{width:"100%"},popupStyle:{zIndex:9999}})}),e.jsxs(Z,{children:[e.jsx(X,{span:12,children:e.jsx(T.Item,{name:"duration",label:"Duration",style:{width:"100%"},rules:[{required:!0,type:"integer",message:"Enter Duration"}],children:e.jsx(Xe,{min:1,defaultValue:1,style:{width:"100%"},size:"large"})})}),e.jsx(X,{span:12,children:e.jsx(T.Item,{name:"durationType",label:"Duration Type",style:{width:"100%"},rules:[{required:!0,type:"string",message:"Please select duration type"}],children:e.jsx(Le,{defaultValue:Jr[0].value,size:"large",style:{width:"100%"},dropdownStyle:{zIndex:9999},children:Jr.map(a=>e.jsx(ol,{children:a.label},a.value))})})})]}),e.jsx("h3",{children:"Description"}),e.jsx(ze.CKEditor,{editor:He,data:t,onReady:a=>{a.editing.view.change(s=>{s.setStyle("min-height","100px",a.editing.view.document.getRoot())})},onChange:(a,s)=>{const i=s.getData();n(i)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},cl=r=>{const[t,n]=o.useState([]),[a,s]=o.useState(),[i,c]=o.useState(!0),[p,d]=o.useState(1),[b]=T.useForm(),[I,_]=o.useState(0),[D,R]=o.useState(0),[x,w]=o.useState(!0),{push:L}=Ce(),[P,H]=o.useState(!1),[W]=T.useForm(),[V,k]=o.useState(!1),[y]=T.useForm(),l=M=>{s(M),k(!0)},m=()=>{H(!0)},f=async M=>{const{data:q}=await B.custom({url:"",method:"post",meta:{operation:"editVirtualClass",variables:{id:{value:M.id,type:"Int",required:!0},name:{value:M.name,type:"String",required:!0},description:{value:M.description,type:"String",required:!0},duration:{value:M.duration,type:"Int",required:!0},durationType:{value:M.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:M.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:dt}]}}).catch(()=>(g.error("Error editing class"),{data:null})).then(N=>N);q&&(q.success?(g.success(q.message),n(t.map(N=>N.id===q.virtual.id?q.virtual:N)),k(!1)):g.error(q.message))},u=async M=>{const{data:q}=await B.custom({url:"",method:"post",meta:{operation:"createVirtualClass",variables:{darasaId:{value:parseInt(r.id?r.id.toString():"0"),type:"Int",required:!1},name:{value:M.name,type:"String",required:!0},description:{value:M.description,type:"String",required:!0},duration:{value:M.duration,type:"Int",required:!0},durationType:{value:M.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:M.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:dt}]}}).catch(()=>(g.error("Error creating virtual class"),{data:null})).then(N=>N);q&&(q.success?(g.success(q.message),H(!1),n([q.virtual,...t])):g.error(q.message))},O=async(M,q="",N=!1)=>{const{data:U}=await B.custom({url:"",method:"get",meta:{operation:"darasaVirtuals",variables:{page:{value:M,type:"Int",required:!0},key:{value:q,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:dt}]}}).catch(()=>(g.error("Error fetching virtual classes"),{data:null})).then(j=>j);U&&(R(U.total),_(U.pages),d(U.page),w(U.hasNext),n(N?U.results:[...t,...U.results])),c(!1)},$=async M=>{const{data:q}=await B.custom({url:"",method:"post",meta:{operation:"deleteVirtualClass",variables:{id:{value:M,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error deleting virtual class"),{data:null})).then(N=>N);q&&(q.success?(g.success(q.message),n(t.filter(N=>N.id!==M))):g.error(q.message))},G=M=>{pe.confirm({title:"Deleting Virtual Class Session",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>$(M)})};return o.useEffect(()=>{O(p)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:20,children:e.jsx(T,{layout:"vertical",form:b,onFinish:M=>O(0,M.key,!0),children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Virtual Sessions...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{icon:e.jsx(ht,{}),onClick:m,disabled:!r.canManage,size:"large",children:"Create Virtual Session"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(ce,{spinning:i,children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,renderItem:M=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(ke,{children:e.jsx(ee.Item,{actions:[e.jsx(be,{trigger:["click"],overlay:e.jsxs(Y,{children:[e.jsx(Y.Item,{icon:e.jsx(Bt,{}),disabled:!M.canJoin,onClick:()=>L("/oclass/virtual/class/session/"+M.id+"/"+M.token),children:e.jsx("a",{children:"Join"})}),M.canDelete?e.jsx(Y.Item,{disabled:!M.canDelete,icon:e.jsx($e,{}),onClick:()=>G(M.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}):e.jsx(e.Fragment,{}),M.canEdit&&e.jsx(Y.Item,{icon:e.jsx(Ot,{}),disabled:!M.canEdit,onClick:()=>l(M),children:e.jsx("a",{children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:q=>q.preventDefault(),children:e.jsx(Oe,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(Ue,{avatar:!0,title:!1,loading:!1,active:!0,children:e.jsx(ee.Item.Meta,{avatar:e.jsx(Se,{}),title:e.jsx("a",{onClick:()=>M.canJoin?L("/oclass/virtual/class/session/"+M.id+"/"+M.token):g("You can't join this session"),children:M.name}),description:e.jsxs(e.Fragment,{children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:M.description}}),e.jsxs("p",{children:[e.jsxs(oe,{color:"green",children:["Start At:"," ",Ut(new Date(M.startDate),"MMMM do, yyyy H:mma")]}),e.jsxs(oe,{color:"green",children:["End In:"," ",Ut(new Date(M.endDate),"MMMM do, yyyy H:mma")]}),M.canJoin?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx(oe,{color:"red",children:"Not Joinable"})})]})]})})})})})},"class-virtual-session-item-container-"+M.id)}),x&&e.jsx("div",{style:{textAlign:"center",marginTop:12},children:e.jsx("button",{onClick:()=>{O(p+1)},children:"Load More"})})]})}),e.jsx(ae,{title:"Creating Class Virtual Session",open:P,onClose:M=>H(M),width:"50vw",children:e.jsx(ll,{form:W,onFinish:u})}),e.jsx(ae,{title:"Editting "+(a==null?void 0:a.name),width:"40vw",open:V,onClose:M=>k(M),children:e.jsx(hn,{form:y,darasa:a,onFinish:f})})]})};function kt(r){"@babel/helpers - typeof";return kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(r)}function Qr(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,a)}return n}function dr(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qr(Object(n),!0).forEach(function(a){et(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Qr(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}function et(r,t,n){return t=ul(t),t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function ul(r){var t=dl(r,"string");return kt(t)==="symbol"?t:String(t)}function dl(r,t){if(kt(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var a=n.call(r,t||"default");if(kt(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var hl=function(t){var n,a=t.componentCls,s=t.colorBgContainer,i=t.fontSize,c=t.fontSizeSM,p=t.padding,d=t.paddingXS,b=t.marginSM,I=t.marginXXS,_=t.controlHeight,D=t.lineHeightSM,R=t.colorText,x=t.colorTextSecondary,w=t.colorTextTertiary,L=t.motionDurationSlow;return et({},a,dr(dr({},_a(t)),{},(n={position:"relative",backgroundColor:s},et(n,"".concat(a,"-inner"),{display:"flex",paddingBlock:p}),et(n,"".concat(a,"-avatar"),{position:"relative",flexShrink:0,marginInlineEnd:b,cursor:"pointer",img:{width:_,height:_,borderRadius:"50%"}}),et(n,"".concat(a,"-content"),{position:"relative",flex:"auto",minWidth:0,wordWrap:"break-word","&-author":{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",marginBottom:I,"& > a, & > span":{paddingInlineEnd:d,fontSize:c,lineHeight:D},"&-name":{color:x,fontSize:i,transition:"color ".concat(L),"> *":{color:x,"&:hover":{color:x}}},"&-time":{color:w,whiteSpace:"nowrap",cursor:"auto"}},"&-detail p":{whiteSpace:"pre-wrap",marginBlock:0}}),et(n,"".concat(a,"-actions"),{marginTop:b,marginBottom:0,paddingInlineStart:0,"> li":{display:"inline-block",color:x,"> span":{marginInlineEnd:b,color:x,fontSize:c,cursor:"pointer",transition:"color ".concat(L),userSelect:"none","&:hover":{color:R}}}}),et(n,"".concat(a,"-nested"),{marginInlineStart:44}),n)))};function fl(r){var t=Oa.useToken(),n=t.theme,a=t.token,s=t.hashId,i=o.useContext(fn.ConfigContext),c=i.iconPrefixCls;return[Ma({theme:n,token:a,hashId:s,path:["compatible","Comment",r,c]},function(){var p=dr({componentCls:".".concat(r)},a);return[hl(p)]}),s]}function Dt(r){"@babel/helpers - typeof";return Dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(r)}var ml=["actions","author","avatar","children","className","content","prefixCls","datetime"];function hr(){return hr=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},hr.apply(this,arguments)}function pl(r,t,n){return t=gl(t),t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function gl(r){var t=yl(r,"string");return Dt(t)==="symbol"?t:String(t)}function yl(r,t){if(Dt(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var a=n.call(r,t||"default");if(Dt(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function xl(r,t){return Sl(r)||bl(r,t)||jl(r,t)||vl()}function vl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jl(r,t){if(r){if(typeof r=="string")return Zr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zr(r,t)}}function Zr(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=r[n];return a}function bl(r,t){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var a,s,i,c,p=[],d=!0,b=!1;try{if(i=(n=n.call(r)).next,t===0){if(Object(n)!==n)return;d=!1}else for(;!(d=(a=i.call(n)).done)&&(p.push(a.value),p.length!==t);d=!0);}catch(I){b=!0,s=I}finally{try{if(!d&&n.return!=null&&(c=n.return(),Object(c)!==c))return}finally{if(b)throw s}}return p}}function Sl(r){if(Array.isArray(r))return r}function Cl(r,t){if(r==null)return{};var n=wl(r,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(r,a)&&(n[a]=r[a])}return n}function wl(r,t){if(r==null)return{};var n={},a=Object.keys(r),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(n[s]=r[s]);return n}var Il=fn.ConfigContext,Tl=function(t){var n=t.actions,a=t.author,s=t.avatar,i=t.children,c=t.className,p=t.content,d=t.prefixCls,b=t.datetime,I=Cl(t,ml),_=o.useContext(Il),D=_.getPrefixCls,R=_.direction,x=function(u,O){return o.createElement("div",{className:kr("".concat(u,"-nested"))},O)},w=D("comment",d),L=fl(w),P=xl(L,2),H=P[0],W=P[1],V=s?o.createElement("div",{className:"".concat(w,"-avatar")},typeof s=="string"?o.createElement("img",{src:s,alt:"comment-avatar"}):s):null,k=n&&n.length?o.createElement("ul",{className:"".concat(w,"-actions")},n.map(function(f,u){return o.createElement("li",{key:"action-".concat(u)},f)})):null,y=(a||b)&&o.createElement("div",{className:"".concat(w,"-content-author")},a&&o.createElement("span",{className:"".concat(w,"-content-author-name")},a),b&&o.createElement("span",{className:"".concat(w,"-content-author-time")},b)),l=o.createElement("div",{className:"".concat(w,"-content")},y,o.createElement("div",{className:"".concat(w,"-content-detail")},p),k),m=kr(w,pl({},"".concat(w,"-rtl"),R==="rtl"),c,W);return H(o.createElement("div",hr({},I,{className:m}),o.createElement("div",{className:"".concat(w,"-inner")},V,l),i?x(w,i):null))};const Gn=Tl,Pl=r=>new Promise((t,n)=>{const a=new FileReader;a.readAsDataURL(r),a.onload=()=>t(a.result),a.onerror=s=>n(s)}),kl=r=>{const{data:t}=yr(),[n,a]=o.useState(!1),[s,i]=o.useState(""),[c,p]=o.useState(""),[d,b]=o.useState([]),[I,_]=o.useState(!0),[D,R]=o.useState(1);o.useState(25);const[x]=T.useForm(),[w,L]=o.useState(0),[P,H]=o.useState(0),[W,V]=o.useState(!0);mn();const[k,y]=o.useState(!1),[l,m]=o.useState(""),f=o.useRef(null),u=o.useRef([]),[O,$]=o.useState([]),G=C=>{u.current[C-1].scrollIntoView({behavior:"smooth"})},M=()=>{f.current.scrollIntoView({behavior:"smooth"})},q=async(C,h="",v=25)=>{C===1&&(d.length=0,b([]));const{data:E}=await B.custom({url:"",method:"get",meta:{operation:"darasaPostComments",variables:{page:{value:parseInt(C.toString()),type:"Int",required:!0},key:{value:h,type:"String",required:!1},postId:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},pageSize:{value:parseInt(v.toString()),type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Dr}]}}).catch(()=>(g.error("Error loading comments"),{data:null})).then(z=>z);E&&(H(E.total),L(E.pages),R(E.page+1),V(E.hasNext),b([...d,...E.results])),_(!1)},N=async C=>{y(!0);const{data:h}=await B.custom({url:"",method:"post",meta:{operation:"createDarasaPostComment",variables:{postId:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},content:{value:C.content,type:"String",required:!0},photos:{value:O,type:"[Upload]",required:!1}},fields:["success","message",{comment:Dr}]}}).catch(()=>(g.error("Error submitting comment"),{data:null})).then(v=>v);y(!1),m(""),h&&(h.success?($([]),b([...d,h.comment]),M(),r.updateTotalComment(r==null?void 0:r.id,1)):g.error(h.message))},U=async(C,h)=>{const{data:v}=await B.custom({url:"",method:"post",meta:{operation:"deleteDarasaPostComment",variables:{id:{value:C,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error deleting comment"),{data:null})).then(E=>E);v&&(v.success?(g.success(v.message),b(d.filter(E=>E.id!==C)),r.updateTotalComment(r==null?void 0:r.id,-1),G(h)):g.error(v.message))},j=e.jsxs("div",{children:[e.jsx(pn,{}),e.jsx("div",{style:{marginTop:8},children:"Photo"})]}),S=async C=>{!C.url&&!C.preview&&(C.preview=await Pl(C.originFileObj)),i(C.url||C.preview),a(!0),p(C.name||C.url.substring(C.url.lastIndexOf("/")+1))},A=({fileList:C})=>{$(C)};return o.useEffect(()=>{q(1),M()},[r.id,r.randKey]),e.jsxs(e.Fragment,{children:[e.jsx("div",{id:"scrollableDiv",style:{height:"58vh",overflow:"auto"},children:e.jsxs(ce,{spinning:I,children:[e.jsx("div",{ref:f}),e.jsx(ee,{className:"comment-list",header:`${d.length} replies`,itemLayout:"horizontal",dataSource:d,renderItem:(C,h)=>e.jsx(ee.Item,{ref:v=>{u.current[h]=v},extra:[e.jsx(be,{overlay:e.jsxs(Y,{children:[e.jsx(Y.Item,{icon:e.jsx($e,{}),disabled:!C.canDelete,children:e.jsx(yt,{placement:"topLeft",title:"Are you sure to delete this comment?",onConfirm:()=>U(C.id,h),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})},"delete-post-comment"+C.id),C.canManage?e.jsx(e.Fragment,{}):e.jsx(Y.Item,{icon:e.jsx(Ae,{}),children:e.jsx("a",{onClick:()=>g("Under construction"),children:"Report"})},"report-post-comment"+C.id)]}),trigger:["click"],placement:"bottomRight",arrow:!0,overlayStyle:{zIndex:9999},children:e.jsx(K,{children:e.jsx(Oe,{})})})],actions:[],children:e.jsx(ee.Item.Meta,{avatar:e.jsx(Se,{src:C.user.pic}),title:e.jsx("a",{children:C.user.fullName}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:C.user.bio}),e.jsx("span",{dangerouslySetInnerHTML:{__html:C.content}}),e.jsx("div",{children:C.medias.length>0&&e.jsx(Z,{children:e.jsx(X,{span:24,children:e.jsx(It.PreviewGroup,{children:C.medias.map(v=>e.jsx(It,{preview:{visible:!0,zIndex:99999,bodyStyle:{zIndex:99999,zIndexPopup:99999}},style:{padding:10,display:"inline"},width:100,src:v.media}))})})})}),e.jsxs("span",{style:{color:"orange",display:"block"},children:[": Posted ",ue(C.created).fromNow()]})]})})},"post-comment-"+C.id)}),W&&e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(K,{onClick:()=>q(D,"",25),children:"Load More"})})]})}),e.jsx(Gn,{avatar:e.jsx(Se,{src:t.pic,alt:"Han Solo"}),content:e.jsxs(T,{form:x,onFinish:C=>{C.content=l,N(C),x.resetFields()},children:[e.jsx("div",{children:e.jsx(ze.CKEditor,{disabled:k,editor:He,data:l,onReady:C=>{C.editing.view.change(h=>{h.setStyle("min-height","75px",C.editing.view.document.getRoot())})},onChange:(C,h)=>{const v=h.getData();m(v)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})}),e.jsx("div",{style:{marginTop:10},children:e.jsx(gr,{multiple:!0,name:"photos",accept:mr.supported_image_extensions.join(),beforeUpload:()=>!1,listType:"picture-card",fileList:O,maxCount:3,onPreview:C=>{S(C)},onChange:A,children:O.length>=3?null:j})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{size:"large",loading:k,onClick:()=>x.submit(),type:"primary",disabled:l.length===0,children:"Publish Comment"})})]})}),e.jsx(ae,{open:n,title:c,onClose:C=>a(C),children:e.jsx("img",{alt:"example",style:{width:"100%"},src:s})})]})},{Text:en}=gt,Dl=r=>new Promise((t,n)=>{const a=new FileReader;a.readAsDataURL(r),a.onload=()=>t(a.result),a.onerror=s=>n(s)}),Ol=r=>{const[t,n]=o.useState(!1),[a,s]=o.useState(""),[i,c]=o.useState(""),[p,d]=o.useState([]),[b,I]=o.useState(),[_,D]=o.useState(!0),[R,x]=o.useState(!1),[w,L]=o.useState(1),[P,H]=o.useState(0),[W,V]=o.useState(!0),{data:k}=yr(),[y,l]=o.useState(""),[m,f]=o.useState(!1),[u,O]=o.useState([]),$=h=>{I(h),f(!0)},G=async(h,v="")=>{const{data:E}=await B.custom({url:"",method:"get",meta:{operation:"darasaPosts",variables:{id:{value:parseInt(r.id.toString()),type:"Int",required:!0},page:{value:h,type:"Int",required:!0},key:{value:v,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:Or}]}}).catch(z=>(console.log(z),g.error("Error loading posts"),{data:null})).then(z=>z);E&&(H(E.total),L(E.page+1),V(E.hasNext),d(E.results)),D(!1)};o.useEffect(()=>{G(w)},[]);const M=async()=>{x(!0);const{data:h}=await B.custom({url:"",method:"post",meta:{operation:"createDarasaPost",variables:{id:{value:parseInt(r.id.toString()),type:"Int",required:!0},content:{value:y,type:"String",required:!0},photos:{value:u,type:"[Upload]",required:!0}},fields:["success","message",{post:Or}]}}).catch(()=>(g.error("Error creating post"),{data:null})).then(v=>v);x(!1),h&&h.success&&(l(""),d([h.post,...p]),O([]),g.success(h.message))},q=async h=>{const{data:v}=await B.custom({url:"",method:"post",meta:{operation:"deleteDarasaPost",variables:{id:{value:parseInt(h.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error deleting post"),{data:null})).then(E=>E);v&&(v.success?(g.success(v.message),d(p.filter(E=>E.id!==h))):g.error(v.message))},N=h=>{pe.confirm({title:"Deleting Post",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>q(h)})},U=async h=>{const{data:v}=await B.custom({url:"",method:"post",meta:{operation:"addDarasaPostLike",variables:{id:{value:parseInt(h.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error liking post"),{data:null})).then(E=>E);if(v)if(v.success){const E=p.map(z=>z.id===h?{...z,isLiked:!0,totalLikes:z.totalLikes+1}:z);d(E)}else g.error(v.message)},j=async(h,v)=>{const E=p.map(z=>z.id===h?{...z,totalComments:z.totalComments+v}:z);d(E)},S=e.jsxs("div",{children:[e.jsx(pn,{}),e.jsx("div",{style:{marginTop:8},children:"Photo"})]}),A=async h=>{!h.url&&!h.preview&&(h.preview=await Dl(h.originFileObj)),s(h.url||h.preview),n(!0),c(h.name||h.url.substring(h.url.lastIndexOf("/")+1))},C=({fileList:h})=>{O(h)};return e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:24,children:e.jsx("div",{id:"scrollableDiv",style:{height:"80vh",overflow:"auto"},children:e.jsxs(jr,{dataLength:P,next:()=>G(w),hasMore:W,scrollableTarget:"scrollableDiv",loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(ce,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:p.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:[e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(Gn,{avatar:e.jsx(Se,{src:k==null?void 0:k.pic,alt:k==null?void 0:k.fullName}),style:{padding:0,border:"1",borderColor:"silver"},content:e.jsxs("div",{children:[e.jsx(ze.CKEditor,{disabled:R,editor:He,data:y,onReady:h=>{h.editing.view.change(v=>{v.setStyle("min-height","100px",h.editing.view.document.getRoot())})},onChange:(h,v)=>{const E=v.getData();l(E)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{children:e.jsx(gr,{multiple:!0,name:"photos",accept:mr.supported_image_extensions.join(),beforeUpload:()=>!1,listType:"picture-card",fileList:u,maxCount:7,onPreview:h=>{A(h)},onChange:C,children:u.length>=7?null:S})}),e.jsx("span",{style:{display:"flex",justifyContent:"flex-end",padding:0},children:e.jsx(K,{size:"large",htmlType:"submit",loading:R,type:"primary",disabled:!y,style:{marginTop:10},onClick:()=>M(),children:"Post"})})]})},"comment-header-")}),e.jsx(ee,{itemLayout:"vertical",size:"large",dataSource:p,loading:_,renderItem:h=>e.jsxs(ee.Item,{extra:[e.jsx(be,{overlay:e.jsxs(Y,{children:[e.jsx(Y.Item,{icon:e.jsx($e,{}),disabled:!h.canDelete,children:e.jsx("a",{onClick:()=>N(h.id),children:"Delete"})},"delete-post-"+h.id),h.canManage?e.jsx(e.Fragment,{}):e.jsx(Y.Item,{icon:e.jsx(Ae,{}),children:e.jsx("a",{onClick:()=>g("Under construction"),children:"Report"})},"report-post"+h.id)]}),trigger:["click"],placement:"bottomRight",arrow:!0,overlayStyle:{zIndex:9999},children:e.jsx(K,{children:e.jsx(Oe,{})})})],actions:[e.jsx("a",{onClick:()=>U(h.id),children:e.jsxs(De,{children:[h.isLiked?e.jsx(Aa,{style:{color:"red"}}):e.jsx(Ea,{style:{color:"red"}}),e.jsx(en,{children:h.totalLikes})]})}),e.jsx("a",{onClick:()=>$(h),children:e.jsxs(De,{children:[e.jsx(Fa,{}),e.jsx(en,{children:h.totalComments})]})})],children:[e.jsx(ee.Item.Meta,{avatar:e.jsx(Se,{src:h.user.pic}),title:e.jsx("a",{children:h.user.fullName}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:h.user.bio}),e.jsxs("span",{style:{color:"orange"},children:[": Posted ",ue(h.created).fromNow()]})]})}),e.jsx("span",{dangerouslySetInnerHTML:{__html:h.content}}),e.jsx("div",{children:e.jsx(Z,{children:e.jsx(X,{span:24,children:e.jsx(It.PreviewGroup,{children:h.medias.map(v=>e.jsx(It,{style:{padding:10,display:"inline"},width:300,src:v.media}))})})})})]},h.slug+h.id)})]})})}),e.jsx(X,{span:6})]}),e.jsx(Mt,{title:"Comments",anchor:"right",width:"40vw",open:m,onClose:h=>f(h),children:e.jsx(kl,{id:b==null?void 0:b.id,randKey:Math.random(),updateTotalComment:j})}),e.jsx(ae,{visible:t,title:i,footer:null,onCancel:()=>n(!1),destroyOnClose:!0,children:e.jsx("img",{alt:"example",style:{width:"100%"},src:a})})]})},Ml=r=>{const[t,n]=o.useState(""),[a]=T.useForm(),s=async i=>{const{data:c}=await B.custom({url:"",method:"post",meta:{operation:"createDarasaTopic",variables:{darasaId:{value:parseInt(r.darasa),type:"Int",required:!0},title:{value:i.title,type:"String",required:!0},description:{value:i.description,type:"String",required:!0},startDate:{value:ue(i.start_date).format("YYYY-MM-DD"),type:"String",required:!1},minutes:{value:i.minutes,type:"Int",required:!1}},fields:["success","message",{topic:xr}]}}).catch(()=>(g.error("Error creating topic"),{data:null})).then(p=>p);c&&(c.success?(g.success(c.message),r.onFinish(c.topic),a.resetFields()):g.error(c.message))};return e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:a,onFinish:i=>{i.description=t,s(i)},onReset:()=>{n("")},requiredMark:!1,children:[e.jsx(T.Item,{name:"title",label:"Topic Title",rules:[{required:!0,type:"string",message:"Enter Topic Title ..."}],children:e.jsx(ne,{size:"large",placeholder:"Enter Topic Title ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(ze.CKEditor,{editor:He,data:t,onReady:i=>{i.editing.view.change(c=>{c.setStyle("min-height","150px",i.editing.view.document.getRoot())})},onChange:(i,c)=>{const p=c.getData();n(p)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(T.Item,{label:"Start Date",name:"start_date",rules:[{required:!!a.getFieldValue("minutes"),type:"object",message:"Please select Start Date"}],children:e.jsx(it,{size:"large",style:{width:"50%"},disabledDate:i=>i.add(1,"day")<ue().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(T.Item,{label:"Total Duration (Minutes)",name:"minutes",rules:[{required:!1,type:"number",message:"Please enter total duration in minutes"}],children:e.jsx(Xe,{style:{width:"35%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},_l=r=>{const[t,n]=o.useState(""),[a]=T.useForm(),s=async i=>{const{data:c}=await B.custom({url:"",method:"post",meta:{operation:"createDarasaSubtopic",variables:{topicId:{value:parseInt(r.topic.id),type:"Int",required:!0},title:{value:i.title,type:"String",required:!0},description:{value:i.description,type:"String",required:!0},startDate:{value:ue(i.start_date).format("YYYY-MM-DD"),type:"String",required:!1},minutes:{value:i.minutes,type:"Int",required:!1}},fields:["success","message",{topic:xr}]}}).catch(()=>(g.error("Error creating topic"),{data:null})).then(p=>p);c&&(c.success?(g.success(c.message),r.onFinish(c.topic),a.resetFields()):g.error(c.message))};return e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:a,onFinish:i=>{i.description=t,s(i)},requiredMark:!1,children:[e.jsx(T.Item,{name:"title",label:"Topic Title",rules:[{required:!0,type:"string"}],children:e.jsx(ne,{size:"large",placeholder:"Enter Topic Title ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(ze.CKEditor,{editor:He,data:t,onReady:i=>{i.editing.view.change(c=>{c.setStyle("min-height","150px",i.editing.view.document.getRoot())})},onChange:(i,c)=>{const p=c.getData();n(p)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(T.Item,{label:"Start Date",name:"start_date",rules:[{required:!1,type:"object",message:"Please select Start Date"}],children:e.jsx(it,{size:"large",style:{width:"50%"},disabledDate:i=>i.add(1,"day")<ue().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(T.Item,{label:"Total Duration (Minutes)",name:"minutes",rules:[{required:!1,type:"number",message:"Enter Total Duration (Minutes)"}],children:e.jsx(Xe,{style:{width:"50%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})};function Al(r){return Ya({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h8zM4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4z"}},{tag:"path",attr:{d:"M8 4.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5zM8 6a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 3a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-3.5 1.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"}}]})(r)}const{TreeNode:tn,DirectoryTree:El}=Ba,{Panel:Fl}=vn,Rl=r=>{const[t,n]=o.useState([]),[a,s]=o.useState([]),[i,c]=o.useState(),[p,d]=o.useState(!0),[b,I]=o.useState(1),[_,D]=o.useState(0),[R,x]=o.useState(0),[w,L]=o.useState(!0),[P]=T.useForm(),[H,W]=o.useState(void 0);Ce();const k=!gn.useBreakpoint().lg,[y,l]=o.useState(!1),[m,f]=o.useState(!1),u=()=>{l(!0)},O=async(h,v="",E=!1)=>{const{data:z}=await B.custom({url:"",method:"get",meta:{operation:"darasaTopics",variables:{page:{value:h,type:"Int",required:!0},key:{value:v,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:xr}]}}).catch(te=>(console.log(te),g.error("Error fetching Topics"),{data:null})).then(te=>te);z&&(x(z.total),D(z.pages),I(z.page),L(z.hasNext),n(z.results),s(z.results)),d(!1)},$=async h=>{const{data:v}=await B.custom({url:"",method:"post",meta:{operation:"deleteDarasaTopic",variables:{id:{value:h,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error removing class Topic"),{data:null})).then(E=>E);v&&(v.success?(g.success(v.message),n(t.filter(E=>E.id!==h)),s(a.filter(E=>E.id!==h))):g.error(v.message))},G=async(h,v)=>{const{data:E}=await B.custom({url:"",method:"post",meta:{operation:"deleteDarasaTopic",variables:{id:{value:h,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error removing class Topic"),{data:null})).then(z=>z);if(E)if(E.success){g.success(E.message);const z=[...t],te=z.findIndex(ve=>ve.id===v),de=z[te].subtopics.findIndex(ve=>ve.id===h);de!==-1&&z[te].subtopics.splice(de,1),n(z);const We=[...a],_e=z.findIndex(ve=>ve.id===v);if(_e!==-1){const ve=z[_e].subtopics.findIndex(F=>F.id===h);ve!==-1&&We[_e].subtopics.splice(ve,1),s(We)}}else g.error(E.message)},M=h=>{pe.confirm({title:"Deleting Topic",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>$(h)})},q=(h,v)=>{pe.confirm({title:"Deleting Subtopic",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>G(h,v)})},N=h=>{c(h),f(!0)},U=async h=>{n([h,...t]),a.length===t.length&&s([h,...a])},j=async h=>{n(t.map(v=>v.id===h.id?h:v)),s(a.map(v=>v.id===h.id?h:v))},S=h=>{const v=t.filter(E=>E.id===parseInt(h));s(v)},A=()=>e.jsx(Na,{description:"No topic Registered ..."}),C=h=>h.subtopics.map(v=>e.jsx(Fl,{extra:[e.jsx("div",{style:{right:0,zIndex:99999},children:e.jsx(be,{trigger:["click"],overlay:e.jsxs(Y,{children:[e.jsx(Y.Item,{icon:e.jsx(Ae,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(Y.Item,{icon:e.jsx(mt,{}),onClick:()=>q(v.id,h.id),disabled:!r.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:E=>E.preventDefault(),children:e.jsx(Oe,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})],header:e.jsx("div",{children:e.jsxs("span",{children:[v.title,v.minutes>0&&e.jsxs(oe,{color:"green",children:[v.minutes," ",v.minutes>1?"Mins":"Min"]})]})}),children:e.jsx("div",{dangerouslySetInnerHTML:{__html:v.description}})},v.id));return o.useEffect(()=>{O(b)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:6,children:e.jsxs(ke,{style:{marginRight:5},children:[t.length===0&&e.jsx(e.Fragment,{children:A()}),e.jsx(El,{multiple:!0,defaultExpandedKeys:[],onExpand:(h,v)=>{const E=v.node.key;if(E&&E.toString().includes("topic")){W(E);const z=E.toString().split("-")[1];S(z)}else if(!(E&&E.toString().includes("sub")))s(t);else{const z=E.toString().split(":")[0];W(z);const te=z.toString().split("-")[1];S(te)}},children:t.map((h,v)=>e.jsx(tn,{icon:e.jsx(Mr,{}),title:h.title,children:h.subtopics.map(E=>e.jsx(tn,{icon:e.jsx(Mr,{}),title:E.title},"topic-"+h.id+":sub-"+E.id))},"topic-"+h.id))})]})}),e.jsxs(X,{span:18,children:[e.jsxs(Z,{children:[e.jsx(X,{span:12,children:e.jsx(T,{layout:"vertical",form:P,onFinish:h=>{I(0),O(0,h.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Topics(s)...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{icon:e.jsx(Yt,{}),size:"large",onClick:u,disabled:!r.canManage,children:"Add Topic"})})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[a.length>0?e.jsx(Z,{align:"top",children:a.map((h,v)=>e.jsx(X,{span:24,style:{marginTop:v===0?0:10},children:e.jsxs(ke,{hoverable:h.isActive,style:{marginRight:10},title:e.jsxs("div",{children:[e.jsxs("span",{children:[e.jsx("span",{style:{fontSize:22},children:h.title}),h.minutes>0&&e.jsx("span",{style:{marginLeft:10},children:e.jsx(Ve,{color:"green",title:e.jsxs(e.Fragment,{children:[e.jsxs(oe,{children:["Starts:"," ",ue(h.startDate).format("DD/MM/YYYY hh:mm a")]}),e.jsxs(oe,{children:["Ends:"," ",ue(h.endDate).format("DD/MM/YYYY hh:mm a")]})]}),children:e.jsxs(oe,{color:"green",children:[h.minutes," ",h.minutes>1?"Mins":"Min"]})})})]}),e.jsx(De,{style:{right:0,position:"absolute"},children:e.jsx(be,{trigger:["click"],overlay:e.jsxs(Y,{children:[e.jsx(Y.Item,{icon:e.jsx(yn,{}),disabled:!h.canManage,children:e.jsx("a",{onClick:()=>N(h),children:"Add Subtopics"})}),e.jsx(Y.Item,{icon:e.jsx(on,{}),disabled:!0,children:e.jsx("a",{onClick:()=>N(h),children:"Add Documents"})}),e.jsx(Y.Item,{icon:e.jsx(Ra,{}),disabled:!0,children:e.jsx("a",{onClick:()=>N(h),children:"Add Videos"})}),e.jsx(Y.Item,{icon:e.jsx(Al,{}),disabled:!0,children:e.jsx("a",{onClick:()=>N(h),children:"Add Audios"})}),e.jsx(Y.Item,{icon:e.jsx(Ae,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(Y.Item,{icon:e.jsx(mt,{}),onClick:()=>M(h.id),disabled:!r.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:E=>E.preventDefault(),children:e.jsx(Oe,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})]}),children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:h.description}}),h.subtopics.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:e.jsxs(X,{span:24,style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:20,fontWeight:"bolder"},children:"Subtopics"}),h.canManage&&e.jsx(K,{disabled:!h.canManage,icon:e.jsx(La,{}),onClick:()=>N(h),children:"Add Subtopic"})]})}),e.jsx(vn,{defaultActiveKey:["1"],accordion:!0,children:C(h)})]})]})}))}):e.jsx(ke,{children:e.jsx(Z,{justify:"center",children:e.jsx(X,{children:A()})})}),w&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{onClick:()=>O(b+1),disabled:!w,children:"Load More"})})]})]})]}),e.jsx(ae,{title:"Adding Topics",open:y,onClose:h=>l(h),width:k?"100vw":"50vw",children:e.jsx(Ml,{darasa:r.id,onFinish:U})}),e.jsx(ae,{title:"Add Subtopics to "+(i==null?void 0:i.title),open:m,onClose:h=>f(h),width:k?"100vw":"50vw",children:e.jsx(_l,{topic:i,onFinish:j})})]})},Ll=r=>{const[t,n]=o.useState([]),[a,s]=o.useState(!0),[i,c]=o.useState(1),[p,d]=o.useState(0),[b,I]=o.useState(0),[_,D]=o.useState(!0),[R]=T.useForm(),x=async(w,L="",P=!1)=>{const{data:H}=await B.custom({url:"",method:"get",meta:{operation:"darasaOrders",variables:{page:{value:w,type:"Int",required:!0},key:{value:L,type:"String",required:!1},darasaId:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},paid:{value:!0,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:vr}]}}).catch(()=>(g.error("Error fetching Class Payments"),{data:null})).then(W=>W);console.log(H),H&&(I(H.total),d(H.pages),c(H.page),D(H.hasNext),n(H.results)),s(!1)};return o.useEffect(()=>{x(i)},[]),a?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:e.jsx(X,{span:12,children:e.jsx(T,{layout:"vertical",form:R,onFinish:w=>{c(0),x(0,w.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Payment(s)...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,locale:{emptyText:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(ge,{style:{fontSize:20}})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("p",{children:"No Payments found"})})]})},renderItem:w=>e.jsx(ee.Item,{children:e.jsx(ee.Item.Meta,{avatar:e.jsx(Se,{src:w.user.pic}),title:e.jsxs("a",{children:[w.user.fullName,e.jsxs(oe,{color:"green",style:{marginLeft:10},children:[w.amount," TSH"]})]}),description:w.user.email})},w.id)}),_&&e.jsx("div",{style:{textAlign:"center",marginTop:12},children:e.jsx("button",{onClick:()=>{x(i+1)},children:"Load More"})})]})]})},Nl=r=>{const[t,n]=o.useState(!0),[a,s]=o.useState([]);T.useForm();const i=async(p,d="",b=!1)=>{n(!0);const{data:I}=await B.custom({url:"",method:"get",meta:{operation:"darasaOrders",variables:{page:{value:p,type:"Int",required:!0},key:{value:d,type:"String",required:!1},darasaId:{value:parseInt(r.darasa===void 0?"0":r.darasa.toString()),type:"Int",required:!0},paid:{value:!0,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:vr}]}}).catch(()=>(g.error("Error getting Orders"),{data:null})).then(_=>_);n(!1),I&&s(I.results)},c=[{title:"Student Name",dataIndex:"studentName",key:"studentName",rebnder:(p,d)=>e.jsx(e.Fragment,{children:d.darasa.user.fullName})},{title:"Receipt Number",dataIndex:"receiptNumber",key:"receiptNumber",render:(p,d)=>e.jsx(e.Fragment,{children:d.receiptNumber})},{title:"Amount",dataIndex:"amount",key:"amount",render:(p,d)=>e.jsx(e.Fragment,{children:d.amount})}];return o.useEffect(()=>{i(1)},[r.randKey]),e.jsx(e.Fragment,{children:e.jsx(jn,{loading:t,dataSource:a,columns:c,locale:{emptyText:"No Payments yet"}})})},ql=r=>{const[t,n]=o.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(Z,{children:e.jsxs(X,{span:24,children:[e.jsx(qa,{title:"Total Amount to be Disbursed (Approximate)",value:112893,precision:2}),e.jsx(K,{style:{marginTop:16},type:"primary",onClick:()=>n(!0),children:"View Details"})]})})}),e.jsx(Mt,{title:"Disbursement Details",anchor:"right",width:"40vw",onClose:a=>n(a),open:t,children:e.jsx(Nl,{darasa:r.darasa,randKey:Math.random()})})]})},Vl=r=>{const[t,n]=o.useState([]),[a,s]=o.useState(!0),[i,c]=o.useState(1),[p,d]=o.useState(0),[b,I]=o.useState(0),[_,D]=o.useState(!0),[R]=T.useForm();Ce();const[x,w]=o.useState(!1),L=async(P,H="",W=!1)=>{const{data:V}=await B.custom({url:"",method:"get",meta:{operation:"darasaOrderDisbursements",variables:{page:{value:P,type:"Int",required:!0},key:{value:H,type:"String",required:!1},darasaId:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},paid:{value:!0,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:Ua}]}}).catch(()=>(g.error("Error fetching Class Disbursements"),{data:null})).then(k=>k);V&&(I(V.total),d(V.pages),c(V.page),D(V.hasNext),n(V.results)),s(!1)};return o.useEffect(()=>{L(i)},[]),a?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:12,children:e.jsx(T,{layout:"vertical",form:R,onFinish:P=>{c(0),L(0,P.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Payment(s)...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:12,style:{textAlign:"right"},children:e.jsx(K,{size:"large",disabled:!r.canManage,icon:e.jsx(Va,{}),onClick:()=>w(!0),children:"Create Disbursement"})})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,locale:{emptyText:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(ge,{style:{fontSize:20}})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("p",{children:"No Disbursement found"})})]})},renderItem:P=>e.jsxs(ee.Item,{children:[e.jsx(ee.Item.Meta,{avatar:e.jsx(Se,{src:P.user.pic}),title:e.jsxs("a",{children:[P.user.fullName,e.jsxs(oe,{color:"green",style:{marginLeft:10},children:[P.amount," TSH"]})]}),description:P.user.email}),"first"]},P.id)}),_&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{onClick:()=>L(i+1),disabled:!_,children:"Load More"})})]}),e.jsx(ae,{title:"Create Disbursement",open:x,width:"50vw",onClose:P=>w(P),children:e.jsx(ql,{darasa:r.id,randKey:Math.random()})})]})},{TabPane:Re}=xn,Ul=r=>{const[t,n]=o.useState(),[a,s]=o.useState(!0),[i,c]=o.useState("1"),{push:p}=Ce(),d=$t(),b=async I=>{const{data:_}=await B.custom({url:"",method:"get",meta:{operation:"darasa",variables:{id:{value:parseInt(I.toString()),type:"Int",required:!0}},fields:rt}}).catch(()=>(g.error("Error fetching darasa"),{data:null})).then(D=>D);_&&(n(_),s(!1))};return o.useEffect(()=>{b(d.id),localStorage.getItem("currentClass")===d.id.toString()?c(localStorage.getItem("classCurrentTabIndex")??"1"):(localStorage.setItem("currentClass",d.id.toString()),c("1"))},[d.id]),e.jsx(e.Fragment,{children:e.jsxs(ce,{spinning:a,children:[e.jsx("div",{style:{marginTop:5,marginBottom:5},children:e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx("a",{onClick:()=>p("/oclass"),children:"Home"})}),e.jsx(re.Item,{children:e.jsx("a",{onClick:()=>p("/oclass"),children:"Classes"})}),e.jsxs(re.Item,{children:["Class Session",e.jsx(Wt,{}),t!=null&&t.name?e.jsxs("span",{style:{color:"orange"},children:[t==null?void 0:t.name," - ","{"+(t==null?void 0:t.code)+"}"]}):e.jsx(e.Fragment,{})]})]})}),(t==null?void 0:t.isBlocked)&&e.jsx(st,{severity:"warning",sx:{fontSize:18},children:"You have been blocked from this class, please contact the class owner for more information."}),!(t!=null&&t.isBlocked)&&e.jsx("div",{style:{marginTop:10,background:"white",padding:10},children:e.jsxs(xn,{type:"card",tabBarExtraContent:e.jsx(K,{icon:e.jsx(za,{}),disabled:!(t!=null&&t.canManage),children:"Configs"}),activeKey:i,onTabClick:I=>{c(I.toString()),localStorage.setItem("classCurrentTabIndex",I)},children:[e.jsx(Re,{tab:"Class Feeds",children:e.jsx(Ol,{id:d.id,canManage:t==null?void 0:t.canManage})},"1"),e.jsx(Re,{tab:"Files",children:e.jsx(ds,{id:d.id,canManage:t==null?void 0:t.canManage})},"2"),e.jsx(Re,{tab:"Connected Drives",children:e.jsx(us,{id:d.id,canManage:t==null?void 0:t.canManage})},"3"),e.jsx(Re,{tab:"Topics",children:e.jsx(Rl,{id:d.id,canManage:t==null?void 0:t.canManage})},"12"),e.jsx(Re,{tab:"Resources Links",children:e.jsx(fs,{id:d.id,canManage:t==null?void 0:t.canManage})},"4"),e.jsx(Re,{tab:"Videos",children:e.jsx(Wi,{id:d.id,canManage:t==null?void 0:t.canManage})},"5"),e.jsx(Re,{tab:"Virtual Sessions",disabled:!1,children:e.jsx(cl,{id:d.id,canManage:t==null?void 0:t.canManage})},"6"),e.jsx(Re,{tab:"Assignments",disabled:!1,children:e.jsx(ls,{id:d.id,canManage:t==null?void 0:t.canManage})},"7"),e.jsx(Re,{tab:"Announcements",children:e.jsx(is,{id:d.id,canManage:t==null?void 0:t.canManage})},"8"),e.jsx(Re,{tab:"Students",children:e.jsx(gs,{id:d.id,canManage:t==null?void 0:t.canManage})},"9"),(t==null?void 0:t.payable)&&(t==null?void 0:t.canManage)&&e.jsxs(e.Fragment,{children:[e.jsx(Re,{tab:"Payments",children:e.jsx(Ll,{id:d.id,canManage:t==null?void 0:t.canManage})},"10"),e.jsx(Re,{tab:"Disbursements",children:e.jsx(Vl,{id:d.id,canManage:t==null?void 0:t.canManage})},"11")]})]})})]})})},Kn=r=>{const[t,n]=o.useState(!1),[a,s]=o.useState(!1),[i,c]=o.useState(""),[p,d]=o.useState([]),[b,I]=o.useState(""),[_]=T.useForm(),D=async()=>{const{data:x}=await B.custom({url:"",method:"get",meta:{operation:"paymentSupportedTelecomCarriers",variables:{},fields:[{results:["id","name"]}]}}).catch(()=>(g.error("Error getting supported carriers"),{data:null})).then(w=>w);if(x){const w=x.results,L=[];w.forEach(P=>{L.push(P.name)}),d(L)}},R=async x=>{n(!0);const{data:w}=await B.custom({url:"",method:"post",meta:{operation:"validateMobilePhoneNumber",variables:{phone:{value:x,type:"String",required:!0}},fields:["success","message","carrier","formattedPhone"]}}).catch(()=>(g.error("Error Validating Mobile Phone Number"),{data:null})).then(L=>L);return w&&(s(w.success),w.success||(c(w.message),I(w.carrier))),n(!1),w};return o.useEffect(()=>{D()},[r.randKey]),e.jsxs("div",{children:[e.jsxs(me,{title:"",column:1,children:[e.jsx(me.Item,{label:"Class Name",children:r.darasa.name}),e.jsx(me.Item,{label:"Class Code",children:r.darasa.code}),e.jsx(me.Item,{label:"Cost",children:e.jsxs("span",{style:{fontSize:22},children:[r.darasa.price.toLocaleString(),"/= Tsh"]})}),e.jsx(me.Item,{label:"Description",children:r.darasa.description})]}),e.jsxs(T,{layout:"vertical",form:_,requiredMark:!0,autoComplete:"off",children:[e.jsx(T.Item,{name:"phone",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Mobile Phone Number"}),b.length>0&&e.jsx(oe,{color:"green",style:{marginLeft:10},children:b}),t&&e.jsx(ce,{spinning:t})]}),rules:[{required:!0,type:"string",message:"Required"},{validator:async(x,w)=>{if(w.length>=10){if(!t){const L=await R(w).then(P=>P);if(L!=null&&L.success)I(L.carrier),s(!0);else return I(""),Promise.reject(L==null?void 0:L.message)}}else s(!1)}}],children:e.jsx(ne,{size:"large",placeholder:"Mobile Phone Number ..."})}),p.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{children:"Supported Payment Merchants"}),e.jsx("span",{children:p.map(x=>e.jsx(oe,{color:"red",children:x}))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",disabled:!a,children:"Pay"})})]})]})},zl=()=>{const[r,t]=o.useState(!0),[n,a]=o.useState(!1),[s,i]=o.useState(),[c,p]=o.useState(!1),d=$t(),b=async _=>{t(!0);const{data:D}=await B.custom({url:"",method:"post",meta:{operation:"checkDarasaConnected",variables:{id:{value:parseInt(_.toString()),type:"Int",required:!0}},fields:["success","message",{darasa:rt}]}}).catch(()=>({data:null})).then(R=>R);t(!1),D&&(a(D.success),i(D.darasa))},I=async _=>{const{data:D}=await B.custom({url:"",method:"post",meta:{operation:"connectDarasa",variables:{id:{value:parseInt(_.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>({data:null})).then(R=>R);D?(a(D.success),i(D.darasa),g.success(D.message),D.success&&b(d.id)):g.error(D.message)};return o.useEffect(()=>{b(d.id)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginTop:0},children:[r&&e.jsx(e.Fragment,{children:e.jsx(Z,{children:e.jsx(X,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(ce,{tip:"Checking Connection",size:"large",style:{color:"red"},children:e.jsx("div",{className:"content",style:{height:"50vh",width:"100vh"}})})})})}),n&&e.jsx(Ul,{}),!n&&!r&&e.jsxs(e.Fragment,{children:[e.jsx(ke,{children:e.jsxs(me,{title:"Class Info's",children:[e.jsx(me.Item,{label:"Class Name/Title",children:s==null?void 0:s.name}),e.jsx(me.Item,{label:"Class Code",children:s==null?void 0:s.code}),e.jsx(me.Item,{label:"Created By",children:e.jsx("a",{children:s==null?void 0:s.user.fullName})}),(s==null?void 0:s.startDate)&&e.jsx(me.Item,{label:"Start Date",children:ue(s==null?void 0:s.startDate).format("YYYY-MM-DD")}),(s==null?void 0:s.endDate)&&e.jsx(me.Item,{label:"End Date",children:ue(s==null?void 0:s.endDate).format("YYYY-MM-DD")}),(s==null?void 0:s.payable)&&e.jsxs(me.Item,{label:"Price",children:[s==null?void 0:s.price.toLocaleString(),"/= Tsh"]})]})}),e.jsx(Z,{children:e.jsxs(X,{span:24,style:{display:"flex",justifyContent:"center"},children:[(s==null?void 0:s.payable)&&e.jsx(K,{size:"large",onClick:()=>p(!0),children:"Pay for This Class"}),!(s!=null&&s.payable)&&e.jsx(yt,{title:"Are you sure to Connect/Join to this Class",onConfirm:()=>I(d.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(K,{size:"large",children:"Connect/Join"})})]})})]})]}),e.jsx(ae,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Purchasing"}),e.jsx("span",{style:{marginLeft:10,fontWeight:"bolder"},children:s==null?void 0:s.name})]}),width:"35vw",open:c,onClose:_=>p(_),children:e.jsx(Kn,{darasa:s,randKey:Math.random()})})]})},Hl=()=>e.jsx(zl,{}),Wl=()=>e.jsxs(xe,{children:[e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx(Je,{to:"/oclass",children:"Home"})}),e.jsx(re.Item,{children:"Connected Classes"})]}),e.jsx(xe,{sx:{mt:2},children:e.jsx(Gt,{mode:"connected"})})]}),Yl=()=>e.jsx(Wl,{}),{Meta:Bl}=ke,$l=r=>{const[t,n]=o.useState([]),[a,s]=o.useState(),[i,c]=o.useState(!1),[p,d]=o.useState(!1),[b,I]=o.useState(!0),[_,D]=o.useState(1),[R,x]=o.useState(0),[w,L]=o.useState(!0),[P]=T.useForm(),W=!gn.useBreakpoint().lg,V=l=>{s(l),d(!0)},k=l=>{s(l),c(!0)},y=async(l,m="",f=!1)=>{const{data:u}=await B.custom({url:"",method:"get",meta:{operation:"madarasaToBuy",variables:{page:{value:l,type:"Int",required:!0},key:{value:m,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:rt}]}}).catch(()=>(g.error("Error getting darasas"),{data:null})).then(O=>O);u&&(x(u.total),D(u.page),L(u.hasNext),n(u.results)),I(!1)};return o.useEffect(()=>{y(_)},[]),b?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:b,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{style:{display:"flex",justifyContent:"center"},children:e.jsx(X,{span:W?24:10,children:e.jsx(T,{layout:"vertical",form:P,onFinish:l=>{D(0),y(0,l.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Classes...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(jr,{dataLength:R,next:()=>y(_),hasMore:w,loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(ce,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:t.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:t.length>0?e.jsx(Z,{align:"top",children:t.map(l=>e.jsx(X,{span:W?24:8,children:e.jsxs(ke,{hoverable:l.isActive,style:{marginRight:10,marginBottom:10},actions:[e.jsx(K,{size:"large",onClick:()=>k(l),children:"Read More"}),e.jsx(K,{size:"large",onClick:()=>V(l),children:"Buy Now"})],children:[e.jsx("div",{style:{height:window.innerHeight/3,background:"url("+l.cover+")",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",marginBottom:10,borderRadius:5}}),e.jsx(Bl,{title:e.jsx(e.Fragment,{children:e.jsxs(De,{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("h2",{children:[e.jsx(Ve,{title:l.name,children:ir(l.name,20)}),e.jsx(oe,{color:"red",style:{marginLeft:10},children:l.code})]}),e.jsxs("span",{style:{fontSize:24},children:[l.price,"/="]})]})}),description:e.jsx(e.Fragment,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:ir(l.description,100)}})})})]})}))}):e.jsx(st,{severity:"info",sx:{fontSize:18},children:"No Classes Found"})}),e.jsx(Mt,{title:a==null?void 0:a.name,width:"50vw",anchor:"right",onClose:l=>c(l),open:i,children:e.jsxs(me,{title:"",column:1,children:[e.jsx(me.Item,{label:"Class Name",children:a==null?void 0:a.name}),e.jsx(me.Item,{label:"Class Code#",children:a==null?void 0:a.code}),e.jsxs(me.Item,{label:"Cost",children:[a==null?void 0:a.price," Tsh"]}),e.jsx(me.Item,{label:"Description",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:a==null?void 0:a.description}})}),e.jsx(me.Item,{label:"",children:e.jsx(K,{size:"large",onClick:()=>V(a),children:"Buy Now"})})]})}),e.jsx(ae,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Purchasing"}),e.jsx("span",{style:{marginLeft:10,fontWeight:"bolder"},children:a==null?void 0:a.name})]}),width:"35vw",open:p,onClose:l=>d(l),children:e.jsx(Kn,{darasa:a,randKey:Math.random()})})]})},Gl=()=>e.jsxs(xe,{children:[e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx(Je,{to:"/oclass",children:"Home"})}),e.jsx(re.Item,{children:"Classes Marketplace"})]}),e.jsx(xe,{sx:{mt:2},children:e.jsx($l,{randKey:Math.random()})})]}),Kl=()=>e.jsx(Gl,{}),Xl=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx(Je,{to:"/oclass",children:"Home"})}),e.jsx(re.Item,{children:"My Classes"})]}),e.jsx(xe,{sx:{mt:2},children:e.jsx(Gt,{mode:"my"})})]}),Jl=()=>e.jsx(Xl,{}),Ql=r=>{const[t,n]=o.useState(!1),[a,s]=o.useState(0),[i,c]=o.useState(0),[p,d]=o.useState(1),[b,I]=o.useState(25),[_,D]=o.useState(""),[R,x]=o.useState([]),[w,L]=o.useState(),[P]=T.useForm(),[H,W]=o.useState(!1);Ce();const V=async m=>{L(m),W(!0)},k=async(m,f="",u=25)=>{n(!0);const{data:O}=await B.custom({url:"",method:"get",meta:{operation:"darasaOrders",variables:{page:{value:m,type:"Int",required:!0},key:{value:f,type:"String",required:!1},pageSize:{value:u,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:vr}]}}).catch($=>(console.log($),g.error("Error getting Bills"),{data:null})).then($=>$);O&&(s(O.total),c(O.pages),d(O.page),x(O.results)),n(!1)},y=async m=>{const{data:f}=await B.custom({url:"",method:"post",meta:{operation:"deleteDarasaOrder",variables:{id:{value:m,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error deleting Order"),{data:null})).then(u=>u);f&&x(R.filter(u=>u.id!==m))},l=[{title:"Bill#",dataIndex:"billNumber",fixed:!0,render:(m,f,u)=>{var O;return e.jsx("span",{children:e.jsx("a",{children:(O=f==null?void 0:f.bill)==null?void 0:O.billNumber})})}},{title:"Class Name",dataIndex:"bookTitle",fixed:!0,render:(m,f,u)=>{var O;return e.jsx("span",{children:e.jsx("a",{children:(O=f==null?void 0:f.darasa)==null?void 0:O.name})})}},{title:"Bill Amount",dataIndex:"billAmount",fixed:!0,render:(m,f,u)=>e.jsxs("span",{children:[f.price," Tsh"]})},{title:"Paid",dataIndex:"isPaid",fixed:!0,render:(m,f,u)=>e.jsx("span",{children:f.isPaid?e.jsx(oe,{color:"green",children:"Yes"}):e.jsx(oe,{color:"red",children:"No"})})},{title:"Created",dataIndex:"created",render:(m,f,u)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ft,{date:new Date(f.created)})})})},{title:"Status",dataIndex:"isActive",render:(m,f,u)=>e.jsx("a",{children:f!=null&&f.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(m,f,u)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[!f.isPaid&&e.jsx(yt,{title:"Are you sure to delete this Order?",onConfirm:()=>y(f.id),okText:"Yes",cancelText:"No",disabled:!(f!=null&&f.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(K,{icon:e.jsx($e,{}),disabled:!(f!=null&&f.canDelete),size:"large"})}),f.isPaid&&e.jsx(Ve,{title:"Print Receipt",children:e.jsx(K,{icon:e.jsx(Wa,{}),size:"large"})}),!f.isPaid&&e.jsx(Ve,{title:"View Order Details",children:e.jsx(K,{icon:e.jsx(yn,{}),size:"large",onClick:()=>V(f)})})]})}];return o.useEffect(()=>{k(p,"",25)},[r.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(Ha,{offsetTop:75,children:e.jsx(Z,{style:{display:"flex",justifyContent:"center",marginTop:20},children:e.jsx(X,{span:10,children:e.jsx(T,{layout:"vertical",form:P,onFinish:m=>{k(1,m.key,25)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Bill(s)...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})})})}),e.jsx(Z,{children:e.jsx(X,{span:24,children:e.jsx(jn,{loading:t,columns:l,dataSource:R,pagination:{onChange:(m,f)=>{I(f),k(m,_,f)},total:a,pageSize:b,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})})}),e.jsx(ae,{title:"Order Details & Payment",open:H,width:"50vw",onClose:m=>W(m),children:e.jsx($a,{book:w==null?void 0:w.darasa})})]})},Zl=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx(Ql,{randKey:Math.random()})}),ec=()=>e.jsx(Zl,{}),{Option:tc}=Le,rn=[{value:"",label:"Select Duration Type"},{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"}],rc=r=>{const[t,n]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:r.form,onFinish:a=>{a.description=t,r.onFinish(a),n("")},requiredMark:!1,children:[e.jsx(T.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(ne,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(T.Item,{name:"startDate",label:"start Date",rules:[{required:!0,type:"date",message:"Please select date"}],children:e.jsx(it,{showTime:{format:"HH:mm"},disabledDate:a=>{const s=ue().format("YYYY-MM-DD");return a&&a<ue(s,"YYYY-MM-DD")},style:{width:"100%"},popupStyle:{zIndex:9999}})}),e.jsxs(Z,{children:[e.jsx(X,{span:12,children:e.jsx(T.Item,{name:"duration",label:"Duration",style:{width:"100%"},rules:[{required:!0,type:"integer",message:"Enter Duration"}],children:e.jsx(Xe,{min:1,defaultValue:1,style:{width:"100%"},size:"large"})})}),e.jsx(X,{span:12,children:e.jsx(T.Item,{name:"durationType",label:"Duration Type",style:{width:"100%"},rules:[{required:!0,type:"string",message:"Please select duration type"}],children:e.jsx(Le,{defaultValue:rn[0].value,size:"large",style:{width:"100%"},dropdownStyle:{zIndex:9999},children:rn.map(a=>e.jsx(tc,{children:a.label},a.value))})})})]}),e.jsx(T.Item,{name:"isPublic",label:"Availability",rules:[{required:!1,type:"boolean"}],children:e.jsx(zt,{defaultChecked:!0,disabled:!0,checked:!0,value:!0,children:"Public Available"})}),e.jsx("h3",{children:"Description"}),e.jsx(ze.CKEditor,{editor:He,data:t,onReady:a=>{a.editing.view.change(s=>{s.setStyle("min-height","100px",a.editing.view.document.getRoot())})},onChange:(a,s)=>{const i=s.getData();n(i)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},nc=r=>{const[t,n]=o.useState(!1),[a,s]=o.useState([]),[i,c]=o.useState(),[p,d]=o.useState(),[b,I]=o.useState(!0),[_,D]=o.useState(1),[R,x]=o.useState(0),[w,L]=o.useState(!0),[P]=T.useForm(),[H,W]=o.useState(!1),{push:V}=Ce(),[k]=T.useForm(),[y,l]=o.useState(!1),[m,f]=o.useState(!1),u=S=>{c(S),f(!0)},O=async S=>{const{data:A}=await B.custom({url:"",method:"post",meta:{operation:"connectClass",variables:{id:{value:S,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error connecting to class"),{data:null})).then(C=>C);A&&(A.success?(l(!1),d(null),g(A.message),s(a.filter(C=>C.id!==S))):g.error(A.message))},$=async S=>{const{data:A}=await B.custom({url:"",method:"post",meta:{operation:"createVirtualClass",variables:{name:{value:S.name,type:"String",required:!0},description:{value:S.description,type:"String",required:!0},duration:{value:S.duration,type:"Int",required:!0},durationType:{value:S.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:S.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:dt}]}}).catch(()=>(g.error("Error creating class"),{data:null})).then(C=>C);A&&(A.success?(g.success(A.message),W(!1),s([A.virtual,...a])):g.error(A.message))},G=async S=>{const{data:A}=await B.custom({url:"",method:"post",meta:{operation:"editVirtualClass",variables:{id:{value:S.id,type:"Int",required:!0},name:{value:S.name,type:"String",required:!0},description:{value:S.description,type:"String",required:!0},duration:{value:S.duration,type:"Int",required:!0},durationType:{value:S.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:S.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:dt}]}}).catch(()=>(g.error("Error editing class"),{data:null})).then(C=>C);A&&(A.success?(g.success(A.message),s(a.map(C=>C.id===A.virtual.id?A.virtual:C)),f(!1)):g.error(A.message))},M=()=>{k.resetFields(),W(!0)},q=async S=>{const{data:A}=await B.custom({url:"",method:"post",meta:{operation:"deleteVirtualClass",variables:{id:{value:S,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error deleting class"),{data:null})).then(C=>C);A&&(A.success?(g.success(A.message),s(a.filter(C=>C.id!==S))):g.error(A.message))},N=S=>{pe.confirm({title:"Deleting Virtual Class",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>q(S)})},U=async(S,A="",C=!1)=>{const{data:h}=await B.custom({url:"",method:"get",meta:{operation:"publicVirtualClasses",variables:{page:{value:S,type:"Int",required:!0},key:{value:A,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:dt}]}}).catch(()=>(g.error("Error fetching classes"),{data:null})).then(v=>v);h&&(x(h.total),D(h.page),L(h.hasNext),s(h.results)),I(!1)},j=async()=>{const{data:S}=await B.custom({url:"",method:"get",meta:{operation:"darasaAuth",variables:{},fields:["auth"]}}).catch(()=>(g.error("Error getting darasa auth"),{data:null})).then(A=>A);S&&n(S.auth.create_virtual_classes)};return o.useEffect(()=>{j(),U(_)},[]),b?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:b,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:20,children:e.jsx(T,{layout:"vertical",form:P,onFinish:S=>{D(0),U(0,S.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Public Virtual Classes...",prefix:e.jsx(fe,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{icon:e.jsx(Ht,{}),size:"large",onClick:()=>M(),disabled:!t,children:"Create Virtual Class"})})]}),e.jsx(jr,{dataLength:R,next:()=>U(_),hasMore:w,loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(ce,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:a.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(ee,{loading:!1,itemLayout:"horizontal",loadMore:!1,dataSource:a,renderItem:S=>e.jsx(ke,{children:e.jsx(ee.Item,{actions:[e.jsx(be,{trigger:["click"],overlay:e.jsxs(Y,{children:[e.jsx(Y.Item,{icon:e.jsx(Bt,{}),disabled:!S.canJoin,onClick:()=>V("/oclass/virtual/class/session/"+S.id+"/"+S.token),children:e.jsx("a",{children:"Join"})}),S.canDelete?e.jsx(Y.Item,{disabled:!S.canDelete,icon:e.jsx($e,{}),onClick:()=>N(S.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}):e.jsx(e.Fragment,{}),e.jsx(Y.Item,{icon:e.jsx(Ot,{}),disabled:!S.canEdit,onClick:()=>u(S),children:e.jsx("a",{children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:A=>A.preventDefault(),children:e.jsx(Oe,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(Ue,{avatar:!0,title:!1,loading:!1,active:!0,children:e.jsx(ee.Item.Meta,{avatar:e.jsx(Se,{}),title:e.jsx("a",{onClick:()=>S.canJoin?V("/oclass/virtual/class/session/"+S.id+"/"+S.token):g("You can't join this class"),children:S.name}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:S.description}),e.jsxs("p",{children:[e.jsxs(oe,{color:"green",children:["Start At:"," ",e.jsx("span",{style:{marginLeft:10},children:Ut(new Date(S.startDate),"MMMM do, yyyy H:mma")})]}),e.jsxs(oe,{color:"green",children:["End In:",e.jsx("span",{style:{marginLeft:10},children:Ut(new Date(S.endDate),"MMMM do, yyyy H:mma")})]}),S.canJoin?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx(oe,{color:"red",children:"Not Joinable"})})]})]})})})})})})}),e.jsx(ae,{title:"Creating Public Virtual Class",width:"40vw",open:H,onClose:S=>W(S),children:e.jsx(rc,{form:k,onFinish:$})}),e.jsx(ae,{title:"Connecting "+(p==null?void 0:p.name),open:y,width:"40vw",onClose:S=>l(S),children:e.jsxs(e.Fragment,{children:[e.jsx(bn,{id:p==null?void 0:p.id}),e.jsx(K,{onClick:()=>O(p==null?void 0:p.id),style:{position:"absolute",bottom:0,right:0,marginBottom:10},children:"Connect"})]})}),e.jsx(ae,{title:"Editting "+(i==null?void 0:i.name),width:"40vw",open:m,onClose:S=>f(S),children:e.jsx(hn,{form:k,darasa:i,onFinish:G})})]})},ac=()=>e.jsxs(xe,{children:[e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx(Je,{to:"/oclass",children:"Home"})}),e.jsx(re.Item,{children:"Online Public Virtual Classes"})]}),e.jsx(xe,{sx:{mt:2},children:e.jsx(nc,{mode:"connected"})})]}),sc=()=>e.jsx(ac,{}),Xn="meet.jit.si";var ic=globalThis&&globalThis.__awaiter||function(r,t,n,a){function s(i){return i instanceof n?i:new n(function(c){c(i)})}return new(n||(n=Promise))(function(i,c){function p(I){try{b(a.next(I))}catch(_){c(_)}}function d(I){try{b(a.throw(I))}catch(_){c(_)}}function b(I){I.done?i(I.value):s(I.value).then(p,d)}b((a=a.apply(r,t||[])).next())})};const oc=(r,t,n)=>ic(void 0,void 0,void 0,function*(){return new Promise((a,s)=>{if(window.JitsiMeetExternalAPI)return a(window.JitsiMeetExternalAPI);const i=document.createElement("script"),c=t?`?release=${t}`:"",p=n?`${n}/`:"";i.async=!0,i.src=`https://${r}/${p}external_api.js${c}`,i.onload=()=>a(window.JitsiMeetExternalAPI),i.onerror=()=>s(new Error(`Script load error: ${i.src}`)),document.head.appendChild(i)})});let Et;const lc=(r=Xn,t,n)=>Et||(Et=oc(r,t,n),Et),cc=r=>{const t=r.split("/");if(!(t.length<=1))return t[0]};let uc=0;const nn=r=>`${r}-${uc++}`,dc=({domain:r=Xn,roomName:t,configOverwrite:n,interfaceConfigOverwrite:a,jwt:s,invitees:i,devices:c,userInfo:p,release:d,spinner:b,onApiReady:I,onReadyToClose:_,getIFrameRef:D})=>{const[R,x]=o.useState(!0),[w,L]=o.useState(!1),P=o.useRef(),H=o.useRef(),W=o.useRef(null),V=o.useMemo(()=>nn("jitsiMeeting"),[nn]);o.useEffect(()=>{lc(r,d,cc(t)).then(l=>{P.current=l,L(!0)}).catch(l=>console.error(l.message))},[]);const k=o.useCallback(l=>{H.current=new l(r,{roomName:t,configOverwrite:n,interfaceConfigOverwrite:a,jwt:s,invitees:i,devices:c,userInfo:p,release:d,parentNode:W.current}),x(!1),H.current&&(typeof I=="function"&&I(H.current),H.current.on("readyToClose",()=>{typeof _=="function"&&_()}),W.current&&typeof D=="function"&&D(W.current))},[H,W,I,_,D,r,t,n,a,s,i,c,p]);o.useEffect(()=>{w&&!H.current&&P.current&&k(P.current)},[w,k]);const y=o.useCallback(()=>!b||!R||H.current?null:e.jsx(b,{},void 0),[b,H.current]);return e.jsxs(e.Fragment,{children:[y(),e.jsx("div",{id:V,ref:W},V)]},void 0)};globalThis&&globalThis.__rest;const hc={app_name:"Oclass",api_url:"https://olbongo.co.tz",conference_url:"video.olbongo.co.tz"},fc=r=>{const[t,n]=o.useState(),[a,s]=o.useState(!1),[i,c]=o.useState(!0),[p,d]=o.useState(!0),{push:b}=mn(),{data:I}=yr(),_=$t(),D=async()=>{const{data:x}=await B.custom({url:"",method:"get",meta:{operation:"virtual",variables:{id:{value:parseInt(_.id),type:"Int",required:!0}},fields:["id","name","description","startDate","duration","durationType","token",{darasa:["id","name","code","description"]},{author:["id","firstName","middleName","lastName","fullName","pic","email"]},"created","canEdit","canDelete","canManage","updated","isActive"]}}).catch(w=>(g.error("Error fetching virtual class"),{data:null})).then(w=>w);x&&n(x),c(!1)},R=e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx("a",{onClick:()=>b("/oclass"),children:"Home"})}),e.jsx(re.Item,{children:e.jsx("a",{onClick:()=>b("/oclass/public/virtual/classes"),children:"Virtual Sessions/Classes"})}),e.jsx(re.Item,{children:t==null?void 0:t.name})]});return o.useEffect(()=>{D()},[]),i?e.jsxs(e.Fragment,{children:[R,e.jsx(Z,{align:"middle",children:e.jsx(X,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(ce,{size:"large"})})})]}):a?e.jsxs(e.Fragment,{children:[R,e.jsx("div",{children:e.jsxs(Z,{align:"middle",children:[e.jsx(X,{span:8}),e.jsx(X,{span:8,children:e.jsx(ke,{title:t==null?void 0:t.name,bordered:!1,actions:[e.jsx(K,{onClick:()=>window.location.reload(),children:"Re-join"})],children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(t==null?void 0:t.description)??""}})})})]})})]}):e.jsxs(e.Fragment,{children:[R,p&&e.jsxs(Z,{align:"middle",children:[e.jsx(X,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(De,{direction:"vertical",children:e.jsx(ce,{size:"large"})})}),e.jsx(X,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(De,{direction:"vertical",children:"Preparing Virtual Conference Connection"})})]}),t&&e.jsx(dc,{domain:hc.conference_url,roomName:t.id.toString()+t.token,configOverwrite:{speakerStats:{disabled:!0,disableSearch:!1,order:["role","name","hasLeft"]},breakoutRooms:{hideAddRoomButton:!0,hideAutoAssignButton:!0,hideJoinRoomButton:!0},disableInviteFunctions:!0,hideConferenceSubject:!0,disablePolls:!0,autoKnockLobby:!0,enableLobbyChat:!0,disableModeratorIndicator:!1,disableReactionsModeration:!1,openSharedDocumentOnJoin:!1,startWithAudioMuted:!0,startScreenSharing:!1,enableEmailInStats:!1,enableWelcomePage:!1,readOnlyName:!0,notifications:[],screenshotCapture:{enabled:!0,mode:"recording"},prejoinConfig:{enabled:!0,hideDisplayName:!0,hideExtraJoinButtons:["no-audio","by-phone"]},p2p:{enabled:!0},e2ee:{labels:{labelTooltip:"Tooltip",description:"Description",label:"E2EE",warning:"Warning"},externallyManagedKey:!1}},interfaceConfigOverwrite:{DISABLE_JOIN_LEAVE_NOTIFICATIONS:!1},userInfo:{displayName:I==null?void 0:I.fullName,email:I==null?void 0:I.email},onApiReady:x=>{d(!1),x.addListener("videoConferenceJoined",()=>{}),x.addListener("videoConferenceLeft",()=>{}),x.addListener("participantJoined",w=>{}),x.addListener("participantLeft",w=>{}),x.addListener("onMessageReceived",w=>{}),x.addListener("onMessageSent",w=>{}),x.addListener("onChatMessage",w=>{}),x.addListener("onChatMessageReceived",w=>{}),x.addListener("onChatMessageSent",w=>{})},onReadyToClose:()=>{s(!0)},getIFrameRef:x=>{x.style.height="88vh"}})]})},mc=()=>e.jsxs(xe,{children:[e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx(Je,{to:"/oclass",children:"Home"})}),e.jsx(re.Item,{children:"Online Virtual Classes"})]}),e.jsx(xe,{sx:{mt:2},children:e.jsx(fc,{mode:"connected"})})]}),pc=()=>e.jsx(mc,{}),Tc=r=>{const{page:t}=r;return t==="VirtualClassSessionPage"?e.jsx(pc,{}):t==="PublicVirtualClassesPage"?e.jsx(sc,{}):t==="OclassOrdersPage"?e.jsx(ec,{}):t==="MyClassesPage"?e.jsx(Jl,{}):t==="OclassMarketplacePage"?e.jsx(Kl,{}):t==="ConnectedClassesPage"?e.jsx(Yl,{}):t==="ClassSessionPage"?e.jsx(Hl,{}):t==="ClassesPage"?e.jsx(ns,{}):t==="ClassesConnectPage"?e.jsx(ts,{}):t==="DarasaArchivesPage"?e.jsx(Xa,{}):e.jsx("div",{children:"Page not found ..."})};export{Tc as DarasaPages};
