import{ch as Je,j as e,r as s,aT as h,a1 as P,cm as te,av as K,g as q,_ as d,aW as A,aP as z,F as re,P as ae,a8 as pe,cn as se,iV as ye,c as Qe,af as We,aZ as ue,aX as Ze,aR as Ce,aU as O,cd as et,cl as oe,a_ as tt,aS as st}from"./index-d2f3cf4e.js";import{d as Le,C as Ee}from"./ckeditor-b7f2a906.js";import{n as Ue}from"./data_objects-4b3ea553.js";import{D as Oe}from"./index-b7937e5b.js";import{I as Pe}from"./index-8fc69063.js";import{G as it}from"./index.esm-c497cbd8.js";import{f as $}from"./data_objects-9047ddb9.js";import{F as ve}from"./files_component-df84af42.js";import{a as me,F as he}from"./file_item_component-6b9a7e7c.js";import{D as ge}from"./index-0ea254f5.js";import{G as le}from"./index-becb85fd.js";import{S as ne}from"./SearchOutlined-514d6ff6.js";import{L as fe}from"./index-fbadd9d9.js";import{T as Se}from"./index-deb72ae1.js";import{U as Ie}from"./index-b2f27870.js";import{M as ie}from"./index-8cafd14a.js";import{V as de,C as qe}from"./VideoCameraOutlined-95132067.js";import{C as je}from"./index-92213611.js";import{C as Re}from"./Collapse-efbbf9ce.js";import{S as rt}from"./SearchOutlined-2c72718c.js";import{F as at}from"./FolderAddOutlined-feb5582a.js";import{B as He}from"./BookOutlined-ae0a57a8.js";import{I as ze}from"./InfoCircleOutlined-df90e2a7.js";import{C as Me}from"./CloseOutlined-65d0011c.js";import{M as Ae}from"./MoreOutlined-883fb46e.js";import{P as nt}from"./PlusCircleFilled-947857bf.js";import{E as Ne}from"./ExclamationCircleOutlined-0bccd4c4.js";import"./index-7bc73925.js";import"./index-8fca3619.js";import"./localeData-c22e2049.js";import"./SwapRightOutlined-c4e52b1e.js";import"./SinglePicker-7cb02511.js";import"./UpOutlined-7082c42f.js";import"./InputNumber-2e418638.js";import"./index-cf3fe32a.js";import"./EditOutlined-401a1613.js";import"./transButton-791df134.js";import"./index-7aaa8a72.js";import"./SmileOutlined-bd9bf3e5.js";import"./index-b21966be.js";import"./defineProperty-cbd53c96.js";import"./pdf_document_viewer-08d45b2d.js";import"./SecurityScanOutlined-1a192b28.js";import"./index-6bcf30e7.js";import"./index-afd7b0da.js";import"./ActionButton-0cecadb1.js";import"./index-79d35d21.js";import"./index-b780317d.js";import"./Image-8c6b0181.js";import"./DialogWrap-5c49ee92.js";import"./ZoomOutOutlined-4d40b3b9.js";import"./index-ea174886.js";import"./fade-afeba492.js";import"./DeleteOutlined-25d4cbf7.js";import"./DeleteOutlined-25685737.js";import"./DownloadOutlined-b0d80632.js";import"./DownloadOutlined-6cd35f11.js";import"./SaveOutlined-bcf05d57.js";import"./Upload-02b54927.js";import"./InfoCircleFilled-1863c4af.js";import"./InfoCircleFilled-baaa675e.js";import"./Skeleton-3451dffa.js";import"./DotChartOutlined-f39c986e.js";import"./index-43705b62.js";const Fe=Je(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5v-3h3.56c.69 1.19 1.97 2 3.45 2s2.75-.81 3.45-2H19v3zm0-5h-4.99c0 1.1-.9 2-2 2s-2-.9-2-2H5V5h14v9z"}),"InboxOutlined"),ot=i=>{const[a,m]=s.useState(""),[y]=h.useForm(),g=async n=>{const{data:u}=await q.custom({url:"",method:"post",meta:{operation:"createDarasaTopic",variables:{darasaId:{value:parseInt(i.darasa),type:"Int",required:!0},title:{value:n.title,type:"String",required:!0},description:{value:n.description,type:"String",required:!0},startDate:{value:te(n.start_date).format("YYYY-MM-DD"),type:"String",required:!1},minutes:{value:n.minutes,type:"Int",required:!1}},fields:["success","message",{topic:Ue}]}}).catch(()=>(d.error("Error creating topic"),{data:null})).then(p=>p);u&&(u.success?(d.success(u.message),i.onFinish(u.topic),y.resetFields()):d.error(u.message))};return e.jsx(e.Fragment,{children:e.jsxs(h,{layout:"vertical",form:y,onFinish:n=>{n.description=a,g(n)},onReset:()=>{m("")},requiredMark:!1,children:[e.jsx(h.Item,{name:"title",label:"Topic Title",rules:[{required:!0,type:"string",message:"Enter Topic Title ..."}],children:e.jsx(P,{size:"large",placeholder:"Enter Topic Title ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(Le.CKEditor,{editor:Ee,data:a,onReady:n=>{n.editing.view.change(u=>{u.setStyle("min-height","150px",n.editing.view.document.getRoot())})},onChange:(n,u)=>{const p=u.getData();m(p)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(h.Item,{label:"Start Date",name:"start_date",rules:[{required:!!y.getFieldValue("minutes"),type:"object",message:"Please select Start Date"}],children:e.jsx(Oe,{size:"large",style:{width:"50%"},disabledDate:n=>n.add(1,"day")<te().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(h.Item,{label:"Total Duration (Minutes)",name:"minutes",rules:[{required:!1,type:"number",message:"Please enter total duration in minutes"}],children:e.jsx(Pe,{style:{width:"35%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},lt=i=>{const[a,m]=s.useState(""),[y]=h.useForm(),g=async n=>{const{data:u}=await q.custom({url:"",method:"post",meta:{operation:"createDarasaSubtopic",variables:{topicId:{value:parseInt(i.topic.id),type:"Int",required:!0},title:{value:n.title,type:"String",required:!0},description:{value:n.description,type:"String",required:!0},startDate:{value:te(n.start_date).format("YYYY-MM-DD"),type:"String",required:!1},minutes:{value:n.minutes,type:"Int",required:!1}},fields:["success","message",{topic:Ue}]}}).catch(()=>(d.error("Error creating topic"),{data:null})).then(p=>p);u&&(u.success?(d.success(u.message),i.onFinish(u.topic),y.resetFields()):d.error(u.message))};return e.jsx(e.Fragment,{children:e.jsxs(h,{layout:"vertical",form:y,onFinish:n=>{n.description=a,g(n)},requiredMark:!1,children:[e.jsx(h.Item,{name:"title",label:"Topic Title",rules:[{required:!0,type:"string"}],children:e.jsx(P,{size:"large",placeholder:"Enter Topic Title ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(Le.CKEditor,{editor:Ee,data:a,onReady:n=>{n.editing.view.change(u=>{u.setStyle("min-height","150px",n.editing.view.document.getRoot())})},onChange:(n,u)=>{const p=u.getData();m(p)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(h.Item,{label:"Start Date",name:"start_date",rules:[{required:!1,type:"object",message:"Please select Start Date"}],children:e.jsx(Oe,{size:"large",style:{width:"50%"},disabledDate:n=>n.add(1,"day")<te().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(h.Item,{label:"Total Duration (Minutes)",name:"minutes",rules:[{required:!1,type:"number",message:"Enter Total Duration (Minutes)"}],children:e.jsx(Pe,{style:{width:"50%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})};function ce(i){return it({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h8zM4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4z"}},{tag:"path",attr:{d:"M8 4.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5zM8 6a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 3a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-3.5 1.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"}}]})(i)}const dt=i=>{const[a,m]=s.useState([]),[y,g]=s.useState([]),[n,u]=s.useState(!0),[p,b]=s.useState(1),[v,N]=s.useState(25),[L,M]=s.useState(0),[R,I]=s.useState(0),[k,x]=s.useState(!1),[V,c]=s.useState(!1),[o,S]=s.useState(),[F]=h.useForm(),H=!le.useBreakpoint().lg,J=t=>{const l=a.map(f=>(f.document.id===t.id&&(f.document.imageVisible=!0),f.document));g(l)},_=t=>{const l=a.map(f=>(f.document.id===t.id&&(f.document.imageVisible=!1),f.document));g(l)},ee=t=>{S(t),c(!0)},w=async(t,l="",f=25)=>{var U;u(!0);const{data:D}=await q.custom({url:"",method:"get",meta:{operation:"darasaTopicDocuments",variables:{page:{value:t,type:"Int",required:!0},key:{value:l,type:"String",required:!1},topicId:{value:parseInt((U=i.topic)==null?void 0:U.id.toString()),type:"Int",required:!0},documentType:{value:"Document",type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","documentType",{document:$}]}]}}).catch(()=>(d.error("Error fetching Topics"),{data:null})).then(Z=>Z);D&&(M(D.total),I(D.pages),b(D.page),x(D.hasNext),m(D.results)),u(!1)},Q=[{key:"1",label:"Upload Local Files/Documents",children:e.jsx(ut,{topic:i.topic,onUpload:()=>{w(1,"",25)}})},{key:"2",label:"Link from Odrive",children:e.jsx(pt,{topic:i.topic,onUpload:()=>{w(1,"",25)}})}],Y=t=>{console.log(t)},W=async t=>{const{data:l}=await q.custom({url:"",method:"post",meta:{operation:"deleteDarasaTopicDocument",variables:{id:{value:parseInt(t.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error deleting file"),{data:null})).then(f=>f);l&&(l.success?(d.success(l.message),m(a.filter(f=>f.id!==t))):d.error(l.message),a.length===1&&w(1,"",25)),ie.destroyAll()},B=t=>t.documentType==="Video"?e.jsx(de,{}):t.documentType==="Audio"?e.jsx(ce,{}):e.jsx(ye,{});return s.useEffect(()=>{console.log("props",i),w(1,"",25)},[i.topic]),e.jsxs(e.Fragment,{children:[e.jsxs(A,{children:[e.jsxs(z,{span:12,style:{paddingLeft:10,paddingRight:10},children:[e.jsx("div",{style:{paddingTop:10,paddingBottom:0},children:e.jsx(A,{children:e.jsx(z,{span:24,children:e.jsx(h,{layout:"vertical",form:F,onFinish:t=>{w(1,t.key,v)},children:e.jsx(h.Item,{name:"key",children:e.jsx(P,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(ne,{}),autoComplete:"off",allowClear:!0})})})})})}),e.jsx("div",{style:{maxHeight:"69vh",overflowY:"auto",overflowX:"hidden"},children:e.jsx(fe,{loading:n,itemLayout:"horizontal",dataSource:a,renderItem:t=>e.jsx(me,{item:t.document,showDrive:!1,min:!0,compact:!0,compactIcon:B(t),handleDelete:l=>{W(t.id)},handleMakeImageNotVisible:_,handleMakeImageVisible:J,handleShowFileInfoDrawer:ee})})}),!n&&a.length>0&&e.jsx("div",{style:{marginTop:10},children:e.jsx(re,{justify:"center",children:e.jsx(ae,{current:p,total:L,pageSize:v,onChange:(t,l)=>{w(t,"",l)},showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["25","50","100"],onShowSizeChange:(t,l)=>{w(t,"",l)}})})})]}),e.jsx(z,{span:12,style:{paddingLeft:10,paddingRight:10},children:e.jsx(Se,{defaultActiveKey:"1",items:Q,onChange:Y})})]}),e.jsx(ge,{title:"File Informations",anchor:"right",width:H?"100vw":"35vw",onClose:t=>c(t),open:V,noOverFlow:!0,children:e.jsx(he,{id:o==null?void 0:o.id})})]})},ct=i=>Array.isArray(i)?i:i==null?void 0:i.fileList,ut=i=>{const[a,m]=s.useState(!1),[y,g]=s.useState(!1),[n]=h.useForm(),u=async p=>{m(!0),g(!1),console.log(p.file);const{data:b}=await q.custom({url:"",method:"post",meta:{operation:"uploadDarasaTopicDocument",variables:{topicId:{value:parseInt(i.topic.id.toString()),type:"Int",required:!0},files:{value:p.file,type:"[Upload]",required:!1},documentType:{value:"Document",type:"String",required:!1}},fields:["success","message",{documents:["id",{document:["id","title","file","icon"]}]}]}}).catch(v=>(console.log(v),d.error("Error occured while uploading file(s)"),{data:null})).then(v=>v);b&&(b.success?(d.success(b.message),g(!0),n.resetFields(),i.onUpload()):d.error(b.message)),m(!1)};return e.jsx("div",{style:{maxHeight:"72vh",overflowY:"auto",overflowX:"hidden"},children:e.jsx(pe,{spinning:a,children:e.jsxs(h,{layout:"vertical",form:n,onFinish:p=>{u(p)},requiredMark:!0,autoComplete:"off",children:[e.jsx(h.Item,{label:"Pick Files ("+se.supported_document_extensions.join()+")",children:e.jsx(h.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:ct,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload some files."}],children:e.jsxs(Ie.Dragger,{name:"file",accept:se.supported_document_extensions.join(),multiple:!0,beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(Fe,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",loading:a,children:"Upload"})})]})})})},pt=i=>{const[a,m]=s.useState([]),[y,g]=s.useState(!0),[n,u]=s.useState(1),[p,b]=s.useState(25),[v,N]=s.useState(0),[L,M]=s.useState(0),[R,I]=s.useState(!1),[k]=h.useForm(),x=async(c,o="",S=25)=>{g(!0);const{data:F}=await q.custom({url:"",method:"get",meta:{operation:"filesToAddDarasaTopic",variables:{page:{value:c,type:"Int",required:!0},key:{value:o,type:"String",required:!1},pageSize:{value:S,type:"Int",required:!0},topicId:{value:parseInt(i.topic.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:$}]}}).catch(()=>(d.error("Error getting files"),{data:null})).then(E=>E);F&&(N(F.total),M(F.pages),u(F.page),I(F.hasNext),m(F.results)),g(!1)},V=async c=>{const{data:o}=await q.custom({url:"",method:"post",meta:{operation:"addDriveFileToDarasaTopic",variables:{fileId:{value:parseInt(c.toString()),type:"Int",required:!0},topicId:{value:parseInt(i.topic.id.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(S=>(console.error(S),d.error("Error deleting file"),{data:null})).then(S=>S);o&&(o.success?(d.success(o.message),m(a.filter(S=>S.id!==c)),i.onUpload()):d.error(o.message))};return s.useEffect(()=>{x(1,"",25)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{paddingTop:10,paddingBottom:0},children:e.jsx(A,{children:e.jsx(z,{span:24,children:e.jsx(h,{layout:"vertical",form:k,onFinish:c=>{x(1,c.key,p)},children:e.jsx(h.Item,{name:"key",children:e.jsx(P,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(ne,{}),autoComplete:"off",allowClear:!0})})})})})}),e.jsx("div",{style:{maxHeight:"62vh",overflowY:"auto",overflowX:"hidden"},children:e.jsx(ve,{showDrive:!1,loading:y,data:a,min:!1,actionMenues:[{action:V,title:"Add"}],onRefresh:()=>{alert("refresh"),x(1,"",p)},onDelete:c=>{m(a.filter(o=>o.id!==c)),a.length===1&&x(1,"",p)}})}),!y&&a.length>0&&e.jsx("div",{children:e.jsx(re,{justify:"center",children:e.jsx(ae,{current:n,total:v,pageSize:p,onChange:(c,o)=>{x(c,"",o)},showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["25","50","100"],onShowSizeChange:(c,o)=>{x(c,"",o)}})})})]})},mt=i=>{const[a,m]=s.useState([]),[y,g]=s.useState([]),[n,u]=s.useState(!0),[p,b]=s.useState(1),[v,N]=s.useState(25),[L,M]=s.useState(0),[R,I]=s.useState(0),[k,x]=s.useState(!1),[V,c]=s.useState(!1),[o,S]=s.useState(),[F]=h.useForm(),H=!le.useBreakpoint().lg,J=t=>{const l=a.map(f=>(f.document.id===t.id&&(f.document.imageVisible=!0),f.document));g(l)},_=t=>{const l=a.map(f=>(f.document.id===t.id&&(f.document.imageVisible=!1),f.document));g(l)},ee=t=>{S(t),c(!0)},w=async(t,l="",f=25)=>{var U;u(!0);const{data:D}=await q.custom({url:"",method:"get",meta:{operation:"darasaTopicDocuments",variables:{page:{value:t,type:"Int",required:!0},key:{value:l,type:"String",required:!1},topicId:{value:parseInt((U=i.topic)==null?void 0:U.id.toString()),type:"Int",required:!0},documentType:{value:"Video",type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","documentType",{document:$}]}]}}).catch(()=>(d.error("Error fetching Topics"),{data:null})).then(Z=>Z);D&&(M(D.total),I(D.pages),b(D.page),x(D.hasNext),m(D.results)),u(!1)},Q=[{key:"1",label:"Upload Local Video Files",children:e.jsx(gt,{topic:i.topic,onUpload:()=>{w(1,"",25)}})},{key:"2",label:"Link Video Files from Odrive",children:e.jsx(ft,{topic:i.topic,onUpload:()=>{w(1,"",25)}})}],Y=t=>{console.log(t)},W=async t=>{const{data:l}=await q.custom({url:"",method:"post",meta:{operation:"deleteDarasaTopicDocument",variables:{id:{value:parseInt(t.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error deleting file"),{data:null})).then(f=>f);l&&(l.success?(d.success(l.message),m(a.filter(f=>f.id!==t))):d.error(l.message),a.length===1&&w(1,"",25)),ie.destroyAll()},B=t=>t.documentType==="Video"?e.jsx(de,{}):t.documentType==="Audio"?e.jsx(ce,{}):e.jsx(ye,{});return s.useEffect(()=>{console.log("props",i),w(1,"",25)},[i.topic]),e.jsxs(e.Fragment,{children:[e.jsxs(A,{children:[e.jsxs(z,{span:12,style:{paddingLeft:10,paddingRight:10},children:[e.jsx("div",{style:{paddingTop:10,paddingBottom:0},children:e.jsx(A,{children:e.jsx(z,{span:24,children:e.jsx(h,{layout:"vertical",form:F,onFinish:t=>{w(1,t.key,v)},children:e.jsx(h.Item,{name:"key",children:e.jsx(P,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(ne,{}),autoComplete:"off",allowClear:!0})})})})})}),e.jsx("div",{style:{maxHeight:"69vh",overflowY:"auto",overflowX:"hidden"},children:e.jsx(fe,{loading:n,itemLayout:"horizontal",dataSource:a,renderItem:t=>e.jsx(me,{item:t.document,showDrive:!1,min:!0,compact:!0,compactIcon:B(t),handleDelete:l=>{W(t.id)},handleMakeImageNotVisible:_,handleMakeImageVisible:J,handleShowFileInfoDrawer:ee})})}),!n&&a.length>0&&e.jsx("div",{style:{marginTop:10},children:e.jsx(re,{justify:"center",children:e.jsx(ae,{current:p,total:L,pageSize:v,onChange:(t,l)=>{w(t,"",l)},showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["25","50","100"],onShowSizeChange:(t,l)=>{w(t,"",l)}})})})]}),e.jsx(z,{span:12,style:{paddingLeft:10,paddingRight:10},children:e.jsx(Se,{defaultActiveKey:"1",items:Q,onChange:Y})})]}),e.jsx(ge,{title:"File Informations",anchor:"right",width:H?"100vw":"35vw",onClose:t=>c(t),open:V,noOverFlow:!0,children:e.jsx(he,{id:o==null?void 0:o.id})})]})},ht=i=>Array.isArray(i)?i:i==null?void 0:i.fileList,gt=i=>{const[a,m]=s.useState(!1),[y,g]=s.useState(!1),[n]=h.useForm(),u=async p=>{m(!0),g(!1),console.log(p.file);const{data:b}=await q.custom({url:"",method:"post",meta:{operation:"uploadDarasaTopicDocument",variables:{topicId:{value:parseInt(i.topic.id.toString()),type:"Int",required:!0},files:{value:p.file,type:"[Upload]",required:!1},documentType:{value:"Video",type:"String",required:!1}},fields:["success","message",{documents:["id",{document:["id","title","file","icon"]}]}]}}).catch(v=>(console.log(v),d.error("Error occured while uploading file(s)"),{data:null})).then(v=>v);b&&(b.success?(d.success(b.message),g(!0),n.resetFields(),i.onUpload()):d.error(b.message)),m(!1)};return e.jsx("div",{style:{maxHeight:"72vh",overflowY:"auto",overflowX:"hidden"},children:e.jsx(pe,{spinning:a,children:e.jsxs(h,{layout:"vertical",form:n,onFinish:p=>{u(p)},requiredMark:!0,autoComplete:"off",children:[e.jsx(h.Item,{label:"Pick Files ("+se.supported_video_extensions.join()+")",children:e.jsx(h.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:ht,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload some files."}],children:e.jsxs(Ie.Dragger,{name:"file",accept:se.supported_video_extensions.join(),multiple:!0,beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(Fe,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",loading:a,children:"Upload"})})]})})})},ft=i=>{const[a,m]=s.useState([]),[y,g]=s.useState(!0),[n,u]=s.useState(1),[p,b]=s.useState(25),[v,N]=s.useState(0),[L,M]=s.useState(0),[R,I]=s.useState(!1),[k]=h.useForm(),x=async(c,o="",S=25)=>{g(!0);const{data:F}=await q.custom({url:"",method:"get",meta:{operation:"videosFilesToAddDarasaTopic",variables:{page:{value:c,type:"Int",required:!0},key:{value:o,type:"String",required:!1},pageSize:{value:S,type:"Int",required:!0},topicId:{value:parseInt(i.topic.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:$}]}}).catch(()=>(d.error("Error getting files"),{data:null})).then(E=>E);F&&(N(F.total),M(F.pages),u(F.page),I(F.hasNext),m(F.results)),g(!1)},V=async c=>{const{data:o}=await q.custom({url:"",method:"post",meta:{operation:"addDriveFileToDarasaTopic",variables:{fileId:{value:parseInt(c.toString()),type:"Int",required:!0},topicId:{value:parseInt(i.topic.id.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(S=>(console.error(S),d.error("Error deleting file"),{data:null})).then(S=>S);o&&(o.success?(d.success(o.message),m(a.filter(S=>S.id!==c)),i.onUpload()):d.error(o.message))};return s.useEffect(()=>{x(1,"",25)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{paddingTop:10,paddingBottom:0},children:e.jsx(A,{children:e.jsx(z,{span:24,children:e.jsx(h,{layout:"vertical",form:k,onFinish:c=>{x(1,c.key,p)},children:e.jsx(h.Item,{name:"key",children:e.jsx(P,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(ne,{}),autoComplete:"off",allowClear:!0})})})})})}),e.jsx("div",{style:{maxHeight:"62vh",overflowY:"auto",overflowX:"hidden"},children:e.jsx(ve,{showDrive:!1,loading:y,data:a,min:!1,actionMenues:[{action:V,title:"Add"}],onRefresh:()=>{alert("refresh"),x(1,"",p)},onDelete:c=>{m(a.filter(o=>o.id!==c)),a.length===1&&x(1,"",p)}})}),!y&&a.length>0&&e.jsx("div",{children:e.jsx(re,{justify:"center",children:e.jsx(ae,{current:n,total:v,pageSize:p,onChange:(c,o)=>{x(c,"",o)},showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["25","50","100"],onShowSizeChange:(c,o)=>{x(c,"",o)}})})})]})},xt=i=>{const[a,m]=s.useState([]),[y,g]=s.useState([]),[n,u]=s.useState(!0),[p,b]=s.useState(1),[v,N]=s.useState(25),[L,M]=s.useState(0),[R,I]=s.useState(0),[k,x]=s.useState(!1),[V,c]=s.useState(!1),[o,S]=s.useState(),[F]=h.useForm(),H=!le.useBreakpoint().lg,J=t=>{const l=a.map(f=>(f.document.id===t.id&&(f.document.imageVisible=!0),f.document));g(l)},_=t=>{const l=a.map(f=>(f.document.id===t.id&&(f.document.imageVisible=!1),f.document));g(l)},ee=t=>{S(t),c(!0)},w=async(t,l="",f=25)=>{var U;u(!0);const{data:D}=await q.custom({url:"",method:"get",meta:{operation:"darasaTopicDocuments",variables:{page:{value:t,type:"Int",required:!0},key:{value:l,type:"String",required:!1},topicId:{value:parseInt((U=i.topic)==null?void 0:U.id.toString()),type:"Int",required:!0},documentType:{value:"Audio",type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","documentType",{document:$}]}]}}).catch(()=>(d.error("Error fetching Topics"),{data:null})).then(Z=>Z);D&&(M(D.total),I(D.pages),b(D.page),x(D.hasNext),m(D.results)),u(!1)},Q=[{key:"1",label:"Upload Local Audio Files",children:e.jsx(yt,{topic:i.topic,onUpload:()=>{w(1,"",25)}})},{key:"2",label:"Link Audio Files from Odrive",children:e.jsx(vt,{topic:i.topic,onUpload:()=>{w(1,"",25)}})}],Y=t=>{console.log(t)},W=async t=>{const{data:l}=await q.custom({url:"",method:"post",meta:{operation:"deleteDarasaTopicDocument",variables:{id:{value:parseInt(t.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error deleting file"),{data:null})).then(f=>f);l&&(l.success?(d.success(l.message),m(a.filter(f=>f.id!==t))):d.error(l.message),a.length===1&&w(1,"",25)),ie.destroyAll()},B=t=>t.documentType==="Video"?e.jsx(de,{}):t.documentType==="Audio"?e.jsx(ce,{}):e.jsx(ye,{});return s.useEffect(()=>{console.log("props",i),w(1,"",25)},[i.topic]),e.jsxs(e.Fragment,{children:[e.jsxs(A,{children:[e.jsxs(z,{span:12,style:{paddingLeft:10,paddingRight:10},children:[e.jsx("div",{style:{paddingTop:10,paddingBottom:0},children:e.jsx(A,{children:e.jsx(z,{span:24,children:e.jsx(h,{layout:"vertical",form:F,onFinish:t=>{w(1,t.key,v)},children:e.jsx(h.Item,{name:"key",children:e.jsx(P,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(ne,{}),autoComplete:"off",allowClear:!0})})})})})}),e.jsx("div",{style:{maxHeight:"69vh",overflowY:"auto",overflowX:"hidden"},children:e.jsx(fe,{loading:n,itemLayout:"horizontal",dataSource:a,renderItem:t=>e.jsx(me,{item:t.document,showDrive:!1,min:!0,compact:!0,compactIcon:B(t),handleDelete:l=>{W(t.id)},handleMakeImageNotVisible:_,handleMakeImageVisible:J,handleShowFileInfoDrawer:ee})})}),!n&&a.length>0&&e.jsx("div",{style:{marginTop:10},children:e.jsx(re,{justify:"center",children:e.jsx(ae,{current:p,total:L,pageSize:v,onChange:(t,l)=>{w(t,"",l)},showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["25","50","100"],onShowSizeChange:(t,l)=>{w(t,"",l)}})})})]}),e.jsx(z,{span:12,style:{paddingLeft:10,paddingRight:10},children:e.jsx(Se,{defaultActiveKey:"1",items:Q,onChange:Y})})]}),e.jsx(ge,{title:"File Informations",anchor:"right",width:H?"100vw":"35vw",onClose:t=>c(t),open:V,noOverFlow:!0,children:e.jsx(he,{id:o==null?void 0:o.id})})]})},jt=i=>Array.isArray(i)?i:i==null?void 0:i.fileList,yt=i=>{const[a,m]=s.useState(!1),[y,g]=s.useState(!1),[n]=h.useForm(),u=async p=>{m(!0),g(!1),console.log(p.file);const{data:b}=await q.custom({url:"",method:"post",meta:{operation:"uploadDarasaTopicDocument",variables:{topicId:{value:parseInt(i.topic.id.toString()),type:"Int",required:!0},files:{value:p.file,type:"[Upload]",required:!1},documentType:{value:"Audio",type:"String",required:!1}},fields:["success","message",{documents:["id",{document:["id","title","file","icon"]}]}]}}).catch(v=>(console.log(v),d.error("Error occured while uploading file(s)"),{data:null})).then(v=>v);b&&(b.success?(d.success(b.message),g(!0),n.resetFields(),i.onUpload()):d.error(b.message)),m(!1)};return e.jsx("div",{style:{maxHeight:"72vh",overflowY:"auto",overflowX:"hidden"},children:e.jsx(pe,{spinning:a,children:e.jsxs(h,{layout:"vertical",form:n,onFinish:p=>{u(p)},requiredMark:!0,autoComplete:"off",children:[e.jsx(h.Item,{label:"Pick Files ("+se.supported_audio_extensions.join()+")",children:e.jsx(h.Item,{name:"file",valuePropName:"fileList",getValueFromEvent:jt,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload some files."}],children:e.jsxs(Ie.Dragger,{name:"file",accept:se.supported_audio_extensions.join(),multiple:!0,beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(Fe,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",loading:a,children:"Upload"})})]})})})},vt=i=>{const[a,m]=s.useState([]),[y,g]=s.useState(!0),[n,u]=s.useState(1),[p,b]=s.useState(25),[v,N]=s.useState(0),[L,M]=s.useState(0),[R,I]=s.useState(!1),[k]=h.useForm(),x=async(c,o="",S=25)=>{g(!0);const{data:F}=await q.custom({url:"",method:"get",meta:{operation:"audiosFilesToAddDarasaTopic",variables:{page:{value:c,type:"Int",required:!0},key:{value:o,type:"String",required:!1},pageSize:{value:S,type:"Int",required:!0},topicId:{value:parseInt(i.topic.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:$}]}}).catch(()=>(d.error("Error getting files"),{data:null})).then(E=>E);F&&(N(F.total),M(F.pages),u(F.page),I(F.hasNext),m(F.results)),g(!1)},V=async c=>{const{data:o}=await q.custom({url:"",method:"post",meta:{operation:"addDriveFileToDarasaTopic",variables:{fileId:{value:parseInt(c.toString()),type:"Int",required:!0},topicId:{value:parseInt(i.topic.id.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(S=>(console.error(S),d.error("Error deleting file"),{data:null})).then(S=>S);o&&(o.success?(d.success(o.message),m(a.filter(S=>S.id!==c)),i.onUpload()):d.error(o.message))};return s.useEffect(()=>{x(1,"",25)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{paddingTop:10,paddingBottom:0},children:e.jsx(A,{children:e.jsx(z,{span:24,children:e.jsx(h,{layout:"vertical",form:k,onFinish:c=>{x(1,c.key,p)},children:e.jsx(h.Item,{name:"key",children:e.jsx(P,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(ne,{}),autoComplete:"off",allowClear:!0})})})})})}),e.jsx("div",{style:{maxHeight:"62vh",overflowY:"auto",overflowX:"hidden"},children:e.jsx(ve,{showDrive:!1,loading:y,data:a,min:!1,actionMenues:[{action:V,title:"Add"}],onRefresh:()=>{alert("refresh"),x(1,"",p)},onDelete:c=>{m(a.filter(o=>o.id!==c)),a.length===1&&x(1,"",p)}})}),!y&&a.length>0&&e.jsx("div",{children:e.jsx(re,{justify:"center",children:e.jsx(ae,{current:n,total:v,pageSize:p,onChange:(c,o)=>{x(c,"",o)},showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["25","50","100"],onShowSizeChange:(c,o)=>{x(c,"",o)}})})})]})},{TreeNode:Ve,DirectoryTree:St}=tt,{Panel:It}=Re,Ns=i=>{const[a,m]=s.useState([]),[y,g]=s.useState([]),[n,u]=s.useState(),[p,b]=s.useState(!0),[v,N]=s.useState(1),[L,M]=s.useState(0),[R,I]=s.useState(0),[k,x]=s.useState(!0),[V]=h.useForm(),[c,o]=s.useState(void 0);Qe();const[S,F]=s.useState(!1),[E,H]=s.useState(!1),[J,_]=s.useState(!1),w=!le.useBreakpoint().lg,[Q,Y]=s.useState(!1),[W,B]=s.useState(!1),t=()=>{Y(!0)},l=async(r,j="",T=!1)=>{b(!0);const{data:C}=await q.custom({url:"",method:"get",meta:{operation:"darasaTopics",variables:{page:{value:r,type:"Int",required:!0},key:{value:j,type:"String",required:!1},id:{value:parseInt(i.id===void 0?"0":i.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","description",{darasa:["id"]},"isSubtopic",{topic:["id","title","description","startDate","endDate","minutes","canManage","canDelete","canEdit","isActive","created","updated"]},"startDate","endDate","minutes",{author:["id"]},{subtopics:["id","title","description","startDate","endDate","isSubtopic","minutes",{documents:["id","documentType",{document:$}]},"canManage","canDelete","canEdit","isActive","created","updated"]},{documents:["id","documentType",{document:$}]},"canManage","canDelete","canEdit","isActive","created","updated"]}]}}).catch(G=>(console.error(G),d.error("Error fetching Topics"),{data:null})).then(G=>G);C&&(I(C.total),M(C.pages),N(C.page),x(C.hasNext),m(C.results),g(C.results)),b(!1)},f=async r=>{const{data:j}=await q.custom({url:"",method:"post",meta:{operation:"deleteDarasaTopic",variables:{id:{value:r,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error removing class Topic"),{data:null})).then(T=>T);j&&(j.success?(d.success(j.message),m(a.filter(T=>T.id!==r)),g(y.filter(T=>T.id!==r))):d.error(j.message))},D=async(r,j)=>{const{data:T}=await q.custom({url:"",method:"post",meta:{operation:"deleteDarasaTopic",variables:{id:{value:r,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error removing class Topic"),{data:null})).then(C=>C);if(T)if(T.success){d.success(T.message);const C=[...a],G=C.findIndex(X=>X.id===j),De=C[G].subtopics.findIndex(X=>X.id===r);De!==-1&&C[G].subtopics.splice(De,1),m(C);const ke=[...y],xe=C.findIndex(X=>X.id===j);if(xe!==-1){const X=C[xe].subtopics.findIndex($e=>$e.id===r);X!==-1&&ke[xe].subtopics.splice(X,1),g(ke)}}else d.error(T.message)},U=r=>{ie.confirm({title:"Deleting Topic",icon:e.jsx(Ne,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>f(r)})},Z=(r,j)=>{ie.confirm({title:"Deleting Subtopic",icon:e.jsx(Ne,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>D(r,j)})},_e=r=>{u(r),F(!0)},Ye=r=>{u(r),H(!0)},Be=r=>{u(r),_(!0)},we=r=>{u(r),B(!0)},Ge=async r=>{m([r,...a]),y.length===a.length&&g([r,...y])},Xe=async r=>{m(a.map(j=>j.id===r.id?r:j)),g(y.map(j=>j.id===r.id?r:j))},be=r=>{const j=a.filter(T=>parseInt(T.id.toString())===parseInt(r));g(j)},Te=()=>e.jsx(st,{description:"No topic Registered ..."}),Ke=r=>r.subtopics.map(j=>e.jsx(It,{extra:[e.jsx("div",{style:{right:0,zIndex:99999},children:e.jsx(Ce,{trigger:["click"],overlay:e.jsxs(O,{children:[e.jsx(O.Item,{icon:e.jsx(ze,{}),onClick:()=>d("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(O.Item,{icon:e.jsx(Me,{}),onClick:()=>Z(j.id,r.id),disabled:!i.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:T=>T.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})],header:e.jsx("div",{children:e.jsxs("span",{children:[j.title,j.minutes>0&&e.jsxs(ue,{color:"green",children:[j.minutes," ",j.minutes>1?"Mins":"Min"]})]})}),children:e.jsx("div",{dangerouslySetInnerHTML:{__html:j.description}})},j.id));return s.useEffect(()=>{l(v)},[]),e.jsxs(e.Fragment,{children:[e.jsx(pe,{spinning:p,children:e.jsxs(A,{children:[e.jsx(z,{span:6,children:e.jsxs(je,{style:{marginRight:5},children:[a.length===0&&e.jsx(e.Fragment,{children:Te()}),e.jsx(St,{multiple:!0,defaultExpandedKeys:[],onExpand:(r,j)=>{const T=j.node.key;if(T&&T.toString().includes("topic")){o(T);const C=T.toString().split("-")[1];be(C)}else if(!(T&&T.toString().includes("sub")))g(a);else{const C=T.toString().split(":")[0];o(C);const G=C.toString().split("-")[1];be(G)}},children:a.map((r,j)=>e.jsx(Ve,{icon:e.jsx(qe,{}),title:r.title,children:r.subtopics.map(T=>e.jsx(Ve,{icon:e.jsx(qe,{}),title:T.title},"topic-"+r.id+":sub-"+T.id))},"topic-"+r.id))})]})}),e.jsxs(z,{span:18,children:[e.jsxs(A,{children:[e.jsx(z,{span:12,children:e.jsx(h,{layout:"vertical",form:V,onFinish:r=>{N(0),l(0,r.key,!0)},children:e.jsx(h.Item,{name:"key",children:e.jsx(P,{size:"large",placeholder:"Search Topics(s)...",prefix:e.jsx(rt,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(z,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{icon:e.jsx(at,{}),size:"large",onClick:t,disabled:!i.canManage,children:"Add Topic"})})]}),e.jsxs("div",{id:"scrollableDiv",children:[y.length>0?e.jsx(A,{align:"top",children:y.map((r,j)=>e.jsx(z,{span:24,style:{marginTop:j===0?0:10},children:e.jsxs(je,{hoverable:r.isActive,style:{marginRight:10},title:e.jsxs("div",{children:[e.jsxs("span",{children:[e.jsx("span",{style:{fontSize:22},children:r.title}),r.minutes>0&&e.jsx("span",{style:{marginLeft:10},children:e.jsx(We,{color:"green",title:e.jsxs(e.Fragment,{children:[e.jsxs(ue,{children:["Starts:"," ",te(r.startDate).format("DD/MM/YYYY hh:mm a")]}),e.jsxs(ue,{children:["Ends:"," ",te(r.endDate).format("DD/MM/YYYY hh:mm a")]})]}),children:e.jsxs(ue,{color:"green",children:[r.minutes," ",r.minutes>1?"Mins":"Min"]})})})]}),e.jsx(Ze,{style:{right:0,position:"absolute"},children:e.jsx(Ce,{trigger:["click"],overlay:e.jsxs(O,{children:[e.jsx(O.Item,{icon:e.jsx(et,{}),disabled:!r.canManage,children:e.jsx("a",{onClick:()=>we(r),children:"Add Subtopics"})}),e.jsx(O.Item,{icon:e.jsx(He,{}),disabled:!r.canManage,children:e.jsx("a",{onClick:()=>_e(r),children:"Add Documents"})}),e.jsx(O.Item,{icon:e.jsx(de,{}),disabled:!r.canManage,children:e.jsx("a",{onClick:()=>Ye(r),children:"Add Videos"})}),e.jsx(O.Item,{icon:e.jsx(ce,{}),disabled:!r.canManage,children:e.jsx("a",{onClick:()=>Be(r),children:"Add Audios"})}),e.jsx(O.Item,{icon:e.jsx(ze,{}),onClick:()=>d("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(O.Item,{icon:e.jsx(Me,{}),onClick:()=>U(r.id),disabled:!i.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:T=>T.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})]}),children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:r.description}}),e.jsx("div",{children:e.jsx(Ft,{documents:r.documents})}),r.subtopics.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(A,{children:e.jsxs(z,{span:24,style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:20,fontWeight:"bolder"},children:"Subtopics"}),r.canManage&&e.jsx(K,{disabled:!r.canManage,icon:e.jsx(nt,{}),onClick:()=>we(r),children:"Add Subtopic"})]})}),e.jsx(Re,{defaultActiveKey:["1"],accordion:!0,children:Ke(r)})]})]})}))}):e.jsx(je,{children:e.jsx(A,{justify:"center",children:e.jsx(z,{children:Te()})})}),!p&&k&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{onClick:()=>l(v+1),disabled:!k,children:"Load More"})})]})]})]})}),e.jsx(oe,{title:"Adding Topic Documents",open:S,onClose:r=>F(r),width:w?"100vw":"80vw",children:e.jsx(dt,{topic:n})}),e.jsx(oe,{title:"Adding Topic Videos",open:E,onClose:r=>H(r),width:w?"100vw":"80vw",children:e.jsx(mt,{topic:n})}),e.jsx(oe,{title:"Adding Topic Audios",open:J,onClose:r=>_(r),width:w?"100vw":"80vw",children:e.jsx(xt,{topic:n})}),e.jsx(oe,{title:"Adding Topics",open:Q,onClose:r=>Y(r),width:w?"100vw":"50vw",children:e.jsx(ot,{darasa:i.id,onFinish:Ge})}),e.jsx(oe,{title:"Add Subtopics to "+(n==null?void 0:n.title),open:W,onClose:r=>B(r),width:w?"100vw":"50vw",children:e.jsx(lt,{topic:n,onFinish:Xe})})]})},Ft=({documents:i})=>{const[a,m]=s.useState([]),[y,g]=s.useState(!1),[n,u]=s.useState(),b=!le.useBreakpoint().lg,v=I=>{const k=i.map(x=>(x.document.id===I.id&&(x.document.imageVisible=!0),x.document));m(k)},N=I=>{const k=i.map(x=>(x.document.id===I.id&&(x.document.imageVisible=!1),x.document));m(k)},L=I=>{u(I),g(!0)},M=async I=>{const{data:k}=await q.custom({url:"",method:"post",meta:{operation:"deleteDarasaTopicDocument",variables:{id:{value:parseInt(I.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(d.error("Error deleting file"),{data:null})).then(x=>x);k&&(k.success?d.success(k.message):d.error(k.message)),ie.destroyAll()},R=I=>I.documentType==="Video"?e.jsx(de,{}):I.documentType==="Audio"?e.jsx(ce,{}):e.jsx(He,{});return i.length==0?e.jsx(e.Fragment,{}):e.jsxs("div",{style:{marginBottom:10},children:[e.jsx("h3",{children:"Documents/Resources"}),e.jsx(fe,{itemLayout:"horizontal",dataSource:i,renderItem:(I,k)=>e.jsx(me,{item:I.document,showDrive:!1,min:!0,compact:!0,compactIcon:R(I),handleDelete:x=>{M(I.id)},handleMakeImageNotVisible:N,handleMakeImageVisible:v,handleShowFileInfoDrawer:L})}),e.jsx(ge,{title:"File Informations",anchor:"right",width:b?"100vw":"35vw",onClose:I=>g(I),open:y,noOverFlow:!0,children:e.jsx(he,{id:n==null?void 0:n.id})})]})};export{Ns as ClassTopics};
