var Bn=Object.defineProperty;var $n=(r,t,n)=>t in r?Bn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var yr=(r,t,n)=>($n(r,typeof t!="symbol"?t+"":t,n),n);import{r as o,F as T,j as e,G as qe,I as ne,S as me,s as de,u as ve,C as Ie,v as Pe,Z as Se,$ as B,am as Gn,B as K,a1 as Ae,an as cr,K as g,A as Ce,ao as We,ap as at,aq as ge,ar as ye,J as W,as as Je,at as ft,ah as ze,ai as He,ag as Lt,af as Xe,y as Z,z as X,au as Re,av as it,aw as ue,ax as xr,q as fe,ay as qt,az as kt,aA as $r,a0 as Ee,a9 as $e,aB as Kn,D as Xn,H as ie,aC as Jn,aD as Qn,aE as dr,aF as Zn,aG as dt,a5 as ee,Y as ea,aH as ta,ab as ut,aI as Gt,aJ as Gr,T as oe,x as Ve,aK as Kr,aL as ra,aM as na,aN as aa,aO as ia,a7 as Ue,a6 as pt,aP as Vt,aQ as Ut,aR as ht,X as zt,aS as Ct,a2 as It,aT as sa,aU as Xr,aV as oa,aW as Ht,ad as ur,ae as la,aX as ca,aY as da,aZ as ua,a_ as Kt,a$ as ha,b0 as ma,b1 as Jr,b2 as Qr,b3 as fa,b4 as Zr,b5 as pa,b6 as ga,b7 as vr,b8 as hr,b9 as en,ba as tn,bb as ya,bc as xa,bd as va,be as rn,bf as jr,O as nn,bg as ja,bh as ba,E as Sa,V as Ca,t as wa,bi as an,bj as Da,aa as pe,N as Ta,ac as ka}from"./index-31db8264.js";import{l as sn}from"./index-743768ef.js";import{B as re}from"./Breadcrumb-ccef1239.js";import{t as rr}from"./text_truncate-315d9efa.js";import{I as mr}from"./index.es-95bc2c0f.js";import{G as Ia}from"./iconBase-e4f5c303.js";import{C as on}from"./Collapse-278a06ab.js";import{a as Pa,T as ln}from"./Table-4bc46886.js";import{B as Aa}from"./book_payment_form-c0ff6558.js";import"./Tree-723158fa.js";import"./index-c5c5a476.js";import"./index-6c8d25b9.js";import"./index-2728af24.js";const Ma=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,d]=o.useState(1),[p,u]=o.useState(0),[b,D]=o.useState(0),[O,P]=o.useState(24),[_,v]=o.useState(""),[w,F]=o.useState(!0),[k,z]=o.useState(!1),[Y]=T.useForm(),q=async l=>{const{data:f}=await W.custom({url:"",method:"post",meta:{operation:"removeDarasaArchive",variables:{id:{value:l,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error removing from archive"),{data:null})).then(m=>m);f&&(f.success?(g.success(f.message),n(t.filter(m=>m.id!==l))):g.error(f.message)),ge.destroyAll()},I=l=>{ge.confirm({title:"Confirm",icon:e.jsx(ye,{}),content:"Removing Class From Archive ....",okText:"Restore",cancelText:"Cancel",onOk:()=>q(l)})},y=async(l,f=24,m="")=>{const{data:c}=await W.custom({url:"",method:"get",meta:{operation:"madarasaArchives",variables:{page:{value:l,type:"Int",required:!0},key:{value:m,type:"String",required:!1},pageSize:{value:f,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{darasa:["id","name","code","created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(()=>(g.error("Error fetching archives"),{data:null})).then(A=>A);c&&(u(c.total),d(c.page),D(c.pages),F(c.hasNext),z(c.hasPrev),n(c.results)),i(!1)};return o.useEffect(()=>{y(1)},[]),e.jsxs(e.Fragment,{children:[e.jsx(qe,{container:!0,children:e.jsx(qe,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6,children:e.jsx(T,{layout:"vertical",form:Y,onFinish:l=>{d(0),y(0,O,l.key)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Classes Archives...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0,disabled:a})})})})}),e.jsx(de,{spinning:a,children:e.jsx(ve,{children:t.length>0?e.jsx(qe,{container:!0,children:t.map(l=>e.jsx(qe,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:e.jsxs(Ie,{hoverable:l.isActive,style:{marginRight:10},children:[e.jsx(Pe,{style:{right:0,position:"absolute"},children:e.jsx(Se,{trigger:["click"],overlay:e.jsx(B,{children:e.jsx(B.Item,{icon:e.jsx(Gn,{}),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>I(l.id),children:"Restore"})},"class-archive-"+l.id)}),overlayStyle:{zIndex:9999},children:e.jsx(K,{type:"link",size:"large",className:"ant-dropdown-link",onClick:f=>f.preventDefault(),style:{zIndex:1},children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx(cr.Ribbon,{text:l.darasa.code,placement:"start",color:"orange",children:e.jsx("a",{onClick:()=>{g("Drive To Connect")},children:e.jsxs(Pe,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ce,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(We,{}),src:l.darasa.icon}),e.jsx("span",{style:{fontSize:20},children:l.darasa.name})]})})})]})}))}):e.jsx(at,{severity:"info",sx:{fontSize:18},children:a?e.jsx(e.Fragment,{children:"Loading ..."}):e.jsx(e.Fragment,{children:"No Class Found in Archives"})})})}),(w||k)&&!a&&e.jsx(ve,{children:e.jsx(sn.Pagination,{showSizeChanger:!0,onShowSizeChange:(l,f)=>{d(l),P(f),y(l,f||O,_)},defaultCurrent:s,total:p,onChange:(l,f)=>{d(l),P(f||O),y(l,f||O,_)}})})]})},Oa=()=>e.jsxs(ve,{children:[e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx(Je,{to:"/oclass",children:"Home"})}),e.jsx(re.Item,{children:"Classes Archives"})]}),e.jsx(ve,{sx:{mt:2},children:e.jsx(Ma,{})})]}),Ea=()=>e.jsx(Oa,{}),{Title:Pt,Text:At}=ft,cn=r=>{const[t,n]=o.useState(),[a,i]=o.useState(!0),s=async d=>{const{data:p}=await W.custom({url:"",method:"get",meta:{operation:"darasa",variables:{id:{value:d,type:"Int",required:!0}},fields:["id","name","description","code","created","updated","isActive","canEdit","canDelete","isAuthor","totalStudents","canManage",{user:["id","firstName","lastName","email","middleName","fullName","pic"]}]}}).catch(u=>(g.error("Error fetching darasa"),{data:null}));p&&n(p),i(!1)};return o.useEffect(()=>{s(r.id)},[r.id]),e.jsxs(de,{spinning:a,children:[e.jsx(Pt,{level:5,children:"Class Name"}),e.jsx(At,{children:t==null?void 0:t.name}),e.jsx(Pt,{level:5,children:"Class Code"}),e.jsx(At,{children:t==null?void 0:t.code}),e.jsx(Pt,{level:5,children:"Class Description"}),e.jsx(At,{children:t==null?void 0:t.description}),e.jsx(Pt,{level:5,children:"Class Author"}),e.jsx(At,{children:t==null?void 0:t.user.profile.fullName})]})},Na=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:r.form,onFinish:s=>{s.payable=t,s.description=a,r.onFinish(s)},requiredMark:!0,autoComplete:"off",children:[e.jsx(T.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Name is required"}],children:e.jsx(ne,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(ze.CKEditor,{editor:He,data:a,onReady:s=>{s.editing.view.change(d=>{d.setStyle("min-height","150px",s.editing.view.document.getRoot())})},onChange:(s,d)=>{const p=d.getData();i(p)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(T.Item,{name:"payable",children:e.jsx(Lt,{onChange:s=>n(s.target.checked),children:"Payable"})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(T.Item,{name:"price",label:"Cost",initialValue:0,rules:[{required:t,type:"number",validator:(s,d)=>d<=0?Promise.reject("Price cannot be less than 0"):Promise.resolve()}],children:e.jsx(Xe,{size:"large",style:{width:"100%"},precision:2})}),e.jsxs(Z,{children:[e.jsx(X,{span:8,children:e.jsx(T.Item,{name:"duration",label:"Duration",initialValue:1,wrapperCol:{span:24},rules:[{required:t,type:"number",message:"Please enter duration"}],children:e.jsx(Xe,{size:"large",style:{width:"100%"}})})}),e.jsx(X,{span:12,children:e.jsx(T.Item,{label:"Duration Type",name:"duration_type",wrapperCol:{span:12},initialValue:"months",rules:[{required:t,type:"string",message:"Please select duration type"}],children:e.jsxs(Re,{size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx(Re.Option,{value:"days",children:"Days"}),e.jsx(Re.Option,{value:"months",children:"Months"}),e.jsx(Re.Option,{value:"years",children:"Years"})]})})})]}),e.jsx(T.Item,{label:"Start Date",name:"start_date",rules:[{required:!0,type:"object",message:"Please select Start Date"}],children:e.jsx(it,{size:"large",style:{width:"50%"},disabledDate:s=>s.add(1,"day")<ue().endOf("day"),popupStyle:{zIndex:9999}})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},_a=r=>{const[t,n]=o.useState(r.darasa.payable),[a,i]=o.useState(r.darasa.description);return o.useEffect(()=>{r.form.setFieldsValue({name:r.darasa.name,description:r.darasa.description,payable:r.darasa.payable,price:r.darasa.price,duration:r.darasa.duration,duration_type:r.darasa.durationType,start_date:xr(r.darasa.startDate),end_date:xr(r.darasa.endDate)})},[r.darasa,r.form]),e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:r.form,onFinish:s=>{s.id=parseInt(r.darasa.id),s.payable=t,s.description=a,r.onFinish(s)},requiredMark:!1,children:[e.jsx(T.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Name is required"}],children:e.jsx(ne,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(ze.CKEditor,{editor:He,data:a,onReady:s=>{s.editing.view.change(d=>{d.setStyle("min-height","150px",s.editing.view.document.getRoot())})},onChange:(s,d)=>{const p=d.getData();i(p)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(T.Item,{name:"payable",children:e.jsx(Lt,{defaultChecked:t,onChange:s=>n(s.target.checked),children:"Payable"})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(T.Item,{name:"price",label:"Cost",initialValue:0,rules:[{required:t,type:"number",validator:(s,d)=>d<=0?Promise.reject("Price cannot be less than 0"):Promise.resolve()}],children:e.jsx(Xe,{size:"large",style:{width:"100%"},precision:2})}),e.jsxs(Z,{children:[e.jsx(X,{span:8,children:e.jsx(T.Item,{name:"duration",label:"Duration",initialValue:1,wrapperCol:{span:24},rules:[{required:t,type:"number",message:"Please enter duration"}],children:e.jsx(Xe,{size:"large",style:{width:"100%"}})})}),e.jsx(X,{span:12,children:e.jsx(T.Item,{label:"Duration Type",name:"duration_type",wrapperCol:{span:12},initialValue:"months",rules:[{required:t,type:"string",message:"Please select duration type"}],children:e.jsxs(Re,{size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx(Re.Option,{value:"days",children:"Days"}),e.jsx(Re.Option,{value:"months",children:"Months"}),e.jsx(Re.Option,{value:"years",children:"Years"})]})})})]}),e.jsx(T.Item,{label:"Start Date",name:"start_date",rules:[{required:!0,type:"object",message:"Please select Start Date"}],children:e.jsx(it,{size:"large",style:{width:"50%"},disabledDate:s=>s.add(1,"day")<ue().endOf("day"),popupStyle:{zIndex:9999}})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},{Paragraph:Fa}=ft,Yt=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState([]),[s,d]=o.useState(),[p,u]=o.useState(),[b,D]=o.useState(!0),[O,P]=o.useState(1),[_,v]=o.useState(0),[w,F]=o.useState(24),[k,z]=o.useState(!0),[Y,q]=o.useState(!1),[I]=T.useForm(),[y,l]=o.useState(!1),[f,m]=o.useState(!1),{push:c}=fe(),[A]=T.useForm(),[$,G]=o.useState(!1),[M,V]=o.useState(!1),L=R=>{d(R),V(!0)},H=R=>{d(R),m(!0)},j=R=>{u(R),G(!0)},S=async R=>{const{data:J}=await W.custom({url:"",method:"post",meta:{operation:"connectClass",variables:{id:{value:R,type:"Int",required:!0}},fields:["success","message"]}}).catch(te=>(g.error("Error connecting darasa"),{data:null})).then(te=>te);J&&(J.success?(G(!1),u(null),g(J.message),i(a.filter(te=>te.id!==R))):g.error(J.message))},E=async R=>{const{data:J}=await W.custom({url:"",method:"post",meta:{operation:"addDarasaArchive",variables:{id:{value:R,type:"Int",required:!0}},fields:["success","message"]}}).catch(te=>(g.error("Error adding darasa to archive"),{data:null})).then(te=>te);J&&(J.success?(g.success(J.message),i(a.filter(te=>te.id!==R))):g.error(J.message)),ge.destroyAll()},C=R=>{ge.confirm({title:"Confirm",icon:e.jsx(ye,{}),content:"Adding Class To Archive ....",okText:"Add",cancelText:"Cancel",onOk:()=>E(R)})},h=async R=>{const{data:J}=await W.custom({url:"",method:"post",meta:{operation:"createDarasa",variables:{name:{value:R.name,type:"String",required:!0},description:{value:R.description,type:"String",required:!0},payable:{value:R.payable,type:"Boolean",required:!1},price:{value:R.price,type:"Float",required:!1},duration:{value:R.duration,type:"Int",required:!1},durationType:{value:R.duration_type,type:"String",required:!1},startDate:{value:R.start_date,type:"String",required:!1}},fields:["success","message",{darasa:["id","name","code","description","created","canEdit","canDelete","updated","isActive","isAuthor","isConnected"]}]}}).catch(()=>(g.error("Error creating darasa"),{data:null})).then(te=>te);J&&(J.success?(g.success(J.message),l(!1),i([J.darasa,...a])):g.error(J.message))},x=async R=>{const{data:J}=await W.custom({url:"",method:"post",meta:{operation:"updateDarasa",variables:{id:{value:R.id,type:"Int",required:!0},name:{value:R.name,type:"String",required:!0},description:{value:R.description,type:"String",required:!0},payable:{value:R.payable,type:"Boolean",required:!1},price:{value:R.price,type:"Float",required:!1},duration:{value:R.duration,type:"Int",required:!1},durationType:{value:R.duration_type,type:"String",required:!1},startDate:{value:R.start_date,type:"String",required:!1}},fields:["success","message",{darasa:["id","name","code","description","payable","price","duration","durationType","startDate","endDate","created","canEdit","canDelete","canManage","updated","isActive","isAuthor","isConnected"]}]}}).catch(()=>(g.error("Error updating darasa"),{data:null})).then(te=>te);J&&(J.success?(g.success(J.message),m(!1),i(a.map(te=>te.id===R.id?J.darasa:te))):g.error(J.message))},N=()=>{A.resetFields(),l(!0)},U=async R=>{const{data:J}=await W.custom({url:"",method:"post",meta:{operation:"disconnectClass",variables:{classId:{value:R,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error disconnecting darasa"),{data:null})).then(te=>te);J&&(J.success?(g.success(J.message),i(a.filter(te=>te.id!==R))):g.error(J.message))},ae=R=>{ge.confirm({title:"Disconnecting Class",icon:e.jsx(ye,{}),content:"Are you sure ...",okText:"Disconnect",cancelText:"Cancel",onOk:()=>U(R)})},ce=async R=>{const{data:J}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasa",variables:{id:{value:R,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error deleting darasa"),{data:null})).then(te=>te);J&&(J.success?(g.success(J.message),i(a.filter(te=>te.id!==R))):g.error(J.message))},Ye=R=>{ge.confirm({title:"Deleting Class",icon:e.jsx(ye,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>ce(R)})},Oe=async(R,J=24,te="")=>{D(!0);const{data:Le}=await W.custom({url:"",method:"get",meta:{operation:"myMadarasa",variables:{page:{value:R,type:"Int",required:!0},key:{value:te,type:"String",required:!1},pageSize:{value:J,type:"Int",required:!0},where:{value:{mode:r.mode},type:"JSON",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","payable","price","duration","durationType","startDate","endDate","created","canEdit","canDelete","canManage","updated","isActive","isAuthor","isConnected"]}]}}).catch(()=>(g.error("Error getting darasas"),{data:null})).then(Qe=>Qe);Le&&(v(Le.total),P(Le.page),z(Le.hasNext),q(Le.hasPrev),i(Le.results)),D(!1)},je=async()=>{const{data:R}=await W.custom({url:"",method:"get",meta:{operation:"darasaAuth",variables:{},fields:["auth"]}}).catch(()=>(g.error("Error getting darasa auth"),{data:null})).then(J=>J);R&&n(R.auth.create_classes)};return o.useEffect(()=>{je(),Oe(1)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(qe,{container:!0,children:[e.jsx(qe,{item:!0,xs:12,sm:6,md:4,lg:4,children:e.jsx(T,{layout:"vertical",form:I,onFinish:R=>{P(1),Oe(1,w,R.key)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Classes...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0,disabled:b})})})}),e.jsx(qe,{item:!0,xs:12,sm:6,md:8,lg:8,sx:{display:"flex",justifyContent:"flex-end",paddingBottom:{xs:2,sm:0,md:0,lg:0}},children:r.mode!=="connect"&&e.jsx(K,{size:"large",icon:e.jsx(qt,{}),onClick:()=>N(),disabled:!t||b,children:"Create Class"})})]}),e.jsx(de,{spinning:b,children:a.length>0?e.jsx(qe,{container:!0,children:a.map(R=>e.jsx(qe,{item:!0,xs:12,sm:6,md:4,lg:4,children:e.jsxs(Ie,{hoverable:R.isActive,style:{marginRight:10,marginBottom:5},children:[e.jsx(Pe,{style:{right:0,position:"absolute"},children:e.jsx(Se,{trigger:["click"],overlay:e.jsxs(B,{children:[R.isConnected?e.jsxs(e.Fragment,{children:[e.jsx(B.Item,{icon:e.jsx(We,{}),disabled:!R.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>{R.isActive&&R.isConnected?c("/oclass/class/session/"+R.id+"/"+R.code):R.isActive&&!R.isConnected?j(R):g("Class is Blocked")},children:"Open"})}),e.jsx(B.Item,{icon:e.jsx(kt,{}),onClick:()=>H(R),disabled:!(R!=null&&R.canManage),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(B.Item,{icon:e.jsx($r,{}),onClick:()=>L(R),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Share"})}),e.jsx(B.Item,{icon:e.jsx(Ee,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),R.isAuthor?e.jsx(e.Fragment,{}):e.jsx(B.Item,{icon:e.jsx(Ee,{}),onClick:()=>ae(R.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Disconnect"})}),e.jsx(B.Item,{icon:e.jsx($e,{}),onClick:()=>Ye(R.id),disabled:!(R!=null&&R.canDelete),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}),e.jsx(B.Item,{icon:e.jsx(Kn,{}),onClick:()=>C(R.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Archive"})},"drive-archive-"+R.id)]}):e.jsx(e.Fragment,{}),R.isConnected?e.jsx(e.Fragment,{}):e.jsx(B.Item,{icon:e.jsx(We,{}),disabled:!R.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>c("/oclass/class/session/"+R.id+"/"+R.code),children:"Connect"})})]}),overlayStyle:{zIndex:9999},children:e.jsx(K,{type:"link",size:"large",className:"ant-dropdown-link",style:{zIndex:1},onClick:J=>J.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx(cr.Ribbon,{text:R.code,placement:"start",color:"orange",children:e.jsx("a",{onClick:()=>c("/oclass/class/session/"+R.id+"/"+R.code),children:e.jsxs(Pe,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ce,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(We,{}),src:R.icon}),e.jsx("span",{style:{fontSize:20},children:R.name})]})})})]})},R.id))}):e.jsx(at,{severity:"info",sx:{fontSize:18},children:b?e.jsx(e.Fragment,{children:"Loading ..."}):e.jsx(e.Fragment,{children:"No Classes Found"})})}),(k||Y)&&!b&&e.jsx(ve,{children:e.jsx(Xn,{showSizeChanger:!0,onShowSizeChange:(R,J)=>{P(R),F(J),Oe(R,J)},defaultCurrent:O,total:_,onChange:(R,J)=>{P(R),F(J||w),Oe(R,J||w)}})}),e.jsx(ie,{title:"Creating Class",open:y,destroyOnClose:!0,width:"40vw",onClose:R=>l(R),children:e.jsx(Na,{form:A,onFinish:h})}),e.jsx(ie,{title:"Editting Class",width:"40vw",open:f,onClose:R=>m(R),children:e.jsx(_a,{darasa:s,form:A,onFinish:x})}),e.jsx(ie,{title:"Connecting "+(p==null?void 0:p.name),open:$,onClose:R=>G(R),children:e.jsxs(e.Fragment,{children:[e.jsx(cn,{id:p==null?void 0:p.id}),e.jsx(K,{onClick:()=>S(p==null?void 0:p.id),style:{position:"absolute",bottom:0,right:0,margin:10},children:"Connect"})]})}),e.jsx(ie,{title:"Share Class",open:M,width:"40vw",onClose:R=>V(R),children:e.jsx(Ie,{title:"Click Copy icon to copy share link",children:e.jsx(Fa,{copyable:{icon:[e.jsx(Jn,{},"copy-icon"),e.jsx(Qn,{},"copied-icon")],tooltips:["click here","you clicked!!"],onCopy:()=>{g.success("Link Successfully Copied")}},style:{textAlign:"center",fontSize:20},children:dr.site_url+"/oclass/class/session/"+(s==null?void 0:s.id)+"/"+(s==null?void 0:s.code)})})})]})},Ra=()=>e.jsxs(ve,{children:[e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx(Je,{to:"/oclass",children:"Home"})}),e.jsx(re.Item,{children:"Connect Classes"})]}),e.jsx(ve,{sx:{mt:2},children:e.jsx(Yt,{mode:"connect"})})]}),La=()=>e.jsx(Ra,{}),qa=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx(Je,{to:"/oclass",children:"Home"})}),e.jsx(re.Item,{children:"Classes"})]}),e.jsx(ve,{sx:{mt:2},children:e.jsx(Yt,{mode:"all"})})]}),Va=()=>e.jsx(qa,{}),Ua=r=>{const[t,n]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:r.form,onFinish:a=>{a.content=t,r.onFinish(a)},requiredMark:!1,children:[e.jsx(T.Item,{name:"title",label:"Title",rules:[{required:!0,type:"string",message:"Please enter title"}],children:e.jsx(ne,{size:"large",placeholder:"Write Content ..."})}),e.jsx("h3",{children:"Announcement Description"}),e.jsx(ze.CKEditor,{editor:He,data:t,onReady:a=>{a.editing.view.change(i=>{i.setStyle("min-height","300px",a.editing.view.document.getRoot())})},onChange:(a,i)=>{const s=i.getData();n(s)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},za=r=>{const[t,n]=o.useState("");return o.useEffect(()=>{var a,i,s;(s=r.form)==null||s.setFieldsValue({title:(a=r.announcement)==null?void 0:a.title,content:(i=r.announcement)==null?void 0:i.content})},[r.form]),e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:r.form,onFinish:a=>{a.content=t,r.onFinish(a)},requiredMark:!1,children:[e.jsx(T.Item,{name:"title",label:"Title",rules:[{required:!0,type:"string",message:"Please enter title"}],children:e.jsx(ne,{size:"large",placeholder:"Write Content ..."})}),e.jsx("h3",{children:"Announcement Description"}),e.jsx(Zn,{onChange:a=>n(a)}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Ha=r=>{const[t,n]=o.useState(),[a,i]=o.useState([]),[s,d]=o.useState(!0),[p,u]=o.useState(1),[b]=T.useForm(),[D,O]=o.useState(0),[P,_]=o.useState(0),[v,w]=o.useState(!0);fe();const[F,k]=o.useState(!1),[z,Y]=o.useState(!1),[q]=T.useForm(),[I]=T.useForm(),[y,l]=o.useState(!1),f=L=>{n(L),l(!0)},m=L=>{n(L),Y(!0)},c=()=>{k(!0)},A=async L=>{const{data:H}=await W.custom({url:"",method:"post",meta:{operation:"createDarasaAnnouncement",variables:{id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},title:{value:L.title,type:"String",required:!0},content:{value:L.content,type:"String",required:!0}},fields:["success","message",{announcement:["id","title","content",{user:["id"]},{darasa:["id"]},"created","updated","isActive","canDelete","canEdit"]}]}}).catch(j=>(g.error("Error creating announcement"),{data:null})).then(j=>j);H&&(H.success?(g(H.message),i([H.announcement,...a]),q.resetFields(),k(!1)):g.error(H.message))},$=async L=>{const{data:H}=await W.custom({url:"",method:"post",meta:{operation:"updateDarasaAnnouncement",variables:{id:{value:t===void 0?"0":t.id,type:"Int",required:!0},title:{value:L.title,type:"String",required:!0},content:{value:L.content,type:"String",required:!0}},fields:["success","message",{announcement:["id","title","content",{user:["id"]},{darasa:["id"]},"created","updated","isActive","canDelete","canEdit"]}]}});H.success?(g(H.message),i(a.map(j=>j.id===H.announcement.id?H.announcement:j)),I.resetFields(),Y(!1)):g.error(H.message)},G=async(L,H="",j=!1)=>{const{data:S}=await W.custom({url:"",method:"get",meta:{operation:"darasaAnnouncements",variables:{page:{value:L,type:"Int",required:!0},key:{value:H,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","content","created","updated","isActive","canDelete","canEdit",{user:["id","firstName","middleName","lastName","fullName","pic"]},{darasa:["id"]}]}]}});_(S.total),O(S.pages),u(S.page),w(S.hasNext),(H.length>0||H.length===0&&j)&&i(S.results),S.results.length>0&&!j&&i(a.concat(S.results)),d(!1)},M=async L=>{const{data:H}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaAnnouncement",variables:{id:{value:L,type:"Int",required:!0}},fields:["success","message"]}});H.success?(g.success(H.message),i(a.filter(j=>j.id!==L))):g.error(H.message)},V=L=>{ge.confirm({title:"Deleting Announcent",icon:e.jsx(ye,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>M(L)})};return o.useEffect(()=>{G(p)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:20,children:e.jsx(T,{layout:"vertical",form:b,onFinish:L=>G(0,L.key,!0),children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Resources Links...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{size:"large",icon:e.jsx(dt,{}),onClick:c,disabled:!r.canManage,children:"Add Announcement"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(de,{spinning:s,children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:a,renderItem:L=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(ee.Item,{style:{margin:0,padding:0},actions:[e.jsx(Se,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(ea,{}),onClick:()=>f(L),children:e.jsx("a",{children:"Read"})}),e.jsx(B.Item,{icon:e.jsx($e,{}),disabled:!L.canDelete,onClick:()=>V(L.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}),e.jsx(B.Item,{icon:e.jsx(kt,{}),disabled:!L.canEdit,onClick:()=>m(L),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(B.Item,{icon:e.jsx(Ee,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:H=>H.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(ee.Item.Meta,{style:{borderBottom:"1px solid #f0f0f0"},avatar:e.jsx(ta,{}),title:e.jsx("a",{target:"_blank",rel:"noreferrer",children:L.title}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:rr(L.content.replace(/<[^>]+>/g,""),225)}),e.jsx("p",{children:e.jsx(ut,{date:new Date(L.created),locale:"en-US"})})]})})},"class-resource-link-"+L.id)},"class-resource-link-item-container-"+L.id)}),v&&e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:10},children:e.jsx(K,{type:"primary",onClick:()=>{G(p+1)},children:"Load More"})})]})}),e.jsx(ie,{title:"Adding Announcement",open:F,onClose:L=>k(L),width:"50vw",children:e.jsx(Ua,{form:q,onFinish:A})}),e.jsx(ie,{title:"Editting Announcement",open:z,onClose:L=>Y(L),width:"50vw",children:e.jsx(za,{announcement:t,form:I,onFinish:$})}),e.jsx(ie,{title:e.jsx("h3",{children:t==null?void 0:t.title}),open:y,onClose:L=>l(L),width:"75vw",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(t==null?void 0:t.content)??""},style:{marginTop:10}})})]})},Ya=r=>{const[t,n]=o.useState(!0),[a,i]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:r.form,onFinish:s=>{s.online=t,s.description=a,r.onFinish(s)},requiredMark:!1,children:[e.jsx(T.Item,{name:"title",label:"Title",rules:[{required:!0,type:"string",message:"Please input Title"}],children:e.jsx(ne,{size:"large",placeholder:"Enter Title ..."})}),e.jsx(T.Item,{name:"online",children:e.jsx(Lt,{checked:t,onChange:()=>n(!t),children:"Online Submit Assignment Work"})}),e.jsx(T.Item,{name:"deadline",label:"Deadline",rules:[{required:!0,type:"date",message:"Please select Deadline"}],children:e.jsx(it,{size:"large",showTime:{format:"HH:mm"},disabledDate:s=>{const d=ue().format("YYYY-MM-DD");return s&&s<ue(d,"YYYY-MM-DD")},style:{width:"100%"},popupStyle:{zIndex:9999}})}),e.jsx("h3",{children:"Description"}),e.jsx(ze.CKEditor,{editor:He,data:a,onReady:s=>{s.editing.view.change(d=>{d.setStyle("min-height","150px",s.editing.view.document.getRoot())})},onChange:(s,d)=>{const p=d.getData();i(p)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{height:45}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Wa=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(),[s,d]=o.useState(!0),[p,u]=o.useState(1);o.useState(25);const[b]=T.useForm(),[D,O]=o.useState(0),[P,_]=o.useState(0),[v,w]=o.useState(!0);fe();const[F,k]=o.useState(!1),[z,Y]=o.useState(!1),[q,I]=o.useState(!1),[y,l]=o.useState(!1),[f,m]=o.useState(!1),[c]=T.useForm(),[A]=T.useForm(),$=x=>{i(x),m(!0)},G=x=>{n(t.map(N=>N.id===x.id?x:N))},M=x=>{i(x),l(!0)},V=x=>{i(x),Y(!0)},L=x=>{i(x),I(!0)},H=()=>{k(!0)},j=async x=>{const{data:N}=await W.custom({url:"",method:"post",meta:{operation:"createDarasaAssignment",variables:{id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},title:{value:x.title,type:"String",required:!0},description:{value:x.description,type:"String",required:!0},deadline:{value:x.deadline,type:"DateTime",required:!0},online:{value:x.online,type:"Boolean",required:!0}},fields:["success","message",{assignment:["id","title","description","deadline","onlineSubmission","submitted","canSubmit",{user:["id"]},{darasa:["id"]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}}).catch(U=>(g.error("Failed to create assignment"),{data:null})).then(U=>U);N&&(N.success?(g(N.message),n([N.assignment,...t]),c.resetFields(),k(!1)):g.error(N.message))},S=async x=>{const{data:N}=await W.custom({url:"",method:"post",meta:{operation:"updateDarasaAssignment",variables:{id:{value:a===void 0?0:a.id,type:"Int",required:!0},title:{value:x.title,type:"String",required:!0},description:{value:x.description,type:"String",required:!0},deadline:{value:x.deadline,type:"DateTime",required:!0},online:{value:x.online,type:"Boolean",required:!0}},fields:["success","message",{assignment:["id","title","description","deadline","onlineSubmission","submitted","canSubmit",{user:["id"]},{darasa:["id"]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}}).catch(U=>(g.error("Failed to update assignment"),{data:null})).then(U=>U);N&&(N.success?(g(N.message),n(t.map(U=>U.id===N.assignment.id?N.assignment:U)),A.resetFields(),I(!1)):g.error(N.message))},E=async(x,N="",U=!1)=>{const{data:ae}=await W.custom({url:"",method:"get",meta:{operation:"darasaAssignments",variables:{page:{value:x,type:"Int",required:!0},key:{value:N,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","description","totalAttachments","deadline","onlineSubmission","submitted","canSubmit","created","updated","isActive","canDelete","canEdit","canManage","canUploadAttachment","attachmentZippedFolderPath",{user:["id","firstName","middleName","lastName","fullName","pic"]},{darasa:["id"]}]}]}}).catch(ce=>(g.error("Failed to fetch assignments"),{data:null})).then(ce=>ce);ae&&(_(ae.total),O(ae.pages),u(ae.page),w(ae.hasNext),(N.length>0||N.length===0&&U)&&n(ae.results),ae.results.length>0&&!U&&n(t.concat(ae.results))),d(!1)},C=async x=>{const{data:N}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaAssignment",variables:{id:{value:x,type:"Int",required:!0}},fields:["success","message"]}}).catch(U=>(g.error("Failed to delete assignment"),{data:null})).then(U=>U);N&&(N.success?(g.success(N.message),n(t.filter(U=>U.id!==x))):g.error(N.message))},h=x=>{ge.confirm({title:"Deleting Assignment",icon:e.jsx(ye,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>C(x)})};return o.useEffect(()=>{E(p)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:20,children:e.jsx(T,{layout:"vertical",form:b,onFinish:x=>E(0,x.key,!0),children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Assignments...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{icon:e.jsx(dt,{}),onClick:H,disabled:!r.canManage,size:"large",children:"Add Assignment"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(de,{spinning:s,children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,renderItem:x=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(ee.Item,{style:{margin:0,padding:0},actions:[e.jsx(Se,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(Gt,{}),children:e.jsx("a",{target:"_blank",onClick:()=>g("on construction"),children:"View"})}),e.jsx(B.Item,{icon:e.jsx(Gt,{}),children:e.jsx("a",{target:"_blank",onClick:()=>M(x),children:"Submissions"})}),e.jsx(B.Item,{icon:e.jsx(Gt,{}),children:e.jsx("a",{target:"_blank",onClick:()=>V(x),children:"Attachements"})}),e.jsx(B.Item,{icon:e.jsx(kt,{}),disabled:!x.canDelete,onClick:()=>L(x),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(B.Item,{icon:e.jsx($e,{}),disabled:!x.canEdit,onClick:()=>h(x.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}),e.jsx(B.Item,{icon:e.jsx(Ee,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:N=>N.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(ee.Item.Meta,{style:{borderBottom:"1px solid #e8e8e8",paddingBottom:10},avatar:e.jsx(Gr,{}),title:e.jsxs("a",{target:"_blank",rel:"noreferrer",children:[x.title,x.onlineSubmission&&e.jsx("span",{style:{marginLeft:20},children:e.jsx(oe,{color:"red",children:"Online Submission"})})]}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:x.description}}),e.jsxs("p",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{children:[e.jsxs(oe,{color:"cyan",children:[e.jsx("span",{style:{marginRight:5},children:"Created:"}),e.jsx(ut,{date:new Date(x.created),locale:"en-US"})]}),e.jsxs(oe,{color:"green",children:[e.jsx("span",{style:{marginRight:5},children:"Deadline:"}),e.jsx(ut,{date:new Date(x.deadline),locale:"en-US"})]}),e.jsx(Ve,{title:"Click to View Attachments",children:e.jsx("a",{onClick:()=>V(x),children:e.jsxs(oe,{color:"orange",children:[e.jsx("span",{style:{marginRight:5},children:"Attachments:"}),x.totalAttachments]})})})]}),e.jsxs("span",{children:[x.canSubmit&&!x.canManage&&e.jsx(Ve,{title:x.submitted?"Click to Re-submitt Your Assignment Work":"Click to Submitt Your Assignment Work",color:x.submitted?"green":"red",children:e.jsx("a",{onClick:()=>$(x),children:e.jsx(oe,{color:x.submitted?"green":"red",icon:e.jsx(Kr,{}),children:e.jsxs("span",{style:{marginRight:5},children:[x.submitted?"Re-submitt":"Submitt"," ","Assignment Work:"]})})})}),x.canManage&&e.jsx(Ve,{title:"Click to View Students Submissions",color:"green",children:e.jsx("a",{onClick:()=>M(x),children:e.jsx(oe,{color:"green",children:e.jsx("span",{style:{marginRight:5},children:"Submissions"})})})})]})]})]})})},"class-assignment-link-"+x.id)},"class-resource-link-item-container-"+x.id)}),v&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{type:"primary",onClick:()=>{E(p+1)},children:"Load More"})})]})}),e.jsx(ie,{title:"Creating Assignment",open:F,onClose:x=>k(x),width:"50vw",children:e.jsx(Ya,{form:c,onFinish:j})}),e.jsx(ie,{title:"Edit Assignment",open:q,onClose:x=>I(x),width:"50vw",children:e.jsx(ra,{assignment:a,form:A,onFinish:S})}),e.jsx(ie,{title:"Assignment Attachements",open:z,onClose:x=>Y(x),width:"50vw",children:e.jsx(na,{assignment:a,canManage:r.canManage})}),e.jsx(ie,{title:"Assignment Submissions",open:y,onClose:x=>l(x),width:"50vw",children:e.jsx(aa,{assignment:a,canManage:r.canManage})}),e.jsx(ie,{title:"Assignment Work Submission",open:f,onClose:x=>m(x),width:"50vw",children:e.jsx(ia,{assignment:a,canManage:r.canManage,submitted:a==null?void 0:a.submitted,onFinish:G})})]})},Ba=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,d]=o.useState(1),[p,u]=o.useState(0),[b,D]=o.useState(!0),[O]=T.useForm();fe();const P=async(v,w="",F=!1)=>{const{data:k}=await W.custom({url:"",method:"get",meta:{operation:"darasaDrivesToConnect",variables:{page:{value:v,type:"Int",required:!0},key:{value:w,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","created","canEdit","canDelete","updated","isActive","isAuthor"]}]}}).catch(z=>(g.error("Error loading drives"),{data:null})).then(z=>z);k&&(u(k.total),d(k.page),D(k.hasNext),n(k.results)),i(!1)},_=async v=>{const{data:w}=await W.custom({url:"",method:"post",meta:{operation:"addDarasaDrive",variables:{drive:{value:v,type:"Int",required:!0},darasa:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["success","message",{darasaDrive:["id",{darasa:["id"]},{drive:["id","name","code","created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(F=>(g.error("Error adding drive"),{data:null})).then(F=>F);w&&(w.success?(g.success(w.message),n(t.filter(F=>parseInt(F.id.toString())!==v)),r.handleAddingDrive(w.darasaDrive)):g.error(w.message))};return o.useEffect(()=>{P(s)},[r.random]),a?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:e.jsx(X,{span:24,children:e.jsx(T,{layout:"vertical",form:O,onFinish:v=>{d(0),P(0,v.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Drive(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs("div",{id:"scrollableDrivesToAdd",style:{height:"65vh",overflow:"auto"},children:[e.jsx(ee,{bordered:!0,dataSource:t,renderItem:v=>e.jsxs(ee.Item,{actions:[e.jsx(pt,{title:"Are you sure to Add this Drive -"+v.name+" ?",onConfirm:()=>_(parseInt(v.id.toString())),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(K,{icon:e.jsx(qt,{}),children:"Add"})})],children:[v.name,e.jsx(Vt,{}),e.jsx(ft.Text,{mark:!0,children:v.code})]})}),b&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{type:"primary",onClick:()=>{P(s+1)},children:"Load More"})})]})]})},$a=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,d]=o.useState(1),[p,u]=o.useState(0),[b,D]=o.useState(0),[O,P]=o.useState(!0),[_]=T.useForm(),{push:v}=fe(),[w,F]=o.useState(!1),k=()=>{F(!0)},z=async(y,l="",f=!1)=>{const{data:m}=await W.custom({url:"",method:"get",meta:{operation:"darasaDrives",variables:{page:{value:y,type:"Int",required:!0},key:{value:l,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{darasa:["id"]},{drive:["id","name","code","created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(()=>(g.error("Error fetching drives"),{data:null})).then(c=>c);m&&(D(m.total),u(m.pages),d(m.page),P(m.hasNext),n(m.results)),i(!1)},Y=async y=>{n([y,...t])},q=async y=>{const{data:l}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaDrive",variables:{id:{value:y,type:"Int",required:!0}},fields:["success","message"]}}).catch(f=>(g.error("Error removing drive"),{data:null})).then(f=>f);l&&(l.success?(g.success(l.message),n(t.filter(f=>f.id!==y))):g.error(l.message))},I=y=>{ge.confirm({title:"Removing Drive",icon:e.jsx(ye,{}),content:"Are you sure ...",okText:"Remove",cancelText:"Cancel",onOk:()=>q(y)})};return o.useEffect(()=>{z(s)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:20,children:e.jsx(T,{layout:"vertical",form:_,onFinish:y=>{d(0),z(0,y.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Drive(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{icon:e.jsx(Ut,{}),onClick:k,disabled:!r.canManage,children:"Add Drive"})})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[t.length>0?e.jsx(qe,{container:!0,children:t.map(y=>e.jsx(qe,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(Ie,{hoverable:y.drive.isActive,style:{marginRight:10},children:[e.jsx(Pe,{style:{right:0,position:"absolute"},children:e.jsx(Se,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(We,{}),disabled:!y.drive.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>{y.drive.isActive?v("/odrive/drive/"+y.drive.id+"/"+y.drive.code+"/files"):g("Drive is Blocked")},children:"View"})}),e.jsx(B.Item,{icon:e.jsx(Ee,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(B.Item,{icon:e.jsx(ht,{}),onClick:()=>I(y.id),disabled:!r.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:l=>l.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx(cr.Ribbon,{text:y.drive.code,placement:"start",color:"orange",children:e.jsx("a",{onClick:()=>{y.drive.isActive?v("/odrive/drive/"+y.drive.id+"/"+y.drive.code+"/files"):g("Drive is Blocked")},children:e.jsxs(Pe,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ce,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(We,{}),src:y.drive.icon}),e.jsx(Ve,{title:y.drive.name,children:e.jsx("span",{style:{fontSize:20},children:y.drive.name.length>15?y.drive.name.substring(0,15)+"...":y.drive.name})})]})})})]})},y.id))}):e.jsxs(at,{severity:"info",children:["No drives found. Click on the ",e.jsx("b",{children:"Add Drive"})," button to add a drive"]}),O&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{type:"primary",onClick:()=>{z(s+1)},children:a?e.jsx(de,{}):e.jsxs("span",{children:["Load More",e.jsxs("span",{style:{marginLeft:8},children:[s,"/",p]})]})})})]}),e.jsx(ie,{title:"Adding Drives",open:w,onClose:y=>F(y),width:"50vw",children:e.jsx(Ba,{id:r.id,random:Math.random(),handleAddingDrive:Y})})]})},Ga=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,d]=o.useState(1);o.useState(25);const[p]=T.useForm(),[u,b]=o.useState(0),[D,O]=o.useState(0),[P,_]=o.useState(!0),{push:v}=fe();o.useState(!1);const[w,F]=o.useState(!1),[k,z]=o.useState(),Y=l=>{z(l),F(!0)},q=async(l,f="",m=!1)=>{if(P){const{data:c}=await W.custom({url:"",method:"get",meta:{operation:"darasaFiles",variables:{page:{value:parseInt(l.toString()),type:"Int",required:!0},key:{value:f,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","file","icon","size","description","created","updated","isActive","isPublic","canEdit","canDelete","canManage","isAuthor","canRead","isVideo","isAudio","isImage","imageVisible",{tags:["id",{tag:["id","name"]}]},{drive:["id","name","code",{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]}]}}).catch(A=>(g.error("Error loading files"),{data:null})).then(A=>A);c&&(O(c.total),b(c.pages),d(c.page),_(c.hasNext),(f.length>0||f.length===0&&m)&&n(c.results),c.results.length>0&&!m&&n(t.concat(c.results))),i(!1)}},I=l=>{const f=t.map(m=>(m.id===l.id&&(m.imageVisible=!1),m));n(f)},y=l=>{const f=t.map(m=>(m.id===l.id&&(m.imageVisible=!0),m));n(f)};return o.useEffect(()=>{q(s)},[]),e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:e.jsx(X,{span:20,children:e.jsx(T,{layout:"vertical",form:p,onFinish:l=>q(0,l.key,!0),children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(de,{spinning:a,children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,renderItem:l=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(ee.Item,{style:{margin:0,padding:0},actions:[e.jsx(Se,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(zt,{}),children:e.jsx("a",{target:"_blank",href:l.file,rel:"noopener noreferrer",download:!0,children:"Download"})}),e.jsx(B.Item,{icon:e.jsx($r,{}),onClick:()=>g("under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Share"})}),e.jsx(B.Item,{icon:e.jsx(Ee,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:f=>f.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(ee.Item.Meta,{avatar:e.jsx(Ce,{src:l.icon}),title:l.isImage?e.jsxs(e.Fragment,{children:[e.jsx(Ve,{title:"Click to View Image",color:"red",placement:"top",children:e.jsx("a",{onClick:()=>y(l),children:l.title})}),e.jsx(K,{onClick:()=>Y(l),style:{marginLeft:10},danger:!0,children:"Details Dialog"}),e.jsx(Ct,{style:{display:"none"},wrapperStyle:{zIndex:9999},src:l.file,preview:{visible:l.imageVisible,src:l.file,onVisibleChange:f=>{I(l)},style:{zIndex:9999}}})]}):e.jsx("a",{onClick:()=>Y(l),children:l.title}),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:l.description}),l.tags.length>0&&e.jsx(Z,{style:{marginBottom:3},children:e.jsx(X,{children:l.tags.map(f=>e.jsx(Ve,{title:"File Tag",placement:"top",children:e.jsx(oe,{color:"orange",children:f.tag.name},"tag-"+f.id)}))})}),l.drive&&e.jsx(e.Fragment,{children:e.jsx(Z,{children:e.jsxs(X,{children:[e.jsxs(oe,{color:"green",children:["Drive: ",l.drive.name]}),e.jsx(Ve,{title:"Open Drive:"+l.drive.name,children:e.jsx(K,{icon:e.jsx(We,{}),onClick:()=>{v("/odrive/drive/"+l.drive.id+"/"+l.drive.code+"/files")}})})]})})}),e.jsxs("p",{children:[!l.isAuthor&&e.jsx(e.Fragment,{children:e.jsxs("span",{style:{color:"orange"},children:["Uploaded By:",e.jsx(Ce,{size:"small",style:{marginLeft:5},src:l.author.pic}),l.author.fullName]})}),l.isAuthor&&e.jsx(e.Fragment,{children:e.jsx("span",{style:{color:"orange"},children:"Uploaded By:You"})}),e.jsxs("span",{style:{color:"orange",marginLeft:3},children:["|",e.jsx("span",{style:{marginLeft:2},children:l.size})]}),e.jsx(e.Fragment,{children:e.jsxs("span",{style:{marginLeft:3},children:["|",e.jsx(ut,{date:new Date(l.created),locale:"en-US"})]})})]})]})})},"file-"+l.id)})}),P&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{type:"primary",onClick:()=>q(s+1),disabled:!P,children:"Load More"})})]})}),e.jsx(It,{title:"File Informations",anchor:"right",width:"35vw",onClose:l=>F(l),open:w,children:e.jsx(sa,{id:k==null?void 0:k.id})})]})},Ka=r=>e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:r.form,onFinish:t=>{r.onFinish(t)},requiredMark:!1,children:[e.jsx(T.Item,{name:"link",label:"Link",rules:[{required:!0,type:"url"}],children:e.jsx(ne,{size:"large",placeholder:"Enter Url Address ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})}),Xa=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,d]=o.useState(1);o.useState(25);const[p]=T.useForm(),[u,b]=o.useState(0),[D,O]=o.useState(0),[P,_]=o.useState(!0);fe();const[v,w]=o.useState(!1),[F]=T.useForm(),k=()=>{w(!0)},z=async y=>{const{data:l}=await W.custom({url:"",method:"post",meta:{operation:"createDarasaResourceLink",variables:{id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},link:{value:y.link,type:"String",required:!0}},fields:["success","message",{resource:["id","link","created","updated","isActive","canDelete","canEdit","canAdd",{author:["id","firstName","middleName","lastName","fullName","pic"]},{darasa:["id"]}]}]}}).catch(f=>(g.error("Error creating resource link"),{data:null})).then(f=>f);l&&(l.success?(g(l.message),n([l.resource,...t]),F.resetFields(),w(!1)):g.error(l.message))},Y=async(y,l="",f=!1)=>{const{data:m}=await W.custom({url:"",method:"get",meta:{operation:"darasaResources",variables:{page:{value:y,type:"Int",required:!0},key:{value:l,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","link","created","updated","isActive","canDelete","canEdit","canAdd",{author:["id","firstName","middleName","lastName","fullName","pic"]},{darasa:["id"]}]}]}}).catch(c=>(g.error("Error fetching resources links"),{data:null})).then(c=>c);m&&(O(m.total),b(m.pages),d(m.page),_(m.hasNext),(l.length>0||l.length===0&&f)&&n(m.results),m.results.length>0&&!f&&n(t.concat(m.results))),i(!1)},q=async y=>{const{data:l}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaResourceLink",variables:{id:{value:parseInt(y.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(f=>(g.error("Error deleting resource link"),{data:null})).then(f=>f);l&&(l.success?(g.success(l.message),n(t.filter(f=>f.id!==y))):g.error(l.message))},I=y=>{ge.confirm({title:"Deleting Resource Link",icon:e.jsx(ye,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>q(y)})};return o.useEffect(()=>{Y(s)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:20,children:e.jsx(T,{layout:"vertical",form:p,onFinish:y=>Y(0,y.key,!0),children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Resources Links...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{icon:e.jsx(dt,{}),onClick:k,disabled:!r.canManage,size:"large",children:"Add Resource"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(de,{spinning:a,children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,renderItem:y=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(ee.Item,{style:{margin:0,padding:0},actions:[e.jsx(Se,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(zt,{}),children:e.jsx("a",{target:"_blank",href:y.link,rel:"noopener noreferrer",children:"Open"})}),e.jsx(B.Item,{icon:e.jsx($e,{}),disabled:!y.canDelete,onClick:()=>I(y.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}),e.jsx(B.Item,{icon:e.jsx(Ee,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:l=>l.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(ee.Item.Meta,{style:{borderBottom:"1px solid #e8e8e8"},avatar:e.jsx(dt,{}),title:e.jsx("a",{href:y.link,target:"_blank",rel:"noreferrer",children:y.link}),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{}),e.jsx("p",{children:e.jsx(ut,{date:new Date(y.created),locale:"en-US"})})]})})},"class-resource-link-"+y.id)},"class-resource-link-item-container-"+y.id)}),P&&e.jsx("div",{style:{textAlign:"center",marginTop:12},children:e.jsx("button",{onClick:()=>{Y(s+1)},children:"Load More"})})]})}),e.jsx(ie,{title:"Adding Resource Link",open:v,onClose:y=>w(y),width:"50vw",children:e.jsx(Ka,{form:F,onFinish:z})})]})},Ja=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,d]=o.useState(1),[p,u]=o.useState(0),[b,D]=o.useState(!0),[O]=T.useForm();fe();const P=async(v,w="",F=!1)=>{const{data:k}=await W.custom({url:"",method:"get",meta:{operation:"darasaStudentsToAdd",variables:{page:{value:v,type:"Int",required:!0},key:{value:w,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","firstName","middleName","lastName","fullName","email","pic","isActive"]}]}}).catch(z=>(g.error("Error fetching students"),{data:null})).then(z=>z);k&&(u(k.total),d(k.page),D(k.hasNext),n(k.results)),i(!1)},_=async v=>{const{data:w}=await W.custom({url:"",method:"post",meta:{operation:"createDarasaStudent",variables:{darasa:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},student:{value:parseInt(v===void 0?"0":v.toString()),type:"Int",required:!0}},fields:["success","message",{student:["id","canDelete","canEdit","canManage","blocked",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(F=>(g.error("Error adding student"),{data:null})).then(F=>F);w&&(w.success?(g.success(w.message),n(t.filter(F=>F.id!==v)),r.handleAddingStudent(w.student)):g.error(w.message))};return o.useEffect(()=>{P(s)},[r.random]),a?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:e.jsx(X,{span:24,children:e.jsx(T,{layout:"vertical",form:O,onFinish:v=>{d(0),P(0,v.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search User(s)/Student(s) to Add ...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs("div",{id:"scrollableDrivesToAdd",style:{height:"65vh",overflow:"auto"},children:[e.jsx(ee,{dataSource:t,renderItem:v=>e.jsxs(ee.Item,{actions:[e.jsx(pt,{title:"Are you sure to Add  -"+v.fullName+" ?",onConfirm:()=>_(v.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(K,{icon:e.jsx(qt,{}),children:"Add"})})],children:[e.jsx(Ce,{src:v.pic,style:{marginRight:10}}),v.fullName,e.jsx(Vt,{}),e.jsx(ft.Text,{mark:!0,children:v.email})]})}),b&&e.jsx(K,{onClick:()=>{P(s+1)},type:"primary",style:{margin:"auto",display:"block"},children:"Load More"})]})]})},Qa=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,d]=o.useState(1),[p,u]=o.useState(0),[b,D]=o.useState(!0),[O]=T.useForm();fe();const P=async(v,w="",F=!1)=>{const{data:k}=await W.custom({url:"",method:"get",meta:{operation:"blockedDarasaStudents",variables:{page:{value:v,type:"Int",required:!0},key:{value:w,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","canDelete","canEdit","canManage","blocked",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(z=>(g.error("Error fetching students"),{data:null})).then(z=>z);k&&(u(k.total),d(k.page),D(k.hasNext),n(k.results)),i(!1)},_=async(v,w)=>{const{data:F}=await W.custom({url:"",method:"post",meta:{operation:"blockUnblockDarasaStudent",variables:{id:{value:parseInt(v.toString()),type:"Int",required:!0},blocked:{value:w,type:"Boolean",required:!0}},fields:["success","message",{darasaStudent:["id","canDelete","canEdit","canManage","blocked",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(()=>(g.error("Error Unblocking student"),{data:null})).then(k=>k);F&&(F.success?(g.success(F.message),n(t.filter(k=>k.id!==v)),r.handleUnblockingStudent(F.darasaStudent)):g.error(F.message))};return o.useEffect(()=>{P(s)},[r.random]),a?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:e.jsx(X,{span:24,children:e.jsx(T,{layout:"vertical",form:O,onFinish:v=>{d(0),P(0,v.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Blocked Students ...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs("div",{id:"scrollableDrivesToAdd",style:{height:"65vh",overflow:"auto"},children:[e.jsx(ee,{dataSource:t,renderItem:v=>{var w,F,k;return e.jsxs(ee.Item,{actions:[e.jsx(pt,{title:"Are you sure to Unblock  -"+v.user.fullName+" ?",onConfirm:()=>_(v.id,!1),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(K,{icon:e.jsx(Xr,{}),children:"Unblock"})})],children:[e.jsx(Ce,{src:(w=v==null?void 0:v.user)==null?void 0:w.pic,style:{marginRight:10}}),(F=v==null?void 0:v.user)==null?void 0:F.fullName,e.jsx(Vt,{}),e.jsx(ft.Text,{mark:!0,children:(k=v==null?void 0:v.user)==null?void 0:k.email})]})}}),b&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{onClick:()=>P(s+1),disabled:!b,children:"Load More"})})]})]})},Za=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,d]=o.useState(1),[p,u]=o.useState(0),[b,D]=o.useState(0),[O,P]=o.useState(!0),[_]=T.useForm();fe();const[v,w]=o.useState(!1),[F,k]=o.useState(!1),z=()=>{w(!0)},Y=async(c,A="",$=!1)=>{const{data:G}=await W.custom({url:"",method:"get",meta:{operation:"darasaStudents",variables:{page:{value:c,type:"Int",required:!0},key:{value:A,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","canDelete","canEdit","canManage","blocked",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(()=>(g.error("Error fetching students"),{data:null})).then(M=>M);G&&(D(G.total),u(G.pages),d(G.page),P(G.hasNext),n(G.results)),i(!1)},q=async c=>{n([c,...t])},I=async c=>{const{data:A}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaStudent",variables:{id:{value:parseInt(c.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error removing student"),{data:null})).then($=>$);A&&(A.success?(g.success(A.message),n(t.filter($=>$.id!==c))):g.error(A.message))},y=async(c,A)=>{const{data:$}=await W.custom({url:"",method:"post",meta:{operation:"blockUnblockDarasaStudent",variables:{id:{value:parseInt(c.toString()),type:"Int",required:!0},blocked:{value:A,type:"Boolean",required:!0}},fields:["success","message",{darasaStudent:["id","canDelete","canEdit","canManage","blocked",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(()=>(g.error("Error blocking/unblocking student"),{data:null})).then(G=>G);if($)if($.success){g.success($.message);const G=t.map(M=>M.id===c?$.darasaStudent:M);n(G)}else g.error($.message)},l=c=>{const A=t.map($=>$.id===c.id?c:$);n(A)},f=c=>{ge.confirm({title:"Removing Student",icon:e.jsx(ye,{}),content:"Are you sure ...",okText:"Remove",cancelText:"Cancel",onOk:()=>I(c)})},m=(c,A)=>{ge.confirm({title:A?"Blocking Student":"Unblocking Student",icon:e.jsx(ye,{}),content:"Are you sure ...",okText:A?"Block":"Unblock",cancelText:"Cancel",onOk:()=>y(c,A)})};return o.useEffect(()=>{Y(s)},[]),a?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:12,children:e.jsx(T,{layout:"vertical",form:_,onFinish:c=>{d(0),Y(0,c.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Student(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(X,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(K,{size:"large",icon:e.jsx(Ut,{}),onClick:z,disabled:!r.canManage,children:"Add Student"}),e.jsx(K,{size:"large",icon:e.jsx(ht,{}),onClick:()=>k(!0),disabled:!r.canManage,children:"Blocked Students"})]})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[t.length>0?e.jsx(Z,{align:"top",children:t.map(c=>e.jsx(X,{span:6,children:e.jsxs(Ie,{hoverable:c.isActive,style:{marginRight:10,borderColor:c.blocked?"red":"#f0f0f0"},children:[e.jsx(Pe,{style:{right:0,position:"absolute"},children:e.jsx(Se,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(We,{}),disabled:!c.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"View"})}),e.jsx(B.Item,{icon:e.jsx(Ee,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(B.Item,{icon:e.jsx(ht,{}),onClick:()=>f(c.id),disabled:!c.canDelete,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})}),c.blocked?e.jsx(B.Item,{icon:e.jsx(Xr,{}),onClick:()=>m(c.id,!1),disabled:!c.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Unblock"})}):e.jsx(B.Item,{icon:e.jsx(oa,{}),onClick:()=>m(c.id,!0),disabled:!c.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Block"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:A=>A.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx("a",{children:e.jsxs(Pe,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(Ce,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(We,{}),src:c.user.pic}),e.jsx("span",{style:{fontSize:20},children:c.user.fullName})]})})]})}))}):e.jsx(at,{severity:"info",children:"No Student found for this class. Please add some students"}),O&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{onClick:()=>{Y(s+1)},disabled:!O,children:a?e.jsx(de,{}):e.jsx(e.Fragment,{children:e.jsx("span",{children:"Load More"})})})})]}),e.jsx(ie,{title:"Adding Students",open:v,onClose:c=>w(c),width:"50vw",children:e.jsx(Ja,{id:r.id,random:Math.random(),handleAddingStudent:q})}),e.jsx(ie,{title:"Blocked Students",open:F,onClose:c=>k(c),width:"50vw",children:e.jsx(Qa,{id:r.id,random:Math.random(),handleUnblockingStudent:l})})]})},ei=r=>{const[t,n]=o.useState(!1),a=async i=>{var d;n(!0);const{data:s}=await W.custom({url:"",method:"post",meta:{operation:"createClassYoutubeVideo",variables:{classId:{value:parseInt((d=r.id)==null?void 0:d.toString()),type:"Int",required:!0},url:{value:i.url,type:"String",required:!0}},fields:["success","message",{video:["id","title","description","url","video","isYoutube","created","updated","isActive","canDelete","canEdit",{darasa:["id"]},{author:["id","fullName","firstName","middleName","lastName"]}]}]}}).catch(p=>(g.error("Error Adding a Video"),{data:null})).then(p=>p);s&&(s.success?(g.success(s.message),r.handleAddingDrive(s.video)):g.error(s.message)),n(!1)};return e.jsx(e.Fragment,{children:e.jsx(de,{spinning:t,children:e.jsxs(T,{layout:"vertical",onFinish:i=>{a(i)},requiredMark:!1,children:[e.jsx(T.Item,{name:"url",label:"Youtube Video URL",rules:[{required:!0,type:"url",message:"Please input Youtube URL ..."}],children:e.jsx(ne,{size:"large",placeholder:"Enter Youtube URL ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",loading:t,children:"Save"})})]})})})},br=[".mp4"],ti=r=>Array.isArray(r)?r:r==null?void 0:r.fileList,ri=r=>{const[t,n]=o.useState(!1),[a]=T.useForm(),[i,s]=o.useState(""),d=Ht(),p=async u=>{n(!0);const{data:b}=await W.custom({url:"",method:"post",meta:{operation:"uploadClassVideo",variables:{classId:{value:parseInt(d.id),type:"Int",required:!0},video:{value:u.video,type:"Upload",required:!0},title:{value:u.title,type:"String",required:!0},description:{value:u.description,type:"String",required:!1}},fields:["success","message",{video:["id","title","description","url","video","isYoutube","created","updated","isActive","canDelete","canEdit",{darasa:["id"]},{author:["id","fullName","firstName","middleName","lastName"]}]}]}}).catch(D=>(g.error("Error uploading a Video File"),{data:null})).then(D=>D);b&&(b.success?(s(""),g.success(b.message),r.handleAddingVideo(b.video)):g.error(b.message)),n(!1)};return e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",onFinish:u=>{u.description=i,p(u)},requiredMark:!1,form:a,children:[e.jsx(T.Item,{label:"Pick a Video Files ("+br.join()+")",children:e.jsx(T.Item,{name:"video",valuePropName:"fileList",getValueFromEvent:ti,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload students excel file"}],children:e.jsxs(ur.Dragger,{name:"file",accept:br.join(),multiple:!1,beforeUpload:()=>!1,onChange:u=>{a.setFieldsValue({title:u.file.name})},onRemove:u=>{a.setFieldsValue({title:""})},children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(la,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx(T.Item,{name:"title",label:"Video Title",rules:[{required:!0,type:"string",message:"Please input title"}],children:e.jsx(ne,{size:"large",placeholder:"Enter Title ..."})}),e.jsx("h3",{children:"Description"}),e.jsx(ze.CKEditor,{editor:He,data:i,onReady:u=>{u.editing.view.change(b=>{b.setStyle("min-height","100px",u.editing.view.document.getRoot())})},onChange:(u,b)=>{const D=b.getData();s(D)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})};class ni extends o.Component{constructor(n){super(n);yr(this,"player");this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.load=this.load.bind(this),this.changeCurrentTime=this.changeCurrentTime.bind(this),this.seek=this.seek.bind(this),this.changePlaybackRateRate=this.changePlaybackRateRate.bind(this),this.changeVolume=this.changeVolume.bind(this),this.setMuted=this.setMuted.bind(this)}componentDidMount(){this.player.subscribeToStateChange(this.handleStateChange.bind(this)),this.props.updatePlayer(this.player,this.props.index)}setMuted(n){return()=>{this.player.muted=n}}handleStateChange(n){this.setState({player:n})}play(){g("playing"),this.player.play()}pause(){this.player.pause()}load(){this.player.load()}changeCurrentTime(n){return()=>{const{player:a}=this.player.getState();this.player.seek(a.currentTime+n)}}seek(n){return()=>{this.player.seek(n)}}changePlaybackRateRate(n){return()=>{const{player:a}=this.player.getState();this.player.playbackRate=a.playbackRate+n}}changeVolume(n){return()=>{const{player:a}=this.player.getState();this.player.volume=a.volume+n}}render(){return e.jsx("div",{children:e.jsx(ca.Player,{ref:n=>{this.player=n},aspectRatio:"1110:680",preload:"auto",autoPlay:!1,children:e.jsx("source",{src:this.props.file})})})}}var Wt={},ai=function(t){return ii(t)&&!si(t)};function ii(r){return!!r&&typeof r=="object"}function si(r){var t=Object.prototype.toString.call(r);return t==="[object RegExp]"||t==="[object Date]"||ci(r)}var oi=typeof Symbol=="function"&&Symbol.for,li=oi?Symbol.for("react.element"):60103;function ci(r){return r.$$typeof===li}function di(r){return Array.isArray(r)?[]:{}}function wt(r,t){return t.clone!==!1&&t.isMergeableObject(r)?mt(di(r),r,t):r}function ui(r,t,n){return r.concat(t).map(function(a){return wt(a,n)})}function hi(r,t){if(!t.customMerge)return mt;var n=t.customMerge(r);return typeof n=="function"?n:mt}function mi(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(t){return Object.propertyIsEnumerable.call(r,t)}):[]}function Sr(r){return Object.keys(r).concat(mi(r))}function dn(r,t){try{return t in r}catch{return!1}}function fi(r,t){return dn(r,t)&&!(Object.hasOwnProperty.call(r,t)&&Object.propertyIsEnumerable.call(r,t))}function pi(r,t,n){var a={};return n.isMergeableObject(r)&&Sr(r).forEach(function(i){a[i]=wt(r[i],n)}),Sr(t).forEach(function(i){fi(r,i)||(dn(r,i)&&n.isMergeableObject(t[i])?a[i]=hi(i,n)(r[i],t[i],n):a[i]=wt(t[i],n))}),a}function mt(r,t,n){n=n||{},n.arrayMerge=n.arrayMerge||ui,n.isMergeableObject=n.isMergeableObject||ai,n.cloneUnlessOtherwiseSpecified=wt;var a=Array.isArray(t),i=Array.isArray(r),s=a===i;return s?a?n.arrayMerge(r,t,n):pi(r,t,n):wt(t,n)}mt.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(a,i){return mt(a,i,n)},{})};var gi=mt,un=gi,Cr=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function yi(r,t){return!!(r===t||Cr(r)&&Cr(t))}function xi(r,t){if(r.length!==t.length)return!1;for(var n=0;n<r.length;n++)if(!yi(r[n],t[n]))return!1;return!0}function vi(r,t){t===void 0&&(t=xi);var n,a=[],i,s=!1;function d(){for(var p=[],u=0;u<arguments.length;u++)p[u]=arguments[u];return s&&n===this&&t(p,a)||(i=r.apply(this,p),s=!0,n=this,a=p),i}return d}const ji=Object.freeze(Object.defineProperty({__proto__:null,default:vi},Symbol.toStringTag,{value:"Module"})),bi=da(ji);var Si=typeof Element<"u",Ci=typeof Map=="function",wi=typeof Set=="function",Di=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Ot(r,t){if(r===t)return!0;if(r&&t&&typeof r=="object"&&typeof t=="object"){if(r.constructor!==t.constructor)return!1;var n,a,i;if(Array.isArray(r)){if(n=r.length,n!=t.length)return!1;for(a=n;a--!==0;)if(!Ot(r[a],t[a]))return!1;return!0}var s;if(Ci&&r instanceof Map&&t instanceof Map){if(r.size!==t.size)return!1;for(s=r.entries();!(a=s.next()).done;)if(!t.has(a.value[0]))return!1;for(s=r.entries();!(a=s.next()).done;)if(!Ot(a.value[1],t.get(a.value[0])))return!1;return!0}if(wi&&r instanceof Set&&t instanceof Set){if(r.size!==t.size)return!1;for(s=r.entries();!(a=s.next()).done;)if(!t.has(a.value[0]))return!1;return!0}if(Di&&ArrayBuffer.isView(r)&&ArrayBuffer.isView(t)){if(n=r.length,n!=t.length)return!1;for(a=n;a--!==0;)if(r[a]!==t[a])return!1;return!0}if(r.constructor===RegExp)return r.source===t.source&&r.flags===t.flags;if(r.valueOf!==Object.prototype.valueOf&&typeof r.valueOf=="function"&&typeof t.valueOf=="function")return r.valueOf()===t.valueOf();if(r.toString!==Object.prototype.toString&&typeof r.toString=="function"&&typeof t.toString=="function")return r.toString()===t.toString();if(i=Object.keys(r),n=i.length,n!==Object.keys(t).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[a]))return!1;if(Si&&r instanceof Element)return!1;for(a=n;a--!==0;)if(!((i[a]==="_owner"||i[a]==="__v"||i[a]==="__o")&&r.$$typeof)&&!Ot(r[i[a]],t[i[a]]))return!1;return!0}return r!==r&&t!==t}var hn=function(t,n){try{return Ot(t,n)}catch(a){if((a.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw a}},rt={};Object.defineProperty(rt,"__esModule",{value:!0});rt.defaultProps=rt.propTypes=void 0;var Ge=Ti(ua);function Ti(r){return r&&r.__esModule?r:{default:r}}var De=Ge.default.string,Te=Ge.default.bool,ot=Ge.default.number,Xt=Ge.default.array,yt=Ge.default.oneOfType,_e=Ge.default.shape,ke=Ge.default.object,he=Ge.default.func,wr=Ge.default.node,ki={url:yt([De,Xt,ke]),playing:Te,loop:Te,controls:Te,volume:ot,muted:Te,playbackRate:ot,width:yt([De,ot]),height:yt([De,ot]),style:ke,progressInterval:ot,playsinline:Te,pip:Te,stopOnUnmount:Te,light:yt([Te,De,ke]),playIcon:wr,previewTabIndex:ot,fallback:wr,oEmbedUrl:De,wrapper:yt([De,he,_e({render:he.isRequired})]),config:_e({soundcloud:_e({options:ke}),youtube:_e({playerVars:ke,embedOptions:ke,onUnstarted:he}),facebook:_e({appId:De,version:De,playerId:De,attributes:ke}),dailymotion:_e({params:ke}),vimeo:_e({playerOptions:ke,title:De}),file:_e({attributes:ke,tracks:Xt,forceVideo:Te,forceAudio:Te,forceHLS:Te,forceSafariHLS:Te,forceDisableHls:Te,forceDASH:Te,forceFLV:Te,hlsOptions:ke,hlsVersion:De,dashVersion:De,flvVersion:De}),wistia:_e({options:ke,playerId:De,customControls:Xt}),mixcloud:_e({options:ke}),twitch:_e({options:ke,playerId:De}),vidyard:_e({options:ke})}),onReady:he,onStart:he,onPlay:he,onPause:he,onBuffer:he,onBufferEnd:he,onEnded:he,onError:he,onDuration:he,onSeek:he,onPlaybackRateChange:he,onPlaybackQualityChange:he,onProgress:he,onClickPreview:he,onEnablePIP:he,onDisablePIP:he};rt.propTypes=ki;var xe=function(){},Ii={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:xe},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:xe,onStart:xe,onPlay:xe,onPause:xe,onBuffer:xe,onBufferEnd:xe,onEnded:xe,onError:xe,onDuration:xe,onSeek:xe,onPlaybackRateChange:xe,onPlaybackQualityChange:xe,onProgress:xe,onClickPreview:xe,onEnablePIP:xe,onDisablePIP:xe};rt.defaultProps=Ii;var we={},Pi=function(t,n,a){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");typeof n=="function"&&(a=n,n={}),n=n||{},a=a||function(){},s.type=n.type||"text/javascript",s.charset=n.charset||"utf8",s.async="async"in n?!!n.async:!0,s.src=t,n.attrs&&Ai(s,n.attrs),n.text&&(s.text=""+n.text);var d="onload"in s?Dr:Mi;d(s,a),s.onload||Dr(s,a),i.appendChild(s)};function Ai(r,t){for(var n in t)r.setAttribute(n,t[n])}function Dr(r,t){r.onload=function(){this.onerror=this.onload=null,t(null,r)},r.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),r)}}function Mi(r,t){r.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,t(null,r))}}Object.defineProperty(we,"__esModule",{value:!0});we.parseStartTime=Hi;we.parseEndTime=Yi;we.randomString=Wi;we.queryString=Bi;we.getSDK=$i;we.getConfig=Gi;we.omit=Ki;we.callPlayer=Xi;we.isMediaStream=Ji;we.isBlobUrl=Qi;we.supportsWebKitPresentationMode=Zi;var Oi=mn(Pi),Ei=mn(un);function mn(r){return r&&r.__esModule?r:{default:r}}function Ni(r,t){return Li(r)||Ri(r,t)||Fi(r,t)||_i()}function _i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fi(r,t){if(r){if(typeof r=="string")return Tr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tr(r,t)}}function Tr(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=r[n];return a}function Ri(r,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(r)))){var n=[],a=!0,i=!1,s=void 0;try{for(var d=r[Symbol.iterator](),p;!(a=(p=d.next()).done)&&(n.push(p.value),!(t&&n.length===t));a=!0);}catch(u){i=!0,s=u}finally{try{!a&&d.return!=null&&d.return()}finally{if(i)throw s}}return n}}function Li(r){if(Array.isArray(r))return r}var qi=/[?&#](?:start|t)=([0-9hms]+)/,Vi=/[?&#]end=([0-9hms]+)/,nr=/(\d+)(h|m|s)/g,Ui=/^\d+$/;function fn(r,t){if(!(r instanceof Array)){var n=r.match(t);if(n){var a=n[1];if(a.match(nr))return zi(a);if(Ui.test(a))return parseInt(a)}}}function zi(r){for(var t=0,n=nr.exec(r);n!==null;){var a=n,i=Ni(a,3),s=i[1],d=i[2];d==="h"&&(t+=parseInt(s,10)*60*60),d==="m"&&(t+=parseInt(s,10)*60),d==="s"&&(t+=parseInt(s,10)),n=nr.exec(r)}return t}function Hi(r){return fn(r,qi)}function Yi(r){return fn(r,Vi)}function Wi(){return Math.random().toString(36).substr(2,5)}function Bi(r){return Object.keys(r).map(function(t){return"".concat(t,"=").concat(r[t])}).join("&")}function Jt(r){return window[r]?window[r]:window.exports&&window.exports[r]?window.exports[r]:window.module&&window.module.exports&&window.module.exports[r]?window.module.exports[r]:null}var lt={};function $i(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){return!0},i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:Oi.default,s=Jt(t);return s&&a(s)?Promise.resolve(s):new Promise(function(d,p){if(lt[r]){lt[r].push({resolve:d,reject:p});return}lt[r]=[{resolve:d,reject:p}];var u=function(O){lt[r].forEach(function(P){return P.resolve(O)})};if(n){var b=window[n];window[n]=function(){b&&b(),u(Jt(t))}}i(r,function(D){D?(lt[r].forEach(function(O){return O.reject(D)}),lt[r]=null):n||u(Jt(t))})})}function Gi(r,t){return(0,Ei.default)(t.config,r.config)}function Ki(r){for(var t,n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];for(var s=(t=[]).concat.apply(t,a),d={},p=Object.keys(r),u=0,b=p;u<b.length;u++){var D=b[u];s.indexOf(D)===-1&&(d[D]=r[D])}return d}function Xi(r){var t;if(!this.player||!this.player[r]){var n="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(r,"%c – ");return this.player?this.player[r]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return(t=this.player)[r].apply(t,i)}function Ji(r){return typeof window<"u"&&typeof window.MediaStream<"u"&&r instanceof window.MediaStream}function Qi(r){return/^blob:/.test(r)}function Zi(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.createElement("video"),t=/iPhone|iPod/.test(navigator.userAgent)===!1;return r.webkitSupportsPresentationMode&&typeof r.webkitSetPresentationMode=="function"&&t}var pn={};(function(r){function t(l){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(m){return typeof m}:t=function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},t(l)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(o),a=d(hn),i=rt,s=we;function d(l){return l&&l.__esModule?l:{default:l}}function p(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return p=function(){return l},l}function u(l){if(l&&l.__esModule)return l;if(l===null||t(l)!=="object"&&typeof l!="function")return{default:l};var f=p();if(f&&f.has(l))return f.get(l);var m={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in l)if(Object.prototype.hasOwnProperty.call(l,A)){var $=c?Object.getOwnPropertyDescriptor(l,A):null;$&&($.get||$.set)?Object.defineProperty(m,A,$):m[A]=l[A]}return m.default=l,f&&f.set(l,m),m}function b(){return b=Object.assign||function(l){for(var f=1;f<arguments.length;f++){var m=arguments[f];for(var c in m)Object.prototype.hasOwnProperty.call(m,c)&&(l[c]=m[c])}return l},b.apply(this,arguments)}function D(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}function O(l,f){for(var m=0;m<f.length;m++){var c=f[m];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}function P(l,f,m){return f&&O(l.prototype,f),m&&O(l,m),l}function _(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(f&&f.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),f&&v(l,f)}function v(l,f){return v=Object.setPrototypeOf||function(c,A){return c.__proto__=A,c},v(l,f)}function w(l){var f=z();return function(){var c=Y(l),A;if(f){var $=Y(this).constructor;A=Reflect.construct(c,arguments,$)}else A=c.apply(this,arguments);return F(this,A)}}function F(l,f){return f&&(t(f)==="object"||typeof f=="function")?f:k(l)}function k(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Y(l){return Y=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},Y(l)}function q(l,f,m){return f in l?Object.defineProperty(l,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):l[f]=m,l}var I=5e3,y=function(l){_(m,l);var f=w(m);function m(){var c;D(this,m);for(var A=arguments.length,$=new Array(A),G=0;G<A;G++)$[G]=arguments[G];return c=f.call.apply(f,[this].concat($)),q(k(c),"mounted",!1),q(k(c),"isReady",!1),q(k(c),"isPlaying",!1),q(k(c),"isLoading",!0),q(k(c),"loadOnReady",null),q(k(c),"startOnPlay",!0),q(k(c),"seekOnPlay",null),q(k(c),"onDurationCalled",!1),q(k(c),"handlePlayerMount",function(M){if(c.player){c.progress();return}c.player=M,c.player.load(c.props.url),c.progress()}),q(k(c),"getInternalPlayer",function(M){return c.player?c.player[M]:null}),q(k(c),"progress",function(){if(c.props.url&&c.player&&c.isReady){var M=c.getCurrentTime()||0,V=c.getSecondsLoaded(),L=c.getDuration();if(L){var H={playedSeconds:M,played:M/L};V!==null&&(H.loadedSeconds=V,H.loaded=V/L),(H.playedSeconds!==c.prevPlayed||H.loadedSeconds!==c.prevLoaded)&&c.props.onProgress(H),c.prevPlayed=H.playedSeconds,c.prevLoaded=H.loadedSeconds}}c.progressTimeout=setTimeout(c.progress,c.props.progressFrequency||c.props.progressInterval)}),q(k(c),"handleReady",function(){if(c.mounted){c.isReady=!0,c.isLoading=!1;var M=c.props,V=M.onReady,L=M.playing,H=M.volume,j=M.muted;V(),!j&&H!==null&&c.player.setVolume(H),c.loadOnReady?(c.player.load(c.loadOnReady,!0),c.loadOnReady=null):L&&c.player.play(),c.handleDurationCheck()}}),q(k(c),"handlePlay",function(){c.isPlaying=!0,c.isLoading=!1;var M=c.props,V=M.onStart,L=M.onPlay,H=M.playbackRate;c.startOnPlay&&(c.player.setPlaybackRate&&H!==1&&c.player.setPlaybackRate(H),V(),c.startOnPlay=!1),L(),c.seekOnPlay&&(c.seekTo(c.seekOnPlay),c.seekOnPlay=null),c.handleDurationCheck()}),q(k(c),"handlePause",function(M){c.isPlaying=!1,c.isLoading||c.props.onPause(M)}),q(k(c),"handleEnded",function(){var M=c.props,V=M.activePlayer,L=M.loop,H=M.onEnded;V.loopOnEnded&&L&&c.seekTo(0),L||(c.isPlaying=!1,H())}),q(k(c),"handleError",function(){var M;c.isLoading=!1,(M=c.props).onError.apply(M,arguments)}),q(k(c),"handleDurationCheck",function(){clearTimeout(c.durationCheckTimeout);var M=c.getDuration();M?c.onDurationCalled||(c.props.onDuration(M),c.onDurationCalled=!0):c.durationCheckTimeout=setTimeout(c.handleDurationCheck,100)}),q(k(c),"handleLoaded",function(){c.isLoading=!1}),c}return P(m,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}},{key:"componentDidUpdate",value:function(A){var $=this;if(this.player){var G=this.props,M=G.url,V=G.playing,L=G.volume,H=G.muted,j=G.playbackRate,S=G.pip,E=G.loop,C=G.activePlayer,h=G.disableDeferredLoading;if(!(0,a.default)(A.url,M)){if(this.isLoading&&!C.forceLoad&&!h&&!(0,s.isMediaStream)(M)){console.warn("ReactPlayer: the attempt to load ".concat(M," is being deferred until the player has loaded")),this.loadOnReady=M;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(M,this.isReady)}!A.playing&&V&&!this.isPlaying&&this.player.play(),A.playing&&!V&&this.isPlaying&&this.player.pause(),!A.pip&&S&&this.player.enablePIP&&this.player.enablePIP(),A.pip&&!S&&this.player.disablePIP&&this.player.disablePIP(),A.volume!==L&&L!==null&&this.player.setVolume(L),A.muted!==H&&(H?this.player.mute():(this.player.unmute(),L!==null&&setTimeout(function(){return $.player.setVolume(L)}))),A.playbackRate!==j&&this.player.setPlaybackRate&&this.player.setPlaybackRate(j),A.loop!==E&&this.player.setLoop&&this.player.setLoop(E)}}},{key:"getDuration",value:function(){return this.isReady?this.player.getDuration():null}},{key:"getCurrentTime",value:function(){return this.isReady?this.player.getCurrentTime():null}},{key:"getSecondsLoaded",value:function(){return this.isReady?this.player.getSecondsLoaded():null}},{key:"seekTo",value:function(A,$,G){var M=this;if(!this.isReady){A!==0&&(this.seekOnPlay=A,setTimeout(function(){M.seekOnPlay=null},I));return}var V=$?$==="fraction":A>0&&A<1;if(V){var L=this.player.getDuration();if(!L){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(L*A,G);return}this.player.seekTo(A,G)}},{key:"render",value:function(){var A=this.props.activePlayer;return A?n.default.createElement(A,b({},this.props,{onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError})):null}}]),m}(n.Component);r.default=y,q(y,"displayName","Player"),q(y,"propTypes",i.propTypes),q(y,"defaultProps",i.defaultProps)})(pn);var Qt={},kr;function es(){return kr||(kr=1,function(r){function t(I){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(l){return typeof l}:t=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},t(I)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(o);function a(){if(typeof WeakMap!="function")return null;var I=new WeakMap;return a=function(){return I},I}function i(I){if(I&&I.__esModule)return I;if(I===null||t(I)!=="object"&&typeof I!="function")return{default:I};var y=a();if(y&&y.has(I))return y.get(I);var l={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in I)if(Object.prototype.hasOwnProperty.call(I,m)){var c=f?Object.getOwnPropertyDescriptor(I,m):null;c&&(c.get||c.set)?Object.defineProperty(l,m,c):l[m]=I[m]}return l.default=I,y&&y.set(I,l),l}function s(I,y){var l=Object.keys(I);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(I);y&&(f=f.filter(function(m){return Object.getOwnPropertyDescriptor(I,m).enumerable})),l.push.apply(l,f)}return l}function d(I){for(var y=1;y<arguments.length;y++){var l=arguments[y]!=null?arguments[y]:{};y%2?s(Object(l),!0).forEach(function(f){k(I,f,l[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(l)):s(Object(l)).forEach(function(f){Object.defineProperty(I,f,Object.getOwnPropertyDescriptor(l,f))})}return I}function p(I,y){if(!(I instanceof y))throw new TypeError("Cannot call a class as a function")}function u(I,y){for(var l=0;l<y.length;l++){var f=y[l];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(I,f.key,f)}}function b(I,y,l){return y&&u(I.prototype,y),l&&u(I,l),I}function D(I,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(y&&y.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),y&&O(I,y)}function O(I,y){return O=Object.setPrototypeOf||function(f,m){return f.__proto__=m,f},O(I,y)}function P(I){var y=w();return function(){var f=F(I),m;if(y){var c=F(this).constructor;m=Reflect.construct(f,arguments,c)}else m=f.apply(this,arguments);return _(this,m)}}function _(I,y){return y&&(t(y)==="object"||typeof y=="function")?y:v(I)}function v(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I}function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function F(I){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},F(I)}function k(I,y,l){return y in I?Object.defineProperty(I,y,{value:l,enumerable:!0,configurable:!0,writable:!0}):I[y]=l,I}var z="64px",Y={},q=function(I){D(l,I);var y=P(l);function l(){var f;p(this,l);for(var m=arguments.length,c=new Array(m),A=0;A<m;A++)c[A]=arguments[A];return f=y.call.apply(y,[this].concat(c)),k(v(f),"mounted",!1),k(v(f),"state",{image:null}),k(v(f),"handleKeyPress",function($){($.key==="Enter"||$.key===" ")&&f.props.onClick()}),f}return b(l,[{key:"componentDidMount",value:function(){this.mounted=!0,this.fetchImage(this.props)}},{key:"componentDidUpdate",value:function(m){var c=this.props,A=c.url,$=c.light;(m.url!==A||m.light!==$)&&this.fetchImage(this.props)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchImage",value:function(m){var c=this,A=m.url,$=m.light,G=m.oEmbedUrl;if(!n.default.isValidElement($)){if(typeof $=="string"){this.setState({image:$});return}if(Y[A]){this.setState({image:Y[A]});return}return this.setState({image:null}),window.fetch(G.replace("{url}",A)).then(function(M){return M.json()}).then(function(M){if(M.thumbnail_url&&c.mounted){var V=M.thumbnail_url.replace("height=100","height=480").replace("-d_295x166","-d_640");c.setState({image:V}),Y[A]=V}})}}},{key:"render",value:function(){var m=this.props,c=m.light,A=m.onClick,$=m.playIcon,G=m.previewTabIndex,M=this.state.image,V=n.default.isValidElement(c),L={display:"flex",alignItems:"center",justifyContent:"center"},H={preview:d({width:"100%",height:"100%",backgroundImage:M&&!V?"url(".concat(M,")"):void 0,backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer"},L),shadow:d({background:"radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)",borderRadius:z,width:z,height:z,position:V?"absolute":void 0},L),playIcon:{borderStyle:"solid",borderWidth:"16px 0 16px 26px",borderColor:"transparent transparent transparent white",marginLeft:"7px"}},j=n.default.createElement("div",{style:H.shadow,className:"react-player__shadow"},n.default.createElement("div",{style:H.playIcon,className:"react-player__play-icon"}));return n.default.createElement("div",{style:H.preview,className:"react-player__preview",onClick:A,tabIndex:G,onKeyPress:this.handleKeyPress},V?c:null,$||j)}}]),l}(n.Component);r.default=q}(Qt)),Qt}Object.defineProperty(Wt,"__esModule",{value:!0});Wt.createReactPlayer=void 0;var tt=yn(o),ts=Bt(un),Zt=Bt(bi),Ir=Bt(hn),bt=rt,rs=we,ns=Bt(pn);function Bt(r){return r&&r.__esModule?r:{default:r}}function St(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?St=function(n){return typeof n}:St=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},St(r)}function Pr(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,a)}return n}function Ar(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pr(Object(n),!0).forEach(function(a){le(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}function Et(){return Et=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},Et.apply(this,arguments)}function er(r){return os(r)||ss(r)||is(r)||as()}function as(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function is(r,t){if(r){if(typeof r=="string")return ar(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ar(r,t)}}function ss(r){if(typeof Symbol<"u"&&Symbol.iterator in Object(r))return Array.from(r)}function os(r){if(Array.isArray(r))return ar(r)}function ar(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=r[n];return a}function ls(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Mr(r,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function cs(r,t,n){return t&&Mr(r.prototype,t),n&&Mr(r,n),r}function ds(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&ir(r,t)}function ir(r,t){return ir=Object.setPrototypeOf||function(a,i){return a.__proto__=i,a},ir(r,t)}function us(r){var t=ms();return function(){var a=Nt(r),i;if(t){var s=Nt(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return hs(this,i)}}function hs(r,t){return t&&(St(t)==="object"||typeof t=="function")?t:be(r)}function be(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ms(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Nt(r){return Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Nt(r)}function le(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function gn(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return gn=function(){return r},r}function yn(r){if(r&&r.__esModule)return r;if(r===null||St(r)!=="object"&&typeof r!="function")return{default:r};var t=gn();if(t&&t.has(r))return t.get(r);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var s=a?Object.getOwnPropertyDescriptor(r,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=r[i]}return n.default=r,t&&t.set(r,n),n}var fs=(0,tt.lazy)(function(){return Promise.resolve().then(function(){return yn(es())})}),ps=typeof window<"u"&&window.document,gs=typeof Kt<"u"&&Kt.window&&Kt.window.document,ys=Object.keys(bt.propTypes),xs=ps||gs?tt.Suspense:function(){return null},xt=[],vs=function(t,n){var a,i;return i=a=function(s){ds(p,s);var d=us(p);function p(){var u;ls(this,p);for(var b=arguments.length,D=new Array(b),O=0;O<b;O++)D[O]=arguments[O];return u=d.call.apply(d,[this].concat(D)),le(be(u),"state",{showPreview:!!u.props.light}),le(be(u),"references",{wrapper:function(_){u.wrapper=_},player:function(_){u.player=_}}),le(be(u),"handleClickPreview",function(P){u.setState({showPreview:!1}),u.props.onClickPreview(P)}),le(be(u),"showPreview",function(){u.setState({showPreview:!0})}),le(be(u),"getDuration",function(){return u.player?u.player.getDuration():null}),le(be(u),"getCurrentTime",function(){return u.player?u.player.getCurrentTime():null}),le(be(u),"getSecondsLoaded",function(){return u.player?u.player.getSecondsLoaded():null}),le(be(u),"getInternalPlayer",function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"player";return u.player?u.player.getInternalPlayer(P):null}),le(be(u),"seekTo",function(P,_,v){if(!u.player)return null;u.player.seekTo(P,_,v)}),le(be(u),"handleReady",function(){u.props.onReady(be(u))}),le(be(u),"getActivePlayer",(0,Zt.default)(function(P){for(var _=0,v=[].concat(xt,er(t));_<v.length;_++){var w=v[_];if(w.canPlay(P))return w}return n||null})),le(be(u),"getConfig",(0,Zt.default)(function(P,_){var v=u.props.config;return ts.default.all([bt.defaultProps.config,bt.defaultProps.config[_]||{},v,v[_]||{}])})),le(be(u),"getAttributes",(0,Zt.default)(function(P){return(0,rs.omit)(u.props,ys)})),le(be(u),"renderActivePlayer",function(P){if(!P)return null;var _=u.getActivePlayer(P);if(!_)return null;var v=u.getConfig(P,_.key);return tt.default.createElement(ns.default,Et({},u.props,{key:_.key,ref:u.references.player,config:v,activePlayer:_.lazyPlayer||_,onReady:u.handleReady}))}),u}return cs(p,[{key:"shouldComponentUpdate",value:function(b,D){return!(0,Ir.default)(this.props,b)||!(0,Ir.default)(this.state,D)}},{key:"componentDidUpdate",value:function(b){var D=this.props.light;!b.light&&D&&this.setState({showPreview:!0}),b.light&&!D&&this.setState({showPreview:!1})}},{key:"renderPreview",value:function(b){if(!b)return null;var D=this.props,O=D.light,P=D.playIcon,_=D.previewTabIndex,v=D.oEmbedUrl;return tt.default.createElement(fs,{url:b,light:O,playIcon:P,previewTabIndex:_,oEmbedUrl:v,onClick:this.handleClickPreview})}},{key:"render",value:function(){var b=this.props,D=b.url,O=b.style,P=b.width,_=b.height,v=b.fallback,w=b.wrapper,F=this.state.showPreview,k=this.getAttributes(D),z=typeof w=="string"?this.references.wrapper:void 0;return tt.default.createElement(w,Et({ref:z,style:Ar(Ar({},O),{},{width:P,height:_})},k),tt.default.createElement(xs,{fallback:v},F?this.renderPreview(D):this.renderActivePlayer(D)))}}]),p}(tt.Component),le(a,"displayName","ReactPlayer"),le(a,"propTypes",bt.propTypes),le(a,"defaultProps",bt.defaultProps),le(a,"addCustomPlayer",function(s){xt.push(s)}),le(a,"removeCustomPlayers",function(){xt.length=0}),le(a,"canPlay",function(s){for(var d=0,p=[].concat(xt,er(t));d<p.length;d++){var u=p[d];if(u.canPlay(s))return!0}return!1}),le(a,"canEnablePIP",function(s){for(var d=0,p=[].concat(xt,er(t));d<p.length;d++){var u=p[d];if(u.canEnablePIP&&u.canEnablePIP(s))return!0}return!1}),i};Wt.createReactPlayer=vs;var xn={},Q={};Object.defineProperty(Q,"__esModule",{value:!0});Q.canPlay=Q.FLV_EXTENSIONS=Q.DASH_EXTENSIONS=Q.HLS_EXTENSIONS=Q.VIDEO_EXTENSIONS=Q.AUDIO_EXTENSIONS=Q.MATCH_URL_KALTURA=Q.MATCH_URL_VIDYARD=Q.MATCH_URL_MIXCLOUD=Q.MATCH_URL_DAILYMOTION=Q.MATCH_URL_TWITCH_CHANNEL=Q.MATCH_URL_TWITCH_VIDEO=Q.MATCH_URL_WISTIA=Q.MATCH_URL_STREAMABLE=Q.MATCH_URL_FACEBOOK_WATCH=Q.MATCH_URL_FACEBOOK=Q.MATCH_URL_VIMEO=Q.MATCH_URL_SOUNDCLOUD=Q.MATCH_URL_YOUTUBE=void 0;var Or=we;function js(r,t){var n;if(typeof Symbol>"u"||r[Symbol.iterator]==null){if(Array.isArray(r)||(n=bs(r))||t&&r&&typeof r.length=="number"){n&&(r=n);var a=0,i=function(){};return{s:i,n:function(){return a>=r.length?{done:!0}:{done:!1,value:r[a++]}},e:function(b){throw b},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,d=!1,p;return{s:function(){n=r[Symbol.iterator]()},n:function(){var b=n.next();return s=b.done,b},e:function(b){d=!0,p=b},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(d)throw p}}}}function bs(r,t){if(r){if(typeof r=="string")return Er(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Er(r,t)}}function Er(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=r[n];return a}var sr=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//;Q.MATCH_URL_YOUTUBE=sr;var vn=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/;Q.MATCH_URL_SOUNDCLOUD=vn;var jn=/vimeo\.com\/(?!progressive_redirect).+/;Q.MATCH_URL_VIMEO=jn;var bn=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/;Q.MATCH_URL_FACEBOOK=bn;var Sn=/^https?:\/\/fb\.watch\/.+$/;Q.MATCH_URL_FACEBOOK_WATCH=Sn;var Cn=/streamable\.com\/([a-z0-9]+)$/;Q.MATCH_URL_STREAMABLE=Cn;var wn=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/;Q.MATCH_URL_WISTIA=wn;var Dn=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/;Q.MATCH_URL_TWITCH_VIDEO=Dn;var Tn=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/;Q.MATCH_URL_TWITCH_CHANNEL=Tn;var kn=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/;Q.MATCH_URL_DAILYMOTION=kn;var In=/mixcloud\.com\/([^/]+\/[^/]+)/;Q.MATCH_URL_MIXCLOUD=In;var Pn=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/;Q.MATCH_URL_VIDYARD=Pn;var An=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/;Q.MATCH_URL_KALTURA=An;var fr=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i;Q.AUDIO_EXTENSIONS=fr;var pr=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i;Q.VIDEO_EXTENSIONS=pr;var gr=/\.(m3u8)($|\?)/i;Q.HLS_EXTENSIONS=gr;var Mn=/\.(mpd)($|\?)/i;Q.DASH_EXTENSIONS=Mn;var On=/\.(flv)($|\?)/i;Q.FLV_EXTENSIONS=On;var Ss=function r(t){if(t instanceof Array){var n=js(t),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;if(typeof i=="string"&&r(i)||r(i.src))return!0}}catch(s){n.e(s)}finally{n.f()}return!1}return(0,Or.isMediaStream)(t)||(0,Or.isBlobUrl)(t)?!0:fr.test(t)||pr.test(t)||gr.test(t)||Mn.test(t)||On.test(t)},Cs={youtube:function(t){return t instanceof Array?t.every(function(n){return sr.test(n)}):sr.test(t)},soundcloud:function(t){return vn.test(t)&&!fr.test(t)},vimeo:function(t){return jn.test(t)&&!pr.test(t)&&!gr.test(t)},facebook:function(t){return bn.test(t)||Sn.test(t)},streamable:function(t){return Cn.test(t)},wistia:function(t){return wn.test(t)},twitch:function(t){return Dn.test(t)||Tn.test(t)},dailymotion:function(t){return kn.test(t)},mixcloud:function(t){return In.test(t)},vidyard:function(t){return Pn.test(t)},kaltura:function(t){return An.test(t)},file:Ss};Q.canPlay=Cs;(function(r){function t(j){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(E){return typeof E}:t=function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},t(j)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=d(o),a=we,i=Q;function s(){if(typeof WeakMap!="function")return null;var j=new WeakMap;return s=function(){return j},j}function d(j){if(j&&j.__esModule)return j;if(j===null||t(j)!=="object"&&typeof j!="function")return{default:j};var S=s();if(S&&S.has(j))return S.get(j);var E={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in j)if(Object.prototype.hasOwnProperty.call(j,h)){var x=C?Object.getOwnPropertyDescriptor(j,h):null;x&&(x.get||x.set)?Object.defineProperty(E,h,x):E[h]=j[h]}return E.default=j,S&&S.set(j,E),E}function p(j,S){var E=Object.keys(j);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(j);S&&(C=C.filter(function(h){return Object.getOwnPropertyDescriptor(j,h).enumerable})),E.push.apply(E,C)}return E}function u(j){for(var S=1;S<arguments.length;S++){var E=arguments[S]!=null?arguments[S]:{};S%2?p(Object(E),!0).forEach(function(C){m(j,C,E[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(E)):p(Object(E)).forEach(function(C){Object.defineProperty(j,C,Object.getOwnPropertyDescriptor(E,C))})}return j}function b(j,S){return v(j)||_(j,S)||O(j,S)||D()}function D(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(j,S){if(j){if(typeof j=="string")return P(j,S);var E=Object.prototype.toString.call(j).slice(8,-1);if(E==="Object"&&j.constructor&&(E=j.constructor.name),E==="Map"||E==="Set")return Array.from(j);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return P(j,S)}}function P(j,S){(S==null||S>j.length)&&(S=j.length);for(var E=0,C=new Array(S);E<S;E++)C[E]=j[E];return C}function _(j,S){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(j)))){var E=[],C=!0,h=!1,x=void 0;try{for(var N=j[Symbol.iterator](),U;!(C=(U=N.next()).done)&&(E.push(U.value),!(S&&E.length===S));C=!0);}catch(ae){h=!0,x=ae}finally{try{!C&&N.return!=null&&N.return()}finally{if(h)throw x}}return E}}function v(j){if(Array.isArray(j))return j}function w(j,S){if(!(j instanceof S))throw new TypeError("Cannot call a class as a function")}function F(j,S){for(var E=0;E<S.length;E++){var C=S[E];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(j,C.key,C)}}function k(j,S,E){return S&&F(j.prototype,S),E&&F(j,E),j}function z(j,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(S&&S.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),S&&Y(j,S)}function Y(j,S){return Y=Object.setPrototypeOf||function(C,h){return C.__proto__=h,C},Y(j,S)}function q(j){var S=l();return function(){var C=f(j),h;if(S){var x=f(this).constructor;h=Reflect.construct(C,arguments,x)}else h=C.apply(this,arguments);return I(this,h)}}function I(j,S){return S&&(t(S)==="object"||typeof S=="function")?S:y(j)}function y(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function l(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function f(j){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)},f(j)}function m(j,S,E){return S in j?Object.defineProperty(j,S,{value:E,enumerable:!0,configurable:!0,writable:!0}):j[S]=E,j}var c="https://www.youtube.com/iframe_api",A="YT",$="onYouTubeIframeAPIReady",G=/[?&](?:list|channel)=([a-zA-Z0-9_-]+)/,M=/user\/([a-zA-Z0-9_-]+)\/?/,V=/youtube-nocookie\.com/,L="https://www.youtube-nocookie.com",H=function(j){z(E,j);var S=q(E);function E(){var C;w(this,E);for(var h=arguments.length,x=new Array(h),N=0;N<h;N++)x[N]=arguments[N];return C=S.call.apply(S,[this].concat(x)),m(y(C),"callPlayer",a.callPlayer),m(y(C),"parsePlaylist",function(U){if(U instanceof Array)return{listType:"playlist",playlist:U.map(C.getID).join(",")};if(G.test(U)){var ae=U.match(G),ce=b(ae,2),Ye=ce[1];return{listType:"playlist",list:Ye.replace(/^UC/,"UU")}}if(M.test(U)){var Oe=U.match(M),je=b(Oe,2),R=je[1];return{listType:"user_uploads",list:R}}return{}}),m(y(C),"onStateChange",function(U){var ae=U.data,ce=C.props,Ye=ce.onPlay,Oe=ce.onPause,je=ce.onBuffer,R=ce.onBufferEnd,J=ce.onEnded,te=ce.onReady,Le=ce.loop,Qe=ce.config,st=Qe.playerVars,gt=Qe.onUnstarted,Ne=window[A].PlayerState,qn=Ne.UNSTARTED,Vn=Ne.PLAYING,Un=Ne.PAUSED,zn=Ne.BUFFERING,Hn=Ne.ENDED,Yn=Ne.CUED;if(ae===qn&&gt(),ae===Vn&&(Ye(),R()),ae===Un&&Oe(),ae===zn&&je(),ae===Hn){var Wn=!!C.callPlayer("getPlaylist");Le&&!Wn&&(st.start?C.seekTo(st.start):C.play()),J()}ae===Yn&&te()}),m(y(C),"mute",function(){C.callPlayer("mute")}),m(y(C),"unmute",function(){C.callPlayer("unMute")}),m(y(C),"ref",function(U){C.container=U}),C}return k(E,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"getID",value:function(h){return!h||h instanceof Array||G.test(h)?null:h.match(i.MATCH_URL_YOUTUBE)[1]}},{key:"load",value:function(h,x){var N=this,U=this.props,ae=U.playing,ce=U.muted,Ye=U.playsinline,Oe=U.controls,je=U.loop,R=U.config,J=U.onError,te=R.playerVars,Le=R.embedOptions,Qe=this.getID(h);if(x){if(G.test(h)||M.test(h)||h instanceof Array){this.player.loadPlaylist(this.parsePlaylist(h));return}this.player.cueVideoById({videoId:Qe,startSeconds:(0,a.parseStartTime)(h)||te.start,endSeconds:(0,a.parseEndTime)(h)||te.end});return}(0,a.getSDK)(c,A,$,function(st){return st.loaded}).then(function(st){N.container&&(N.player=new st.Player(N.container,u({width:"100%",height:"100%",videoId:Qe,playerVars:u(u({autoplay:ae?1:0,mute:ce?1:0,controls:Oe?1:0,start:(0,a.parseStartTime)(h),end:(0,a.parseEndTime)(h),origin:window.location.origin,playsinline:Ye?1:0},N.parsePlaylist(h)),te),events:{onReady:function(){je&&N.player.setLoop(!0),N.props.onReady()},onPlaybackRateChange:function(Ne){return N.props.onPlaybackRateChange(Ne.data)},onPlaybackQualityChange:function(Ne){return N.props.onPlaybackQualityChange(Ne)},onStateChange:N.onStateChange,onError:function(Ne){return J(Ne.data)}},host:V.test(h)?L:void 0},Le)))},J),Le.events&&console.warn("Using `embedOptions.events` will likely break things. Use ReactPlayer’s callback props instead, eg onReady, onPlay, onPause")}},{key:"play",value:function(){this.callPlayer("playVideo")}},{key:"pause",value:function(){this.callPlayer("pauseVideo")}},{key:"stop",value:function(){document.body.contains(this.callPlayer("getIframe"))&&this.callPlayer("stopVideo")}},{key:"seekTo",value:function(h){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.callPlayer("seekTo",h),!x&&!this.props.playing&&this.pause()}},{key:"setVolume",value:function(h){this.callPlayer("setVolume",h*100)}},{key:"setPlaybackRate",value:function(h){this.callPlayer("setPlaybackRate",h)}},{key:"setLoop",value:function(h){this.callPlayer("setLoop",h)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return this.callPlayer("getVideoLoadedFraction")*this.getDuration()}},{key:"render",value:function(){var h=this.props.display,x={width:"100%",height:"100%",display:h};return n.default.createElement("div",{style:x},n.default.createElement("div",{ref:this.ref}))}}]),E}(n.Component);r.default=H,m(H,"displayName","YouTube"),m(H,"canPlay",i.canPlay.youtube)})(xn);var ws=Wt.createReactPlayer,Nr=xn.default,Ds=ws([{key:"youtube",canPlay:Nr.canPlay,lazyPlayer:Nr}]);const Ts=ha(Ds),_r=[],ks=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(),[s,d]=o.useState(!0),[p,u]=o.useState(1),[b,D]=o.useState(0),[O,P]=o.useState(0),[_,v]=o.useState(!0),[w]=T.useForm();fe();const[F,k]=o.useState(!1),[z,Y]=o.useState(!1),[q,I]=o.useState(0),[y,l]=o.useState(!1),f=o.useRef([]),m=async j=>{i(j),l(!0)},c=()=>{Y(!0)},A=()=>{k(!0)},$=async(j,S="",E=!1)=>{const{data:C}=await W.custom({url:"",method:"get",meta:{operation:"darasaVideos",variables:{page:{value:j,type:"Int",required:!0},key:{value:S,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","description","url","video","isYoutube","created","updated","isActive","canDelete","canEdit",{darasa:["id"]},{author:["id","fullName","firstName","middleName","lastName"]}]}]}}).catch(()=>(g.error("Error loading videos"),{data:null})).then(h=>h);C&&(P(C.total),D(C.pages),u(C.page),v(C.hasNext),n(C.results.map(h=>({...h,isPlaying:!1})))),d(!1)},G=async j=>{n([j,...t]),Y(!1)},M=(j,S)=>{_r[S]=j},V=(j,S)=>{q.toString()!==j.toString()&&I(j),n(t.map((E,C)=>E.id.toString()===j.toString()?{...E,isPlaying:S}:{...E,isPlaying:!1}))},L=async j=>{const{data:S}=await W.custom({url:"",method:"post",meta:{operation:"deleteClassVideo",variables:{id:{value:j,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error deleting video"),{data:null})).then(E=>E);S&&(S.success?(g.success(S.message),n(t.filter(E=>E.id!==j))):g.error(S.message))},H=j=>{ge.confirm({title:"Removing Video",icon:e.jsx(ye,{}),content:"Are you sure ...",okText:"Remove",cancelText:"Cancel",onOk:()=>L(j)})};return o.useEffect(()=>{$(p)},[]),s?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:s,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:20,children:e.jsx(T,{layout:"vertical",form:w,onFinish:j=>{u(0),$(0,j.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Video(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Se,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{disabled:!r.canManage,children:e.jsxs("a",{target:"_blank",rel:"noopener noreferrer",onClick:A,children:[e.jsx(Kr,{}),e.jsx("span",{style:{marginLeft:10},children:"Upload Video"})]})}),e.jsx(B.Item,{children:e.jsxs("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>c(),children:[e.jsx(dt,{}),e.jsx("span",{style:{marginLeft:10},children:"Youtube-Video"})]})})]}),placement:"bottomRight",overlayStyle:{zIndex:9999},children:e.jsx(K,{size:"large",icon:e.jsx(Ut,{}),children:"Add Video"})})})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[t.length>0?e.jsx(Z,{align:"top",children:t.map((j,S)=>e.jsx(X,{span:12,children:e.jsxs(Ie,{hoverable:j.isActive,style:{marginRight:10},title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:j.title}),e.jsx(ma,{title:ue(j.created).format("LLLL"),placement:"top",children:e.jsxs(sn.Tag,{color:"red",style:{float:"right"},children:["Published: ",ue(j.created).fromNow()]})}),e.jsx(Pe,{style:{right:0,position:"absolute",zIndex:"inherit"},children:e.jsx(Se,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(We,{}),disabled:!j.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>m(j),children:"View Info's"})}),e.jsx(B.Item,{icon:e.jsx(Ee,{}),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(B.Item,{icon:e.jsx(ht,{}),onClick:()=>H(j.id),disabled:!r.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:E=>E.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})]}),children:[j.isYoutube&&e.jsx(Ts,{url:j.url,width:"100%"}),!j.isYoutube&&e.jsx("span",{onClick:()=>{V(j.id,!0),_r[S].pause()},children:e.jsx(ni,{ref:f.current[S],index:S,file:j.video,videoId:j.id,updatePlaying:V,isPlaying:q.toString()===j.id.toString(),updatePlayer:M})})]})}))}):e.jsx(at,{severity:"info",children:"No Video found for this class, please add one"}),_&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{type:"primary",onClick:()=>{$(p+1)},children:"Load More"})})]}),e.jsx(ie,{title:"Uploading Video",open:F,onClose:j=>k(j),width:"50vw",children:e.jsx(ri,{id:r.id,random:Math.random(),handleAddingVideo:G})}),e.jsx(ie,{title:"Adding Youtube Video",open:z,onClose:j=>Y(j),width:"50vw",children:e.jsx(ei,{id:r.id,random:Math.random(),handleAddingDrive:G})}),e.jsx(It,{title:"Video Info's",width:"40vw",anchor:"right",onClose:j=>l(j),open:y,children:e.jsx(e.Fragment,{children:a&&e.jsxs(e.Fragment,{children:[" ",e.jsx("div",{dangerouslySetInnerHTML:{__html:a.description}})]})})})]})};function nt(r){if(r===null||r===!0||r===!1)return NaN;var t=Number(r);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Me(r,t){if(t.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+t.length+" present")}function Be(r){Me(1,arguments);var t=Object.prototype.toString.call(r);return r instanceof Date||Jr(r)==="object"&&t==="[object Date]"?new Date(r.getTime()):typeof r=="number"||t==="[object Number]"?new Date(r):((typeof r=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Is(r,t){Me(2,arguments);var n=Be(r).getTime(),a=nt(t);return new Date(n+a)}var Ps={};function $t(){return Ps}function As(r){var t=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return t.setUTCFullYear(r.getFullYear()),r.getTime()-t.getTime()}function Ms(r){return Me(1,arguments),r instanceof Date||Jr(r)==="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Os(r){if(Me(1,arguments),!Ms(r)&&typeof r!="number")return!1;var t=Be(r);return!isNaN(Number(t))}function Es(r,t){Me(2,arguments);var n=nt(t);return Is(r,-n)}var Ns=864e5;function _s(r){Me(1,arguments);var t=Be(r),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var a=t.getTime(),i=n-a;return Math.floor(i/Ns)+1}function _t(r){Me(1,arguments);var t=1,n=Be(r),a=n.getUTCDay(),i=(a<t?7:0)+a-t;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function En(r){Me(1,arguments);var t=Be(r),n=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var i=_t(a),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var d=_t(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=d.getTime()?n:n-1}function Fs(r){Me(1,arguments);var t=En(r),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var a=_t(n);return a}var Rs=6048e5;function Ls(r){Me(1,arguments);var t=Be(r),n=_t(t).getTime()-Fs(t).getTime();return Math.round(n/Rs)+1}function Ft(r,t){var n,a,i,s,d,p,u,b;Me(1,arguments);var D=$t(),O=nt((n=(a=(i=(s=t==null?void 0:t.weekStartsOn)!==null&&s!==void 0?s:t==null||(d=t.locale)===null||d===void 0||(p=d.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&i!==void 0?i:D.weekStartsOn)!==null&&a!==void 0?a:(u=D.locale)===null||u===void 0||(b=u.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&n!==void 0?n:0);if(!(O>=0&&O<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var P=Be(r),_=P.getUTCDay(),v=(_<O?7:0)+_-O;return P.setUTCDate(P.getUTCDate()-v),P.setUTCHours(0,0,0,0),P}function Nn(r,t){var n,a,i,s,d,p,u,b;Me(1,arguments);var D=Be(r),O=D.getUTCFullYear(),P=$t(),_=nt((n=(a=(i=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(d=t.locale)===null||d===void 0||(p=d.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&i!==void 0?i:P.firstWeekContainsDate)!==null&&a!==void 0?a:(u=P.locale)===null||u===void 0||(b=u.options)===null||b===void 0?void 0:b.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(_>=1&&_<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=new Date(0);v.setUTCFullYear(O+1,0,_),v.setUTCHours(0,0,0,0);var w=Ft(v,t),F=new Date(0);F.setUTCFullYear(O,0,_),F.setUTCHours(0,0,0,0);var k=Ft(F,t);return D.getTime()>=w.getTime()?O+1:D.getTime()>=k.getTime()?O:O-1}function qs(r,t){var n,a,i,s,d,p,u,b;Me(1,arguments);var D=$t(),O=nt((n=(a=(i=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(d=t.locale)===null||d===void 0||(p=d.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&i!==void 0?i:D.firstWeekContainsDate)!==null&&a!==void 0?a:(u=D.locale)===null||u===void 0||(b=u.options)===null||b===void 0?void 0:b.firstWeekContainsDate)!==null&&n!==void 0?n:1),P=Nn(r,t),_=new Date(0);_.setUTCFullYear(P,0,O),_.setUTCHours(0,0,0,0);var v=Ft(_,t);return v}var Vs=6048e5;function Us(r,t){Me(1,arguments);var n=Be(r),a=Ft(n,t).getTime()-qs(n,t).getTime();return Math.round(a/Vs)+1}function se(r,t){for(var n=r<0?"-":"",a=Math.abs(r).toString();a.length<t;)a="0"+a;return n+a}var zs={y:function(t,n){var a=t.getUTCFullYear(),i=a>0?a:1-a;return se(n==="yy"?i%100:i,n.length)},M:function(t,n){var a=t.getUTCMonth();return n==="M"?String(a+1):se(a+1,2)},d:function(t,n){return se(t.getUTCDate(),n.length)},a:function(t,n){var a=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h:function(t,n){return se(t.getUTCHours()%12||12,n.length)},H:function(t,n){return se(t.getUTCHours(),n.length)},m:function(t,n){return se(t.getUTCMinutes(),n.length)},s:function(t,n){return se(t.getUTCSeconds(),n.length)},S:function(t,n){var a=n.length,i=t.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,a-3));return se(s,n.length)}};const Ke=zs;var ct={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Hs={G:function(t,n,a){var i=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return a.era(i,{width:"abbreviated"});case"GGGGG":return a.era(i,{width:"narrow"});case"GGGG":default:return a.era(i,{width:"wide"})}},y:function(t,n,a){if(n==="yo"){var i=t.getUTCFullYear(),s=i>0?i:1-i;return a.ordinalNumber(s,{unit:"year"})}return Ke.y(t,n)},Y:function(t,n,a,i){var s=Nn(t,i),d=s>0?s:1-s;if(n==="YY"){var p=d%100;return se(p,2)}return n==="Yo"?a.ordinalNumber(d,{unit:"year"}):se(d,n.length)},R:function(t,n){var a=En(t);return se(a,n.length)},u:function(t,n){var a=t.getUTCFullYear();return se(a,n.length)},Q:function(t,n,a){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return se(i,2);case"Qo":return a.ordinalNumber(i,{unit:"quarter"});case"QQQ":return a.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,n,a){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return se(i,2);case"qo":return a.ordinalNumber(i,{unit:"quarter"});case"qqq":return a.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,n,a){var i=t.getUTCMonth();switch(n){case"M":case"MM":return Ke.M(t,n);case"Mo":return a.ordinalNumber(i+1,{unit:"month"});case"MMM":return a.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(i,{width:"wide",context:"formatting"})}},L:function(t,n,a){var i=t.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return se(i+1,2);case"Lo":return a.ordinalNumber(i+1,{unit:"month"});case"LLL":return a.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(i,{width:"wide",context:"standalone"})}},w:function(t,n,a,i){var s=Us(t,i);return n==="wo"?a.ordinalNumber(s,{unit:"week"}):se(s,n.length)},I:function(t,n,a){var i=Ls(t);return n==="Io"?a.ordinalNumber(i,{unit:"week"}):se(i,n.length)},d:function(t,n,a){return n==="do"?a.ordinalNumber(t.getUTCDate(),{unit:"date"}):Ke.d(t,n)},D:function(t,n,a){var i=_s(t);return n==="Do"?a.ordinalNumber(i,{unit:"dayOfYear"}):se(i,n.length)},E:function(t,n,a){var i=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return a.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(i,{width:"short",context:"formatting"});case"EEEE":default:return a.day(i,{width:"wide",context:"formatting"})}},e:function(t,n,a,i){var s=t.getUTCDay(),d=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(d);case"ee":return se(d,2);case"eo":return a.ordinalNumber(d,{unit:"day"});case"eee":return a.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(s,{width:"short",context:"formatting"});case"eeee":default:return a.day(s,{width:"wide",context:"formatting"})}},c:function(t,n,a,i){var s=t.getUTCDay(),d=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(d);case"cc":return se(d,n.length);case"co":return a.ordinalNumber(d,{unit:"day"});case"ccc":return a.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(s,{width:"narrow",context:"standalone"});case"cccccc":return a.day(s,{width:"short",context:"standalone"});case"cccc":default:return a.day(s,{width:"wide",context:"standalone"})}},i:function(t,n,a){var i=t.getUTCDay(),s=i===0?7:i;switch(n){case"i":return String(s);case"ii":return se(s,n.length);case"io":return a.ordinalNumber(s,{unit:"day"});case"iii":return a.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(i,{width:"short",context:"formatting"});case"iiii":default:return a.day(i,{width:"wide",context:"formatting"})}},a:function(t,n,a){var i=t.getUTCHours(),s=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,n,a){var i=t.getUTCHours(),s;switch(i===12?s=ct.noon:i===0?s=ct.midnight:s=i/12>=1?"pm":"am",n){case"b":case"bb":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,n,a){var i=t.getUTCHours(),s;switch(i>=17?s=ct.evening:i>=12?s=ct.afternoon:i>=4?s=ct.morning:s=ct.night,n){case"B":case"BB":case"BBB":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,n,a){if(n==="ho"){var i=t.getUTCHours()%12;return i===0&&(i=12),a.ordinalNumber(i,{unit:"hour"})}return Ke.h(t,n)},H:function(t,n,a){return n==="Ho"?a.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Ke.H(t,n)},K:function(t,n,a){var i=t.getUTCHours()%12;return n==="Ko"?a.ordinalNumber(i,{unit:"hour"}):se(i,n.length)},k:function(t,n,a){var i=t.getUTCHours();return i===0&&(i=24),n==="ko"?a.ordinalNumber(i,{unit:"hour"}):se(i,n.length)},m:function(t,n,a){return n==="mo"?a.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Ke.m(t,n)},s:function(t,n,a){return n==="so"?a.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Ke.s(t,n)},S:function(t,n){return Ke.S(t,n)},X:function(t,n,a,i){var s=i._originalDate||t,d=s.getTimezoneOffset();if(d===0)return"Z";switch(n){case"X":return Rr(d);case"XXXX":case"XX":return Ze(d);case"XXXXX":case"XXX":default:return Ze(d,":")}},x:function(t,n,a,i){var s=i._originalDate||t,d=s.getTimezoneOffset();switch(n){case"x":return Rr(d);case"xxxx":case"xx":return Ze(d);case"xxxxx":case"xxx":default:return Ze(d,":")}},O:function(t,n,a,i){var s=i._originalDate||t,d=s.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Fr(d,":");case"OOOO":default:return"GMT"+Ze(d,":")}},z:function(t,n,a,i){var s=i._originalDate||t,d=s.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Fr(d,":");case"zzzz":default:return"GMT"+Ze(d,":")}},t:function(t,n,a,i){var s=i._originalDate||t,d=Math.floor(s.getTime()/1e3);return se(d,n.length)},T:function(t,n,a,i){var s=i._originalDate||t,d=s.getTime();return se(d,n.length)}};function Fr(r,t){var n=r>0?"-":"+",a=Math.abs(r),i=Math.floor(a/60),s=a%60;if(s===0)return n+String(i);var d=t||"";return n+String(i)+d+se(s,2)}function Rr(r,t){if(r%60===0){var n=r>0?"-":"+";return n+se(Math.abs(r)/60,2)}return Ze(r,t)}function Ze(r,t){var n=t||"",a=r>0?"-":"+",i=Math.abs(r),s=se(Math.floor(i/60),2),d=se(i%60,2);return a+s+n+d}const Ys=Hs;var Lr=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},_n=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Ws=function(t,n){var a=t.match(/(P+)(p+)?/)||[],i=a[1],s=a[2];if(!s)return Lr(t,n);var d;switch(i){case"P":d=n.dateTime({width:"short"});break;case"PP":d=n.dateTime({width:"medium"});break;case"PPP":d=n.dateTime({width:"long"});break;case"PPPP":default:d=n.dateTime({width:"full"});break}return d.replace("{{date}}",Lr(i,n)).replace("{{time}}",_n(s,n))},Bs={p:_n,P:Ws};const $s=Bs;var Gs=["D","DD"],Ks=["YY","YYYY"];function Xs(r){return Gs.indexOf(r)!==-1}function Js(r){return Ks.indexOf(r)!==-1}function qr(r,t,n){if(r==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Qs={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Zs=function(t,n,a){var i,s=Qs[t];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+i:i+" ago":i};const eo=Zs;function tr(r){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):r.defaultWidth,a=r.formats[n]||r.formats[r.defaultWidth];return a}}var to={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ro={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},no={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ao={date:tr({formats:to,defaultWidth:"full"}),time:tr({formats:ro,defaultWidth:"full"}),dateTime:tr({formats:no,defaultWidth:"full"})};const io=ao;var so={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},oo=function(t,n,a,i){return so[t]};const lo=oo;function vt(r){return function(t,n){var a=n!=null&&n.context?String(n.context):"standalone",i;if(a==="formatting"&&r.formattingValues){var s=r.defaultFormattingWidth||r.defaultWidth,d=n!=null&&n.width?String(n.width):s;i=r.formattingValues[d]||r.formattingValues[s]}else{var p=r.defaultWidth,u=n!=null&&n.width?String(n.width):r.defaultWidth;i=r.values[u]||r.values[p]}var b=r.argumentCallback?r.argumentCallback(t):t;return i[b]}}var co={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},uo={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ho={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},mo={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},po={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},go=function(t,n){var a=Number(t),i=a%100;if(i>20||i<10)switch(i%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},yo={ordinalNumber:go,era:vt({values:co,defaultWidth:"wide"}),quarter:vt({values:uo,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:vt({values:ho,defaultWidth:"wide"}),day:vt({values:mo,defaultWidth:"wide"}),dayPeriod:vt({values:fo,defaultWidth:"wide",formattingValues:po,defaultFormattingWidth:"wide"})};const xo=yo;function jt(r){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.width,i=a&&r.matchPatterns[a]||r.matchPatterns[r.defaultMatchWidth],s=t.match(i);if(!s)return null;var d=s[0],p=a&&r.parsePatterns[a]||r.parsePatterns[r.defaultParseWidth],u=Array.isArray(p)?jo(p,function(O){return O.test(d)}):vo(p,function(O){return O.test(d)}),b;b=r.valueCallback?r.valueCallback(u):u,b=n.valueCallback?n.valueCallback(b):b;var D=t.slice(d.length);return{value:b,rest:D}}}function vo(r,t){for(var n in r)if(r.hasOwnProperty(n)&&t(r[n]))return n}function jo(r,t){for(var n=0;n<r.length;n++)if(t(r[n]))return n}function bo(r){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.match(r.matchPattern);if(!a)return null;var i=a[0],s=t.match(r.parsePattern);if(!s)return null;var d=r.valueCallback?r.valueCallback(s[0]):s[0];d=n.valueCallback?n.valueCallback(d):d;var p=t.slice(i.length);return{value:d,rest:p}}}var So=/^(\d+)(th|st|nd|rd)?/i,Co=/\d+/i,wo={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Do={any:[/^b/i,/^(a|c)/i]},To={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ko={any:[/1/i,/2/i,/3/i,/4/i]},Io={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Po={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ao={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Mo={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Oo={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Eo={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},No={ordinalNumber:bo({matchPattern:So,parsePattern:Co,valueCallback:function(t){return parseInt(t,10)}}),era:jt({matchPatterns:wo,defaultMatchWidth:"wide",parsePatterns:Do,defaultParseWidth:"any"}),quarter:jt({matchPatterns:To,defaultMatchWidth:"wide",parsePatterns:ko,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:jt({matchPatterns:Io,defaultMatchWidth:"wide",parsePatterns:Po,defaultParseWidth:"any"}),day:jt({matchPatterns:Ao,defaultMatchWidth:"wide",parsePatterns:Mo,defaultParseWidth:"any"}),dayPeriod:jt({matchPatterns:Oo,defaultMatchWidth:"any",parsePatterns:Eo,defaultParseWidth:"any"})};const _o=No;var Fo={code:"en-US",formatDistance:eo,formatLong:io,formatRelative:lo,localize:xo,match:_o,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Ro=Fo;var Lo=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,qo=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Vo=/^'([^]*?)'?$/,Uo=/''/g,zo=/[a-zA-Z]/;function Rt(r,t,n){var a,i,s,d,p,u,b,D,O,P,_,v,w,F,k,z,Y,q;Me(2,arguments);var I=String(t),y=$t(),l=(a=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:y.locale)!==null&&a!==void 0?a:Ro,f=nt((s=(d=(p=(u=n==null?void 0:n.firstWeekContainsDate)!==null&&u!==void 0?u:n==null||(b=n.locale)===null||b===void 0||(D=b.options)===null||D===void 0?void 0:D.firstWeekContainsDate)!==null&&p!==void 0?p:y.firstWeekContainsDate)!==null&&d!==void 0?d:(O=y.locale)===null||O===void 0||(P=O.options)===null||P===void 0?void 0:P.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=nt((_=(v=(w=(F=n==null?void 0:n.weekStartsOn)!==null&&F!==void 0?F:n==null||(k=n.locale)===null||k===void 0||(z=k.options)===null||z===void 0?void 0:z.weekStartsOn)!==null&&w!==void 0?w:y.weekStartsOn)!==null&&v!==void 0?v:(Y=y.locale)===null||Y===void 0||(q=Y.options)===null||q===void 0?void 0:q.weekStartsOn)!==null&&_!==void 0?_:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!l.localize)throw new RangeError("locale must contain localize property");if(!l.formatLong)throw new RangeError("locale must contain formatLong property");var c=Be(r);if(!Os(c))throw new RangeError("Invalid time value");var A=As(c),$=Es(c,A),G={firstWeekContainsDate:f,weekStartsOn:m,locale:l,_originalDate:c},M=I.match(qo).map(function(V){var L=V[0];if(L==="p"||L==="P"){var H=$s[L];return H(V,l.formatLong)}return V}).join("").match(Lo).map(function(V){if(V==="''")return"'";var L=V[0];if(L==="'")return Ho(V);var H=Ys[L];if(H)return!(n!=null&&n.useAdditionalWeekYearTokens)&&Js(V)&&qr(V,t,String(r)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&Xs(V)&&qr(V,t,String(r)),H($,V,l.localize,G);if(L.match(zo))throw new RangeError("Format string contains an unescaped latin alphabet character `"+L+"`");return V}).join("");return M}function Ho(r){var t=r.match(Vo);return t?t[1].replace(Uo,"'"):r}const{Option:Yo}=Re,Vr=[{value:"",label:"Select Duration Type"},{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"}],Wo=r=>{const[t,n]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:r.form,onFinish:a=>{a.description=t,r.onFinish(a),n("")},requiredMark:!1,children:[e.jsx(T.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(ne,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(T.Item,{name:"startDate",label:"start Date",rules:[{required:!0,type:"date",message:"Please select date"}],children:e.jsx(it,{showTime:{format:"HH:mm"},disabledDate:a=>{const i=ue().format("YYYY-MM-DD");return a&&a<ue(i,"YYYY-MM-DD")},style:{width:"100%"},popupStyle:{zIndex:9999}})}),e.jsxs(Z,{children:[e.jsx(X,{span:12,children:e.jsx(T.Item,{name:"duration",label:"Duration",style:{width:"100%"},rules:[{required:!0,type:"integer",message:"Enter Duration"}],children:e.jsx(Xe,{min:1,defaultValue:1,style:{width:"100%"},size:"large"})})}),e.jsx(X,{span:12,children:e.jsx(T.Item,{name:"durationType",label:"Duration Type",style:{width:"100%"},rules:[{required:!0,type:"string",message:"Please select duration type"}],children:e.jsx(Re,{defaultValue:Vr[0].value,size:"large",style:{width:"100%"},dropdownStyle:{zIndex:9999},children:Vr.map(a=>e.jsx(Yo,{children:a.label},a.value))})})})]}),e.jsx("h3",{children:"Description"}),e.jsx(ze.CKEditor,{editor:He,data:t,onReady:a=>{a.editing.view.change(i=>{i.setStyle("min-height","100px",a.editing.view.document.getRoot())})},onChange:(a,i)=>{const s=i.getData();n(s)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Bo=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(),[s,d]=o.useState(!0),[p,u]=o.useState(1);o.useState(25);const[b]=T.useForm(),[D,O]=o.useState(0),[P,_]=o.useState(0),[v,w]=o.useState(!0),{push:F}=fe(),[k,z]=o.useState(!1),[Y]=T.useForm(),[q,I]=o.useState(!1),[y]=T.useForm(),l=M=>{i(M),I(!0)},f=()=>{z(!0)},m=async M=>{const{data:V}=await W.custom({url:"",method:"post",meta:{operation:"editVirtualClass",variables:{id:{value:M.id,type:"Int",required:!0},name:{value:M.name,type:"String",required:!0},description:{value:M.description,type:"String",required:!0},duration:{value:M.duration,type:"Int",required:!0},durationType:{value:M.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:M.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(()=>(g.error("Error editing class"),{data:null})).then(L=>L);V&&(V.success?(g.success(V.message),n(t.map(L=>L.id===V.virtual.id?V.virtual:L)),I(!1)):g.error(V.message))},c=async M=>{const{data:V}=await W.custom({url:"",method:"post",meta:{operation:"createVirtualClass",variables:{darasaId:{value:parseInt(r.id?r.id.toString():"0"),type:"Int",required:!1},name:{value:M.name,type:"String",required:!0},description:{value:M.description,type:"String",required:!0},duration:{value:M.duration,type:"Int",required:!0},durationType:{value:M.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:M.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(()=>(g.error("Error creating virtual class"),{data:null})).then(L=>L);V&&(V.success?(g.success(V.message),z(!1),n([V.virtual,...t])):g.error(V.message))},A=async(M,V="",L=!1)=>{const{data:H}=await W.custom({url:"",method:"get",meta:{operation:"darasaVirtuals",variables:{page:{value:M,type:"Int",required:!0},key:{value:V,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","middleName","lastName","email","fullName","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(()=>(g.error("Error fetching virtual classes"),{data:null})).then(j=>j);H&&(_(H.total),O(H.pages),u(H.page),w(H.hasNext),n(L?H.results:[...t,...H.results])),d(!1)},$=async M=>{const{data:V}=await W.custom({url:"",method:"post",meta:{operation:"deleteVirtualClass",variables:{id:{value:M,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(g.error("Error deleting virtual class"),{data:null})).then(L=>L);V&&(V.success?(g.success(V.message),n(t.filter(L=>L.id!==M))):g.error(V.message))},G=M=>{ge.confirm({title:"Deleting Virtual Class Session",icon:e.jsx(ye,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>$(M)})};return o.useEffect(()=>{A(p)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:20,children:e.jsx(T,{layout:"vertical",form:b,onFinish:M=>A(0,M.key,!0),children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Virtual Sessions...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{icon:e.jsx(dt,{}),onClick:f,disabled:!r.canManage,size:"large",children:"Create Virtual Session"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(de,{spinning:s,children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,renderItem:M=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(Ie,{children:e.jsx(ee.Item,{actions:[e.jsx(Se,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(zt,{}),disabled:!M.canJoin,onClick:()=>F("/oclass/virtual/class/session/"+M.id+"/"+M.token),children:e.jsx("a",{children:"Join"})}),M.canDelete?e.jsx(B.Item,{disabled:!M.canDelete,icon:e.jsx($e,{}),onClick:()=>G(M.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}):e.jsx(e.Fragment,{}),M.canEdit&&e.jsx(B.Item,{icon:e.jsx(kt,{}),disabled:!M.canEdit,onClick:()=>l(M),children:e.jsx("a",{children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:V=>V.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(Ue,{avatar:!0,title:!1,loading:!1,active:!0,children:e.jsx(ee.Item.Meta,{avatar:e.jsx(Ce,{}),title:e.jsx("a",{onClick:()=>M.canJoin?F("/oclass/virtual/class/session/"+M.id+"/"+M.token):g("You can't join this session"),children:M.name}),description:e.jsxs(e.Fragment,{children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:M.description}}),e.jsxs("p",{children:[e.jsxs(oe,{color:"green",children:["Start At:"," ",Rt(new Date(M.startDate),"MMMM do, yyyy H:mma")]}),e.jsxs(oe,{color:"green",children:["End In:"," ",Rt(new Date(M.endDate),"MMMM do, yyyy H:mma")]}),M.canJoin?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx(oe,{color:"red",children:"Not Joinable"})})]})]})})})})})},"class-virtual-session-item-container-"+M.id)}),v&&e.jsx("div",{style:{textAlign:"center",marginTop:12},children:e.jsx("button",{onClick:()=>{A(p+1)},children:"Load More"})})]})}),e.jsx(ie,{title:"Creating Class Virtual Session",open:k,onClose:M=>z(M),width:"50vw",children:e.jsx(Wo,{form:Y,onFinish:c})}),e.jsx(ie,{title:"Editting "+(a==null?void 0:a.name),width:"40vw",open:q,onClose:M=>I(M),children:e.jsx(Qr,{form:y,darasa:a,onFinish:m})})]})};function Dt(r){"@babel/helpers - typeof";return Dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(r)}function Ur(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,a)}return n}function or(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ur(Object(n),!0).forEach(function(a){et(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}function et(r,t,n){return t=$o(t),t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function $o(r){var t=Go(r,"string");return Dt(t)==="symbol"?t:String(t)}function Go(r,t){if(Dt(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var a=n.call(r,t||"default");if(Dt(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var Ko=function(t){var n,a=t.componentCls,i=t.colorBgContainer,s=t.fontSize,d=t.fontSizeSM,p=t.padding,u=t.paddingXS,b=t.marginSM,D=t.marginXXS,O=t.controlHeight,P=t.lineHeightSM,_=t.colorText,v=t.colorTextSecondary,w=t.colorTextTertiary,F=t.motionDurationSlow;return et({},a,or(or({},ga(t)),{},(n={position:"relative",backgroundColor:i},et(n,"".concat(a,"-inner"),{display:"flex",paddingBlock:p}),et(n,"".concat(a,"-avatar"),{position:"relative",flexShrink:0,marginInlineEnd:b,cursor:"pointer",img:{width:O,height:O,borderRadius:"50%"}}),et(n,"".concat(a,"-content"),{position:"relative",flex:"auto",minWidth:0,wordWrap:"break-word","&-author":{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",marginBottom:D,"& > a, & > span":{paddingInlineEnd:u,fontSize:d,lineHeight:P},"&-name":{color:v,fontSize:s,transition:"color ".concat(F),"> *":{color:v,"&:hover":{color:v}}},"&-time":{color:w,whiteSpace:"nowrap",cursor:"auto"}},"&-detail p":{whiteSpace:"pre-wrap",marginBlock:0}}),et(n,"".concat(a,"-actions"),{marginTop:b,marginBottom:0,paddingInlineStart:0,"> li":{display:"inline-block",color:v,"> span":{marginInlineEnd:b,color:v,fontSize:d,cursor:"pointer",transition:"color ".concat(F),userSelect:"none","&:hover":{color:_}}}}),et(n,"".concat(a,"-nested"),{marginInlineStart:44}),n)))};function Xo(r){var t=fa.useToken(),n=t.theme,a=t.token,i=t.hashId,s=o.useContext(Zr.ConfigContext),d=s.iconPrefixCls;return[pa({theme:n,token:a,hashId:i,path:["compatible","Comment",r,d]},function(){var p=or({componentCls:".".concat(r)},a);return[Ko(p)]}),i]}function Tt(r){"@babel/helpers - typeof";return Tt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tt(r)}var Jo=["actions","author","avatar","children","className","content","prefixCls","datetime"];function lr(){return lr=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},lr.apply(this,arguments)}function Qo(r,t,n){return t=Zo(t),t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function Zo(r){var t=el(r,"string");return Tt(t)==="symbol"?t:String(t)}function el(r,t){if(Tt(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var a=n.call(r,t||"default");if(Tt(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function tl(r,t){return il(r)||al(r,t)||nl(r,t)||rl()}function rl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nl(r,t){if(r){if(typeof r=="string")return zr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zr(r,t)}}function zr(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=r[n];return a}function al(r,t){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var a,i,s,d,p=[],u=!0,b=!1;try{if(s=(n=n.call(r)).next,t===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=s.call(n)).done)&&(p.push(a.value),p.length!==t);u=!0);}catch(D){b=!0,i=D}finally{try{if(!u&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(b)throw i}}return p}}function il(r){if(Array.isArray(r))return r}function sl(r,t){if(r==null)return{};var n=ol(r,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(r,a)&&(n[a]=r[a])}return n}function ol(r,t){if(r==null)return{};var n={},a=Object.keys(r),i,s;for(s=0;s<a.length;s++)i=a[s],!(t.indexOf(i)>=0)&&(n[i]=r[i]);return n}var ll=Zr.ConfigContext,cl=function(t){var n=t.actions,a=t.author,i=t.avatar,s=t.children,d=t.className,p=t.content,u=t.prefixCls,b=t.datetime,D=sl(t,Jo),O=o.useContext(ll),P=O.getPrefixCls,_=O.direction,v=function(c,A){return o.createElement("div",{className:vr("".concat(c,"-nested"))},A)},w=P("comment",u),F=Xo(w),k=tl(F,2),z=k[0],Y=k[1],q=i?o.createElement("div",{className:"".concat(w,"-avatar")},typeof i=="string"?o.createElement("img",{src:i,alt:"comment-avatar"}):i):null,I=n&&n.length?o.createElement("ul",{className:"".concat(w,"-actions")},n.map(function(m,c){return o.createElement("li",{key:"action-".concat(c)},m)})):null,y=(a||b)&&o.createElement("div",{className:"".concat(w,"-content-author")},a&&o.createElement("span",{className:"".concat(w,"-content-author-name")},a),b&&o.createElement("span",{className:"".concat(w,"-content-author-time")},b)),l=o.createElement("div",{className:"".concat(w,"-content")},y,o.createElement("div",{className:"".concat(w,"-content-detail")},p),I),f=vr(w,Qo({},"".concat(w,"-rtl"),_==="rtl"),d,Y);return z(o.createElement("div",lr({},D,{className:f}),o.createElement("div",{className:"".concat(w,"-inner")},q,l),s?v(w,s):null))};const Fn=cl,dl=r=>new Promise((t,n)=>{const a=new FileReader;a.readAsDataURL(r),a.onload=()=>t(a.result),a.onerror=i=>n(i)}),ul=r=>{const{data:t}=hr(),[n,a]=o.useState(!1),[i,s]=o.useState(""),[d,p]=o.useState(""),[u,b]=o.useState([]),[D,O]=o.useState(!0),[P,_]=o.useState(1);o.useState(25);const[v]=T.useForm(),[w,F]=o.useState(0),[k,z]=o.useState(0),[Y,q]=o.useState(!0);en();const[I,y]=o.useState(!1),[l,f]=o.useState(""),m=o.useRef(null),c=o.useRef([]),[A,$]=o.useState([]),G=C=>{c.current[C-1].scrollIntoView({behavior:"smooth"})},M=()=>{m.current.scrollIntoView({behavior:"smooth"})},V=async(C,h="",x=25)=>{C===1&&(u.length=0,b([]));const{data:N}=await W.custom({url:"",method:"get",meta:{operation:"darasaPostComments",variables:{page:{value:parseInt(C.toString()),type:"Int",required:!0},key:{value:h,type:"String",required:!1},postId:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},pageSize:{value:parseInt(x.toString()),type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","content","created","updated","isActive","canEdit","canDelete",{user:["id","firstName","lastName","middleName","fullName","email","pic"]},{post:["id"]},{medias:["id","media"]}]}]}}).catch(U=>(g.error("Error loading comments"),{data:null})).then(U=>U);N&&(z(N.total),F(N.pages),_(N.page+1),q(N.hasNext),b([...u,...N.results])),O(!1)},L=async C=>{y(!0);const{data:h}=await W.custom({url:"",method:"post",meta:{operation:"createDarasaPostComment",variables:{postId:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},content:{value:C.content,type:"String",required:!0},photos:{value:A,type:"[Upload]",required:!1}},fields:["success","message",{comment:["id","content",{user:["id","firstName","lastName","middleName","fullName","email","pic"]},{post:["id","totalComments"]},{medias:["id","media"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}}).catch(x=>(g.error("Error submitting comment"),{data:null})).then(x=>x);y(!1),f(""),h&&(h.success?($([]),b([...u,h.comment]),M(),r.updateTotalComment(r==null?void 0:r.id,1)):g.error(h.message))},H=async(C,h)=>{const{data:x}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaPostComment",variables:{id:{value:C,type:"Int",required:!0}},fields:["success","message"]}}).catch(N=>(g.error("Error deleting comment"),{data:null})).then(N=>N);x&&(x.success?(g.success(x.message),b(u.filter(N=>N.id!==C)),r.updateTotalComment(r==null?void 0:r.id,-1),G(h)):g.error(x.message))},j=e.jsxs("div",{children:[e.jsx(tn,{}),e.jsx("div",{style:{marginTop:8},children:"Photo"})]}),S=async C=>{!C.url&&!C.preview&&(C.preview=await dl(C.originFileObj)),s(C.url||C.preview),a(!0),p(C.name||C.url.substring(C.url.lastIndexOf("/")+1))},E=({fileList:C})=>{$(C)};return o.useEffect(()=>{V(1),M()},[r.id,r.randKey]),e.jsxs(e.Fragment,{children:[e.jsx("div",{id:"scrollableDiv",style:{height:"58vh",overflow:"auto"},children:e.jsxs(de,{spinning:D,children:[e.jsx("div",{ref:m}),e.jsx(ee,{className:"comment-list",header:`${u.length} replies`,itemLayout:"horizontal",dataSource:u,renderItem:(C,h)=>e.jsx(ee.Item,{ref:x=>{c.current[h]=x},extra:[e.jsx(Se,{overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx($e,{}),disabled:!C.canDelete,children:e.jsx(pt,{placement:"topLeft",title:"Are you sure to delete this comment?",onConfirm:()=>H(C.id,h),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})},"delete-post-comment"+C.id),C.canManage?e.jsx(e.Fragment,{}):e.jsx(B.Item,{icon:e.jsx(Ee,{}),children:e.jsx("a",{onClick:()=>g("Under construction"),children:"Report"})},"report-post-comment"+C.id)]}),trigger:["click"],placement:"bottomRight",arrow:!0,overlayStyle:{zIndex:9999},children:e.jsx(K,{children:e.jsx(Ae,{})})})],actions:[],children:e.jsx(ee.Item.Meta,{avatar:e.jsx(Ce,{src:C.user.pic}),title:e.jsx("a",{children:C.user.fullName}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:C.user.bio}),e.jsx("span",{dangerouslySetInnerHTML:{__html:C.content}}),e.jsx("div",{children:C.medias.length>0&&e.jsx(Z,{children:e.jsx(X,{span:24,children:e.jsx(Ct.PreviewGroup,{children:C.medias.map(x=>e.jsx(Ct,{preview:{visible:!0,zIndex:99999,bodyStyle:{zIndex:99999,zIndexPopup:99999}},style:{padding:10,display:"inline"},width:100,src:x.media}))})})})}),e.jsxs("span",{style:{color:"orange",display:"block"},children:[": Posted ",ue(C.created).fromNow()]})]})})},"post-comment-"+C.id)}),Y&&e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(K,{onClick:()=>V(P,"",25),children:"Load More"})})]})}),e.jsx(Fn,{avatar:e.jsx(Ce,{src:t.pic,alt:"Han Solo"}),content:e.jsxs(T,{form:v,onFinish:C=>{C.content=l,L(C),v.resetFields()},children:[e.jsx("div",{children:e.jsx(ze.CKEditor,{disabled:I,editor:He,data:l,onReady:C=>{C.editing.view.change(h=>{h.setStyle("min-height","75px",C.editing.view.document.getRoot())})},onChange:(C,h)=>{const x=h.getData();f(x)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})}),e.jsx("div",{style:{marginTop:10},children:e.jsx(ur,{multiple:!0,name:"photos",accept:dr.supported_image_extensions.join(),beforeUpload:()=>!1,listType:"picture-card",fileList:A,maxCount:3,onPreview:C=>{S(C)},onChange:E,children:A.length>=3?null:j})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{size:"large",loading:I,onClick:()=>v.submit(),type:"primary",disabled:l.length===0,children:"Publish Comment"})})]})}),e.jsx(ie,{open:n,title:d,onClose:C=>a(C),children:e.jsx("img",{alt:"example",style:{width:"100%"},src:i})})]})},{Text:Hr}=ft,hl=r=>new Promise((t,n)=>{const a=new FileReader;a.readAsDataURL(r),a.onload=()=>t(a.result),a.onerror=i=>n(i)}),ml=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState(""),[s,d]=o.useState(""),[p,u]=o.useState([]),[b,D]=o.useState(),[O,P]=o.useState(!0),[_,v]=o.useState(!1),[w,F]=o.useState(1),[k,z]=o.useState(0),[Y,q]=o.useState(!0),{data:I}=hr(),[y,l]=o.useState(""),[f,m]=o.useState(!1),[c,A]=o.useState([]),$=h=>{D(h),m(!0)},G=async(h,x="")=>{const{data:N}=await W.custom({url:"",method:"get",meta:{operation:"darasaPosts",variables:{id:{value:parseInt(r.id.toString()),type:"Int",required:!0},page:{value:h,type:"Int",required:!0},key:{value:x,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","slug","content","isPublic","created","updated","isActive","isLiked","canEdit","canDelete","totalLikes","totalComments","canManage",{user:["id","firstName","lastName","middleName","fullName","email","pic"]},{medias:["id","media"]}]}]}}).catch(U=>(g.error("Error loading posts"),{data:null})).then(U=>U);N&&(z(N.total),F(N.page+1),q(N.hasNext),u(N.results)),P(!1)};o.useEffect(()=>{G(w)},[]);const M=async()=>{v(!0);const{data:h}=await W.custom({url:"",method:"post",meta:{operation:"createDarasaPost",variables:{id:{value:parseInt(r.id.toString()),type:"Int",required:!0},content:{value:y,type:"String",required:!0},photos:{value:c,type:"[Upload]",required:!0}},fields:["success","message",{post:["id","slug","content","isPublic","created","updated","isActive","isLiked","canEdit","canDelete","totalLikes","totalComments","canManage",{user:["id","firstName","lastName","middleName","fullName","email","pic"]},{medias:["id","media"]}]}]}}).catch(x=>(g.error("Error creating post"),{data:null})).then(x=>x);v(!1),h&&h.success&&(l(""),u([h.post,...p]),A([]),g.success(h.message))},V=async h=>{const{data:x}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaPost",variables:{id:{value:parseInt(h.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(N=>(g.error("Error deleting post"),{data:null})).then(N=>N);x&&(x.success?(g.success(x.message),u(p.filter(N=>N.id!==h))):g.error(x.message))},L=h=>{ge.confirm({title:"Deleting Post",icon:e.jsx(ye,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>V(h)})},H=async h=>{const{data:x}=await W.custom({url:"",method:"post",meta:{operation:"addDarasaPostLike",variables:{id:{value:parseInt(h.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(N=>(g.error("Error liking post"),{data:null})).then(N=>N);if(x)if(x.success){const N=p.map(U=>U.id===h?{...U,isLiked:!0,totalLikes:U.totalLikes+1}:U);u(N)}else g.error(x.message)},j=async(h,x)=>{const N=p.map(U=>U.id===h?{...U,totalComments:U.totalComments+x}:U);u(N)},S=e.jsxs("div",{children:[e.jsx(tn,{}),e.jsx("div",{style:{marginTop:8},children:"Photo"})]}),E=async h=>{!h.url&&!h.preview&&(h.preview=await hl(h.originFileObj)),i(h.url||h.preview),n(!0),d(h.name||h.url.substring(h.url.lastIndexOf("/")+1))},C=({fileList:h})=>{A(h)};return e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:24,children:e.jsx("div",{id:"scrollableDiv",style:{height:"80vh",overflow:"auto"},children:e.jsxs(mr,{dataLength:k,next:()=>G(w),hasMore:Y,scrollableTarget:"scrollableDiv",loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(de,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:p.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:[e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(Fn,{avatar:e.jsx(Ce,{src:I==null?void 0:I.pic,alt:I==null?void 0:I.fullName}),style:{padding:0,border:"1",borderColor:"silver"},content:e.jsxs("div",{children:[e.jsx(ze.CKEditor,{disabled:_,editor:He,data:y,onReady:h=>{h.editing.view.change(x=>{x.setStyle("min-height","100px",h.editing.view.document.getRoot())})},onChange:(h,x)=>{const N=x.getData();l(N)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{children:e.jsx(ur,{multiple:!0,name:"photos",accept:dr.supported_image_extensions.join(),beforeUpload:()=>!1,listType:"picture-card",fileList:c,maxCount:7,onPreview:h=>{E(h)},onChange:C,children:c.length>=7?null:S})}),e.jsx("span",{style:{display:"flex",justifyContent:"flex-end",padding:0},children:e.jsx(K,{size:"large",htmlType:"submit",loading:_,type:"primary",disabled:!y,style:{marginTop:10},onClick:()=>M(),children:"Post"})})]})},"comment-header-")}),e.jsx(ee,{itemLayout:"vertical",size:"large",dataSource:p,loading:O,renderItem:h=>e.jsxs(ee.Item,{extra:[e.jsx(Se,{overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx($e,{}),disabled:!h.canDelete,children:e.jsx("a",{onClick:()=>L(h.id),children:"Delete"})},"delete-post-"+h.id),h.canManage?e.jsx(e.Fragment,{}):e.jsx(B.Item,{icon:e.jsx(Ee,{}),children:e.jsx("a",{onClick:()=>g("Under construction"),children:"Report"})},"report-post"+h.id)]}),trigger:["click"],placement:"bottomRight",arrow:!0,overlayStyle:{zIndex:9999},children:e.jsx(K,{children:e.jsx(Ae,{})})})],actions:[e.jsx("a",{onClick:()=>H(h.id),children:e.jsxs(Pe,{children:[h.isLiked?e.jsx(ya,{style:{color:"red"}}):e.jsx(xa,{style:{color:"red"}}),e.jsx(Hr,{children:h.totalLikes})]})}),e.jsx("a",{onClick:()=>$(h),children:e.jsxs(Pe,{children:[e.jsx(va,{}),e.jsx(Hr,{children:h.totalComments})]})})],children:[e.jsx(ee.Item.Meta,{avatar:e.jsx(Ce,{src:h.user.pic}),title:e.jsx("a",{children:h.user.fullName}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:h.user.bio}),e.jsxs("span",{style:{color:"orange"},children:[": Posted ",ue(h.created).fromNow()]})]})}),e.jsx("span",{dangerouslySetInnerHTML:{__html:h.content}}),e.jsx("div",{children:e.jsx(Z,{children:e.jsx(X,{span:24,children:e.jsx(Ct.PreviewGroup,{children:h.medias.map(x=>e.jsx(Ct,{style:{padding:10,display:"inline"},width:300,src:x.media}))})})})})]},h.slug+h.id)})]})})}),e.jsx(X,{span:6})]}),e.jsx(It,{title:"Comments",anchor:"right",width:"40vw",open:f,onClose:h=>m(h),children:e.jsx(ul,{id:b==null?void 0:b.id,randKey:Math.random(),updateTotalComment:j})}),e.jsx(ie,{visible:t,title:s,footer:null,onCancel:()=>n(!1),destroyOnClose:!0,children:e.jsx("img",{alt:"example",style:{width:"100%"},src:a})})]})},fl=r=>{const[t,n]=o.useState(""),[a]=T.useForm(),i=async s=>{const{data:d}=await W.custom({url:"",method:"post",meta:{operation:"createDarasaTopic",variables:{darasaId:{value:parseInt(r.darasa),type:"Int",required:!0},title:{value:s.title,type:"String",required:!0},description:{value:s.description,type:"String",required:!0},startDate:{value:ue(s.start_date).format("YYYY-MM-DD"),type:"String",required:!1},minutes:{value:s.minutes,type:"Int",required:!1}},fields:["success","message",{topic:["id","title","description","created","canEdit","startDate","endDate","canDelete","updated","isActive","canEdit","canDelete","canManage",{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]},{subtopics:["id","title","description","canManage","canEdit","canDelete","isActive"]},{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]}]}]}}).catch(p=>(g.error("Error creating topic"),{data:null})).then(p=>p);d&&(d.success?(g.success(d.message),r.onFinish(d.topic),a.resetFields()):g.error(d.message))};return e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:a,onFinish:s=>{s.description=t,i(s)},onReset:()=>{n("")},requiredMark:!1,children:[e.jsx(T.Item,{name:"title",label:"Topic Title",rules:[{required:!0,type:"string",message:"Enter Topic Title ..."}],children:e.jsx(ne,{size:"large",placeholder:"Enter Topic Title ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(ze.CKEditor,{editor:He,data:t,onReady:s=>{s.editing.view.change(d=>{d.setStyle("min-height","150px",s.editing.view.document.getRoot())})},onChange:(s,d)=>{const p=d.getData();n(p)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(T.Item,{label:"Start Date",name:"start_date",rules:[{required:!!a.getFieldValue("minutes"),type:"object",message:"Please select Start Date"}],children:e.jsx(it,{size:"large",style:{width:"50%"},disabledDate:s=>s.add(1,"day")<ue().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(T.Item,{label:"Total Duration (Minutes)",name:"minutes",rules:[{required:!1,type:"number",message:"Please enter total duration in minutes"}],children:e.jsx(Xe,{style:{width:"35%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},pl=r=>{const[t,n]=o.useState(""),[a]=T.useForm(),i=async s=>{const{data:d}=await W.custom({url:"",method:"post",meta:{operation:"createDarasaSubtopic",variables:{topicId:{value:parseInt(r.topic.id),type:"Int",required:!0},title:{value:s.title,type:"String",required:!0},description:{value:s.description,type:"String",required:!0},startDate:{value:ue(s.start_date).format("YYYY-MM-DD"),type:"String",required:!1},minutes:{value:s.minutes,type:"Int",required:!1}},fields:["success","message",{topic:["id","title","description","created","canEdit","startDate","endDate","canDelete","updated","isActive","canEdit","canDelete","canManage",{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]},{subtopics:["id","title","description","canManage","canEdit","canDelete","isActive"]},{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]}]}]}}).catch(p=>(g.error("Error creating topic"),{data:null})).then(p=>p);d&&(d.success?(g.success(d.message),r.onFinish(d.topic),a.resetFields()):g.error(d.message))};return e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:a,onFinish:s=>{s.description=t,i(s)},requiredMark:!1,children:[e.jsx(T.Item,{name:"title",label:"Topic Title",rules:[{required:!0,type:"string"}],children:e.jsx(ne,{size:"large",placeholder:"Enter Topic Title ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(ze.CKEditor,{editor:He,data:t,onReady:s=>{s.editing.view.change(d=>{d.setStyle("min-height","150px",s.editing.view.document.getRoot())})},onChange:(s,d)=>{const p=d.getData();n(p)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(T.Item,{label:"Start Date",name:"start_date",rules:[{required:!1,type:"object",message:"Please select Start Date"}],children:e.jsx(it,{size:"large",style:{width:"50%"},disabledDate:s=>s.add(1,"day")<ue().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(T.Item,{label:"Total Duration (Minutes)",name:"minutes",rules:[{required:!1,type:"number",message:"Enter Total Duration (Minutes)"}],children:e.jsx(Xe,{style:{width:"50%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})};function gl(r){return Ia({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h8zM4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4z"}},{tag:"path",attr:{d:"M8 4.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5zM8 6a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 3a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-3.5 1.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"}}]})(r)}const{TreeNode:Yr,DirectoryTree:yl}=Pa,{Panel:xl}=on,vl=r=>{const[t,n]=o.useState([]),[a,i]=o.useState([]),[s,d]=o.useState(),[p,u]=o.useState(!0),[b,D]=o.useState(1),[O,P]=o.useState(0),[_,v]=o.useState(0),[w,F]=o.useState(!0),[k]=T.useForm(),[z,Y]=o.useState(void 0);fe();const I=!rn.useBreakpoint().lg,[y,l]=o.useState(!1),[f,m]=o.useState(!1),c=()=>{l(!0)},A=async(h,x="",N=!1)=>{const{data:U}=await W.custom({url:"",method:"get",meta:{operation:"darasaTopics",variables:{page:{value:h,type:"Int",required:!0},key:{value:x,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","description","created","canEdit","startDate","endDate","minutes","canDelete","updated","isActive","canEdit","canDelete","canManage",{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]},{subtopics:["id","title","description","startDate","endDate","minutes","canManage","canEdit","canDelete","isActive"]},{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]}]}]}}).catch(ae=>(g.error("Error fetching Topics"),{data:null})).then(ae=>ae);U&&(v(U.total),P(U.pages),D(U.page),F(U.hasNext),n(U.results),i(U.results)),u(!1)},$=async h=>{const{data:x}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaTopic",variables:{id:{value:h,type:"Int",required:!0}},fields:["success","message"]}}).catch(N=>(g.error("Error removing class Topic"),{data:null})).then(N=>N);x&&(x.success?(g.success(x.message),n(t.filter(N=>N.id!==h)),i(a.filter(N=>N.id!==h))):g.error(x.message))},G=async(h,x)=>{const{data:N}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaTopic",variables:{id:{value:h,type:"Int",required:!0}},fields:["success","message"]}}).catch(U=>(g.error("Error removing class Topic"),{data:null})).then(U=>U);if(N)if(N.success){g.success(N.message);const U=[...t],ae=U.findIndex(je=>je.id===x),ce=U[ae].subtopics.findIndex(je=>je.id===h);ce!==-1&&U[ae].subtopics.splice(ce,1),n(U);const Ye=[...a],Oe=U.findIndex(je=>je.id===x);if(Oe!==-1){const je=U[Oe].subtopics.findIndex(R=>R.id===h);je!==-1&&Ye[Oe].subtopics.splice(je,1),i(Ye)}}else g.error(N.message)},M=h=>{ge.confirm({title:"Deleting Topic",icon:e.jsx(ye,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>$(h)})},V=(h,x)=>{ge.confirm({title:"Deleting Subtopic",icon:e.jsx(ye,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>G(h,x)})},L=h=>{d(h),m(!0)},H=async h=>{n([h,...t]),a.length===t.length&&i([h,...a])},j=async h=>{n(t.map(x=>x.id===h.id?h:x)),i(a.map(x=>x.id===h.id?h:x))},S=h=>{const x=t.filter(N=>N.id===parseInt(h));i(x)},E=()=>e.jsx(Sa,{description:"No topic Registered ..."}),C=h=>h.subtopics.map(x=>e.jsx(xl,{extra:[e.jsx("div",{style:{right:0,zIndex:99999},children:e.jsx(Se,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(Ee,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(B.Item,{icon:e.jsx(ht,{}),onClick:()=>V(x.id,h.id),disabled:!r.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:N=>N.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})],header:e.jsx("div",{children:e.jsxs("span",{children:[x.title,x.minutes>0&&e.jsxs(oe,{color:"green",children:[x.minutes," ",x.minutes>1?"Mins":"Min"]})]})}),children:e.jsx("div",{dangerouslySetInnerHTML:{__html:x.description}})},x.id));return o.useEffect(()=>{A(b)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:6,children:e.jsxs(Ie,{style:{marginRight:5},children:[t.length===0&&e.jsx(e.Fragment,{children:E()}),e.jsx(yl,{multiple:!0,defaultExpandedKeys:[],onExpand:(h,x)=>{const N=x.node.key;if(N&&N.toString().includes("topic")){Y(N);const U=N.toString().split("-")[1];S(U)}else if(!(N&&N.toString().includes("sub")))i(t);else{const U=N.toString().split(":")[0];Y(U);const ae=U.toString().split("-")[1];S(ae)}},children:t.map((h,x)=>e.jsx(Yr,{icon:e.jsx(jr,{}),title:h.title,children:h.subtopics.map(N=>e.jsx(Yr,{icon:e.jsx(jr,{}),title:N.title},"topic-"+h.id+":sub-"+N.id))},"topic-"+h.id))})]})}),e.jsxs(X,{span:18,children:[e.jsxs(Z,{children:[e.jsx(X,{span:12,children:e.jsx(T,{layout:"vertical",form:k,onFinish:h=>{D(0),A(0,h.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Topics(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{icon:e.jsx(Ut,{}),size:"large",onClick:c,disabled:!r.canManage,children:"Add Topic"})})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[a.length>0?e.jsx(Z,{align:"top",children:a.map((h,x)=>e.jsx(X,{span:24,style:{marginTop:x===0?0:10},children:e.jsxs(Ie,{hoverable:h.isActive,style:{marginRight:10},title:e.jsxs("div",{children:[e.jsxs("span",{children:[e.jsx("span",{style:{fontSize:22},children:h.title}),h.minutes>0&&e.jsx("span",{style:{marginLeft:10},children:e.jsx(Ve,{color:"green",title:e.jsxs(e.Fragment,{children:[e.jsxs(oe,{children:["Starts:"," ",ue(h.startDate).format("DD/MM/YYYY hh:mm a")]}),e.jsxs(oe,{children:["Ends:"," ",ue(h.endDate).format("DD/MM/YYYY hh:mm a")]})]}),children:e.jsxs(oe,{color:"green",children:[h.minutes," ",h.minutes>1?"Mins":"Min"]})})})]}),e.jsx(Pe,{style:{right:0,position:"absolute"},children:e.jsx(Se,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(nn,{}),disabled:!h.canManage,children:e.jsx("a",{onClick:()=>L(h),children:"Add Subtopics"})}),e.jsx(B.Item,{icon:e.jsx(Gr,{}),disabled:!0,children:e.jsx("a",{onClick:()=>L(h),children:"Add Documents"})}),e.jsx(B.Item,{icon:e.jsx(ja,{}),disabled:!0,children:e.jsx("a",{onClick:()=>L(h),children:"Add Videos"})}),e.jsx(B.Item,{icon:e.jsx(gl,{}),disabled:!0,children:e.jsx("a",{onClick:()=>L(h),children:"Add Audios"})}),e.jsx(B.Item,{icon:e.jsx(Ee,{}),onClick:()=>g("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(B.Item,{icon:e.jsx(ht,{}),onClick:()=>M(h.id),disabled:!r.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:N=>N.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})]}),children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:h.description}}),h.subtopics.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:e.jsxs(X,{span:24,style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:20,fontWeight:"bolder"},children:"Subtopics"}),h.canManage&&e.jsx(K,{disabled:!h.canManage,icon:e.jsx(ba,{}),onClick:()=>L(h),children:"Add Subtopic"})]})}),e.jsx(on,{defaultActiveKey:["1"],accordion:!0,children:C(h)})]})]})}))}):e.jsx(Ie,{children:e.jsx(Z,{justify:"center",children:e.jsx(X,{children:E()})})}),w&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{onClick:()=>A(b+1),disabled:!w,children:"Load More"})})]})]})]}),e.jsx(ie,{title:"Adding Topics",open:y,onClose:h=>l(h),width:I?"100vw":"50vw",children:e.jsx(fl,{darasa:r.id,onFinish:H})}),e.jsx(ie,{title:"Add Subtopics to "+(s==null?void 0:s.title),open:f,onClose:h=>m(h),width:I?"100vw":"50vw",children:e.jsx(pl,{topic:s,onFinish:j})})]})},jl=r=>{o.useState();const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,d]=o.useState(1),[p,u]=o.useState(0),[b,D]=o.useState(0),[O,P]=o.useState(!0),[_]=T.useForm();fe(),o.useState(!1),o.useState(!1);const v=async(w,F="",k=!1)=>{const{data:z}=await W.custom({url:"",method:"get",meta:{operation:"darasaOrders",variables:{page:{value:w,type:"Int",required:!0},key:{value:F,type:"String",required:!1},darasaId:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},paid:{value:!0,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","receiptNumber","phone","amount","paymentDate","canDelete","canEdit","canManage",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(Y=>(g.error("Error fetching Class Payments"),{data:null})).then(Y=>Y);console.log(z),z&&(D(z.total),u(z.pages),d(z.page),P(z.hasNext),n(z.results)),i(!1)};return o.useEffect(()=>{v(s)},[]),a?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:e.jsx(X,{span:12,children:e.jsx(T,{layout:"vertical",form:_,onFinish:w=>{d(0),v(0,w.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Payment(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,locale:{emptyText:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(ye,{style:{fontSize:20}})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("p",{children:"No Payments found"})})]})},renderItem:w=>e.jsx(ee.Item,{children:e.jsx(ee.Item.Meta,{avatar:e.jsx(Ce,{src:w.user.pic}),title:e.jsxs("a",{children:[w.user.fullName,e.jsxs(oe,{color:"green",style:{marginLeft:10},children:[w.amount," TSH"]})]}),description:w.user.email})},w.id)}),O&&e.jsx("div",{style:{textAlign:"center",marginTop:12},children:e.jsx("button",{onClick:()=>{v(s+1)},children:"Load More"})})]})]})},bl=r=>{const[t,n]=o.useState(!0),[a,i]=o.useState([]);T.useForm();const s=async(p,u="",b=!1)=>{n(!0),await W.custom({url:"",method:"get",meta:{operation:"darasaOrders",variables:{page:{value:p,type:"Int",required:!0},key:{value:u,type:"String",required:!1},darasaId:{value:parseInt(r.darasa===void 0?"0":r.darasa.toString()),type:"Int",required:!0},paid:{value:!0,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","receiptNumber","phone","amount","paymentDate","canDelete","canEdit","canManage",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(D=>(g.error("Error getting supported carriers"),{data:null})).then(D=>D),n(!1)},d=[{title:"Student Name",dataIndex:"studentName",key:"studentName",rebnder:(p,u)=>e.jsx(e.Fragment,{children:u.darasa.user.fullName})},{title:"Receipt Number",dataIndex:"receiptNumber",key:"receiptNumber",render:(p,u)=>e.jsx(e.Fragment,{children:u.receiptNumber})},{title:"Amount",dataIndex:"amount",key:"amount",render:(p,u)=>e.jsx(e.Fragment,{children:u.amount})}];return o.useEffect(()=>{s(1)},[r.randKey]),e.jsx(e.Fragment,{children:e.jsx(ln,{loading:t,dataSource:a,columns:d,locale:{emptyText:"No Payments yet"}})})},Sl=r=>{const[t,n]=o.useState(!1);T.useForm();const a=async()=>{await W.custom({url:"",method:"get",meta:{operation:"paymentSupportedTelecomCarriers",variables:{},fields:[{results:["id","name"]}]}}).catch(i=>(g.error("Error getting supported carriers"),{data:null})).then(i=>i)};return o.useEffect(()=>{a()},[r.randKey]),e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(Z,{children:e.jsxs(X,{span:24,children:[e.jsx(Ca,{title:"Total Amount to be Disbursed (Approximate)",value:112893,precision:2}),e.jsx(K,{style:{marginTop:16},type:"primary",onClick:()=>n(!0),children:"View Details"})]})})}),e.jsx(It,{title:"Disbursement Details",anchor:"right",width:"40vw",onClose:i=>n(i),open:t,children:e.jsx(bl,{darasa:r.darasa,randKey:Math.random()})})]})},Cl=r=>{o.useState();const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,d]=o.useState(1),[p,u]=o.useState(0),[b,D]=o.useState(0),[O,P]=o.useState(!0),[_]=T.useForm();fe();const[v,w]=o.useState(!1);o.useState(!1);const F=async(k,z="",Y=!1)=>{const{data:q}=await W.custom({url:"",method:"get",meta:{operation:"darasaOrderDisbursements",variables:{page:{value:k,type:"Int",required:!0},key:{value:z,type:"String",required:!1},darasaId:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},paid:{value:!0,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","receiptNumber","disbursementNumber","disbursementDate","status","amount","canDelete","canEdit","canManage",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(I=>(g.error("Error fetching Class Disbursements"),{data:null})).then(I=>I);console.log(q),q&&(D(q.total),u(q.pages),d(q.page),P(q.hasNext),n(q.results)),i(!1)};return o.useEffect(()=>{F(s)},[]),a?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:12,children:e.jsx(T,{layout:"vertical",form:_,onFinish:k=>{d(0),F(0,k.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Payment(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:12,style:{textAlign:"right"},children:e.jsx(K,{size:"large",disabled:!r.canManage,icon:e.jsx(wa,{}),onClick:()=>w(!0),children:"Create Disbursement"})})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,locale:{emptyText:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(ye,{style:{fontSize:20}})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("p",{children:"No Disbursement found"})})]})},renderItem:k=>e.jsxs(ee.Item,{children:[e.jsx(ee.Item.Meta,{avatar:e.jsx(Ce,{src:k.user.pic}),title:e.jsxs("a",{children:[k.user.fullName,e.jsxs(oe,{color:"green",style:{marginLeft:10},children:[k.amount," TSH"]})]}),description:k.user.email}),"first"]},k.id)}),O&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(K,{onClick:()=>F(s+1),disabled:!O,children:"Load More"})})]}),e.jsx(ie,{title:"Create Disbursement",open:v,width:"50vw",onClose:k=>w(k),children:e.jsx(Sl,{darasa:r.id,randKey:Math.random()})})]})},{TabPane:Fe}=an,wl=r=>{const[t,n]=o.useState(),[a,i]=o.useState(!0),[s,d]=o.useState("1"),{push:p}=fe(),u=Ht(),b=async D=>{const{data:O}=await W.custom({url:"",method:"get",meta:{operation:"darasa",variables:{id:{value:parseInt(D.toString()),type:"Int",required:!0}},fields:["id","name","code","created","canEdit","canDelete","canManage","updated","isActive","isAuthor","isConnected","isBlocked","payable","price","startDate","endDate"]}}).catch(()=>(g.error("Error fetching darasa"),{data:null})).then(P=>P);O&&(n(O),i(!1))};return o.useEffect(()=>{b(u.id),localStorage.getItem("currentClass")===u.id.toString()?d(localStorage.getItem("classCurrentTabIndex")??"1"):(localStorage.setItem("currentClass",u.id.toString()),d("1"))},[u.id]),e.jsx(e.Fragment,{children:e.jsxs(de,{spinning:a,children:[e.jsx("div",{style:{marginTop:5,marginBottom:5},children:e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx("a",{onClick:()=>p("/oclass"),children:"Home"})}),e.jsx(re.Item,{children:e.jsx("a",{onClick:()=>p("/oclass"),children:"Classes"})}),e.jsxs(re.Item,{children:["Class Session",e.jsx(Vt,{}),t!=null&&t.name?e.jsxs("span",{style:{color:"orange"},children:[t==null?void 0:t.name," - ","{"+(t==null?void 0:t.code)+"}"]}):e.jsx(e.Fragment,{})]})]})}),(t==null?void 0:t.isBlocked)&&e.jsx(at,{severity:"warning",sx:{fontSize:18},children:"You have been blocked from this class, please contact the class owner for more information."}),!(t!=null&&t.isBlocked)&&e.jsx("div",{style:{marginTop:10,background:"white",padding:10},children:e.jsxs(an,{type:"card",tabBarExtraContent:e.jsx(K,{icon:e.jsx(Da,{}),disabled:!(t!=null&&t.canManage),children:"Configs"}),activeKey:s,onTabClick:D=>{d(D.toString()),localStorage.setItem("classCurrentTabIndex",D)},children:[e.jsx(Fe,{tab:"Class Feeds",children:e.jsx(ml,{id:u.id,canManage:t==null?void 0:t.canManage})},"1"),e.jsx(Fe,{tab:"Files",children:e.jsx(Ga,{id:u.id,canManage:t==null?void 0:t.canManage})},"2"),e.jsx(Fe,{tab:"Connected Drives",children:e.jsx($a,{id:u.id,canManage:t==null?void 0:t.canManage})},"3"),e.jsx(Fe,{tab:"Topics",children:e.jsx(vl,{id:u.id,canManage:t==null?void 0:t.canManage})},"12"),e.jsx(Fe,{tab:"Resources Links",children:e.jsx(Xa,{id:u.id,canManage:t==null?void 0:t.canManage})},"4"),e.jsx(Fe,{tab:"Videos",children:e.jsx(ks,{id:u.id,canManage:t==null?void 0:t.canManage})},"5"),e.jsx(Fe,{tab:"Virtual Sessions",disabled:!1,children:e.jsx(Bo,{id:u.id,canManage:t==null?void 0:t.canManage})},"6"),e.jsx(Fe,{tab:"Assignments",disabled:!1,children:e.jsx(Wa,{id:u.id,canManage:t==null?void 0:t.canManage})},"7"),e.jsx(Fe,{tab:"Announcements",children:e.jsx(Ha,{id:u.id,canManage:t==null?void 0:t.canManage})},"8"),e.jsx(Fe,{tab:"Students",children:e.jsx(Za,{id:u.id,canManage:t==null?void 0:t.canManage})},"9"),(t==null?void 0:t.payable)&&(t==null?void 0:t.canManage)&&e.jsxs(e.Fragment,{children:[e.jsx(Fe,{tab:"Payments",children:e.jsx(jl,{id:u.id,canManage:t==null?void 0:t.canManage})},"10"),e.jsx(Fe,{tab:"Disbursements",children:e.jsx(Cl,{id:u.id,canManage:t==null?void 0:t.canManage})},"11")]})]})})]})})},Rn=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState(!1),[s,d]=o.useState(""),[p,u]=o.useState([]),[b,D]=o.useState("");o.useState(!1),o.useState(!1);const[O]=T.useForm(),P=async()=>{const{data:v}=await W.custom({url:"",method:"get",meta:{operation:"paymentSupportedTelecomCarriers",variables:{},fields:[{results:["id","name"]}]}}).catch(w=>(g.error("Error getting supported carriers"),{data:null})).then(w=>w);if(v){const w=v.results,F=[];w.forEach(k=>{F.push(k.name)}),u(F)}},_=async v=>{n(!0);const{data:w}=await W.custom({url:"",method:"post",meta:{operation:"validateMobilePhoneNumber",variables:{phone:{value:v,type:"String",required:!0}},fields:["success","message","carrier","formattedPhone"]}}).catch(F=>(g.error("Error Validating Mobile Phone Number"),{data:null})).then(F=>F);return w&&(i(w.success),w.success||(d(w.message),D(w.carrier))),n(!1),w};return o.useEffect(()=>{P()},[r.randKey]),e.jsxs("div",{children:[e.jsxs(pe,{title:"",column:1,children:[e.jsx(pe.Item,{label:"Class Name",children:r.darasa.name}),e.jsx(pe.Item,{label:"Class Code",children:r.darasa.code}),e.jsx(pe.Item,{label:"Cost",children:e.jsxs("span",{style:{fontSize:22},children:[r.darasa.price.toLocaleString(),"/= Tsh"]})}),e.jsx(pe.Item,{label:"Description",children:r.darasa.description})]}),e.jsxs(T,{layout:"vertical",form:O,onFinish:v=>{},requiredMark:!0,autoComplete:"off",children:[e.jsx(T.Item,{name:"phone",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Mobile Phone Number"}),b.length>0&&e.jsx(oe,{color:"green",style:{marginLeft:10},children:b}),t&&e.jsx(de,{spinning:t})]}),rules:[{required:!0,type:"string",message:"Required"},{validator:async(v,w)=>{if(w.length>=10){if(!t){const F=await _(w).then(k=>k);if(F!=null&&F.success)D(F.carrier),i(!0);else return D(""),Promise.reject(F==null?void 0:F.message)}}else i(!1)}}],children:e.jsx(ne,{size:"large",placeholder:"Mobile Phone Number ..."})}),p.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{children:"Supported Payment Merchants"}),e.jsx("span",{children:p.map(v=>e.jsx(oe,{color:"red",children:v}))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",disabled:!a,children:"Pay"})})]})]})},Dl=()=>{const[r,t]=o.useState(!0),[n,a]=o.useState(!1),[i,s]=o.useState(),[d,p]=o.useState(!1),u=Ht(),b=async O=>{t(!0);const{data:P}=await W.custom({url:"",method:"post",meta:{operation:"checkDarasaConnected",variables:{id:{value:parseInt(O.toString()),type:"Int",required:!0}},fields:["success","message",{darasa:["id","name","code","created","canEdit","canDelete","canManage","updated","isActive","isAuthor","isConnected","payable","price","startDate","endDate",{user:["id","firstName","middleName","lastName","fullName","pic"]}]}]}}).catch(_=>({data:null})).then(_=>_);t(!1),P&&(a(P.success),s(P.darasa))},D=async O=>{const{data:P}=await W.custom({url:"",method:"post",meta:{operation:"connectDarasa",variables:{id:{value:parseInt(O.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>({data:null})).then(_=>_);P?(a(P.success),s(P.darasa),g.success(P.message),P.success&&b(u.id)):g.error(P.message)};return o.useEffect(()=>{b(u.id)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginTop:0},children:[r&&e.jsx(e.Fragment,{children:e.jsx(Z,{children:e.jsx(X,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(de,{tip:"Checking Connection",size:"large",style:{color:"red"},children:e.jsx("div",{className:"content",style:{height:"50vh",width:"100vh"}})})})})}),n&&e.jsx(wl,{}),!n&&!r&&e.jsxs(e.Fragment,{children:[e.jsx(Ie,{children:e.jsxs(pe,{title:"Class Info's",children:[e.jsx(pe.Item,{label:"Class Name/Title",children:i==null?void 0:i.name}),e.jsx(pe.Item,{label:"Class Code",children:i==null?void 0:i.code}),e.jsx(pe.Item,{label:"Created By",children:e.jsx("a",{children:i==null?void 0:i.user.fullName})}),(i==null?void 0:i.startDate)&&e.jsx(pe.Item,{label:"Start Date",children:ue(i==null?void 0:i.startDate).format("YYYY-MM-DD")}),(i==null?void 0:i.endDate)&&e.jsx(pe.Item,{label:"End Date",children:ue(i==null?void 0:i.endDate).format("YYYY-MM-DD")}),(i==null?void 0:i.payable)&&e.jsxs(pe.Item,{label:"Price",children:[i==null?void 0:i.price.toLocaleString(),"/= Tsh"]})]})}),e.jsx(Z,{children:e.jsxs(X,{span:24,style:{display:"flex",justifyContent:"center"},children:[(i==null?void 0:i.payable)&&e.jsx(K,{size:"large",onClick:()=>p(!0),children:"Pay for This Class"}),!(i!=null&&i.payable)&&e.jsx(pt,{title:"Are you sure to Connect/Join to this Class",onConfirm:()=>D(u.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(K,{size:"large",children:"Connect/Join"})})]})})]})]}),e.jsx(ie,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Purchasing"}),e.jsx("span",{style:{marginLeft:10,fontWeight:"bolder"},children:i==null?void 0:i.name})]}),width:"35vw",open:d,onClose:O=>p(O),children:e.jsx(Rn,{darasa:i,randKey:Math.random()})})]})},Tl=()=>e.jsx(Dl,{}),kl=()=>e.jsxs(ve,{children:[e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx(Je,{to:"/oclass",children:"Home"})}),e.jsx(re.Item,{children:"Connected Classes"})]}),e.jsx(ve,{sx:{mt:2},children:e.jsx(Yt,{mode:"connected"})})]}),Il=()=>e.jsx(kl,{}),{Meta:Pl}=Ie,Al=r=>{const[t,n]=o.useState([]),[a,i]=o.useState();o.useState();const[s,d]=o.useState(!1),[p,u]=o.useState(!1),[b,D]=o.useState(!0),[O,P]=o.useState(1),[_,v]=o.useState(0),[w,F]=o.useState(!0),[k]=T.useForm();fe();const Y=!rn.useBreakpoint().lg,q=l=>{i(l),u(!0)},I=l=>{i(l),d(!0)},y=async(l,f="",m=!1)=>{const{data:c}=await W.custom({url:"",method:"get",meta:{operation:"madarasaToBuy",variables:{page:{value:l,type:"Int",required:!0},key:{value:f,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","price","cover","created","canEdit","canDelete","canManage","updated","isActive","isAuthor","isConnected"]}]}}).catch(()=>(g.error("Error getting darasas"),{data:null})).then(A=>A);c&&(v(c.total),P(c.page),F(c.hasNext),n(c.results)),D(!1)};return o.useEffect(()=>{y(O)},[]),b?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:b,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{style:{display:"flex",justifyContent:"center"},children:e.jsx(X,{span:Y?24:10,children:e.jsx(T,{layout:"vertical",form:k,onFinish:l=>{P(0),y(0,l.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Classes...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(mr,{dataLength:_,next:()=>y(O),hasMore:w,loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(de,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:t.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:t.length>0?e.jsx(Z,{align:"top",children:t.map(l=>e.jsx(X,{span:Y?24:8,children:e.jsxs(Ie,{hoverable:l.isActive,style:{marginRight:10,marginBottom:10},actions:[e.jsx(K,{size:"large",onClick:()=>I(l),children:"Read More"}),e.jsx(K,{size:"large",onClick:()=>q(l),children:"Buy Now"})],children:[e.jsx("div",{style:{height:window.innerHeight/3,background:"url("+l.cover+")",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",marginBottom:10,borderRadius:5}}),e.jsx(Pl,{title:e.jsx(e.Fragment,{children:e.jsxs(Pe,{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("h2",{children:[e.jsx(Ve,{title:l.name,children:rr(l.name,20)}),e.jsx(oe,{color:"red",style:{marginLeft:10},children:l.code})]}),e.jsxs("span",{style:{fontSize:24},children:[l.price,"/="]})]})}),description:e.jsx(e.Fragment,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:rr(l.description,100)}})})})]})}))}):e.jsx(at,{severity:"info",sx:{fontSize:18},children:"No Classes Found"})}),e.jsx(It,{title:a==null?void 0:a.name,width:"50vw",anchor:"right",onClose:l=>d(l),open:s,children:e.jsxs(pe,{title:"",column:1,children:[e.jsx(pe.Item,{label:"Class Name",children:a==null?void 0:a.name}),e.jsx(pe.Item,{label:"Class Code#",children:a==null?void 0:a.code}),e.jsxs(pe.Item,{label:"Cost",children:[a==null?void 0:a.price," Tsh"]}),e.jsx(pe.Item,{label:"Description",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:a==null?void 0:a.description}})}),e.jsx(pe.Item,{label:"",children:e.jsx(K,{size:"large",onClick:()=>q(a),children:"Buy Now"})})]})}),e.jsx(ie,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Purchasing"}),e.jsx("span",{style:{marginLeft:10,fontWeight:"bolder"},children:a==null?void 0:a.name})]}),width:"35vw",open:p,onClose:l=>u(l),children:e.jsx(Rn,{darasa:a,randKey:Math.random()})})]})},Ml=()=>e.jsxs(ve,{children:[e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx(Je,{to:"/oclass",children:"Home"})}),e.jsx(re.Item,{children:"Classes Marketplace"})]}),e.jsx(ve,{sx:{mt:2},children:e.jsx(Al,{randKey:Math.random()})})]}),Ol=()=>e.jsx(Ml,{}),El=()=>e.jsxs("div",{style:{marginTop:10},children:[e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx(Je,{to:"/oclass",children:"Home"})}),e.jsx(re.Item,{children:"My Classes"})]}),e.jsx(ve,{sx:{mt:2},children:e.jsx(Yt,{mode:"my"})})]}),Nl=()=>e.jsx(El,{}),_l=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState(0),[s,d]=o.useState(0),[p,u]=o.useState(1),[b,D]=o.useState(25),[O,P]=o.useState(""),[_,v]=o.useState([]),[w,F]=o.useState(),[k]=T.useForm(),[z,Y]=o.useState(!1);fe();const q=async f=>{F(f),Y(!0)},I=async(f,m="",c=25)=>{n(!0);const{data:A}=await W.custom({url:"",method:"get",meta:{operation:"myBooksOrders",variables:{page:{value:f,type:"Int",required:!0},key:{value:m,type:"String",required:!1},pageSize:{value:c,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","price","paymentDate","receiptNumber","isPaid",{book:["id","title","description","file","cover","price","created","updated","isActive","isPublic","hasPurchaseOrder","canEdit","canDelete","canManage",{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]},{user:["id","firstName","middleName","lastName"]},{bill:["id","billNumber"]},"isActive","created","updated","canDelete","canManage"]}]}}).catch($=>(g.error("Error getting Bills"),{data:null})).then($=>$);A&&(i(A.total),d(A.pages),u(A.page),v(A.results)),n(!1)},y=async f=>{const{data:m}=await W.custom({url:"",method:"post",meta:{operation:"deleteBookOrder",variables:{id:{value:f,type:"Int",required:!0}},fields:["success","message"]}}).catch(c=>(g.error("Error deleting Order"),{data:null})).then(c=>c);m&&v(_.filter(c=>c.id!==f))},l=[{title:"Bill#",dataIndex:"billNumber",fixed:!0,render:(f,m,c)=>{var A;return e.jsx("span",{children:e.jsx("a",{children:(A=m==null?void 0:m.bill)==null?void 0:A.billNumber})})}},{title:"Book Title",dataIndex:"bookTitle",fixed:!0,render:(f,m,c)=>{var A;return e.jsx("span",{children:e.jsx("a",{children:(A=m==null?void 0:m.book)==null?void 0:A.title})})}},{title:"Bill Amount",dataIndex:"billAmount",fixed:!0,render:(f,m,c)=>e.jsxs("span",{children:[m.price," Tsh"]})},{title:"Paid",dataIndex:"isPaid",fixed:!0,render:(f,m,c)=>e.jsx("span",{children:m.isPaid?e.jsx(oe,{color:"green",children:"Yes"}):e.jsx(oe,{color:"red",children:"No"})})},{title:"Created",dataIndex:"created",render:(f,m,c)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(ut,{date:new Date(m.created)})})})},{title:"Status",dataIndex:"isActive",render:(f,m,c)=>e.jsx("a",{children:m!=null&&m.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(f,m,c)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[!m.isPaid&&e.jsx(pt,{title:"Are you sure to delete this Order?",onConfirm:()=>y(m.id),okText:"Yes",cancelText:"No",disabled:!(m!=null&&m.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(K,{icon:e.jsx($e,{}),disabled:!(m!=null&&m.canDelete),size:"large"})}),m.isPaid&&e.jsx(Ve,{title:"Print Receipt",children:e.jsx(K,{icon:e.jsx(ka,{}),size:"large"})}),!m.isPaid&&e.jsx(Ve,{title:"View Order Details",children:e.jsx(K,{icon:e.jsx(nn,{}),size:"large",onClick:()=>q(m)})})]})}];return o.useEffect(()=>{I(p,"",25)},[r.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(Ta,{offsetTop:75,children:e.jsx(Z,{style:{display:"flex",justifyContent:"center",marginTop:20},children:e.jsx(X,{span:10,children:e.jsx(T,{layout:"vertical",form:k,onFinish:f=>{I(1,f.key,25)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Bill(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})})})}),e.jsx(Z,{children:e.jsx(X,{span:24,children:e.jsx(ln,{loading:t,columns:l,dataSource:_,pagination:{onChange:(f,m)=>{D(m),I(f,O,m)},total:a,pageSize:b,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})})}),e.jsx(ie,{title:"Order Details & Payment",open:z,width:"50vw",onClose:f=>Y(f),children:e.jsx(Aa,{book:w==null?void 0:w.darasa})})]})},Fl=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx(_l,{randKey:Math.random()})}),Rl=()=>e.jsx(Fl,{}),{Option:Ll}=Re,Wr=[{value:"",label:"Select Duration Type"},{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"}],ql=r=>{const[t,n]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(T,{layout:"vertical",form:r.form,onFinish:a=>{a.description=t,r.onFinish(a),n("")},requiredMark:!1,children:[e.jsx(T.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(ne,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(T.Item,{name:"startDate",label:"start Date",rules:[{required:!0,type:"date",message:"Please select date"}],children:e.jsx(it,{showTime:{format:"HH:mm"},disabledDate:a=>{const i=ue().format("YYYY-MM-DD");return a&&a<ue(i,"YYYY-MM-DD")},style:{width:"100%"},popupStyle:{zIndex:9999}})}),e.jsxs(Z,{children:[e.jsx(X,{span:12,children:e.jsx(T.Item,{name:"duration",label:"Duration",style:{width:"100%"},rules:[{required:!0,type:"integer",message:"Enter Duration"}],children:e.jsx(Xe,{min:1,defaultValue:1,style:{width:"100%"},size:"large"})})}),e.jsx(X,{span:12,children:e.jsx(T.Item,{name:"durationType",label:"Duration Type",style:{width:"100%"},rules:[{required:!0,type:"string",message:"Please select duration type"}],children:e.jsx(Re,{defaultValue:Wr[0].value,size:"large",style:{width:"100%"},dropdownStyle:{zIndex:9999},children:Wr.map(a=>e.jsx(Ll,{children:a.label},a.value))})})})]}),e.jsx(T.Item,{name:"isPublic",label:"Availability",rules:[{required:!1,type:"boolean"}],children:e.jsx(Lt,{defaultChecked:!0,disabled:!0,checked:!0,value:!0,children:"Public Available"})}),e.jsx("h3",{children:"Description"}),e.jsx(ze.CKEditor,{editor:He,data:t,onReady:a=>{a.editing.view.change(i=>{i.setStyle("min-height","100px",a.editing.view.document.getRoot())})},onChange:(a,i)=>{const s=i.getData();n(s)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(K,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Vl=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState([]),[s,d]=o.useState(),[p,u]=o.useState(),[b,D]=o.useState(!0),[O,P]=o.useState(1),[_,v]=o.useState(0),[w,F]=o.useState(!0),[k]=T.useForm(),[z,Y]=o.useState(!1),{push:q}=fe(),[I]=T.useForm(),[y,l]=o.useState(!1),[f,m]=o.useState(!1),c=S=>{d(S),m(!0)},A=async S=>{const{data:E}=await W.custom({url:"",method:"post",meta:{operation:"connectClass",variables:{id:{value:S,type:"Int",required:!0}},fields:["success","message"]}}).catch(C=>(g.error("Error connecting to class"),{data:null})).then(C=>C);E&&(E.success?(l(!1),u(null),g(E.message),i(a.filter(C=>C.id!==S))):g.error(E.message))},$=async S=>{const{data:E}=await W.custom({url:"",method:"post",meta:{operation:"createVirtualClass",variables:{name:{value:S.name,type:"String",required:!0},description:{value:S.description,type:"String",required:!0},duration:{value:S.duration,type:"Int",required:!0},durationType:{value:S.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:S.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(C=>(g.error("Error creating class"),{data:null})).then(C=>C);E&&(E.success?(g.success(E.message),Y(!1),i([E.virtual,...a])):g.error(E.message))},G=async S=>{const{data:E}=await W.custom({url:"",method:"post",meta:{operation:"editVirtualClass",variables:{id:{value:S.id,type:"Int",required:!0},name:{value:S.name,type:"String",required:!0},description:{value:S.description,type:"String",required:!0},duration:{value:S.duration,type:"Int",required:!0},durationType:{value:S.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:S.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(C=>(g.error("Error editing class"),{data:null})).then(C=>C);E&&(E.success?(g.success(E.message),i(a.map(C=>C.id===E.virtual.id?E.virtual:C)),m(!1)):g.error(E.message))},M=()=>{I.resetFields(),Y(!0)},V=async S=>{const{data:E}=await W.custom({url:"",method:"post",meta:{operation:"deleteVirtualClass",variables:{id:{value:S,type:"Int",required:!0}},fields:["success","message"]}}).catch(C=>(g.error("Error deleting class"),{data:null})).then(C=>C);E&&(E.success?(g.success(E.message),i(a.filter(C=>C.id!==S))):g.error(E.message))},L=S=>{ge.confirm({title:"Deleting Virtual Class",icon:e.jsx(ye,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>V(S)})},H=async(S,E="",C=!1)=>{const{data:h}=await W.custom({url:"",method:"get",meta:{operation:"publicVirtualClasses",variables:{page:{value:S,type:"Int",required:!0},key:{value:E,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(x=>(g.error("Error fetching classes"),{data:null})).then(x=>x);h&&(v(h.total),P(h.page),F(h.hasNext),i(h.results)),D(!1)},j=async()=>{const{data:S}=await W.custom({url:"",method:"get",meta:{operation:"darasaAuth",variables:{},fields:["auth"]}}).catch(E=>(g.error("Error getting darasa auth"),{data:null})).then(E=>E);S&&n(S.auth.create_virtual_classes)};return o.useEffect(()=>{j(),H(O)},[]),b?e.jsx(e.Fragment,{children:e.jsx(Ue,{loading:b,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(X,{span:20,children:e.jsx(T,{layout:"vertical",form:k,onFinish:S=>{P(0),H(0,S.key,!0)},children:e.jsx(T.Item,{name:"key",children:e.jsx(ne,{size:"large",placeholder:"Search Public Virtual Classes...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(X,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(K,{icon:e.jsx(qt,{}),size:"large",onClick:()=>M(),disabled:!t,children:"Create Virtual Class"})})]}),e.jsx(mr,{dataLength:_,next:()=>H(O),hasMore:w,loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(de,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:a.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(ee,{loading:!1,itemLayout:"horizontal",loadMore:!1,dataSource:a,renderItem:S=>e.jsx(Ie,{children:e.jsx(ee.Item,{actions:[e.jsx(Se,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(zt,{}),disabled:!S.canJoin,onClick:()=>q("/oclass/virtual/class/session/"+S.id+"/"+S.token),children:e.jsx("a",{children:"Join"})}),S.canDelete?e.jsx(B.Item,{disabled:!S.canDelete,icon:e.jsx($e,{}),onClick:()=>L(S.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}):e.jsx(e.Fragment,{}),e.jsx(B.Item,{icon:e.jsx(kt,{}),disabled:!S.canEdit,onClick:()=>c(S),children:e.jsx("a",{children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:E=>E.preventDefault(),children:e.jsx(Ae,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(Ue,{avatar:!0,title:!1,loading:!1,active:!0,children:e.jsx(ee.Item.Meta,{avatar:e.jsx(Ce,{}),title:e.jsx("a",{onClick:()=>S.canJoin?q("/oclass/virtual/class/session/"+S.id+"/"+S.token):g("You can't join this class"),children:S.name}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:S.description}),e.jsxs("p",{children:[e.jsxs(oe,{color:"green",children:["Start At:"," ",e.jsx("span",{style:{marginLeft:10},children:Rt(new Date(S.startDate),"MMMM do, yyyy H:mma")})]}),e.jsxs(oe,{color:"green",children:["End In:",e.jsx("span",{style:{marginLeft:10},children:Rt(new Date(S.endDate),"MMMM do, yyyy H:mma")})]}),S.canJoin?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx(oe,{color:"red",children:"Not Joinable"})})]})]})})})})})})}),e.jsx(ie,{title:"Creating Public Virtual Class",width:"40vw",open:z,onClose:S=>Y(S),children:e.jsx(ql,{form:I,onFinish:$})}),e.jsx(ie,{title:"Connecting "+(p==null?void 0:p.name),open:y,width:"40vw",onClose:S=>l(S),children:e.jsxs(e.Fragment,{children:[e.jsx(cn,{id:p==null?void 0:p.id}),e.jsx(K,{onClick:()=>A(p==null?void 0:p.id),style:{position:"absolute",bottom:0,right:0,marginBottom:10},children:"Connect"})]})}),e.jsx(ie,{title:"Editting "+(s==null?void 0:s.name),width:"40vw",open:f,onClose:S=>m(S),children:e.jsx(Qr,{form:I,darasa:s,onFinish:G})})]})},Ul=()=>e.jsxs(ve,{children:[e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx(Je,{to:"/oclass",children:"Home"})}),e.jsx(re.Item,{children:"Online Public Virtual Classes"})]}),e.jsx(ve,{sx:{mt:2},children:e.jsx(Vl,{mode:"connected"})})]}),zl=()=>e.jsx(Ul,{}),Ln="meet.jit.si";var Hl=globalThis&&globalThis.__awaiter||function(r,t,n,a){function i(s){return s instanceof n?s:new n(function(d){d(s)})}return new(n||(n=Promise))(function(s,d){function p(D){try{b(a.next(D))}catch(O){d(O)}}function u(D){try{b(a.throw(D))}catch(O){d(O)}}function b(D){D.done?s(D.value):i(D.value).then(p,u)}b((a=a.apply(r,t||[])).next())})};const Yl=(r,t,n)=>Hl(void 0,void 0,void 0,function*(){return new Promise((a,i)=>{if(window.JitsiMeetExternalAPI)return a(window.JitsiMeetExternalAPI);const s=document.createElement("script"),d=t?`?release=${t}`:"",p=n?`${n}/`:"";s.async=!0,s.src=`https://${r}/${p}external_api.js${d}`,s.onload=()=>a(window.JitsiMeetExternalAPI),s.onerror=()=>i(new Error(`Script load error: ${s.src}`)),document.head.appendChild(s)})});let Mt;const Wl=(r=Ln,t,n)=>Mt||(Mt=Yl(r,t,n),Mt),Bl=r=>{const t=r.split("/");if(!(t.length<=1))return t[0]};let $l=0;const Br=r=>`${r}-${$l++}`,Gl=({domain:r=Ln,roomName:t,configOverwrite:n,interfaceConfigOverwrite:a,jwt:i,invitees:s,devices:d,userInfo:p,release:u,spinner:b,onApiReady:D,onReadyToClose:O,getIFrameRef:P})=>{const[_,v]=o.useState(!0),[w,F]=o.useState(!1),k=o.useRef(),z=o.useRef(),Y=o.useRef(null),q=o.useMemo(()=>Br("jitsiMeeting"),[Br]);o.useEffect(()=>{Wl(r,u,Bl(t)).then(l=>{k.current=l,F(!0)}).catch(l=>console.error(l.message))},[]);const I=o.useCallback(l=>{z.current=new l(r,{roomName:t,configOverwrite:n,interfaceConfigOverwrite:a,jwt:i,invitees:s,devices:d,userInfo:p,release:u,parentNode:Y.current}),v(!1),z.current&&(typeof D=="function"&&D(z.current),z.current.on("readyToClose",()=>{typeof O=="function"&&O()}),Y.current&&typeof P=="function"&&P(Y.current))},[z,Y,D,O,P,r,t,n,a,i,s,d,p]);o.useEffect(()=>{w&&!z.current&&k.current&&I(k.current)},[w,I]);const y=o.useCallback(()=>!b||!_||z.current?null:e.jsx(b,{},void 0),[b,z.current]);return e.jsxs(e.Fragment,{children:[y(),e.jsx("div",{id:q,ref:Y},q)]},void 0)};globalThis&&globalThis.__rest;const Kl={app_name:"Oclass",api_url:"https://olbongo.co.tz",conference_url:"video.olbongo.co.tz"},Xl=r=>{const[t,n]=o.useState(),[a,i]=o.useState(!1),[s,d]=o.useState(!0),[p,u]=o.useState(!0),{push:b}=en(),{data:D}=hr(),O=Ht(),P=async()=>{const{data:v}=await W.custom({url:"",method:"get",meta:{operation:"virtual",variables:{id:{value:parseInt(O.id),type:"Int",required:!0}},fields:["id","name","description","startDate","duration","durationType","token",{darasa:["id","name","code","description"]},{author:["id","firstName","middleName","lastName","fullName","pic","email"]},"created","canEdit","canDelete","canManage","updated","isActive"]}}).catch(w=>(g.error("Error fetching virtual class"),{data:null})).then(w=>w);v&&n(v),d(!1)},_=e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx("a",{onClick:()=>b("/oclass"),children:"Home"})}),e.jsx(re.Item,{children:e.jsx("a",{onClick:()=>b("/oclass/public/virtual/classes"),children:"Virtual Sessions/Classes"})}),e.jsx(re.Item,{children:t==null?void 0:t.name})]});return o.useEffect(()=>{P()},[]),s?e.jsxs(e.Fragment,{children:[_,e.jsx(Z,{align:"middle",children:e.jsx(X,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(de,{size:"large"})})})]}):a?e.jsxs(e.Fragment,{children:[_,e.jsx("div",{children:e.jsxs(Z,{align:"middle",children:[e.jsx(X,{span:8}),e.jsx(X,{span:8,children:e.jsx(Ie,{title:t==null?void 0:t.name,bordered:!1,actions:[e.jsx(K,{onClick:()=>window.location.reload(),children:"Re-join"})],children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(t==null?void 0:t.description)??""}})})})]})})]}):e.jsxs(e.Fragment,{children:[_,p&&e.jsxs(Z,{align:"middle",children:[e.jsx(X,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(Pe,{direction:"vertical",children:e.jsx(de,{size:"large"})})}),e.jsx(X,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(Pe,{direction:"vertical",children:"Preparing Virtual Conference Connection"})})]}),t&&e.jsx(Gl,{domain:Kl.conference_url,roomName:t.id.toString()+t.token,configOverwrite:{speakerStats:{disabled:!0,disableSearch:!1,order:["role","name","hasLeft"]},breakoutRooms:{hideAddRoomButton:!0,hideAutoAssignButton:!0,hideJoinRoomButton:!0},disableInviteFunctions:!0,hideConferenceSubject:!0,disablePolls:!0,autoKnockLobby:!0,enableLobbyChat:!0,disableModeratorIndicator:!1,disableReactionsModeration:!1,openSharedDocumentOnJoin:!1,startWithAudioMuted:!0,startScreenSharing:!1,enableEmailInStats:!1,enableWelcomePage:!1,readOnlyName:!0,notifications:[],screenshotCapture:{enabled:!0,mode:"recording"},prejoinConfig:{enabled:!0,hideDisplayName:!0,hideExtraJoinButtons:["no-audio","by-phone"]},p2p:{enabled:!0},e2ee:{labels:{labelTooltip:"Tooltip",description:"Description",label:"E2EE",warning:"Warning"},externallyManagedKey:!1}},interfaceConfigOverwrite:{DISABLE_JOIN_LEAVE_NOTIFICATIONS:!1},userInfo:{displayName:D==null?void 0:D.fullName,email:D==null?void 0:D.email},onApiReady:v=>{u(!1),v.addListener("videoConferenceJoined",()=>{}),v.addListener("videoConferenceLeft",()=>{}),v.addListener("participantJoined",w=>{}),v.addListener("participantLeft",w=>{}),v.addListener("onMessageReceived",w=>{}),v.addListener("onMessageSent",w=>{}),v.addListener("onChatMessage",w=>{}),v.addListener("onChatMessageReceived",w=>{}),v.addListener("onChatMessageSent",w=>{})},onReadyToClose:()=>{i(!0)},getIFrameRef:v=>{v.style.height="88vh"}})]})},Jl=()=>e.jsxs(ve,{children:[e.jsxs(re,{children:[e.jsx(re.Item,{children:e.jsx(Je,{to:"/oclass",children:"Home"})}),e.jsx(re.Item,{children:"Online Virtual Classes"})]}),e.jsx(ve,{sx:{mt:2},children:e.jsx(Xl,{mode:"connected"})})]}),Ql=()=>e.jsx(Jl,{}),mc=r=>{const{page:t}=r;return t==="VirtualClassSessionPage"?e.jsx(Ql,{}):t==="PublicVirtualClassesPage"?e.jsx(zl,{}):t==="OclassOrdersPage"?e.jsx(Rl,{}):t==="MyClassesPage"?e.jsx(Nl,{}):t==="OclassMarketplacePage"?e.jsx(Ol,{}):t==="ConnectedClassesPage"?e.jsx(Il,{}):t==="ClassSessionPage"?e.jsx(Tl,{}):t==="ClassesPage"?e.jsx(Va,{}):t==="ClassesConnectPage"?e.jsx(La,{}):t==="DarasaArchivesPage"?e.jsx(Ea,{}):e.jsx("div",{children:"Page not found ..."})};export{mc as DarasaPages};
