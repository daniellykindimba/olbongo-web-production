var Hn=Object.defineProperty;var Yn=(r,t,n)=>t in r?Hn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var pr=(r,t,n)=>(Yn(r,typeof t!="symbol"?t+"":t,n),n);import{r as o,F as k,j as e,a5 as Ie,s as Q,C as K,I as re,S as me,t as ue,u as De,x as Te,X as ve,Y as B,al as Wn,B as G,$ as ke,am as lr,H as p,A as je,an as qe,ao as Je,ap as pe,aq as ge,G as W,ar as ot,af as Fe,ag as Re,ae as Ft,ad as We,as as Ne,at as Qe,au as ce,av as gr,q as he,aw as Rt,ax as At,ay as St,az as Wr,Z as Ae,a7 as Ue,aA as Bn,D as ae,aB as $n,aC as Gn,aD as cr,aE as Kn,aF as nt,a3 as ee,W as Xn,aG as Jn,a9 as at,aH as $t,aI as Br,T as se,y as _e,aJ as $r,aK as Qn,aL as Zn,aM as ea,aN as ta,a4 as lt,aO as Lt,aP as qt,aQ as it,V as Vt,aR as xt,a0 as Ct,aS as ra,aT as Gr,aU as na,aV as Ut,ab as dr,ac as aa,aW as ia,aX as sa,aY as oa,aZ as Gt,a_ as la,a$ as ca,b0 as Kr,b1 as Xr,b2 as da,b3 as Jr,b4 as ua,b5 as ma,b6 as yr,b7 as ur,b8 as Qr,b9 as Zr,ba as ha,bb as fa,bc as pa,bd as en,be as xr,O as tn,bf as ga,bg as ya,E as xa,Q as va,v as ja,bh as rn,bi as ba,a8 as fe,J as Sa,aa as Ca}from"./index-afb01353.js";import{I as zt}from"./index.es-d329f25a.js";import{t as tr}from"./text_truncate-315d9efa.js";import{l as wa,G as Da}from"./iconBase-ba28ab67.js";import{C as nn}from"./Collapse-81d619af.js";import{a as Ta,T as an}from"./Table-b9b9cf3b.js";import{B as Ye}from"./Breadcrumb-835bbd39.js";import{B as ka}from"./book_payment_form-9917317c.js";import"./index-4cd31182.js";import"./index-7fdce38e.js";import"./index-515bcb5c.js";const Pa=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1),[h,u]=o.useState(0),[S,D]=o.useState(!0),[E]=k.useForm(),A=async C=>{const{data:N}=await W.custom({url:"",method:"post",meta:{operation:"removeDarasaArchive",variables:{id:{value:C,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(p.error("Error removing from archive"),{data:null})).then(T=>T);N&&(N.success?(p.success(N.message),n(t.filter(T=>T.id!==C))):p.error(N.message)),pe.destroyAll()},R=C=>{pe.confirm({title:"Confirm",icon:e.jsx(ge,{}),content:"Removing Class From Archive ....",okText:"Restore",cancelText:"Cancel",onOk:()=>A(C)})},y=async(C,N="",T=!1)=>{const{data:q}=await W.custom({url:"",method:"get",meta:{operation:"madarasaArchives",variables:{page:{value:C,type:"Int",required:!0},key:{value:N,type:"String",required:!1}},fields:["total","page","pages","hasNext",{results:["id",{darasa:["id","name","code","created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(()=>(p.error("Error fetching archives"),{data:null})).then(z=>z);q&&(u(q.total),c(q.page+1),D(q.hasNext),n(q.results)),i(!1)};return o.useEffect(()=>{y(s)},[]),a?e.jsx(e.Fragment,{children:e.jsx(Ie,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsx(K,{span:20,children:e.jsx(k,{layout:"vertical",form:E,onFinish:C=>{c(0),y(0,C.key,!0)},children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Classes Archives...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(zt,{dataLength:h,next:()=>y(s),hasMore:S,loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(ue,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:t.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:t.length>0?e.jsx(Q,{align:"top",children:t.map(C=>e.jsx(K,{span:4,children:e.jsxs(De,{hoverable:C.isActive,style:{marginRight:10},children:[e.jsx(Te,{style:{right:0,position:"absolute"},children:e.jsx(ve,{trigger:["click"],overlay:e.jsx(B,{children:e.jsx(B.Item,{icon:e.jsx(Wn,{}),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>R(C.id),children:"Restore"})},"class-archive-"+C.id)}),overlayStyle:{zIndex:9999},children:e.jsx(G,{type:"link",size:"large",className:"ant-dropdown-link",onClick:N=>N.preventDefault(),style:{zIndex:1},children:e.jsx(ke,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx(lr.Ribbon,{text:C.darasa.code,placement:"start",color:"orange",children:e.jsx("a",{onClick:()=>{p("Drive To Connect")},children:e.jsxs(Te,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(je,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(qe,{}),src:C.darasa.icon}),e.jsx("span",{style:{fontSize:20},children:C.darasa.name})]})})})]})}))}):e.jsx(Je,{severity:"info",sx:{fontSize:18},children:"No Class Found in Archives"})})]})},Ia=()=>e.jsx(Pa,{}),Aa=()=>e.jsx(Ia,{}),{Title:Tt,Text:kt}=ot,sn=r=>{const[t,n]=o.useState(),[a,i]=o.useState(!0),s=async c=>{const{data:h}=await W.custom({url:"",method:"get",meta:{operation:"darasa",variables:{id:{value:c,type:"Int",required:!0}},fields:["id","name","description","code","created","updated","isActive","canEdit","canDelete","isAuthor","totalStudents","canManage",{user:["id","firstName","lastName","email","middleName","fullName","pic"]}]}}).catch(u=>(p.error("Error fetching darasa"),{data:null}));h&&n(h),i(!1)};return o.useEffect(()=>{s(r.id)},[r.id]),e.jsxs(ue,{spinning:a,children:[e.jsx(Tt,{level:5,children:"Class Name"}),e.jsx(kt,{children:t==null?void 0:t.name}),e.jsx(Tt,{level:5,children:"Class Code"}),e.jsx(kt,{children:t==null?void 0:t.code}),e.jsx(Tt,{level:5,children:"Class Description"}),e.jsx(kt,{children:t==null?void 0:t.description}),e.jsx(Tt,{level:5,children:"Class Author"}),e.jsx(kt,{children:t==null?void 0:t.user.profile.fullName})]})},Ma=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(k,{layout:"vertical",form:r.form,onFinish:s=>{s.payable=t,s.description=a,r.onFinish(s)},requiredMark:!0,autoComplete:"off",children:[e.jsx(k.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Name is required"}],children:e.jsx(re,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(Fe.CKEditor,{editor:Re,data:a,onReady:s=>{s.editing.view.change(c=>{c.setStyle("min-height","150px",s.editing.view.document.getRoot())})},onChange:(s,c)=>{const h=c.getData();i(h)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(k.Item,{name:"payable",children:e.jsx(Ft,{onChange:s=>n(s.target.checked),children:"Payable"})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(k.Item,{name:"price",label:"Cost",initialValue:0,rules:[{required:t,type:"number",validator:(s,c)=>c<=0?Promise.reject("Price cannot be less than 0"):Promise.resolve()}],children:e.jsx(We,{size:"large",style:{width:"100%"},precision:2})}),e.jsxs(Q,{children:[e.jsx(K,{span:8,children:e.jsx(k.Item,{name:"duration",label:"Duration",initialValue:1,wrapperCol:{span:24},rules:[{required:t,type:"number",message:"Please enter duration"}],children:e.jsx(We,{size:"large",style:{width:"100%"}})})}),e.jsx(K,{span:12,children:e.jsx(k.Item,{label:"Duration Type",name:"duration_type",wrapperCol:{span:12},initialValue:"months",rules:[{required:t,type:"string",message:"Please select duration type"}],children:e.jsxs(Ne,{size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx(Ne.Option,{value:"days",children:"Days"}),e.jsx(Ne.Option,{value:"months",children:"Months"}),e.jsx(Ne.Option,{value:"years",children:"Years"})]})})})]}),e.jsx(k.Item,{label:"Start Date",name:"start_date",rules:[{required:!0,type:"object",message:"Please select Start Date"}],children:e.jsx(Qe,{size:"large",style:{width:"50%"},disabledDate:s=>s.add(1,"day")<ce().endOf("day"),popupStyle:{zIndex:9999}})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Oa=r=>{const[t,n]=o.useState(r.darasa.payable),[a,i]=o.useState(r.darasa.description);return o.useEffect(()=>{r.form.setFieldsValue({name:r.darasa.name,description:r.darasa.description,payable:r.darasa.payable,price:r.darasa.price,duration:r.darasa.duration,duration_type:r.darasa.durationType,start_date:gr(r.darasa.startDate),end_date:gr(r.darasa.endDate)})},[r.darasa,r.form]),e.jsx(e.Fragment,{children:e.jsxs(k,{layout:"vertical",form:r.form,onFinish:s=>{s.id=parseInt(r.darasa.id),s.payable=t,s.description=a,r.onFinish(s)},requiredMark:!1,children:[e.jsx(k.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Name is required"}],children:e.jsx(re,{size:"large",placeholder:"Enter Name ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(Fe.CKEditor,{editor:Re,data:a,onReady:s=>{s.editing.view.change(c=>{c.setStyle("min-height","150px",s.editing.view.document.getRoot())})},onChange:(s,c)=>{const h=c.getData();i(h)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(k.Item,{name:"payable",children:e.jsx(Ft,{defaultChecked:t,onChange:s=>n(s.target.checked),children:"Payable"})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(k.Item,{name:"price",label:"Cost",initialValue:0,rules:[{required:t,type:"number",validator:(s,c)=>c<=0?Promise.reject("Price cannot be less than 0"):Promise.resolve()}],children:e.jsx(We,{size:"large",style:{width:"100%"},precision:2})}),e.jsxs(Q,{children:[e.jsx(K,{span:8,children:e.jsx(k.Item,{name:"duration",label:"Duration",initialValue:1,wrapperCol:{span:24},rules:[{required:t,type:"number",message:"Please enter duration"}],children:e.jsx(We,{size:"large",style:{width:"100%"}})})}),e.jsx(K,{span:12,children:e.jsx(k.Item,{label:"Duration Type",name:"duration_type",wrapperCol:{span:12},initialValue:"months",rules:[{required:t,type:"string",message:"Please select duration type"}],children:e.jsxs(Ne,{size:"large",dropdownStyle:{zIndex:9999},children:[e.jsx(Ne.Option,{value:"days",children:"Days"}),e.jsx(Ne.Option,{value:"months",children:"Months"}),e.jsx(Ne.Option,{value:"years",children:"Years"})]})})})]}),e.jsx(k.Item,{label:"Start Date",name:"start_date",rules:[{required:!0,type:"object",message:"Please select Start Date"}],children:e.jsx(Qe,{size:"large",style:{width:"50%"},disabledDate:s=>s.add(1,"day")<ce().endOf("day"),popupStyle:{zIndex:9999}})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},{Paragraph:Ea}=ot,Ht=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState([]),[s,c]=o.useState(),[h,u]=o.useState(),[S,D]=o.useState(!0),[E,A]=o.useState(1),[R,y]=o.useState(0),[C,N]=o.useState(!0),[T]=k.useForm(),[q,z]=o.useState(!1),[H,P]=o.useState(!1),{push:v}=he(),[l]=k.useForm(),[g,f]=o.useState(!1),[d,M]=o.useState(!1),$=F=>{c(F),M(!0)},X=F=>{c(F),P(!0)},I=F=>{u(F),f(!0)},U=async F=>{const{data:J}=await W.custom({url:"",method:"post",meta:{operation:"connectClass",variables:{id:{value:F,type:"Int",required:!0}},fields:["success","message"]}}).catch(te=>(p.error("Error connecting darasa"),{data:null})).then(te=>te);J&&(J.success?(f(!1),u(null),p(J.message),i(a.filter(te=>te.id!==F))):p.error(J.message))},L=async F=>{const{data:J}=await W.custom({url:"",method:"post",meta:{operation:"addDarasaArchive",variables:{id:{value:F,type:"Int",required:!0}},fields:["success","message"]}}).catch(te=>(p.error("Error adding darasa to archive"),{data:null})).then(te=>te);J&&(J.success?(p.success(J.message),i(a.filter(te=>te.id!==F))):p.error(J.message)),pe.destroyAll()},Y=F=>{pe.confirm({title:"Confirm",icon:e.jsx(ge,{}),content:"Adding Class To Archive ....",okText:"Add",cancelText:"Cancel",onOk:()=>L(F)})},j=async F=>{const{data:J}=await W.custom({url:"",method:"post",meta:{operation:"createDarasa",variables:{name:{value:F.name,type:"String",required:!0},description:{value:F.description,type:"String",required:!0},payable:{value:F.payable,type:"Boolean",required:!1},price:{value:F.price,type:"Float",required:!1},duration:{value:F.duration,type:"Int",required:!1},durationType:{value:F.duration_type,type:"String",required:!1},startDate:{value:F.start_date,type:"String",required:!1}},fields:["success","message",{darasa:["id","name","code","description","created","canEdit","canDelete","updated","isActive","isAuthor","isConnected"]}]}}).catch(()=>(p.error("Error creating darasa"),{data:null})).then(te=>te);J&&(J.success?(p.success(J.message),z(!1),i([J.darasa,...a])):p.error(J.message))},b=async F=>{const{data:J}=await W.custom({url:"",method:"post",meta:{operation:"updateDarasa",variables:{id:{value:F.id,type:"Int",required:!0},name:{value:F.name,type:"String",required:!0},description:{value:F.description,type:"String",required:!0},payable:{value:F.payable,type:"Boolean",required:!1},price:{value:F.price,type:"Float",required:!1},duration:{value:F.duration,type:"Int",required:!1},durationType:{value:F.duration_type,type:"String",required:!1},startDate:{value:F.start_date,type:"String",required:!1}},fields:["success","message",{darasa:["id","name","code","description","payable","price","duration","durationType","startDate","endDate","created","canEdit","canDelete","canManage","updated","isActive","isAuthor","isConnected"]}]}}).catch(()=>(p.error("Error updating darasa"),{data:null})).then(te=>te);J&&(J.success?(p.success(J.message),P(!1),i(a.map(te=>te.id===F.id?J.darasa:te))):p.error(J.message))},O=()=>{l.resetFields(),z(!0)},w=async F=>{const{data:J}=await W.custom({url:"",method:"post",meta:{operation:"disconnectClass",variables:{classId:{value:F,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(p.error("Error disconnecting darasa"),{data:null})).then(te=>te);J&&(J.success?(p.success(J.message),i(a.filter(te=>te.id!==F))):p.error(J.message))},m=F=>{pe.confirm({title:"Disconnecting Class",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Disconnect",cancelText:"Cancel",onOk:()=>w(F)})},x=async F=>{const{data:J}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasa",variables:{id:{value:F,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(p.error("Error deleting darasa"),{data:null})).then(te=>te);J&&(J.success?(p.success(J.message),i(a.filter(te=>te.id!==F))):p.error(J.message))},_=F=>{pe.confirm({title:"Deleting Class",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>x(F)})},V=async(F,J="",te=!1)=>{const{data:le}=await W.custom({url:"",method:"get",meta:{operation:"myMadarasa",variables:{page:{value:F,type:"Int",required:!0},key:{value:J,type:"String",required:!1},where:{value:{mode:r.mode},type:"JSON",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","payable","price","duration","durationType","startDate","endDate","created","canEdit","canDelete","canManage","updated","isActive","isAuthor","isConnected"]}]}}).catch(()=>(p.error("Error getting darasas"),{data:null})).then(Le=>Le);le&&(y(le.total),A(le.page),N(le.hasNext),i(le.results)),D(!1)},ne=async()=>{const{data:F}=await W.custom({url:"",method:"get",meta:{operation:"darasaAuth",variables:{},fields:["auth"]}}).catch(()=>(p.error("Error getting darasa auth"),{data:null})).then(J=>J);F&&n(F.auth.create_classes)};return o.useEffect(()=>{ne(),V(E)},[]),S?e.jsx(e.Fragment,{children:e.jsx(Ie,{loading:S,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(Q,{children:[e.jsx(K,{span:10,children:e.jsx(k,{layout:"vertical",form:T,onFinish:F=>{A(0),V(0,F.key,!0)},children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Classes...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),r.mode!=="connect"&&e.jsx(K,{span:14,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{size:"large",icon:e.jsx(Rt,{}),onClick:()=>O(),disabled:!t,children:"Create Class"})})]}),a.length>0?e.jsx(At,{container:!0,children:a.map(F=>e.jsx(At,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(De,{hoverable:F.isActive,style:{marginRight:10,marginBottom:5},children:[e.jsx(Te,{style:{right:0,position:"absolute"},children:e.jsx(ve,{trigger:["click"],overlay:e.jsxs(B,{children:[F.isConnected?e.jsxs(e.Fragment,{children:[e.jsx(B.Item,{icon:e.jsx(qe,{}),disabled:!F.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>{F.isActive&&F.isConnected?v("/oclass/class/session/"+F.id+"/"+F.code):F.isActive&&!F.isConnected?I(F):p("Class is Blocked")},children:"Open"})}),e.jsx(B.Item,{icon:e.jsx(St,{}),onClick:()=>X(F),disabled:!(F!=null&&F.canManage),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(B.Item,{icon:e.jsx(Wr,{}),onClick:()=>$(F),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Share"})}),e.jsx(B.Item,{icon:e.jsx(Ae,{}),onClick:()=>p("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),F.isAuthor?e.jsx(e.Fragment,{}):e.jsx(B.Item,{icon:e.jsx(Ae,{}),onClick:()=>m(F.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Disconnect"})}),e.jsx(B.Item,{icon:e.jsx(Ue,{}),onClick:()=>_(F.id),disabled:!(F!=null&&F.canDelete),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}),e.jsx(B.Item,{icon:e.jsx(Bn,{}),onClick:()=>Y(F.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Archive"})},"drive-archive-"+F.id)]}):e.jsx(e.Fragment,{}),F.isConnected?e.jsx(e.Fragment,{}):e.jsx(B.Item,{icon:e.jsx(qe,{}),disabled:!F.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>v("/oclass/class/session/"+F.id+"/"+F.code),children:"Connect"})})]}),overlayStyle:{zIndex:9999},children:e.jsx(G,{type:"link",size:"large",className:"ant-dropdown-link",style:{zIndex:1},onClick:J=>J.preventDefault(),children:e.jsx(ke,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx(lr.Ribbon,{text:F.code,placement:"start",color:"orange",children:e.jsx("a",{onClick:()=>v("/oclass/class/session/"+F.id+"/"+F.code),children:e.jsxs(Te,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(je,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(qe,{}),src:F.icon}),e.jsx("span",{style:{fontSize:20},children:F.name})]})})})]})},F.id))}):e.jsx(Je,{severity:"info",sx:{fontSize:18},children:"No Classes Found"}),C&&e.jsx("div",{style:{position:"absolute",bottom:0,width:"100%",textAlign:"center"},children:e.jsx(G,{type:"primary",onClick:()=>{V(E+1)},children:"Load More"})}),e.jsx(ae,{title:"Creating Class",open:q,destroyOnClose:!0,width:"40vw",onClose:F=>z(F),children:e.jsx(Ma,{form:l,onFinish:j})}),e.jsx(ae,{title:"Editting Class",width:"40vw",open:H,onClose:F=>P(F),children:e.jsx(Oa,{darasa:s,form:l,onFinish:b})}),e.jsx(ae,{title:"Connecting "+(h==null?void 0:h.name),open:g,onClose:F=>f(F),children:e.jsxs(e.Fragment,{children:[e.jsx(sn,{id:h==null?void 0:h.id}),e.jsx(G,{onClick:()=>U(h==null?void 0:h.id),style:{position:"absolute",bottom:0,right:0,margin:10},children:"Connect"})]})}),e.jsx(ae,{title:"Share Class",open:d,width:"40vw",onClose:F=>M(F),children:e.jsx(De,{title:"Click Copy icon to copy share link",children:e.jsx(Ea,{copyable:{icon:[e.jsx($n,{},"copy-icon"),e.jsx(Gn,{},"copied-icon")],tooltips:["click here","you clicked!!"],onCopy:()=>{p.success("Link Successfully Copied")}},style:{textAlign:"center",fontSize:20},children:cr.site_url+"/oclass/class/session/"+(s==null?void 0:s.id)+"/"+(s==null?void 0:s.code)})})})]})},Na=()=>e.jsx(Ht,{mode:"connect"}),_a=()=>e.jsx(Na,{}),Fa=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx(Ht,{mode:"all"})}),Ra=()=>e.jsx(Fa,{}),La=r=>{const[t,n]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(k,{layout:"vertical",form:r.form,onFinish:a=>{a.content=t,r.onFinish(a)},requiredMark:!1,children:[e.jsx(k.Item,{name:"title",label:"Title",rules:[{required:!0,type:"string",message:"Please enter title"}],children:e.jsx(re,{size:"large",placeholder:"Write Content ..."})}),e.jsx("h3",{children:"Announcement Description"}),e.jsx(Fe.CKEditor,{editor:Re,data:t,onReady:a=>{a.editing.view.change(i=>{i.setStyle("min-height","300px",a.editing.view.document.getRoot())})},onChange:(a,i)=>{const s=i.getData();n(s)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},qa=r=>{const[t,n]=o.useState("");return o.useEffect(()=>{var a,i,s;(s=r.form)==null||s.setFieldsValue({title:(a=r.announcement)==null?void 0:a.title,content:(i=r.announcement)==null?void 0:i.content})},[r.form]),e.jsx(e.Fragment,{children:e.jsxs(k,{layout:"vertical",form:r.form,onFinish:a=>{a.content=t,r.onFinish(a)},requiredMark:!1,children:[e.jsx(k.Item,{name:"title",label:"Title",rules:[{required:!0,type:"string",message:"Please enter title"}],children:e.jsx(re,{size:"large",placeholder:"Write Content ..."})}),e.jsx("h3",{children:"Announcement Description"}),e.jsx(Kn,{onChange:a=>n(a)}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Va=r=>{const[t,n]=o.useState(),[a,i]=o.useState([]),[s,c]=o.useState(!0),[h,u]=o.useState(1),[S]=k.useForm(),[D,E]=o.useState(0),[A,R]=o.useState(0),[y,C]=o.useState(!0);he();const[N,T]=o.useState(!1),[q,z]=o.useState(!1),[H]=k.useForm(),[P]=k.useForm(),[v,l]=o.useState(!1),g=L=>{n(L),l(!0)},f=L=>{n(L),z(!0)},d=()=>{T(!0)},M=async L=>{const{data:Y}=await W.custom({url:"",method:"post",meta:{operation:"createDarasaAnnouncement",variables:{id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},title:{value:L.title,type:"String",required:!0},content:{value:L.content,type:"String",required:!0}},fields:["success","message",{announcement:["id","title","content",{user:["id"]},{darasa:["id"]},"created","updated","isActive","canDelete","canEdit"]}]}}).catch(j=>(p.error("Error creating announcement"),{data:null})).then(j=>j);Y&&(Y.success?(p(Y.message),i([Y.announcement,...a]),H.resetFields(),T(!1)):p.error(Y.message))},$=async L=>{const{data:Y}=await W.custom({url:"",method:"post",meta:{operation:"updateDarasaAnnouncement",variables:{id:{value:t===void 0?"0":t.id,type:"Int",required:!0},title:{value:L.title,type:"String",required:!0},content:{value:L.content,type:"String",required:!0}},fields:["success","message",{announcement:["id","title","content",{user:["id"]},{darasa:["id"]},"created","updated","isActive","canDelete","canEdit"]}]}});Y.success?(p(Y.message),i(a.map(j=>j.id===Y.announcement.id?Y.announcement:j)),P.resetFields(),z(!1)):p.error(Y.message)},X=async(L,Y="",j=!1)=>{const{data:b}=await W.custom({url:"",method:"get",meta:{operation:"darasaAnnouncements",variables:{page:{value:L,type:"Int",required:!0},key:{value:Y,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","content","created","updated","isActive","canDelete","canEdit",{user:["id","firstName","middleName","lastName","fullName","pic"]},{darasa:["id"]}]}]}});R(b.total),E(b.pages),u(b.page),C(b.hasNext),(Y.length>0||Y.length===0&&j)&&i(b.results),b.results.length>0&&!j&&i(a.concat(b.results)),c(!1)},I=async L=>{const{data:Y}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaAnnouncement",variables:{id:{value:L,type:"Int",required:!0}},fields:["success","message"]}});Y.success?(p.success(Y.message),i(a.filter(j=>j.id!==L))):p.error(Y.message)},U=L=>{pe.confirm({title:"Deleting Announcent",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>I(L)})};return o.useEffect(()=>{X(h)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Q,{children:[e.jsx(K,{span:20,children:e.jsx(k,{layout:"vertical",form:S,onFinish:L=>X(0,L.key,!0),children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Resources Links...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{size:"large",icon:e.jsx(nt,{}),onClick:d,disabled:!r.canManage,children:"Add Announcement"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(ue,{spinning:s,children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:a,renderItem:L=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(ee.Item,{style:{margin:0,padding:0},actions:[e.jsx(ve,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(Xn,{}),onClick:()=>g(L),children:e.jsx("a",{children:"Read"})}),e.jsx(B.Item,{icon:e.jsx(Ue,{}),disabled:!L.canDelete,onClick:()=>U(L.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}),e.jsx(B.Item,{icon:e.jsx(St,{}),disabled:!L.canEdit,onClick:()=>f(L),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(B.Item,{icon:e.jsx(Ae,{}),onClick:()=>p("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:Y=>Y.preventDefault(),children:e.jsx(ke,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(ee.Item.Meta,{style:{borderBottom:"1px solid #f0f0f0"},avatar:e.jsx(Jn,{}),title:e.jsx("a",{target:"_blank",rel:"noreferrer",children:L.title}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:tr(L.content.replace(/<[^>]+>/g,""),225)}),e.jsx("p",{children:e.jsx(at,{date:new Date(L.created),locale:"en-US"})})]})})},"class-resource-link-"+L.id)},"class-resource-link-item-container-"+L.id)}),y&&e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:10},children:e.jsx(G,{type:"primary",onClick:()=>{X(h+1)},children:"Load More"})})]})}),e.jsx(ae,{title:"Adding Announcement",open:N,onClose:L=>T(L),width:"50vw",children:e.jsx(La,{form:H,onFinish:M})}),e.jsx(ae,{title:"Editting Announcement",open:q,onClose:L=>z(L),width:"50vw",children:e.jsx(qa,{announcement:t,form:P,onFinish:$})}),e.jsx(ae,{title:e.jsx("h3",{children:t==null?void 0:t.title}),open:v,onClose:L=>l(L),width:"75vw",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(t==null?void 0:t.content)??""},style:{marginTop:10}})})]})},Ua=r=>{const[t,n]=o.useState(!0),[a,i]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(k,{layout:"vertical",form:r.form,onFinish:s=>{s.online=t,s.description=a,r.onFinish(s)},requiredMark:!1,children:[e.jsx(k.Item,{name:"title",label:"Title",rules:[{required:!0,type:"string",message:"Please input Title"}],children:e.jsx(re,{size:"large",placeholder:"Enter Title ..."})}),e.jsx(k.Item,{name:"online",children:e.jsx(Ft,{checked:t,onChange:()=>n(!t),children:"Online Submit Assignment Work"})}),e.jsx(k.Item,{name:"deadline",label:"Deadline",rules:[{required:!0,type:"date",message:"Please select Deadline"}],children:e.jsx(Qe,{size:"large",showTime:{format:"HH:mm"},disabledDate:s=>{const c=ce().format("YYYY-MM-DD");return s&&s<ce(c,"YYYY-MM-DD")},style:{width:"100%"},popupStyle:{zIndex:9999}})}),e.jsx("h3",{children:"Description"}),e.jsx(Fe.CKEditor,{editor:Re,data:a,onReady:s=>{s.editing.view.change(c=>{c.setStyle("min-height","150px",s.editing.view.document.getRoot())})},onChange:(s,c)=>{const h=c.getData();i(h)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{height:45}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},za=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(),[s,c]=o.useState(!0),[h,u]=o.useState(1);o.useState(25);const[S]=k.useForm(),[D,E]=o.useState(0),[A,R]=o.useState(0),[y,C]=o.useState(!0);he();const[N,T]=o.useState(!1),[q,z]=o.useState(!1),[H,P]=o.useState(!1),[v,l]=o.useState(!1),[g,f]=o.useState(!1),[d]=k.useForm(),[M]=k.useForm(),$=x=>{i(x),f(!0)},X=x=>{n(t.map(_=>_.id===x.id?x:_))},I=x=>{i(x),l(!0)},U=x=>{i(x),z(!0)},L=x=>{i(x),P(!0)},Y=()=>{T(!0)},j=async x=>{const{data:_}=await W.custom({url:"",method:"post",meta:{operation:"createDarasaAssignment",variables:{id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},title:{value:x.title,type:"String",required:!0},description:{value:x.description,type:"String",required:!0},deadline:{value:x.deadline,type:"DateTime",required:!0},online:{value:x.online,type:"Boolean",required:!0}},fields:["success","message",{assignment:["id","title","description","deadline","onlineSubmission","submitted","canSubmit",{user:["id"]},{darasa:["id"]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}}).catch(V=>(p.error("Failed to create assignment"),{data:null})).then(V=>V);_&&(_.success?(p(_.message),n([_.assignment,...t]),d.resetFields(),T(!1)):p.error(_.message))},b=async x=>{const{data:_}=await W.custom({url:"",method:"post",meta:{operation:"updateDarasaAssignment",variables:{id:{value:a===void 0?0:a.id,type:"Int",required:!0},title:{value:x.title,type:"String",required:!0},description:{value:x.description,type:"String",required:!0},deadline:{value:x.deadline,type:"DateTime",required:!0},online:{value:x.online,type:"Boolean",required:!0}},fields:["success","message",{assignment:["id","title","description","deadline","onlineSubmission","submitted","canSubmit",{user:["id"]},{darasa:["id"]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}}).catch(V=>(p.error("Failed to update assignment"),{data:null})).then(V=>V);_&&(_.success?(p(_.message),n(t.map(V=>V.id===_.assignment.id?_.assignment:V)),M.resetFields(),P(!1)):p.error(_.message))},O=async(x,_="",V=!1)=>{const{data:ne}=await W.custom({url:"",method:"get",meta:{operation:"darasaAssignments",variables:{page:{value:x,type:"Int",required:!0},key:{value:_,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","description","totalAttachments","deadline","onlineSubmission","submitted","canSubmit","created","updated","isActive","canDelete","canEdit","canManage","canUploadAttachment","attachmentZippedFolderPath",{user:["id","firstName","middleName","lastName","fullName","pic"]},{darasa:["id"]}]}]}}).catch(F=>(p.error("Failed to fetch assignments"),{data:null})).then(F=>F);ne&&(R(ne.total),E(ne.pages),u(ne.page),C(ne.hasNext),(_.length>0||_.length===0&&V)&&n(ne.results),ne.results.length>0&&!V&&n(t.concat(ne.results))),c(!1)},w=async x=>{const{data:_}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaAssignment",variables:{id:{value:x,type:"Int",required:!0}},fields:["success","message"]}}).catch(V=>(p.error("Failed to delete assignment"),{data:null})).then(V=>V);_&&(_.success?(p.success(_.message),n(t.filter(V=>V.id!==x))):p.error(_.message))},m=x=>{pe.confirm({title:"Deleting Assignment",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>w(x)})};return o.useEffect(()=>{O(h)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Q,{children:[e.jsx(K,{span:20,children:e.jsx(k,{layout:"vertical",form:S,onFinish:x=>O(0,x.key,!0),children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Assignments...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{icon:e.jsx(nt,{}),onClick:Y,disabled:!r.canManage,size:"large",children:"Add Assignment"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(ue,{spinning:s,children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,renderItem:x=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(ee.Item,{style:{margin:0,padding:0},actions:[e.jsx(ve,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx($t,{}),children:e.jsx("a",{target:"_blank",onClick:()=>p("on construction"),children:"View"})}),e.jsx(B.Item,{icon:e.jsx($t,{}),children:e.jsx("a",{target:"_blank",onClick:()=>I(x),children:"Submissions"})}),e.jsx(B.Item,{icon:e.jsx($t,{}),children:e.jsx("a",{target:"_blank",onClick:()=>U(x),children:"Attachements"})}),e.jsx(B.Item,{icon:e.jsx(St,{}),disabled:!x.canDelete,onClick:()=>L(x),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Edit"})}),e.jsx(B.Item,{icon:e.jsx(Ue,{}),disabled:!x.canEdit,onClick:()=>m(x.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}),e.jsx(B.Item,{icon:e.jsx(Ae,{}),onClick:()=>p("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:_=>_.preventDefault(),children:e.jsx(ke,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(ee.Item.Meta,{style:{borderBottom:"1px solid #e8e8e8",paddingBottom:10},avatar:e.jsx(Br,{}),title:e.jsxs("a",{target:"_blank",rel:"noreferrer",children:[x.title,x.onlineSubmission&&e.jsx("span",{style:{marginLeft:20},children:e.jsx(se,{color:"red",children:"Online Submission"})})]}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:x.description}}),e.jsxs("p",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{children:[e.jsxs(se,{color:"cyan",children:[e.jsx("span",{style:{marginRight:5},children:"Created:"}),e.jsx(at,{date:new Date(x.created),locale:"en-US"})]}),e.jsxs(se,{color:"green",children:[e.jsx("span",{style:{marginRight:5},children:"Deadline:"}),e.jsx(at,{date:new Date(x.deadline),locale:"en-US"})]}),e.jsx(_e,{title:"Click to View Attachments",children:e.jsx("a",{onClick:()=>U(x),children:e.jsxs(se,{color:"orange",children:[e.jsx("span",{style:{marginRight:5},children:"Attachments:"}),x.totalAttachments]})})})]}),e.jsxs("span",{children:[x.canSubmit&&!x.canManage&&e.jsx(_e,{title:x.submitted?"Click to Re-submitt Your Assignment Work":"Click to Submitt Your Assignment Work",color:x.submitted?"green":"red",children:e.jsx("a",{onClick:()=>$(x),children:e.jsx(se,{color:x.submitted?"green":"red",icon:e.jsx($r,{}),children:e.jsxs("span",{style:{marginRight:5},children:[x.submitted?"Re-submitt":"Submitt"," ","Assignment Work:"]})})})}),x.canManage&&e.jsx(_e,{title:"Click to View Students Submissions",color:"green",children:e.jsx("a",{onClick:()=>I(x),children:e.jsx(se,{color:"green",children:e.jsx("span",{style:{marginRight:5},children:"Submissions"})})})})]})]})]})})},"class-assignment-link-"+x.id)},"class-resource-link-item-container-"+x.id)}),y&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{type:"primary",onClick:()=>{O(h+1)},children:"Load More"})})]})}),e.jsx(ae,{title:"Creating Assignment",open:N,onClose:x=>T(x),width:"50vw",children:e.jsx(Ua,{form:d,onFinish:j})}),e.jsx(ae,{title:"Edit Assignment",open:H,onClose:x=>P(x),width:"50vw",children:e.jsx(Qn,{assignment:a,form:M,onFinish:b})}),e.jsx(ae,{title:"Assignment Attachements",open:q,onClose:x=>z(x),width:"50vw",children:e.jsx(Zn,{assignment:a,canManage:r.canManage})}),e.jsx(ae,{title:"Assignment Submissions",open:v,onClose:x=>l(x),width:"50vw",children:e.jsx(ea,{assignment:a,canManage:r.canManage})}),e.jsx(ae,{title:"Assignment Work Submission",open:g,onClose:x=>f(x),width:"50vw",children:e.jsx(ta,{assignment:a,canManage:r.canManage,submitted:a==null?void 0:a.submitted,onFinish:X})})]})},Ha=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1),[h,u]=o.useState(0),[S,D]=o.useState(!0),[E]=k.useForm();he();const A=async(y,C="",N=!1)=>{const{data:T}=await W.custom({url:"",method:"get",meta:{operation:"darasaDrivesToConnect",variables:{page:{value:y,type:"Int",required:!0},key:{value:C,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","created","canEdit","canDelete","updated","isActive","isAuthor"]}]}}).catch(q=>(p.error("Error loading drives"),{data:null})).then(q=>q);T&&(u(T.total),c(T.page),D(T.hasNext),n(T.results)),i(!1)},R=async y=>{const{data:C}=await W.custom({url:"",method:"post",meta:{operation:"addDarasaDrive",variables:{drive:{value:y,type:"Int",required:!0},darasa:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["success","message",{darasaDrive:["id",{darasa:["id"]},{drive:["id","name","code","created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(N=>(p.error("Error adding drive"),{data:null})).then(N=>N);C&&(C.success?(p.success(C.message),n(t.filter(N=>parseInt(N.id.toString())!==y)),r.handleAddingDrive(C.darasaDrive)):p.error(C.message))};return o.useEffect(()=>{A(s)},[r.random]),a?e.jsx(e.Fragment,{children:e.jsx(Ie,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsx(K,{span:24,children:e.jsx(k,{layout:"vertical",form:E,onFinish:y=>{c(0),A(0,y.key,!0)},children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Drive(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs("div",{id:"scrollableDrivesToAdd",style:{height:"65vh",overflow:"auto"},children:[e.jsx(ee,{bordered:!0,dataSource:t,renderItem:y=>e.jsxs(ee.Item,{actions:[e.jsx(lt,{title:"Are you sure to Add this Drive -"+y.name+" ?",onConfirm:()=>R(parseInt(y.id.toString())),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(G,{icon:e.jsx(Rt,{}),children:"Add"})})],children:[y.name,e.jsx(Lt,{}),e.jsx(ot.Text,{mark:!0,children:y.code})]})}),S&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{type:"primary",onClick:()=>{A(s+1)},children:"Load More"})})]})]})},Ya=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1),[h,u]=o.useState(0),[S,D]=o.useState(0),[E,A]=o.useState(!0),[R]=k.useForm(),{push:y}=he(),[C,N]=o.useState(!1),T=()=>{N(!0)},q=async(v,l="",g=!1)=>{const{data:f}=await W.custom({url:"",method:"get",meta:{operation:"darasaDrives",variables:{page:{value:v,type:"Int",required:!0},key:{value:l,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id",{darasa:["id"]},{drive:["id","name","code","created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(()=>(p.error("Error fetching drives"),{data:null})).then(d=>d);f&&(D(f.total),u(f.pages),c(f.page),A(f.hasNext),n(f.results)),i(!1)},z=async v=>{n([v,...t])},H=async v=>{const{data:l}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaDrive",variables:{id:{value:v,type:"Int",required:!0}},fields:["success","message"]}}).catch(g=>(p.error("Error removing drive"),{data:null})).then(g=>g);l&&(l.success?(p.success(l.message),n(t.filter(g=>g.id!==v))):p.error(l.message))},P=v=>{pe.confirm({title:"Removing Drive",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Remove",cancelText:"Cancel",onOk:()=>H(v)})};return o.useEffect(()=>{q(s)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Q,{children:[e.jsx(K,{span:20,children:e.jsx(k,{layout:"vertical",form:R,onFinish:v=>{c(0),q(0,v.key,!0)},children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Drive(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{icon:e.jsx(qt,{}),onClick:T,disabled:!r.canManage,children:"Add Drive"})})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[t.length>0?e.jsx(At,{container:!0,children:t.map(v=>e.jsx(At,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(De,{hoverable:v.drive.isActive,style:{marginRight:10},children:[e.jsx(Te,{style:{right:0,position:"absolute"},children:e.jsx(ve,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(qe,{}),disabled:!v.drive.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>{v.drive.isActive?y("/odrive/drive/"+v.drive.id+"/"+v.drive.code+"/files"):p("Drive is Blocked")},children:"View"})}),e.jsx(B.Item,{icon:e.jsx(Ae,{}),onClick:()=>p("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(B.Item,{icon:e.jsx(it,{}),onClick:()=>P(v.id),disabled:!r.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:l=>l.preventDefault(),children:e.jsx(ke,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx(lr.Ribbon,{text:v.drive.code,placement:"start",color:"orange",children:e.jsx("a",{onClick:()=>{v.drive.isActive?y("/odrive/drive/"+v.drive.id+"/"+v.drive.code+"/files"):p("Drive is Blocked")},children:e.jsxs(Te,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(je,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(qe,{}),src:v.drive.icon}),e.jsx(_e,{title:v.drive.name,children:e.jsx("span",{style:{fontSize:20},children:v.drive.name.length>15?v.drive.name.substring(0,15)+"...":v.drive.name})})]})})})]})},v.id))}):e.jsxs(Je,{severity:"info",children:["No drives found. Click on the ",e.jsx("b",{children:"Add Drive"})," button to add a drive"]}),E&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{type:"primary",onClick:()=>{q(s+1)},children:a?e.jsx(ue,{}):e.jsxs("span",{children:["Load More",e.jsxs("span",{style:{marginLeft:8},children:[s,"/",h]})]})})})]}),e.jsx(ae,{title:"Adding Drives",open:C,onClose:v=>N(v),width:"50vw",children:e.jsx(Ha,{id:r.id,random:Math.random(),handleAddingDrive:z})})]})},Wa=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1);o.useState(25);const[h]=k.useForm(),[u,S]=o.useState(0),[D,E]=o.useState(0),[A,R]=o.useState(!0),{push:y}=he();o.useState(!1);const[C,N]=o.useState(!1),[T,q]=o.useState(),z=l=>{q(l),N(!0)},H=async(l,g="",f=!1)=>{if(A){const{data:d}=await W.custom({url:"",method:"get",meta:{operation:"darasaFiles",variables:{page:{value:parseInt(l.toString()),type:"Int",required:!0},key:{value:g,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","file","icon","size","description","created","updated","isActive","isPublic","canEdit","canDelete","canManage","isAuthor","canRead","isVideo","isAudio","isImage","imageVisible",{tags:["id",{tag:["id","name"]}]},{drive:["id","name","code",{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]}]}}).catch(M=>(p.error("Error loading files"),{data:null})).then(M=>M);d&&(E(d.total),S(d.pages),c(d.page),R(d.hasNext),(g.length>0||g.length===0&&f)&&n(d.results),d.results.length>0&&!f&&n(t.concat(d.results))),i(!1)}},P=l=>{const g=t.map(f=>(f.id===l.id&&(f.imageVisible=!1),f));n(g)},v=l=>{const g=t.map(f=>(f.id===l.id&&(f.imageVisible=!0),f));n(g)};return o.useEffect(()=>{H(s)},[]),e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsx(K,{span:20,children:e.jsx(k,{layout:"vertical",form:h,onFinish:l=>H(0,l.key,!0),children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search file(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(ue,{spinning:a,children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,renderItem:l=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(ee.Item,{style:{margin:0,padding:0},actions:[e.jsx(ve,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(Vt,{}),children:e.jsx("a",{target:"_blank",href:l.file,rel:"noopener noreferrer",download:!0,children:"Download"})}),e.jsx(B.Item,{icon:e.jsx(Wr,{}),onClick:()=>p("under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Share"})}),e.jsx(B.Item,{icon:e.jsx(Ae,{}),onClick:()=>p("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:g=>g.preventDefault(),children:e.jsx(ke,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(ee.Item.Meta,{avatar:e.jsx(je,{src:l.icon}),title:l.isImage?e.jsxs(e.Fragment,{children:[e.jsx(_e,{title:"Click to View Image",color:"red",placement:"top",children:e.jsx("a",{onClick:()=>v(l),children:l.title})}),e.jsx(G,{onClick:()=>z(l),style:{marginLeft:10},danger:!0,children:"Details Dialog"}),e.jsx(xt,{style:{display:"none"},wrapperStyle:{zIndex:9999},src:l.file,preview:{visible:l.imageVisible,src:l.file,onVisibleChange:g=>{P(l)},style:{zIndex:9999}}})]}):e.jsx("a",{onClick:()=>z(l),children:l.title}),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:l.description}),l.tags.length>0&&e.jsx(Q,{style:{marginBottom:3},children:e.jsx(K,{children:l.tags.map(g=>e.jsx(_e,{title:"File Tag",placement:"top",children:e.jsx(se,{color:"orange",children:g.tag.name},"tag-"+g.id)}))})}),l.drive&&e.jsx(e.Fragment,{children:e.jsx(Q,{children:e.jsxs(K,{children:[e.jsxs(se,{color:"green",children:["Drive: ",l.drive.name]}),e.jsx(_e,{title:"Open Drive:"+l.drive.name,children:e.jsx(G,{icon:e.jsx(qe,{}),onClick:()=>{y("/odrive/drive/"+l.drive.id+"/"+l.drive.code+"/files")}})})]})})}),e.jsxs("p",{children:[!l.isAuthor&&e.jsx(e.Fragment,{children:e.jsxs("span",{style:{color:"orange"},children:["Uploaded By:",e.jsx(je,{size:"small",style:{marginLeft:5},src:l.author.pic}),l.author.fullName]})}),l.isAuthor&&e.jsx(e.Fragment,{children:e.jsx("span",{style:{color:"orange"},children:"Uploaded By:You"})}),e.jsxs("span",{style:{color:"orange",marginLeft:3},children:["|",e.jsx("span",{style:{marginLeft:2},children:l.size})]}),e.jsx(e.Fragment,{children:e.jsxs("span",{style:{marginLeft:3},children:["|",e.jsx(at,{date:new Date(l.created),locale:"en-US"})]})})]})]})})},"file-"+l.id)})}),A&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{type:"primary",onClick:()=>H(s+1),disabled:!A,children:"Load More"})})]})}),e.jsx(Ct,{title:"File Informations",anchor:"right",width:"35vw",onClose:l=>N(l),open:C,children:e.jsx(ra,{id:T==null?void 0:T.id})})]})},Ba=r=>e.jsx(e.Fragment,{children:e.jsxs(k,{layout:"vertical",form:r.form,onFinish:t=>{r.onFinish(t)},requiredMark:!1,children:[e.jsx(k.Item,{name:"link",label:"Link",rules:[{required:!0,type:"url"}],children:e.jsx(re,{size:"large",placeholder:"Enter Url Address ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})}),$a=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1);o.useState(25);const[h]=k.useForm(),[u,S]=o.useState(0),[D,E]=o.useState(0),[A,R]=o.useState(!0);he();const[y,C]=o.useState(!1),[N]=k.useForm(),T=()=>{C(!0)},q=async v=>{const{data:l}=await W.custom({url:"",method:"post",meta:{operation:"createDarasaResourceLink",variables:{id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},link:{value:v.link,type:"String",required:!0}},fields:["success","message",{resource:["id","link","created","updated","isActive","canDelete","canEdit","canAdd",{author:["id","firstName","middleName","lastName","fullName","pic"]},{darasa:["id"]}]}]}}).catch(g=>(p.error("Error creating resource link"),{data:null})).then(g=>g);l&&(l.success?(p(l.message),n([l.resource,...t]),N.resetFields(),C(!1)):p.error(l.message))},z=async(v,l="",g=!1)=>{const{data:f}=await W.custom({url:"",method:"get",meta:{operation:"darasaResources",variables:{page:{value:v,type:"Int",required:!0},key:{value:l,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","link","created","updated","isActive","canDelete","canEdit","canAdd",{author:["id","firstName","middleName","lastName","fullName","pic"]},{darasa:["id"]}]}]}}).catch(d=>(p.error("Error fetching resources links"),{data:null})).then(d=>d);f&&(E(f.total),S(f.pages),c(f.page),R(f.hasNext),(l.length>0||l.length===0&&g)&&n(f.results),f.results.length>0&&!g&&n(t.concat(f.results))),i(!1)},H=async v=>{const{data:l}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaResourceLink",variables:{id:{value:parseInt(v.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(g=>(p.error("Error deleting resource link"),{data:null})).then(g=>g);l&&(l.success?(p.success(l.message),n(t.filter(g=>g.id!==v))):p.error(l.message))},P=v=>{pe.confirm({title:"Deleting Resource Link",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>H(v)})};return o.useEffect(()=>{z(s)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Q,{children:[e.jsx(K,{span:20,children:e.jsx(k,{layout:"vertical",form:h,onFinish:v=>z(0,v.key,!0),children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Resources Links...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{icon:e.jsx(nt,{}),onClick:T,disabled:!r.canManage,size:"large",children:"Add Resource"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(ue,{spinning:a,children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,renderItem:v=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(ee.Item,{style:{margin:0,padding:0},actions:[e.jsx(ve,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(Vt,{}),children:e.jsx("a",{target:"_blank",href:v.link,rel:"noopener noreferrer",children:"Open"})}),e.jsx(B.Item,{icon:e.jsx(Ue,{}),disabled:!v.canDelete,onClick:()=>P(v.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}),e.jsx(B.Item,{icon:e.jsx(Ae,{}),onClick:()=>p("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:l=>l.preventDefault(),children:e.jsx(ke,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(ee.Item.Meta,{style:{borderBottom:"1px solid #e8e8e8"},avatar:e.jsx(nt,{}),title:e.jsx("a",{href:v.link,target:"_blank",rel:"noreferrer",children:v.link}),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{}),e.jsx("p",{children:e.jsx(at,{date:new Date(v.created),locale:"en-US"})})]})})},"class-resource-link-"+v.id)},"class-resource-link-item-container-"+v.id)}),A&&e.jsx("div",{style:{textAlign:"center",marginTop:12},children:e.jsx("button",{onClick:()=>{z(s+1)},children:"Load More"})})]})}),e.jsx(ae,{title:"Adding Resource Link",open:y,onClose:v=>C(v),width:"50vw",children:e.jsx(Ba,{form:N,onFinish:q})})]})},Ga=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1),[h,u]=o.useState(0),[S,D]=o.useState(!0),[E]=k.useForm();he();const A=async(y,C="",N=!1)=>{const{data:T}=await W.custom({url:"",method:"get",meta:{operation:"darasaStudentsToAdd",variables:{page:{value:y,type:"Int",required:!0},key:{value:C,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","firstName","middleName","lastName","fullName","email","pic","isActive"]}]}}).catch(q=>(p.error("Error fetching students"),{data:null})).then(q=>q);T&&(u(T.total),c(T.page),D(T.hasNext),n(T.results)),i(!1)},R=async y=>{const{data:C}=await W.custom({url:"",method:"post",meta:{operation:"createDarasaStudent",variables:{darasa:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},student:{value:parseInt(y===void 0?"0":y.toString()),type:"Int",required:!0}},fields:["success","message",{student:["id","canDelete","canEdit","canManage","blocked",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(N=>(p.error("Error adding student"),{data:null})).then(N=>N);C&&(C.success?(p.success(C.message),n(t.filter(N=>N.id!==y)),r.handleAddingStudent(C.student)):p.error(C.message))};return o.useEffect(()=>{A(s)},[r.random]),a?e.jsx(e.Fragment,{children:e.jsx(Ie,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsx(K,{span:24,children:e.jsx(k,{layout:"vertical",form:E,onFinish:y=>{c(0),A(0,y.key,!0)},children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search User(s)/Student(s) to Add ...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs("div",{id:"scrollableDrivesToAdd",style:{height:"65vh",overflow:"auto"},children:[e.jsx(ee,{dataSource:t,renderItem:y=>e.jsxs(ee.Item,{actions:[e.jsx(lt,{title:"Are you sure to Add  -"+y.fullName+" ?",onConfirm:()=>R(y.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(G,{icon:e.jsx(Rt,{}),children:"Add"})})],children:[e.jsx(je,{src:y.pic,style:{marginRight:10}}),y.fullName,e.jsx(Lt,{}),e.jsx(ot.Text,{mark:!0,children:y.email})]})}),S&&e.jsx(G,{onClick:()=>{A(s+1)},type:"primary",style:{margin:"auto",display:"block"},children:"Load More"})]})]})},Ka=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1),[h,u]=o.useState(0),[S,D]=o.useState(!0),[E]=k.useForm();he();const A=async(y,C="",N=!1)=>{const{data:T}=await W.custom({url:"",method:"get",meta:{operation:"blockedDarasaStudents",variables:{page:{value:y,type:"Int",required:!0},key:{value:C,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","canDelete","canEdit","canManage","blocked",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(q=>(p.error("Error fetching students"),{data:null})).then(q=>q);T&&(u(T.total),c(T.page),D(T.hasNext),n(T.results)),i(!1)},R=async(y,C)=>{const{data:N}=await W.custom({url:"",method:"post",meta:{operation:"blockUnblockDarasaStudent",variables:{id:{value:parseInt(y.toString()),type:"Int",required:!0},blocked:{value:C,type:"Boolean",required:!0}},fields:["success","message",{darasaStudent:["id","canDelete","canEdit","canManage","blocked",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(()=>(p.error("Error Unblocking student"),{data:null})).then(T=>T);N&&(N.success?(p.success(N.message),n(t.filter(T=>T.id!==y)),r.handleUnblockingStudent(N.darasaStudent)):p.error(N.message))};return o.useEffect(()=>{A(s)},[r.random]),a?e.jsx(e.Fragment,{children:e.jsx(Ie,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsx(K,{span:24,children:e.jsx(k,{layout:"vertical",form:E,onFinish:y=>{c(0),A(0,y.key,!0)},children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Blocked Students ...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs("div",{id:"scrollableDrivesToAdd",style:{height:"65vh",overflow:"auto"},children:[e.jsx(ee,{dataSource:t,renderItem:y=>{var C,N,T;return e.jsxs(ee.Item,{actions:[e.jsx(lt,{title:"Are you sure to Unblock  -"+y.user.fullName+" ?",onConfirm:()=>R(y.id,!1),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(G,{icon:e.jsx(Gr,{}),children:"Unblock"})})],children:[e.jsx(je,{src:(C=y==null?void 0:y.user)==null?void 0:C.pic,style:{marginRight:10}}),(N=y==null?void 0:y.user)==null?void 0:N.fullName,e.jsx(Lt,{}),e.jsx(ot.Text,{mark:!0,children:(T=y==null?void 0:y.user)==null?void 0:T.email})]})}}),S&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{onClick:()=>A(s+1),disabled:!S,children:"Load More"})})]})]})},Xa=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1),[h,u]=o.useState(0),[S,D]=o.useState(0),[E,A]=o.useState(!0),[R]=k.useForm();he();const[y,C]=o.useState(!1),[N,T]=o.useState(!1),q=()=>{C(!0)},z=async(d,M="",$=!1)=>{const{data:X}=await W.custom({url:"",method:"get",meta:{operation:"darasaStudents",variables:{page:{value:d,type:"Int",required:!0},key:{value:M,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","canDelete","canEdit","canManage","blocked",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(()=>(p.error("Error fetching students"),{data:null})).then(I=>I);X&&(D(X.total),u(X.pages),c(X.page),A(X.hasNext),n(X.results)),i(!1)},H=async d=>{n([d,...t])},P=async d=>{const{data:M}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaStudent",variables:{id:{value:parseInt(d.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(p.error("Error removing student"),{data:null})).then($=>$);M&&(M.success?(p.success(M.message),n(t.filter($=>$.id!==d))):p.error(M.message))},v=async(d,M)=>{const{data:$}=await W.custom({url:"",method:"post",meta:{operation:"blockUnblockDarasaStudent",variables:{id:{value:parseInt(d.toString()),type:"Int",required:!0},blocked:{value:M,type:"Boolean",required:!0}},fields:["success","message",{darasaStudent:["id","canDelete","canEdit","canManage","blocked",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(()=>(p.error("Error blocking/unblocking student"),{data:null})).then(X=>X);if($)if($.success){p.success($.message);const X=t.map(I=>I.id===d?$.darasaStudent:I);n(X)}else p.error($.message)},l=d=>{const M=t.map($=>$.id===d.id?d:$);n(M)},g=d=>{pe.confirm({title:"Removing Student",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Remove",cancelText:"Cancel",onOk:()=>P(d)})},f=(d,M)=>{pe.confirm({title:M?"Blocking Student":"Unblocking Student",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:M?"Block":"Unblock",cancelText:"Cancel",onOk:()=>v(d,M)})};return o.useEffect(()=>{z(s)},[]),a?e.jsx(e.Fragment,{children:e.jsx(Ie,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(Q,{children:[e.jsx(K,{span:12,children:e.jsx(k,{layout:"vertical",form:R,onFinish:d=>{c(0),z(0,d.key,!0)},children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Student(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsxs(K,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(G,{size:"large",icon:e.jsx(qt,{}),onClick:q,disabled:!r.canManage,children:"Add Student"}),e.jsx(G,{size:"large",icon:e.jsx(it,{}),onClick:()=>T(!0),disabled:!r.canManage,children:"Blocked Students"})]})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[t.length>0?e.jsx(Q,{align:"top",children:t.map(d=>e.jsx(K,{span:6,children:e.jsxs(De,{hoverable:d.isActive,style:{marginRight:10,borderColor:d.blocked?"red":"#f0f0f0"},children:[e.jsx(Te,{style:{right:0,position:"absolute"},children:e.jsx(ve,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(qe,{}),disabled:!d.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"View"})}),e.jsx(B.Item,{icon:e.jsx(Ae,{}),onClick:()=>p("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(B.Item,{icon:e.jsx(it,{}),onClick:()=>g(d.id),disabled:!d.canDelete,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})}),d.blocked?e.jsx(B.Item,{icon:e.jsx(Gr,{}),onClick:()=>f(d.id,!1),disabled:!d.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Unblock"})}):e.jsx(B.Item,{icon:e.jsx(na,{}),onClick:()=>f(d.id,!0),disabled:!d.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Block"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:M=>M.preventDefault(),children:e.jsx(ke,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})}),e.jsx("a",{children:e.jsxs(Te,{direction:"vertical",align:"center",style:{width:"100%",justifyContent:"center"},children:[e.jsx(je,{size:{xs:24,sm:32,md:40,lg:40,xl:40,xxl:80},icon:e.jsx(qe,{}),src:d.user.pic}),e.jsx("span",{style:{fontSize:20},children:d.user.fullName})]})})]})}))}):e.jsx(Je,{severity:"info",children:"No Student found for this class. Please add some students"}),E&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{onClick:()=>{z(s+1)},disabled:!E,children:a?e.jsx(ue,{}):e.jsx(e.Fragment,{children:e.jsx("span",{children:"Load More"})})})})]}),e.jsx(ae,{title:"Adding Students",open:y,onClose:d=>C(d),width:"50vw",children:e.jsx(Ga,{id:r.id,random:Math.random(),handleAddingStudent:H})}),e.jsx(ae,{title:"Blocked Students",open:N,onClose:d=>T(d),width:"50vw",children:e.jsx(Ka,{id:r.id,random:Math.random(),handleUnblockingStudent:l})})]})},Ja=r=>{const[t,n]=o.useState(!1),a=async i=>{var c;n(!0);const{data:s}=await W.custom({url:"",method:"post",meta:{operation:"createClassYoutubeVideo",variables:{classId:{value:parseInt((c=r.id)==null?void 0:c.toString()),type:"Int",required:!0},url:{value:i.url,type:"String",required:!0}},fields:["success","message",{video:["id","title","description","url","video","isYoutube","created","updated","isActive","canDelete","canEdit",{darasa:["id"]},{author:["id","fullName","firstName","middleName","lastName"]}]}]}}).catch(h=>(p.error("Error Adding a Video"),{data:null})).then(h=>h);s&&(s.success?(p.success(s.message),r.handleAddingDrive(s.video)):p.error(s.message)),n(!1)};return e.jsx(e.Fragment,{children:e.jsx(ue,{spinning:t,children:e.jsxs(k,{layout:"vertical",onFinish:i=>{a(i)},requiredMark:!1,children:[e.jsx(k.Item,{name:"url",label:"Youtube Video URL",rules:[{required:!0,type:"url",message:"Please input Youtube URL ..."}],children:e.jsx(re,{size:"large",placeholder:"Enter Youtube URL ..."})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",loading:t,children:"Save"})})]})})})},vr=[".mp4"],Qa=r=>Array.isArray(r)?r:r==null?void 0:r.fileList,Za=r=>{const[t,n]=o.useState(!1),[a]=k.useForm(),[i,s]=o.useState(""),c=Ut(),h=async u=>{n(!0);const{data:S}=await W.custom({url:"",method:"post",meta:{operation:"uploadClassVideo",variables:{classId:{value:parseInt(c.id),type:"Int",required:!0},video:{value:u.video,type:"Upload",required:!0},title:{value:u.title,type:"String",required:!0},description:{value:u.description,type:"String",required:!1}},fields:["success","message",{video:["id","title","description","url","video","isYoutube","created","updated","isActive","canDelete","canEdit",{darasa:["id"]},{author:["id","fullName","firstName","middleName","lastName"]}]}]}}).catch(D=>(p.error("Error uploading a Video File"),{data:null})).then(D=>D);S&&(S.success?(s(""),p.success(S.message),r.handleAddingVideo(S.video)):p.error(S.message)),n(!1)};return e.jsx(e.Fragment,{children:e.jsxs(k,{layout:"vertical",onFinish:u=>{u.description=i,h(u)},requiredMark:!1,form:a,children:[e.jsx(k.Item,{label:"Pick a Video Files ("+vr.join()+")",children:e.jsx(k.Item,{name:"video",valuePropName:"fileList",getValueFromEvent:Qa,noStyle:!0,rules:[{required:!0,type:"array",message:"Please upload students excel file"}],children:e.jsxs(dr.Dragger,{name:"file",accept:vr.join(),multiple:!1,beforeUpload:()=>!1,onChange:u=>{a.setFieldsValue({title:u.file.name})},onRemove:u=>{a.setFieldsValue({title:""})},children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(aa,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})}),e.jsx(k.Item,{name:"title",label:"Video Title",rules:[{required:!0,type:"string",message:"Please input title"}],children:e.jsx(re,{size:"large",placeholder:"Enter Title ..."})}),e.jsx("h3",{children:"Description"}),e.jsx(Fe.CKEditor,{editor:Re,data:i,onReady:u=>{u.editing.view.change(S=>{S.setStyle("min-height","100px",u.editing.view.document.getRoot())})},onChange:(u,S)=>{const D=S.getData();s(D)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})};class ei extends o.Component{constructor(n){super(n);pr(this,"player");this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.load=this.load.bind(this),this.changeCurrentTime=this.changeCurrentTime.bind(this),this.seek=this.seek.bind(this),this.changePlaybackRateRate=this.changePlaybackRateRate.bind(this),this.changeVolume=this.changeVolume.bind(this),this.setMuted=this.setMuted.bind(this)}componentDidMount(){this.player.subscribeToStateChange(this.handleStateChange.bind(this)),this.props.updatePlayer(this.player,this.props.index)}setMuted(n){return()=>{this.player.muted=n}}handleStateChange(n){this.setState({player:n})}play(){p("playing"),this.player.play()}pause(){this.player.pause()}load(){this.player.load()}changeCurrentTime(n){return()=>{const{player:a}=this.player.getState();this.player.seek(a.currentTime+n)}}seek(n){return()=>{this.player.seek(n)}}changePlaybackRateRate(n){return()=>{const{player:a}=this.player.getState();this.player.playbackRate=a.playbackRate+n}}changeVolume(n){return()=>{const{player:a}=this.player.getState();this.player.volume=a.volume+n}}render(){return e.jsx("div",{children:e.jsx(ia.Player,{ref:n=>{this.player=n},aspectRatio:"1110:680",preload:"auto",autoPlay:!1,children:e.jsx("source",{src:this.props.file})})})}}var Yt={},ti=function(t){return ri(t)&&!ni(t)};function ri(r){return!!r&&typeof r=="object"}function ni(r){var t=Object.prototype.toString.call(r);return t==="[object RegExp]"||t==="[object Date]"||si(r)}var ai=typeof Symbol=="function"&&Symbol.for,ii=ai?Symbol.for("react.element"):60103;function si(r){return r.$$typeof===ii}function oi(r){return Array.isArray(r)?[]:{}}function vt(r,t){return t.clone!==!1&&t.isMergeableObject(r)?st(oi(r),r,t):r}function li(r,t,n){return r.concat(t).map(function(a){return vt(a,n)})}function ci(r,t){if(!t.customMerge)return st;var n=t.customMerge(r);return typeof n=="function"?n:st}function di(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(t){return Object.propertyIsEnumerable.call(r,t)}):[]}function jr(r){return Object.keys(r).concat(di(r))}function on(r,t){try{return t in r}catch{return!1}}function ui(r,t){return on(r,t)&&!(Object.hasOwnProperty.call(r,t)&&Object.propertyIsEnumerable.call(r,t))}function mi(r,t,n){var a={};return n.isMergeableObject(r)&&jr(r).forEach(function(i){a[i]=vt(r[i],n)}),jr(t).forEach(function(i){ui(r,i)||(on(r,i)&&n.isMergeableObject(t[i])?a[i]=ci(i,n)(r[i],t[i],n):a[i]=vt(t[i],n))}),a}function st(r,t,n){n=n||{},n.arrayMerge=n.arrayMerge||li,n.isMergeableObject=n.isMergeableObject||ti,n.cloneUnlessOtherwiseSpecified=vt;var a=Array.isArray(t),i=Array.isArray(r),s=a===i;return s?a?n.arrayMerge(r,t,n):mi(r,t,n):vt(t,n)}st.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(a,i){return st(a,i,n)},{})};var hi=st,ln=hi,br=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function fi(r,t){return!!(r===t||br(r)&&br(t))}function pi(r,t){if(r.length!==t.length)return!1;for(var n=0;n<r.length;n++)if(!fi(r[n],t[n]))return!1;return!0}function gi(r,t){t===void 0&&(t=pi);var n,a=[],i,s=!1;function c(){for(var h=[],u=0;u<arguments.length;u++)h[u]=arguments[u];return s&&n===this&&t(h,a)||(i=r.apply(this,h),s=!0,n=this,a=h),i}return c}const yi=Object.freeze(Object.defineProperty({__proto__:null,default:gi},Symbol.toStringTag,{value:"Module"})),xi=sa(yi);var vi=typeof Element<"u",ji=typeof Map=="function",bi=typeof Set=="function",Si=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function It(r,t){if(r===t)return!0;if(r&&t&&typeof r=="object"&&typeof t=="object"){if(r.constructor!==t.constructor)return!1;var n,a,i;if(Array.isArray(r)){if(n=r.length,n!=t.length)return!1;for(a=n;a--!==0;)if(!It(r[a],t[a]))return!1;return!0}var s;if(ji&&r instanceof Map&&t instanceof Map){if(r.size!==t.size)return!1;for(s=r.entries();!(a=s.next()).done;)if(!t.has(a.value[0]))return!1;for(s=r.entries();!(a=s.next()).done;)if(!It(a.value[1],t.get(a.value[0])))return!1;return!0}if(bi&&r instanceof Set&&t instanceof Set){if(r.size!==t.size)return!1;for(s=r.entries();!(a=s.next()).done;)if(!t.has(a.value[0]))return!1;return!0}if(Si&&ArrayBuffer.isView(r)&&ArrayBuffer.isView(t)){if(n=r.length,n!=t.length)return!1;for(a=n;a--!==0;)if(r[a]!==t[a])return!1;return!0}if(r.constructor===RegExp)return r.source===t.source&&r.flags===t.flags;if(r.valueOf!==Object.prototype.valueOf&&typeof r.valueOf=="function"&&typeof t.valueOf=="function")return r.valueOf()===t.valueOf();if(r.toString!==Object.prototype.toString&&typeof r.toString=="function"&&typeof t.toString=="function")return r.toString()===t.toString();if(i=Object.keys(r),n=i.length,n!==Object.keys(t).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[a]))return!1;if(vi&&r instanceof Element)return!1;for(a=n;a--!==0;)if(!((i[a]==="_owner"||i[a]==="__v"||i[a]==="__o")&&r.$$typeof)&&!It(r[i[a]],t[i[a]]))return!1;return!0}return r!==r&&t!==t}var cn=function(t,n){try{return It(t,n)}catch(a){if((a.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw a}},Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.defaultProps=Ke.propTypes=void 0;var ze=Ci(oa);function Ci(r){return r&&r.__esModule?r:{default:r}}var Se=ze.default.string,Ce=ze.default.bool,et=ze.default.number,Kt=ze.default.array,mt=ze.default.oneOfType,Oe=ze.default.shape,we=ze.default.object,de=ze.default.func,Sr=ze.default.node,wi={url:mt([Se,Kt,we]),playing:Ce,loop:Ce,controls:Ce,volume:et,muted:Ce,playbackRate:et,width:mt([Se,et]),height:mt([Se,et]),style:we,progressInterval:et,playsinline:Ce,pip:Ce,stopOnUnmount:Ce,light:mt([Ce,Se,we]),playIcon:Sr,previewTabIndex:et,fallback:Sr,oEmbedUrl:Se,wrapper:mt([Se,de,Oe({render:de.isRequired})]),config:Oe({soundcloud:Oe({options:we}),youtube:Oe({playerVars:we,embedOptions:we,onUnstarted:de}),facebook:Oe({appId:Se,version:Se,playerId:Se,attributes:we}),dailymotion:Oe({params:we}),vimeo:Oe({playerOptions:we,title:Se}),file:Oe({attributes:we,tracks:Kt,forceVideo:Ce,forceAudio:Ce,forceHLS:Ce,forceSafariHLS:Ce,forceDisableHls:Ce,forceDASH:Ce,forceFLV:Ce,hlsOptions:we,hlsVersion:Se,dashVersion:Se,flvVersion:Se}),wistia:Oe({options:we,playerId:Se,customControls:Kt}),mixcloud:Oe({options:we}),twitch:Oe({options:we,playerId:Se}),vidyard:Oe({options:we})}),onReady:de,onStart:de,onPlay:de,onPause:de,onBuffer:de,onBufferEnd:de,onEnded:de,onError:de,onDuration:de,onSeek:de,onPlaybackRateChange:de,onPlaybackQualityChange:de,onProgress:de,onClickPreview:de,onEnablePIP:de,onDisablePIP:de};Ke.propTypes=wi;var ye=function(){},Di={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:ye},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:ye,onStart:ye,onPlay:ye,onPause:ye,onBuffer:ye,onBufferEnd:ye,onEnded:ye,onError:ye,onDuration:ye,onSeek:ye,onPlaybackRateChange:ye,onPlaybackQualityChange:ye,onProgress:ye,onClickPreview:ye,onEnablePIP:ye,onDisablePIP:ye};Ke.defaultProps=Di;var be={},Ti=function(t,n,a){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");typeof n=="function"&&(a=n,n={}),n=n||{},a=a||function(){},s.type=n.type||"text/javascript",s.charset=n.charset||"utf8",s.async="async"in n?!!n.async:!0,s.src=t,n.attrs&&ki(s,n.attrs),n.text&&(s.text=""+n.text);var c="onload"in s?Cr:Pi;c(s,a),s.onload||Cr(s,a),i.appendChild(s)};function ki(r,t){for(var n in t)r.setAttribute(n,t[n])}function Cr(r,t){r.onload=function(){this.onerror=this.onload=null,t(null,r)},r.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),r)}}function Pi(r,t){r.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,t(null,r))}}Object.defineProperty(be,"__esModule",{value:!0});be.parseStartTime=Vi;be.parseEndTime=Ui;be.randomString=zi;be.queryString=Hi;be.getSDK=Yi;be.getConfig=Wi;be.omit=Bi;be.callPlayer=$i;be.isMediaStream=Gi;be.isBlobUrl=Ki;be.supportsWebKitPresentationMode=Xi;var Ii=dn(Ti),Ai=dn(ln);function dn(r){return r&&r.__esModule?r:{default:r}}function Mi(r,t){return _i(r)||Ni(r,t)||Ei(r,t)||Oi()}function Oi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ei(r,t){if(r){if(typeof r=="string")return wr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wr(r,t)}}function wr(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=r[n];return a}function Ni(r,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(r)))){var n=[],a=!0,i=!1,s=void 0;try{for(var c=r[Symbol.iterator](),h;!(a=(h=c.next()).done)&&(n.push(h.value),!(t&&n.length===t));a=!0);}catch(u){i=!0,s=u}finally{try{!a&&c.return!=null&&c.return()}finally{if(i)throw s}}return n}}function _i(r){if(Array.isArray(r))return r}var Fi=/[?&#](?:start|t)=([0-9hms]+)/,Ri=/[?&#]end=([0-9hms]+)/,rr=/(\d+)(h|m|s)/g,Li=/^\d+$/;function un(r,t){if(!(r instanceof Array)){var n=r.match(t);if(n){var a=n[1];if(a.match(rr))return qi(a);if(Li.test(a))return parseInt(a)}}}function qi(r){for(var t=0,n=rr.exec(r);n!==null;){var a=n,i=Mi(a,3),s=i[1],c=i[2];c==="h"&&(t+=parseInt(s,10)*60*60),c==="m"&&(t+=parseInt(s,10)*60),c==="s"&&(t+=parseInt(s,10)),n=rr.exec(r)}return t}function Vi(r){return un(r,Fi)}function Ui(r){return un(r,Ri)}function zi(){return Math.random().toString(36).substr(2,5)}function Hi(r){return Object.keys(r).map(function(t){return"".concat(t,"=").concat(r[t])}).join("&")}function Xt(r){return window[r]?window[r]:window.exports&&window.exports[r]?window.exports[r]:window.module&&window.module.exports&&window.module.exports[r]?window.module.exports[r]:null}var tt={};function Yi(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){return!0},i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:Ii.default,s=Xt(t);return s&&a(s)?Promise.resolve(s):new Promise(function(c,h){if(tt[r]){tt[r].push({resolve:c,reject:h});return}tt[r]=[{resolve:c,reject:h}];var u=function(E){tt[r].forEach(function(A){return A.resolve(E)})};if(n){var S=window[n];window[n]=function(){S&&S(),u(Xt(t))}}i(r,function(D){D?(tt[r].forEach(function(E){return E.reject(D)}),tt[r]=null):n||u(Xt(t))})})}function Wi(r,t){return(0,Ai.default)(t.config,r.config)}function Bi(r){for(var t,n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];for(var s=(t=[]).concat.apply(t,a),c={},h=Object.keys(r),u=0,S=h;u<S.length;u++){var D=S[u];s.indexOf(D)===-1&&(c[D]=r[D])}return c}function $i(r){var t;if(!this.player||!this.player[r]){var n="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(r,"%c – ");return this.player?this.player[r]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return(t=this.player)[r].apply(t,i)}function Gi(r){return typeof window<"u"&&typeof window.MediaStream<"u"&&r instanceof window.MediaStream}function Ki(r){return/^blob:/.test(r)}function Xi(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.createElement("video"),t=/iPhone|iPod/.test(navigator.userAgent)===!1;return r.webkitSupportsPresentationMode&&typeof r.webkitSetPresentationMode=="function"&&t}var mn={};(function(r){function t(l){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(f){return typeof f}:t=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},t(l)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(o),a=c(cn),i=Ke,s=be;function c(l){return l&&l.__esModule?l:{default:l}}function h(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return h=function(){return l},l}function u(l){if(l&&l.__esModule)return l;if(l===null||t(l)!=="object"&&typeof l!="function")return{default:l};var g=h();if(g&&g.has(l))return g.get(l);var f={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in l)if(Object.prototype.hasOwnProperty.call(l,M)){var $=d?Object.getOwnPropertyDescriptor(l,M):null;$&&($.get||$.set)?Object.defineProperty(f,M,$):f[M]=l[M]}return f.default=l,g&&g.set(l,f),f}function S(){return S=Object.assign||function(l){for(var g=1;g<arguments.length;g++){var f=arguments[g];for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(l[d]=f[d])}return l},S.apply(this,arguments)}function D(l,g){if(!(l instanceof g))throw new TypeError("Cannot call a class as a function")}function E(l,g){for(var f=0;f<g.length;f++){var d=g[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}function A(l,g,f){return g&&E(l.prototype,g),f&&E(l,f),l}function R(l,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(g&&g.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),g&&y(l,g)}function y(l,g){return y=Object.setPrototypeOf||function(d,M){return d.__proto__=M,d},y(l,g)}function C(l){var g=q();return function(){var d=z(l),M;if(g){var $=z(this).constructor;M=Reflect.construct(d,arguments,$)}else M=d.apply(this,arguments);return N(this,M)}}function N(l,g){return g&&(t(g)==="object"||typeof g=="function")?g:T(l)}function T(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function q(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function z(l){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},z(l)}function H(l,g,f){return g in l?Object.defineProperty(l,g,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[g]=f,l}var P=5e3,v=function(l){R(f,l);var g=C(f);function f(){var d;D(this,f);for(var M=arguments.length,$=new Array(M),X=0;X<M;X++)$[X]=arguments[X];return d=g.call.apply(g,[this].concat($)),H(T(d),"mounted",!1),H(T(d),"isReady",!1),H(T(d),"isPlaying",!1),H(T(d),"isLoading",!0),H(T(d),"loadOnReady",null),H(T(d),"startOnPlay",!0),H(T(d),"seekOnPlay",null),H(T(d),"onDurationCalled",!1),H(T(d),"handlePlayerMount",function(I){if(d.player){d.progress();return}d.player=I,d.player.load(d.props.url),d.progress()}),H(T(d),"getInternalPlayer",function(I){return d.player?d.player[I]:null}),H(T(d),"progress",function(){if(d.props.url&&d.player&&d.isReady){var I=d.getCurrentTime()||0,U=d.getSecondsLoaded(),L=d.getDuration();if(L){var Y={playedSeconds:I,played:I/L};U!==null&&(Y.loadedSeconds=U,Y.loaded=U/L),(Y.playedSeconds!==d.prevPlayed||Y.loadedSeconds!==d.prevLoaded)&&d.props.onProgress(Y),d.prevPlayed=Y.playedSeconds,d.prevLoaded=Y.loadedSeconds}}d.progressTimeout=setTimeout(d.progress,d.props.progressFrequency||d.props.progressInterval)}),H(T(d),"handleReady",function(){if(d.mounted){d.isReady=!0,d.isLoading=!1;var I=d.props,U=I.onReady,L=I.playing,Y=I.volume,j=I.muted;U(),!j&&Y!==null&&d.player.setVolume(Y),d.loadOnReady?(d.player.load(d.loadOnReady,!0),d.loadOnReady=null):L&&d.player.play(),d.handleDurationCheck()}}),H(T(d),"handlePlay",function(){d.isPlaying=!0,d.isLoading=!1;var I=d.props,U=I.onStart,L=I.onPlay,Y=I.playbackRate;d.startOnPlay&&(d.player.setPlaybackRate&&Y!==1&&d.player.setPlaybackRate(Y),U(),d.startOnPlay=!1),L(),d.seekOnPlay&&(d.seekTo(d.seekOnPlay),d.seekOnPlay=null),d.handleDurationCheck()}),H(T(d),"handlePause",function(I){d.isPlaying=!1,d.isLoading||d.props.onPause(I)}),H(T(d),"handleEnded",function(){var I=d.props,U=I.activePlayer,L=I.loop,Y=I.onEnded;U.loopOnEnded&&L&&d.seekTo(0),L||(d.isPlaying=!1,Y())}),H(T(d),"handleError",function(){var I;d.isLoading=!1,(I=d.props).onError.apply(I,arguments)}),H(T(d),"handleDurationCheck",function(){clearTimeout(d.durationCheckTimeout);var I=d.getDuration();I?d.onDurationCalled||(d.props.onDuration(I),d.onDurationCalled=!0):d.durationCheckTimeout=setTimeout(d.handleDurationCheck,100)}),H(T(d),"handleLoaded",function(){d.isLoading=!1}),d}return A(f,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}},{key:"componentDidUpdate",value:function(M){var $=this;if(this.player){var X=this.props,I=X.url,U=X.playing,L=X.volume,Y=X.muted,j=X.playbackRate,b=X.pip,O=X.loop,w=X.activePlayer,m=X.disableDeferredLoading;if(!(0,a.default)(M.url,I)){if(this.isLoading&&!w.forceLoad&&!m&&!(0,s.isMediaStream)(I)){console.warn("ReactPlayer: the attempt to load ".concat(I," is being deferred until the player has loaded")),this.loadOnReady=I;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(I,this.isReady)}!M.playing&&U&&!this.isPlaying&&this.player.play(),M.playing&&!U&&this.isPlaying&&this.player.pause(),!M.pip&&b&&this.player.enablePIP&&this.player.enablePIP(),M.pip&&!b&&this.player.disablePIP&&this.player.disablePIP(),M.volume!==L&&L!==null&&this.player.setVolume(L),M.muted!==Y&&(Y?this.player.mute():(this.player.unmute(),L!==null&&setTimeout(function(){return $.player.setVolume(L)}))),M.playbackRate!==j&&this.player.setPlaybackRate&&this.player.setPlaybackRate(j),M.loop!==O&&this.player.setLoop&&this.player.setLoop(O)}}},{key:"getDuration",value:function(){return this.isReady?this.player.getDuration():null}},{key:"getCurrentTime",value:function(){return this.isReady?this.player.getCurrentTime():null}},{key:"getSecondsLoaded",value:function(){return this.isReady?this.player.getSecondsLoaded():null}},{key:"seekTo",value:function(M,$,X){var I=this;if(!this.isReady){M!==0&&(this.seekOnPlay=M,setTimeout(function(){I.seekOnPlay=null},P));return}var U=$?$==="fraction":M>0&&M<1;if(U){var L=this.player.getDuration();if(!L){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(L*M,X);return}this.player.seekTo(M,X)}},{key:"render",value:function(){var M=this.props.activePlayer;return M?n.default.createElement(M,S({},this.props,{onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError})):null}}]),f}(n.Component);r.default=v,H(v,"displayName","Player"),H(v,"propTypes",i.propTypes),H(v,"defaultProps",i.defaultProps)})(mn);var Jt={},Dr;function Ji(){return Dr||(Dr=1,function(r){function t(P){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(l){return typeof l}:t=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},t(P)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(o);function a(){if(typeof WeakMap!="function")return null;var P=new WeakMap;return a=function(){return P},P}function i(P){if(P&&P.__esModule)return P;if(P===null||t(P)!=="object"&&typeof P!="function")return{default:P};var v=a();if(v&&v.has(P))return v.get(P);var l={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in P)if(Object.prototype.hasOwnProperty.call(P,f)){var d=g?Object.getOwnPropertyDescriptor(P,f):null;d&&(d.get||d.set)?Object.defineProperty(l,f,d):l[f]=P[f]}return l.default=P,v&&v.set(P,l),l}function s(P,v){var l=Object.keys(P);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(P);v&&(g=g.filter(function(f){return Object.getOwnPropertyDescriptor(P,f).enumerable})),l.push.apply(l,g)}return l}function c(P){for(var v=1;v<arguments.length;v++){var l=arguments[v]!=null?arguments[v]:{};v%2?s(Object(l),!0).forEach(function(g){T(P,g,l[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(l)):s(Object(l)).forEach(function(g){Object.defineProperty(P,g,Object.getOwnPropertyDescriptor(l,g))})}return P}function h(P,v){if(!(P instanceof v))throw new TypeError("Cannot call a class as a function")}function u(P,v){for(var l=0;l<v.length;l++){var g=v[l];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(P,g.key,g)}}function S(P,v,l){return v&&u(P.prototype,v),l&&u(P,l),P}function D(P,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(v&&v.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),v&&E(P,v)}function E(P,v){return E=Object.setPrototypeOf||function(g,f){return g.__proto__=f,g},E(P,v)}function A(P){var v=C();return function(){var g=N(P),f;if(v){var d=N(this).constructor;f=Reflect.construct(g,arguments,d)}else f=g.apply(this,arguments);return R(this,f)}}function R(P,v){return v&&(t(v)==="object"||typeof v=="function")?v:y(P)}function y(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function C(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function N(P){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},N(P)}function T(P,v,l){return v in P?Object.defineProperty(P,v,{value:l,enumerable:!0,configurable:!0,writable:!0}):P[v]=l,P}var q="64px",z={},H=function(P){D(l,P);var v=A(l);function l(){var g;h(this,l);for(var f=arguments.length,d=new Array(f),M=0;M<f;M++)d[M]=arguments[M];return g=v.call.apply(v,[this].concat(d)),T(y(g),"mounted",!1),T(y(g),"state",{image:null}),T(y(g),"handleKeyPress",function($){($.key==="Enter"||$.key===" ")&&g.props.onClick()}),g}return S(l,[{key:"componentDidMount",value:function(){this.mounted=!0,this.fetchImage(this.props)}},{key:"componentDidUpdate",value:function(f){var d=this.props,M=d.url,$=d.light;(f.url!==M||f.light!==$)&&this.fetchImage(this.props)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchImage",value:function(f){var d=this,M=f.url,$=f.light,X=f.oEmbedUrl;if(!n.default.isValidElement($)){if(typeof $=="string"){this.setState({image:$});return}if(z[M]){this.setState({image:z[M]});return}return this.setState({image:null}),window.fetch(X.replace("{url}",M)).then(function(I){return I.json()}).then(function(I){if(I.thumbnail_url&&d.mounted){var U=I.thumbnail_url.replace("height=100","height=480").replace("-d_295x166","-d_640");d.setState({image:U}),z[M]=U}})}}},{key:"render",value:function(){var f=this.props,d=f.light,M=f.onClick,$=f.playIcon,X=f.previewTabIndex,I=this.state.image,U=n.default.isValidElement(d),L={display:"flex",alignItems:"center",justifyContent:"center"},Y={preview:c({width:"100%",height:"100%",backgroundImage:I&&!U?"url(".concat(I,")"):void 0,backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer"},L),shadow:c({background:"radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)",borderRadius:q,width:q,height:q,position:U?"absolute":void 0},L),playIcon:{borderStyle:"solid",borderWidth:"16px 0 16px 26px",borderColor:"transparent transparent transparent white",marginLeft:"7px"}},j=n.default.createElement("div",{style:Y.shadow,className:"react-player__shadow"},n.default.createElement("div",{style:Y.playIcon,className:"react-player__play-icon"}));return n.default.createElement("div",{style:Y.preview,className:"react-player__preview",onClick:M,tabIndex:X,onKeyPress:this.handleKeyPress},U?d:null,$||j)}}]),l}(n.Component);r.default=H}(Jt)),Jt}Object.defineProperty(Yt,"__esModule",{value:!0});Yt.createReactPlayer=void 0;var Ge=fn(o),Qi=Wt(ln),Qt=Wt(xi),Tr=Wt(cn),gt=Ke,Zi=be,es=Wt(mn);function Wt(r){return r&&r.__esModule?r:{default:r}}function yt(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?yt=function(n){return typeof n}:yt=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},yt(r)}function kr(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,a)}return n}function Pr(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kr(Object(n),!0).forEach(function(a){oe(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}function Mt(){return Mt=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},Mt.apply(this,arguments)}function Zt(r){return as(r)||ns(r)||rs(r)||ts()}function ts(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rs(r,t){if(r){if(typeof r=="string")return nr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nr(r,t)}}function ns(r){if(typeof Symbol<"u"&&Symbol.iterator in Object(r))return Array.from(r)}function as(r){if(Array.isArray(r))return nr(r)}function nr(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=r[n];return a}function is(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Ir(r,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function ss(r,t,n){return t&&Ir(r.prototype,t),n&&Ir(r,n),r}function os(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&ar(r,t)}function ar(r,t){return ar=Object.setPrototypeOf||function(a,i){return a.__proto__=i,a},ar(r,t)}function ls(r){var t=ds();return function(){var a=Ot(r),i;if(t){var s=Ot(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return cs(this,i)}}function cs(r,t){return t&&(yt(t)==="object"||typeof t=="function")?t:xe(r)}function xe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ds(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Ot(r){return Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ot(r)}function oe(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function hn(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return hn=function(){return r},r}function fn(r){if(r&&r.__esModule)return r;if(r===null||yt(r)!=="object"&&typeof r!="function")return{default:r};var t=hn();if(t&&t.has(r))return t.get(r);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var s=a?Object.getOwnPropertyDescriptor(r,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=r[i]}return n.default=r,t&&t.set(r,n),n}var us=(0,Ge.lazy)(function(){return Promise.resolve().then(function(){return fn(Ji())})}),ms=typeof window<"u"&&window.document,hs=typeof Gt<"u"&&Gt.window&&Gt.window.document,fs=Object.keys(gt.propTypes),ps=ms||hs?Ge.Suspense:function(){return null},ht=[],gs=function(t,n){var a,i;return i=a=function(s){os(h,s);var c=ls(h);function h(){var u;is(this,h);for(var S=arguments.length,D=new Array(S),E=0;E<S;E++)D[E]=arguments[E];return u=c.call.apply(c,[this].concat(D)),oe(xe(u),"state",{showPreview:!!u.props.light}),oe(xe(u),"references",{wrapper:function(R){u.wrapper=R},player:function(R){u.player=R}}),oe(xe(u),"handleClickPreview",function(A){u.setState({showPreview:!1}),u.props.onClickPreview(A)}),oe(xe(u),"showPreview",function(){u.setState({showPreview:!0})}),oe(xe(u),"getDuration",function(){return u.player?u.player.getDuration():null}),oe(xe(u),"getCurrentTime",function(){return u.player?u.player.getCurrentTime():null}),oe(xe(u),"getSecondsLoaded",function(){return u.player?u.player.getSecondsLoaded():null}),oe(xe(u),"getInternalPlayer",function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"player";return u.player?u.player.getInternalPlayer(A):null}),oe(xe(u),"seekTo",function(A,R,y){if(!u.player)return null;u.player.seekTo(A,R,y)}),oe(xe(u),"handleReady",function(){u.props.onReady(xe(u))}),oe(xe(u),"getActivePlayer",(0,Qt.default)(function(A){for(var R=0,y=[].concat(ht,Zt(t));R<y.length;R++){var C=y[R];if(C.canPlay(A))return C}return n||null})),oe(xe(u),"getConfig",(0,Qt.default)(function(A,R){var y=u.props.config;return Qi.default.all([gt.defaultProps.config,gt.defaultProps.config[R]||{},y,y[R]||{}])})),oe(xe(u),"getAttributes",(0,Qt.default)(function(A){return(0,Zi.omit)(u.props,fs)})),oe(xe(u),"renderActivePlayer",function(A){if(!A)return null;var R=u.getActivePlayer(A);if(!R)return null;var y=u.getConfig(A,R.key);return Ge.default.createElement(es.default,Mt({},u.props,{key:R.key,ref:u.references.player,config:y,activePlayer:R.lazyPlayer||R,onReady:u.handleReady}))}),u}return ss(h,[{key:"shouldComponentUpdate",value:function(S,D){return!(0,Tr.default)(this.props,S)||!(0,Tr.default)(this.state,D)}},{key:"componentDidUpdate",value:function(S){var D=this.props.light;!S.light&&D&&this.setState({showPreview:!0}),S.light&&!D&&this.setState({showPreview:!1})}},{key:"renderPreview",value:function(S){if(!S)return null;var D=this.props,E=D.light,A=D.playIcon,R=D.previewTabIndex,y=D.oEmbedUrl;return Ge.default.createElement(us,{url:S,light:E,playIcon:A,previewTabIndex:R,oEmbedUrl:y,onClick:this.handleClickPreview})}},{key:"render",value:function(){var S=this.props,D=S.url,E=S.style,A=S.width,R=S.height,y=S.fallback,C=S.wrapper,N=this.state.showPreview,T=this.getAttributes(D),q=typeof C=="string"?this.references.wrapper:void 0;return Ge.default.createElement(C,Mt({ref:q,style:Pr(Pr({},E),{},{width:A,height:R})},T),Ge.default.createElement(ps,{fallback:y},N?this.renderPreview(D):this.renderActivePlayer(D)))}}]),h}(Ge.Component),oe(a,"displayName","ReactPlayer"),oe(a,"propTypes",gt.propTypes),oe(a,"defaultProps",gt.defaultProps),oe(a,"addCustomPlayer",function(s){ht.push(s)}),oe(a,"removeCustomPlayers",function(){ht.length=0}),oe(a,"canPlay",function(s){for(var c=0,h=[].concat(ht,Zt(t));c<h.length;c++){var u=h[c];if(u.canPlay(s))return!0}return!1}),oe(a,"canEnablePIP",function(s){for(var c=0,h=[].concat(ht,Zt(t));c<h.length;c++){var u=h[c];if(u.canEnablePIP&&u.canEnablePIP(s))return!0}return!1}),i};Yt.createReactPlayer=gs;var pn={},Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.canPlay=Z.FLV_EXTENSIONS=Z.DASH_EXTENSIONS=Z.HLS_EXTENSIONS=Z.VIDEO_EXTENSIONS=Z.AUDIO_EXTENSIONS=Z.MATCH_URL_KALTURA=Z.MATCH_URL_VIDYARD=Z.MATCH_URL_MIXCLOUD=Z.MATCH_URL_DAILYMOTION=Z.MATCH_URL_TWITCH_CHANNEL=Z.MATCH_URL_TWITCH_VIDEO=Z.MATCH_URL_WISTIA=Z.MATCH_URL_STREAMABLE=Z.MATCH_URL_FACEBOOK_WATCH=Z.MATCH_URL_FACEBOOK=Z.MATCH_URL_VIMEO=Z.MATCH_URL_SOUNDCLOUD=Z.MATCH_URL_YOUTUBE=void 0;var Ar=be;function ys(r,t){var n;if(typeof Symbol>"u"||r[Symbol.iterator]==null){if(Array.isArray(r)||(n=xs(r))||t&&r&&typeof r.length=="number"){n&&(r=n);var a=0,i=function(){};return{s:i,n:function(){return a>=r.length?{done:!0}:{done:!1,value:r[a++]}},e:function(S){throw S},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,c=!1,h;return{s:function(){n=r[Symbol.iterator]()},n:function(){var S=n.next();return s=S.done,S},e:function(S){c=!0,h=S},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(c)throw h}}}}function xs(r,t){if(r){if(typeof r=="string")return Mr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mr(r,t)}}function Mr(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=r[n];return a}var ir=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//;Z.MATCH_URL_YOUTUBE=ir;var gn=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/;Z.MATCH_URL_SOUNDCLOUD=gn;var yn=/vimeo\.com\/(?!progressive_redirect).+/;Z.MATCH_URL_VIMEO=yn;var xn=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/;Z.MATCH_URL_FACEBOOK=xn;var vn=/^https?:\/\/fb\.watch\/.+$/;Z.MATCH_URL_FACEBOOK_WATCH=vn;var jn=/streamable\.com\/([a-z0-9]+)$/;Z.MATCH_URL_STREAMABLE=jn;var bn=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/;Z.MATCH_URL_WISTIA=bn;var Sn=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/;Z.MATCH_URL_TWITCH_VIDEO=Sn;var Cn=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/;Z.MATCH_URL_TWITCH_CHANNEL=Cn;var wn=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/;Z.MATCH_URL_DAILYMOTION=wn;var Dn=/mixcloud\.com\/([^/]+\/[^/]+)/;Z.MATCH_URL_MIXCLOUD=Dn;var Tn=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/;Z.MATCH_URL_VIDYARD=Tn;var kn=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/;Z.MATCH_URL_KALTURA=kn;var mr=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i;Z.AUDIO_EXTENSIONS=mr;var hr=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i;Z.VIDEO_EXTENSIONS=hr;var fr=/\.(m3u8)($|\?)/i;Z.HLS_EXTENSIONS=fr;var Pn=/\.(mpd)($|\?)/i;Z.DASH_EXTENSIONS=Pn;var In=/\.(flv)($|\?)/i;Z.FLV_EXTENSIONS=In;var vs=function r(t){if(t instanceof Array){var n=ys(t),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;if(typeof i=="string"&&r(i)||r(i.src))return!0}}catch(s){n.e(s)}finally{n.f()}return!1}return(0,Ar.isMediaStream)(t)||(0,Ar.isBlobUrl)(t)?!0:mr.test(t)||hr.test(t)||fr.test(t)||Pn.test(t)||In.test(t)},js={youtube:function(t){return t instanceof Array?t.every(function(n){return ir.test(n)}):ir.test(t)},soundcloud:function(t){return gn.test(t)&&!mr.test(t)},vimeo:function(t){return yn.test(t)&&!hr.test(t)&&!fr.test(t)},facebook:function(t){return xn.test(t)||vn.test(t)},streamable:function(t){return jn.test(t)},wistia:function(t){return bn.test(t)},twitch:function(t){return Sn.test(t)||Cn.test(t)},dailymotion:function(t){return wn.test(t)},mixcloud:function(t){return Dn.test(t)},vidyard:function(t){return Tn.test(t)},kaltura:function(t){return kn.test(t)},file:vs};Z.canPlay=js;(function(r){function t(j){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(O){return typeof O}:t=function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},t(j)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=c(o),a=be,i=Z;function s(){if(typeof WeakMap!="function")return null;var j=new WeakMap;return s=function(){return j},j}function c(j){if(j&&j.__esModule)return j;if(j===null||t(j)!=="object"&&typeof j!="function")return{default:j};var b=s();if(b&&b.has(j))return b.get(j);var O={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in j)if(Object.prototype.hasOwnProperty.call(j,m)){var x=w?Object.getOwnPropertyDescriptor(j,m):null;x&&(x.get||x.set)?Object.defineProperty(O,m,x):O[m]=j[m]}return O.default=j,b&&b.set(j,O),O}function h(j,b){var O=Object.keys(j);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(j);b&&(w=w.filter(function(m){return Object.getOwnPropertyDescriptor(j,m).enumerable})),O.push.apply(O,w)}return O}function u(j){for(var b=1;b<arguments.length;b++){var O=arguments[b]!=null?arguments[b]:{};b%2?h(Object(O),!0).forEach(function(w){f(j,w,O[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(O)):h(Object(O)).forEach(function(w){Object.defineProperty(j,w,Object.getOwnPropertyDescriptor(O,w))})}return j}function S(j,b){return y(j)||R(j,b)||E(j,b)||D()}function D(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(j,b){if(j){if(typeof j=="string")return A(j,b);var O=Object.prototype.toString.call(j).slice(8,-1);if(O==="Object"&&j.constructor&&(O=j.constructor.name),O==="Map"||O==="Set")return Array.from(j);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return A(j,b)}}function A(j,b){(b==null||b>j.length)&&(b=j.length);for(var O=0,w=new Array(b);O<b;O++)w[O]=j[O];return w}function R(j,b){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(j)))){var O=[],w=!0,m=!1,x=void 0;try{for(var _=j[Symbol.iterator](),V;!(w=(V=_.next()).done)&&(O.push(V.value),!(b&&O.length===b));w=!0);}catch(ne){m=!0,x=ne}finally{try{!w&&_.return!=null&&_.return()}finally{if(m)throw x}}return O}}function y(j){if(Array.isArray(j))return j}function C(j,b){if(!(j instanceof b))throw new TypeError("Cannot call a class as a function")}function N(j,b){for(var O=0;O<b.length;O++){var w=b[O];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(j,w.key,w)}}function T(j,b,O){return b&&N(j.prototype,b),O&&N(j,O),j}function q(j,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(b&&b.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),b&&z(j,b)}function z(j,b){return z=Object.setPrototypeOf||function(w,m){return w.__proto__=m,w},z(j,b)}function H(j){var b=l();return function(){var w=g(j),m;if(b){var x=g(this).constructor;m=Reflect.construct(w,arguments,x)}else m=w.apply(this,arguments);return P(this,m)}}function P(j,b){return b&&(t(b)==="object"||typeof b=="function")?b:v(j)}function v(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function l(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function g(j){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},g(j)}function f(j,b,O){return b in j?Object.defineProperty(j,b,{value:O,enumerable:!0,configurable:!0,writable:!0}):j[b]=O,j}var d="https://www.youtube.com/iframe_api",M="YT",$="onYouTubeIframeAPIReady",X=/[?&](?:list|channel)=([a-zA-Z0-9_-]+)/,I=/user\/([a-zA-Z0-9_-]+)\/?/,U=/youtube-nocookie\.com/,L="https://www.youtube-nocookie.com",Y=function(j){q(O,j);var b=H(O);function O(){var w;C(this,O);for(var m=arguments.length,x=new Array(m),_=0;_<m;_++)x[_]=arguments[_];return w=b.call.apply(b,[this].concat(x)),f(v(w),"callPlayer",a.callPlayer),f(v(w),"parsePlaylist",function(V){if(V instanceof Array)return{listType:"playlist",playlist:V.map(w.getID).join(",")};if(X.test(V)){var ne=V.match(X),F=S(ne,2),J=F[1];return{listType:"playlist",list:J.replace(/^UC/,"UU")}}if(I.test(V)){var te=V.match(I),le=S(te,2),Le=le[1];return{listType:"user_uploads",list:Le}}return{}}),f(v(w),"onStateChange",function(V){var ne=V.data,F=w.props,J=F.onPlay,te=F.onPause,le=F.onBuffer,Le=F.onBufferEnd,wt=F.onEnded,ct=F.onReady,Dt=F.loop,dt=F.config,Ze=dt.playerVars,ut=dt.onUnstarted,Me=window[M].PlayerState,Fn=Me.UNSTARTED,Rn=Me.PLAYING,Ln=Me.PAUSED,qn=Me.BUFFERING,Vn=Me.ENDED,Un=Me.CUED;if(ne===Fn&&ut(),ne===Rn&&(J(),Le()),ne===Ln&&te(),ne===qn&&le(),ne===Vn){var zn=!!w.callPlayer("getPlaylist");Dt&&!zn&&(Ze.start?w.seekTo(Ze.start):w.play()),wt()}ne===Un&&ct()}),f(v(w),"mute",function(){w.callPlayer("mute")}),f(v(w),"unmute",function(){w.callPlayer("unMute")}),f(v(w),"ref",function(V){w.container=V}),w}return T(O,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"getID",value:function(m){return!m||m instanceof Array||X.test(m)?null:m.match(i.MATCH_URL_YOUTUBE)[1]}},{key:"load",value:function(m,x){var _=this,V=this.props,ne=V.playing,F=V.muted,J=V.playsinline,te=V.controls,le=V.loop,Le=V.config,wt=V.onError,ct=Le.playerVars,Dt=Le.embedOptions,dt=this.getID(m);if(x){if(X.test(m)||I.test(m)||m instanceof Array){this.player.loadPlaylist(this.parsePlaylist(m));return}this.player.cueVideoById({videoId:dt,startSeconds:(0,a.parseStartTime)(m)||ct.start,endSeconds:(0,a.parseEndTime)(m)||ct.end});return}(0,a.getSDK)(d,M,$,function(Ze){return Ze.loaded}).then(function(Ze){_.container&&(_.player=new Ze.Player(_.container,u({width:"100%",height:"100%",videoId:dt,playerVars:u(u({autoplay:ne?1:0,mute:F?1:0,controls:te?1:0,start:(0,a.parseStartTime)(m),end:(0,a.parseEndTime)(m),origin:window.location.origin,playsinline:J?1:0},_.parsePlaylist(m)),ct),events:{onReady:function(){le&&_.player.setLoop(!0),_.props.onReady()},onPlaybackRateChange:function(Me){return _.props.onPlaybackRateChange(Me.data)},onPlaybackQualityChange:function(Me){return _.props.onPlaybackQualityChange(Me)},onStateChange:_.onStateChange,onError:function(Me){return wt(Me.data)}},host:U.test(m)?L:void 0},Dt)))},wt),Dt.events&&console.warn("Using `embedOptions.events` will likely break things. Use ReactPlayer’s callback props instead, eg onReady, onPlay, onPause")}},{key:"play",value:function(){this.callPlayer("playVideo")}},{key:"pause",value:function(){this.callPlayer("pauseVideo")}},{key:"stop",value:function(){document.body.contains(this.callPlayer("getIframe"))&&this.callPlayer("stopVideo")}},{key:"seekTo",value:function(m){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.callPlayer("seekTo",m),!x&&!this.props.playing&&this.pause()}},{key:"setVolume",value:function(m){this.callPlayer("setVolume",m*100)}},{key:"setPlaybackRate",value:function(m){this.callPlayer("setPlaybackRate",m)}},{key:"setLoop",value:function(m){this.callPlayer("setLoop",m)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return this.callPlayer("getVideoLoadedFraction")*this.getDuration()}},{key:"render",value:function(){var m=this.props.display,x={width:"100%",height:"100%",display:m};return n.default.createElement("div",{style:x},n.default.createElement("div",{ref:this.ref}))}}]),O}(n.Component);r.default=Y,f(Y,"displayName","YouTube"),f(Y,"canPlay",i.canPlay.youtube)})(pn);var bs=Yt.createReactPlayer,Or=pn.default,Ss=bs([{key:"youtube",canPlay:Or.canPlay,lazyPlayer:Or}]);const Cs=la(Ss),Er=[],ws=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(),[s,c]=o.useState(!0),[h,u]=o.useState(1),[S,D]=o.useState(0),[E,A]=o.useState(0),[R,y]=o.useState(!0),[C]=k.useForm();he();const[N,T]=o.useState(!1),[q,z]=o.useState(!1),[H,P]=o.useState(0),[v,l]=o.useState(!1),g=o.useRef([]),f=async j=>{i(j),l(!0)},d=()=>{z(!0)},M=()=>{T(!0)},$=async(j,b="",O=!1)=>{const{data:w}=await W.custom({url:"",method:"get",meta:{operation:"darasaVideos",variables:{page:{value:j,type:"Int",required:!0},key:{value:b,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","description","url","video","isYoutube","created","updated","isActive","canDelete","canEdit",{darasa:["id"]},{author:["id","fullName","firstName","middleName","lastName"]}]}]}}).catch(()=>(p.error("Error loading videos"),{data:null})).then(m=>m);w&&(A(w.total),D(w.pages),u(w.page),y(w.hasNext),n(w.results.map(m=>({...m,isPlaying:!1})))),c(!1)},X=async j=>{n([j,...t]),z(!1)},I=(j,b)=>{Er[b]=j},U=(j,b)=>{H.toString()!==j.toString()&&P(j),n(t.map((O,w)=>O.id.toString()===j.toString()?{...O,isPlaying:b}:{...O,isPlaying:!1}))},L=async j=>{const{data:b}=await W.custom({url:"",method:"post",meta:{operation:"deleteClassVideo",variables:{id:{value:j,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(p.error("Error deleting video"),{data:null})).then(O=>O);b&&(b.success?(p.success(b.message),n(t.filter(O=>O.id!==j))):p.error(b.message))},Y=j=>{pe.confirm({title:"Removing Video",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Remove",cancelText:"Cancel",onOk:()=>L(j)})};return o.useEffect(()=>{$(h)},[]),s?e.jsx(e.Fragment,{children:e.jsx(Ie,{loading:s,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(Q,{children:[e.jsx(K,{span:20,children:e.jsx(k,{layout:"vertical",form:C,onFinish:j=>{u(0),$(0,j.key,!0)},children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Video(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ve,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{disabled:!r.canManage,children:e.jsxs("a",{target:"_blank",rel:"noopener noreferrer",onClick:M,children:[e.jsx($r,{}),e.jsx("span",{style:{marginLeft:10},children:"Upload Video"})]})}),e.jsx(B.Item,{children:e.jsxs("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>d(),children:[e.jsx(nt,{}),e.jsx("span",{style:{marginLeft:10},children:"Youtube-Video"})]})})]}),placement:"bottomRight",overlayStyle:{zIndex:9999},children:e.jsx(G,{size:"large",icon:e.jsx(qt,{}),children:"Add Video"})})})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[t.length>0?e.jsx(Q,{align:"top",children:t.map((j,b)=>e.jsx(K,{span:12,children:e.jsxs(De,{hoverable:j.isActive,style:{marginRight:10},title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:j.title}),e.jsx(ca,{title:ce(j.created).format("LLLL"),placement:"top",children:e.jsxs(wa.Tag,{color:"red",style:{float:"right"},children:["Published: ",ce(j.created).fromNow()]})}),e.jsx(Te,{style:{right:0,position:"absolute",zIndex:"inherit"},children:e.jsx(ve,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(qe,{}),disabled:!j.isActive,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",onClick:()=>f(j),children:"View Info's"})}),e.jsx(B.Item,{icon:e.jsx(Ae,{}),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(B.Item,{icon:e.jsx(it,{}),onClick:()=>Y(j.id),disabled:!r.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:O=>O.preventDefault(),children:e.jsx(ke,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})]}),children:[j.isYoutube&&e.jsx(Cs,{url:j.url,width:"100%"}),!j.isYoutube&&e.jsx("span",{onClick:()=>{U(j.id,!0),Er[b].pause()},children:e.jsx(ei,{ref:g.current[b],index:b,file:j.video,videoId:j.id,updatePlaying:U,isPlaying:H.toString()===j.id.toString(),updatePlayer:I})})]})}))}):e.jsx(Je,{severity:"info",children:"No Video found for this class, please add one"}),R&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{type:"primary",onClick:()=>{$(h+1)},children:"Load More"})})]}),e.jsx(ae,{title:"Uploading Video",open:N,onClose:j=>T(j),width:"50vw",children:e.jsx(Za,{id:r.id,random:Math.random(),handleAddingVideo:X})}),e.jsx(ae,{title:"Adding Youtube Video",open:q,onClose:j=>z(j),width:"50vw",children:e.jsx(Ja,{id:r.id,random:Math.random(),handleAddingDrive:X})}),e.jsx(Ct,{title:"Video Info's",width:"40vw",anchor:"right",onClose:j=>l(j),open:v,children:e.jsx(e.Fragment,{children:a&&e.jsxs(e.Fragment,{children:[" ",e.jsx("div",{dangerouslySetInnerHTML:{__html:a.description}})]})})})]})};function Xe(r){if(r===null||r===!0||r===!1)return NaN;var t=Number(r);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Pe(r,t){if(t.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+t.length+" present")}function Ve(r){Pe(1,arguments);var t=Object.prototype.toString.call(r);return r instanceof Date||Kr(r)==="object"&&t==="[object Date]"?new Date(r.getTime()):typeof r=="number"||t==="[object Number]"?new Date(r):((typeof r=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Ds(r,t){Pe(2,arguments);var n=Ve(r).getTime(),a=Xe(t);return new Date(n+a)}var Ts={};function Bt(){return Ts}function ks(r){var t=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return t.setUTCFullYear(r.getFullYear()),r.getTime()-t.getTime()}function Ps(r){return Pe(1,arguments),r instanceof Date||Kr(r)==="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Is(r){if(Pe(1,arguments),!Ps(r)&&typeof r!="number")return!1;var t=Ve(r);return!isNaN(Number(t))}function As(r,t){Pe(2,arguments);var n=Xe(t);return Ds(r,-n)}var Ms=864e5;function Os(r){Pe(1,arguments);var t=Ve(r),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var a=t.getTime(),i=n-a;return Math.floor(i/Ms)+1}function Et(r){Pe(1,arguments);var t=1,n=Ve(r),a=n.getUTCDay(),i=(a<t?7:0)+a-t;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function An(r){Pe(1,arguments);var t=Ve(r),n=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var i=Et(a),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var c=Et(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=c.getTime()?n:n-1}function Es(r){Pe(1,arguments);var t=An(r),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var a=Et(n);return a}var Ns=6048e5;function _s(r){Pe(1,arguments);var t=Ve(r),n=Et(t).getTime()-Es(t).getTime();return Math.round(n/Ns)+1}function Nt(r,t){var n,a,i,s,c,h,u,S;Pe(1,arguments);var D=Bt(),E=Xe((n=(a=(i=(s=t==null?void 0:t.weekStartsOn)!==null&&s!==void 0?s:t==null||(c=t.locale)===null||c===void 0||(h=c.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&i!==void 0?i:D.weekStartsOn)!==null&&a!==void 0?a:(u=D.locale)===null||u===void 0||(S=u.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&n!==void 0?n:0);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var A=Ve(r),R=A.getUTCDay(),y=(R<E?7:0)+R-E;return A.setUTCDate(A.getUTCDate()-y),A.setUTCHours(0,0,0,0),A}function Mn(r,t){var n,a,i,s,c,h,u,S;Pe(1,arguments);var D=Ve(r),E=D.getUTCFullYear(),A=Bt(),R=Xe((n=(a=(i=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(c=t.locale)===null||c===void 0||(h=c.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:A.firstWeekContainsDate)!==null&&a!==void 0?a:(u=A.locale)===null||u===void 0||(S=u.options)===null||S===void 0?void 0:S.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(R>=1&&R<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var y=new Date(0);y.setUTCFullYear(E+1,0,R),y.setUTCHours(0,0,0,0);var C=Nt(y,t),N=new Date(0);N.setUTCFullYear(E,0,R),N.setUTCHours(0,0,0,0);var T=Nt(N,t);return D.getTime()>=C.getTime()?E+1:D.getTime()>=T.getTime()?E:E-1}function Fs(r,t){var n,a,i,s,c,h,u,S;Pe(1,arguments);var D=Bt(),E=Xe((n=(a=(i=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(c=t.locale)===null||c===void 0||(h=c.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:D.firstWeekContainsDate)!==null&&a!==void 0?a:(u=D.locale)===null||u===void 0||(S=u.options)===null||S===void 0?void 0:S.firstWeekContainsDate)!==null&&n!==void 0?n:1),A=Mn(r,t),R=new Date(0);R.setUTCFullYear(A,0,E),R.setUTCHours(0,0,0,0);var y=Nt(R,t);return y}var Rs=6048e5;function Ls(r,t){Pe(1,arguments);var n=Ve(r),a=Nt(n,t).getTime()-Fs(n,t).getTime();return Math.round(a/Rs)+1}function ie(r,t){for(var n=r<0?"-":"",a=Math.abs(r).toString();a.length<t;)a="0"+a;return n+a}var qs={y:function(t,n){var a=t.getUTCFullYear(),i=a>0?a:1-a;return ie(n==="yy"?i%100:i,n.length)},M:function(t,n){var a=t.getUTCMonth();return n==="M"?String(a+1):ie(a+1,2)},d:function(t,n){return ie(t.getUTCDate(),n.length)},a:function(t,n){var a=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h:function(t,n){return ie(t.getUTCHours()%12||12,n.length)},H:function(t,n){return ie(t.getUTCHours(),n.length)},m:function(t,n){return ie(t.getUTCMinutes(),n.length)},s:function(t,n){return ie(t.getUTCSeconds(),n.length)},S:function(t,n){var a=n.length,i=t.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,a-3));return ie(s,n.length)}};const He=qs;var rt={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Vs={G:function(t,n,a){var i=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return a.era(i,{width:"abbreviated"});case"GGGGG":return a.era(i,{width:"narrow"});case"GGGG":default:return a.era(i,{width:"wide"})}},y:function(t,n,a){if(n==="yo"){var i=t.getUTCFullYear(),s=i>0?i:1-i;return a.ordinalNumber(s,{unit:"year"})}return He.y(t,n)},Y:function(t,n,a,i){var s=Mn(t,i),c=s>0?s:1-s;if(n==="YY"){var h=c%100;return ie(h,2)}return n==="Yo"?a.ordinalNumber(c,{unit:"year"}):ie(c,n.length)},R:function(t,n){var a=An(t);return ie(a,n.length)},u:function(t,n){var a=t.getUTCFullYear();return ie(a,n.length)},Q:function(t,n,a){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return ie(i,2);case"Qo":return a.ordinalNumber(i,{unit:"quarter"});case"QQQ":return a.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,n,a){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return ie(i,2);case"qo":return a.ordinalNumber(i,{unit:"quarter"});case"qqq":return a.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,n,a){var i=t.getUTCMonth();switch(n){case"M":case"MM":return He.M(t,n);case"Mo":return a.ordinalNumber(i+1,{unit:"month"});case"MMM":return a.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(i,{width:"wide",context:"formatting"})}},L:function(t,n,a){var i=t.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return ie(i+1,2);case"Lo":return a.ordinalNumber(i+1,{unit:"month"});case"LLL":return a.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(i,{width:"wide",context:"standalone"})}},w:function(t,n,a,i){var s=Ls(t,i);return n==="wo"?a.ordinalNumber(s,{unit:"week"}):ie(s,n.length)},I:function(t,n,a){var i=_s(t);return n==="Io"?a.ordinalNumber(i,{unit:"week"}):ie(i,n.length)},d:function(t,n,a){return n==="do"?a.ordinalNumber(t.getUTCDate(),{unit:"date"}):He.d(t,n)},D:function(t,n,a){var i=Os(t);return n==="Do"?a.ordinalNumber(i,{unit:"dayOfYear"}):ie(i,n.length)},E:function(t,n,a){var i=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return a.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(i,{width:"short",context:"formatting"});case"EEEE":default:return a.day(i,{width:"wide",context:"formatting"})}},e:function(t,n,a,i){var s=t.getUTCDay(),c=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(c);case"ee":return ie(c,2);case"eo":return a.ordinalNumber(c,{unit:"day"});case"eee":return a.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(s,{width:"short",context:"formatting"});case"eeee":default:return a.day(s,{width:"wide",context:"formatting"})}},c:function(t,n,a,i){var s=t.getUTCDay(),c=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(c);case"cc":return ie(c,n.length);case"co":return a.ordinalNumber(c,{unit:"day"});case"ccc":return a.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(s,{width:"narrow",context:"standalone"});case"cccccc":return a.day(s,{width:"short",context:"standalone"});case"cccc":default:return a.day(s,{width:"wide",context:"standalone"})}},i:function(t,n,a){var i=t.getUTCDay(),s=i===0?7:i;switch(n){case"i":return String(s);case"ii":return ie(s,n.length);case"io":return a.ordinalNumber(s,{unit:"day"});case"iii":return a.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(i,{width:"short",context:"formatting"});case"iiii":default:return a.day(i,{width:"wide",context:"formatting"})}},a:function(t,n,a){var i=t.getUTCHours(),s=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,n,a){var i=t.getUTCHours(),s;switch(i===12?s=rt.noon:i===0?s=rt.midnight:s=i/12>=1?"pm":"am",n){case"b":case"bb":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,n,a){var i=t.getUTCHours(),s;switch(i>=17?s=rt.evening:i>=12?s=rt.afternoon:i>=4?s=rt.morning:s=rt.night,n){case"B":case"BB":case"BBB":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,n,a){if(n==="ho"){var i=t.getUTCHours()%12;return i===0&&(i=12),a.ordinalNumber(i,{unit:"hour"})}return He.h(t,n)},H:function(t,n,a){return n==="Ho"?a.ordinalNumber(t.getUTCHours(),{unit:"hour"}):He.H(t,n)},K:function(t,n,a){var i=t.getUTCHours()%12;return n==="Ko"?a.ordinalNumber(i,{unit:"hour"}):ie(i,n.length)},k:function(t,n,a){var i=t.getUTCHours();return i===0&&(i=24),n==="ko"?a.ordinalNumber(i,{unit:"hour"}):ie(i,n.length)},m:function(t,n,a){return n==="mo"?a.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):He.m(t,n)},s:function(t,n,a){return n==="so"?a.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):He.s(t,n)},S:function(t,n){return He.S(t,n)},X:function(t,n,a,i){var s=i._originalDate||t,c=s.getTimezoneOffset();if(c===0)return"Z";switch(n){case"X":return _r(c);case"XXXX":case"XX":return Be(c);case"XXXXX":case"XXX":default:return Be(c,":")}},x:function(t,n,a,i){var s=i._originalDate||t,c=s.getTimezoneOffset();switch(n){case"x":return _r(c);case"xxxx":case"xx":return Be(c);case"xxxxx":case"xxx":default:return Be(c,":")}},O:function(t,n,a,i){var s=i._originalDate||t,c=s.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Nr(c,":");case"OOOO":default:return"GMT"+Be(c,":")}},z:function(t,n,a,i){var s=i._originalDate||t,c=s.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Nr(c,":");case"zzzz":default:return"GMT"+Be(c,":")}},t:function(t,n,a,i){var s=i._originalDate||t,c=Math.floor(s.getTime()/1e3);return ie(c,n.length)},T:function(t,n,a,i){var s=i._originalDate||t,c=s.getTime();return ie(c,n.length)}};function Nr(r,t){var n=r>0?"-":"+",a=Math.abs(r),i=Math.floor(a/60),s=a%60;if(s===0)return n+String(i);var c=t||"";return n+String(i)+c+ie(s,2)}function _r(r,t){if(r%60===0){var n=r>0?"-":"+";return n+ie(Math.abs(r)/60,2)}return Be(r,t)}function Be(r,t){var n=t||"",a=r>0?"-":"+",i=Math.abs(r),s=ie(Math.floor(i/60),2),c=ie(i%60,2);return a+s+n+c}const Us=Vs;var Fr=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},On=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},zs=function(t,n){var a=t.match(/(P+)(p+)?/)||[],i=a[1],s=a[2];if(!s)return Fr(t,n);var c;switch(i){case"P":c=n.dateTime({width:"short"});break;case"PP":c=n.dateTime({width:"medium"});break;case"PPP":c=n.dateTime({width:"long"});break;case"PPPP":default:c=n.dateTime({width:"full"});break}return c.replace("{{date}}",Fr(i,n)).replace("{{time}}",On(s,n))},Hs={p:On,P:zs};const Ys=Hs;var Ws=["D","DD"],Bs=["YY","YYYY"];function $s(r){return Ws.indexOf(r)!==-1}function Gs(r){return Bs.indexOf(r)!==-1}function Rr(r,t,n){if(r==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Ks={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Xs=function(t,n,a){var i,s=Ks[t];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+i:i+" ago":i};const Js=Xs;function er(r){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):r.defaultWidth,a=r.formats[n]||r.formats[r.defaultWidth];return a}}var Qs={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Zs={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},eo={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},to={date:er({formats:Qs,defaultWidth:"full"}),time:er({formats:Zs,defaultWidth:"full"}),dateTime:er({formats:eo,defaultWidth:"full"})};const ro=to;var no={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ao=function(t,n,a,i){return no[t]};const io=ao;function ft(r){return function(t,n){var a=n!=null&&n.context?String(n.context):"standalone",i;if(a==="formatting"&&r.formattingValues){var s=r.defaultFormattingWidth||r.defaultWidth,c=n!=null&&n.width?String(n.width):s;i=r.formattingValues[c]||r.formattingValues[s]}else{var h=r.defaultWidth,u=n!=null&&n.width?String(n.width):r.defaultWidth;i=r.values[u]||r.values[h]}var S=r.argumentCallback?r.argumentCallback(t):t;return i[S]}}var so={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},oo={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},lo={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},co={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},uo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},mo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ho=function(t,n){var a=Number(t),i=a%100;if(i>20||i<10)switch(i%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},fo={ordinalNumber:ho,era:ft({values:so,defaultWidth:"wide"}),quarter:ft({values:oo,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:ft({values:lo,defaultWidth:"wide"}),day:ft({values:co,defaultWidth:"wide"}),dayPeriod:ft({values:uo,defaultWidth:"wide",formattingValues:mo,defaultFormattingWidth:"wide"})};const po=fo;function pt(r){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.width,i=a&&r.matchPatterns[a]||r.matchPatterns[r.defaultMatchWidth],s=t.match(i);if(!s)return null;var c=s[0],h=a&&r.parsePatterns[a]||r.parsePatterns[r.defaultParseWidth],u=Array.isArray(h)?yo(h,function(E){return E.test(c)}):go(h,function(E){return E.test(c)}),S;S=r.valueCallback?r.valueCallback(u):u,S=n.valueCallback?n.valueCallback(S):S;var D=t.slice(c.length);return{value:S,rest:D}}}function go(r,t){for(var n in r)if(r.hasOwnProperty(n)&&t(r[n]))return n}function yo(r,t){for(var n=0;n<r.length;n++)if(t(r[n]))return n}function xo(r){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.match(r.matchPattern);if(!a)return null;var i=a[0],s=t.match(r.parsePattern);if(!s)return null;var c=r.valueCallback?r.valueCallback(s[0]):s[0];c=n.valueCallback?n.valueCallback(c):c;var h=t.slice(i.length);return{value:c,rest:h}}}var vo=/^(\d+)(th|st|nd|rd)?/i,jo=/\d+/i,bo={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},So={any:[/^b/i,/^(a|c)/i]},Co={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},wo={any:[/1/i,/2/i,/3/i,/4/i]},Do={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},To={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ko={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Po={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Io={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ao={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Mo={ordinalNumber:xo({matchPattern:vo,parsePattern:jo,valueCallback:function(t){return parseInt(t,10)}}),era:pt({matchPatterns:bo,defaultMatchWidth:"wide",parsePatterns:So,defaultParseWidth:"any"}),quarter:pt({matchPatterns:Co,defaultMatchWidth:"wide",parsePatterns:wo,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:pt({matchPatterns:Do,defaultMatchWidth:"wide",parsePatterns:To,defaultParseWidth:"any"}),day:pt({matchPatterns:ko,defaultMatchWidth:"wide",parsePatterns:Po,defaultParseWidth:"any"}),dayPeriod:pt({matchPatterns:Io,defaultMatchWidth:"any",parsePatterns:Ao,defaultParseWidth:"any"})};const Oo=Mo;var Eo={code:"en-US",formatDistance:Js,formatLong:ro,formatRelative:io,localize:po,match:Oo,options:{weekStartsOn:0,firstWeekContainsDate:1}};const No=Eo;var _o=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fo=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ro=/^'([^]*?)'?$/,Lo=/''/g,qo=/[a-zA-Z]/;function _t(r,t,n){var a,i,s,c,h,u,S,D,E,A,R,y,C,N,T,q,z,H;Pe(2,arguments);var P=String(t),v=Bt(),l=(a=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:v.locale)!==null&&a!==void 0?a:No,g=Xe((s=(c=(h=(u=n==null?void 0:n.firstWeekContainsDate)!==null&&u!==void 0?u:n==null||(S=n.locale)===null||S===void 0||(D=S.options)===null||D===void 0?void 0:D.firstWeekContainsDate)!==null&&h!==void 0?h:v.firstWeekContainsDate)!==null&&c!==void 0?c:(E=v.locale)===null||E===void 0||(A=E.options)===null||A===void 0?void 0:A.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=Xe((R=(y=(C=(N=n==null?void 0:n.weekStartsOn)!==null&&N!==void 0?N:n==null||(T=n.locale)===null||T===void 0||(q=T.options)===null||q===void 0?void 0:q.weekStartsOn)!==null&&C!==void 0?C:v.weekStartsOn)!==null&&y!==void 0?y:(z=v.locale)===null||z===void 0||(H=z.options)===null||H===void 0?void 0:H.weekStartsOn)!==null&&R!==void 0?R:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!l.localize)throw new RangeError("locale must contain localize property");if(!l.formatLong)throw new RangeError("locale must contain formatLong property");var d=Ve(r);if(!Is(d))throw new RangeError("Invalid time value");var M=ks(d),$=As(d,M),X={firstWeekContainsDate:g,weekStartsOn:f,locale:l,_originalDate:d},I=P.match(Fo).map(function(U){var L=U[0];if(L==="p"||L==="P"){var Y=Ys[L];return Y(U,l.formatLong)}return U}).join("").match(_o).map(function(U){if(U==="''")return"'";var L=U[0];if(L==="'")return Vo(U);var Y=Us[L];if(Y)return!(n!=null&&n.useAdditionalWeekYearTokens)&&Gs(U)&&Rr(U,t,String(r)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&$s(U)&&Rr(U,t,String(r)),Y($,U,l.localize,X);if(L.match(qo))throw new RangeError("Format string contains an unescaped latin alphabet character `"+L+"`");return U}).join("");return I}function Vo(r){var t=r.match(Ro);return t?t[1].replace(Lo,"'"):r}const{Option:Uo}=Ne,Lr=[{value:"",label:"Select Duration Type"},{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"}],zo=r=>{const[t,n]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(k,{layout:"vertical",form:r.form,onFinish:a=>{a.description=t,r.onFinish(a),n("")},requiredMark:!1,children:[e.jsx(k.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(re,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(k.Item,{name:"startDate",label:"start Date",rules:[{required:!0,type:"date",message:"Please select date"}],children:e.jsx(Qe,{showTime:{format:"HH:mm"},disabledDate:a=>{const i=ce().format("YYYY-MM-DD");return a&&a<ce(i,"YYYY-MM-DD")},style:{width:"100%"},popupStyle:{zIndex:9999}})}),e.jsxs(Q,{children:[e.jsx(K,{span:12,children:e.jsx(k.Item,{name:"duration",label:"Duration",style:{width:"100%"},rules:[{required:!0,type:"integer",message:"Enter Duration"}],children:e.jsx(We,{min:1,defaultValue:1,style:{width:"100%"},size:"large"})})}),e.jsx(K,{span:12,children:e.jsx(k.Item,{name:"durationType",label:"Duration Type",style:{width:"100%"},rules:[{required:!0,type:"string",message:"Please select duration type"}],children:e.jsx(Ne,{defaultValue:Lr[0].value,size:"large",style:{width:"100%"},dropdownStyle:{zIndex:9999},children:Lr.map(a=>e.jsx(Uo,{children:a.label},a.value))})})})]}),e.jsx("h3",{children:"Description"}),e.jsx(Fe.CKEditor,{editor:Re,data:t,onReady:a=>{a.editing.view.change(i=>{i.setStyle("min-height","100px",a.editing.view.document.getRoot())})},onChange:(a,i)=>{const s=i.getData();n(s)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Ho=r=>{const[t,n]=o.useState([]),[a,i]=o.useState(),[s,c]=o.useState(!0),[h,u]=o.useState(1);o.useState(25);const[S]=k.useForm(),[D,E]=o.useState(0),[A,R]=o.useState(0),[y,C]=o.useState(!0),{push:N}=he(),[T,q]=o.useState(!1),[z]=k.useForm(),[H,P]=o.useState(!1),[v]=k.useForm(),l=I=>{i(I),P(!0)},g=()=>{q(!0)},f=async I=>{const{data:U}=await W.custom({url:"",method:"post",meta:{operation:"editVirtualClass",variables:{id:{value:I.id,type:"Int",required:!0},name:{value:I.name,type:"String",required:!0},description:{value:I.description,type:"String",required:!0},duration:{value:I.duration,type:"Int",required:!0},durationType:{value:I.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:I.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(()=>(p.error("Error editing class"),{data:null})).then(L=>L);U&&(U.success?(p.success(U.message),n(t.map(L=>L.id===U.virtual.id?U.virtual:L)),P(!1)):p.error(U.message))},d=async I=>{const{data:U}=await W.custom({url:"",method:"post",meta:{operation:"createVirtualClass",variables:{darasaId:{value:parseInt(r.id?r.id.toString():"0"),type:"Int",required:!1},name:{value:I.name,type:"String",required:!0},description:{value:I.description,type:"String",required:!0},duration:{value:I.duration,type:"Int",required:!0},durationType:{value:I.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:I.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(()=>(p.error("Error creating virtual class"),{data:null})).then(L=>L);U&&(U.success?(p.success(U.message),q(!1),n([U.virtual,...t])):p.error(U.message))},M=async(I,U="",L=!1)=>{const{data:Y}=await W.custom({url:"",method:"get",meta:{operation:"darasaVirtuals",variables:{page:{value:I,type:"Int",required:!0},key:{value:U,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","middleName","lastName","email","fullName","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(()=>(p.error("Error fetching virtual classes"),{data:null})).then(j=>j);Y&&(R(Y.total),E(Y.pages),u(Y.page),C(Y.hasNext),n(L?Y.results:[...t,...Y.results])),c(!1)},$=async I=>{const{data:U}=await W.custom({url:"",method:"post",meta:{operation:"deleteVirtualClass",variables:{id:{value:I,type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>(p.error("Error deleting virtual class"),{data:null})).then(L=>L);U&&(U.success?(p.success(U.message),n(t.filter(L=>L.id!==I))):p.error(U.message))},X=I=>{pe.confirm({title:"Deleting Virtual Class Session",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>$(I)})};return o.useEffect(()=>{M(h)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Q,{children:[e.jsx(K,{span:20,children:e.jsx(k,{layout:"vertical",form:S,onFinish:I=>M(0,I.key,!0),children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Virtual Sessions...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{icon:e.jsx(nt,{}),onClick:g,disabled:!r.canManage,size:"large",children:"Create Virtual Session"})})]}),e.jsx("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:e.jsxs(ue,{spinning:s,children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,renderItem:I=>e.jsx("div",{style:{background:"white",marginBottom:5,paddingLeft:10,paddingTop:10},children:e.jsx(De,{children:e.jsx(ee.Item,{actions:[e.jsx(ve,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(Vt,{}),disabled:!I.canJoin,onClick:()=>N("/oclass/virtual/class/session/"+I.id+"/"+I.token),children:e.jsx("a",{children:"Join"})}),I.canDelete?e.jsx(B.Item,{disabled:!I.canDelete,icon:e.jsx(Ue,{}),onClick:()=>X(I.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}):e.jsx(e.Fragment,{}),I.canEdit&&e.jsx(B.Item,{icon:e.jsx(St,{}),disabled:!I.canEdit,onClick:()=>l(I),children:e.jsx("a",{children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:U=>U.preventDefault(),children:e.jsx(ke,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(Ie,{avatar:!0,title:!1,loading:!1,active:!0,children:e.jsx(ee.Item.Meta,{avatar:e.jsx(je,{}),title:e.jsx("a",{onClick:()=>I.canJoin?N("/oclass/virtual/class/session/"+I.id+"/"+I.token):p("You can't join this session"),children:I.name}),description:e.jsxs(e.Fragment,{children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:I.description}}),e.jsxs("p",{children:[e.jsxs(se,{color:"green",children:["Start At:"," ",_t(new Date(I.startDate),"MMMM do, yyyy H:mma")]}),e.jsxs(se,{color:"green",children:["End In:"," ",_t(new Date(I.endDate),"MMMM do, yyyy H:mma")]}),I.canJoin?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx(se,{color:"red",children:"Not Joinable"})})]})]})})})})})},"class-virtual-session-item-container-"+I.id)}),y&&e.jsx("div",{style:{textAlign:"center",marginTop:12},children:e.jsx("button",{onClick:()=>{M(h+1)},children:"Load More"})})]})}),e.jsx(ae,{title:"Creating Class Virtual Session",open:T,onClose:I=>q(I),width:"50vw",children:e.jsx(zo,{form:z,onFinish:d})}),e.jsx(ae,{title:"Editting "+(a==null?void 0:a.name),width:"40vw",open:H,onClose:I=>P(I),children:e.jsx(Xr,{form:v,darasa:a,onFinish:f})})]})};function jt(r){"@babel/helpers - typeof";return jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(r)}function qr(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,a)}return n}function sr(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qr(Object(n),!0).forEach(function(a){$e(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):qr(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}function $e(r,t,n){return t=Yo(t),t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function Yo(r){var t=Wo(r,"string");return jt(t)==="symbol"?t:String(t)}function Wo(r,t){if(jt(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var a=n.call(r,t||"default");if(jt(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var Bo=function(t){var n,a=t.componentCls,i=t.colorBgContainer,s=t.fontSize,c=t.fontSizeSM,h=t.padding,u=t.paddingXS,S=t.marginSM,D=t.marginXXS,E=t.controlHeight,A=t.lineHeightSM,R=t.colorText,y=t.colorTextSecondary,C=t.colorTextTertiary,N=t.motionDurationSlow;return $e({},a,sr(sr({},ma(t)),{},(n={position:"relative",backgroundColor:i},$e(n,"".concat(a,"-inner"),{display:"flex",paddingBlock:h}),$e(n,"".concat(a,"-avatar"),{position:"relative",flexShrink:0,marginInlineEnd:S,cursor:"pointer",img:{width:E,height:E,borderRadius:"50%"}}),$e(n,"".concat(a,"-content"),{position:"relative",flex:"auto",minWidth:0,wordWrap:"break-word","&-author":{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",marginBottom:D,"& > a, & > span":{paddingInlineEnd:u,fontSize:c,lineHeight:A},"&-name":{color:y,fontSize:s,transition:"color ".concat(N),"> *":{color:y,"&:hover":{color:y}}},"&-time":{color:C,whiteSpace:"nowrap",cursor:"auto"}},"&-detail p":{whiteSpace:"pre-wrap",marginBlock:0}}),$e(n,"".concat(a,"-actions"),{marginTop:S,marginBottom:0,paddingInlineStart:0,"> li":{display:"inline-block",color:y,"> span":{marginInlineEnd:S,color:y,fontSize:c,cursor:"pointer",transition:"color ".concat(N),userSelect:"none","&:hover":{color:R}}}}),$e(n,"".concat(a,"-nested"),{marginInlineStart:44}),n)))};function $o(r){var t=da.useToken(),n=t.theme,a=t.token,i=t.hashId,s=o.useContext(Jr.ConfigContext),c=s.iconPrefixCls;return[ua({theme:n,token:a,hashId:i,path:["compatible","Comment",r,c]},function(){var h=sr({componentCls:".".concat(r)},a);return[Bo(h)]}),i]}function bt(r){"@babel/helpers - typeof";return bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(r)}var Go=["actions","author","avatar","children","className","content","prefixCls","datetime"];function or(){return or=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},or.apply(this,arguments)}function Ko(r,t,n){return t=Xo(t),t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function Xo(r){var t=Jo(r,"string");return bt(t)==="symbol"?t:String(t)}function Jo(r,t){if(bt(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var a=n.call(r,t||"default");if(bt(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Qo(r,t){return rl(r)||tl(r,t)||el(r,t)||Zo()}function Zo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function el(r,t){if(r){if(typeof r=="string")return Vr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vr(r,t)}}function Vr(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=r[n];return a}function tl(r,t){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var a,i,s,c,h=[],u=!0,S=!1;try{if(s=(n=n.call(r)).next,t===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=s.call(n)).done)&&(h.push(a.value),h.length!==t);u=!0);}catch(D){S=!0,i=D}finally{try{if(!u&&n.return!=null&&(c=n.return(),Object(c)!==c))return}finally{if(S)throw i}}return h}}function rl(r){if(Array.isArray(r))return r}function nl(r,t){if(r==null)return{};var n=al(r,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(r,a)&&(n[a]=r[a])}return n}function al(r,t){if(r==null)return{};var n={},a=Object.keys(r),i,s;for(s=0;s<a.length;s++)i=a[s],!(t.indexOf(i)>=0)&&(n[i]=r[i]);return n}var il=Jr.ConfigContext,sl=function(t){var n=t.actions,a=t.author,i=t.avatar,s=t.children,c=t.className,h=t.content,u=t.prefixCls,S=t.datetime,D=nl(t,Go),E=o.useContext(il),A=E.getPrefixCls,R=E.direction,y=function(d,M){return o.createElement("div",{className:yr("".concat(d,"-nested"))},M)},C=A("comment",u),N=$o(C),T=Qo(N,2),q=T[0],z=T[1],H=i?o.createElement("div",{className:"".concat(C,"-avatar")},typeof i=="string"?o.createElement("img",{src:i,alt:"comment-avatar"}):i):null,P=n&&n.length?o.createElement("ul",{className:"".concat(C,"-actions")},n.map(function(f,d){return o.createElement("li",{key:"action-".concat(d)},f)})):null,v=(a||S)&&o.createElement("div",{className:"".concat(C,"-content-author")},a&&o.createElement("span",{className:"".concat(C,"-content-author-name")},a),S&&o.createElement("span",{className:"".concat(C,"-content-author-time")},S)),l=o.createElement("div",{className:"".concat(C,"-content")},v,o.createElement("div",{className:"".concat(C,"-content-detail")},h),P),g=yr(C,Ko({},"".concat(C,"-rtl"),R==="rtl"),c,z);return q(o.createElement("div",or({},D,{className:g}),o.createElement("div",{className:"".concat(C,"-inner")},H,l),s?y(C,s):null))};const En=sl,ol=r=>new Promise((t,n)=>{const a=new FileReader;a.readAsDataURL(r),a.onload=()=>t(a.result),a.onerror=i=>n(i)}),ll=r=>{const{data:t}=ur(),[n,a]=o.useState(!1),[i,s]=o.useState(""),[c,h]=o.useState(""),[u,S]=o.useState([]),[D,E]=o.useState(!0),[A,R]=o.useState(1);o.useState(25);const[y]=k.useForm(),[C,N]=o.useState(0),[T,q]=o.useState(0),[z,H]=o.useState(!0);Qr();const[P,v]=o.useState(!1),[l,g]=o.useState(""),f=o.useRef(null),d=o.useRef([]),[M,$]=o.useState([]),X=w=>{d.current[w-1].scrollIntoView({behavior:"smooth"})},I=()=>{f.current.scrollIntoView({behavior:"smooth"})},U=async(w,m="",x=25)=>{w===1&&(u.length=0,S([]));const{data:_}=await W.custom({url:"",method:"get",meta:{operation:"darasaPostComments",variables:{page:{value:parseInt(w.toString()),type:"Int",required:!0},key:{value:m,type:"String",required:!1},postId:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},pageSize:{value:parseInt(x.toString()),type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","content","created","updated","isActive","canEdit","canDelete",{user:["id","firstName","lastName","middleName","fullName","email","pic"]},{post:["id"]},{medias:["id","media"]}]}]}}).catch(V=>(p.error("Error loading comments"),{data:null})).then(V=>V);_&&(q(_.total),N(_.pages),R(_.page+1),H(_.hasNext),S([...u,..._.results])),E(!1)},L=async w=>{v(!0);const{data:m}=await W.custom({url:"",method:"post",meta:{operation:"createDarasaPostComment",variables:{postId:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},content:{value:w.content,type:"String",required:!0},photos:{value:M,type:"[Upload]",required:!1}},fields:["success","message",{comment:["id","content",{user:["id","firstName","lastName","middleName","fullName","email","pic"]},{post:["id","totalComments"]},{medias:["id","media"]},"created","updated","isActive","canEdit","canDelete","canManage"]}]}}).catch(x=>(p.error("Error submitting comment"),{data:null})).then(x=>x);v(!1),g(""),m&&(m.success?($([]),S([...u,m.comment]),I(),r.updateTotalComment(r==null?void 0:r.id,1)):p.error(m.message))},Y=async(w,m)=>{const{data:x}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaPostComment",variables:{id:{value:w,type:"Int",required:!0}},fields:["success","message"]}}).catch(_=>(p.error("Error deleting comment"),{data:null})).then(_=>_);x&&(x.success?(p.success(x.message),S(u.filter(_=>_.id!==w)),r.updateTotalComment(r==null?void 0:r.id,-1),X(m)):p.error(x.message))},j=e.jsxs("div",{children:[e.jsx(Zr,{}),e.jsx("div",{style:{marginTop:8},children:"Photo"})]}),b=async w=>{!w.url&&!w.preview&&(w.preview=await ol(w.originFileObj)),s(w.url||w.preview),a(!0),h(w.name||w.url.substring(w.url.lastIndexOf("/")+1))},O=({fileList:w})=>{$(w)};return o.useEffect(()=>{U(1),I()},[r.id,r.randKey]),e.jsxs(e.Fragment,{children:[e.jsx("div",{id:"scrollableDiv",style:{height:"58vh",overflow:"auto"},children:e.jsxs(ue,{spinning:D,children:[e.jsx("div",{ref:f}),e.jsx(ee,{className:"comment-list",header:`${u.length} replies`,itemLayout:"horizontal",dataSource:u,renderItem:(w,m)=>e.jsx(ee.Item,{ref:x=>{d.current[m]=x},extra:[e.jsx(ve,{overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(Ue,{}),disabled:!w.canDelete,children:e.jsx(lt,{placement:"topLeft",title:"Are you sure to delete this comment?",onConfirm:()=>Y(w.id,m),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx("a",{children:"Delete"})})},"delete-post-comment"+w.id),w.canManage?e.jsx(e.Fragment,{}):e.jsx(B.Item,{icon:e.jsx(Ae,{}),children:e.jsx("a",{onClick:()=>p("Under construction"),children:"Report"})},"report-post-comment"+w.id)]}),trigger:["click"],placement:"bottomRight",arrow:!0,overlayStyle:{zIndex:9999},children:e.jsx(G,{children:e.jsx(ke,{})})})],actions:[],children:e.jsx(ee.Item.Meta,{avatar:e.jsx(je,{src:w.user.pic}),title:e.jsx("a",{children:w.user.fullName}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:w.user.bio}),e.jsx("span",{dangerouslySetInnerHTML:{__html:w.content}}),e.jsx("div",{children:w.medias.length>0&&e.jsx(Q,{children:e.jsx(K,{span:24,children:e.jsx(xt.PreviewGroup,{children:w.medias.map(x=>e.jsx(xt,{preview:{visible:!0,zIndex:99999,bodyStyle:{zIndex:99999,zIndexPopup:99999}},style:{padding:10,display:"inline"},width:100,src:x.media}))})})})}),e.jsxs("span",{style:{color:"orange",display:"block"},children:[": Posted ",ce(w.created).fromNow()]})]})})},"post-comment-"+w.id)}),z&&e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(G,{onClick:()=>U(A,"",25),children:"Load More"})})]})}),e.jsx(En,{avatar:e.jsx(je,{src:t.pic,alt:"Han Solo"}),content:e.jsxs(k,{form:y,onFinish:w=>{w.content=l,L(w),y.resetFields()},children:[e.jsx("div",{children:e.jsx(Fe.CKEditor,{disabled:P,editor:Re,data:l,onReady:w=>{w.editing.view.change(m=>{m.setStyle("min-height","75px",w.editing.view.document.getRoot())})},onChange:(w,m)=>{const x=m.getData();g(x)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})}),e.jsx("div",{style:{marginTop:10},children:e.jsx(dr,{multiple:!0,name:"photos",accept:cr.supported_image_extensions.join(),beforeUpload:()=>!1,listType:"picture-card",fileList:M,maxCount:3,onPreview:w=>{b(w)},onChange:O,children:M.length>=3?null:j})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{size:"large",loading:P,onClick:()=>y.submit(),type:"primary",disabled:l.length===0,children:"Publish Comment"})})]})}),e.jsx(ae,{open:n,title:c,onClose:w=>a(w),children:e.jsx("img",{alt:"example",style:{width:"100%"},src:i})})]})},{Text:Ur}=ot,cl=r=>new Promise((t,n)=>{const a=new FileReader;a.readAsDataURL(r),a.onload=()=>t(a.result),a.onerror=i=>n(i)}),dl=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState(""),[s,c]=o.useState(""),[h,u]=o.useState([]),[S,D]=o.useState(),[E,A]=o.useState(!0),[R,y]=o.useState(!1),[C,N]=o.useState(1),[T,q]=o.useState(0),[z,H]=o.useState(!0),{data:P}=ur(),[v,l]=o.useState(""),[g,f]=o.useState(!1),[d,M]=o.useState([]),$=m=>{D(m),f(!0)},X=async(m,x="")=>{const{data:_}=await W.custom({url:"",method:"get",meta:{operation:"darasaPosts",variables:{id:{value:parseInt(r.id.toString()),type:"Int",required:!0},page:{value:m,type:"Int",required:!0},key:{value:x,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","slug","content","isPublic","created","updated","isActive","isLiked","canEdit","canDelete","totalLikes","totalComments","canManage",{user:["id","firstName","lastName","middleName","fullName","email","pic"]},{medias:["id","media"]}]}]}}).catch(V=>(p.error("Error loading posts"),{data:null})).then(V=>V);_&&(q(_.total),N(_.page+1),H(_.hasNext),u(_.results)),A(!1)};o.useEffect(()=>{X(C)},[]);const I=async()=>{y(!0);const{data:m}=await W.custom({url:"",method:"post",meta:{operation:"createDarasaPost",variables:{id:{value:parseInt(r.id.toString()),type:"Int",required:!0},content:{value:v,type:"String",required:!0},photos:{value:d,type:"[Upload]",required:!0}},fields:["success","message",{post:["id","slug","content","isPublic","created","updated","isActive","isLiked","canEdit","canDelete","totalLikes","totalComments","canManage",{user:["id","firstName","lastName","middleName","fullName","email","pic"]},{medias:["id","media"]}]}]}}).catch(x=>(p.error("Error creating post"),{data:null})).then(x=>x);y(!1),m&&m.success&&(l(""),u([m.post,...h]),M([]),p.success(m.message))},U=async m=>{const{data:x}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaPost",variables:{id:{value:parseInt(m.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(_=>(p.error("Error deleting post"),{data:null})).then(_=>_);x&&(x.success?(p.success(x.message),u(h.filter(_=>_.id!==m))):p.error(x.message))},L=m=>{pe.confirm({title:"Deleting Post",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>U(m)})},Y=async m=>{const{data:x}=await W.custom({url:"",method:"post",meta:{operation:"addDarasaPostLike",variables:{id:{value:parseInt(m.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(_=>(p.error("Error liking post"),{data:null})).then(_=>_);if(x)if(x.success){const _=h.map(V=>V.id===m?{...V,isLiked:!0,totalLikes:V.totalLikes+1}:V);u(_)}else p.error(x.message)},j=async(m,x)=>{const _=h.map(V=>V.id===m?{...V,totalComments:V.totalComments+x}:V);u(_)},b=e.jsxs("div",{children:[e.jsx(Zr,{}),e.jsx("div",{style:{marginTop:8},children:"Photo"})]}),O=async m=>{!m.url&&!m.preview&&(m.preview=await cl(m.originFileObj)),i(m.url||m.preview),n(!0),c(m.name||m.url.substring(m.url.lastIndexOf("/")+1))},w=({fileList:m})=>{M(m)};return e.jsxs(e.Fragment,{children:[e.jsxs(Q,{children:[e.jsx(K,{span:24,children:e.jsx("div",{id:"scrollableDiv",style:{height:"80vh",overflow:"auto"},children:e.jsxs(zt,{dataLength:T,next:()=>X(C),hasMore:z,scrollableTarget:"scrollableDiv",loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(ue,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:h.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:[e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(En,{avatar:e.jsx(je,{src:P==null?void 0:P.pic,alt:P==null?void 0:P.fullName}),style:{padding:0,border:"1",borderColor:"silver"},content:e.jsxs("div",{children:[e.jsx(Fe.CKEditor,{disabled:R,editor:Re,data:v,onReady:m=>{m.editing.view.change(x=>{x.setStyle("min-height","100px",m.editing.view.document.getRoot())})},onChange:(m,x)=>{const _=x.getData();l(_)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{children:e.jsx(dr,{multiple:!0,name:"photos",accept:cr.supported_image_extensions.join(),beforeUpload:()=>!1,listType:"picture-card",fileList:d,maxCount:7,onPreview:m=>{O(m)},onChange:w,children:d.length>=7?null:b})}),e.jsx("span",{style:{display:"flex",justifyContent:"flex-end",padding:0},children:e.jsx(G,{size:"large",htmlType:"submit",loading:R,type:"primary",disabled:!v,style:{marginTop:10},onClick:()=>I(),children:"Post"})})]})},"comment-header-")}),e.jsx(ee,{itemLayout:"vertical",size:"large",dataSource:h,loading:E,renderItem:m=>e.jsxs(ee.Item,{extra:[e.jsx(ve,{overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(Ue,{}),disabled:!m.canDelete,children:e.jsx("a",{onClick:()=>L(m.id),children:"Delete"})},"delete-post-"+m.id),m.canManage?e.jsx(e.Fragment,{}):e.jsx(B.Item,{icon:e.jsx(Ae,{}),children:e.jsx("a",{onClick:()=>p("Under construction"),children:"Report"})},"report-post"+m.id)]}),trigger:["click"],placement:"bottomRight",arrow:!0,overlayStyle:{zIndex:9999},children:e.jsx(G,{children:e.jsx(ke,{})})})],actions:[e.jsx("a",{onClick:()=>Y(m.id),children:e.jsxs(Te,{children:[m.isLiked?e.jsx(ha,{style:{color:"red"}}):e.jsx(fa,{style:{color:"red"}}),e.jsx(Ur,{children:m.totalLikes})]})}),e.jsx("a",{onClick:()=>$(m),children:e.jsxs(Te,{children:[e.jsx(pa,{}),e.jsx(Ur,{children:m.totalComments})]})})],children:[e.jsx(ee.Item.Meta,{avatar:e.jsx(je,{src:m.user.pic}),title:e.jsx("a",{children:m.user.fullName}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:m.user.bio}),e.jsxs("span",{style:{color:"orange"},children:[": Posted ",ce(m.created).fromNow()]})]})}),e.jsx("span",{dangerouslySetInnerHTML:{__html:m.content}}),e.jsx("div",{children:e.jsx(Q,{children:e.jsx(K,{span:24,children:e.jsx(xt.PreviewGroup,{children:m.medias.map(x=>e.jsx(xt,{style:{padding:10,display:"inline"},width:300,src:x.media}))})})})})]},m.slug+m.id)})]})})}),e.jsx(K,{span:6})]}),e.jsx(Ct,{title:"Comments",anchor:"right",width:"40vw",open:g,onClose:m=>f(m),children:e.jsx(ll,{id:S==null?void 0:S.id,randKey:Math.random(),updateTotalComment:j})}),e.jsx(ae,{visible:t,title:s,footer:null,onCancel:()=>n(!1),destroyOnClose:!0,children:e.jsx("img",{alt:"example",style:{width:"100%"},src:a})})]})},ul=r=>{const[t,n]=o.useState(""),[a]=k.useForm(),i=async s=>{const{data:c}=await W.custom({url:"",method:"post",meta:{operation:"createDarasaTopic",variables:{darasaId:{value:parseInt(r.darasa),type:"Int",required:!0},title:{value:s.title,type:"String",required:!0},description:{value:s.description,type:"String",required:!0},startDate:{value:ce(s.start_date).format("YYYY-MM-DD"),type:"String",required:!1},minutes:{value:s.minutes,type:"Int",required:!1}},fields:["success","message",{topic:["id","title","description","created","canEdit","startDate","endDate","canDelete","updated","isActive","canEdit","canDelete","canManage",{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]},{subtopics:["id","title","description","canManage","canEdit","canDelete","isActive"]},{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]}]}]}}).catch(h=>(p.error("Error creating topic"),{data:null})).then(h=>h);c&&(c.success?(p.success(c.message),r.onFinish(c.topic),a.resetFields()):p.error(c.message))};return e.jsx(e.Fragment,{children:e.jsxs(k,{layout:"vertical",form:a,onFinish:s=>{s.description=t,i(s)},onReset:()=>{n("")},requiredMark:!1,children:[e.jsx(k.Item,{name:"title",label:"Topic Title",rules:[{required:!0,type:"string",message:"Enter Topic Title ..."}],children:e.jsx(re,{size:"large",placeholder:"Enter Topic Title ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(Fe.CKEditor,{editor:Re,data:t,onReady:s=>{s.editing.view.change(c=>{c.setStyle("min-height","150px",s.editing.view.document.getRoot())})},onChange:(s,c)=>{const h=c.getData();n(h)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(k.Item,{label:"Start Date",name:"start_date",rules:[{required:!!a.getFieldValue("minutes"),type:"object",message:"Please select Start Date"}],children:e.jsx(Qe,{size:"large",style:{width:"50%"},disabledDate:s=>s.add(1,"day")<ce().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(k.Item,{label:"Total Duration (Minutes)",name:"minutes",rules:[{required:!1,type:"number",message:"Please enter total duration in minutes"}],children:e.jsx(We,{style:{width:"35%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},ml=r=>{const[t,n]=o.useState(""),[a]=k.useForm(),i=async s=>{const{data:c}=await W.custom({url:"",method:"post",meta:{operation:"createDarasaSubtopic",variables:{topicId:{value:parseInt(r.topic.id),type:"Int",required:!0},title:{value:s.title,type:"String",required:!0},description:{value:s.description,type:"String",required:!0},startDate:{value:ce(s.start_date).format("YYYY-MM-DD"),type:"String",required:!1},minutes:{value:s.minutes,type:"Int",required:!1}},fields:["success","message",{topic:["id","title","description","created","canEdit","startDate","endDate","canDelete","updated","isActive","canEdit","canDelete","canManage",{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]},{subtopics:["id","title","description","canManage","canEdit","canDelete","isActive"]},{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]}]}]}}).catch(h=>(p.error("Error creating topic"),{data:null})).then(h=>h);c&&(c.success?(p.success(c.message),r.onFinish(c.topic),a.resetFields()):p.error(c.message))};return e.jsx(e.Fragment,{children:e.jsxs(k,{layout:"vertical",form:a,onFinish:s=>{s.description=t,i(s)},requiredMark:!1,children:[e.jsx(k.Item,{name:"title",label:"Topic Title",rules:[{required:!0,type:"string"}],children:e.jsx(re,{size:"large",placeholder:"Enter Topic Title ..."})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{marginBottom:10},children:e.jsx(Fe.CKEditor,{editor:Re,data:t,onReady:s=>{s.editing.view.change(c=>{c.setStyle("min-height","150px",s.editing.view.document.getRoot())})},onChange:(s,c)=>{const h=c.getData();n(h)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}})})]}),e.jsx(k.Item,{label:"Start Date",name:"start_date",rules:[{required:!1,type:"object",message:"Please select Start Date"}],children:e.jsx(Qe,{size:"large",style:{width:"50%"},disabledDate:s=>s.add(1,"day")<ce().endOf("day"),popupStyle:{zIndex:9999}})}),e.jsx(k.Item,{label:"Total Duration (Minutes)",name:"minutes",rules:[{required:!1,type:"number",message:"Enter Total Duration (Minutes)"}],children:e.jsx(We,{style:{width:"50%"},size:"large"})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})};function hl(r){return Da({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h8zM4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4z"}},{tag:"path",attr:{d:"M8 4.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5zM8 6a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 3a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-3.5 1.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"}}]})(r)}const{TreeNode:zr,DirectoryTree:fl}=Ta,{Panel:pl}=nn,gl=r=>{const[t,n]=o.useState([]),[a,i]=o.useState([]),[s,c]=o.useState(),[h,u]=o.useState(!0),[S,D]=o.useState(1),[E,A]=o.useState(0),[R,y]=o.useState(0),[C,N]=o.useState(!0),[T]=k.useForm(),[q,z]=o.useState(void 0);he();const P=!en.useBreakpoint().lg,[v,l]=o.useState(!1),[g,f]=o.useState(!1),d=()=>{l(!0)},M=async(m,x="",_=!1)=>{const{data:V}=await W.custom({url:"",method:"get",meta:{operation:"darasaTopics",variables:{page:{value:m,type:"Int",required:!0},key:{value:x,type:"String",required:!1},id:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","title","description","created","canEdit","startDate","endDate","minutes","canDelete","updated","isActive","canEdit","canDelete","canManage",{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]},{subtopics:["id","title","description","startDate","endDate","minutes","canManage","canEdit","canDelete","isActive"]},{documents:["id",{document:["id","title","file","icon","size","description","canRead","isVideo","isAudio","isAuthor","isImage","imageVisible"]}]}]}]}}).catch(ne=>(p.error("Error fetching Topics"),{data:null})).then(ne=>ne);V&&(y(V.total),A(V.pages),D(V.page),N(V.hasNext),n(V.results),i(V.results)),u(!1)},$=async m=>{const{data:x}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaTopic",variables:{id:{value:m,type:"Int",required:!0}},fields:["success","message"]}}).catch(_=>(p.error("Error removing class Topic"),{data:null})).then(_=>_);x&&(x.success?(p.success(x.message),n(t.filter(_=>_.id!==m)),i(a.filter(_=>_.id!==m))):p.error(x.message))},X=async(m,x)=>{const{data:_}=await W.custom({url:"",method:"post",meta:{operation:"deleteDarasaTopic",variables:{id:{value:m,type:"Int",required:!0}},fields:["success","message"]}}).catch(V=>(p.error("Error removing class Topic"),{data:null})).then(V=>V);if(_)if(_.success){p.success(_.message);const V=[...t],ne=V.findIndex(le=>le.id===x),F=V[ne].subtopics.findIndex(le=>le.id===m);F!==-1&&V[ne].subtopics.splice(F,1),n(V);const J=[...a],te=V.findIndex(le=>le.id===x);if(te!==-1){const le=V[te].subtopics.findIndex(Le=>Le.id===m);le!==-1&&J[te].subtopics.splice(le,1),i(J)}}else p.error(_.message)},I=m=>{pe.confirm({title:"Deleting Topic",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>$(m)})},U=(m,x)=>{pe.confirm({title:"Deleting Subtopic",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>X(m,x)})},L=m=>{c(m),f(!0)},Y=async m=>{n([m,...t]),a.length===t.length&&i([m,...a])},j=async m=>{n(t.map(x=>x.id===m.id?m:x)),i(a.map(x=>x.id===m.id?m:x))},b=m=>{const x=t.filter(_=>_.id===parseInt(m));i(x)},O=()=>e.jsx(xa,{description:"No topic Registered ..."}),w=m=>m.subtopics.map(x=>e.jsx(pl,{extra:[e.jsx("div",{style:{right:0,zIndex:99999},children:e.jsx(ve,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(Ae,{}),onClick:()=>p("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(B.Item,{icon:e.jsx(it,{}),onClick:()=>U(x.id,m.id),disabled:!r.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:_=>_.preventDefault(),children:e.jsx(ke,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})],header:e.jsx("div",{children:e.jsxs("span",{children:[x.title,x.minutes>0&&e.jsxs(se,{color:"green",children:[x.minutes," ",x.minutes>1?"Mins":"Min"]})]})}),children:e.jsx("div",{dangerouslySetInnerHTML:{__html:x.description}})},x.id));return o.useEffect(()=>{M(S)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Q,{children:[e.jsx(K,{span:6,children:e.jsxs(De,{style:{marginRight:5},children:[t.length===0&&e.jsx(e.Fragment,{children:O()}),e.jsx(fl,{multiple:!0,defaultExpandedKeys:[],onExpand:(m,x)=>{const _=x.node.key;if(_&&_.toString().includes("topic")){z(_);const V=_.toString().split("-")[1];b(V)}else if(!(_&&_.toString().includes("sub")))i(t);else{const V=_.toString().split(":")[0];z(V);const ne=V.toString().split("-")[1];b(ne)}},children:t.map((m,x)=>e.jsx(zr,{icon:e.jsx(xr,{}),title:m.title,children:m.subtopics.map(_=>e.jsx(zr,{icon:e.jsx(xr,{}),title:_.title},"topic-"+m.id+":sub-"+_.id))},"topic-"+m.id))})]})}),e.jsxs(K,{span:18,children:[e.jsxs(Q,{children:[e.jsx(K,{span:12,children:e.jsx(k,{layout:"vertical",form:T,onFinish:m=>{D(0),M(0,m.key,!0)},children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Topics(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{icon:e.jsx(qt,{}),size:"large",onClick:d,disabled:!r.canManage,children:"Add Topic"})})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[a.length>0?e.jsx(Q,{align:"top",children:a.map((m,x)=>e.jsx(K,{span:24,style:{marginTop:x===0?0:10},children:e.jsxs(De,{hoverable:m.isActive,style:{marginRight:10},title:e.jsxs("div",{children:[e.jsxs("span",{children:[e.jsx("span",{style:{fontSize:22},children:m.title}),m.minutes>0&&e.jsx("span",{style:{marginLeft:10},children:e.jsx(_e,{color:"green",title:e.jsxs(e.Fragment,{children:[e.jsxs(se,{children:["Starts:"," ",ce(m.startDate).format("DD/MM/YYYY hh:mm a")]}),e.jsxs(se,{children:["Ends:"," ",ce(m.endDate).format("DD/MM/YYYY hh:mm a")]})]}),children:e.jsxs(se,{color:"green",children:[m.minutes," ",m.minutes>1?"Mins":"Min"]})})})]}),e.jsx(Te,{style:{right:0,position:"absolute"},children:e.jsx(ve,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(tn,{}),disabled:!m.canManage,children:e.jsx("a",{onClick:()=>L(m),children:"Add Subtopics"})}),e.jsx(B.Item,{icon:e.jsx(Br,{}),disabled:!0,children:e.jsx("a",{onClick:()=>L(m),children:"Add Documents"})}),e.jsx(B.Item,{icon:e.jsx(ga,{}),disabled:!0,children:e.jsx("a",{onClick:()=>L(m),children:"Add Videos"})}),e.jsx(B.Item,{icon:e.jsx(hl,{}),disabled:!0,children:e.jsx("a",{onClick:()=>L(m),children:"Add Audios"})}),e.jsx(B.Item,{icon:e.jsx(Ae,{}),onClick:()=>p("Under construction"),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Report"})}),e.jsx(B.Item,{icon:e.jsx(it,{}),onClick:()=>I(m.id),disabled:!r.canManage,children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Remove"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:_=>_.preventDefault(),children:e.jsx(ke,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})})]}),children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:m.description}}),m.subtopics.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsxs(K,{span:24,style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:20,fontWeight:"bolder"},children:"Subtopics"}),m.canManage&&e.jsx(G,{disabled:!m.canManage,icon:e.jsx(ya,{}),onClick:()=>L(m),children:"Add Subtopic"})]})}),e.jsx(nn,{defaultActiveKey:["1"],accordion:!0,children:w(m)})]})]})}))}):e.jsx(De,{children:e.jsx(Q,{justify:"center",children:e.jsx(K,{children:O()})})}),C&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{onClick:()=>M(S+1),disabled:!C,children:"Load More"})})]})]})]}),e.jsx(ae,{title:"Adding Topics",open:v,onClose:m=>l(m),width:P?"100vw":"50vw",children:e.jsx(ul,{darasa:r.id,onFinish:Y})}),e.jsx(ae,{title:"Add Subtopics to "+(s==null?void 0:s.title),open:g,onClose:m=>f(m),width:P?"100vw":"50vw",children:e.jsx(ml,{topic:s,onFinish:j})})]})},yl=r=>{o.useState();const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1),[h,u]=o.useState(0),[S,D]=o.useState(0),[E,A]=o.useState(!0),[R]=k.useForm();he(),o.useState(!1),o.useState(!1);const y=async(C,N="",T=!1)=>{const{data:q}=await W.custom({url:"",method:"get",meta:{operation:"darasaOrders",variables:{page:{value:C,type:"Int",required:!0},key:{value:N,type:"String",required:!1},darasaId:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},paid:{value:!0,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","receiptNumber","phone","amount","paymentDate","canDelete","canEdit","canManage",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(z=>(p.error("Error fetching Class Payments"),{data:null})).then(z=>z);console.log(q),q&&(D(q.total),u(q.pages),c(q.page),A(q.hasNext),n(q.results)),i(!1)};return o.useEffect(()=>{y(s)},[]),a?e.jsx(e.Fragment,{children:e.jsx(Ie,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsx(K,{span:12,children:e.jsx(k,{layout:"vertical",form:R,onFinish:C=>{c(0),y(0,C.key,!0)},children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Payment(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,locale:{emptyText:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(ge,{style:{fontSize:20}})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("p",{children:"No Payments found"})})]})},renderItem:C=>e.jsx(ee.Item,{children:e.jsx(ee.Item.Meta,{avatar:e.jsx(je,{src:C.user.pic}),title:e.jsxs("a",{children:[C.user.fullName,e.jsxs(se,{color:"green",style:{marginLeft:10},children:[C.amount," TSH"]})]}),description:C.user.email})},C.id)}),E&&e.jsx("div",{style:{textAlign:"center",marginTop:12},children:e.jsx("button",{onClick:()=>{y(s+1)},children:"Load More"})})]})]})},xl=r=>{const[t,n]=o.useState(!0),[a,i]=o.useState([]);k.useForm();const s=async(h,u="",S=!1)=>{n(!0),await W.custom({url:"",method:"get",meta:{operation:"darasaOrders",variables:{page:{value:h,type:"Int",required:!0},key:{value:u,type:"String",required:!1},darasaId:{value:parseInt(r.darasa===void 0?"0":r.darasa.toString()),type:"Int",required:!0},paid:{value:!0,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","receiptNumber","phone","amount","paymentDate","canDelete","canEdit","canManage",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(D=>(p.error("Error getting supported carriers"),{data:null})).then(D=>D),n(!1)},c=[{title:"Student Name",dataIndex:"studentName",key:"studentName",rebnder:(h,u)=>e.jsx(e.Fragment,{children:u.darasa.user.fullName})},{title:"Receipt Number",dataIndex:"receiptNumber",key:"receiptNumber",render:(h,u)=>e.jsx(e.Fragment,{children:u.receiptNumber})},{title:"Amount",dataIndex:"amount",key:"amount",render:(h,u)=>e.jsx(e.Fragment,{children:u.amount})}];return o.useEffect(()=>{s(1)},[r.randKey]),e.jsx(e.Fragment,{children:e.jsx(an,{loading:t,dataSource:a,columns:c,locale:{emptyText:"No Payments yet"}})})},vl=r=>{const[t,n]=o.useState(!1);k.useForm();const a=async()=>{await W.custom({url:"",method:"get",meta:{operation:"paymentSupportedTelecomCarriers",variables:{},fields:[{results:["id","name"]}]}}).catch(i=>(p.error("Error getting supported carriers"),{data:null})).then(i=>i)};return o.useEffect(()=>{a()},[r.randKey]),e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(Q,{children:e.jsxs(K,{span:24,children:[e.jsx(va,{title:"Total Amount to be Disbursed (Approximate)",value:112893,precision:2}),e.jsx(G,{style:{marginTop:16},type:"primary",onClick:()=>n(!0),children:"View Details"})]})})}),e.jsx(Ct,{title:"Disbursement Details",anchor:"right",width:"40vw",onClose:i=>n(i),open:t,children:e.jsx(xl,{darasa:r.darasa,randKey:Math.random()})})]})},jl=r=>{o.useState();const[t,n]=o.useState([]),[a,i]=o.useState(!0),[s,c]=o.useState(1),[h,u]=o.useState(0),[S,D]=o.useState(0),[E,A]=o.useState(!0),[R]=k.useForm();he();const[y,C]=o.useState(!1);o.useState(!1);const N=async(T,q="",z=!1)=>{const{data:H}=await W.custom({url:"",method:"get",meta:{operation:"darasaOrderDisbursements",variables:{page:{value:T,type:"Int",required:!0},key:{value:q,type:"String",required:!1},darasaId:{value:parseInt(r.id===void 0?"0":r.id.toString()),type:"Int",required:!0},paid:{value:!0,type:"Boolean",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","receiptNumber","disbursementNumber","disbursementDate","status","amount","canDelete","canEdit","canManage",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},{darasa:["id","name","code","description","totalStudents",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","canEdit","canDelete","updated","isActive","isAuthor"]}]}]}}).catch(P=>(p.error("Error fetching Class Disbursements"),{data:null})).then(P=>P);console.log(H),H&&(D(H.total),u(H.pages),c(H.page),A(H.hasNext),n(H.results)),i(!1)};return o.useEffect(()=>{N(s)},[]),a?e.jsx(e.Fragment,{children:e.jsx(Ie,{loading:a,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(Q,{children:[e.jsx(K,{span:12,children:e.jsx(k,{layout:"vertical",form:R,onFinish:T=>{c(0),N(0,T.key,!0)},children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Payment(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:12,style:{textAlign:"right"},children:e.jsx(G,{size:"large",disabled:!r.canManage,icon:e.jsx(ja,{}),onClick:()=>C(!0),children:"Create Disbursement"})})]}),e.jsxs("div",{id:"scrollableDiv",style:{height:"74vh",overflow:"auto"},children:[e.jsx(ee,{itemLayout:"horizontal",dataSource:t,locale:{emptyText:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(ge,{style:{fontSize:20}})}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("p",{children:"No Disbursement found"})})]})},renderItem:T=>e.jsxs(ee.Item,{children:[e.jsx(ee.Item.Meta,{avatar:e.jsx(je,{src:T.user.pic}),title:e.jsxs("a",{children:[T.user.fullName,e.jsxs(se,{color:"green",style:{marginLeft:10},children:[T.amount," TSH"]})]}),description:T.user.email}),"first"]},T.id)}),E&&e.jsx("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:e.jsx(G,{onClick:()=>N(s+1),disabled:!E,children:"Load More"})})]}),e.jsx(ae,{title:"Create Disbursement",open:y,width:"50vw",onClose:T=>C(T),children:e.jsx(vl,{darasa:r.id,randKey:Math.random()})})]})},{TabPane:Ee}=rn,bl=r=>{const[t,n]=o.useState(),[a,i]=o.useState(!0),[s,c]=o.useState("1"),{push:h}=he(),u=Ut(),S=async D=>{const{data:E}=await W.custom({url:"",method:"get",meta:{operation:"darasa",variables:{id:{value:parseInt(D.toString()),type:"Int",required:!0}},fields:["id","name","code","created","canEdit","canDelete","canManage","updated","isActive","isAuthor","isConnected","isBlocked","payable","price","startDate","endDate"]}}).catch(()=>(p.error("Error fetching darasa"),{data:null})).then(A=>A);E&&(n(E),i(!1))};return o.useEffect(()=>{S(u.id),localStorage.getItem("currentClass")===u.id.toString()?c(localStorage.getItem("classCurrentTabIndex")??"1"):(localStorage.setItem("currentClass",u.id.toString()),c("1"))},[u.id]),e.jsx(e.Fragment,{children:e.jsxs(ue,{spinning:a,children:[e.jsx("div",{style:{marginTop:5,marginBottom:5},children:e.jsxs(Ye,{children:[e.jsx(Ye.Item,{children:e.jsx("a",{onClick:()=>h("/oclass"),children:"Home"})}),e.jsx(Ye.Item,{children:e.jsx("a",{onClick:()=>h("/oclass"),children:"Classes"})}),e.jsxs(Ye.Item,{children:["Class Session",e.jsx(Lt,{}),t!=null&&t.name?e.jsxs("span",{style:{color:"orange"},children:[t==null?void 0:t.name," - ","{"+(t==null?void 0:t.code)+"}"]}):e.jsx(e.Fragment,{})]})]})}),(t==null?void 0:t.isBlocked)&&e.jsx(Je,{severity:"warning",sx:{fontSize:18},children:"You have been blocked from this class, please contact the class owner for more information."}),!(t!=null&&t.isBlocked)&&e.jsx("div",{style:{marginTop:10,background:"white",padding:10},children:e.jsxs(rn,{type:"card",tabBarExtraContent:e.jsx(G,{icon:e.jsx(ba,{}),disabled:!(t!=null&&t.canManage),children:"Configs"}),activeKey:s,onTabClick:D=>{c(D.toString()),localStorage.setItem("classCurrentTabIndex",D)},children:[e.jsx(Ee,{tab:"Class Feeds",children:e.jsx(dl,{id:u.id,canManage:t==null?void 0:t.canManage})},"1"),e.jsx(Ee,{tab:"Files",children:e.jsx(Wa,{id:u.id,canManage:t==null?void 0:t.canManage})},"2"),e.jsx(Ee,{tab:"Connected Drives",children:e.jsx(Ya,{id:u.id,canManage:t==null?void 0:t.canManage})},"3"),e.jsx(Ee,{tab:"Topics",children:e.jsx(gl,{id:u.id,canManage:t==null?void 0:t.canManage})},"12"),e.jsx(Ee,{tab:"Resources Links",children:e.jsx($a,{id:u.id,canManage:t==null?void 0:t.canManage})},"4"),e.jsx(Ee,{tab:"Videos",children:e.jsx(ws,{id:u.id,canManage:t==null?void 0:t.canManage})},"5"),e.jsx(Ee,{tab:"Virtual Sessions",disabled:!1,children:e.jsx(Ho,{id:u.id,canManage:t==null?void 0:t.canManage})},"6"),e.jsx(Ee,{tab:"Assignments",disabled:!1,children:e.jsx(za,{id:u.id,canManage:t==null?void 0:t.canManage})},"7"),e.jsx(Ee,{tab:"Announcements",children:e.jsx(Va,{id:u.id,canManage:t==null?void 0:t.canManage})},"8"),e.jsx(Ee,{tab:"Students",children:e.jsx(Xa,{id:u.id,canManage:t==null?void 0:t.canManage})},"9"),(t==null?void 0:t.payable)&&(t==null?void 0:t.canManage)&&e.jsxs(e.Fragment,{children:[e.jsx(Ee,{tab:"Payments",children:e.jsx(yl,{id:u.id,canManage:t==null?void 0:t.canManage})},"10"),e.jsx(Ee,{tab:"Disbursements",children:e.jsx(jl,{id:u.id,canManage:t==null?void 0:t.canManage})},"11")]})]})})]})})},Nn=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState(!1),[s,c]=o.useState(""),[h,u]=o.useState([]),[S,D]=o.useState("");o.useState(!1),o.useState(!1);const[E]=k.useForm(),A=async()=>{const{data:y}=await W.custom({url:"",method:"get",meta:{operation:"paymentSupportedTelecomCarriers",variables:{},fields:[{results:["id","name"]}]}}).catch(C=>(p.error("Error getting supported carriers"),{data:null})).then(C=>C);if(y){const C=y.results,N=[];C.forEach(T=>{N.push(T.name)}),u(N)}},R=async y=>{n(!0);const{data:C}=await W.custom({url:"",method:"post",meta:{operation:"validateMobilePhoneNumber",variables:{phone:{value:y,type:"String",required:!0}},fields:["success","message","carrier","formattedPhone"]}}).catch(N=>(p.error("Error Validating Mobile Phone Number"),{data:null})).then(N=>N);return C&&(i(C.success),C.success||(c(C.message),D(C.carrier))),n(!1),C};return o.useEffect(()=>{A()},[r.randKey]),e.jsxs("div",{children:[e.jsxs(fe,{title:"",column:1,children:[e.jsx(fe.Item,{label:"Class Name",children:r.darasa.name}),e.jsx(fe.Item,{label:"Class Code",children:r.darasa.code}),e.jsx(fe.Item,{label:"Cost",children:e.jsxs("span",{style:{fontSize:22},children:[r.darasa.price.toLocaleString(),"/= Tsh"]})}),e.jsx(fe.Item,{label:"Description",children:r.darasa.description})]}),e.jsxs(k,{layout:"vertical",form:E,onFinish:y=>{},requiredMark:!0,autoComplete:"off",children:[e.jsx(k.Item,{name:"phone",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Mobile Phone Number"}),S.length>0&&e.jsx(se,{color:"green",style:{marginLeft:10},children:S}),t&&e.jsx(ue,{spinning:t})]}),rules:[{required:!0,type:"string",message:"Required"},{validator:async(y,C)=>{if(C.length>=10){if(!t){const N=await R(C).then(T=>T);if(N!=null&&N.success)D(N.carrier),i(!0);else return D(""),Promise.reject(N==null?void 0:N.message)}}else i(!1)}}],children:e.jsx(re,{size:"large",placeholder:"Mobile Phone Number ..."})}),h.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{children:"Supported Payment Merchants"}),e.jsx("span",{children:h.map(y=>e.jsx(se,{color:"red",children:y}))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",disabled:!a,children:"Pay"})})]})]})},Sl=()=>{const[r,t]=o.useState(!0),[n,a]=o.useState(!1),[i,s]=o.useState(),[c,h]=o.useState(!1),u=Ut(),S=async E=>{t(!0);const{data:A}=await W.custom({url:"",method:"post",meta:{operation:"checkDarasaConnected",variables:{id:{value:parseInt(E.toString()),type:"Int",required:!0}},fields:["success","message",{darasa:["id","name","code","created","canEdit","canDelete","canManage","updated","isActive","isAuthor","isConnected","payable","price","startDate","endDate",{user:["id","firstName","middleName","lastName","fullName","pic"]}]}]}}).catch(R=>({data:null})).then(R=>R);t(!1),A&&(a(A.success),s(A.darasa))},D=async E=>{const{data:A}=await W.custom({url:"",method:"post",meta:{operation:"connectDarasa",variables:{id:{value:parseInt(E.toString()),type:"Int",required:!0}},fields:["success","message"]}}).catch(()=>({data:null})).then(R=>R);A?(a(A.success),s(A.darasa),p.success(A.message),A.success&&S(u.id)):p.error(A.message)};return o.useEffect(()=>{S(u.id)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginTop:0},children:[r&&e.jsx(e.Fragment,{children:e.jsx(Q,{children:e.jsx(K,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(ue,{tip:"Checking Connection",size:"large",style:{color:"red"},children:e.jsx("div",{className:"content",style:{height:"50vh",width:"100vh"}})})})})}),n&&e.jsx(bl,{}),!n&&!r&&e.jsxs(e.Fragment,{children:[e.jsx(De,{children:e.jsxs(fe,{title:"Class Info's",children:[e.jsx(fe.Item,{label:"Class Name/Title",children:i==null?void 0:i.name}),e.jsx(fe.Item,{label:"Class Code",children:i==null?void 0:i.code}),e.jsx(fe.Item,{label:"Created By",children:e.jsx("a",{children:i==null?void 0:i.user.fullName})}),(i==null?void 0:i.startDate)&&e.jsx(fe.Item,{label:"Start Date",children:ce(i==null?void 0:i.startDate).format("YYYY-MM-DD")}),(i==null?void 0:i.endDate)&&e.jsx(fe.Item,{label:"End Date",children:ce(i==null?void 0:i.endDate).format("YYYY-MM-DD")}),(i==null?void 0:i.payable)&&e.jsxs(fe.Item,{label:"Price",children:[i==null?void 0:i.price.toLocaleString(),"/= Tsh"]})]})}),e.jsx(Q,{children:e.jsxs(K,{span:24,style:{display:"flex",justifyContent:"center"},children:[(i==null?void 0:i.payable)&&e.jsx(G,{size:"large",onClick:()=>h(!0),children:"Pay for This Class"}),!(i!=null&&i.payable)&&e.jsx(lt,{title:"Are you sure to Connect/Join to this Class",onConfirm:()=>D(u.id),okText:"Yes",cancelText:"No",overlayStyle:{zIndex:9999},children:e.jsx(G,{size:"large",children:"Connect/Join"})})]})})]})]}),e.jsx(ae,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Purchasing"}),e.jsx("span",{style:{marginLeft:10,fontWeight:"bolder"},children:i==null?void 0:i.name})]}),width:"35vw",open:c,onClose:E=>h(E),children:e.jsx(Nn,{darasa:i,randKey:Math.random()})})]})},Cl=()=>e.jsx(Sl,{}),wl=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx(Ht,{mode:"connected"})}),Dl=()=>e.jsx(wl,{}),{Meta:Tl}=De,kl=r=>{const[t,n]=o.useState([]),[a,i]=o.useState();o.useState();const[s,c]=o.useState(!1),[h,u]=o.useState(!1),[S,D]=o.useState(!0),[E,A]=o.useState(1),[R,y]=o.useState(0),[C,N]=o.useState(!0),[T]=k.useForm();he();const z=!en.useBreakpoint().lg,H=l=>{i(l),u(!0)},P=l=>{i(l),c(!0)},v=async(l,g="",f=!1)=>{const{data:d}=await W.custom({url:"",method:"get",meta:{operation:"madarasaToBuy",variables:{page:{value:l,type:"Int",required:!0},key:{value:g,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","price","cover","created","canEdit","canDelete","canManage","updated","isActive","isAuthor","isConnected"]}]}}).catch(()=>(p.error("Error getting darasas"),{data:null})).then(M=>M);d&&(y(d.total),A(d.page),N(d.hasNext),n(d.results)),D(!1)};return o.useEffect(()=>{v(E)},[]),S?e.jsx(e.Fragment,{children:e.jsx(Ie,{loading:S,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{style:{display:"flex",justifyContent:"center"},children:e.jsx(K,{span:z?24:10,children:e.jsx(k,{layout:"vertical",form:T,onFinish:l=>{A(0),v(0,l.key,!0)},children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Classes...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})})}),e.jsx(zt,{dataLength:R,next:()=>v(E),hasMore:C,loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(ue,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:t.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:t.length>0?e.jsx(Q,{align:"top",children:t.map(l=>e.jsx(K,{span:z?24:8,children:e.jsxs(De,{hoverable:l.isActive,style:{marginRight:10,marginBottom:10},actions:[e.jsx(G,{size:"large",onClick:()=>P(l),children:"Read More"}),e.jsx(G,{size:"large",onClick:()=>H(l),children:"Buy Now"})],children:[e.jsx("div",{style:{height:window.innerHeight/3,background:"url("+l.cover+")",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",marginBottom:10,borderRadius:5}}),e.jsx(Tl,{title:e.jsx(e.Fragment,{children:e.jsxs(Te,{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("h2",{children:[e.jsx(_e,{title:l.name,children:tr(l.name,20)}),e.jsx(se,{color:"red",style:{marginLeft:10},children:l.code})]}),e.jsxs("span",{style:{fontSize:24},children:[l.price,"/="]})]})}),description:e.jsx(e.Fragment,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:tr(l.description,100)}})})})]})}))}):e.jsx(Je,{severity:"info",sx:{fontSize:18},children:"No Classes Found"})}),e.jsx(Ct,{title:a==null?void 0:a.name,width:"50vw",anchor:"right",onClose:l=>c(l),open:s,children:e.jsxs(fe,{title:"",column:1,children:[e.jsx(fe.Item,{label:"Class Name",children:a==null?void 0:a.name}),e.jsx(fe.Item,{label:"Class Code#",children:a==null?void 0:a.code}),e.jsxs(fe.Item,{label:"Cost",children:[a==null?void 0:a.price," Tsh"]}),e.jsx(fe.Item,{label:"Description",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:a==null?void 0:a.description}})}),e.jsx(fe.Item,{label:"",children:e.jsx(G,{size:"large",onClick:()=>H(a),children:"Buy Now"})})]})}),e.jsx(ae,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Purchasing"}),e.jsx("span",{style:{marginLeft:10,fontWeight:"bolder"},children:a==null?void 0:a.name})]}),width:"35vw",open:h,onClose:l=>u(l),children:e.jsx(Nn,{darasa:a,randKey:Math.random()})})]})},Pl=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx(kl,{randKey:Math.random()})}),Il=()=>e.jsx(Pl,{}),Al=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx(Ht,{mode:"my"})}),Ml=()=>e.jsx(Al,{}),Ol=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState(0),[s,c]=o.useState(0),[h,u]=o.useState(1),[S,D]=o.useState(25),[E,A]=o.useState(""),[R,y]=o.useState([]),[C,N]=o.useState(),[T]=k.useForm(),[q,z]=o.useState(!1);he();const H=async g=>{N(g),z(!0)},P=async(g,f="",d=25)=>{n(!0);const{data:M}=await W.custom({url:"",method:"get",meta:{operation:"myBooksOrders",variables:{page:{value:g,type:"Int",required:!0},key:{value:f,type:"String",required:!1},pageSize:{value:d,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","price","paymentDate","receiptNumber","isPaid",{book:["id","title","description","file","cover","price","created","updated","isActive","isPublic","hasPurchaseOrder","canEdit","canDelete","canManage",{author:["id","firstName","lastName","middleName","fullName","email","pic"]}]},{user:["id","firstName","middleName","lastName"]},{bill:["id","billNumber"]},"isActive","created","updated","canDelete","canManage"]}]}}).catch($=>(p.error("Error getting Bills"),{data:null})).then($=>$);M&&(i(M.total),c(M.pages),u(M.page),y(M.results)),n(!1)},v=async g=>{const{data:f}=await W.custom({url:"",method:"post",meta:{operation:"deleteBookOrder",variables:{id:{value:g,type:"Int",required:!0}},fields:["success","message"]}}).catch(d=>(p.error("Error deleting Order"),{data:null})).then(d=>d);f&&y(R.filter(d=>d.id!==g))},l=[{title:"Bill#",dataIndex:"billNumber",fixed:!0,render:(g,f,d)=>{var M;return e.jsx("span",{children:e.jsx("a",{children:(M=f==null?void 0:f.bill)==null?void 0:M.billNumber})})}},{title:"Book Title",dataIndex:"bookTitle",fixed:!0,render:(g,f,d)=>{var M;return e.jsx("span",{children:e.jsx("a",{children:(M=f==null?void 0:f.book)==null?void 0:M.title})})}},{title:"Bill Amount",dataIndex:"billAmount",fixed:!0,render:(g,f,d)=>e.jsxs("span",{children:[f.price," Tsh"]})},{title:"Paid",dataIndex:"isPaid",fixed:!0,render:(g,f,d)=>e.jsx("span",{children:f.isPaid?e.jsx(se,{color:"green",children:"Yes"}):e.jsx(se,{color:"red",children:"No"})})},{title:"Created",dataIndex:"created",render:(g,f,d)=>e.jsx(e.Fragment,{children:e.jsx("span",{children:e.jsx(at,{date:new Date(f.created)})})})},{title:"Status",dataIndex:"isActive",render:(g,f,d)=>e.jsx("a",{children:f!=null&&f.isActive?e.jsx("span",{style:{color:"green"},children:"Active"}):e.jsx("span",{style:{color:"red"},children:"Inactive"})})},{title:"",dataIndex:"action",render:(g,f,d)=>e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[!f.isPaid&&e.jsx(lt,{title:"Are you sure to delete this Order?",onConfirm:()=>v(f.id),okText:"Yes",cancelText:"No",disabled:!(f!=null&&f.canDelete),overlayStyle:{zIndex:9999},children:e.jsx(G,{icon:e.jsx(Ue,{}),disabled:!(f!=null&&f.canDelete),size:"large"})}),f.isPaid&&e.jsx(_e,{title:"Print Receipt",children:e.jsx(G,{icon:e.jsx(Ca,{}),size:"large"})}),!f.isPaid&&e.jsx(_e,{title:"View Order Details",children:e.jsx(G,{icon:e.jsx(tn,{}),size:"large",onClick:()=>H(f)})})]})}];return o.useEffect(()=>{P(h,"",25)},[r.randKey]),e.jsxs(e.Fragment,{children:[e.jsx(Sa,{offsetTop:75,children:e.jsx(Q,{style:{display:"flex",justifyContent:"center",marginTop:20},children:e.jsx(K,{span:10,children:e.jsx(k,{layout:"vertical",form:T,onFinish:g=>{P(1,g.key,25)},children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Bill(s)...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})})})}),e.jsx(Q,{children:e.jsx(K,{span:24,children:e.jsx(an,{loading:t,columns:l,dataSource:R,pagination:{onChange:(g,f)=>{D(f),P(g,E,f)},total:a,pageSize:S,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})})}),e.jsx(ae,{title:"Order Details & Payment",open:q,width:"50vw",onClose:g=>z(g),children:e.jsx(ka,{book:C==null?void 0:C.darasa})})]})},El=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx(Ol,{randKey:Math.random()})}),Nl=()=>e.jsx(El,{}),{Option:_l}=Ne,Hr=[{value:"",label:"Select Duration Type"},{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"}],Fl=r=>{const[t,n]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs(k,{layout:"vertical",form:r.form,onFinish:a=>{a.description=t,r.onFinish(a),n("")},requiredMark:!1,children:[e.jsx(k.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input name"}],children:e.jsx(re,{size:"large",placeholder:"Enter Name ..."})}),e.jsx(k.Item,{name:"startDate",label:"start Date",rules:[{required:!0,type:"date",message:"Please select date"}],children:e.jsx(Qe,{showTime:{format:"HH:mm"},disabledDate:a=>{const i=ce().format("YYYY-MM-DD");return a&&a<ce(i,"YYYY-MM-DD")},style:{width:"100%"},popupStyle:{zIndex:9999}})}),e.jsxs(Q,{children:[e.jsx(K,{span:12,children:e.jsx(k.Item,{name:"duration",label:"Duration",style:{width:"100%"},rules:[{required:!0,type:"integer",message:"Enter Duration"}],children:e.jsx(We,{min:1,defaultValue:1,style:{width:"100%"},size:"large"})})}),e.jsx(K,{span:12,children:e.jsx(k.Item,{name:"durationType",label:"Duration Type",style:{width:"100%"},rules:[{required:!0,type:"string",message:"Please select duration type"}],children:e.jsx(Ne,{defaultValue:Hr[0].value,size:"large",style:{width:"100%"},dropdownStyle:{zIndex:9999},children:Hr.map(a=>e.jsx(_l,{children:a.label},a.value))})})})]}),e.jsx(k.Item,{name:"isPublic",label:"Availability",rules:[{required:!1,type:"boolean"}],children:e.jsx(Ft,{defaultChecked:!0,disabled:!0,checked:!0,value:!0,children:"Public Available"})}),e.jsx("h3",{children:"Description"}),e.jsx(Fe.CKEditor,{editor:Re,data:t,onReady:a=>{a.editing.view.change(i=>{i.setStyle("min-height","100px",a.editing.view.document.getRoot())})},onChange:(a,i)=>{const s=i.getData();n(s)},config:{toolbar:{items:["bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","-","fontSize","fontFamily","fontColor","fontBackgroundColor","highlight","|","alignment","|","EmojiPanel"],shouldNotGroupWhenFull:!0},fontFamily:{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0}}}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx(G,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},Rl=r=>{const[t,n]=o.useState(!1),[a,i]=o.useState([]),[s,c]=o.useState(),[h,u]=o.useState(),[S,D]=o.useState(!0),[E,A]=o.useState(1),[R,y]=o.useState(0),[C,N]=o.useState(!0),[T]=k.useForm(),[q,z]=o.useState(!1),{push:H}=he(),[P]=k.useForm(),[v,l]=o.useState(!1),[g,f]=o.useState(!1),d=b=>{c(b),f(!0)},M=async b=>{const{data:O}=await W.custom({url:"",method:"post",meta:{operation:"connectClass",variables:{id:{value:b,type:"Int",required:!0}},fields:["success","message"]}}).catch(w=>(p.error("Error connecting to class"),{data:null})).then(w=>w);O&&(O.success?(l(!1),u(null),p(O.message),i(a.filter(w=>w.id!==b))):p.error(O.message))},$=async b=>{const{data:O}=await W.custom({url:"",method:"post",meta:{operation:"createVirtualClass",variables:{name:{value:b.name,type:"String",required:!0},description:{value:b.description,type:"String",required:!0},duration:{value:b.duration,type:"Int",required:!0},durationType:{value:b.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:b.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(w=>(p.error("Error creating class"),{data:null})).then(w=>w);O&&(O.success?(p.success(O.message),z(!1),i([O.virtual,...a])):p.error(O.message))},X=async b=>{const{data:O}=await W.custom({url:"",method:"post",meta:{operation:"editVirtualClass",variables:{id:{value:b.id,type:"Int",required:!0},name:{value:b.name,type:"String",required:!0},description:{value:b.description,type:"String",required:!0},duration:{value:b.duration,type:"Int",required:!0},durationType:{value:b.durationType.toUpperCase(),type:"String",required:!0},startDate:{value:b.startDate,type:"DateTime",required:!0},isPublic:{value:!0,type:"Boolean",required:!0}},fields:["success","message",{virtual:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(w=>(p.error("Error editing class"),{data:null})).then(w=>w);O&&(O.success?(p.success(O.message),i(a.map(w=>w.id===O.virtual.id?O.virtual:w)),f(!1)):p.error(O.message))},I=()=>{P.resetFields(),z(!0)},U=async b=>{const{data:O}=await W.custom({url:"",method:"post",meta:{operation:"deleteVirtualClass",variables:{id:{value:b,type:"Int",required:!0}},fields:["success","message"]}}).catch(w=>(p.error("Error deleting class"),{data:null})).then(w=>w);O&&(O.success?(p.success(O.message),i(a.filter(w=>w.id!==b))):p.error(O.message))},L=b=>{pe.confirm({title:"Deleting Virtual Class",icon:e.jsx(ge,{}),content:"Are you sure ...",okText:"Delete",cancelText:"Cancel",onOk:()=>U(b)})},Y=async(b,O="",w=!1)=>{const{data:m}=await W.custom({url:"",method:"get",meta:{operation:"publicVirtualClasses",variables:{page:{value:b,type:"Int",required:!0},key:{value:O,type:"String",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","description","startDate","endDate","duration","durationType","token","canJoin",{darasa:["id","name","code","description"]},{author:["id","firstName","lastName","middleName","fullName","email","pic"]},"created","canEdit","canDelete","canManage","updated","isActive"]}]}}).catch(x=>(p.error("Error fetching classes"),{data:null})).then(x=>x);m&&(y(m.total),A(m.page),N(m.hasNext),i(m.results)),D(!1)},j=async()=>{const{data:b}=await W.custom({url:"",method:"get",meta:{operation:"darasaAuth",variables:{},fields:["auth"]}}).catch(O=>(p.error("Error getting darasa auth"),{data:null})).then(O=>O);b&&n(b.auth.create_virtual_classes)};return o.useEffect(()=>{j(),Y(E)},[]),S?e.jsx(e.Fragment,{children:e.jsx(Ie,{loading:S,active:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(Q,{children:[e.jsx(K,{span:20,children:e.jsx(k,{layout:"vertical",form:T,onFinish:b=>{A(0),Y(0,b.key,!0)},children:e.jsx(k.Item,{name:"key",children:e.jsx(re,{size:"large",placeholder:"Search Public Virtual Classes...",prefix:e.jsx(me,{}),autoComplete:"off",allowClear:!0})})})}),e.jsx(K,{span:4,style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(G,{icon:e.jsx(Rt,{}),size:"large",onClick:()=>I(),disabled:!t,children:"Create Virtual Class"})})]}),e.jsx(zt,{dataLength:R,next:()=>Y(E),hasMore:C,loader:e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(ue,{})})}),endMessage:e.jsx("p",{style:{textAlign:"center",display:a.length>0?"block":"none"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),children:e.jsx(ee,{loading:!1,itemLayout:"horizontal",loadMore:!1,dataSource:a,renderItem:b=>e.jsx(De,{children:e.jsx(ee.Item,{actions:[e.jsx(ve,{trigger:["click"],overlay:e.jsxs(B,{children:[e.jsx(B.Item,{icon:e.jsx(Vt,{}),disabled:!b.canJoin,onClick:()=>H("/oclass/virtual/class/session/"+b.id+"/"+b.token),children:e.jsx("a",{children:"Join"})}),b.canDelete?e.jsx(B.Item,{disabled:!b.canDelete,icon:e.jsx(Ue,{}),onClick:()=>L(b.id),children:e.jsx("a",{target:"_blank",rel:"noopener noreferrer",children:"Delete"})}):e.jsx(e.Fragment,{}),e.jsx(B.Item,{icon:e.jsx(St,{}),disabled:!b.canEdit,onClick:()=>d(b),children:e.jsx("a",{children:"Edit"})})]}),overlayStyle:{zIndex:9999},children:e.jsx("a",{className:"ant-dropdown-link",onClick:O=>O.preventDefault(),children:e.jsx(ke,{style:{color:"orange",fontSize:28,fontWeight:"bold"}})})})],children:e.jsx(Ie,{avatar:!0,title:!1,loading:!1,active:!0,children:e.jsx(ee.Item.Meta,{avatar:e.jsx(je,{}),title:e.jsx("a",{onClick:()=>b.canJoin?H("/oclass/virtual/class/session/"+b.id+"/"+b.token):p("You can't join this class"),children:b.name}),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:b.description}),e.jsxs("p",{children:[e.jsxs(se,{color:"green",children:["Start At:"," ",e.jsx("span",{style:{marginLeft:10},children:_t(new Date(b.startDate),"MMMM do, yyyy H:mma")})]}),e.jsxs(se,{color:"green",children:["End In:",e.jsx("span",{style:{marginLeft:10},children:_t(new Date(b.endDate),"MMMM do, yyyy H:mma")})]}),b.canJoin?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx(se,{color:"red",children:"Not Joinable"})})]})]})})})})})})}),e.jsx(ae,{title:"Creating Public Virtual Class",width:"40vw",open:q,onClose:b=>z(b),children:e.jsx(Fl,{form:P,onFinish:$})}),e.jsx(ae,{title:"Connecting "+(h==null?void 0:h.name),open:v,width:"40vw",onClose:b=>l(b),children:e.jsxs(e.Fragment,{children:[e.jsx(sn,{id:h==null?void 0:h.id}),e.jsx(G,{onClick:()=>M(h==null?void 0:h.id),style:{position:"absolute",bottom:0,right:0,marginBottom:10},children:"Connect"})]})}),e.jsx(ae,{title:"Editting "+(s==null?void 0:s.name),width:"40vw",open:g,onClose:b=>f(b),children:e.jsx(Xr,{form:P,darasa:s,onFinish:X})})]})},Ll=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx(Rl,{mode:"connected"})}),ql=()=>e.jsx(Ll,{}),_n="meet.jit.si";var Vl=globalThis&&globalThis.__awaiter||function(r,t,n,a){function i(s){return s instanceof n?s:new n(function(c){c(s)})}return new(n||(n=Promise))(function(s,c){function h(D){try{S(a.next(D))}catch(E){c(E)}}function u(D){try{S(a.throw(D))}catch(E){c(E)}}function S(D){D.done?s(D.value):i(D.value).then(h,u)}S((a=a.apply(r,t||[])).next())})};const Ul=(r,t,n)=>Vl(void 0,void 0,void 0,function*(){return new Promise((a,i)=>{if(window.JitsiMeetExternalAPI)return a(window.JitsiMeetExternalAPI);const s=document.createElement("script"),c=t?`?release=${t}`:"",h=n?`${n}/`:"";s.async=!0,s.src=`https://${r}/${h}external_api.js${c}`,s.onload=()=>a(window.JitsiMeetExternalAPI),s.onerror=()=>i(new Error(`Script load error: ${s.src}`)),document.head.appendChild(s)})});let Pt;const zl=(r=_n,t,n)=>Pt||(Pt=Ul(r,t,n),Pt),Hl=r=>{const t=r.split("/");if(!(t.length<=1))return t[0]};let Yl=0;const Yr=r=>`${r}-${Yl++}`,Wl=({domain:r=_n,roomName:t,configOverwrite:n,interfaceConfigOverwrite:a,jwt:i,invitees:s,devices:c,userInfo:h,release:u,spinner:S,onApiReady:D,onReadyToClose:E,getIFrameRef:A})=>{const[R,y]=o.useState(!0),[C,N]=o.useState(!1),T=o.useRef(),q=o.useRef(),z=o.useRef(null),H=o.useMemo(()=>Yr("jitsiMeeting"),[Yr]);o.useEffect(()=>{zl(r,u,Hl(t)).then(l=>{T.current=l,N(!0)}).catch(l=>console.error(l.message))},[]);const P=o.useCallback(l=>{q.current=new l(r,{roomName:t,configOverwrite:n,interfaceConfigOverwrite:a,jwt:i,invitees:s,devices:c,userInfo:h,release:u,parentNode:z.current}),y(!1),q.current&&(typeof D=="function"&&D(q.current),q.current.on("readyToClose",()=>{typeof E=="function"&&E()}),z.current&&typeof A=="function"&&A(z.current))},[q,z,D,E,A,r,t,n,a,i,s,c,h]);o.useEffect(()=>{C&&!q.current&&T.current&&P(T.current)},[C,P]);const v=o.useCallback(()=>!S||!R||q.current?null:e.jsx(S,{},void 0),[S,q.current]);return e.jsxs(e.Fragment,{children:[v(),e.jsx("div",{id:H,ref:z},H)]},void 0)};globalThis&&globalThis.__rest;const Bl={app_name:"Oclass",api_url:"https://olbongo.co.tz",conference_url:"video.olbongo.co.tz"},$l=r=>{const[t,n]=o.useState(),[a,i]=o.useState(!1),[s,c]=o.useState(!0),[h,u]=o.useState(!0),{push:S}=Qr(),{data:D}=ur(),E=Ut(),A=async()=>{const{data:y}=await W.custom({url:"",method:"get",meta:{operation:"virtual",variables:{id:{value:parseInt(E.id),type:"Int",required:!0}},fields:["id","name","description","startDate","duration","durationType","token",{darasa:["id","name","code","description"]},{author:["id","firstName","middleName","lastName","fullName","pic","email"]},"created","canEdit","canDelete","canManage","updated","isActive"]}}).catch(C=>(p.error("Error fetching virtual class"),{data:null})).then(C=>C);y&&n(y),c(!1)},R=e.jsxs(Ye,{children:[e.jsx(Ye.Item,{children:e.jsx("a",{onClick:()=>S("/oclass"),children:"Home"})}),e.jsx(Ye.Item,{children:e.jsx("a",{onClick:()=>S("/oclass/public/virtual/classes"),children:"Virtual Sessions/Classes"})}),e.jsx(Ye.Item,{children:t==null?void 0:t.name})]});return o.useEffect(()=>{A()},[]),s?e.jsxs(e.Fragment,{children:[R,e.jsx(Q,{align:"middle",children:e.jsx(K,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(ue,{size:"large"})})})]}):a?e.jsxs(e.Fragment,{children:[R,e.jsx("div",{children:e.jsxs(Q,{align:"middle",children:[e.jsx(K,{span:8}),e.jsx(K,{span:8,children:e.jsx(De,{title:t==null?void 0:t.name,bordered:!1,actions:[e.jsx(G,{onClick:()=>window.location.reload(),children:"Re-join"})],children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(t==null?void 0:t.description)??""}})})})]})})]}):e.jsxs(e.Fragment,{children:[R,h&&e.jsxs(Q,{align:"middle",children:[e.jsx(K,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(Te,{direction:"vertical",children:e.jsx(ue,{size:"large"})})}),e.jsx(K,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(Te,{direction:"vertical",children:"Preparing Virtual Conference Connection"})})]}),t&&e.jsx(Wl,{domain:Bl.conference_url,roomName:t.id.toString()+t.token,configOverwrite:{speakerStats:{disabled:!0,disableSearch:!1,order:["role","name","hasLeft"]},breakoutRooms:{hideAddRoomButton:!0,hideAutoAssignButton:!0,hideJoinRoomButton:!0},disableInviteFunctions:!0,hideConferenceSubject:!0,disablePolls:!0,autoKnockLobby:!0,enableLobbyChat:!0,disableModeratorIndicator:!1,disableReactionsModeration:!1,openSharedDocumentOnJoin:!1,startWithAudioMuted:!0,startScreenSharing:!1,enableEmailInStats:!1,enableWelcomePage:!1,readOnlyName:!0,notifications:[],screenshotCapture:{enabled:!0,mode:"recording"},prejoinConfig:{enabled:!0,hideDisplayName:!0,hideExtraJoinButtons:["no-audio","by-phone"]},p2p:{enabled:!0},e2ee:{labels:{labelTooltip:"Tooltip",description:"Description",label:"E2EE",warning:"Warning"},externallyManagedKey:!1}},interfaceConfigOverwrite:{DISABLE_JOIN_LEAVE_NOTIFICATIONS:!1},userInfo:{displayName:D==null?void 0:D.fullName,email:D==null?void 0:D.email},onApiReady:y=>{u(!1),y.addListener("videoConferenceJoined",()=>{}),y.addListener("videoConferenceLeft",()=>{}),y.addListener("participantJoined",C=>{}),y.addListener("participantLeft",C=>{}),y.addListener("onMessageReceived",C=>{}),y.addListener("onMessageSent",C=>{}),y.addListener("onChatMessage",C=>{}),y.addListener("onChatMessageReceived",C=>{}),y.addListener("onChatMessageSent",C=>{})},onReadyToClose:()=>{i(!0)},getIFrameRef:y=>{y.style.height="88vh"}})]})},Gl=()=>e.jsx("div",{style:{marginTop:10},children:e.jsx($l,{mode:"connected"})}),Kl=()=>e.jsx(Gl,{}),lc=r=>{const{page:t}=r;return t==="VirtualClassSessionPage"?e.jsx(Kl,{}):t==="PublicVirtualClassesPage"?e.jsx(ql,{}):t==="OclassOrdersPage"?e.jsx(Nl,{}):t==="MyClassesPage"?e.jsx(Ml,{}):t==="OclassMarketplacePage"?e.jsx(Il,{}):t==="ConnectedClassesPage"?e.jsx(Dl,{}):t==="ClassSessionPage"?e.jsx(Cl,{}):t==="ClassesPage"?e.jsx(Ra,{}):t==="ClassesConnectPage"?e.jsx(_a,{}):t==="DarasaArchivesPage"?e.jsx(Aa,{}):e.jsx("div",{children:"Page not found ..."})};export{lc as DarasaPages};
