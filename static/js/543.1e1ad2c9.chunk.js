"use strict";(self.webpackChunkolbongo=self.webpackChunkolbongo||[]).push([[543],{46543:function(e,n,t){t.r(n),t.d(n,{CurriculumsPage:function(){return S}});var r=t(78164),i=t(43504),s=t(74165),a=t(15861),c=t(29439),u=t(82622),l=t(31752),o=t(11730),d=t(14057),m=t(840),p=t(69239),f=t(87012),x=t(72791),h=t(50333),v=t(80184),j=m.II.TextArea,g=function(e){var n=(0,x.useState)(e.curriculum.isActive),t=(0,c.Z)(n,2),r=t[0],i=t[1];return(0,x.useEffect)((function(){e.form.setFieldsValue({name:e.curriculum.name,description:e.curriculum.description,code:e.curriculum.code,isActive:e.curriculum.isActive})}),[e.form,e.curriculum]),(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(m.l0,{layout:"vertical",form:e.form,onFinish:function(n){n.isActive=r,n.id=parseInt(e.curriculum.id),e.onFinish(n)},requiredMark:!1,children:[(0,v.jsx)(m.l0.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:(0,v.jsx)(m.II,{size:"large",placeholder:"Enter Name ..."})}),(0,v.jsx)(m.l0.Item,{name:"code",label:"Code",rules:[{required:!0,type:"string",message:"Please input Code"}],children:(0,v.jsx)(m.II,{size:"large",disabled:!0,placeholder:"Enter Code ..."})}),(0,v.jsx)(m.l0.Item,{name:"description",label:"Description",rules:[{required:!1,type:"string",message:"Please write Description ..."}],children:(0,v.jsx)(j,{rows:4,placeholder:"Please write Description ..."})}),(0,v.jsx)(m.l0.Item,{name:"isActive",children:(0,v.jsx)(m.XZ,{checked:r,onChange:function(){return i(!r)},children:"Active"})}),(0,v.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,v.jsx)(m.zx,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},y=function(e){var n=(0,x.useState)(),t=(0,c.Z)(n,2),r=t[0],i=t[1],j=(0,x.useState)([]),y=(0,c.Z)(j,2),Z=y[0],C=y[1],w=(0,x.useState)(1),I=(0,c.Z)(w,2),S=I[0],k=I[1],b=(0,x.useState)(0),A=(0,c.Z)(b,2),D=A[0],q=A[1],E=(0,x.useState)(20),F=(0,c.Z)(E,2),z=F[0],N=F[1],T=(0,x.useState)(""),P=(0,c.Z)(T,2),J=P[0],X=(P[1],(0,x.useState)(!1)),B=(0,c.Z)(X,2),M=(B[0],B[1]),H=(0,x.useState)(!0),Q=(0,c.Z)(H,2),Y=Q[0],O=Q[1],U=((0,p.HJ)().push,m.l0.useForm()),V=(0,c.Z)(U,1)[0],_=m.l0.useForm(),G=(0,c.Z)(_,1)[0],K=(m.rj.useBreakpoint().lg,(0,x.useState)(!1)),L=(0,c.Z)(K,2),R=L[0],W=L[1],$=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(n){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.E.custom({url:"",method:"post",metaData:{operation:"updateCurriculum",variables:{id:{value:n.id,type:"Int",required:!0},name:{value:n.name,type:"String",required:!0},code:{value:n.code,type:"String",required:!0},description:{value:n.description,type:"String",required:!1},isActive:{value:n.isActive,type:"Boolean",required:!1}},fields:["success","message",{curriculum:["id","name","description","code","created","updated","isActive","canDelete","canEdit","canManage"]}]}});case 2:t=e.sent,(r=t.data).success?(m.yw.success(r.message),G.resetFields(),W(!1),C(Z.map((function(e){return e.id===r.curriculum.id?r.curriculum:e})))):m.yw.error(r.message);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ee=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(n){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.E.custom({url:"",method:"post",metaData:{operation:"deleteCurriculum",variables:{id:{value:n,type:"Int",required:!0}},fields:["success","message"]}});case 2:t=e.sent,(r=t.data).success?(m.yw.success(r.message),C(Z.filter((function(e){return e.id!==n})))):m.yw.error(r.message);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ne=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var n,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.E.custom({url:"",method:"post",metaData:{operation:"syncCurriculums",variables:{},fields:["success","message"]}});case 2:n=e.sent,(t=n.data).success?(m.yw.success(t.message),ie(1)):m.yw.error(t.message);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){m.yw.info("Canceled")},re=[{title:"Name",dataIndex:"name",fixed:!0,render:function(e,n,t){return(0,v.jsx)("span",{children:(0,v.jsx)("a",{children:n.name})})}},{title:"Code",dataIndex:"code",fixed:!0,render:function(e,n,t){return(0,v.jsx)("span",{children:(0,v.jsx)("a",{children:n.code})})}},{title:"Description",dataIndex:"description",fixed:!0,render:function(e,n,t){return(0,v.jsx)("span",{children:(0,v.jsx)("a",{children:n.description})})}},{title:"Created",dataIndex:"created",render:function(e,n,t){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("span",{children:(0,v.jsx)(h.Z,{date:new Date(n.created)})})})}},{title:"Status",dataIndex:"isActive",render:function(e,n,t){return(0,v.jsx)("a",{children:null!==n&&void 0!==n&&n.isActive?(0,v.jsx)("span",{style:{color:"green"},children:"Active"}):(0,v.jsx)("span",{style:{color:"red"},children:"Inactive"})})}},{title:"",dataIndex:"action",render:function(e,n,t){return(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,v.jsx)(m.gn,{title:"Are you sure to delete this Curriculum?",onConfirm:function(){return ee(null===n||void 0===n?void 0:n.id)},onCancel:function(){return te},okText:"Yes",cancelText:"No",disabled:!(null!==n&&void 0!==n&&n.canDelete),children:(0,v.jsx)(m.zx,{icon:(0,v.jsx)(u.Z,{}),disabled:!(null!==n&&void 0!==n&&n.canDelete)})}),(0,v.jsx)(m.zx,{disabled:!(null!==n&&void 0!==n&&n.canEdit),icon:(0,v.jsx)(l.Z,{}),onClick:function(){return function(e){i(e),W(!0)}(n)}})]})}}],ie=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(n){var t,r,i,a,c=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>1&&void 0!==c[1]?c[1]:"",r=c.length>2&&void 0!==c[2]?c[2]:20,e.next=4,f.E.custom({url:"",method:"get",metaData:{operation:"curriculums",variables:{page:{value:n,type:"Int",required:!0},key:{value:t,type:"String",required:!1},pageSize:{value:r,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","description","isActive","created","updated","canEdit","canDelete","canManage"]}]}});case 4:i=e.sent,a=i.data,k(a.page),q(a.total),M(a.hasNext),C(a.results),O(!1);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,x.useEffect)((function(){ie(S)}),[]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(m.X2,{style:{marginTop:10},children:[(0,v.jsx)(m.JX,{span:12,children:(0,v.jsx)(m.l0,{layout:"vertical",form:V,onFinish:function(e){k(1),Z.length=0,ie(1,e.key)},children:(0,v.jsx)(m.l0.Item,{name:"key",children:(0,v.jsx)(m.II,{size:"large",placeholder:"Search ...",prefix:(0,v.jsx)(o.Z,{}),autoComplete:"off",allowClear:!0})})})}),(0,v.jsx)(m.JX,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:(0,v.jsx)(m.gn,{title:"Are you sure to sync default Curriculums?",placement:"left",onConfirm:function(){ne()},onCancel:function(){},okText:"Yes",cancelText:"No",children:(0,v.jsx)(m.zx,{icon:(0,v.jsx)(d.Z,{}),size:"large",children:"Sync Default Curriculums"})})})]}),(0,v.jsx)("div",{children:(0,v.jsx)(m.iA,{loading:Y,columns:re,dataSource:Z,scroll:{x:!0},pagination:{onChange:function(e,n){N(n),ie(e,J,n)},total:D,pageSize:z,position:["bottomCenter"],showQuickJumper:!1}})}),(0,v.jsx)(m.u_,{title:"Edit Curriculum Informations",width:"45vw",visible:R,onOk:function(){W(!1)},onCancel:function(){W(!1)},footer:[],children:(0,v.jsx)(g,{form:G,curriculum:r,onFinish:$})})]})},Z=t(20852),C=t(59174),w=t(5397),I=function(){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{style:{marginTop:10,marginBottom:10},children:(0,v.jsxs)(r.Z,{children:[(0,v.jsx)(r.Z.Item,{children:(0,v.jsx)(i.rU,{to:"/control/analytics",children:"Home"})}),(0,v.jsx)(r.Z.Item,{children:"Curriculums"})]})}),(0,v.jsx)(y,{height:80})]})},S=function(){var e=(0,p.kS)().data;return(0,x.useEffect)((function(){!1!==(null===e||void 0===e?void 0:e.isStaff)&&!1!==(null===e||void 0===e?void 0:e.isAdmin)||(window.location.pathname="/home"),window.history.pushState({},"",(0,C.Z)())}),[]),(0,v.jsx)(Z.u,{children:(0,v.jsx)(w.Q,{children:(0,v.jsx)(I,{})})})}}}]);
//# sourceMappingURL=543.1e1ad2c9.chunk.js.map