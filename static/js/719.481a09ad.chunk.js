"use strict";(self.webpackChunkolbongo=self.webpackChunkolbongo||[]).push([[719],{45719:function(e,t,n){n.r(t),n.d(t,{ControlPermissionsPage:function(){return Z}});var s=n(69239),r=n(78164),a=n(43504),i=n(74165),o=n(15861),c=n(29439),l=n(11730),u=n(14057),d=n(840),h=n(87012),x=n(72791),f=n(50333),p=n(80184),m=function(e){var t=(0,x.useState)([]),n=(0,c.Z)(t,2),r=n[0],a=n[1],m=(0,x.useState)(1),j=(0,c.Z)(m,2),g=(j[0],j[1]),v=(0,x.useState)(0),y=(0,c.Z)(v,2),Z=y[0],S=y[1],w=(0,x.useState)(20),k=(0,c.Z)(w,2),I=k[0],C=k[1],b=(0,x.useState)(""),z=(0,c.Z)(b,2),A=z[0],P=z[1],D=(0,x.useState)(!1),E=(0,c.Z)(D,2),F=(E[0],E[1]),J=(0,x.useState)(!0),q=(0,c.Z)(J,2),N=q[0],X=q[1],H=((0,s.HJ)().push,d.l0.useForm()),Q=(0,c.Z)(H,1)[0],T=d.l0.useForm(),B=((0,c.Z)(T,1)[0],!d.rj.useBreakpoint().lg),M=[{title:"Name",dataIndex:"name",fixed:!0,render:function(e,t,n){return(0,p.jsx)("span",{children:(0,p.jsx)("a",{children:t.name})})}},{title:"Code",dataIndex:"code",fixed:!0,render:function(e,t,n){return(0,p.jsx)("span",{children:(0,p.jsx)("a",{children:e})})}},{title:"Created",dataIndex:"created",render:function(e,t,n){return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("span",{children:(0,p.jsx)(f.Z,{date:new Date(t.created)})})})}},{title:"Status",dataIndex:"isActive",render:function(e,t,n){return(0,p.jsx)("a",{children:null!==t&&void 0!==t&&t.isActive?(0,p.jsx)("span",{style:{color:"green"},children:"Active"}):(0,p.jsx)("span",{style:{color:"red"},children:"Inactive"})})}},{title:"",dataIndex:"action",render:function(e,t,n){return(0,p.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"}})}}],O=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,s,r,o,c=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"",s=c.length>2&&void 0!==c[2]?c[2]:20,e.next=4,h.E.custom({url:"",method:"get",metaData:{operation:"systemPermissions",variables:{page:{value:t,type:"Int",required:!0},key:{value:n,type:"String",required:!1},pageSize:{value:s,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});case 4:r=e.sent,o=r.data,g(o.page),S(o.total),F(o.hasNext),a(o.results),X(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.E.custom({url:"",method:"post",metaData:{operation:"syncSystemPermissions",variables:{},fields:["success","message"]}});case 2:t=e.sent,(n=t.data).success?(d.yw.success(n.message),r.length=0,a([]),O(1)):d.yw.error(n.message);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.useEffect)((function(){O(1,"",20)}),[]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(d.X2,{style:{marginTop:10},children:[(0,p.jsx)(d.JX,{span:B?24:20,children:(0,p.jsx)(d.l0,{layout:"vertical",form:Q,onFinish:function(e){g(1),r.length=0,P(e.key),O(1,e.key,I)},children:(0,p.jsx)(d.l0.Item,{name:"key",children:(0,p.jsx)(d.II,{size:"large",placeholder:"Search ...",prefix:(0,p.jsx)(l.Z,{}),autoComplete:"off",allowClear:!0})})})}),(0,p.jsx)(d.JX,{span:B?24:4,style:{display:"flex",justifyContent:"flex-end"},children:(0,p.jsx)(d.u,{title:"Synchronize Default School Ownerships",children:(0,p.jsx)(d.zx,{size:"large",icon:(0,p.jsx)(u.Z,{}),onClick:function(){return U()}})})})]}),(0,p.jsx)("div",{children:(0,p.jsx)(d.iA,{loading:N,columns:M,dataSource:r,scroll:{x:!0},pagination:{onChange:function(e,t){C(t),O(e,A,t)},total:Z,pageSize:I,position:["bottomCenter"],showQuickJumper:!0}})})]})},j=n(20852),g=n(59174),v=n(5397),y=function(){return(0,p.jsxs)("div",{style:{marginTop:10},children:[(0,p.jsxs)(r.Z,{children:[(0,p.jsx)(r.Z.Item,{children:(0,p.jsx)(a.rU,{to:"/control/analytics",children:"Home"})}),(0,p.jsx)(r.Z.Item,{children:"Permissions"})]}),(0,p.jsx)(m,{height:80})]})},Z=function(){var e=(0,s.kS)().data;return(0,x.useEffect)((function(){!1!==(null===e||void 0===e?void 0:e.isStaff)&&!1!==(null===e||void 0===e?void 0:e.isAdmin)||(window.location.pathname="/home"),window.history.pushState({},"",(0,g.Z)())}),[]),(0,p.jsx)(j.u,{children:(0,p.jsx)(v.Q,{children:(0,p.jsx)(y,{})})})}}}]);
//# sourceMappingURL=719.481a09ad.chunk.js.map