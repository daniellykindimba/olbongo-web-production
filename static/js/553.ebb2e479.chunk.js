"use strict";(self.webpackChunkolbongo=self.webpackChunkolbongo||[]).push([[553],{81553:function(e,t,n){n.r(t),n.d(t,{GradesPage:function(){return k}});var r=n(78164),s=n(43504),a=n(20852),i=n(93433),o=n(74165),c=n(15861),l=n(29439),u=n(82622),d=n(31752),f=n(11730),h=n(14057),x=n(840),p=n(72518),g=n(87012),m=n(72791),j=n(50333),v=n(80184),y=function(e){var t=(0,m.useState)(),n=(0,l.Z)(t,2),r=(n[0],n[1],(0,m.useState)([])),s=(0,l.Z)(r,2),a=s[0],y=s[1],Z=(0,m.useState)(25),w=(0,l.Z)(Z,2),S=w[0],k=w[1],C=(0,m.useState)(""),I=(0,l.Z)(C,2),b=I[0],z=(I[1],(0,m.useState)(1)),E=(0,l.Z)(z,2),D=E[0],G=E[1],A=(0,m.useState)(0),F=(0,l.Z)(A,2),q=F[0],J=F[1],N=(0,m.useState)(!1),O=(0,l.Z)(N,2),T=(O[0],O[1]),X=(0,m.useState)(!0),H=(0,l.Z)(X,2),P=H[0],Q=H[1],R=((0,p.HJ)().push,x.l0.useForm()),_=(0,l.Z)(R,1)[0],B=x.l0.useForm(),M=((0,l.Z)(B,1)[0],!x.rj.useBreakpoint().lg),U=(0,m.useState)(!1),Y=(0,l.Z)(U,2),K=Y[0],L=(Y[1],(0,m.useState)(!1)),V=(0,l.Z)(L,2),W=V[0],$=(V[1],function(){var e=(0,c.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.E.custom({url:"",method:"post",metaData:{operation:"synchronizeGrades",variables:{},fields:["success","message"]}});case 2:t=e.sent,(n=t.data).success&&(x.yw.success(n.message),re(1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),ee=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(t){var n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.E.custom({url:"",method:"post",metaData:{operation:"deleteGrade",variables:{id:{value:parseInt(t.toString()),type:"Int",required:!0}},fields:["success","message"]}});case 2:n=e.sent,(r=n.data).success?(x.yw.success(r.message),y(a.filter((function(e){return e.id!==t})))):x.yw.error(r.message);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){x.yw.info("Canceled")},ne=[{title:"Name",dataIndex:"name",fixed:!0,render:function(e,t,n){return(0,v.jsx)("span",{children:(0,v.jsx)("a",{children:t.name})})}},{title:"Created",dataIndex:"created",render:function(e,t,n){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("span",{children:(0,v.jsx)(j.Z,{date:new Date(t.created)})})})}},{title:"Status",dataIndex:"isActive",render:function(e,t,n){return(0,v.jsx)("a",{children:null!==t&&void 0!==t&&t.isActive?(0,v.jsx)("span",{style:{color:"green"},children:"Active"}):(0,v.jsx)("span",{style:{color:"red"},children:"Inactive"})})}},{title:"",dataIndex:"action",render:function(e,t,n){return(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,v.jsx)(x.gn,{title:"Are you sure to delete this School Ownership?",onConfirm:function(){return ee(null===t||void 0===t?void 0:t.id)},onCancel:function(){return te},okText:"Yes",cancelText:"No",disabled:!(null!==t&&void 0!==t&&t.canDelete),children:(0,v.jsx)(x.zx,{style:{marginRight:3},icon:(0,v.jsx)(u.Z,{}),disabled:!(null!==t&&void 0!==t&&t.canDelete),danger:!0})}),(0,v.jsx)(x.u,{title:"Edit "+(null===t||void 0===t?void 0:t.name)+" Ownership",color:"green",placement:"left",children:(0,v.jsx)(x.zx,{style:{marginRight:3},icon:(0,v.jsx)(d.Z,{}),disabled:!(null!==t&&void 0!==t&&t.canEdit),onClick:function(){},danger:!0})})]})}}],re=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(t){var n,r,s,a,c=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"",r=c.length>2&&void 0!==c[2]?c[2]:25,e.next=4,g.E.custom({url:"",method:"get",metaData:{operation:"grades",variables:{page:{value:t,type:"Int",required:!0},key:{value:n,type:"String",required:!1},pageSize:{value:r,type:"Int",required:!0}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","code","isActive","created","updated","canEdit","canDelete","canManage"]}]}});case 4:s=e.sent,a=s.data,G(a.page),J(a.total),T(a.hasNext),y((0,i.Z)(a.results)),Q(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,m.useEffect)((function(){re(D)}),[]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(x.X2,{style:{marginTop:10},children:[(0,v.jsx)(x.JX,{span:M?24:20,children:(0,v.jsx)(x.l0,{layout:"vertical",form:_,onFinish:function(e){G(1),a.length=0,re(1,e.key)},children:(0,v.jsx)(x.l0.Item,{name:"key",children:(0,v.jsx)(x.II,{size:"large",placeholder:"Search ...",prefix:(0,v.jsx)(f.Z,{}),autoComplete:"off",allowClear:!0})})})}),(0,v.jsx)(x.JX,{span:M?24:4,style:{display:"flex",justifyContent:"flex-end"},children:(0,v.jsx)(x.u,{title:"Synchronize Default Grades",children:(0,v.jsx)(x.zx,{size:"large",icon:(0,v.jsx)(h.Z,{}),onClick:function(){return $()},danger:!0})})})]}),(0,v.jsx)(x.iA,{loading:P,columns:ne,dataSource:a,scroll:{x:!0},pagination:{onChange:function(e,t){k(t),re(e,b,t)},total:q,pageSize:S,position:["bottomCenter"],showQuickJumper:!1}}),(0,v.jsx)(x.u_,{title:"Edit Grade",width:"60vw",visible:W,onOk:function(){},onCancel:function(){},footer:[]}),(0,v.jsx)(x.u_,{title:"Create Grade",width:"60vw",visible:K,onOk:function(){},onCancel:function(){},footer:[]})]})},Z=n(59174),w=n(5397),S=function(){return(0,v.jsxs)("div",{style:{marginTop:10},children:[(0,v.jsxs)(r.Z,{children:[(0,v.jsx)(r.Z.Item,{children:(0,v.jsx)(s.rU,{to:"/control/analytics",children:"Home"})}),(0,v.jsx)(r.Z.Item,{children:"Grades"})]}),(0,v.jsx)(y,{height:80})]})},k=function(){return(0,m.useEffect)((function(){window.history.pushState({},"",(0,Z.Z)())}),[]),(0,v.jsx)(a.u,{children:(0,v.jsx)(w.Q,{children:(0,v.jsx)(S,{})})})}}}]);
//# sourceMappingURL=553.ebb2e479.chunk.js.map