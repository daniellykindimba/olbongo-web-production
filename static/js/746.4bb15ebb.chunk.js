"use strict";(self.webpackChunkolbongo=self.webpackChunkolbongo||[]).push([[746],{73362:function(e,n,t){t.d(n,{v:function(){return i}});var r=t(840),s=t(80184),i=function(e){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(r.l0,{layout:"vertical",form:e.form,onFinish:function(n){e.onFinish(n)},requiredMark:!1,children:[(0,s.jsx)(r.l0.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:(0,s.jsx)(r.II,{size:"large",placeholder:"Enter Name ..."})}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,s.jsx)(r.zx,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})}},22746:function(e,n,t){t.r(n),t.d(n,{SchoolOwnershipsPage:function(){return C}});var r=t(78164),s=t(43504),i=t(74165),a=t(15861),o=t(29439),c=t(82622),l=t(31752),u=t(11730),d=t(14057),h=t(79286),p=t(840),f=t(72518),m=t(87012),x=t(72791),v=t(50333),g=t(73362),j=t(80184),y=function(e){var n=p.l0.useForm(),t=(0,o.Z)(n,1)[0],r=(0,x.useState)(e.ownership.isActive),s=(0,o.Z)(r,2),c=s[0],l=s[1],u=function(){var n=(0,a.Z)((0,i.Z)().mark((function n(r){var s,a;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.E.custom({url:"",method:"post",metaData:{operation:"updateSchoolsOwnerships",variables:{id:{value:r.id,type:"Int",required:!0},name:{value:r.name,type:"String",required:!0},isActive:{value:r.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});case 2:s=n.sent,(a=s.data).success?(p.yw.success(a.message),t.resetFields(),e.onFinish(a.ownership)):p.yw.error(a.message);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,x.useEffect)((function(){e.form.setFieldsValue({name:e.ownership.name,isActive:e.ownership.isActive})}),[e.form,e.ownership]),(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(p.l0,{layout:"vertical",form:e.form,onFinish:function(n){n.isActive=c,n.id=parseInt(e.ownership.id),u(n)},requiredMark:!1,children:[(0,j.jsx)(p.l0.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:(0,j.jsx)(p.II,{size:"large",placeholder:"Enter Name ..."})}),(0,j.jsx)(p.l0.Item,{name:"isActive",children:(0,j.jsx)(p.XZ,{checked:c,onChange:function(){return l(!c)},children:"Active"})}),(0,j.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,j.jsx)(p.zx,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},w=function(e){var n=(0,x.useState)(),t=(0,o.Z)(n,2),r=t[0],s=t[1],w=(0,x.useState)([]),Z=(0,o.Z)(w,2),S=Z[0],I=Z[1],k=(0,x.useState)(1),C=(0,o.Z)(k,2),b=(C[0],C[1]),A=(0,x.useState)(0),F=(0,o.Z)(A,2),z=F[0],E=F[1],O=(0,x.useState)(!1),q=(0,o.Z)(O,2),D=(q[0],q[1]),N=(0,x.useState)(20),T=(0,o.Z)(N,2),M=T[0],J=T[1],P=(0,x.useState)(""),X=(0,o.Z)(P,2),B=X[0],H=X[1],Q=(0,x.useState)(!0),_=(0,o.Z)(Q,2),U=_[0],V=_[1],Y=((0,f.HJ)().push,p.l0.useForm()),G=(0,o.Z)(Y,1)[0],K=p.l0.useForm(),L=(0,o.Z)(K,1)[0],R=!p.rj.useBreakpoint().lg,W=(0,x.useState)(!1),$=(0,o.Z)(W,2),ee=$[0],ne=$[1],te=(0,x.useState)(!1),re=(0,o.Z)(te,2),se=re[0],ie=re[1],ae=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(S.map((function(e){return parseInt(e.id.toString())===parseInt(n.id.toString())?n:e}))),ie(!1);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),oe=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.E.custom({url:"",method:"post",metaData:{operation:"updateSchoolOwnership",variables:{id:{value:n.id,type:"Int",required:!0},name:{value:n.name,type:"String",required:!0},isActive:{value:n.isActive,type:"Boolean",required:!0}},fields:["success","message",{ownership:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});case 2:t=e.sent,(r=t.data).success?(p.yw.success(r.message),L.resetFields(),ie(!1),I(S.map((function(e){return e.id===r.ownership.id?r.ownership:e})))):p.yw.error(r.message);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ce=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.E.custom({url:"",method:"post",metaData:{operation:"deleteSchoolOwnership",variables:{id:{value:parseInt(n.toString()),type:"Int",required:!0}},fields:["success","message"]}});case 2:t=e.sent,(r=t.data).success?(p.yw.success(r.message),I(S.filter((function(e){return e.id!==n})))):p.yw.error(r.message);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),le=function(){p.yw.info("Canceled")},ue=[{title:"Name",dataIndex:"name",fixed:!0,render:function(e,n,t){return(0,j.jsx)("span",{children:(0,j.jsx)("a",{children:n.name})})}},{title:"Created",dataIndex:"created",render:function(e,n,t){return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("span",{children:(0,j.jsx)(v.Z,{date:new Date(n.created)})})})}},{title:"Status",dataIndex:"isActive",render:function(e,n,t){return(0,j.jsx)("a",{children:null!==n&&void 0!==n&&n.isActive?(0,j.jsx)("span",{style:{color:"green"},children:"Active"}):(0,j.jsx)("span",{style:{color:"red"},children:"Inactive"})})}},{title:"",dataIndex:"action",render:function(e,n,t){return(0,j.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,j.jsx)(p.gn,{title:"Are you sure to delete this School Ownership?",onConfirm:function(){return ce(null===n||void 0===n?void 0:n.id)},onCancel:function(){return le},okText:"Yes",cancelText:"No",disabled:!(null!==n&&void 0!==n&&n.canDelete),children:(0,j.jsx)(p.zx,{icon:(0,j.jsx)(c.Z,{}),disabled:!(null!==n&&void 0!==n&&n.canDelete),danger:!0})}),(0,j.jsx)(p.u,{title:"Edit "+(null===n||void 0===n?void 0:n.name)+" Ownership",color:"green",children:(0,j.jsx)(p.zx,{icon:(0,j.jsx)(l.Z,{}),disabled:!(null!==n&&void 0!==n&&n.canEdit),onClick:function(){return function(e){s(e),ie(!0)}(n)},danger:!0})})]})}}],de=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var t,r,s,a,o=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2&&void 0!==o[2]?o[2]:20,e.next=4,m.E.custom({url:"",method:"get",metaData:{operation:"ownerships",variables:{page:{value:n,type:"Int",required:!0},key:{value:t,type:"String",required:!1},pageSize:{value:r,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});case 4:s=e.sent,a=s.data,b(a.page),E(a.total),D(a.hasNext),I(a.results),V(!1);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),he=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.E.custom({url:"",method:"post",metaData:{operation:"syncSchoolsOwnerships",variables:{},fields:["success","message"]}});case 2:n=e.sent,(t=n.data).success?(p.yw.success(t.message),S.length=0,I([]),de(1)):p.yw.error(t.message);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.useEffect)((function(){de(1,"",20)}),[]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(p.X2,{style:{marginTop:10},children:[(0,j.jsx)(p.JX,{span:R?24:20,children:(0,j.jsx)(p.l0,{layout:"vertical",form:G,onFinish:function(e){b(1),S.length=0,H(e.key),de(1,e.key,M)},children:(0,j.jsx)(p.l0.Item,{name:"key",children:(0,j.jsx)(p.II,{size:"large",placeholder:"Search ...",prefix:(0,j.jsx)(u.Z,{}),autoComplete:"off",allowClear:!0})})})}),(0,j.jsxs)(p.JX,{span:R?24:4,style:{display:"flex",justifyContent:"flex-end"},children:[(0,j.jsx)(p.u,{title:"Synchronize Default School Ownerships",children:(0,j.jsx)(p.zx,{size:"large",icon:(0,j.jsx)(d.Z,{}),onClick:function(){return he()}})}),(0,j.jsx)(p.u,{title:"Create New School Ownership",children:(0,j.jsx)(p.zx,{size:"large",icon:(0,j.jsx)(h.Z,{}),onClick:function(){return ne(!0)}})})]})]}),(0,j.jsx)("div",{children:(0,j.jsx)(p.iA,{loading:U,columns:ue,dataSource:S,scroll:{x:!0},pagination:{onChange:function(e,n){J(n),de(e,B,n)},total:z,pageSize:M,position:["bottomCenter"],showQuickJumper:!0}})}),(0,j.jsx)(p.u_,{title:"Edit School Ownership Informations",width:"20%",destroyOnClose:!0,visible:se,onOk:function(){ie(!1)},onCancel:function(){ie(!1)},footer:[],children:(0,j.jsx)(y,{form:L,ownership:r,onFinish:ae})}),(0,j.jsx)(p.u_,{title:"Create School Ownership Informations",width:"20%",destroyOnClose:!0,visible:ee,onOk:function(){ne(!1)},onCancel:function(){ne(!1)},footer:[],children:(0,j.jsx)(g.v,{form:L,onFinish:oe})})]})},Z=t(20852),S=t(59174),I=t(5397),k=function(){return(0,j.jsxs)("div",{style:{marginTop:10},children:[(0,j.jsxs)(r.Z,{children:[(0,j.jsx)(r.Z.Item,{children:(0,j.jsx)(s.rU,{to:"/control/analytics",children:"Home"})}),(0,j.jsx)(r.Z.Item,{children:"School Ownerships"})]}),(0,j.jsx)(w,{height:80})]})},C=function(){return(0,x.useEffect)((function(){window.history.pushState({},"",(0,S.Z)())}),[]),(0,j.jsx)(Z.u,{children:(0,j.jsx)(I.Q,{children:(0,j.jsx)(k,{})})})}}}]);
//# sourceMappingURL=746.4bb15ebb.chunk.js.map