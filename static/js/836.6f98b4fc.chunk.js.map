{"version":3,"file":"static/js/836.6f98b4fc.chunk.js","mappings":"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","sources":["apps/control/components/user_analytics.tsx","apps/control/components/analytics.tsx","apps/control/pages/analytics_page.tsx"],"sourcesContent":["import {Grid, Typography} from \"@pankod/refine-antd\";\nimport {useNavigation} from \"@pankod/refine-core\";\nimport {Card, Space, Col, Row, Skeleton} from \"@pankod/refine-antd\";\nimport {gqlDataProvider} from \"api\";\nimport {UserAnalytiData} from \"apps/core/interfaces\";\nimport {useEffect, useState} from \"react\";\nconst {Title, Text} = Typography;\n\ninterface Props {\n  randKey?: any;\n}\n\nexport const UserAnalytics: React.FC<Props> = (props: Props) => {\n  const [analytics, setAnalytics] = useState<UserAnalytiData>();\n  const [messageBalance, setMessageBalance] = useState<number>(0);\n  const [loading, setLoading] = useState(true);\n  const {push} = useNavigation();\n\n  const breakpoint = Grid.useBreakpoint();\n  const isMobile = !breakpoint.lg;\n\n  const getUserAnalytics = async () => {\n    const {data} = await gqlDataProvider.custom!({\n      url: \"\",\n      method: \"get\",\n      metaData: {\n        operation: \"userAnalytics\",\n        fields: [\"analytics\"],\n      },\n    });\n    setAnalytics(data.analytics);\n    setLoading(false);\n  };\n\n  const getNjiwaOpesMessageBalance = async () => {\n    const {data} = await gqlDataProvider.custom!({\n      url: \"\",\n      method: \"get\",\n      metaData: {\n        operation: \"globalOpesSmsBalance\",\n        fields: [\"data\"],\n      },\n    });\n    console.log(\"opes\");\n    console.log(data);\n    if (data) {\n      setMessageBalance(parseInt(data.data.balance));\n    }\n  };\n\n  useEffect(() => {\n    getUserAnalytics();\n    getNjiwaOpesMessageBalance();\n  }, []);\n\n  return (\n    <>\n      <Row align=\"top\">\n        <Col span={24}>\n          <Title level={5}>Users/Members/School Analytics</Title>\n        </Col>\n        <Col span={isMobile ? 12 : 4}>\n          <Skeleton loading={loading} active>\n            <Card\n              hoverable={true}\n              style={{marginRight: 10}}\n              onClick={() => push(\"/control/schools\")}\n            >\n              <Space\n                direction=\"vertical\"\n                align=\"center\"\n                style={{width: \"100%\", justifyContent: \"center\"}}\n              >\n                <Title level={2}>{analytics?.total_schools}</Title>\n                <Text>Scbools</Text>\n              </Space>\n            </Card>\n          </Skeleton>\n        </Col>\n\n        <Col span={isMobile ? 12 : 4}>\n          <Skeleton loading={loading} active>\n            <Card\n              hoverable={true}\n              style={{marginRight: 10}}\n              onClick={() => push(\"/control/users?status=1\")}\n            >\n              <Space\n                direction=\"vertical\"\n                align=\"center\"\n                style={{width: \"100%\", justifyContent: \"center\"}}\n              >\n                <Title level={2}>{analytics?.total_active_users}</Title>\n                <Text>Active Users</Text>\n              </Space>\n            </Card>\n          </Skeleton>\n        </Col>\n\n        <Col span={isMobile ? 12 : 4}>\n          <Skeleton loading={loading} active>\n            <Card\n              hoverable={true}\n              style={{marginRight: 10}}\n              onClick={() => push(\"/control/users?status=0\")}\n            >\n              <Space\n                direction=\"vertical\"\n                align=\"center\"\n                style={{width: \"100%\", justifyContent: \"center\"}}\n              >\n                <Title level={2}>{analytics?.total_blocked_users}</Title>\n                <Text>Blocked Users</Text>\n              </Space>\n            </Card>\n          </Skeleton>\n        </Col>\n\n        <Col span={isMobile ? 12 : 2}>\n          <Skeleton loading={loading} active>\n            <Card\n              hoverable={true}\n              style={{marginRight: 10}}\n              onClick={() => push(\"/control/users?status=1&role=adminstrator\")}\n            >\n              <Space\n                direction=\"vertical\"\n                align=\"center\"\n                style={{width: \"100%\", justifyContent: \"center\"}}\n              >\n                <Title level={2}>{analytics?.total_adminstrators}</Title>\n                <Text>Active Admins</Text>\n              </Space>\n            </Card>\n          </Skeleton>\n        </Col>\n\n        <Col span={isMobile ? 12 : 2}>\n          <Skeleton loading={loading} active>\n            <Card\n              hoverable={true}\n              style={{marginRight: 10}}\n              onClick={() => push(\"/control/users?status=0&role=adminstrator\")}\n            >\n              <Space\n                direction=\"vertical\"\n                align=\"center\"\n                style={{width: \"100%\", justifyContent: \"center\"}}\n              >\n                <Title level={2}>\n                  {analytics?.total_blocked_adminstrators}\n                </Title>\n                <Text>Blocked Admins</Text>\n              </Space>\n            </Card>\n          </Skeleton>\n        </Col>\n\n        <Col span={isMobile ? 12 : 2}>\n          <Skeleton loading={loading} active>\n            <Card\n              hoverable={true}\n              style={{marginRight: 10}}\n              onClick={() => push(\"/control/users?status=1&role=staff\")}\n            >\n              <Space\n                direction=\"vertical\"\n                align=\"center\"\n                style={{width: \"100%\", justifyContent: \"center\"}}\n              >\n                <Title level={2}>{analytics?.total_staffs}</Title>\n                <Text>Active Staffs</Text>\n              </Space>\n            </Card>\n          </Skeleton>\n        </Col>\n\n        <Col span={isMobile ? 12 : 2}>\n          <Skeleton loading={loading} active>\n            <Card\n              hoverable={true}\n              style={{marginRight: 10}}\n              onClick={() => push(\"/control/users?status=0&role=staff\")}\n            >\n              <Space\n                direction=\"vertical\"\n                align=\"center\"\n                style={{width: \"100%\", justifyContent: \"center\"}}\n              >\n                <Title level={2}>{analytics?.total_blocked_staffs}</Title>\n                <Text>Blocked Staffs</Text>\n              </Space>\n            </Card>\n          </Skeleton>\n        </Col>\n\n        <Col span={isMobile ? 12 : 2}>\n          <Skeleton loading={loading} active>\n            <Card hoverable={true} style={{marginRight: 10}}>\n              <Space\n                direction=\"vertical\"\n                align=\"center\"\n                style={{width: \"100%\", justifyContent: \"center\"}}\n              >\n                <Title level={2}>{messageBalance}</Title>\n                <Text>Messages Balance</Text>\n              </Space>\n            </Card>\n          </Skeleton>\n        </Col>\n      </Row>\n    </>\n  );\n};\n","import {DarasaAnalytics} from \"./darasa_analytics\";\nimport {OdriveAnalytics} from \"./odrive_analytics\";\nimport {UserAnalytics} from \"./user_analytics\";\n\ninterface Props {\n  randKey?: any;\n}\nexport const Analytics: React.FC<Props> = (props: Props) => {\n  return (\n    <>\n      <UserAnalytics />\n      {/* <OdriveAnalytics /> */}\n      {/* <DarasaAnalytics /> */}\n    </>\n  );\n};\n","import {Breadcrumb} from \"antd\";\nimport {Link} from \"react-router-dom\";\nimport {Analytics} from \"../components/analytics\";\nimport {ControlLayout} from \"../control_layout\";\nimport {useEffect} from \"react\";\nimport urlAppendString from \"services/url_append_string\";\nimport {ControlPermitted} from \"../components/permissions/control_permission\";\nimport {useGetIdentity} from \"@pankod/refine-core\";\n\nconst Applications: React.FC = () => {\n  return (\n    <div style={{marginTop: 10}}>\n      <Breadcrumb>\n        <Breadcrumb.Item>\n          <Link to={\"/control/analytics\"}>Home</Link>\n        </Breadcrumb.Item>\n        <Breadcrumb.Item>Analytics</Breadcrumb.Item>\n      </Breadcrumb>\n      <Analytics />\n    </div>\n  );\n};\n\nexport const ControlAnalyticsPage = () => {\n  const {data: user} = useGetIdentity();\n\n  const checkIfUserIsAdmin = () => {\n    if (user?.isStaff === false || user?.isAdmin === false) {\n      window.location.pathname = \"/home\";\n    }\n  };\n\n  useEffect(() => {\n    checkIfUserIsAdmin();\n    window.history.pushState({}, \"\", urlAppendString());\n  }, []);\n  return (\n    <ControlLayout>\n      <ControlPermitted>\n        <Applications />\n      </ControlPermitted>\n    </ControlLayout>\n  );\n};\n"],"names":["Title","Typography","Text","UserAnalytics","props","_useState","useState","_useState2","_slicedToArray","analytics","setAnalytics","_useState3","_useState4","messageBalance","setMessageBalance","_useState5","_useState6","loading","setLoading","push","useNavigation","isMobile","Grid","lg","getUserAnalytics","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield","data","wrap","_context","prev","next","gqlDataProvider","url","method","metaData","operation","fields","sent","stop","apply","arguments","getNjiwaOpesMessageBalance","_ref2","_callee2","_yield2","_context2","console","log","parseInt","balance","useEffect","_jsx","_Fragment","children","_jsxs","Row","align","Col","span","level","Skeleton","active","Card","hoverable","style","marginRight","onClick","Space","direction","width","justifyContent","total_schools","total_active_users","total_blocked_users","total_adminstrators","total_blocked_adminstrators","total_staffs","total_blocked_staffs","Analytics","Applications","marginTop","Breadcrumb","Link","to","ControlAnalyticsPage","user","useGetIdentity","isStaff","isAdmin","window","location","pathname","history","pushState","urlAppendString","ControlLayout","ControlPermitted"],"sourceRoot":""}