"use strict";(self.webpackChunkolbongo=self.webpackChunkolbongo||[]).push([[332],{36332:function(e,n,t){t.r(n),t.d(n,{ControlRegionsPage:function(){return S}});var r=t(78164),s=t(43504),i=t(74165),a=t(15861),c=t(29439),o=t(82622),u=t(31752),l=t(11730),d=t(14057),f=t(840),p=t(69239),x=t(87012),m=t(72791),h=t(50333),g=t(80184),v=function(e){var n=(0,m.useState)(e.region.isActive),t=(0,c.Z)(n,2),r=t[0],s=t[1];return(0,m.useEffect)((function(){e.form.setFieldsValue({name:e.region.name,isActive:e.region.isActive})}),[e.form,e.region]),(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(f.l0,{layout:"vertical",form:e.form,onFinish:function(n){n.isActive=r,n.id=parseInt(e.region.id),e.onFinish(n)},requiredMark:!1,children:[(0,g.jsx)(f.l0.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:(0,g.jsx)(f.II,{size:"large",placeholder:"Enter Name ..."})}),(0,g.jsx)(f.l0.Item,{name:"isActive",children:(0,g.jsx)(f.XZ,{checked:r,onChange:function(){return s(!r)},children:"Active"})}),(0,g.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,g.jsx)(f.zx,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},j=function(e){var n=(0,m.useState)(),t=(0,c.Z)(n,2),r=t[0],s=t[1],j=(0,m.useState)([]),y=(0,c.Z)(j,2),Z=y[0],w=y[1],I=(0,m.useState)(1),S=(0,c.Z)(I,2),k=S[0],C=S[1],b=(0,m.useState)(0),A=(0,c.Z)(b,2),E=A[0],F=A[1],z=(0,m.useState)(20),q=(0,c.Z)(z,2),D=q[0],N=q[1],M=(0,m.useState)(""),R=(0,c.Z)(M,2),T=R[0],J=(R[1],(0,m.useState)(!1)),X=(0,c.Z)(J,2),P=(X[0],X[1]),B=(0,m.useState)(!0),H=(0,c.Z)(B,2),Q=H[0],O=H[1],U=((0,p.HJ)().push,f.l0.useForm()),V=(0,c.Z)(U,1)[0],Y=f.l0.useForm(),_=(0,c.Z)(Y,1)[0],G=!f.rj.useBreakpoint().lg,K=(0,m.useState)(!1),L=(0,c.Z)(K,2),W=L[0],$=L[1],ee=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.E.custom({url:"",method:"post",metaData:{operation:"updateRegion",variables:{id:{value:n.id,type:"Int",required:!0},name:{value:n.name,type:"String",required:!0},isActive:{value:n.isActive,type:"Boolean",required:!0}},fields:["success","message",{region:["id","name","created","updated","isActive","canDelete","canEdit","canManage"]}]}});case 2:t=e.sent,(r=t.data).success?(f.yw.success(r.message),_.resetFields(),$(!1),w(Z.map((function(e){return e.id===r.region.id?r.region:e})))):f.yw.error(r.message);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ne=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.E.custom({url:"",method:"post",metaData:{operation:"syncMtaa",variables:{},fields:["success","message"]}});case 2:n=e.sent,(t=n.data).success?f.yw.success(t.message):f.yw.error(t.message);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.E.custom({url:"",method:"post",metaData:{operation:"deleteRegion",variables:{id:{value:n,type:"Int",required:!0}},fields:["success","message"]}});case 2:t=e.sent,(r=t.data).success?(f.yw.success(r.message),w(Z.filter((function(e){return e.id!==n})))):f.yw.error(r.message);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),re=function(){f.yw.info("Canceled")},se=[{title:"Name",dataIndex:"name",fixed:!0,render:function(e,n,t){return(0,g.jsx)("span",{children:(0,g.jsx)("a",{children:n.name})})}},{title:"Created",dataIndex:"created",render:function(e,n,t){return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("span",{children:(0,g.jsx)(h.Z,{date:new Date(n.created)})})})}},{title:"Status",dataIndex:"isActive",render:function(e,n,t){return(0,g.jsx)("a",{children:null!==n&&void 0!==n&&n.isActive?(0,g.jsx)("span",{style:{color:"green"},children:"Active"}):(0,g.jsx)("span",{style:{color:"red"},children:"Inactive"})})}},{title:"",dataIndex:"action",render:function(e,n,t){return(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,g.jsx)(f.gn,{title:"Are you sure to delete this member?",onConfirm:function(){return te(null===n||void 0===n?void 0:n.id)},onCancel:function(){return re},okText:"Yes",cancelText:"No",disabled:!(null!==n&&void 0!==n&&n.canDelete),children:(0,g.jsx)(f.zx,{icon:(0,g.jsx)(o.Z,{}),disabled:!(null!==n&&void 0!==n&&n.canDelete)})}),(0,g.jsx)(f.zx,{disabled:!(null!==n&&void 0!==n&&n.canEdit),onClick:function(){return function(e){s(e),$(!0)}(n)},icon:(0,g.jsx)(u.Z,{})})]})}}],ie=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var t,r,s,a,c=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>1&&void 0!==c[1]?c[1]:"",r=c.length>2&&void 0!==c[2]?c[2]:20,e.next=4,x.E.custom({url:"",method:"get",metaData:{operation:"regions",variables:{page:{value:n,type:"Int",required:!0},key:{value:t,type:"String",required:!1},pageSize:{value:r,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","isActive","created","updated","canEdit","canDelete","canManage"]}]}});case 4:s=e.sent,a=s.data,C(a.page),F(a.total),P(a.hasNext),w(a.results),O(!1);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,m.useEffect)((function(){ie(k,"",20)}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(f.X2,{style:{marginTop:10},children:[(0,g.jsx)(f.JX,{span:G?24:20,children:(0,g.jsx)(f.l0,{layout:"vertical",form:V,onFinish:function(e){C(1),Z.length=0,ie(1,e.key)},children:(0,g.jsx)(f.l0.Item,{name:"key",children:(0,g.jsx)(f.II,{size:"large",placeholder:"Search ...",prefix:(0,g.jsx)(l.Z,{}),autoComplete:"off",allowClear:!0})})})}),(0,g.jsx)(f.JX,{span:G?24:4,style:{display:"flex",justifyContent:"flex-end"},children:(0,g.jsx)(f.zx,{size:"large",icon:(0,g.jsx)(d.Z,{}),onClick:function(){return ne()},children:"Sync Mtaa"})})]}),(0,g.jsx)("div",{children:(0,g.jsx)(f.iA,{loading:Q,columns:se,dataSource:Z,scroll:{x:!0},pagination:{onChange:function(e,n){N(n),ie(e,T,n)},total:E,pageSize:D,position:["bottomCenter"],showQuickJumper:!0}})}),(0,g.jsx)(f.u_,{title:"Edit Region Informations",width:"20%",visible:W,onOk:function(){$(!1)},onCancel:function(){$(!1)},footer:[],children:(0,g.jsx)(v,{form:_,region:r,onFinish:ee})})]})},y=t(20852),Z=t(59174),w=t(5397),I=function(){return(0,g.jsxs)("div",{style:{marginTop:10},children:[(0,g.jsxs)(r.Z,{children:[(0,g.jsx)(r.Z.Item,{children:(0,g.jsx)(s.rU,{to:"/control/analytics",children:"Home"})}),(0,g.jsx)(r.Z.Item,{children:"Regions"})]}),(0,g.jsx)(j,{height:80})]})},S=function(){return(0,m.useEffect)((function(){window.history.pushState({},"",(0,Z.Z)())}),[]),(0,g.jsx)(y.u,{children:(0,g.jsx)(w.Q,{children:(0,g.jsx)(I,{})})})}}}]);
//# sourceMappingURL=332.8c0ff5ae.chunk.js.map