"use strict";(self.webpackChunkolbongo=self.webpackChunkolbongo||[]).push([[707],{18707:function(e,n,t){t.r(n),t.d(n,{LoginReedemPage:function(){return I}});var r=t(78164),i=t(43504),s=t(74165),a=t(93433),l=t(15861),o=t(29439),d=t(13097),u=t(82622),c=t(11730),m=t(98200),f=t(46070),h=t(99214),p=t(79208),x=t(840),g=t(72518),v=t(87012),j=t(72791),y=t(80184),C=function(e){var n=(0,j.useState)([]),t=(0,o.Z)(n,2),r=t[0],i=t[1],C=(0,j.useState)(1),Z=(0,o.Z)(C,2),b=Z[0],N=Z[1],w=(0,j.useState)(0),I=(0,o.Z)(w,2),R=I[0],S=I[1],k=(0,j.useState)(20),z=(0,o.Z)(k,2),A=z[0],E=z[1],F=(0,j.useState)(""),q=(0,o.Z)(F,2),D=q[0],U=(q[1],(0,j.useState)(!1)),L=(0,o.Z)(U,2),P=(L[0],L[1]),T=(0,j.useState)(!0),J=(0,o.Z)(T,2),M=J[0],X=J[1],H=((0,g.HJ)().push,x.l0.useForm()),Q=(0,o.Z)(H,1)[0],V=x.l0.useForm(),Y=(0,o.Z)(V,1)[0],B=(x.rj.useBreakpoint().lg,(0,j.useState)(!1)),O=(0,o.Z)(B,2),_=O[0],G=O[1],K=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(n){var t,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.E.custom({url:"",method:"post",metaData:{operation:"createLoginReedemCode",variables:{phone:{value:n.phone,type:"String",required:!0},registrationNumber:{value:n.registrationNumber,type:"String",required:!1},email:{value:n.email,type:"String",required:!1}},fields:["success","message",{loginReedemCode:["id","code","phone","registrationNumber",{user:["id","firstName","middleName","lastName","fullName","email","pic"]},"created","updated","isActive","isUsed","canDelete","canEdit","canManage"]}]}}).catch((function(e){return x.yw.error("Failed, creating Login Reedem Code"),{data:null}})).then((function(e){return e}));case 2:t=e.sent,(l=t.data)&&(l.success?(x.yw.success(l.message),i([l.loginReedemCode].concat((0,a.Z)(r))),Y.resetFields()):x.yw.error(l.message));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),W=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(n){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.E.custom({url:"",method:"post",metaData:{operation:"resendLoginReedemCode",variables:{id:{value:n,type:"Int",required:!0}},fields:["success","message"]}}).catch((function(e){return x.yw.error("Failed, deleting Login Reedem Code"),{data:null}})).then((function(e){return e}));case 2:t=e.sent,(r=t.data)&&(r.success?x.yw.success(r.message):x.yw.error(r.message));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),$=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(n){var t,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.E.custom({url:"",method:"post",metaData:{operation:"deleteLoginReedemCode",variables:{id:{value:n,type:"Int",required:!0}},fields:["success","message"]}}).catch((function(e){return x.yw.error("Failed, deleting Login Reedem Code"),{data:null}})).then((function(e){return e}));case 2:t=e.sent,(a=t.data)&&(a.success?(x.yw.success(a.message),i(r.filter((function(e){return e.id!==n})))):x.yw.error(a.message));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ee=function(){x.yw.info("Canceled")},ne=[{title:"Reedem Code",dataIndex:"code",fixed:!0,render:function(e,n,t){return(0,y.jsx)("span",{children:(0,y.jsx)("a",{children:n.code})})}},{title:"User",dataIndex:"user",render:function(e,n,t){var r,i,s;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{children:(null===n||void 0===n?void 0:n.user)&&(0,y.jsxs)("span",{children:["Full Name: ",null===n||void 0===n||null===(r=n.user)||void 0===r?void 0:r.firstName," ",null===n||void 0===n||null===(i=n.user)||void 0===i?void 0:i.middleName," ",null===n||void 0===n||null===(s=n.user)||void 0===s?void 0:s.lastName]})}),(0,y.jsx)("span",{children:(null===n||void 0===n?void 0:n.email)&&(0,y.jsxs)(x.Vp,{children:["Email: ",null===n||void 0===n?void 0:n.email]})}),(0,y.jsx)("span",{children:(null===n||void 0===n?void 0:n.registrationNumber)&&(0,y.jsxs)(x.Vp,{children:["Reg#: ",null===n||void 0===n?void 0:n.registrationNumber]})})]})}},{title:"Phone Number",dataIndex:"phone",fixed:!0,render:function(e,n,t){return(0,y.jsx)("span",{children:(0,y.jsx)("a",{children:n.phone})})}},{title:"Is Used",dataIndex:"isUsed",render:function(e,n,t){return(0,y.jsx)("a",{children:null!==n&&void 0!==n&&n.isUsed?(0,y.jsx)("span",{style:{color:"green"},children:"Used"}):(0,y.jsx)("span",{style:{color:"red"},children:"Not Used"})})}},{title:"Status",dataIndex:"isActive",render:function(e,n,t){return(0,y.jsx)("a",{children:null!==n&&void 0!==n&&n.isActive?(0,y.jsx)("span",{style:{color:"green"},children:"Active"}):(0,y.jsx)("span",{style:{color:"red"},children:"Inactive"})})}},{title:"",dataIndex:"action",render:function(e,n,t){return(0,y.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,y.jsx)(x.gn,{title:"Resend this Reedem Code?",onConfirm:function(){return W(null===n||void 0===n?void 0:n.id)},onCancel:function(){},okText:"Yes",cancelText:"No",disabled:!(null!==n&&void 0!==n&&n.canManage),children:(0,y.jsx)(x.zx,{size:"large",icon:(0,y.jsx)(d.Z,{}),disabled:!(null!==n&&void 0!==n&&n.canDelete)})}),(0,y.jsx)(x.gn,{title:"Are you sure to delete this Reedem Code?",onConfirm:function(){return $(null===n||void 0===n?void 0:n.id)},onCancel:function(){return ee},okText:"Yes",cancelText:"No",disabled:!(null!==n&&void 0!==n&&n.canDelete),children:(0,y.jsx)(x.zx,{size:"large",icon:(0,y.jsx)(u.Z,{}),disabled:!(null!==n&&void 0!==n&&n.canDelete)})})]})}}],te=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(n){var t,r,a,l,o=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2&&void 0!==o[2]?o[2]:20,e.next=4,v.E.custom({url:"",method:"get",metaData:{operation:"loginReedems",variables:{page:{value:n,type:"Int",required:!0},key:{value:t,type:"String",required:!1},pageSize:{value:r,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","code","phone",{user:["id","firstName","lastName","email","middleName","fullName","pic","isActive","isStaff","isAdmin"]},"created","updated","canEdit","canDelete","canManage","isActive","isUsed"]}]}});case 4:a=e.sent,l=a.data,N(l.page),S(l.total),P(l.hasNext),i(l.results),X(!1);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,j.useEffect)((function(){te(b)}),[]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(x.X2,{style:{marginTop:10},children:[(0,y.jsx)(x.JX,{span:10,children:(0,y.jsx)(x.l0,{layout:"vertical",form:Q,onFinish:function(e){N(1),r.length=0,te(1,e.key)},children:(0,y.jsx)(x.l0.Item,{name:"key",children:(0,y.jsx)(x.II,{size:"large",placeholder:"Search ...",prefix:(0,y.jsx)(c.Z,{}),autoComplete:"off",allowClear:!0})})})}),(0,y.jsx)(x.JX,{span:14,style:{display:"flex",justifyContent:"end"},children:(0,y.jsx)(x.zx,{icon:(0,y.jsx)(m.Z,{}),size:"large",onClick:function(){return G(!0)},children:"Reedem"})})]}),(0,y.jsx)(x.iA,{loading:M,columns:ne,dataSource:r,scroll:{x:!0},pagination:{onChange:function(e,n){E(n),te(e,D,n)},total:R,pageSize:A,position:["bottomCenter"],showQuickJumper:!0}}),(0,y.jsxs)(x.u_,{title:"Creating Reedem Code",width:"45vw",visible:_,onOk:function(){},onCancel:function(){return G(!1)},footer:[],children:[(0,y.jsxs)(x.l0,{layout:"vertical",form:Y,onFinish:function(e){K(e)},children:[(0,y.jsx)(x.l0.Item,{name:"phone",label:"Phone Number",rules:[{required:!0,type:"string",message:"Please input Phone Number"}],children:(0,y.jsx)(x.II,{size:"large",placeholder:"Phone Number ...",prefix:(0,y.jsx)(f.Z,{}),autoComplete:"off"})}),(0,y.jsx)(x.l0.Item,{name:"email",label:"Email Address",children:(0,y.jsx)(x.II,{size:"large",placeholder:"Email Address ...",prefix:(0,y.jsx)(h.Z,{}),autoComplete:"off",allowClear:!0})}),(0,y.jsx)(x.l0.Item,{name:"registrationNumber",label:"Registration Number",children:(0,y.jsx)(x.II,{size:"large",placeholder:"Registration Number ...",prefix:(0,y.jsx)(p.Z,{}),autoComplete:"off",allowClear:!0})})]}),(0,y.jsx)("div",{style:{display:"flex",justifyContent:"end"},children:(0,y.jsx)(x.zx,{size:"large",onClick:function(){return Y.submit()},children:"Reedem"})})]})]})},Z=t(20852),b=t(59174),N=t(5397),w=function(){return(0,y.jsxs)("div",{style:{marginTop:10},children:[(0,y.jsxs)(r.Z,{children:[(0,y.jsx)(r.Z.Item,{children:(0,y.jsx)(i.rU,{to:"/control/analytics",children:"Home"})}),(0,y.jsx)(r.Z.Item,{children:"Login Reedems"})]}),(0,y.jsx)(C,{height:80})]})},I=function(){return(0,j.useEffect)((function(){window.history.pushState({},"",(0,b.Z)())}),[]),(0,y.jsx)(Z.u,{children:(0,y.jsx)(N.Q,{children:(0,y.jsx)(w,{})})})}}}]);
//# sourceMappingURL=707.245be8ac.chunk.js.map