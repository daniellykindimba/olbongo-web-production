"use strict";(self.webpackChunkolbongo=self.webpackChunkolbongo||[]).push([[421],{68141:function(e,n,t){t.d(n,{_:function(){return c}});var r=t(29439),i=t(840),a=t(72791),s=t(80184),c=function(e){var n=(0,a.useState)(e.ward.isActive),t=(0,r.Z)(n,2),c=t[0],d=t[1];return(0,a.useEffect)((function(){e.form.setFieldsValue({name:e.ward.name,isActive:e.ward.isActive})}),[e.form,e.ward]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(i.l0,{layout:"vertical",form:e.form,onFinish:function(n){n.isActive=c,n.id=parseInt(e.ward.id),e.onFinish(n)},requiredMark:!1,children:[(0,s.jsx)(i.l0.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:(0,s.jsx)(i.II,{size:"large",placeholder:"Enter Name ..."})}),(0,s.jsx)(i.l0.Item,{name:"isActive",children:(0,s.jsx)(i.XZ,{checked:c,onChange:function(){return d(!c)},children:"Active"})}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,s.jsx)(i.zx,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})}},54836:function(e,n,t){t.r(n),t.d(n,{WardsPage:function(){return I}});var r=t(78164),i=t(43504),a=t(74165),s=t(15861),c=t(29439),d=t(82622),o=t(31752),l=t(11730),u=t(840),f=t(72518),x=t(87012),h=t(72791),m=t(50333),p=t(68141),v=t(80184),j=function(e){var n=(0,h.useState)(),t=(0,c.Z)(n,2),r=t[0],i=t[1],j=(0,h.useState)([]),g=(0,c.Z)(j,2),y=g[0],Z=g[1],w=(0,h.useState)(1),I=(0,c.Z)(w,2),S=I[0],k=I[1],A=(0,h.useState)(0),C=(0,c.Z)(A,2),b=C[0],E=C[1],F=(0,h.useState)(20),q=(0,c.Z)(F,2),D=q[0],z=q[1],N=(0,h.useState)(""),W=(0,c.Z)(N,2),T=W[0],J=(W[1],(0,h.useState)(!1)),M=(0,c.Z)(J,2),P=(M[0],M[1]),X=(0,h.useState)(!0),_=(0,c.Z)(X,2),B=_[0],H=_[1],Q=((0,f.HJ)().push,u.l0.useForm()),O=(0,c.Z)(Q,1)[0],R=u.l0.useForm(),U=(0,c.Z)(R,1)[0],V=!u.rj.useBreakpoint().lg,Y=(0,h.useState)(!1),G=(0,c.Z)(Y,2),K=G[0],L=G[1],$=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.E.custom({url:"",method:"post",metaData:{operation:"updateWard",variables:{id:{value:n.id,type:"Int",required:!0},name:{value:n.name,type:"String",required:!0},isActive:{value:n.isActive,type:"Boolean",required:!0}},fields:["success","message",{ward:["id","name",{district:["id","name",{region:["id","name"]}]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}});case 2:t=e.sent,(r=t.data).success?(u.yw.success(r.message),U.resetFields(),L(!1),Z(y.map((function(e){return e.id===r.ward.id?r.ward:e})))):u.yw.error(r.message);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ee=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.E.custom({url:"",method:"post",metaData:{operation:"deleteWard",variables:{id:{value:parseInt(n.toString()),type:"Int",required:!0}},fields:["success","message"]}});case 2:t=e.sent,(r=t.data).success?(u.yw.success(r.message),Z(y.filter((function(e){return e.id!==n})))):u.yw.error(r.message);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ne=function(){u.yw.info("Canceled")},te=[{title:"Name",dataIndex:"name",fixed:!0,render:function(e,n,t){return(0,v.jsx)("span",{children:(0,v.jsx)("a",{children:n.name})})}},{title:"District",dataIndex:"district",fixed:!0,render:function(e,n,t){return(0,v.jsx)("span",{children:(0,v.jsx)("a",{children:n.district.name})})}},{title:"Region",dataIndex:"region",fixed:!0,render:function(e,n,t){return(0,v.jsx)("span",{children:(0,v.jsx)("a",{children:n.district.region.name})})}},{title:"Created",dataIndex:"created",render:function(e,n,t){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("span",{children:(0,v.jsx)(m.Z,{date:new Date(n.created)})})})}},{title:"Status",dataIndex:"isActive",render:function(e,n,t){return(0,v.jsx)("a",{children:null!==n&&void 0!==n&&n.isActive?(0,v.jsx)("span",{style:{color:"green"},children:"Active"}):(0,v.jsx)("span",{style:{color:"red"},children:"Inactive"})})}},{title:"",dataIndex:"action",render:function(e,n,t){return(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,v.jsx)(u.gn,{title:"Are you sure to delete this Ward?",onConfirm:function(){return ee(null===n||void 0===n?void 0:n.id)},onCancel:function(){return ne},okText:"Yes",cancelText:"No",disabled:!(null!==n&&void 0!==n&&n.canDelete),children:(0,v.jsx)(u.zx,{icon:(0,v.jsx)(d.Z,{}),disabled:!(null!==n&&void 0!==n&&n.canDelete)})}),(0,v.jsx)(u.u,{title:"Edit "+(null===n||void 0===n?void 0:n.name)+" Ward",color:"green",children:(0,v.jsx)(u.zx,{icon:(0,v.jsx)(o.Z,{}),disabled:!(null!==n&&void 0!==n&&n.canEdit),onClick:function(){return function(e){i(e),L(!0)}(n)}})})]})}}],re=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,r,i,s,c=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>1&&void 0!==c[1]?c[1]:"",r=c.length>2&&void 0!==c[2]?c[2]:20,e.next=4,x.E.custom({url:"",method:"get",metaData:{operation:"wards",variables:{page:{value:n,type:"Int",required:!0},key:{value:t,type:"String",required:!1},pageSize:{value:r,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name",{district:["id","name",{region:["id","name"]}]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});case 4:i=e.sent,s=i.data,k(s.page),E(s.total),P(s.hasNext),Z(s.results),H(!1);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){re(S)}),[]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.X2,{style:{marginTop:10},children:(0,v.jsx)(u.JX,{span:V?24:20,children:(0,v.jsx)(u.l0,{layout:"vertical",form:O,onFinish:function(e){k(1),y.length=0,re(1,e.key)},children:(0,v.jsx)(u.l0.Item,{name:"key",children:(0,v.jsx)(u.II,{size:"large",placeholder:"Search ...",prefix:(0,v.jsx)(l.Z,{}),autoComplete:"off",allowClear:!0})})})})}),(0,v.jsx)("div",{children:(0,v.jsx)(u.iA,{loading:B,columns:te,dataSource:y,scroll:{x:!0},pagination:{onChange:function(e,n){z(n),re(e,T,n)},total:b,pageSize:D,position:["bottomCenter"],showQuickJumper:!0}})}),(0,v.jsx)(u.u_,{title:"Edit Ward Informations",width:"20%",visible:K,onOk:function(){L(!1)},onCancel:function(){L(!1)},footer:[],children:(0,v.jsx)(p._,{form:U,ward:r,onFinish:$})})]})},g=t(20852),y=t(59174),Z=t(5397),w=function(){return(0,v.jsxs)("div",{style:{marginTop:10},children:[(0,v.jsxs)(r.Z,{children:[(0,v.jsx)(r.Z.Item,{children:(0,v.jsx)(i.rU,{to:"/control/analytics",children:"Home"})}),(0,v.jsx)(r.Z.Item,{children:"Wards"})]}),(0,v.jsx)(j,{height:80})]})},I=function(){return(0,h.useEffect)((function(){window.history.pushState({},"",(0,y.Z)())}),[]),(0,v.jsx)(g.u,{children:(0,v.jsx)(Z.Q,{children:(0,v.jsx)(w,{})})})}}}]);
//# sourceMappingURL=421.8fd04331.chunk.js.map