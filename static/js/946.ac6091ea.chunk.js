"use strict";(self.webpackChunkolbongo=self.webpackChunkolbongo||[]).push([[946],{7946:function(e,t,n){n.r(t),n.d(t,{ControlDistrictsPage:function(){return I}});var i=n(78164),r=n(43504),s=n(74165),a=n(15861),c=n(29439),o=n(82622),l=n(31752),d=n(11730),u=n(840),f=n(72518),m=n(87012),h=n(72791),x=n(50333),p=n(80184),v=function(e){var t=(0,h.useState)(e.district.isActive),n=(0,c.Z)(t,2),i=n[0],r=n[1];return(0,h.useEffect)((function(){e.form.setFieldsValue({name:e.district.name,isActive:e.district.isActive})}),[e.form,e.district]),(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(u.l0,{layout:"vertical",form:e.form,onFinish:function(t){t.isActive=i,t.id=parseInt(e.district.id),e.onFinish(t)},requiredMark:!1,children:[(0,p.jsx)(u.l0.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:(0,p.jsx)(u.II,{size:"large",placeholder:"Enter Name ..."})}),(0,p.jsx)(u.l0.Item,{name:"isActive",children:(0,p.jsx)(u.XZ,{checked:i,onChange:function(){return r(!i)},children:"Active"})}),(0,p.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,p.jsx)(u.zx,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},j=function(e){var t=(0,h.useState)(),n=(0,c.Z)(t,2),i=n[0],r=n[1],j=(0,h.useState)([]),g=(0,c.Z)(j,2),y=g[0],Z=g[1],w=(0,h.useState)(1),I=(0,c.Z)(w,2),S=I[0],k=I[1],A=(0,h.useState)(0),C=(0,c.Z)(A,2),b=C[0],D=C[1],E=(0,h.useState)(20),F=(0,c.Z)(E,2),q=F[0],z=F[1],N=(0,h.useState)(""),T=(0,c.Z)(N,2),J=T[0],M=(T[1],(0,h.useState)(!1)),P=(0,c.Z)(M,2),X=(P[0],P[1]),B=(0,h.useState)(!0),H=(0,c.Z)(B,2),Q=H[0],O=H[1],R=((0,f.HJ)().push,u.l0.useForm()),U=(0,c.Z)(R,1)[0],V=u.l0.useForm(),Y=(0,c.Z)(V,1)[0],_=!u.rj.useBreakpoint().lg,G=(0,h.useState)(!1),K=(0,c.Z)(G,2),L=K[0],W=K[1],$=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.E.custom({url:"",method:"post",metaData:{operation:"updateDistrict",variables:{id:{value:t.id,type:"Int",required:!0},name:{value:t.name,type:"String",required:!0},isActive:{value:t.isActive,type:"Boolean",required:!0}},fields:["success","message",{district:["id","name",{region:["id","name"]},"created","updated","isActive","canDelete","canEdit","canManage"]}]}});case 2:n=e.sent,(i=n.data).success?(u.yw.success(i.message),Y.resetFields(),W(!1),Z(y.map((function(e){return e.id===i.district.id?i.district:e})))):u.yw.error(i.message);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.E.custom({url:"",method:"post",metaData:{operation:"deleteDistrict",variables:{id:{value:t,type:"Int",required:!0}},fields:["success","message"]}});case 2:n=e.sent,(i=n.data).success?(u.yw.success(i.message),Z(y.filter((function(e){return e.id!==t})))):u.yw.error(i.message);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){u.yw.info("Canceled")},ne=[{title:"Name",dataIndex:"name",fixed:!0,render:function(e,t,n){return(0,p.jsx)("span",{children:(0,p.jsx)("a",{children:t.name})})}},{title:"Region",dataIndex:"region",fixed:!0,render:function(e,t,n){return(0,p.jsx)("span",{children:(0,p.jsx)("a",{children:t.region.name})})}},{title:"Created",dataIndex:"created",render:function(e,t,n){return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("span",{children:(0,p.jsx)(x.Z,{date:new Date(t.created)})})})}},{title:"Status",dataIndex:"isActive",render:function(e,t,n){return(0,p.jsx)("a",{children:null!==t&&void 0!==t&&t.isActive?(0,p.jsx)("span",{style:{color:"green"},children:"Active"}):(0,p.jsx)("span",{style:{color:"red"},children:"Inactive"})})}},{title:"",dataIndex:"action",render:function(e,t,n){return(0,p.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,p.jsx)(u.gn,{title:"Are you sure to delete this member?",onConfirm:function(){return ee(null===t||void 0===t?void 0:t.id)},onCancel:function(){return te},okText:"Yes",cancelText:"No",disabled:!(null!==t&&void 0!==t&&t.canDelete),children:(0,p.jsx)(u.zx,{icon:(0,p.jsx)(o.Z,{}),disabled:!(null!==t&&void 0!==t&&t.canDelete)})}),(0,p.jsx)(u.zx,{disabled:!(null!==t&&void 0!==t&&t.canEdit),icon:(0,p.jsx)(l.Z,{}),onClick:function(){return function(e){r(e),W(!0)}(t)}})]})}}],ie=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,i,r,a,c=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"",i=c.length>2&&void 0!==c[2]?c[2]:20,e.next=4,m.E.custom({url:"",method:"get",metaData:{operation:"districts",variables:{page:{value:t,type:"Int",required:!0},key:{value:n,type:"String",required:!1},pageSize:{value:i,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name",{region:["id","name"]},"isActive","created","updated","canEdit","canDelete","canManage"]}]}});case 4:r=e.sent,a=r.data,k(a.page),D(a.total),X(a.hasNext),Z(a.results),O(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){ie(S)}),[]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(u.X2,{style:{marginTop:10},children:(0,p.jsx)(u.JX,{span:_?24:20,children:(0,p.jsx)(u.l0,{layout:"vertical",form:U,onFinish:function(e){k(1),y.length=0,ie(1,e.key)},children:(0,p.jsx)(u.l0.Item,{name:"key",children:(0,p.jsx)(u.II,{size:"large",placeholder:"Search ...",prefix:(0,p.jsx)(d.Z,{}),autoComplete:"off",allowClear:!0})})})})}),(0,p.jsx)("div",{children:(0,p.jsx)(u.iA,{loading:Q,columns:ne,dataSource:y,scroll:{x:!0},pagination:{onChange:function(e,t){z(t),ie(e,J,t)},total:b,pageSize:q,position:["bottomCenter"],showQuickJumper:!1}})}),(0,p.jsx)(u.u_,{title:"Edit District Informations",width:"20%",visible:L,onOk:function(){W(!1)},onCancel:function(){W(!1)},footer:[],children:(0,p.jsx)(v,{form:Y,district:i,onFinish:$})})]})},g=n(20852),y=n(59174),Z=n(5397),w=function(){return(0,p.jsxs)("div",{style:{marginTop:10},children:[(0,p.jsxs)(i.Z,{children:[(0,p.jsx)(i.Z.Item,{children:(0,p.jsx)(r.rU,{to:"/control/analytics",children:"Home"})}),(0,p.jsx)(i.Z.Item,{children:"Districts"})]}),(0,p.jsx)(j,{height:80})]})},I=function(){var e=(0,f.kS)().data;return(0,h.useEffect)((function(){!1!==(null===e||void 0===e?void 0:e.isStaff)&&!1!==(null===e||void 0===e?void 0:e.isAdmin)||(window.location.pathname="/home"),window.history.pushState({},"",(0,y.Z)())}),[]),(0,p.jsx)(g.u,{children:(0,p.jsx)(Z.Q,{children:(0,p.jsx)(w,{})})})}}}]);
//# sourceMappingURL=946.ac6091ea.chunk.js.map