"use strict";(self.webpackChunkolbongo=self.webpackChunkolbongo||[]).push([[162],{25162:function(e,n,t){t.r(n),t.d(n,{OrdersPaymentsPage:function(){return I}});var r=t(78164),a=t(43504),i=t(93433),s=t(74165),c=t(15861),o=t(29439),d=t(38999),u=t(73956),l=t(82622),m=t(11730),p=t(840),f=t(72518),x=t(87012),h=t(72791),y=t(50333),v=t(80184),g=function(e){var n=(0,h.useState)(),t=(0,o.Z)(n,2),r=(t[0],t[1],(0,h.useState)([])),a=(0,o.Z)(r,2),g=a[0],j=a[1],k=(0,h.useState)(1),Z=(0,o.Z)(k,2),b=Z[0],I=Z[1],w=(0,h.useState)(0),S=(0,o.Z)(w,2),N=S[0],A=S[1],C=(0,h.useState)(20),D=(0,o.Z)(C,2),P=D[0],E=D[1],O=(0,h.useState)(""),T=(0,o.Z)(O,2),M=T[0],q=(T[1],(0,h.useState)(!1)),z=(0,o.Z)(q,2),B=(z[0],z[1]),U=(0,h.useState)(!0),F=(0,o.Z)(U,2),V=F[0],J=F[1],H=((0,f.HJ)().push,p.l0.useForm()),Q=(0,o.Z)(H,1)[0],X=!p.rj.useBreakpoint().lg,L=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(n){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.E.custom({url:"",method:"post",metaData:{operation:"deleteOrderPayment",variables:{orderPaymentId:{value:parseInt(n.toString()),type:"Int",required:!0}},fields:["success","message"]}});case 2:t=e.sent,(r=t.data).success?(p.yw.success(r.message),j(g.filter((function(e){return e.id!==n})))):p.yw.error(r.message);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),R=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(n,t){var r,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.E.custom({url:"",method:"post",metaData:{operation:"blockUnblockOrderPayment",variables:{orderPaymentId:{value:parseInt(n.toString()),type:"Int",required:!0},blocked:{value:t,type:"Boolean",required:!0}},fields:["success","message",{orderPayment:["id","amount","paymentStatus","paymentDate","isActive","created","updated","canEdit","canDelete","canManage",{order:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}]}}).catch((function(e){return t?p.yw.error("Error occured while Unblocking Order Payment"):p.yw.error("Error occured while Blocking Order Payment"),{data:null}})).then((function(e){return e}));case 2:r=e.sent,(a=r.data)&&(a.success?(p.yw.success(a.message),j(g.map((function(e){return e.id===n?a.order:e})))):p.yw.error(a.message));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Y=[{title:"Order#",dataIndex:"order_number",fixed:!0,render:function(e,n,t){return(0,v.jsx)("span",{children:(0,v.jsx)("a",{children:n.orderNumber})})}},{title:"Client",dataIndex:"client",fixed:!0,render:function(e,n,t){return(0,v.jsx)("span",{children:n.user.fullName})}},{title:"Order Amount",dataIndex:"amount",fixed:!0,render:function(e,n,t){return(0,v.jsxs)("span",{children:[n.order.amount,(0,v.jsx)("span",{style:{marginLeft:10},children:n.vatIncluded?(0,v.jsx)(p.Vp,{color:"green",children:"+VAT"}):(0,v.jsx)(p.Vp,{color:"red",children:"1VAT"})})]})}},{title:"Paid Amount",dataIndex:"paidAmount",fixed:!0,render:function(e,n,t){return(0,v.jsx)("span",{children:n.amount})}},{title:"Receipt#",dataIndex:"receipt",fixed:!0,render:function(e,n,t){return(0,v.jsx)("span",{children:n.receiptNumber})}},{title:"Payment Date",dataIndex:"paymentDate",render:function(e,n,t){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("span",{children:(0,v.jsx)(y.Z,{date:new Date(n.paymentDate)})})})}},{title:"Status",dataIndex:"isActive",render:function(e,n,t){return(0,v.jsx)("span",{children:null!==n&&void 0!==n&&n.isActive?(0,v.jsx)("span",{style:{color:"green"},children:"Active"}):(0,v.jsx)("span",{style:{color:"red"},children:"Inactive"})})}},{title:"",dataIndex:"action",render:function(e,n,t){return(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[n.isActive?(0,v.jsx)(p.gn,{title:"Are you sure to Block this Order?",onConfirm:function(){return R(null===n||void 0===n?void 0:n.id,!1)},onCancel:function(){},okText:"Block",cancelText:"No",disabled:!(null!==n&&void 0!==n&&n.canManage),children:(0,v.jsx)(p.zx,{icon:(0,v.jsx)(d.Z,{}),disabled:!(null!==n&&void 0!==n&&n.canManage)})}):(0,v.jsx)(p.gn,{title:"Are you sure to Unblock this Order?",onConfirm:function(){return R(null===n||void 0===n?void 0:n.id,!0)},onCancel:function(){},okText:"Unblock",cancelText:"No",disabled:!(null!==n&&void 0!==n&&n.canManage),children:(0,v.jsx)(p.zx,{icon:(0,v.jsx)(u.Z,{}),disabled:!(null!==n&&void 0!==n&&n.canManage)})}),(0,v.jsx)(p.gn,{title:"Are you sure to delete this Order?",onConfirm:function(){return L(null===n||void 0===n?void 0:n.id)},onCancel:function(){},okText:"Yes",cancelText:"No",disabled:!(null!==n&&void 0!==n&&n.canDelete),children:(0,v.jsx)(p.zx,{icon:(0,v.jsx)(l.Z,{}),disabled:!(null!==n&&void 0!==n&&n.canDelete)})})]})}}],_=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(n){var t,r,a,c,o=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2&&void 0!==o[2]?o[2]:20,e.next=4,x.E.custom({url:"",method:"get",metaData:{operation:"ordersPayments",variables:{page:{value:n,type:"Int",required:!0},key:{value:t,type:"String",required:!1},pageSize:{value:r,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","amount","paymentStatus","paymentDate","isActive","created","updated","canEdit","canDelete","canManage",{order:["id",{user:["id","firstName","middleName","lastName","fullName"]},{package:["id","name","description","code","amount","vatIncluded"]},"title","amount","vatIncluded","orderNumber","paymentStatus","paymentType","internalCallback","isActive","created","updated","canEdit","canDelete","canManage"]}]}]}}).catch((function(e){return p.yw.error("Error occured while fetching Orders Payments"),{data:null}})).then((function(e){return e}));case 4:a=e.sent,(c=a.data)&&(I(c.page),A(c.total),B(c.hasNext),j((0,i.Z)(c.results))),J(!1);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){_(b)}),[]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(p.X2,{style:{marginTop:10},children:(0,v.jsx)(p.JX,{span:X?24:20,children:(0,v.jsx)(p.l0,{layout:"vertical",form:Q,onFinish:function(e){I(1),g.length=0,_(1,e.key)},children:(0,v.jsx)(p.l0.Item,{name:"key",children:(0,v.jsx)(p.II,{size:"large",placeholder:"Search ...",prefix:(0,v.jsx)(m.Z,{}),autoComplete:"off",allowClear:!0})})})})}),(0,v.jsx)(p.iA,{loading:V,columns:Y,dataSource:g,pagination:{onChange:function(e,n){E(n),_(e,M,n)},total:N,pageSize:P,position:["bottomCenter"],showQuickJumper:!1},scroll:{x:!0}})]})},j=t(20852),k=t(59174),Z=t(5397),b=function(){return(0,v.jsxs)("div",{style:{marginTop:10},children:[(0,v.jsxs)(r.Z,{children:[(0,v.jsx)(r.Z.Item,{children:(0,v.jsx)(a.rU,{to:"/control/analytics",children:"Home"})}),(0,v.jsx)(r.Z.Item,{children:"Orders Payments"})]}),(0,v.jsx)(g,{height:80})]})},I=function(){return(0,h.useEffect)((function(){window.history.pushState({},"",(0,k.Z)())}),[]),(0,v.jsx)(j.u,{children:(0,v.jsx)(Z.Q,{children:(0,v.jsx)(b,{})})})}}}]);
//# sourceMappingURL=162.be0ba06a.chunk.js.map