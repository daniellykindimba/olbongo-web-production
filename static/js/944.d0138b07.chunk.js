"use strict";(self.webpackChunkolbongo=self.webpackChunkolbongo||[]).push([[944],{21944:function(e,t,n){n.r(t),n.d(t,{TelecomCarriersPage:function(){return I}});var r=n(78164),a=n(43504),i=n(74165),s=n(15861),c=n(29439),l=n(82622),o=n(31752),u=n(11730),d=n(14057),m=n(840),f=n(72518),h=n(87012),x=n(72791),p=n(50333),y=n(80184),v=function(e){var t=(0,x.useState)(e.carrier.allowPayment),n=(0,c.Z)(t,2),r=n[0],a=n[1],i=(0,x.useState)(e.carrier.isActive),s=(0,c.Z)(i,2),l=s[0],o=s[1];return(0,x.useEffect)((function(){e.form.setFieldsValue({name:e.carrier.name,allowPayment:e.carrier.allowPayment,isActive:e.carrier.isActive})}),[e.form,e.carrier]),(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(m.l0,{layout:"vertical",form:e.form,onFinish:function(t){t.isActive=l,t.allowPayment=r,t.id=parseInt(e.carrier.id),e.onFinish(t)},requiredMark:!1,autoComplete:"off",children:[(0,y.jsx)(m.l0.Item,{name:"name",label:"Name",rules:[{required:!0,type:"string",message:"Please input Name"}],children:(0,y.jsx)(m.II,{size:"large",placeholder:"Enter Name ...",autoComplete:"off"})}),(0,y.jsx)(m.l0.Item,{name:"allowPayment",children:(0,y.jsx)(m.XZ,{checked:r,onChange:function(){return a(!r)},children:"Allow Payment"})}),(0,y.jsx)(m.l0.Item,{name:"isActive",children:(0,y.jsx)(m.XZ,{checked:l,onChange:function(){return o(!l)},children:"Active"})}),(0,y.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,y.jsx)(m.zx,{type:"primary",size:"large",htmlType:"submit",children:"Save"})})]})})},j=function(e){var t=(0,x.useState)(),n=(0,c.Z)(t,2),r=n[0],a=n[1],j=(0,x.useState)([]),g=(0,c.Z)(j,2),w=g[0],Z=g[1],C=(0,x.useState)(1),I=(0,c.Z)(C,2),S=I[0],k=I[1],A=(0,x.useState)(0),P=(0,c.Z)(A,2),b=P[0],E=P[1],T=(0,x.useState)(20),F=(0,c.Z)(T,2),q=F[0],z=F[1],D=(0,x.useState)(""),N=(0,c.Z)(D,2),X=N[0],J=(N[1],(0,x.useState)(!1)),M=(0,c.Z)(J,2),B=(M[0],M[1]),V=(0,x.useState)(!0),H=(0,c.Z)(V,2),O=H[0],Q=H[1],Y=((0,f.HJ)().push,m.l0.useForm()),U=(0,c.Z)(Y,1)[0],_=m.l0.useForm(),G=(0,c.Z)(_,1)[0],K=!m.rj.useBreakpoint().lg,L=(0,x.useState)(!1),R=(0,c.Z)(L,2),W=R[0],$=R[1],ee=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.yw.destroy(),e.next=3,h.E.custom({url:"",method:"post",metaData:{operation:"updateTelecomCarrier",variables:{id:{value:t.id,type:"Int",required:!0},name:{value:t.name,type:"String",required:!0},allowPayment:{value:t.allowPayment,type:"Boolean",required:!0},isActive:{value:t.isActive,type:"Boolean",required:!0}},fields:["success","message",{telecomCarrier:["id","name","allowPayment","created","updated","isActive","canDelete","canEdit","canManage"]}]}}).catch((function(e){return{data:null}})).then((function(e){return e}));case 3:n=e.sent,(r=n.data)&&(r.success?(m.yw.success(r.message),G.resetFields(),$(!1),Z(w.map((function(e){return e.id===r.telecomCarrier.id?r.telecomCarrier:e})))):m.yw.error(r.message));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.E.custom({url:"",method:"post",metaData:{operation:"syncTelecomCarriers",variables:{},fields:["success","message"]}});case 2:t=e.sent,(n=t.data).success?(m.yw.success(n.message),ie(1,"",20)):m.yw.error(n.message);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.yw.destroy(),e.next=3,h.E.custom({url:"",method:"post",metaData:{operation:"deleteTelecomCarrier",variables:{id:{value:t,type:"Int",required:!0}},fields:["success","message"]}});case 3:n=e.sent,(r=n.data).success?(m.yw.success(r.message),Z(w.filter((function(e){return e.id!==t})))):m.yw.error(r.message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){m.yw.info("Canceled")},ae=[{title:"Name",dataIndex:"name",fixed:!0,render:function(e,t,n){return(0,y.jsx)("span",{children:(0,y.jsx)("a",{children:t.name})})}},{title:"Allow Payment",dataIndex:"allowPayment",fixed:!0,render:function(e,t,n){return(0,y.jsx)("span",{children:t.allowPayment?(0,y.jsx)(m.Vp,{color:"green",children:"Yes"}):(0,y.jsx)(m.Vp,{color:"red",children:"NO"})})}},{title:"Created",dataIndex:"created",render:function(e,t,n){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("span",{children:(0,y.jsx)(p.Z,{date:new Date(t.created)})})})}},{title:"Status",dataIndex:"isActive",render:function(e,t,n){return(0,y.jsx)("a",{children:null!==t&&void 0!==t&&t.isActive?(0,y.jsx)("span",{style:{color:"green"},children:"Active"}):(0,y.jsx)("span",{style:{color:"red"},children:"Inactive"})})}},{title:"",dataIndex:"action",render:function(e,t,n){return(0,y.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,y.jsx)(m.gn,{title:"Are you sure to delete this Telecom Carrier?",onConfirm:function(){return ne(null===t||void 0===t?void 0:t.id)},onCancel:function(){return re},okText:"Yes",cancelText:"No",disabled:!(null!==t&&void 0!==t&&t.canDelete),children:(0,y.jsx)(m.zx,{icon:(0,y.jsx)(l.Z,{}),disabled:!(null!==t&&void 0!==t&&t.canDelete)})}),(0,y.jsx)(m.zx,{disabled:!(null!==t&&void 0!==t&&t.canEdit),onClick:function(){return function(e){a(e),$(!0)}(t)},icon:(0,y.jsx)(o.Z,{})})]})}}],ie=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,r,a,s,c=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"",r=c.length>2&&void 0!==c[2]?c[2]:20,m.yw.destroy(),e.next=5,h.E.custom({url:"",method:"get",metaData:{operation:"telecomCarriers",variables:{page:{value:t,type:"Int",required:!0},key:{value:n,type:"String",required:!1},pageSize:{value:r,type:"Int",required:!1}},fields:["total","page","pages","hasNext","hasPrev",{results:["id","name","allowPayment","isActive","created","updated","canEdit","canDelete","canManage"]}]}}).catch((function(e){return m.yw.error(e.message),{data:null}})).then((function(e){return e}));case 5:a=e.sent,(s=a.data)&&(k(s.page),E(s.total),B(s.hasNext),Z(s.results)),Q(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,x.useEffect)((function(){ie(S,"",20)}),[]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(m.X2,{style:{marginTop:10},children:[(0,y.jsx)(m.JX,{span:K?24:20,children:(0,y.jsx)(m.l0,{layout:"vertical",form:U,onFinish:function(e){k(1),w.length=0,ie(1,e.key)},children:(0,y.jsx)(m.l0.Item,{name:"key",children:(0,y.jsx)(m.II,{size:"large",placeholder:"Search ...",prefix:(0,y.jsx)(u.Z,{}),autoComplete:"off",allowClear:!0})})})}),(0,y.jsx)(m.JX,{span:K?24:4,style:{display:"flex",justifyContent:"flex-end"},children:(0,y.jsx)(m.zx,{size:"large",icon:(0,y.jsx)(d.Z,{}),onClick:function(){return te()},children:"Sync Mtaa"})})]}),(0,y.jsx)("div",{children:(0,y.jsx)(m.iA,{loading:O,columns:ae,dataSource:w,scroll:{x:!0},pagination:{onChange:function(e,t){z(t),ie(e,X,t)},total:b,pageSize:q,position:["bottomCenter"],showQuickJumper:!0}})}),(0,y.jsx)(m.u_,{title:"Edit Telecom Carrier Informations",width:"20%",visible:W,onOk:function(){$(!1)},onCancel:function(){$(!1)},footer:[],children:(0,y.jsx)(v,{form:G,carrier:r,onFinish:ee})})]})},g=n(20852),w=n(59174),Z=n(5397),C=function(){return(0,y.jsxs)("div",{style:{marginTop:10},children:[(0,y.jsxs)(r.Z,{children:[(0,y.jsx)(r.Z.Item,{children:(0,y.jsx)(a.rU,{to:"/control/analytics",children:"Home"})}),(0,y.jsx)(r.Z.Item,{children:"Telecom Carriers"})]}),(0,y.jsx)(j,{height:80})]})},I=function(){return(0,x.useEffect)((function(){window.history.pushState({},"",(0,w.Z)())}),[]),(0,y.jsx)(g.u,{children:(0,y.jsx)(Z.Q,{children:(0,y.jsx)(C,{})})})}}}]);
//# sourceMappingURL=944.d0138b07.chunk.js.map